<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/Tetraedriser_homogene_compact.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/Tetraedriser_homogene_compact.cpp</div>  </div>
</div>
<div class="contents">
<a href="Tetraedriser__homogene__compact_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Tetraedriser_homogene_compact.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Geometrie</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/20</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Tetraedriser__homogene__compact_8h.html">Tetraedriser_homogene_compact.h</a>&gt;</span>
<a name="l00024"></a>00024 
<a name="l00025"></a><a class="code" href="Tetraedriser__homogene__compact_8cpp.html#a7f3daad5e418f7d33cbf3b6f9194cc64">00025</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classTetraedriser__homogene__compact.html">Tetraedriser_homogene_compact</a>,<span class="stringliteral">&quot;Tetraedriser_homogene_compact&quot;</span>,<a class="code" href="classTriangulation__base.html" title="Triangulation_base Classe destinee a factoriser l&#39;action de triangulation des interpretes de type Tri...">Triangulation_base</a>);
<a name="l00026"></a>00026 
<a name="l00027"></a><a class="code" href="classTetraedriser__homogene__compact.html#a6029326d0fcbe7e744e26cab4ce28d98">00027</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classTetraedriser__homogene__compact.html#a6029326d0fcbe7e744e26cab4ce28d98" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Tetraedriser_homogene_compact::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00028"></a>00028 <span class="keyword"></span>{
<a name="l00029"></a>00029   <span class="keywordflow">return</span> <a class="code" href="classTetraedriser__homogene__compact.html#a6029326d0fcbe7e744e26cab4ce28d98" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Interprete::printOn</a>(os);
<a name="l00030"></a>00030 }
<a name="l00031"></a>00031 
<a name="l00032"></a><a class="code" href="classTetraedriser__homogene__compact.html#a43acb82ed9a3947d27834e458eae4545">00032</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTetraedriser__homogene__compact.html#a43acb82ed9a3947d27834e458eae4545" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Tetraedriser_homogene_compact::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00033"></a>00033 {
<a name="l00034"></a>00034   <span class="keywordflow">return</span> <a class="code" href="classTetraedriser__homogene__compact.html#a43acb82ed9a3947d27834e458eae4545" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Interprete::readOn</a>(is);
<a name="l00035"></a>00035 }
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="comment">// Traitement des faces</span>
<a name="l00038"></a>00038 <span class="comment">// </span>
<a name="l00039"></a><a class="code" href="classTetraedriser__homogene__compact.html#a368c541002860020c2403d1dcdadcd89">00039</a> <span class="keywordtype">void</span> <a class="code" href="classTetraedriser__homogene__compact.html#a368c541002860020c2403d1dcdadcd89">Tetraedriser_homogene_compact::decoupe</a>(<a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone, <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces, <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; new_soms_old_elems,<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; fait_sommet, <span class="keywordtype">int</span> nface)<span class="keyword"> const</span>
<a name="l00040"></a>00040 <span class="keyword"></span>{
<a name="l00041"></a>00041   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; sommets=faces.<a class="code" href="classFaces.html#a07b8d8db9e3d656b93a21a49c063430c">les_sommets</a>();
<a name="l00042"></a>00042   <span class="keywordtype">int</span> nb_faces=sommets.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00043"></a>00043   assert(sommets.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1)==4);
<a name="l00044"></a>00044   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> nouveaux(4*nb_faces, 3);
<a name="l00045"></a>00045   faces.<a class="code" href="classFaces.html#af49c4448e67aa7c732c2cc1dc237b442" title="Renvoie le tableau des voisins (des faces).">voisins</a>().<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(4*nb_faces, 2);
<a name="l00046"></a>00046   faces.<a class="code" href="classFaces.html#af49c4448e67aa7c732c2cc1dc237b442" title="Renvoie le tableau des voisins (des faces).">voisins</a>()=-1;
<a name="l00047"></a>00047   <a class="code" href="classIntVect.html">IntVect</a> indice(5);
<a name="l00048"></a>00048 
<a name="l00049"></a>00049   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_faces; i++)
<a name="l00050"></a>00050     {
<a name="l00051"></a>00051       indice(0) = sommets(i,0);
<a name="l00052"></a>00052       indice(1) = sommets(i,1);
<a name="l00053"></a>00053       indice(2) = sommets(i,2);
<a name="l00054"></a>00054       indice(3) = sommets(i,3);
<a name="l00055"></a>00055 
<a name="l00056"></a>00056       <span class="keywordtype">int</span> i0=indice(0);
<a name="l00057"></a>00057       <span class="keywordtype">int</span> i1=indice(1);
<a name="l00058"></a>00058       <span class="keywordtype">int</span> i2=indice(2);
<a name="l00059"></a>00059       <span class="keywordtype">int</span> i3=indice(3);
<a name="l00060"></a>00060       <span class="keywordtype">int</span> i4=-1;
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="comment">// on remet un peu d&#39;ordre dans les indices</span>
<a name="l00063"></a>00063 
<a name="l00064"></a>00064       <span class="keywordtype">int</span> permut,ind;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066       <span class="keywordflow">do</span>
<a name="l00067"></a>00067         {
<a name="l00068"></a>00068           permut=0;
<a name="l00069"></a>00069           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=1; j&lt;4; j++)
<a name="l00070"></a>00070             {
<a name="l00071"></a>00071               <span class="keywordflow">if</span>( indice[j]&lt;indice[j-1] )
<a name="l00072"></a>00072                 {
<a name="l00073"></a>00073                   ind=indice[j-1];
<a name="l00074"></a>00074                   indice[j-1]=indice[j];
<a name="l00075"></a>00075                   indice[j]=ind;
<a name="l00076"></a>00076                   permut++;
<a name="l00077"></a>00077                 }
<a name="l00078"></a>00078             }
<a name="l00079"></a>00079         }
<a name="l00080"></a>00080       <span class="keywordflow">while</span>(permut);
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 
<a name="l00083"></a>00083       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0 ; ii&lt;nface ; ii++)
<a name="l00084"></a>00084         {
<a name="l00085"></a>00085           <span class="keywordflow">if</span> ( fait_sommet(ii,0)==indice[0] &amp;&amp; fait_sommet(ii,1)==indice[1] &amp;&amp; fait_sommet(ii,2)==indice[2] )
<a name="l00086"></a>00086             {
<a name="l00087"></a>00087               i4=fait_sommet(ii,3);
<a name="l00088"></a>00088               <span class="keywordflow">break</span>;
<a name="l00089"></a>00089             }
<a name="l00090"></a>00090         }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092       <span class="keywordflow">if</span>(indice(4)&lt;0)
<a name="l00093"></a>00093         {
<a name="l00094"></a>00094 <span class="comment">// Cerr &lt;&lt; indice(0) &lt;&lt; &quot; &quot; &lt;&lt; indice(1) &lt;&lt; &quot; &quot; &lt;&lt; indice(2)  &lt;&lt; finl;</span>
<a name="l00095"></a>00095           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; FALSE &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00096"></a>00096           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00097"></a>00097         }
<a name="l00098"></a>00098       assert(indice(4)&gt;=0);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100       nouveaux(i,0) = i0;
<a name="l00101"></a>00101       nouveaux(i,1) = i1;
<a name="l00102"></a>00102       nouveaux(i,2) = i4;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104       nouveaux(nb_faces+i,0) = i1;
<a name="l00105"></a>00105       nouveaux(nb_faces+i,1) = i3;
<a name="l00106"></a>00106       nouveaux(nb_faces+i,2) = i4;
<a name="l00107"></a>00107 
<a name="l00108"></a>00108       nouveaux(2*nb_faces+i,0) = i3;
<a name="l00109"></a>00109       nouveaux(2*nb_faces+i,1) = i2;
<a name="l00110"></a>00110       nouveaux(2*nb_faces+i,2) = i4;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112       nouveaux(3*nb_faces+i,0) = i2;
<a name="l00113"></a>00113       nouveaux(3*nb_faces+i,1) = i0;
<a name="l00114"></a>00114       nouveaux(3*nb_faces+i,2) = i4;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     }
<a name="l00117"></a>00117   sommets.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(nouveaux);
<a name="l00118"></a>00118 }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 <span class="comment">// </span>
<a name="l00121"></a>00121 <span class="comment">// ATTENTION: ne considere qu&#39;une seule zone pour l&#39;instant...</span>
<a name="l00122"></a>00122 <span class="comment">// </span>
<a name="l00123"></a><a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">00123</a> <span class="keywordtype">int</span> <a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">Tetraedriser_homogene_compact::creer_sommet</a> (
<a name="l00124"></a>00124   <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom,
<a name="l00125"></a>00125   <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone,
<a name="l00126"></a>00126   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; new_soms,
<a name="l00127"></a>00127   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_traite,
<a name="l00128"></a>00128   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; new_soms_old_elems,
<a name="l00129"></a>00129   <span class="keywordtype">int</span> NbSom, <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; sommets,
<a name="l00130"></a>00130   <span class="keywordtype">int</span>&amp; <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>,
<a name="l00131"></a>00131   <span class="keywordtype">int</span> oldnbsom, <span class="keywordtype">int</span>&amp; nbnewsoms,<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; fait_sommet, <span class="keywordtype">int</span>&amp; nface )<span class="keyword"> const</span>
<a name="l00132"></a>00132 <span class="keyword"></span>{
<a name="l00133"></a>00133 
<a name="l00134"></a>00134   <span class="keywordtype">int</span> _out=-1;
<a name="l00135"></a>00135   <span class="keywordflow">if</span>(NbSom==4) <span class="comment">//!&lt; On verifie que le sommet rattache a une face n&#39;a pas ete cree ulterieurement</span>
<a name="l00136"></a>00136 <span class="comment"></span>    {
<a name="l00137"></a>00137       <span class="keywordtype">int</span> permut,som;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139       <span class="keywordflow">do</span>
<a name="l00140"></a>00140         {
<a name="l00141"></a>00141           permut=0;
<a name="l00142"></a>00142           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=1; j&lt;4; j++)
<a name="l00143"></a>00143             {
<a name="l00144"></a>00144               <span class="keywordflow">if</span>( sommets[j]&lt;sommets[j-1] )
<a name="l00145"></a>00145                 {
<a name="l00146"></a>00146                   som=sommets[j-1];
<a name="l00147"></a>00147                   sommets[j-1]=sommets[j];
<a name="l00148"></a>00148                   sommets[j]=som;
<a name="l00149"></a>00149                   permut++;
<a name="l00150"></a>00150                 }
<a name="l00151"></a>00151             }
<a name="l00152"></a>00152         }
<a name="l00153"></a>00153       <span class="keywordflow">while</span>(permut);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 
<a name="l00157"></a>00157       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0 ; i&lt;nface ; i++)
<a name="l00158"></a>00158         <span class="keywordflow">if</span> (fait_sommet(i,0)==sommets[0] &amp;&amp; fait_sommet(i,1)==sommets[1] &amp;&amp; fait_sommet(i,2)==sommets[2]) <span class="keywordflow">return</span> fait_sommet(i,3);
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_sommets=dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00162"></a>00162 
<a name="l00163"></a>00163   <span class="keywordtype">double</span> x=0,y=0,z=0;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0 ; ii&lt;NbSom ; ii++)
<a name="l00166"></a>00166     {
<a name="l00167"></a>00167       x += coord_sommets(sommets(ii),0);
<a name="l00168"></a>00168       y += coord_sommets(sommets(ii),1);
<a name="l00169"></a>00169       z += coord_sommets(sommets(ii),2);
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171   x /= NbSom;
<a name="l00172"></a>00172   y /= NbSom;
<a name="l00173"></a>00173   z /= NbSom;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   _out = oldnbsom + nbnewsoms;
<a name="l00178"></a>00178   new_soms(compteur, 0) = x;
<a name="l00179"></a>00179   new_soms(compteur, 1) = y;
<a name="l00180"></a>00180   new_soms(compteur, 2) = z;
<a name="l00181"></a>00181   nbnewsoms++;
<a name="l00182"></a>00182   compteur++;
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <span class="keywordflow">if</span>(NbSom==4)
<a name="l00185"></a>00185     {
<a name="l00186"></a>00186       fait_sommet(nface,  0)=sommets[0];
<a name="l00187"></a>00187       fait_sommet(nface,  1)=sommets[1];
<a name="l00188"></a>00188       fait_sommet(nface,  2)=sommets[2];
<a name="l00189"></a>00189       fait_sommet(nface,  3)=_out;
<a name="l00190"></a>00190 <span class="comment">// Cerr &lt;&lt; sommets(0) &lt;&lt; &quot; &quot; &lt;&lt; sommets(1) &lt;&lt; &quot; &quot; &lt;&lt; sommets(2) &lt;&lt; &quot; &quot; &lt;&lt; _out &lt;&lt; finl;</span>
<a name="l00191"></a>00191       nface++;
<a name="l00192"></a>00192     }
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   <span class="keywordflow">return</span> _out;
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 
<a name="l00197"></a><a class="code" href="classTetraedriser__homogene__compact.html#ad69561557fdfebffa224f051d72e7231">00197</a> <span class="keywordtype">void</span> <a class="code" href="classTetraedriser__homogene__compact.html#ad69561557fdfebffa224f051d72e7231">Tetraedriser_homogene_compact::trianguler</a>(<a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone)<span class="keyword"> const</span>
<a name="l00198"></a>00198 <span class="keyword"></span>{
<a name="l00199"></a>00199   <span class="keywordflow">if</span>  ((zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Hexaedre&quot;</span>)
<a name="l00200"></a>00200        ||(zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Hexaedre_VEF&quot;</span>))
<a name="l00201"></a>00201     {
<a name="l00202"></a>00202       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems = zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00203"></a>00203       <span class="keywordtype">int</span> oldsz = les_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00204"></a>00204       <span class="keywordtype">int</span> nbs = zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>();
<a name="l00205"></a>00205       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> elem_traite(oldsz);
<a name="l00206"></a>00206       <span class="keywordtype">int</span> oldnbsom = zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>();
<a name="l00207"></a>00207       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> new_elems(24*oldsz, 4);
<a name="l00208"></a>00208 <span class="comment">// pour chaque cube, liste des nouveaux sommets qu&#39;il contient :</span>
<a name="l00209"></a>00209       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> new_soms_old_elems(oldsz,7);
<a name="l00210"></a>00210       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> sommets(8);
<a name="l00211"></a>00211       <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom = zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>();
<a name="l00212"></a>00212       <span class="keywordtype">int</span> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a> = 0;
<a name="l00213"></a>00213       <span class="keywordtype">int</span> nbnewsoms = 0;
<a name="l00214"></a>00214       <span class="keywordtype">int</span> nface = 0;
<a name="l00215"></a>00215       <span class="keywordtype">int</span> i;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; NB ELEM : &quot;</span> &lt;&lt; oldsz &lt;&lt; <span class="stringliteral">&quot; NB NODE : &quot;</span> &lt;&lt; nbs &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00218"></a>00218       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> fait_sommet(3*nbs,4); <span class="comment">//!&lt; PQ : 04-03 : dimensionnement de fait_sommet a 3*nbs (a revoir si insuffisant)</span>
<a name="l00219"></a>00219 <span class="comment"></span>      fait_sommet=-1;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="comment">// Construction de l&#39;Octree sur la grille &quot;VDF&quot; de base</span>
<a name="l00223"></a>00223 
<a name="l00224"></a>00224       zone.<a class="code" href="classZone.html#a492c53ea54616079fb65c18f7726ebc9">construit_octree</a>();
<a name="l00225"></a>00225 
<a name="l00226"></a>00226 <span class="comment">// On dimensionne une premiere fois le tableau des sommets avec la dimension maximun</span>
<a name="l00227"></a>00227 <span class="comment">// puis on redimensionnera seulement a la fin par la dimension exacte</span>
<a name="l00228"></a>00228 
<a name="l00229"></a>00229       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; sommets_dom = dom.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>();
<a name="l00230"></a>00230 <span class="comment">// 8 pour les nouveaux sommets et 8 pour les anciens sommets =16</span>
<a name="l00231"></a>00231       <span class="keywordtype">int</span> dim_som_max=16*oldsz;
<a name="l00232"></a>00232       <span class="keywordtype">int</span> dim_som_old=sommets_dom.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00233"></a>00233       sommets_dom.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dim_som_max,3);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> indice(8);
<a name="l00236"></a>00236       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> new_soms(7, 3);
<a name="l00237"></a>00237 
<a name="l00238"></a>00238       <span class="keywordflow">for</span>(i=0; i&lt; oldsz; i++)
<a name="l00239"></a>00239         {
<a name="l00240"></a>00240           <span class="keywordflow">if</span> (nface&gt;=3*nbs)
<a name="l00241"></a>00241             {
<a name="l00242"></a>00242               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; The sizing of the array fait_sommet in Tetraedriser_homogene_compact::Trianguler is inappropriate &quot;</span> &lt;&lt; finl;
<a name="l00243"></a>00243               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00244"></a>00244             }
<a name="l00245"></a>00245 
<a name="l00246"></a>00246           <span class="keywordtype">int</span> i0=les_elems(i,0);
<a name="l00247"></a>00247           <span class="keywordtype">int</span> i1=les_elems(i,1);
<a name="l00248"></a>00248           <span class="keywordtype">int</span> i2=les_elems(i,2);
<a name="l00249"></a>00249           <span class="keywordtype">int</span> i3=les_elems(i,3);
<a name="l00250"></a>00250           <span class="keywordtype">int</span> i4=les_elems(i,4);
<a name="l00251"></a>00251           <span class="keywordtype">int</span> i5=les_elems(i,5);
<a name="l00252"></a>00252           <span class="keywordtype">int</span> i6=les_elems(i,6);
<a name="l00253"></a>00253           <span class="keywordtype">int</span> i7=les_elems(i,7);
<a name="l00254"></a>00254 
<a name="l00255"></a>00255           compteur = 0;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257 <span class="comment">// Definition des nouveaux sommets : creation des barycentres</span>
<a name="l00258"></a>00258 <span class="comment">// centre de l&#39;hexaedre</span>
<a name="l00259"></a>00259 
<a name="l00260"></a>00260           sommets(0)=i0;
<a name="l00261"></a>00261           sommets(1)=i1;
<a name="l00262"></a>00262           sommets(2)=i2;
<a name="l00263"></a>00263           sommets(3)=i3;
<a name="l00264"></a>00264           sommets(4)=i4;
<a name="l00265"></a>00265           sommets(5)=i5;
<a name="l00266"></a>00266           sommets(6)=i6;
<a name="l00267"></a>00267           sommets(7)=i7;
<a name="l00268"></a>00268           indice(0)  =
<a name="l00269"></a>00269             <a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 8, sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface);
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="comment">// centres des faces bas (0-1-3-2)</span>
<a name="l00272"></a>00272           sommets(0)=i0;
<a name="l00273"></a>00273           sommets(1)=i1;
<a name="l00274"></a>00274           sommets(2)=i3;
<a name="l00275"></a>00275           sommets(3)=i2;
<a name="l00276"></a>00276           indice(1)  =
<a name="l00277"></a>00277             <a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4, sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface);
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 <span class="comment">// centres des faces haut (4-5-7-6)</span>
<a name="l00280"></a>00280           sommets(0)=i4;
<a name="l00281"></a>00281           sommets(1)=i5;
<a name="l00282"></a>00282           sommets(2)=i7;
<a name="l00283"></a>00283           sommets(3)=i6;
<a name="l00284"></a>00284           indice(4)  =
<a name="l00285"></a>00285             <a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4, sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287 <span class="comment">// centres des faces avant (0-1-5-4)</span>
<a name="l00288"></a>00288           sommets(0)=i0;
<a name="l00289"></a>00289           sommets(1)=i1;
<a name="l00290"></a>00290           sommets(2)=i5;
<a name="l00291"></a>00291           sommets(3)=i4;
<a name="l00292"></a>00292           indice(3)  =
<a name="l00293"></a>00293             <a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4, sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface);
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 <span class="comment">// centres des faces arriere (2-3-7-6)</span>
<a name="l00296"></a>00296           sommets(0)=i2;
<a name="l00297"></a>00297           sommets(1)=i3;
<a name="l00298"></a>00298           sommets(2)=i7;
<a name="l00299"></a>00299           sommets(3)=i6;
<a name="l00300"></a>00300           indice(6)  =
<a name="l00301"></a>00301             <a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4, sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface);
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 <span class="comment">// centres des faces gauche (0-2-6-4)</span>
<a name="l00304"></a>00304           sommets(0)=i0;
<a name="l00305"></a>00305           sommets(1)=i2;
<a name="l00306"></a>00306           sommets(2)=i6;
<a name="l00307"></a>00307           sommets(3)=i4;
<a name="l00308"></a>00308           indice(2)  =
<a name="l00309"></a>00309             <a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4, sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface);
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 <span class="comment">// centres des faces droite (1-3-7-5)</span>
<a name="l00312"></a>00312           sommets(0)=i1;
<a name="l00313"></a>00313           sommets(1)=i3;
<a name="l00314"></a>00314           sommets(2)=i7;
<a name="l00315"></a>00315           sommets(3)=i5;
<a name="l00316"></a>00316           indice(5)  =
<a name="l00317"></a>00317             <a class="code" href="classTetraedriser__homogene__compact.html#a8c658096e879b4ec71e15ba941bf3c3a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4, sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319 <span class="comment">// Liste des nouveaux sommets pour cet ancien cube</span>
<a name="l00320"></a>00320           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t=0; t&lt;7; t++)
<a name="l00321"></a>00321             {
<a name="l00322"></a>00322               new_soms_old_elems(i, t) = indice(t);
<a name="l00323"></a>00323               <span class="keywordflow">if</span>(indice(t)&lt;0)
<a name="l00324"></a>00324                 {
<a name="l00325"></a>00325                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error negative index&quot;</span> &lt;&lt; finl;
<a name="l00326"></a>00326                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00327"></a>00327                 }
<a name="l00328"></a>00328               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> s=0; s&lt;t; s++)
<a name="l00329"></a>00329                 <span class="keywordflow">if</span>(indice(s)==indice(t))
<a name="l00330"></a>00330                   {
<a name="l00331"></a>00331                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error repeated index&quot;</span> &lt;&lt; finl;
<a name="l00332"></a>00332                     <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00333"></a>00333                   }
<a name="l00334"></a>00334             }
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 
<a name="l00337"></a>00337           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>; j++)
<a name="l00338"></a>00338             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;3; k++)
<a name="l00339"></a>00339               sommets_dom(dim_som_old+j,k)=new_soms(j,k) ;
<a name="l00340"></a>00340           dim_som_old += <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>;
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 <span class="comment">// L&#39;element en cours a ete &quot;traite&quot; en entier</span>
<a name="l00343"></a>00343           elem_traite(i) = 1;
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 <span class="comment">// pyramide bas (base : 0-1-3-2)</span>
<a name="l00347"></a>00347 
<a name="l00348"></a>00348           new_elems(i, 0) = les_elems(i,0);
<a name="l00349"></a>00349           new_elems(i, 1) = les_elems(i,1);
<a name="l00350"></a>00350           new_elems(i, 2) = indice(1);
<a name="l00351"></a>00351           new_elems(i, 3) = indice(0);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353           new_elems(i+oldsz, 0) = les_elems(i,1);
<a name="l00354"></a>00354           new_elems(i+oldsz, 1) = les_elems(i,3);
<a name="l00355"></a>00355           new_elems(i+oldsz, 2) = indice(1);
<a name="l00356"></a>00356           new_elems(i+oldsz, 3) = indice(0);
<a name="l00357"></a>00357           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+oldsz,1);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359           new_elems(i+2*oldsz, 0) = les_elems(i,3);
<a name="l00360"></a>00360           new_elems(i+2*oldsz, 1) = les_elems(i,2);
<a name="l00361"></a>00361           new_elems(i+2*oldsz, 2) = indice(1);
<a name="l00362"></a>00362           new_elems(i+2*oldsz, 3) = indice(0);
<a name="l00363"></a>00363           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+2*oldsz,1);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365           new_elems(i+3*oldsz, 0) = les_elems(i,2);
<a name="l00366"></a>00366           new_elems(i+3*oldsz, 1) = les_elems(i,0);
<a name="l00367"></a>00367           new_elems(i+3*oldsz, 2) = indice(1);
<a name="l00368"></a>00368           new_elems(i+3*oldsz, 3) = indice(0);
<a name="l00369"></a>00369           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+3*oldsz,1);
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 <span class="comment">// pyramide haut (base : 4-5-7-6)</span>
<a name="l00373"></a>00373 
<a name="l00374"></a>00374           new_elems(i+4*oldsz, 0) = les_elems(i,4);
<a name="l00375"></a>00375           new_elems(i+4*oldsz, 1) = les_elems(i,5);
<a name="l00376"></a>00376           new_elems(i+4*oldsz, 2) = indice(4);
<a name="l00377"></a>00377           new_elems(i+4*oldsz, 3) = indice(0);
<a name="l00378"></a>00378           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+4*oldsz,1);
<a name="l00379"></a>00379 
<a name="l00380"></a>00380           new_elems(i+5*oldsz, 0) = les_elems(i,5);
<a name="l00381"></a>00381           new_elems(i+5*oldsz, 1) = les_elems(i,7);
<a name="l00382"></a>00382           new_elems(i+5*oldsz, 2) = indice(4);
<a name="l00383"></a>00383           new_elems(i+5*oldsz, 3) = indice(0);
<a name="l00384"></a>00384           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+5*oldsz,1);
<a name="l00385"></a>00385 
<a name="l00386"></a>00386           new_elems(i+6*oldsz, 0) = les_elems(i,7);
<a name="l00387"></a>00387           new_elems(i+6*oldsz, 1) = les_elems(i,6);
<a name="l00388"></a>00388           new_elems(i+6*oldsz, 2) = indice(4);
<a name="l00389"></a>00389           new_elems(i+6*oldsz, 3) = indice(0);
<a name="l00390"></a>00390           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+6*oldsz,1);
<a name="l00391"></a>00391 
<a name="l00392"></a>00392           new_elems(i+7*oldsz, 0) = les_elems(i,6);
<a name="l00393"></a>00393           new_elems(i+7*oldsz, 1) = les_elems(i,4);
<a name="l00394"></a>00394           new_elems(i+7*oldsz, 2) = indice(4);
<a name="l00395"></a>00395           new_elems(i+7*oldsz, 3) = indice(0);
<a name="l00396"></a>00396           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+7*oldsz,1);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 <span class="comment">// pyramide avant (base : 0-1-5-4)</span>
<a name="l00400"></a>00400 
<a name="l00401"></a>00401           new_elems(i+8*oldsz, 0) = les_elems(i,0);
<a name="l00402"></a>00402           new_elems(i+8*oldsz, 1) = les_elems(i,1);
<a name="l00403"></a>00403           new_elems(i+8*oldsz, 2) = indice(3);
<a name="l00404"></a>00404           new_elems(i+8*oldsz, 3) = indice(0);
<a name="l00405"></a>00405           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+8*oldsz,1);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407           new_elems(i+9*oldsz, 0) = les_elems(i,1);
<a name="l00408"></a>00408           new_elems(i+9*oldsz, 1) = les_elems(i,5);
<a name="l00409"></a>00409           new_elems(i+9*oldsz, 2) = indice(3);
<a name="l00410"></a>00410           new_elems(i+9*oldsz, 3) = indice(0);
<a name="l00411"></a>00411           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+9*oldsz,1);
<a name="l00412"></a>00412 
<a name="l00413"></a>00413           new_elems(i+10*oldsz, 0) = les_elems(i,5);
<a name="l00414"></a>00414           new_elems(i+10*oldsz, 1) = les_elems(i,4);
<a name="l00415"></a>00415           new_elems(i+10*oldsz, 2) = indice(3);
<a name="l00416"></a>00416           new_elems(i+10*oldsz, 3) = indice(0);
<a name="l00417"></a>00417           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+10*oldsz,1);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419           new_elems(i+11*oldsz, 0) = les_elems(i,4);
<a name="l00420"></a>00420           new_elems(i+11*oldsz, 1) = les_elems(i,0);
<a name="l00421"></a>00421           new_elems(i+11*oldsz, 2) = indice(3);
<a name="l00422"></a>00422           new_elems(i+11*oldsz, 3) = indice(0);
<a name="l00423"></a>00423           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+11*oldsz,1);
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 <span class="comment">// pyramide arriere (base : 2-3-7-6)</span>
<a name="l00427"></a>00427 
<a name="l00428"></a>00428           new_elems(i+12*oldsz, 0) = les_elems(i,2);
<a name="l00429"></a>00429           new_elems(i+12*oldsz, 1) = les_elems(i,3);
<a name="l00430"></a>00430           new_elems(i+12*oldsz, 2) = indice(6);
<a name="l00431"></a>00431           new_elems(i+12*oldsz, 3) = indice(0);
<a name="l00432"></a>00432           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+12*oldsz,1);
<a name="l00433"></a>00433 
<a name="l00434"></a>00434           new_elems(i+13*oldsz, 0) = les_elems(i,3);
<a name="l00435"></a>00435           new_elems(i+13*oldsz, 1) = les_elems(i,7);
<a name="l00436"></a>00436           new_elems(i+13*oldsz, 2) = indice(6);
<a name="l00437"></a>00437           new_elems(i+13*oldsz, 3) = indice(0);
<a name="l00438"></a>00438           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+13*oldsz,1);
<a name="l00439"></a>00439 
<a name="l00440"></a>00440           new_elems(i+14*oldsz, 0) = les_elems(i,7);
<a name="l00441"></a>00441           new_elems(i+14*oldsz, 1) = les_elems(i,6);
<a name="l00442"></a>00442           new_elems(i+14*oldsz, 2) = indice(6);
<a name="l00443"></a>00443           new_elems(i+14*oldsz, 3) = indice(0);
<a name="l00444"></a>00444           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+14*oldsz,1);
<a name="l00445"></a>00445 
<a name="l00446"></a>00446           new_elems(i+15*oldsz, 0) = les_elems(i,6);
<a name="l00447"></a>00447           new_elems(i+15*oldsz, 1) = les_elems(i,2);
<a name="l00448"></a>00448           new_elems(i+15*oldsz, 2) = indice(6);
<a name="l00449"></a>00449           new_elems(i+15*oldsz, 3) = indice(0);
<a name="l00450"></a>00450           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+15*oldsz,1);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452 
<a name="l00453"></a>00453 <span class="comment">// pyramide gauche (base : 0-2-6-4)</span>
<a name="l00454"></a>00454 
<a name="l00455"></a>00455           new_elems(i+16*oldsz, 0) = les_elems(i,0);
<a name="l00456"></a>00456           new_elems(i+16*oldsz, 1) = les_elems(i,2);
<a name="l00457"></a>00457           new_elems(i+16*oldsz, 2) = indice(2);
<a name="l00458"></a>00458           new_elems(i+16*oldsz, 3) = indice(0);
<a name="l00459"></a>00459           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+16*oldsz,1);
<a name="l00460"></a>00460 
<a name="l00461"></a>00461           new_elems(i+17*oldsz, 0) = les_elems(i,2);
<a name="l00462"></a>00462           new_elems(i+17*oldsz, 1) = les_elems(i,6);
<a name="l00463"></a>00463           new_elems(i+17*oldsz, 2) = indice(2);
<a name="l00464"></a>00464           new_elems(i+17*oldsz, 3) = indice(0);
<a name="l00465"></a>00465           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+17*oldsz,1);
<a name="l00466"></a>00466 
<a name="l00467"></a>00467           new_elems(i+18*oldsz, 0) = les_elems(i,6);
<a name="l00468"></a>00468           new_elems(i+18*oldsz, 1) = les_elems(i,4);
<a name="l00469"></a>00469           new_elems(i+18*oldsz, 2) = indice(2);
<a name="l00470"></a>00470           new_elems(i+18*oldsz, 3) = indice(0);
<a name="l00471"></a>00471           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+18*oldsz,1);
<a name="l00472"></a>00472 
<a name="l00473"></a>00473           new_elems(i+19*oldsz, 0) = les_elems(i,4);
<a name="l00474"></a>00474           new_elems(i+19*oldsz, 1) = les_elems(i,0);
<a name="l00475"></a>00475           new_elems(i+19*oldsz, 2) = indice(2);
<a name="l00476"></a>00476           new_elems(i+19*oldsz, 3) = indice(0);
<a name="l00477"></a>00477           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+19*oldsz,1);
<a name="l00478"></a>00478 
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 <span class="comment">// pyramide droite (base : 1-3-7-5)</span>
<a name="l00481"></a>00481 
<a name="l00482"></a>00482           new_elems(i+20*oldsz, 0) = les_elems(i,1);
<a name="l00483"></a>00483           new_elems(i+20*oldsz, 1) = les_elems(i,3);
<a name="l00484"></a>00484           new_elems(i+20*oldsz, 2) = indice(5);
<a name="l00485"></a>00485           new_elems(i+20*oldsz, 3) = indice(0);
<a name="l00486"></a>00486           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+20*oldsz,1);
<a name="l00487"></a>00487 
<a name="l00488"></a>00488           new_elems(i+21*oldsz, 0) = les_elems(i,3);
<a name="l00489"></a>00489           new_elems(i+21*oldsz, 1) = les_elems(i,7);
<a name="l00490"></a>00490           new_elems(i+21*oldsz, 2) = indice(5);
<a name="l00491"></a>00491           new_elems(i+21*oldsz, 3) = indice(0);
<a name="l00492"></a>00492           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+21*oldsz,1);
<a name="l00493"></a>00493 
<a name="l00494"></a>00494           new_elems(i+22*oldsz, 0) = les_elems(i,7);
<a name="l00495"></a>00495           new_elems(i+22*oldsz, 1) = les_elems(i,5);
<a name="l00496"></a>00496           new_elems(i+22*oldsz, 2) = indice(5);
<a name="l00497"></a>00497           new_elems(i+22*oldsz, 3) = indice(0);
<a name="l00498"></a>00498           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+22*oldsz,1);
<a name="l00499"></a>00499 
<a name="l00500"></a>00500           new_elems(i+23*oldsz, 0) = les_elems(i,5);
<a name="l00501"></a>00501           new_elems(i+23*oldsz, 1) = les_elems(i,1);
<a name="l00502"></a>00502           new_elems(i+23*oldsz, 2) = indice(5);
<a name="l00503"></a>00503           new_elems(i+23*oldsz, 3) = indice(0);
<a name="l00504"></a>00504           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+23*oldsz,1);
<a name="l00505"></a>00505 
<a name="l00506"></a>00506         }
<a name="l00507"></a>00507       sommets_dom.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dim_som_old,3);
<a name="l00508"></a>00508       les_elems.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(new_elems);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510 <span class="comment">// Reconstruction de l&#39;octree</span>
<a name="l00511"></a>00511       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We have split the cubes...&quot;</span> &lt;&lt; finl;
<a name="l00512"></a>00512       zone.<a class="code" href="classZone.html#a8ee51194c663be29651925c88f904d76">invalide_octree</a>();
<a name="l00513"></a>00513       zone.<a class="code" href="classZone.html#ac1ff391994a372815b7f88c3fdc39f55" title="Type les elements de la zone avec le nom passe en parametre. Et associe le type d&#39;element a la zone...">typer</a>(<span class="stringliteral">&quot;Tetraedre&quot;</span>);
<a name="l00514"></a>00514 
<a name="l00515"></a>00515       {
<a name="l00516"></a>00516         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Splitting of the boundaries&quot;</span> &lt;&lt; finl;
<a name="l00517"></a>00517         <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a>) curseur(zone.<a class="code" href="classZone.html#a4bc04163903c004c5c1383eaa5fa844d" title="Renvoie la liste des bords de la zone. (version const)">faces_bord</a>());;;
<a name="l00518"></a>00518         <span class="keywordflow">while</span>(curseur)
<a name="l00519"></a>00519           {
<a name="l00520"></a>00520             <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; les_faces=curseur-&gt;faces();
<a name="l00521"></a>00521             les_faces.<a class="code" href="classFaces.html#a503fe687811445373b75dd8ac0991ec2" title="Type les faces.">typer</a>(<a class="code" href="classFaces.html#a62b7dbd959f99b997dc8111210ec8458a8d0ad1b612ea277393c4ce895b4ce0af">Faces::triangle_3D</a>);
<a name="l00522"></a>00522             <a class="code" href="classTetraedriser__homogene__compact.html#a368c541002860020c2403d1dcdadcd89">decoupe</a>(zone, les_faces, new_soms_old_elems, fait_sommet, nface);
<a name="l00523"></a>00523             ++curseur;
<a name="l00524"></a>00524           }
<a name="l00525"></a>00525       }
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 
<a name="l00528"></a>00528       {
<a name="l00529"></a>00529 <span class="comment">// Les Raccords</span>
<a name="l00530"></a>00530         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Splitting of the connectors&quot;</span> &lt;&lt; finl;
<a name="l00531"></a>00531         <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="classRaccord.html" title="Classe Raccord Classe generique de la hierarchie des raccords, un objet Raccord peut referencer n&#39;imp...">Raccord</a>) curseur(zone.<a class="code" href="classZone.html#ac2a20fe8fa5529c7eefd418b43c0131c" title="Renvoie la liste des racoords de la zone. (version const)">faces_raccord</a>());;;
<a name="l00532"></a>00532         <span class="keywordflow">while</span>(curseur)
<a name="l00533"></a>00533           {
<a name="l00534"></a>00534             <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; les_faces=curseur.valeur()-&gt;faces();
<a name="l00535"></a>00535             les_faces.<a class="code" href="classFaces.html#a503fe687811445373b75dd8ac0991ec2" title="Type les faces.">typer</a>(<a class="code" href="classFaces.html#a62b7dbd959f99b997dc8111210ec8458a8d0ad1b612ea277393c4ce895b4ce0af">Faces::triangle_3D</a>);
<a name="l00536"></a>00536             <a class="code" href="classTetraedriser__homogene__compact.html#a368c541002860020c2403d1dcdadcd89">decoupe</a>(zone, les_faces, new_soms_old_elems, fait_sommet, nface);
<a name="l00537"></a>00537             ++curseur;
<a name="l00538"></a>00538           }
<a name="l00539"></a>00539       }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541       {
<a name="l00542"></a>00542 <span class="comment">// Les Faces internes</span>
<a name="l00543"></a>00543         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Splitting of the internal faces&quot;</span> &lt;&lt; finl;
<a name="l00544"></a>00544         <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="classFaces__Interne.html" title="Classe Faces_Interne La classe sert a representer un ensemble de faces qui sont internes d&#39;un point d...">Faces_Interne</a>) curseur(zone.<a class="code" href="classZone.html#ad1d5f91adfa5e56003ce778cab9610e8" title="Renvoie la liste des faces internes de la zone. (version const)">faces_int</a>());;;
<a name="l00545"></a>00545         <span class="keywordflow">while</span>(curseur)
<a name="l00546"></a>00546           {
<a name="l00547"></a>00547             <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; les_faces=curseur-&gt;faces();
<a name="l00548"></a>00548             les_faces.<a class="code" href="classFaces.html#a503fe687811445373b75dd8ac0991ec2" title="Type les faces.">typer</a>(<a class="code" href="classFaces.html#a62b7dbd959f99b997dc8111210ec8458a8d0ad1b612ea277393c4ce895b4ce0af">Faces::triangle_3D</a>);
<a name="l00549"></a>00549             <a class="code" href="classTetraedriser__homogene__compact.html#a368c541002860020c2403d1dcdadcd89">decoupe</a>(zone, les_faces, new_soms_old_elems, fait_sommet, nface);
<a name="l00550"></a>00550             ++curseur;
<a name="l00551"></a>00551           }
<a name="l00552"></a>00552       }
<a name="l00553"></a>00553 
<a name="l00554"></a>00554       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;END of Tetraedriser_homogene_compact...&quot;</span>&lt;&lt;finl;
<a name="l00555"></a>00555       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;  1 NbElem=&quot;</span>&lt;&lt;zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>().<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0)&lt;&lt;<span class="stringliteral">&quot;  NbNod=&quot;</span>&lt;&lt;zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>()&lt;&lt;finl;
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557   <span class="keywordflow">else</span>
<a name="l00558"></a>00558     {
<a name="l00559"></a>00559       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We do not yet know how to Tetraedriser_homogene_compact the &quot;</span>
<a name="l00560"></a>00560            &lt;&lt; zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt;<span class="stringliteral">&quot;s&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562 }
<a name="l00563"></a>00563 
<a name="l00564"></a>00564 
<a name="l00565"></a>00565 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:21 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
