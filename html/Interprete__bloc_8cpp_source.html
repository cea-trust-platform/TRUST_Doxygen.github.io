<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Utilitaires/Interprete_bloc.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Utilitaires/Interprete_bloc.cpp</div>  </div>
</div>
<div class="contents">
<a href="Interprete__bloc_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2015 - 2016, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Interprete_bloc.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Utilitaires</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/9</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Interprete__bloc_8h.html">Interprete_bloc.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Type__Verifie_8h.html">Type_Verifie.h</a>&gt;</span>
<a name="l00025"></a>00025 
<a name="l00026"></a><a class="code" href="Interprete__bloc_8cpp.html#ae7f99fdcccb028d6e82e12fea948648f">00026</a> <a class="code" href="Declare__Inst_8h.html#a1a414570e3c7a7f9787a0eba4e9366e8">Implemente_instanciable_sans_constructeur_ni_destructeur</a>(<a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>,<span class="stringliteral">&quot;Interprete_bloc&quot;</span>,<a class="code" href="classliste.html" title="Les classes liste et liste_curseur representent une liste de Deriv&lt;Objet_U&gt; et un curseur associe...">liste</a>);
<a name="l00027"></a><a class="code" href="Interprete__bloc_8cpp.html#a6602fd00f0cfa385b7dc117c6da03d61">00027</a> <a class="code" href="MacRef_8h.html#a67b571ae2caa2f388a7d532cf57553fe">Implemente_ref</a>(<a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>);
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="comment">// Voir Interprete_bloc::interprete_courant()</span>
<a name="l00030"></a>00030 <span class="keyword">static</span> <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>) <a class="code" href="Interprete__bloc_8cpp.html#aef76a87ed81c6188dba085de5dbd53a2">interprete_courant_</a>;
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">//</span>
<a name="l00033"></a>00033 <span class="comment">//</span>
<a name="l00034"></a>00034 <span class="comment">//</span><span class="comment"></span>
<a name="l00035"></a>00035 <span class="comment">//! renvoie l&#39;interprete_bloc en train d&#39;etre&lt;br&gt;lu dans le jeu de donnees. On change d&#39;interprete courant&lt;br&gt;quand on cree et on detruit un objet de type Interprete_bloc&lt;br&gt;(par exemple quand on entre ou qu&#39;on sort d&#39;un bloc { })</span>
<a name="l00036"></a><a class="code" href="classInterprete__bloc.html#a7c4cb0474e21ba03265a06f9bfc196a2">00036</a> <span class="comment"></span><a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>&amp; <a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>::interprete_courant()
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038   <span class="keywordflow">return</span> interprete_courant_.<a class="code" href="classliste.html#a6bc41b57dcc3c5159678d004b09e59a3" title="Retourne l&#39;Objet_U associe a la cellule de la liste.">valeur</a>();
<a name="l00039"></a>00039 }
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="classInterprete__bloc.html#ad9fcd50f8df9d5c0c74817473b9386e2">00041</a> <a class="code" href="classInterprete__bloc.html#ad9fcd50f8df9d5c0c74817473b9386e2">Interprete_bloc::Interprete_bloc</a>()
<a name="l00042"></a>00042 {
<a name="l00043"></a>00043 <span class="comment">// S&#39;il existe un interprete courant, il devient le pere</span>
<a name="l00044"></a>00044 <span class="comment">// de l&#39;interprete en cours de construction:</span>
<a name="l00045"></a>00045   <span class="keywordflow">if</span> (<a class="code" href="Interprete__bloc_8cpp.html#aef76a87ed81c6188dba085de5dbd53a2">interprete_courant_</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00046"></a>00046     <a class="code" href="classInterprete__bloc.html#a4a8fa40dd1f3a63d0c6e4a34ab34893a">pere_</a> = <a class="code" href="Interprete__bloc_8cpp.html#aef76a87ed81c6188dba085de5dbd53a2">interprete_courant_</a>;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <a class="code" href="Interprete__bloc_8cpp.html#aef76a87ed81c6188dba085de5dbd53a2">interprete_courant_</a> = *<span class="keyword">this</span>;
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classInterprete__bloc.html#a6882c102248ed616a470a134aaf85653">00051</a> <a class="code" href="classInterprete__bloc.html#a6882c102248ed616a470a134aaf85653">Interprete_bloc::~Interprete_bloc</a>()
<a name="l00052"></a>00052 {
<a name="l00053"></a>00053 <span class="comment">// Restaure la valeur de l&#39;interprete courant precedent</span>
<a name="l00054"></a>00054   <a class="code" href="Interprete__bloc_8cpp.html#aef76a87ed81c6188dba085de5dbd53a2">interprete_courant_</a> = <a class="code" href="classInterprete__bloc.html#a4a8fa40dd1f3a63d0c6e4a34ab34893a">pere_</a>;
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="classInterprete__bloc.html#aac11557c7e07b7f73134707e17965308">00057</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classInterprete__bloc.html#aac11557c7e07b7f73134707e17965308" title="Ecriture d&#39;une liste sur un flot de sortie.">Interprete_bloc::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00058"></a>00058 <span class="keyword"></span>{
<a name="l00059"></a>00059   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00060"></a>00060   <span class="keywordflow">return</span> os;
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00063"></a><a class="code" href="classInterprete__bloc.html#a7efc90f5aea45360370e5ffbfa56f19a">00063</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classInterprete__bloc.html#a7efc90f5aea45360370e5ffbfa56f19a" title="Lecture d&#39;une liste sur un flot d&#39;entree.">Interprete_bloc::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00064"></a>00064 {
<a name="l00065"></a>00065   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00066"></a>00066   <span class="keywordflow">return</span> is;
<a name="l00067"></a>00067 }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="comment">//</span>
<a name="l00070"></a>00070 <span class="comment">//</span>
<a name="l00071"></a>00071 <span class="comment">//</span>
<a name="l00072"></a>00072 <span class="comment">//</span>
<a name="l00073"></a>00073 <span class="comment">//</span>
<a name="l00074"></a>00074 <span class="comment">//</span>
<a name="l00075"></a>00075 <span class="comment">//</span><span class="comment"></span>
<a name="l00076"></a>00076 <span class="comment">//! Interpretation d&#39;un bloc d&#39;instructions prises dans l&#39;entree is.&lt;br&gt;Si le bloc commence par {, on suppose que l&#39;accolade a deja ete lue.&lt;br&gt;Le bloc se termine soit par }, soit par la fin du fichier, soit par&lt;br&gt;le mot FIN en fonction de bloc_type (voir mon_main.cpp par exemple)&lt;br&gt;Si verifie_sans_interpreter!=0, on ne cree aucun objet et on ne&lt;br&gt;lance aucun interprete, on se contente de verifier la coherence des&lt;br&gt;accolades (meme nombre de { que de }).</span>
<a name="l00077"></a><a class="code" href="classInterprete__bloc.html#a30e3dd349fa1745d8024cdd7399a014e">00077</a> <span class="comment"></span><a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classInterprete__bloc.html#a30e3dd349fa1745d8024cdd7399a014e" title="Interpretation d&#39;un bloc d&#39;instructions prises dans l&#39;entree is. Si le bloc commence par {...">Interprete_bloc::interpreter_bloc</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is,
<a name="l00078"></a>00078                                           <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997">Bloc_Type</a> bloc_type,
<a name="l00079"></a>00079                                           <span class="keywordtype">int</span> verifie_sans_interpreter)
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081 <span class="comment">// Le niveau de sortie des messages journal</span>
<a name="l00082"></a>00082   <span class="keyword">const</span> <span class="keywordtype">int</span> jlevel = 3;
<a name="l00083"></a>00083   <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot;Interprete_bloc::interpreter_bloc bloc_type=&quot;</span> &lt;&lt; (int)bloc_type &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00084"></a>00084   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu;
<a name="l00085"></a>00085   is &gt;&gt; motlu;
<a name="l00086"></a>00086   <span class="keywordflow">while</span>(1)
<a name="l00087"></a>00087     {
<a name="l00088"></a>00088 <span class="comment">// Est-ce qu&#39;on est a la fin du bloc ?</span>
<a name="l00089"></a>00089       <span class="keywordflow">if</span> (is.<a class="code" href="classEntree.html#abcd397cb0b99fbe7c6f01047d8cec89c">eof</a>())
<a name="l00090"></a>00090         {
<a name="l00091"></a>00091 <span class="comment">// Certains fichiers .data ne se terminent pas par FIN, on accepte aussi d&#39;arriver a eof</span>
<a name="l00092"></a>00092 <span class="comment">// sans avoir trouve &quot;FIN&quot;.</span>
<a name="l00093"></a>00093           <span class="keywordflow">if</span> (bloc_type == <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997a2940e6dc338c0c6755aa5198f9f0f90d">BLOC_EOF</a> || bloc_type == <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997a01c17b193a2b086f608a633bd4927eb4">FIN</a>)
<a name="l00094"></a>00094             {
<a name="l00095"></a>00095               <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot;Interprete_bloc: end of file =&gt; end of bloc&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00096"></a>00096               <span class="keywordflow">break</span>;
<a name="l00097"></a>00097             }
<a name="l00098"></a>00098           <span class="keywordflow">else</span>
<a name="l00099"></a>00099             {
<a name="l00100"></a>00100               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Interprete_bloc: unexpected end of file\n&quot;</span>
<a name="l00101"></a>00101                    &lt;&lt; <span class="stringliteral">&quot;check for missig \&quot;}\&quot; or missing FIN keyword&quot;</span>
<a name="l00102"></a>00102                    &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00103"></a>00103               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00104"></a>00104             }
<a name="l00105"></a>00105         }
<a name="l00106"></a>00106 <span class="comment">// Autres fins possibles:</span>
<a name="l00107"></a>00107       <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;}&quot;</span> || motlu == <span class="stringliteral">&quot;FIN|END&quot;</span>)
<a name="l00108"></a>00108         {
<a name="l00109"></a>00109           <span class="keywordflow">if</span> ((motlu == <span class="stringliteral">&quot;}&quot;</span> &amp;&amp; bloc_type == <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997a8e4c75d1953a742d520d8693429681c6">ACCOLADE</a>)
<a name="l00110"></a>00110               || (motlu == <span class="stringliteral">&quot;FIN|END&quot;</span> &amp;&amp; bloc_type == <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997a01c17b193a2b086f608a633bd4927eb4">FIN</a>))
<a name="l00111"></a>00111             {
<a name="l00112"></a>00112               <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot;Interprete_bloc: reading &quot;</span> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot; =&gt; end of bloc&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00113"></a>00113               <span class="keywordflow">break</span>;
<a name="l00114"></a>00114             }
<a name="l00115"></a>00115           <span class="keywordflow">else</span>
<a name="l00116"></a>00116             {
<a name="l00117"></a>00117               <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;}&quot;</span>)
<a name="l00118"></a>00118                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Interprete_bloc: extra \&quot;}\&quot; in data file&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00119"></a>00119               <span class="keywordflow">else</span>
<a name="l00120"></a>00120                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Interprete_bloc: unexpected FIN, check for missing \&quot;}\&quot;&quot;</span>
<a name="l00121"></a>00121                      &lt;&lt; finl;
<a name="l00122"></a>00122               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00123"></a>00123             }
<a name="l00124"></a>00124         }
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 <span class="comment">// Est-ce que c&#39;est un commentaire ?</span>
<a name="l00127"></a>00127       <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;#&quot;</span>)
<a name="l00128"></a>00128         {
<a name="l00129"></a>00129           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> commentaire(<span class="stringliteral">&quot;# &quot;</span>);
<a name="l00130"></a>00130           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_lu;
<a name="l00131"></a>00131           <span class="keywordtype">int</span> countleft = 8; <span class="comment">//!&lt; On retient les 8 premiers mots du commentaire</span>
<a name="l00132"></a>00132 <span class="comment"></span>          <span class="keywordflow">do</span>
<a name="l00133"></a>00133             {
<a name="l00134"></a>00134               is &gt;&gt; nom_lu;
<a name="l00135"></a>00135               <span class="keywordflow">if</span> (is.<a class="code" href="classEntree.html#abcd397cb0b99fbe7c6f01047d8cec89c">eof</a>())
<a name="l00136"></a>00136                 <span class="keywordflow">break</span>;
<a name="l00137"></a>00137               <span class="keywordflow">if</span> ((countleft--) &gt; 0)
<a name="l00138"></a>00138                 {
<a name="l00139"></a>00139                   commentaire += nom_lu;
<a name="l00140"></a>00140                   commentaire += <span class="stringliteral">&quot; &quot;</span>;
<a name="l00141"></a>00141                 }
<a name="l00142"></a>00142             }
<a name="l00143"></a>00143           <span class="keywordflow">while</span> (nom_lu != <span class="stringliteral">&quot;#&quot;</span>);
<a name="l00144"></a>00144           <span class="keywordflow">if</span> (is.<a class="code" href="classEntree.html#abcd397cb0b99fbe7c6f01047d8cec89c">eof</a>())
<a name="l00145"></a>00145             {
<a name="l00146"></a>00146               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Interprete_bloc: end of file while reading a comment :\n&quot;</span>
<a name="l00147"></a>00147                    &lt;&lt; commentaire &lt;&lt; <span class="stringliteral">&quot;...&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00148"></a>00148             }
<a name="l00149"></a>00149 <span class="comment">// Prochain mot a interpreter:</span>
<a name="l00150"></a>00150           motlu = nom_lu;
<a name="l00151"></a>00151         }
<a name="l00152"></a>00152       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;{&quot;</span>)
<a name="l00153"></a>00153         {
<a name="l00154"></a>00154           <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot;Interprete_bloc: reading { =&gt; creating new Interprete_bloc&quot;</span>
<a name="l00155"></a>00155                           &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00156"></a>00156 <span class="comment">// Est-ce que c&#39;est un debut de bloc ?</span>
<a name="l00157"></a>00157 <span class="comment">// Nouvel interprete:</span>
<a name="l00158"></a>00158           <a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a> inter;
<a name="l00159"></a>00159           inter.<a class="code" href="classInterprete__bloc.html#a30e3dd349fa1745d8024cdd7399a014e" title="Interpretation d&#39;un bloc d&#39;instructions prises dans l&#39;entree is. Si le bloc commence par {...">interpreter_bloc</a>(is, <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997a8e4c75d1953a742d520d8693429681c6">ACCOLADE</a>, verifie_sans_interpreter);
<a name="l00160"></a>00160         }
<a name="l00161"></a>00161       <span class="keywordflow">else</span>
<a name="l00162"></a>00162         {
<a name="l00163"></a>00163           <span class="keywordflow">if</span> (verifie_sans_interpreter)
<a name="l00164"></a>00164             {
<a name="l00165"></a>00165 <span class="comment">// Si on veut seulement verifier le nombre d&#39;accolades,</span>
<a name="l00166"></a>00166 <span class="comment">// il suffit d&#39;ignorer le motcle... on ouvre recursivement</span>
<a name="l00167"></a>00167 <span class="comment">// de nouveaux interprete si on rencontre { et on les ferme</span>
<a name="l00168"></a>00168 <span class="comment">// si on trouve }. S&#39;il manque une } a la fin, on obtiendra le message</span>
<a name="l00169"></a>00169 <span class="comment">// &quot;check for missing }&quot; et s&#39;il y en a une en trop on aura</span>
<a name="l00170"></a>00170 <span class="comment">// le message &quot;extra }&quot;</span>
<a name="l00171"></a>00171               <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot;Interprete_bloc: just checking {} =&gt; ignore keyword &quot;</span>
<a name="l00172"></a>00172                               &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00173"></a>00173               <a class="code" href="Type__Verifie_8cpp.html#ad3531c82596e15d1af86ea6b2713ef51">verifie</a>(motlu);
<a name="l00174"></a>00174             }
<a name="l00175"></a>00175           <span class="keywordflow">else</span>
<a name="l00176"></a>00176             {
<a name="l00177"></a>00177 <span class="comment">// Dans le bloc suivant, s&#39;il y a une erreur de lecture sur is, c&#39;est une erreur:</span>
<a name="l00178"></a>00178               is.<a class="code" href="classEntree.html#a955e06069e0554f46804134964371716" title="Change le comportement en cas d&#39;erreur de l&#39;entree, voir error_handle_() et get_error_action()">set_error_action</a>(<a class="code" href="classEntree.html#a92919bfab8dfa0cfdf8cf8e3dc13b078a3680fe7027fd3fe92932f46bd8967fba">Entree::ERROR_EXIT</a>);
<a name="l00179"></a>00179               <span class="keywordtype">int</span> export_object = 0;
<a name="l00180"></a>00180               <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;export&quot;</span>)
<a name="l00181"></a>00181                 {
<a name="l00182"></a>00182                   <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot;Exporting object, reading object type...&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00183"></a>00183                   export_object = 1;
<a name="l00184"></a>00184                   is &gt;&gt; motlu;
<a name="l00185"></a>00185                 }
<a name="l00186"></a>00186 <span class="comment">// Le mot cle doit etre un type d&#39;objet instanciable</span>
<a name="l00187"></a>00187               <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot;Interprete_bloc: reading &quot;</span> &lt;&lt; motlu
<a name="l00188"></a>00188                               &lt;&lt; <span class="stringliteral">&quot; =&gt; trying to instanciate object&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00189"></a>00189               <a class="code" href="classDeriv__Objet__U.html">DerObjU</a> objet;
<a name="l00190"></a>00190               objet.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(motlu);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192               <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classInterprete.html" title="Classe de base des objets &quot;interprete&quot;. Ces objets definissent des actions a realiser lorsqu&#39;on les...">Interprete</a>, objet.<a class="code" href="classDeriv__Objet__U.html#af140f3c6f0dc77abddc6edf9f4be37c2">valeur</a>()))
<a name="l00193"></a>00193                 {
<a name="l00194"></a>00194 <span class="comment">// Si c&#39;est un interprete, on appelle la methode interprete de l&#39;objet:</span>
<a name="l00195"></a>00195                   <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot; Calling object.interpreter()&quot;</span> &lt;&lt; finl;
<a name="l00196"></a>00196                   <a class="code" href="classInterprete.html" title="Classe de base des objets &quot;interprete&quot;. Ces objets definissent des actions a realiser lorsqu&#39;on les...">Interprete</a>&amp; inter = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classInterprete.html" title="Classe de base des objets &quot;interprete&quot;. Ces objets definissent des actions a realiser lorsqu&#39;on les...">Interprete</a>, objet.<a class="code" href="classDeriv__Objet__U.html#af140f3c6f0dc77abddc6edf9f4be37c2">valeur</a>());
<a name="l00197"></a>00197                   inter.<a class="code" href="classInterprete.html#adeb51024344c86b4320c7847a5165e03">interpreter</a>(is);
<a name="l00198"></a>00198                 }
<a name="l00199"></a>00199               <span class="keywordflow">else</span>
<a name="l00200"></a>00200                 {
<a name="l00201"></a>00201 <span class="comment">// Ce n&#39;est pas un interprete, on lit le nom de l&#39;objet et on le stocke</span>
<a name="l00202"></a>00202                   <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot; Reading object name&quot;</span> &lt;&lt; finl;
<a name="l00203"></a>00203                   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_objet;
<a name="l00204"></a>00204                   is &gt;&gt; nom_objet;
<a name="l00205"></a>00205                   <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(jlevel) &lt;&lt; <span class="stringliteral">&quot; Storing object &quot;</span> &lt;&lt; nom_objet &lt;&lt; <span class="stringliteral">&quot; of type &quot;</span> &lt;&lt; motlu &lt;&lt; finl;
<a name="l00206"></a>00206                   <span class="keywordflow">if</span> (!export_object || !<a class="code" href="classInterprete__bloc.html#a4a8fa40dd1f3a63d0c6e4a34ab34893a">pere_</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00207"></a>00207                     <a class="code" href="classInterprete__bloc.html#a229ccd01911aa158cca828a109ead063" title="Ajoute l&#39;objet ob a la liste des objets de l&#39;interprete, et nomme l&#39;objet avec nom. Si l&#39;objet existe deja, exit()">ajouter</a>(nom_objet, objet);
<a name="l00208"></a>00208                   <span class="keywordflow">else</span>
<a name="l00209"></a>00209                     <a class="code" href="classInterprete__bloc.html#a4a8fa40dd1f3a63d0c6e4a34ab34893a">pere_</a>.<a class="code" href="classRef__Interprete__bloc.html#a83bf0ad27c279c79b021bc183d060b78">valeur</a>().<a class="code" href="classInterprete__bloc.html#a229ccd01911aa158cca828a109ead063" title="Ajoute l&#39;objet ob a la liste des objets de l&#39;interprete, et nomme l&#39;objet avec nom. Si l&#39;objet existe deja, exit()">ajouter</a>(nom_objet, objet);
<a name="l00210"></a>00210                 }
<a name="l00211"></a>00211               is.<a class="code" href="classEntree.html#a955e06069e0554f46804134964371716" title="Change le comportement en cas d&#39;erreur de l&#39;entree, voir error_handle_() et get_error_action()">set_error_action</a>(<a class="code" href="classEntree.html#a92919bfab8dfa0cfdf8cf8e3dc13b078a88176e2e0001a6717ea71baa58bea2a6">Entree::ERROR_CONTINUE</a>);
<a name="l00212"></a>00212             }
<a name="l00213"></a>00213         }
<a name="l00214"></a>00214       is &gt;&gt; motlu;
<a name="l00215"></a>00215     }
<a name="l00216"></a>00216   <span class="keywordflow">return</span> is;
<a name="l00217"></a>00217 }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="comment">//</span>
<a name="l00220"></a>00220 <span class="comment">//</span><span class="comment"></span>
<a name="l00221"></a>00221 <span class="comment">//! Renvoie l&#39;Objet_U correspondant a nom contenu dans cet interprete_bloc&lt;br&gt;Si l&#39;objet n&#39;existe pas, exit() (on ne cherche pas dans le pere).</span>
<a name="l00222"></a><a class="code" href="classInterprete__bloc.html#a6bdeff06294d080a6c62e8a0b8074453">00222</a> <span class="comment"></span><a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; <a class="code" href="classInterprete__bloc.html#a6bdeff06294d080a6c62e8a0b8074453" title="Renvoie l&#39;Objet_U correspondant a nom contenu dans cet interprete_bloc Si l&#39;objet n&#39;existe pas...">Interprete_bloc::objet_local</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom)
<a name="l00223"></a>00223 {
<a name="l00224"></a>00224   <span class="keyword">const</span> <span class="keywordtype">int</span> i = <a class="code" href="classInterprete__bloc.html#a6aa075aafa8da1899321b5349544e58d">les_noms_</a>.<a class="code" href="classNoms.html#abfb5d6c835f10f136fffb8c30c4fc2b5">search</a>(nom);
<a name="l00225"></a>00225   <span class="keywordflow">if</span> (i &lt; 0)
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in Interprete::objet_local() : object &quot;</span> &lt;&lt; nom
<a name="l00228"></a>00228            &lt;&lt; <span class="stringliteral">&quot; does not exist&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00229"></a>00229       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00230"></a>00230     }
<a name="l00231"></a>00231   <span class="keywordflow">return</span> <a class="code" href="classliste.html#ae4040ffd1b09a94d798adf8d969c9d2c" title="Operateur d&#39;acces au ieme element de la liste.">operator[]</a>(i);
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 <span class="comment">//</span><span class="comment"></span>
<a name="l00235"></a>00235 <span class="comment">//! renvoie un drapeau indiquant si un objet de ce nom&lt;br&gt;est enregistre dans cet inteprete (ne teste pas le pere).</span>
<a name="l00236"></a><a class="code" href="classInterprete__bloc.html#ab722f3c2dffdbc21e6385d8b8dec102f">00236</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classInterprete__bloc.html#ab722f3c2dffdbc21e6385d8b8dec102f" title="renvoie un drapeau indiquant si un objet de ce nom est enregistre dans cet inteprete (ne teste pas le...">Interprete_bloc::objet_local_existant</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom)
<a name="l00237"></a>00237 {
<a name="l00238"></a>00238   <span class="keyword">const</span> <span class="keywordtype">int</span> i = <a class="code" href="classInterprete__bloc.html#a6aa075aafa8da1899321b5349544e58d">les_noms_</a>.<a class="code" href="classNoms.html#abfb5d6c835f10f136fffb8c30c4fc2b5">search</a>(nom);
<a name="l00239"></a>00239   <span class="keywordflow">return</span> (i &gt;= 0);
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <span class="comment">//</span><span class="comment"></span>
<a name="l00243"></a>00243 <span class="comment">//! Ajoute l&#39;objet ob a la liste des objets de l&#39;interprete,&lt;br&gt;et nomme l&#39;objet avec nom. Si l&#39;objet existe deja, exit()</span>
<a name="l00244"></a><a class="code" href="classInterprete__bloc.html#a229ccd01911aa158cca828a109ead063">00244</a> <span class="comment"></span><a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; <a class="code" href="classInterprete__bloc.html#a229ccd01911aa158cca828a109ead063" title="Ajoute l&#39;objet ob a la liste des objets de l&#39;interprete, et nomme l&#39;objet avec nom. Si l&#39;objet existe deja, exit()">Interprete_bloc::ajouter</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom, <a class="code" href="classDeriv__Objet__U.html">DerObjU</a>&amp; ob)
<a name="l00245"></a>00245 {
<a name="l00246"></a>00246   <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>(3) &lt;&lt; <span class="stringliteral">&quot;Interprete::ajouter(&quot;</span> &lt;&lt; nom &lt;&lt; <span class="stringliteral">&quot;) de type &quot;</span>
<a name="l00247"></a>00247              &lt;&lt; ob.<a class="code" href="classDeriv__Objet__U.html#af140f3c6f0dc77abddc6edf9f4be37c2">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00248"></a>00248   <span class="keywordflow">if</span> (<a class="code" href="classInterprete__bloc.html#a6aa075aafa8da1899321b5349544e58d">les_noms_</a>.<a class="code" href="classNoms.html#abfb5d6c835f10f136fffb8c30c4fc2b5">search</a>(nom) &gt;= 0)
<a name="l00249"></a>00249     {
<a name="l00250"></a>00250       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Interprete::ajouter: object &quot;</span> &lt;&lt; nom &lt;&lt; <span class="stringliteral">&quot; already exists.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00251"></a>00251       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00252"></a>00252     }
<a name="l00253"></a>00253   <a class="code" href="classInterprete__bloc.html#a6aa075aafa8da1899321b5349544e58d">les_noms_</a>.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(nom);
<a name="l00254"></a>00254   <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; obu = <a class="code" href="classliste.html#a08f68d7a6ff174d7f71fb7863d6496ad" title="Ajout d&#39;un Objet_U a la liste to_add est libere en sortie.">add_deplace</a>(ob);
<a name="l00255"></a>00255   obu.<a class="code" href="classObjet__U.html#a469dbcad1d4a98a67e4246dce8e264ad" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(nom);
<a name="l00256"></a>00256   <span class="keywordflow">return</span> obu;
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="comment">//</span>
<a name="l00260"></a>00260 <span class="comment">//</span><span class="comment"></span>
<a name="l00261"></a>00261 <span class="comment">//! cherche l&#39;objet demande dans l&#39;Interprete_bloc&lt;br&gt;courant (Interprete_bloc::interprete_courant()) et dans tous&lt;br&gt;ses peres successifs. Si l&#39;objet n&#39;existe pas, exit()</span>
<a name="l00262"></a><a class="code" href="classInterprete__bloc.html#ae0b05c3b185638c72c0521be856f1d4f">00262</a> <span class="comment"></span><a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; <a class="code" href="classInterprete__bloc.html#ae0b05c3b185638c72c0521be856f1d4f" title="cherche l&#39;objet demande dans l&#39;Interprete_bloc courant (Interprete_bloc::interprete_courant()) et dan...">Interprete_bloc::objet_global</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom)
<a name="l00263"></a>00263 {
<a name="l00264"></a>00264   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>) ptr(<a class="code" href="classInterprete__bloc.html#a7c4cb0474e21ba03265a06f9bfc196a2" title="renvoie l&#39;interprete_bloc en train d&#39;etre lu dans le jeu de donnees. On change d&#39;interprete courant q...">interprete_courant</a>());
<a name="l00265"></a>00265   <span class="keywordflow">while</span> (ptr.non_nul())
<a name="l00266"></a>00266     {
<a name="l00267"></a>00267       <a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>&amp; interp = ptr.<a class="code" href="classliste.html#a6bc41b57dcc3c5159678d004b09e59a3" title="Retourne l&#39;Objet_U associe a la cellule de la liste.">valeur</a>();
<a name="l00268"></a>00268       <span class="keywordflow">if</span> (interp.<a class="code" href="classInterprete__bloc.html#ab722f3c2dffdbc21e6385d8b8dec102f" title="renvoie un drapeau indiquant si un objet de ce nom est enregistre dans cet inteprete (ne teste pas le...">objet_local_existant</a>(nom))
<a name="l00269"></a>00269         {
<a name="l00270"></a>00270           <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; objet = interp.<a class="code" href="classInterprete__bloc.html#a6bdeff06294d080a6c62e8a0b8074453" title="Renvoie l&#39;Objet_U correspondant a nom contenu dans cet interprete_bloc Si l&#39;objet n&#39;existe pas...">objet_local</a>(nom);
<a name="l00271"></a>00271           <span class="keywordflow">return</span> objet;
<a name="l00272"></a>00272         }
<a name="l00273"></a>00273       ptr = interp.<a class="code" href="classInterprete__bloc.html#a4a8fa40dd1f3a63d0c6e4a34ab34893a">pere_</a>;
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275 <span class="comment">// Objet non trouve !</span>
<a name="l00276"></a>00276   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Interprete::objet: object &quot;</span> &lt;&lt; nom
<a name="l00277"></a>00277        &lt;&lt; <span class="stringliteral">&quot; does not exist.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00278"></a>00278   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00279"></a>00279   <span class="keywordflow">return</span> <a class="code" href="classInterprete__bloc.html#ae0b05c3b185638c72c0521be856f1d4f" title="cherche l&#39;objet demande dans l&#39;Interprete_bloc courant (Interprete_bloc::interprete_courant()) et dan...">objet_global</a>(nom); <span class="comment">//!&lt; Pour le compilo</span>
<a name="l00280"></a>00280 <span class="comment"></span>}
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 <span class="comment">//</span><span class="comment"></span>
<a name="l00283"></a>00283 <span class="comment">//! renvoie un drapeau indiquant si un objet de ce&lt;br&gt;nom existe dans inteprete_courant() ou l&#39;un de ses parents.</span>
<a name="l00284"></a><a class="code" href="classInterprete__bloc.html#a30f30f6da652cfd4a3819775480e056f">00284</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classInterprete__bloc.html#a30f30f6da652cfd4a3819775480e056f" title="renvoie un drapeau indiquant si un objet de ce nom existe dans inteprete_courant() ou l&#39;un de ses par...">Interprete_bloc::objet_global_existant</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom)
<a name="l00285"></a>00285 {
<a name="l00286"></a>00286   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>) ptr(<a class="code" href="classInterprete__bloc.html#a7c4cb0474e21ba03265a06f9bfc196a2" title="renvoie l&#39;interprete_bloc en train d&#39;etre lu dans le jeu de donnees. On change d&#39;interprete courant q...">interprete_courant</a>());
<a name="l00287"></a>00287   <span class="keywordflow">while</span> (ptr.non_nul())
<a name="l00288"></a>00288     {
<a name="l00289"></a>00289       <a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a>&amp; interp = ptr.<a class="code" href="classliste.html#a6bc41b57dcc3c5159678d004b09e59a3" title="Retourne l&#39;Objet_U associe a la cellule de la liste.">valeur</a>();
<a name="l00290"></a>00290       <span class="keywordflow">if</span> (interp.<a class="code" href="classInterprete__bloc.html#ab722f3c2dffdbc21e6385d8b8dec102f" title="renvoie un drapeau indiquant si un objet de ce nom est enregistre dans cet inteprete (ne teste pas le...">objet_local_existant</a>(nom))
<a name="l00291"></a>00291         <span class="keywordflow">return</span> 1;
<a name="l00292"></a>00292       ptr = interp.<a class="code" href="classInterprete__bloc.html#a4a8fa40dd1f3a63d0c6e4a34ab34893a">pere_</a>;
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294 <span class="comment">// Objet non trouve !</span>
<a name="l00295"></a>00295   <span class="keywordflow">return</span> 0;
<a name="l00296"></a>00296 }
<a name="l00297"></a>00297 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:26 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
