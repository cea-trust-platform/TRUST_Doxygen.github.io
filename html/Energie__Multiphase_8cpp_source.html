<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Multiphase/Equations/Energie_Multiphase.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Multiphase/Equations/Energie_Multiphase.cpp</div>  </div>
</div>
<div class="contents">
<a href="Energie__Multiphase_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Energie_Multiphase.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Multiphase/Equations</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/52</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Energie__Multiphase_8h.html">Energie_Multiphase.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Pb__Multiphase_8h.html">Pb_Multiphase.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Discret__Thyd_8h.html">Discret_Thyd.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Avanc_8h.html">Avanc.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Debog_8h.html">Debog.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Frontiere__dis__base_8h.html">Frontiere_dis_base.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="EcritureLectureSpecial_8h.html">EcritureLectureSpecial.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Uniforme_8h.html">Champ_Uniforme.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Matrice__Morse_8h.html">Matrice_Morse.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="Navier__Stokes__std_8h.html">Navier_Stokes_std.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTrav_8h.html">DoubleTrav.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="Neumann__sortie__libre_8h.html">Neumann_sortie_libre.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="Op__Conv__negligeable_8h.html">Op_Conv_negligeable.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Implicite__base_8h.html">Schema_Implicite_base.h</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="SETS_8h.html">SETS.h</a>&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="EChaine_8h.html">EChaine.h</a>&gt;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="Energie__Multiphase_8cpp.html#ace7754dd7f3109c4fe8ec2ca768c6391">00043</a> <span class="preprocessor">#define old_forme</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a><a class="code" href="Energie__Multiphase_8cpp.html#a2ccc91ee37a5e394b0eeab4f67b2e76a">00045</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classEnergie__Multiphase.html" title="classe Energie_Multiphase Cas particulier de Convection_Diffusion_std pour un fluide quasi conpressib...">Energie_Multiphase</a>,<span class="stringliteral">&quot;Energie_Multiphase&quot;</span>,<a class="code" href="classConvection__Diffusion__std.html" title="classe Convection_Diffusion_std Cette classe est la base des equations modelisant le transport d&#39;un s...">Convection_Diffusion_std</a>);
<a name="l00046"></a>00046 <span class="comment">// XD Energie_Multiphase eqn_base Energie_Multiphase -1 Internal energy conservation equation for a multi-phase problem where the unknown is the temperature</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="comment">// Precondition:</span>
<a name="l00049"></a>00049 <span class="comment">// Parametre: Sortie&amp; is</span>
<a name="l00050"></a>00050 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00051"></a>00051 <span class="comment">// Valeurs par defaut:</span>
<a name="l00052"></a>00052 <span class="comment">// Contraintes:</span>
<a name="l00053"></a>00053 <span class="comment">// Acces: entree/sortie</span>
<a name="l00054"></a>00054 <span class="comment">// Exception:</span>
<a name="l00055"></a>00055 <span class="comment">// Effets de bord:</span>
<a name="l00056"></a>00056 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00057"></a>00057 <span class="comment">//</span><span class="comment"></span>
<a name="l00058"></a>00058 <span class="comment">//! Simple appel a: Convection_Diffusion_std::printOn(Sortie\&amp;)</span>
<a name="l00059"></a>00059 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00060"></a>00060 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00061"></a>00061 <span class="comment">Contraintes: */</span>
<a name="l00062"></a><a class="code" href="classEnergie__Multiphase.html#a4d1ba7258a37bdfed429706ac97e52af">00062</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classEnergie__Multiphase.html#a4d1ba7258a37bdfed429706ac97e52af" title="Simple appel a: Convection_Diffusion_std::printOn(Sortie&amp;)">Energie_Multiphase::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; is)<span class="keyword"> const</span>
<a name="l00063"></a>00063 <span class="keyword"></span>{
<a name="l00064"></a>00064   <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#a4d1ba7258a37bdfed429706ac97e52af" title="Simple appel a: Convection_Diffusion_std::printOn(Sortie&amp;)">Convection_Diffusion_std::printOn</a>(is);
<a name="l00065"></a>00065 }
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="comment">// Precondition: l&#39;objet a une inconnue associee</span>
<a name="l00068"></a>00068 <span class="comment">// Precondition: l&#39;objet a un fluide associe</span>
<a name="l00069"></a>00069 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00070"></a>00070 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00071"></a>00071 <span class="comment">// Valeurs par defaut:</span>
<a name="l00072"></a>00072 <span class="comment">// Contraintes:</span>
<a name="l00073"></a>00073 <span class="comment">// Acces: entree/sortie</span>
<a name="l00074"></a>00074 <span class="comment">// Exception:</span>
<a name="l00075"></a>00075 <span class="comment">// Effets de bord:</span>
<a name="l00076"></a>00076 <span class="comment">// Postcondition:</span>
<a name="l00077"></a>00077 <span class="comment">//</span>
<a name="l00078"></a>00078 <span class="comment">//</span><span class="comment"></span>
<a name="l00079"></a>00079 <span class="comment">//! Verifie si l&#39;equation a une inconnue et un fluide associe&lt;br&gt;et appelle Convection_Diffusion_std::readOn(Entree\&amp;).</span>
<a name="l00080"></a>00080 <span class="comment"></span><span class="comment">/** \return Entree\&amp; is&lt;br&gt;</span>
<a name="l00081"></a>00081 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00082"></a>00082 <span class="comment">Contraintes: */</span>
<a name="l00083"></a><a class="code" href="classEnergie__Multiphase.html#afbf49a35b601dd72ea62135e1735801a">00083</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classEnergie__Multiphase.html#afbf49a35b601dd72ea62135e1735801a" title="Verifie si l&#39;equation a une inconnue et un fluide associe et appelle Convection_Diffusion_std::readOn...">Energie_Multiphase::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085   assert(<a class="code" href="classEnergie__Multiphase.html#aa20a70e0c0d889ffd277678440a5ebac">l_inco_ch</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>());
<a name="l00086"></a>00086   assert(<a class="code" href="classEnergie__Multiphase.html#a55cf17e181bdeb34e8ed54c196d14488">le_fluide</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>());
<a name="l00087"></a>00087   <a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classMorEqn.html#a1a6c57edd46cc696aa45c6b01a76e14c" title="Associe une equation a l&#39;objet. Affecte le membre MorEqn::mon_equation avec l&#39;objet passe en parametr...">associer_eqn</a>(*<span class="keyword">this</span>);
<a name="l00088"></a>00088   <a class="code" href="classEnergie__Multiphase.html#afbf49a35b601dd72ea62135e1735801a" title="Verifie si l&#39;equation a une inconnue et un fluide associe et appelle Convection_Diffusion_std::readOn...">Convection_Diffusion_std::readOn</a>(is);
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">// if (!evanescence.non_nul())</span>
<a name="l00091"></a>00091 <span class="comment">// {</span>
<a name="l00092"></a>00092 <span class="comment">// EChaine eva(&quot;{ homogene { alpha_res 1e-6 } }&quot;);</span>
<a name="l00093"></a>00093 <span class="comment">// eva &gt;&gt; evanescence;</span>
<a name="l00094"></a>00094 <span class="comment">// }</span>
<a name="l00095"></a>00095 <span class="comment">// Nom unite;</span>
<a name="l00096"></a>00096 <span class="comment">// if (dimension+bidim_axi==2) unite=&quot;[W/m]&quot;;</span>
<a name="l00097"></a>00097 <span class="comment">// else unite=&quot;[W]&quot;;</span>
<a name="l00098"></a>00098   <a class="code" href="classConvection__Diffusion__std.html#aff629b8054c74fb1244b37c79aa6a3bd">terme_convectif</a>.<a class="code" href="classOperateur.html#adf6c5f02d4e0bd15282a628c4814d61f">set_fichier</a>(<span class="stringliteral">&quot;Convection_chaleur&quot;</span>);
<a name="l00099"></a>00099   <a class="code" href="classConvection__Diffusion__std.html#aff629b8054c74fb1244b37c79aa6a3bd">terme_convectif</a>.<a class="code" href="classOperateur.html#abe53b54eda0c886809a704bf79b60aa9">set_description</a>((<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>)<span class="stringliteral">&quot;Convective heat transfer rate=Integral(-h*u*ndS) [W] if SI units used&quot;</span>);
<a name="l00100"></a>00100   <a class="code" href="classConvection__Diffusion__std.html#a7507bbda8e79eb03a9099ccd35af2275">terme_diffusif</a>.<a class="code" href="classOperateur.html#adf6c5f02d4e0bd15282a628c4814d61f">set_fichier</a>(<span class="stringliteral">&quot;Diffusion_chaleur&quot;</span>);
<a name="l00101"></a>00101 <span class="comment">// terme_diffusif.set_description((Nom)&quot;Conduction heat transfer rate=Integral(lambda*grad(T)*ndS) &quot;+unite);</span>
<a name="l00102"></a>00102   <a class="code" href="classConvection__Diffusion__std.html#a7507bbda8e79eb03a9099ccd35af2275">terme_diffusif</a>.<a class="code" href="classOperateur.html#abe53b54eda0c886809a704bf79b60aa9">set_description</a>((<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>)<span class="stringliteral">&quot;Conduction heat transfer rate=Integral(lambda*grad(T)*ndS) [W] if SI units used&quot;</span>);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104   <span class="keywordflow">return</span> is;
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a><a class="code" href="classEnergie__Multiphase.html#a1d01c4eca9a71a3ae5dd0b6c7e1926ed">00107</a> <span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#a1d01c4eca9a71a3ae5dd0b6c7e1926ed">Energie_Multiphase::set_param</a>(<a class="code" href="classParam.html" title="Defined below in this file.">Param</a>&amp; param)
<a name="l00108"></a>00108 {
<a name="l00109"></a>00109   <a class="code" href="classEnergie__Multiphase.html#a1d01c4eca9a71a3ae5dd0b6c7e1926ed">Convection_Diffusion_std::set_param</a>(param);
<a name="l00110"></a>00110   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;evanescence|vanishing&quot;</span>,(<span class="keyword">this</span>));
<a name="l00111"></a>00111 }
<a name="l00112"></a>00112 
<a name="l00113"></a><a class="code" href="classEnergie__Multiphase.html#a63eac149e888b741f6ada05dfe445ce8">00113</a> <span class="keywordtype">int</span> <a class="code" href="classEnergie__Multiphase.html#a63eac149e888b741f6ada05dfe445ce8" title="Lecture des parametres de type non simple d&#39;un objet_U a partir d&#39;un flot d&#39;entree.">Energie_Multiphase::lire_motcle_non_standard</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; mot, <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00114"></a>00114 {
<a name="l00115"></a>00115   <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;evanescence&quot;</span>) is &gt;&gt; <a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>;
<a name="l00116"></a>00116   <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#a63eac149e888b741f6ada05dfe445ce8" title="Lecture des parametres de type non simple d&#39;un objet_U a partir d&#39;un flot d&#39;entree.">Convection_Diffusion_std::lire_motcle_non_standard</a>(mot, is);
<a name="l00117"></a>00117   <span class="keywordflow">return</span> 1;
<a name="l00118"></a>00118 }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 <span class="comment">// Precondition:</span>
<a name="l00121"></a>00121 <span class="comment">// Parametre: Milieu_base&amp; un_milieu</span>
<a name="l00122"></a>00122 <span class="comment">// Signification:</span>
<a name="l00123"></a>00123 <span class="comment">// Valeurs par defaut:</span>
<a name="l00124"></a>00124 <span class="comment">// Contraintes: reference constante</span>
<a name="l00125"></a>00125 <span class="comment">// doit pourvoir etre force au type &quot;Fluide_base&quot;</span>
<a name="l00126"></a>00126 <span class="comment">// Acces: entree</span>
<a name="l00127"></a>00127 <span class="comment">// </span>
<a name="l00128"></a>00128 <span class="comment">// Signification:</span>
<a name="l00129"></a>00129 <span class="comment">// Contraintes:</span>
<a name="l00130"></a>00130 <span class="comment">// Exception: les proprietes physiques du fluide ne sont pas toutes specifiees</span>
<a name="l00131"></a>00131 <span class="comment">// Effets de bord:</span>
<a name="l00132"></a>00132 <span class="comment">// Postcondition:</span>
<a name="l00133"></a>00133 <span class="comment">//</span>
<a name="l00134"></a>00134 <span class="comment">//</span><span class="comment"></span>
<a name="l00135"></a>00135 <span class="comment">//! Associe un milieu physique a l&#39;equation,&lt;br&gt;le milieu est en fait caste en Fluide_base ou en Fluide_Ostwald.</span>
<a name="l00136"></a><a class="code" href="classEnergie__Multiphase.html#a8a2ccb4e493ca156fbf77c29acad3811">00136</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#a8a2ccb4e493ca156fbf77c29acad3811" title="Associe un milieu physique a l&#39;equation, le milieu est en fait caste en Fluide_base ou en Fluide_Ostw...">Energie_Multiphase::associer_milieu_base</a>(<span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; un_milieu)
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138   <span class="keyword">const</span> <a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>&amp; un_fluide = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>,un_milieu);
<a name="l00139"></a>00139   <a class="code" href="classEnergie__Multiphase.html#a226c59c85475d763ad81b90beb3a3d32" title="Associe un fluide incompressible a l&#39;equation.">associer_fluide</a>(un_fluide);
<a name="l00140"></a>00140 }
<a name="l00141"></a>00141 
<a name="l00142"></a><a class="code" href="classEnergie__Multiphase.html#ab37ea18b148fcfa4484fdf3b5dbf0554">00142</a> <span class="keyword">const</span> <a class="code" href="classChamp__Don.html" title="classe Champ_Don Classe generique de la hierarchie des champs donnes, un objet Champ_Don peut referen...">Champ_Don</a>&amp; <a class="code" href="classEnergie__Multiphase.html#ab37ea18b148fcfa4484fdf3b5dbf0554">Energie_Multiphase::diffusivite_pour_transport</a>()
<a name="l00143"></a>00143 {
<a name="l00144"></a>00144   <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#abda8384fb07b727556d381bbfb7a34b8" title="Renvoie le milieu physique de l&#39;equation. (un Fluide_base upcaste en Milieu_base) (version const)...">milieu</a>().<a class="code" href="classMilieu__base.html#a99251c07d04e1f13ec4c300bfe8757db" title="Renvoie la conductivite du milieu. (version const)">conductivite</a>();
<a name="l00145"></a>00145 }
<a name="l00146"></a>00146 
<a name="l00147"></a><a class="code" href="classEnergie__Multiphase.html#a3021a52be1107596f9de14b8ff89f3ca">00147</a> <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classEnergie__Multiphase.html#a3021a52be1107596f9de14b8ff89f3ca">Energie_Multiphase::diffusivite_pour_pas_de_temps</a>()
<a name="l00148"></a>00148 {
<a name="l00149"></a>00149   <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#abda8384fb07b727556d381bbfb7a34b8" title="Renvoie le milieu physique de l&#39;equation. (un Fluide_base upcaste en Milieu_base) (version const)...">milieu</a>().<a class="code" href="classMilieu__base.html#a4da7a57f2b9cafb4aaf9309360b6a29f" title="Renvoie la diffusivite du milieu. (version const)">diffusivite</a>();
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 <span class="comment">// Precondition:</span>
<a name="l00153"></a>00153 <span class="comment">// Parametre:</span>
<a name="l00154"></a>00154 <span class="comment">// Signification:</span>
<a name="l00155"></a>00155 <span class="comment">// Valeurs par defaut:</span>
<a name="l00156"></a>00156 <span class="comment">// Contraintes:</span>
<a name="l00157"></a>00157 <span class="comment">// Acces:</span>
<a name="l00158"></a>00158 <span class="comment">// </span>
<a name="l00159"></a>00159 <span class="comment">// Signification:</span>
<a name="l00160"></a>00160 <span class="comment">// Contraintes:</span>
<a name="l00161"></a>00161 <span class="comment">// Exception:</span>
<a name="l00162"></a>00162 <span class="comment">// Effets de bord:</span>
<a name="l00163"></a>00163 <span class="comment">// Postcondition: l&#39;equation est discretisee</span>
<a name="l00164"></a>00164 <span class="comment">//</span><span class="comment"></span>
<a name="l00165"></a>00165 <span class="comment">//! Discretise l&#39;equation.</span>
<a name="l00166"></a><a class="code" href="classEnergie__Multiphase.html#a3390c49d7fd2fc492268d24b023d9aee">00166</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#a3390c49d7fd2fc492268d24b023d9aee" title="Discretise l&#39;equation.">Energie_Multiphase::discretiser</a>()
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168   <span class="keyword">const</span> <a class="code" href="classDiscret__Thyd.html" title="classe Discret_Thyd Cette classe est la classe de base representant une discretisation spatiale appli...">Discret_Thyd</a>&amp; dis=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDiscret__Thyd.html" title="classe Discret_Thyd Cette classe est la classe de base representant une discretisation spatiale appli...">Discret_Thyd</a>, <a class="code" href="classEquation__base.html#a324a761eaad25eb00d18e14764a1362e" title="Renvoie la discretisation associee a l&#39;equation.">discretisation</a>());
<a name="l00169"></a>00169   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Energy equation discretization &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00170"></a>00170   <span class="keyword">const</span> <a class="code" href="classPb__Multiphase.html" title="classe Pb_Multiphase Cette classe represente un probleme de thermohydraulique multiphase de type &quot;3*...">Pb_Multiphase</a>&amp; pb = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPb__Multiphase.html" title="classe Pb_Multiphase Cette classe represente un probleme de thermohydraulique multiphase de type &quot;3*...">Pb_Multiphase</a>, <a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>());
<a name="l00171"></a>00171   dis.<a class="code" href="classDiscret__Thermique.html#a906524db2363d583643f646bc8f90417">temperature</a>(<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>(), <a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>(), <a class="code" href="classEnergie__Multiphase.html#aa20a70e0c0d889ffd277678440a5ebac">l_inco_ch</a>, pb.<a class="code" href="classPb__Multiphase.html#abe4d82264325979f54acf7332f9efc09">nb_phases</a>());
<a name="l00172"></a>00172   <a class="code" href="classEnergie__Multiphase.html#aa20a70e0c0d889ffd277678440a5ebac">l_inco_ch</a>.<a class="code" href="classDeriv__Champ__Inc__base.html#a9e0b743a3e124e7114fa977b36b68225">valeur</a>().<a class="code" href="classField__base.html#a740d888da6eb9db6c7b62e65faf2436e" title="Fixer la nature d&#39;un champ: scalaire, multiscalaire, vectoriel. Le type (enumere) Nature_du_champ est...">fixer_nature_du_champ</a>(pb.<a class="code" href="classPb__Multiphase.html#abe4d82264325979f54acf7332f9efc09">nb_phases</a>() == 1 ? <a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646ba38e43fd39568540207f625e91bfcb6a3">scalaire</a> : pb.<a class="code" href="classPb__Multiphase.html#abe4d82264325979f54acf7332f9efc09">nb_phases</a>() == <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> ? <a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646ba66d795f4e2fbb5636a3966c73964c5e7">vectoriel</a> : <a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646ba5c7919c9af898542b94861e963ade862">multi_scalaire</a>); <span class="comment">//pfft</span>
<a name="l00173"></a>00173   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; pb.<a class="code" href="classPb__Multiphase.html#abe4d82264325979f54acf7332f9efc09">nb_phases</a>(); i++)
<a name="l00174"></a>00174     <a class="code" href="classEnergie__Multiphase.html#aa20a70e0c0d889ffd277678440a5ebac">l_inco_ch</a>.<a class="code" href="classDeriv__Champ__Inc__base.html#a9e0b743a3e124e7114fa977b36b68225">valeur</a>().<a class="code" href="classField__base.html#ac2b194dc5cdc675df21508d28b80b366" title="Fixe le nom de la i-eme composante du champ.">fixer_nom_compo</a>(i, <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;temperature_&quot;</span>) + pb.<a class="code" href="classPb__Multiphase.html#a7c9f751e10ed0f031c64d4345ba10e52">nom_phase</a>(i));
<a name="l00175"></a>00175   <a class="code" href="classEquation__base.html#ad687c312e72dcbc783cf597af5927b07">champs_compris_</a>.<a class="code" href="classChamps__compris.html#aae00ca562b7d89ff638fae94d6973fcf">ajoute_champ</a>(<a class="code" href="classEnergie__Multiphase.html#aa20a70e0c0d889ffd277678440a5ebac">l_inco_ch</a>);
<a name="l00176"></a>00176   <a class="code" href="classEnergie__Multiphase.html#a3390c49d7fd2fc492268d24b023d9aee" title="Discretise l&#39;equation.">Equation_base::discretiser</a>();
<a name="l00177"></a>00177   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Energie_Multiphase::discretiser() ok&quot;</span> &lt;&lt; finl;
<a name="l00178"></a>00178 }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="comment">// Precondition:</span>
<a name="l00182"></a>00182 <span class="comment">// Parametre:</span>
<a name="l00183"></a>00183 <span class="comment">// Signification:</span>
<a name="l00184"></a>00184 <span class="comment">// Valeurs par defaut:</span>
<a name="l00185"></a>00185 <span class="comment">// Contraintes:</span>
<a name="l00186"></a>00186 <span class="comment">// Acces:</span>
<a name="l00187"></a>00187 <span class="comment">// Exception:</span>
<a name="l00188"></a>00188 <span class="comment">// Effets de bord:</span>
<a name="l00189"></a>00189 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00190"></a>00190 <span class="comment">//</span>
<a name="l00191"></a>00191 <span class="comment">//</span>
<a name="l00192"></a>00192 <span class="comment">//</span><span class="comment"></span>
<a name="l00193"></a>00193 <span class="comment">//! Renvoie le milieu physique de l&#39;equation.&lt;br&gt;(un Fluide_base upcaste en Milieu_base)&lt;br&gt;(version const)</span>
<a name="l00194"></a>00194 <span class="comment"></span><span class="comment">/** \return Milieu_base\&amp;&lt;br&gt;</span>
<a name="l00195"></a>00195 <span class="comment">Signification: le Fluide_base upcaste en Milieu_base&lt;br&gt;</span>
<a name="l00196"></a>00196 <span class="comment">Contraintes: reference constante */</span>
<a name="l00197"></a><a class="code" href="classEnergie__Multiphase.html#abda8384fb07b727556d381bbfb7a34b8">00197</a> <span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; <a class="code" href="classEnergie__Multiphase.html#abda8384fb07b727556d381bbfb7a34b8" title="Renvoie le milieu physique de l&#39;equation. (un Fluide_base upcaste en Milieu_base) (version const)...">Energie_Multiphase::milieu</a>()<span class="keyword"> const</span>
<a name="l00198"></a>00198 <span class="keyword"></span>{
<a name="l00199"></a>00199   <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#ad099ef2ced00044e097d15d7feac1792" title="Renvoie le fluide incompressible associe a l&#39;equation. (version const)">fluide</a>();
<a name="l00200"></a>00200 }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="comment">// Precondition:</span>
<a name="l00204"></a>00204 <span class="comment">// Parametre:</span>
<a name="l00205"></a>00205 <span class="comment">// Signification:</span>
<a name="l00206"></a>00206 <span class="comment">// Valeurs par defaut:</span>
<a name="l00207"></a>00207 <span class="comment">// Contraintes:</span>
<a name="l00208"></a>00208 <span class="comment">// Acces:</span>
<a name="l00209"></a>00209 <span class="comment">// Exception:</span>
<a name="l00210"></a>00210 <span class="comment">// Effets de bord:</span>
<a name="l00211"></a>00211 <span class="comment">// Postcondition:</span>
<a name="l00212"></a>00212 <span class="comment">//</span>
<a name="l00213"></a>00213 <span class="comment">//</span><span class="comment"></span>
<a name="l00214"></a>00214 <span class="comment">//! Renvoie le milieu physique de l&#39;equation.&lt;br&gt;(un Fluide_base upcaste en Milieu_base)</span>
<a name="l00215"></a>00215 <span class="comment"></span><span class="comment">/** \return Milieu_base\&amp;&lt;br&gt;</span>
<a name="l00216"></a>00216 <span class="comment">Signification: le Fluide_base upcaste en Milieu_base&lt;br&gt;</span>
<a name="l00217"></a>00217 <span class="comment">Contraintes: */</span>
<a name="l00218"></a><a class="code" href="classEnergie__Multiphase.html#a947ca3c4c7415ee293e4e30821e814dc">00218</a> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; <a class="code" href="classEnergie__Multiphase.html#abda8384fb07b727556d381bbfb7a34b8" title="Renvoie le milieu physique de l&#39;equation. (un Fluide_base upcaste en Milieu_base) (version const)...">Energie_Multiphase::milieu</a>()
<a name="l00219"></a>00219 {
<a name="l00220"></a>00220   <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#ad099ef2ced00044e097d15d7feac1792" title="Renvoie le fluide incompressible associe a l&#39;equation. (version const)">fluide</a>();
<a name="l00221"></a>00221 }
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 <span class="comment">// Precondition:</span>
<a name="l00225"></a>00225 <span class="comment">// Parametre:</span>
<a name="l00226"></a>00226 <span class="comment">// Signification:</span>
<a name="l00227"></a>00227 <span class="comment">// Valeurs par defaut:</span>
<a name="l00228"></a>00228 <span class="comment">// Contraintes:</span>
<a name="l00229"></a>00229 <span class="comment">// Acces:</span>
<a name="l00230"></a>00230 <span class="comment">// Exception: pas de fluide associe a l&#39;eqaution</span>
<a name="l00231"></a>00231 <span class="comment">// Effets de bord:</span>
<a name="l00232"></a>00232 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00233"></a>00233 <span class="comment">//</span>
<a name="l00234"></a>00234 <span class="comment">//</span><span class="comment"></span>
<a name="l00235"></a>00235 <span class="comment">//! Renvoie le fluide incompressible associe a l&#39;equation.&lt;br&gt;(version const)</span>
<a name="l00236"></a>00236 <span class="comment"></span><span class="comment">/** \return Fluide_base\&amp;&lt;br&gt;</span>
<a name="l00237"></a>00237 <span class="comment">Signification: le fluide incompressible associe a l&#39;equation&lt;br&gt;</span>
<a name="l00238"></a>00238 <span class="comment">Contraintes: reference constante */</span>
<a name="l00239"></a><a class="code" href="classEnergie__Multiphase.html#ad099ef2ced00044e097d15d7feac1792">00239</a> <span class="keyword">const</span> <a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>&amp; <a class="code" href="classEnergie__Multiphase.html#ad099ef2ced00044e097d15d7feac1792" title="Renvoie le fluide incompressible associe a l&#39;equation. (version const)">Energie_Multiphase::fluide</a>()<span class="keyword"> const</span>
<a name="l00240"></a>00240 <span class="keyword"></span>{
<a name="l00241"></a>00241   <span class="keywordflow">if</span> (!<a class="code" href="classEnergie__Multiphase.html#a55cf17e181bdeb34e8ed54c196d14488">le_fluide</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00242"></a>00242     {
<a name="l00243"></a>00243       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You forgot to associate the fluid to the problem named &quot;</span> &lt;&lt; <a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00244"></a>00244       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00245"></a>00245     }
<a name="l00246"></a>00246   <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#a55cf17e181bdeb34e8ed54c196d14488">le_fluide</a>.<a class="code" href="classRef__Fluide__base.html#a614fc18293b0b3da4f460a857a3b3cb8">valeur</a>();
<a name="l00247"></a>00247 }
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="comment">// Precondition:</span>
<a name="l00251"></a>00251 <span class="comment">// Parametre:</span>
<a name="l00252"></a>00252 <span class="comment">// Signification:</span>
<a name="l00253"></a>00253 <span class="comment">// Valeurs par defaut:</span>
<a name="l00254"></a>00254 <span class="comment">// Contraintes:</span>
<a name="l00255"></a>00255 <span class="comment">// Acces:</span>
<a name="l00256"></a>00256 <span class="comment">// Exception: pas de fluide associe a l&#39;eqaution</span>
<a name="l00257"></a>00257 <span class="comment">// Effets de bord:</span>
<a name="l00258"></a>00258 <span class="comment">// Postcondition:</span>
<a name="l00259"></a>00259 <span class="comment">//</span><span class="comment"></span>
<a name="l00260"></a>00260 <span class="comment">//! Renvoie le fluide incompressible associe a l&#39;equation.</span>
<a name="l00261"></a>00261 <span class="comment"></span><span class="comment">/** \return Fluide_base\&amp;&lt;br&gt;</span>
<a name="l00262"></a>00262 <span class="comment">Signification: le fluide incompressible associe a l&#39;equation&lt;br&gt;</span>
<a name="l00263"></a>00263 <span class="comment">Contraintes: */</span>
<a name="l00264"></a><a class="code" href="classEnergie__Multiphase.html#a026d7021c74c9ac67787136591e1c155">00264</a> <a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>&amp; <a class="code" href="classEnergie__Multiphase.html#ad099ef2ced00044e097d15d7feac1792" title="Renvoie le fluide incompressible associe a l&#39;equation. (version const)">Energie_Multiphase::fluide</a>()
<a name="l00265"></a>00265 {
<a name="l00266"></a>00266   assert(<a class="code" href="classEnergie__Multiphase.html#a55cf17e181bdeb34e8ed54c196d14488">le_fluide</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>());
<a name="l00267"></a>00267   <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#a55cf17e181bdeb34e8ed54c196d14488">le_fluide</a>.<a class="code" href="classRef__Fluide__base.html#a614fc18293b0b3da4f460a857a3b3cb8">valeur</a>();
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="comment">// Precondition: Sortie&amp;</span>
<a name="l00272"></a>00272 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00273"></a>00273 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00274"></a>00274 <span class="comment">// Valeurs par defaut:</span>
<a name="l00275"></a>00275 <span class="comment">// Contraintes:</span>
<a name="l00276"></a>00276 <span class="comment">// Acces: entree/sortie</span>
<a name="l00277"></a>00277 <span class="comment">// Exception:</span>
<a name="l00278"></a>00278 <span class="comment">// Effets de bord:</span>
<a name="l00279"></a>00279 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00280"></a>00280 <span class="comment">//</span>
<a name="l00281"></a>00281 <span class="comment">//</span><span class="comment"></span>
<a name="l00282"></a>00282 <span class="comment">//! Impression des flux sur les bords sur un flot de sortie.&lt;br&gt;Appelle Equation_base::impr(Sortie\&amp;)</span>
<a name="l00283"></a>00283 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00284"></a>00284 <span class="comment">Signification: code de retour propage&lt;br&gt;</span>
<a name="l00285"></a>00285 <span class="comment">Contraintes: */</span>
<a name="l00286"></a><a class="code" href="classEnergie__Multiphase.html#a4ec00900b6caf5c82e832957e6434f09">00286</a> <span class="keywordtype">int</span> <a class="code" href="classEnergie__Multiphase.html#a4ec00900b6caf5c82e832957e6434f09" title="Impression des flux sur les bords sur un flot de sortie. Appelle Equation_base::impr(Sortie&amp;)">Energie_Multiphase::impr</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00287"></a>00287 <span class="keyword"></span>{
<a name="l00288"></a>00288   <span class="keywordflow">return</span> <a class="code" href="classEnergie__Multiphase.html#a4ec00900b6caf5c82e832957e6434f09" title="Impression des flux sur les bords sur un flot de sortie. Appelle Equation_base::impr(Sortie&amp;)">Equation_base::impr</a>(os);
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 <span class="comment">// Precondition:</span>
<a name="l00293"></a>00293 <span class="comment">// Parametre:</span>
<a name="l00294"></a>00294 <span class="comment">// Signification:</span>
<a name="l00295"></a>00295 <span class="comment">// Valeurs par defaut:</span>
<a name="l00296"></a>00296 <span class="comment">// Contraintes:</span>
<a name="l00297"></a>00297 <span class="comment">// Acces:</span>
<a name="l00298"></a>00298 <span class="comment">// Exception:</span>
<a name="l00299"></a>00299 <span class="comment">// Effets de bord:</span>
<a name="l00300"></a>00300 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00301"></a>00301 <span class="comment">//</span>
<a name="l00302"></a>00302 <span class="comment">//</span><span class="comment"></span>
<a name="l00303"></a>00303 <span class="comment">//! Renvoie le nom du domaine d&#39;application de l&#39;equation.&lt;br&gt;Ici &quot;Thermique&quot;.</span>
<a name="l00304"></a>00304 <span class="comment"></span><span class="comment">/** \return Motcle\&amp;&lt;br&gt;</span>
<a name="l00305"></a>00305 <span class="comment">Signification: le nom du domaine d&#39;application de l&#39;equation&lt;br&gt;</span>
<a name="l00306"></a>00306 <span class="comment">Contraintes: toujours egal a &quot;Thermique&quot; */</span>
<a name="l00307"></a><a class="code" href="classEnergie__Multiphase.html#a3eb805283e1b87d71c4b0d67e3cbfe7b">00307</a> <span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; <a class="code" href="classEnergie__Multiphase.html#a3eb805283e1b87d71c4b0d67e3cbfe7b" title="Renvoie le nom du domaine d&#39;application de l&#39;equation. Ici &quot;Thermique&quot;.">Energie_Multiphase::domaine_application</a>()<span class="keyword"> const</span>
<a name="l00308"></a>00308 <span class="keyword"></span>{
<a name="l00309"></a>00309   <span class="keyword">static</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> mot(<span class="stringliteral">&quot;Thermique&quot;</span>);
<a name="l00310"></a>00310   <span class="keywordflow">return</span> mot;
<a name="l00311"></a>00311 }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313 <span class="comment">// Precondition:</span>
<a name="l00314"></a>00314 <span class="comment">// Parametre: Fluide_base&amp; un_fluide</span>
<a name="l00315"></a>00315 <span class="comment">// Signification: le milieu fluide incompressible a associer a l&#39;equation</span>
<a name="l00316"></a>00316 <span class="comment">// Valeurs par defaut:</span>
<a name="l00317"></a>00317 <span class="comment">// Contraintes: reference constante</span>
<a name="l00318"></a>00318 <span class="comment">// Acces: entree</span>
<a name="l00319"></a>00319 <span class="comment">// </span>
<a name="l00320"></a>00320 <span class="comment">// Signification:</span>
<a name="l00321"></a>00321 <span class="comment">// Contraintes:</span>
<a name="l00322"></a>00322 <span class="comment">// Exception:</span>
<a name="l00323"></a>00323 <span class="comment">// Effets de bord:</span>
<a name="l00324"></a>00324 <span class="comment">// Postcondition: l&#39;equation a un milieu associe</span>
<a name="l00325"></a>00325 <span class="comment">//</span><span class="comment"></span>
<a name="l00326"></a>00326 <span class="comment">//! Associe un fluide incompressible a l&#39;equation.</span>
<a name="l00327"></a><a class="code" href="classEnergie__Multiphase.html#a226c59c85475d763ad81b90beb3a3d32">00327</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#a226c59c85475d763ad81b90beb3a3d32" title="Associe un fluide incompressible a l&#39;equation.">Energie_Multiphase::associer_fluide</a>(<span class="keyword">const</span> <a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>&amp; un_fluide)
<a name="l00328"></a>00328 {
<a name="l00329"></a>00329   <a class="code" href="classEnergie__Multiphase.html#a55cf17e181bdeb34e8ed54c196d14488">le_fluide</a> = un_fluide;
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="classEnergie__Multiphase.html#a2fef530eea456ecc00c7a9c7049d91c7">00332</a> <span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#a2fef530eea456ecc00c7a9c7049d91c7">Energie_Multiphase::dimensionner_matrice_sans_mem</a>(<a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; matrice)
<a name="l00333"></a>00333 {
<a name="l00334"></a>00334   <a class="code" href="classEnergie__Multiphase.html#a2fef530eea456ecc00c7a9c7049d91c7">Convection_Diffusion_std::dimensionner_matrice_sans_mem</a>(matrice);
<a name="l00335"></a>00335   <span class="keywordflow">if</span> (<a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>()) <a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classDeriv__Operateur__Evanescence__base.html#ac80600f952f8640f7c7ac3f859480f70">valeur</a>().<a class="code" href="classOperateur__base.html#a66ef3c42e72d13fce0852ba92e56be6a" title="NE FAIT RIEN A surcharger dans les classes derivees.">dimensionner</a>(matrice);
<a name="l00336"></a>00336 }
<a name="l00337"></a>00337 
<a name="l00338"></a><a class="code" href="classEnergie__Multiphase.html#ae5fe7ddfdd423b6902168c0e3cbdf88d">00338</a> <span class="keywordtype">int</span> <a class="code" href="classEnergie__Multiphase.html#ae5fe7ddfdd423b6902168c0e3cbdf88d">Energie_Multiphase::has_interface_blocs</a>()<span class="keyword"> const</span>
<a name="l00339"></a>00339 <span class="keyword"></span>{
<a name="l00340"></a>00340   <span class="keywordtype">int</span> ok = <a class="code" href="classEnergie__Multiphase.html#ae5fe7ddfdd423b6902168c0e3cbdf88d">Convection_Diffusion_std::has_interface_blocs</a>();
<a name="l00341"></a>00341   <span class="keywordflow">if</span> (<a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>()) ok &amp;= <a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classDeriv__Operateur__Evanescence__base.html#ac80600f952f8640f7c7ac3f859480f70">valeur</a>().<a class="code" href="classOperateur__base.html#add0b573a00ff5807bca488783aeec334">has_interface_blocs</a>();
<a name="l00342"></a>00342   <span class="keywordflow">return</span> ok;
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="comment">/* l&#39;evanescence passe en dernier */</span>
<a name="l00346"></a>00346 <span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#ab68566f69297748b3060545e1aac38d8">Energie_Multiphase::dimensionner_blocs</a>(<a class="code" href="Interface__blocs_8h.html#a68e4f5c4505f6b31305de844302660bb">matrices_t</a> matrices, <span class="keyword">const</span> <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a>&amp; semi_impl)<span class="keyword"> const</span>
<a name="l00347"></a>00347 <span class="keyword"></span>{
<a name="l00348"></a>00348   <a class="code" href="classEnergie__Multiphase.html#ab68566f69297748b3060545e1aac38d8">Convection_Diffusion_std::dimensionner_blocs</a>(matrices, semi_impl);
<a name="l00349"></a>00349   <span class="keywordflow">if</span> (<a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>()) <a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classDeriv__Operateur__Evanescence__base.html#ac80600f952f8640f7c7ac3f859480f70">valeur</a>().<a class="code" href="classOperateur__base.html#a1beeeb32ed7ba7f084cf0ff81152d36a">dimensionner_blocs</a>(matrices, semi_impl);
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 <span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#a2ef7bc5f8e2ca6b72239e6eae621ef27">Energie_Multiphase::assembler_blocs_avec_inertie</a>(<a class="code" href="Interface__blocs_8h.html#a68e4f5c4505f6b31305de844302660bb">matrices_t</a> matrices, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; secmem, <span class="keyword">const</span> <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a>&amp; semi_impl)<span class="keyword"> const</span>
<a name="l00353"></a>00353 <span class="keyword"></span>{
<a name="l00354"></a>00354   <a class="code" href="classEnergie__Multiphase.html#a2ef7bc5f8e2ca6b72239e6eae621ef27">Convection_Diffusion_std::assembler_blocs_avec_inertie</a>(matrices, secmem, semi_impl);
<a name="l00355"></a>00355   <span class="keywordflow">if</span> (<a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>()) <a class="code" href="classEnergie__Multiphase.html#a4a7d36dc3743471c56fa5bd66ce15447">evanescence</a>.<a class="code" href="classDeriv__Operateur__Evanescence__base.html#ac80600f952f8640f7c7ac3f859480f70">valeur</a>().<a class="code" href="classOperateur__base.html#a0044e3ee1822094970ba5a32997fbd2a">ajouter_blocs</a>(matrices, secmem, semi_impl);
<a name="l00356"></a>00356 }
<a name="l00357"></a>00357 
<a name="l00358"></a>00358 
<a name="l00359"></a><a class="code" href="classEnergie__Multiphase.html#aaa967d784a83b9c51d0552b05bbbb0ab">00359</a> <span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#aaa967d784a83b9c51d0552b05bbbb0ab">Energie_Multiphase::calculer_alpha_rho_e</a>(<span class="keyword">const</span> <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; obj, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; bval, <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a>&amp; deriv)
<a name="l00360"></a>00360 {
<a name="l00361"></a>00361   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classEquation__base.html">Equation_base</a>, obj);
<a name="l00362"></a>00362   <span class="keyword">const</span> <a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>&amp; fl = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>, eqn.<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>());
<a name="l00363"></a>00363   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; ch_rho = fl.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>();
<a name="l00364"></a>00364   <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; ch_alpha = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPb__Multiphase.html" title="classe Pb_Multiphase Cette classe represente un probleme de thermohydraulique multiphase de type &quot;3*...">Pb_Multiphase</a>, eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>()).eq_masse.inconnue(),
<a name="l00365"></a>00365                         &amp;ch_en = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, fl.<a class="code" href="classFluide__base.html#a26436dbc53ce79df102d3b003bd6a7b6">energie_interne</a>()), <span class="comment">//toujours un Champ_Inc</span>
<a name="l00366"></a>00366                          *pch_rho = <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, ch_rho) ? &amp;<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, ch_rho) : NULL; <span class="comment">//pas toujours un Champ_Inc</span>
<a name="l00367"></a>00367   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; alpha = ch_alpha.<a class="code" href="classChamp__Inc__base.html#adb537f43f1649e103a8980314c7ed175" title="Renvoie le tableau des valeurs du champ au temps courant.">valeurs</a>(), &amp;rho = ch_rho.valeurs(), &amp;en = ch_en.valeurs();
<a name="l00368"></a>00368 
<a name="l00369"></a>00369   <span class="comment">/* valeurs du champ */</span>
<a name="l00370"></a>00370   <span class="keywordtype">int</span> i, n, N = val.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>(), Nl = val.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0), cR = <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>, ch_rho);
<a name="l00371"></a>00371   <span class="keywordflow">for</span> (i = 0; i &lt; Nl; i++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++) val(i, n) = alpha(i, n) * rho(!cR * i, n) * en(i, n);
<a name="l00372"></a>00372 
<a name="l00373"></a>00373   <span class="comment">/* on ne peut utiliser valeur_aux_bords que si ch_rho a une zone_dis_base */</span>
<a name="l00374"></a>00374   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> b_al = ch_alpha.<a class="code" href="classChamp__Inc__base.html#a2cd79416efbe173787964966da501ad0" title="renvoie la valeur du champ aux faces de bord">valeur_aux_bords</a>(), b_rho, b_en = ch_en.valeur_aux_bords();
<a name="l00375"></a>00375   <span class="keywordtype">int</span> Nb = b_al.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0);
<a name="l00376"></a>00376   <span class="keywordflow">if</span> (ch_rho.a_une_zone_dis_base()) b_rho = ch_rho.valeur_aux_bords();
<a name="l00377"></a>00377   <span class="keywordflow">else</span> b_rho.resize(Nb, N), ch_rho.valeur_aux(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, eqn.<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>()).xv_bord(), b_rho);
<a name="l00378"></a>00378   <span class="keywordflow">for</span> (i = 0; i &lt; Nb; i++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++) bval(i, n) = b_al(i, n) * b_rho(i, n) * b_en(i, n);
<a name="l00379"></a>00379 
<a name="l00380"></a>00380   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; d_a = deriv[<span class="stringliteral">&quot;alpha&quot;</span>];<span class="comment">//derivee en alpha : rho * en</span>
<a name="l00381"></a>00381   <span class="keywordflow">for</span> (d_a.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(Nl, N), i = 0; i &lt; Nl; i++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++) d_a(i, n) = rho(!cR * i, n) * en(i, n);
<a name="l00382"></a>00382 
<a name="l00383"></a>00383   <span class="comment">/* derivees a travers rho et en */</span>
<a name="l00384"></a>00384   <span class="keyword">const</span> <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a> d_vide = {}, &amp;d_rho = pch_rho ? pch_rho-&gt;derivees() : d_vide, &amp;d_en = ch_en.derivees();
<a name="l00385"></a>00385   std::set&lt;std::string&gt; vars; <span class="comment">//liste de toutes les derivees possibles</span>
<a name="l00386"></a>00386   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp; d_c : d_rho) vars.insert(d_c.first);
<a name="l00387"></a>00387   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp; d_c : d_en) vars.insert(d_c.first);
<a name="l00388"></a>00388 
<a name="l00389"></a>00389   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp; var : vars)
<a name="l00390"></a>00390     {
<a name="l00391"></a>00391       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> *dr = d_rho.count(var) ? &amp;d_rho.at(var) : NULL, *de = d_en.count(var) ? &amp;d_en.at(var) : NULL;
<a name="l00392"></a>00392       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; d_v = deriv[var];
<a name="l00393"></a>00393       <span class="keywordflow">for</span> (d_v.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(Nl, N), i = 0; i &lt; Nl; i++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++)
<a name="l00394"></a>00394           d_v(i, n) = alpha(i, n) * ((dr ? (*dr)(i, n) * en(i, n) : 0) + (de ? rho(!cR * i, n) * (*de)(i, n) : 0));
<a name="l00395"></a>00395     }
<a name="l00396"></a>00396 }
<a name="l00397"></a>00397 
<a name="l00398"></a><a class="code" href="classEnergie__Multiphase.html#adf27dbda965bbafe7403f878d78d11da">00398</a> <span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#adf27dbda965bbafe7403f878d78d11da">Energie_Multiphase::calculer_alpha_rho_h</a>(<span class="keyword">const</span> <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; obj, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; bval, <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a>&amp; deriv)
<a name="l00399"></a>00399 {
<a name="l00400"></a>00400   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classEquation__base.html">Equation_base</a>, obj);
<a name="l00401"></a>00401   <span class="keyword">const</span> <a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>&amp; fl = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>, eqn.<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>());
<a name="l00402"></a>00402   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; ch_rho = fl.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>();
<a name="l00403"></a>00403   <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; ch_alpha = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPb__Multiphase.html" title="classe Pb_Multiphase Cette classe represente un probleme de thermohydraulique multiphase de type &quot;3*...">Pb_Multiphase</a>, eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>()).eq_masse.inconnue(),
<a name="l00404"></a>00404                         &amp;ch_h = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, fl.<a class="code" href="classFluide__base.html#ad493f117bee75d676ccb710f0df36cb9">enthalpie</a>()), <span class="comment">//toujours un Champ_Inc</span>
<a name="l00405"></a>00405                          *pch_rho = <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, ch_rho) ? &amp;<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, ch_rho) : NULL; <span class="comment">//pas toujours un Champ_Inc</span>
<a name="l00406"></a>00406   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; alpha = ch_alpha.<a class="code" href="classChamp__Inc__base.html#adb537f43f1649e103a8980314c7ed175" title="Renvoie le tableau des valeurs du champ au temps courant.">valeurs</a>(), &amp;rho = ch_rho.valeurs(), &amp;h = ch_h.valeurs();
<a name="l00407"></a>00407 
<a name="l00408"></a>00408   <span class="comment">/* valeurs du champ */</span>
<a name="l00409"></a>00409   <span class="keywordtype">int</span> i, n, N = val.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>(), Nl = val.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0), cR = <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>, ch_rho);
<a name="l00410"></a>00410   <span class="keywordflow">for</span> (i = 0; i &lt; Nl; i++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++) val(i, n) = alpha(i, n) * rho(!cR * i, n) * h(i, n);
<a name="l00411"></a>00411 
<a name="l00412"></a>00412   <span class="comment">/* on ne peut utiliser valeur_aux_bords que si ch_rho a une zone_dis_base */</span>
<a name="l00413"></a>00413   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> b_al = ch_alpha.<a class="code" href="classChamp__Inc__base.html#a2cd79416efbe173787964966da501ad0" title="renvoie la valeur du champ aux faces de bord">valeur_aux_bords</a>(), b_rho, b_h = ch_h.valeur_aux_bords();
<a name="l00414"></a>00414   <span class="keywordtype">int</span> Nb = b_al.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0);
<a name="l00415"></a>00415   <span class="keywordflow">if</span> (ch_rho.a_une_zone_dis_base()) b_rho = ch_rho.valeur_aux_bords();
<a name="l00416"></a>00416   <span class="keywordflow">else</span> b_rho.resize(Nb, N), ch_rho.valeur_aux(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, eqn.<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>()).xv_bord(), b_rho);
<a name="l00417"></a>00417   <span class="keywordflow">for</span> (i = 0; i &lt; Nb; i++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++) bval(i, n) = b_al(i, n) * b_rho(i, n) * b_h(i, n);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; d_a = deriv[<span class="stringliteral">&quot;alpha&quot;</span>];<span class="comment">//derivee en alpha : rho * h</span>
<a name="l00420"></a>00420   <span class="keywordflow">for</span> (d_a.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(Nl, N), i = 0; i &lt; Nl; i++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++) d_a(i, n) = rho(!cR * i, n) * h(i, n);
<a name="l00421"></a>00421 
<a name="l00422"></a>00422   <span class="comment">/* derivees a travers rho et en */</span>
<a name="l00423"></a>00423   <span class="keyword">const</span> <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a> d_vide = {}, &amp;d_rho = pch_rho ? pch_rho-&gt;derivees() : d_vide, &amp;d_h = ch_h.derivees();
<a name="l00424"></a>00424   std::set&lt;std::string&gt; vars; <span class="comment">//liste de toutes les derivees possibles</span>
<a name="l00425"></a>00425   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp; d_c : d_rho) vars.insert(d_c.first);
<a name="l00426"></a>00426   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp; d_c : d_h) vars.insert(d_c.first);
<a name="l00427"></a>00427 
<a name="l00428"></a>00428   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp; var : vars)
<a name="l00429"></a>00429     {
<a name="l00430"></a>00430       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> *dr = d_rho.count(var) ? &amp;d_rho.at(var) : NULL, *dh = d_h.count(var) ? &amp;d_h.at(var) : NULL;
<a name="l00431"></a>00431       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; d_v = deriv[var];
<a name="l00432"></a>00432       <span class="keywordflow">for</span> (d_v.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(Nl, N), i = 0; i &lt; Nl; i++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++)
<a name="l00433"></a>00433           d_v(i, n) = alpha(i, n) * ((dr ? (*dr)(i, n) * h(i, n) : 0) + (dh ? rho(!cR * i, n) * (*dh)(i, n) : 0));
<a name="l00434"></a>00434     }
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 
<a name="l00437"></a><a class="code" href="classEnergie__Multiphase.html#a9f73d0e90b5ae2aaea5d289ee35e1146">00437</a> <span class="keywordtype">void</span> <a class="code" href="classEnergie__Multiphase.html#a9f73d0e90b5ae2aaea5d289ee35e1146">Energie_Multiphase::init_champ_convecte</a>()<span class="keyword"> const</span>
<a name="l00438"></a>00438 <span class="keyword"></span>{
<a name="l00439"></a>00439   <span class="keywordflow">if</span> (<a class="code" href="classEquation__base.html#a207110280e36a5f102ebba60a1f1c955">champ_convecte_</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>()) <span class="keywordflow">return</span>; <span class="comment">//deja fait</span>
<a name="l00440"></a>00440   <span class="keywordtype">int</span> Nt = <a class="code" href="classEnergie__Multiphase.html#a253b2525f9cdea24c6aeebdb1855e22a" title="Renvoie le champ inconnue representant l&#39;inconnue (T ou H) (version const)">inconnue</a>()-&gt;<a class="code" href="classChamp__Inc.html#ab4847a769013ea94d3033240173f674b" title="Appel a l&#39;objet sous-jacent Renvoie le nombre de pas de temps conserve.">nb_valeurs_temporelles</a>(), Nl = <a class="code" href="classEnergie__Multiphase.html#a253b2525f9cdea24c6aeebdb1855e22a" title="Renvoie le champ inconnue representant l&#39;inconnue (T ou H) (version const)">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0), Nc = <a class="code" href="classEnergie__Multiphase.html#a253b2525f9cdea24c6aeebdb1855e22a" title="Renvoie le champ inconnue representant l&#39;inconnue (T ou H) (version const)">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>().<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00441"></a>00441 <span class="comment">// champ_convecte_ : meme type / support que l&#39;inconnue</span>
<a name="l00442"></a>00442   <a class="code" href="classEquation__base.html#a324a761eaad25eb00d18e14764a1362e" title="Renvoie la discretisation associee a l&#39;equation.">discretisation</a>().<a class="code" href="classDiscretisation__base.html#a9352fde12ac9fe076a5afba1f06c8a28" title="Methode statique qui cree un Champ_Inc du type specifie. Les parametres &quot;directive&quot; et &quot;nom_discre...">creer_champ</a>(<a class="code" href="classEquation__base.html#a207110280e36a5f102ebba60a1f1c955">champ_convecte_</a>, <a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>(), <a class="code" href="classEnergie__Multiphase.html#a253b2525f9cdea24c6aeebdb1855e22a" title="Renvoie le champ inconnue representant l&#39;inconnue (T ou H) (version const)">inconnue</a>().<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>(), <span class="stringliteral">&quot;N/A&quot;</span>, <span class="stringliteral">&quot;N/A&quot;</span>, Nc, Nl, Nt, <a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>().temps_courant());
<a name="l00443"></a>00443   <a class="code" href="classEquation__base.html#a207110280e36a5f102ebba60a1f1c955">champ_convecte_</a>-&gt;<a class="code" href="classChamp__Inc.html#aa6febd6d77fcb0d182b368f6f2c26b2e" title="Appel a l&#39;objet sous-jacent Associe le champ a l&#39;equation dont il est une inconnue.">associer_eqn</a>(*<span class="keyword">this</span>);
<a name="l00444"></a>00444   <span class="keyword">auto</span> nom_fonc = <a class="code" href="classEnergie__Multiphase.html#acae7400dec924a27c497dedac84cbfd4">get_fonc_champ_convecte</a>();
<a name="l00445"></a>00445   <a class="code" href="classEquation__base.html#a207110280e36a5f102ebba60a1f1c955">champ_convecte_</a>-&gt;<a class="code" href="classObjet__U.html#a469dbcad1d4a98a67e4246dce8e264ad" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(nom_fonc.first.c_str()), <a class="code" href="classEquation__base.html#a207110280e36a5f102ebba60a1f1c955">champ_convecte_</a>-&gt;init_champ_calcule(*<span class="keyword">this</span>, nom_fonc.second);
<a name="l00446"></a>00446 }
<a name="l00447"></a>00447 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:36 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
