<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Framework/Postraitement_lata.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Framework/Postraitement_lata.cpp</div>  </div>
</div>
<div class="contents">
<a href="Postraitement__lata_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Postraitement_lata.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Framework</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/34</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;<a class="code" href="Postraitement__lata_8h.html">Postraitement_lata.h</a>&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="PE__Groups_8h.html">PE_Groups.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="EcrFicPartageBin_8h.html">EcrFicPartageBin.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Discretisation__base_8h.html">Discretisation_base.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Format__Post__Lata__V1_8h.html">Format_Post_Lata_V1.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="keyword">class </span><a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a>;
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="comment">// Quelques variables internes qu&#39;on ne veut pas publier...</span>
<a name="l00034"></a><a class="code" href="classPostraitement__lata__private__data.html">00034</a> <span class="keyword">class </span><a class="code" href="classPostraitement__lata__private__data.html">Postraitement_lata_private_data</a>
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036 <span class="keyword">public</span>:
<a name="l00037"></a><a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">00037</a>   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) <a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a>;
<a name="l00038"></a><a class="code" href="classPostraitement__lata__private__data.html#ac845278f0fcc4bc7b2efe66987075777">00038</a>   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>       <a class="code" href="classPostraitement__lata__private__data.html#ac845278f0fcc4bc7b2efe66987075777">valeurs</a>;
<a name="l00039"></a><a class="code" href="classPostraitement__lata__private__data.html#ab6ee060622b1fd590dbdc7c04520f9ba">00039</a>   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>       <a class="code" href="classPostraitement__lata__private__data.html#ab6ee060622b1fd590dbdc7c04520f9ba">centres_de_gravites</a>;
<a name="l00040"></a><a class="code" href="classPostraitement__lata__private__data.html#ab8058c835484fbf8cc457a51329c5276">00040</a>   <a class="code" href="classIntVect.html">IntVect</a>         <a class="code" href="classPostraitement__lata__private__data.html#ab8058c835484fbf8cc457a51329c5276">les_polys</a>;
<a name="l00041"></a>00041 };
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="Postraitement__lata_8cpp.html#a1503e76032dcefdc901655f605567fbb">00043</a> <a class="code" href="Declare__Inst_8h.html#a1a414570e3c7a7f9787a0eba4e9366e8">Implemente_instanciable_sans_constructeur_ni_destructeur</a>(<a class="code" href="classPostraitement__lata.html" title=": Classe de postraitement des champs euleriens au format lata. On peut l&#39;utiliser sans creer d&#39;instan...">Postraitement_lata</a>,&quot;Postraitement_lata&quot;,<a class="code" href="classPostraitement__base.html" title="Classe de base pour l&#39;ensemble des postraitements.">Postraitement_base</a>);
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">// ****************************************************************************</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="comment">//</span><span class="comment"></span>
<a name="l00049"></a>00049 <span class="comment">//! Renvoie l&#39;extension conventionnelle des fichiers lata : &quot;.lata&quot;</span>
<a name="l00050"></a><a class="code" href="classPostraitement__lata.html#ac3b0ce615e43cd206bdb674329c2dc5d">00050</a> <span class="comment"></span>const <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; Postraitement_lata::extension_lata()
<a name="l00051"></a>00051 {
<a name="l00052"></a>00052   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> extension_(<span class="stringliteral">&quot;.lata&quot;</span>);
<a name="l00053"></a>00053   <span class="keywordflow">return</span> extension_;
<a name="l00054"></a>00054 }
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <span class="comment">//</span>
<a name="l00057"></a>00057 <span class="comment">//</span><span class="comment"></span>
<a name="l00058"></a>00058 <span class="comment">//! Renvoie le nom d&#39;un fichier sans le path :&lt;br&gt;on enleve les caracteres avant le dernier /</span>
<a name="l00059"></a><a class="code" href="classPostraitement__lata.html#afe45205ee67abdf49e61e64a32982425">00059</a> <span class="comment"></span><span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="classPostraitement__lata.html#afe45205ee67abdf49e61e64a32982425" title="Renvoie le nom d&#39;un fichier sans le path : on enleve les caracteres avant le dernier /...">Postraitement_lata::remove_path</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename)
<a name="l00060"></a>00060 {
<a name="l00061"></a>00061   <span class="keywordtype">int</span> i = strlen(filename);
<a name="l00062"></a>00062   <span class="keywordflow">while</span> (i &gt; 0 &amp;&amp; filename[i-1] != <span class="charliteral">&#39;/&#39;</span>)
<a name="l00063"></a>00063     i--;
<a name="l00064"></a>00064   <span class="keywordflow">return</span> filename + i;
<a name="l00065"></a>00065 }
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="classFormat__Post__Med.html#afa97255235efd94aa5818e55a35ccce0">00068</a> <span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#a08ea725ea30ac1458a855f9f0a0ffbc1">Postraitement_lata::ecrire_entete</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; basename,
<a name="l00069"></a>00069                                        <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; discretisation,
<a name="l00070"></a>00070                                        Format format,
<a name="l00071"></a>00071                                        <span class="keyword">const</span> <a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a> * comm_group)
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073   <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94">Format_Post_Lata::Options_Para</a> <a class="code" href="classoption.html">option</a>;
<a name="l00074"></a>00074   <span class="keywordflow">if</span> (comm_group)
<a name="l00075"></a>00075     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94a448f17201fc397a7da69a62ae0637043">Format_Post_Lata::SINGLE_FILE</a>;
<a name="l00076"></a>00076   <span class="keywordflow">else</span>
<a name="l00077"></a>00077     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94aef0c737cbac106d4baaade24e94e5028">Format_Post_Lata::MULTIPLE_FILES</a>;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   <a class="code" href="classFormat__Post__Lata__V1.html#a5475ccf227ff2a3a475efab37e078820">Format_Post_Lata_V1::ecrire_entete_lata_V1</a>(basename,
<a name="l00080"></a>00080                                              option,
<a name="l00081"></a>00081                                              1 <span class="comment">/* est le premier post */</span>);
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="classPostraitement__lata.html#abddde8cf0136be3345a4e3b6b0174997">00084</a> <span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#abddde8cf0136be3345a4e3b6b0174997">Postraitement_lata::ecrire_zone</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; basename,
<a name="l00085"></a>00085                                      <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; la_zone,
<a name="l00086"></a>00086                                      <a class="code" href="classPostraitement__base.html#ad6d1cc6fb5ac382c6e0c0d1dc0f24705">Format</a> format,
<a name="l00087"></a>00087                                      <span class="keyword">const</span> <a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a> * comm_group,
<a name="l00088"></a>00088                                      <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a> * la_zone_dis)
<a name="l00089"></a>00089 {
<a name="l00090"></a>00090   <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94">Format_Post_Lata::Options_Para</a> <a class="code" href="classoption.html">option</a>;
<a name="l00091"></a>00091   <span class="keywordflow">if</span> (comm_group)
<a name="l00092"></a>00092     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94a448f17201fc397a7da69a62ae0637043">Format_Post_Lata::SINGLE_FILE</a>;
<a name="l00093"></a>00093   <span class="keywordflow">else</span>
<a name="l00094"></a>00094     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94aef0c737cbac106d4baaade24e94e5028">Format_Post_Lata::MULTIPLE_FILES</a>;
<a name="l00095"></a>00095   <a class="code" href="classFormat__Post__Lata.html#a8698c5e7e825c54749a7365f7ffff53c">Format_Post_Lata::Format</a> fmt;
<a name="l00096"></a>00096   <span class="keywordflow">if</span> (format == ASCII)
<a name="l00097"></a>00097     fmt = <a class="code" href="classFormat__Post__Lata.html#a8698c5e7e825c54749a7365f7ffff53ca64e753afccaf02de631ef2ad18733aab">Format_Post_Lata::ASCII</a>;
<a name="l00098"></a>00098   <span class="keywordflow">else</span>
<a name="l00099"></a>00099     fmt = <a class="code" href="classFormat__Post__Lata.html#a8698c5e7e825c54749a7365f7ffff53ca2d3fa963128b6785fca8a03841962e16">Format_Post_Lata::BINAIRE</a>;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101   <a class="code" href="classFormat__Post__Lata__V1.html#a85d51776e115f5367776ea8acf42f123">Format_Post_Lata_V1::ecrire_domaine_lata_V1</a>(la_zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>(),
<a name="l00102"></a>00102                                               la_zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>().<a class="code" href="classDeriv__Elem__geom__base.html#a384b487459a33f9f521fb16539ec81de">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>(),
<a name="l00103"></a>00103                                               <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>,
<a name="l00104"></a>00104                                               la_zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>(),
<a name="l00105"></a>00105                                               la_zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>(),
<a name="l00106"></a>00106                                               <a class="code" href="classFormat__Post__Lata.html#a94fde71d0a9cc3249bff7f66cc4aeaccae95363a94fad9ca940d985500b7f561f">Format_Post_Lata::INITIALIZED</a>,
<a name="l00107"></a>00107                                               basename,
<a name="l00108"></a>00108                                               fmt,
<a name="l00109"></a>00109                                               option);
<a name="l00110"></a>00110 
<a name="l00111"></a>00111   <span class="keywordflow">if</span> (la_zone_dis)
<a name="l00112"></a>00112     {
<a name="l00113"></a>00113       <a class="code" href="classFormat__Post__Lata__V1.html#ae62255dad977fcb423cd2e74dfd7ff64">Format_Post_Lata_V1::ecrire_faces_lata_V1</a>(basename,
<a name="l00114"></a>00114                                                 fmt,
<a name="l00115"></a>00115                                                 option,
<a name="l00116"></a>00116                                                 la_zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>(),
<a name="l00117"></a>00117                                                 la_zone_dis-&gt;<a class="code" href="classZone__dis__base.html#a4e64403fbe9a9c504f1eca9aa2bcd58d">face_sommets</a>(),
<a name="l00118"></a>00118                                                 <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, *la_zone_dis).elem_faces(),
<a name="l00119"></a>00119                                                 la_zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0));
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121 }
<a name="l00122"></a>00122 
<a name="l00123"></a><a class="code" href="classFormat__Post__Med.html#a81805e89380645952bcd48ca5ab1f383">00123</a> <span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#aa5c7fa28338c2ee6fdf95560687d0854">Postraitement_lata::ecrire_temps</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; basename,
<a name="l00124"></a>00124                                       <span class="keyword">const</span> <span class="keywordtype">double</span> temps,
<a name="l00125"></a>00125                                       Format format,
<a name="l00126"></a>00126                                       <span class="keyword">const</span> <a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a> * comm_group)
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128   <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94">Format_Post_Lata::Options_Para</a> <a class="code" href="classoption.html">option</a>;
<a name="l00129"></a>00129   <span class="keywordflow">if</span> (comm_group)
<a name="l00130"></a>00130     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94a448f17201fc397a7da69a62ae0637043">Format_Post_Lata::SINGLE_FILE</a>;
<a name="l00131"></a>00131   <span class="keywordflow">else</span>
<a name="l00132"></a>00132     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94aef0c737cbac106d4baaade24e94e5028">Format_Post_Lata::MULTIPLE_FILES</a>;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134   <a class="code" href="classFormat__Post__Lata.html#a94fde71d0a9cc3249bff7f66cc4aeacc">Format_Post_Lata::Status</a> status = <a class="code" href="classFormat__Post__Lata.html#a94fde71d0a9cc3249bff7f66cc4aeaccae95363a94fad9ca940d985500b7f561f">Format_Post_Lata::INITIALIZED</a>;
<a name="l00135"></a>00135 
<a name="l00136"></a>00136   <span class="keywordtype">double</span> t = temps;
<a name="l00137"></a>00137   <a class="code" href="classFormat__Post__Lata.html#a024555d2d2772d53eabdb71aa4749bb4">Format_Post_Lata::ecrire_temps_lata</a>(temps,
<a name="l00138"></a>00138                                       t,
<a name="l00139"></a>00139                                       basename,
<a name="l00140"></a>00140                                       status,
<a name="l00141"></a>00141                                       option);
<a name="l00142"></a>00142 }
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="classFormat__Post__Med.html#a66e61bf366291a34756051f860870323">00144</a> <span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#ab2b823bb7b2fe7a93a029c1e48951d90">Postraitement_lata::ecrire_champ</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;         basename,
<a name="l00145"></a>00145                                       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;         nom_du_champ,
<a name="l00146"></a>00146                                       Type_Champ         type,
<a name="l00147"></a>00147                                       <span class="keywordtype">char</span>               type_char,
<a name="l00148"></a>00148                                       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;         nom_domaine,
<a name="l00149"></a>00149                                       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;         nom_probleme,
<a name="l00150"></a>00150                                       <span class="keywordtype">double</span>             temps,
<a name="l00151"></a>00151                                       Localisation       localisation,
<a name="l00152"></a>00152                                       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;   <a class="code" href="classPostraitement__lata__private__data.html#ac845278f0fcc4bc7b2efe66987075777">valeurs</a>,
<a name="l00153"></a>00153                                       Format             format,
<a name="l00154"></a>00154                                       <span class="keyword">const</span> <a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a> * comm_group)
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156   <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94">Format_Post_Lata::Options_Para</a> <a class="code" href="classoption.html">option</a>;
<a name="l00157"></a>00157   <span class="keywordflow">if</span> (comm_group)
<a name="l00158"></a>00158     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94a448f17201fc397a7da69a62ae0637043">Format_Post_Lata::SINGLE_FILE</a>;
<a name="l00159"></a>00159   <span class="keywordflow">else</span>
<a name="l00160"></a>00160     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94aef0c737cbac106d4baaade24e94e5028">Format_Post_Lata::MULTIPLE_FILES</a>;
<a name="l00161"></a>00161   <a class="code" href="classFormat__Post__Lata.html#a8698c5e7e825c54749a7365f7ffff53c">Format_Post_Lata::Format</a> fmt;
<a name="l00162"></a>00162   <span class="keywordflow">if</span> (format == ASCII)
<a name="l00163"></a>00163     fmt = <a class="code" href="classFormat__Post__Lata.html#a8698c5e7e825c54749a7365f7ffff53ca64e753afccaf02de631ef2ad18733aab">Format_Post_Lata::ASCII</a>;
<a name="l00164"></a>00164   <span class="keywordflow">else</span>
<a name="l00165"></a>00165     fmt = <a class="code" href="classFormat__Post__Lata.html#a8698c5e7e825c54749a7365f7ffff53ca2d3fa963128b6785fca8a03841962e16">Format_Post_Lata::BINAIRE</a>;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> loc;
<a name="l00168"></a>00168   <span class="keywordflow">switch</span> (localisation)
<a name="l00169"></a>00169     {
<a name="l00170"></a>00170     <span class="keywordflow">case</span> SOMMETS:
<a name="l00171"></a>00171       loc = <span class="stringliteral">&quot;SOM&quot;</span>;
<a name="l00172"></a>00172       <span class="keywordflow">break</span>;
<a name="l00173"></a>00173     <span class="keywordflow">case</span> ELEMENTS:
<a name="l00174"></a>00174       loc = <span class="stringliteral">&quot;ELEM&quot;</span>;
<a name="l00175"></a>00175       <span class="keywordflow">break</span>;
<a name="l00176"></a>00176     <span class="keywordflow">case</span> FACES:
<a name="l00177"></a>00177       loc = <span class="stringliteral">&quot;FACES&quot;</span>;
<a name="l00178"></a>00178       <span class="keywordflow">break</span>;
<a name="l00179"></a>00179     }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181   <a class="code" href="classFormat__Post__Lata__V1.html#a199128d963486e4af84af6c6ed6f9e02">Format_Post_Lata_V1::ecrire_champ_lata_V1</a>(nom_du_champ,
<a name="l00182"></a>00182                                             nom_domaine,
<a name="l00183"></a>00183                                             loc,
<a name="l00184"></a>00184                                             valeurs,
<a name="l00185"></a>00185                                             temps,
<a name="l00186"></a>00186                                             basename,
<a name="l00187"></a>00187                                             fmt,
<a name="l00188"></a>00188                                             option);
<a name="l00189"></a>00189 }
<a name="l00190"></a>00190 
<a name="l00191"></a><a class="code" href="classPostraitement__lata.html#a7376f8ed5a006562dfef2fafe49af0f6">00191</a> <span class="keywordtype">int</span> <a class="code" href="classPostraitement__lata.html#a7376f8ed5a006562dfef2fafe49af0f6">Postraitement_lata::finir_lata</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; basename,
<a name="l00192"></a>00192                                    <span class="keyword">const</span> <a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a> * comm_group)
<a name="l00193"></a>00193 {
<a name="l00194"></a>00194   <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94">Format_Post_Lata::Options_Para</a> <a class="code" href="classoption.html">option</a>;
<a name="l00195"></a>00195   <span class="keywordflow">if</span> (comm_group)
<a name="l00196"></a>00196     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94a448f17201fc397a7da69a62ae0637043">Format_Post_Lata::SINGLE_FILE</a>;
<a name="l00197"></a>00197   <span class="keywordflow">else</span>
<a name="l00198"></a>00198     option = <a class="code" href="classFormat__Post__Lata.html#a8de32871f6c5c4602655246c85410a94aef0c737cbac106d4baaade24e94e5028">Format_Post_Lata::MULTIPLE_FILES</a>;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200   <a class="code" href="classFormat__Post__Lata__V1.html#a55bc04cca75ec56390034e84a0e885e7">Format_Post_Lata_V1::finir_lata_V1</a>(basename,
<a name="l00201"></a>00201                                      option,
<a name="l00202"></a>00202                                      1);
<a name="l00203"></a>00203   <span class="keywordflow">return</span> 1;
<a name="l00204"></a>00204 }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 <span class="comment">//</span>
<a name="l00208"></a>00208 <span class="comment">//</span><span class="comment"></span>
<a name="l00209"></a>00209 <span class="comment">//! Constructeur par defaut: initialisation des membres avec des valeurs&lt;br&gt;par defaut.</span>
<a name="l00210"></a><a class="code" href="classPostraitement__lata.html#ab025a09d9cbafe9a131afdfa4f89bc2c">00210</a> <span class="comment"></span><a class="code" href="classPostraitement__lata.html#ab025a09d9cbafe9a131afdfa4f89bc2c" title="Constructeur par defaut: initialisation des membres avec des valeurs par defaut.">Postraitement_lata::Postraitement_lata</a>()
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212 <span class="comment">// Les donnees privees de la classe:</span>
<a name="l00213"></a>00213   private_data_ = <span class="keyword">new</span> <a class="code" href="classPostraitement__lata__private__data.html">Postraitement_lata_private_data</a>;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 <span class="comment">// Quelques valeurs par defaut</span>
<a name="l00216"></a>00216   lata_basename_ = <a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>();
<a name="l00217"></a>00217   format_ = BINAIRE;
<a name="l00218"></a>00218   fichiers_multiples_ = 0;
<a name="l00219"></a>00219   entete_ok_ = 0;
<a name="l00220"></a>00220   skip_header_ = 0;
<a name="l00221"></a>00221   dt_post_ = 0.;
<a name="l00222"></a>00222   temps_dernier_post_ = -1E40;
<a name="l00223"></a>00223   verbose_stream_ = 0;
<a name="l00224"></a>00224 }
<a name="l00225"></a>00225 <span class="comment"></span>
<a name="l00226"></a>00226 <span class="comment">//! Destroy me ... muahahahaha</span>
<a name="l00227"></a><a class="code" href="classPostraitement__lata.html#a8ff548251b1b94170876cc499171ccdc">00227</a> <span class="comment"></span><a class="code" href="classPostraitement__lata.html#a8ff548251b1b94170876cc499171ccdc" title="Destroy me ... muahahahaha.">Postraitement_lata::~Postraitement_lata</a>()
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229   <span class="keyword">delete</span> private_data_;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 <span class="comment"></span>
<a name="l00232"></a>00232 <span class="comment">//! Appel a Postraitement_base::readOn</span>
<a name="l00233"></a><a class="code" href="classPostraitement__lata.html#ac82ee0401d296bee8b6e39d08e857388">00233</a> <span class="comment"></span><a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classPostraitement__lata.html#ac82ee0401d296bee8b6e39d08e857388" title="Appel a Postraitement_base::readOn.">Postraitement_lata::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00234"></a>00234 {
<a name="l00235"></a>00235   <a class="code" href="classPostraitement__base.html#adc9320993bba9b94ed8e02156565b2a4" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Postraitement_base::readOn</a>(is);
<a name="l00236"></a>00236   <span class="keywordflow">return</span> is;
<a name="l00237"></a>00237 }
<a name="l00238"></a>00238 
<a name="l00239"></a><a class="code" href="classPostraitement__lata.html#a8cef2b99232ca2ce133cb4cc2b1fe33c">00239</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classPostraitement__lata.html#a8cef2b99232ca2ce133cb4cc2b1fe33c" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Postraitement_lata::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00240"></a>00240 <span class="keyword"></span>{
<a name="l00241"></a>00241   <span class="keywordflow">return</span> os;
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="classPostraitement__lata.html#a245c6dff9609470004825ba0bfbc27a8">00244</a> <span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#a245c6dff9609470004825ba0bfbc27a8">Postraitement_lata::set_param</a>(<a class="code" href="classParam.html" title="Defined below in this file.">Param</a>&amp; param)
<a name="l00245"></a>00245 {
<a name="l00246"></a>00246 <span class="comment">// Nom msg;</span>
<a name="l00247"></a>00247 <span class="comment">// msg = &quot;Post-processing period for &quot;;</span>
<a name="l00248"></a>00248 <span class="comment">// msg += que_suis_je();</span>
<a name="l00249"></a>00249 <span class="comment">// msg += &quot; must be greater or equal to 0.&quot;;</span>
<a name="l00250"></a>00250 <span class="comment">// param.ajouter_condition(&quot;value_of_dt_post_ge_0&quot;,msg);</span>
<a name="l00251"></a>00251   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;nom_fichier&quot;</span>,&amp;lata_basename_);
<a name="l00252"></a>00252   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;fichiers_multiples&quot;</span>,&amp;fichiers_multiples_);
<a name="l00253"></a>00253   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;skip_header&quot;</span>,&amp;skip_header_);
<a name="l00254"></a>00254   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;format&quot;</span>,(<span class="keyword">this</span>));
<a name="l00255"></a>00255   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;champs|fields&quot;</span>,(<span class="keyword">this</span>));
<a name="l00256"></a>00256   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;print&quot;</span>,(<span class="keyword">this</span>));
<a name="l00257"></a>00257   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;dt_post&quot;</span>,(<span class="keyword">this</span>));
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00260"></a><a class="code" href="classPostraitement__lata.html#a6e9fce999fc836e5b459167796e2769f">00260</a> <span class="keywordtype">int</span> <a class="code" href="classPostraitement__lata.html#a6e9fce999fc836e5b459167796e2769f" title="Lecture des parametres de type non simple d&#39;un objet_U a partir d&#39;un flot d&#39;entree.">Postraitement_lata::lire_motcle_non_standard</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; mot, <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262   <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;format&quot;</span>)
<a name="l00263"></a>00263     {
<a name="l00264"></a>00264       lire_format(is);
<a name="l00265"></a>00265       <span class="keywordflow">return</span> 1;
<a name="l00266"></a>00266     }
<a name="l00267"></a>00267   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;champs|fields&quot;</span>)
<a name="l00268"></a>00268     {
<a name="l00269"></a>00269       lire_champs(is);
<a name="l00270"></a>00270       <span class="keywordflow">return</span> 1;
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;print&quot;</span>)
<a name="l00273"></a>00273     {
<a name="l00274"></a>00274       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>()) verbose_stream_ = &amp;<a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>;
<a name="l00275"></a>00275       <span class="keywordflow">return</span> 1;
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;dt_post&quot;</span>)
<a name="l00278"></a>00278     {
<a name="l00279"></a>00279       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> expression;
<a name="l00280"></a>00280       is &gt;&gt; expression;
<a name="l00281"></a>00281       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; expression;
<a name="l00282"></a>00282       fdt_post.setNbVar(1);
<a name="l00283"></a>00283       fdt_post.setString(expression);
<a name="l00284"></a>00284       fdt_post.addVar(<span class="stringliteral">&quot;t&quot;</span>);
<a name="l00285"></a>00285       fdt_post.parseString();
<a name="l00286"></a>00286       dt_post_ = fdt_post.eval();
<a name="l00287"></a>00287       <span class="keywordflow">return</span> 1;
<a name="l00288"></a>00288     }
<a name="l00289"></a>00289   <span class="keywordflow">else</span>
<a name="l00290"></a>00290     <span class="keywordflow">return</span> <a class="code" href="classPostraitement__base.html#a92a2146b77d8059d1903d2504d4c798b" title="Lecture des parametres de type non simple d&#39;un objet_U a partir d&#39;un flot d&#39;entree.">Postraitement_base::lire_motcle_non_standard</a>(mot,is);
<a name="l00291"></a>00291   <span class="keywordflow">return</span> 1;
<a name="l00292"></a>00292 }
<a name="l00293"></a>00293 <span class="comment"></span>
<a name="l00294"></a>00294 <span class="comment">//! lecture du format d&#39;enregistrement (ascii ou binaire)</span>
<a name="l00295"></a><a class="code" href="classPostraitement__lata.html#ae83bd127160e3bb775daf28dde03ed90">00295</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#ae83bd127160e3bb775daf28dde03ed90" title="lecture du format d&#39;enregistrement (ascii ou binaire)">Postraitement_lata::lire_format</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00296"></a>00296 {
<a name="l00297"></a>00297   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motcle;
<a name="l00298"></a>00298   is &gt;&gt; motcle;
<a name="l00299"></a>00299   <span class="keywordflow">if</span> (motcle == <span class="stringliteral">&quot;ascii&quot;</span>)
<a name="l00300"></a>00300     format_ = ASCII;
<a name="l00301"></a>00301   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motcle == <span class="stringliteral">&quot;binaire&quot;</span>)
<a name="l00302"></a>00302     format_ = BINAIRE;
<a name="l00303"></a>00303   <span class="keywordflow">else</span>
<a name="l00304"></a>00304     {
<a name="l00305"></a>00305       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Postraitement_lata::lire_format&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00306"></a>00306       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; We expected \&quot;ascii\&quot; or \&quot;binaire\&quot; after format.&quot;</span> &lt;&lt; finl;
<a name="l00307"></a>00307       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; We found &quot;</span> &lt;&lt; motcle &lt;&lt; finl;
<a name="l00308"></a>00308       exit();
<a name="l00309"></a>00309     }
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="comment">//</span>
<a name="l00313"></a>00313 <span class="comment">//</span>
<a name="l00314"></a>00314 <span class="comment">//</span>
<a name="l00315"></a>00315 <span class="comment">//</span>
<a name="l00316"></a>00316 <span class="comment">//</span>
<a name="l00317"></a>00317 <span class="comment">//</span>
<a name="l00318"></a>00318 <span class="comment">//</span>
<a name="l00319"></a>00319 <span class="comment">//</span>
<a name="l00320"></a>00320 <span class="comment">//</span>
<a name="l00321"></a>00321 <span class="comment">//</span>
<a name="l00322"></a>00322 <span class="comment">//</span>
<a name="l00323"></a>00323 <span class="comment">//</span><span class="comment"></span>
<a name="l00324"></a>00324 <span class="comment">//! lecture d&#39;une liste de champs a postraiter&lt;br&gt;On attend ceci :&lt;br&gt;champs sommets|elements|faces  (le mot cle champs a deja ete lu)&lt;br&gt;{&lt;br&gt;nom_du_champ&lt;br&gt;[ nom_du_champ ]&lt;br&gt;[ ... ]&lt;br&gt;}&lt;br&gt;Les champs lus sont ajoutes a la liste correspondante (sommets, elements, ...),&lt;br&gt;les doublons sont retires.&lt;br&gt;Le nom du champ doit etre compris par le probleme (pb.comprend_champ(...))&lt;br&gt;Attention: les champs postraites aux faces doivent etre discretises aux faces&lt;br&gt;(pas d&#39;interpolation, on postraite le champ tel quel).</span>
<a name="l00325"></a><a class="code" href="classPostraitement__lata.html#a09c9cf58e3e38d34333e85bab57fe89f">00325</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#a09c9cf58e3e38d34333e85bab57fe89f" title="lecture d&#39;une liste de champs a postraiter On attend ceci : champs sommets|elements|faces (le mot cle...">Postraitement_lata::lire_champs</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00326"></a>00326 {
<a name="l00327"></a>00327   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motcle;
<a name="l00328"></a>00328   is &gt;&gt; motcle;
<a name="l00329"></a>00329   <a class="code" href="classPostraitement__base.html#a6a43e4c7caaafa57902a067e706d56e9">Localisation</a> loc = SOMMETS;
<a name="l00330"></a>00330   <span class="keywordflow">if</span> (motcle == <span class="stringliteral">&quot;sommets&quot;</span>)
<a name="l00331"></a>00331     loc = SOMMETS;
<a name="l00332"></a>00332   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motcle == <span class="stringliteral">&quot;elements&quot;</span>)
<a name="l00333"></a>00333     loc = ELEMENTS;
<a name="l00334"></a>00334   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motcle == <span class="stringliteral">&quot;faces&quot;</span>)
<a name="l00335"></a>00335     loc = FACES;
<a name="l00336"></a>00336   <span class="keywordflow">else</span>
<a name="l00337"></a>00337     {
<a name="l00338"></a>00338       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Postraitement_lata::lire_champs :&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00339"></a>00339       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; We read : &quot;</span> &lt;&lt; motcle &lt;&lt; finl;
<a name="l00340"></a>00340       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; We expected \&quot;sommets\&quot;, \&quot;elements\&quot; or \&quot;faces\&quot; after \&quot;champs\&quot;&quot;</span> &lt;&lt; finl;
<a name="l00341"></a>00341       exit();
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a>&amp; <a class="code" href="classliste.html" title="Les classes liste et liste_curseur representent une liste de Deriv&lt;Objet_U&gt; et un curseur associe...">liste</a> =
<a name="l00344"></a>00344     (loc == SOMMETS) ? liste_champs_aux_sommets
<a name="l00345"></a>00345     : (loc == ELEMENTS) ? liste_champs_aux_elements
<a name="l00346"></a>00346     : liste_champs_aux_faces;
<a name="l00347"></a>00347 
<a name="l00348"></a>00348   is &gt;&gt; motcle;
<a name="l00349"></a>00349   <span class="keywordflow">if</span> (motcle != <span class="stringliteral">&quot;{&quot;</span>)
<a name="l00350"></a>00350     {
<a name="l00351"></a>00351       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Postraitement_lata::lire_champs :&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00352"></a>00352       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; We read : &quot;</span> &lt;&lt; motcle &lt;&lt; finl;
<a name="l00353"></a>00353       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; We expected { after sommets/elements/faces.&quot;</span> &lt;&lt; finl;
<a name="l00354"></a>00354       exit();
<a name="l00355"></a>00355     }
<a name="l00356"></a>00356   <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb = mon_probleme.valeur();
<a name="l00357"></a>00357   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) refch_base;
<a name="l00358"></a>00358 
<a name="l00359"></a>00359   <span class="keywordflow">while</span> (1)
<a name="l00360"></a>00360     {
<a name="l00361"></a>00361       is &gt;&gt; motcle;
<a name="l00362"></a>00362       <span class="keywordflow">if</span> (motcle == <span class="stringliteral">&quot;}&quot;</span>)
<a name="l00363"></a>00363         <span class="keywordflow">break</span>;
<a name="l00364"></a>00364       <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> liste_noms;
<a name="l00365"></a>00365       pb.<a class="code" href="classProbleme__base.html#a783505be0b9792319ee2f07242cfcd33">get_noms_champs_postraitables</a>(liste_noms);
<a name="l00366"></a>00366       pb.<a class="code" href="classProbleme__base.html#a0d8d417e3c4e1cabfaea63ca4aeb59c0">creer_champ</a>(motcle);
<a name="l00367"></a>00367       <span class="keywordtype">int</span> ok=0;
<a name="l00368"></a>00368       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;liste_noms.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); i++)
<a name="l00369"></a>00369         <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(liste_noms[i])==motcle) ok=1;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371       <span class="keywordflow">if</span> (!ok)
<a name="l00372"></a>00372         {
<a name="l00373"></a>00373           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Postraitement_lata::lire_champs :\n&quot;</span>;
<a name="l00374"></a>00374           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; The field &quot;</span> &lt;&lt; motcle;
<a name="l00375"></a>00375           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; is not understood by the problem &quot;</span> &lt;&lt; pb.<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00376"></a>00376           exit();
<a name="l00377"></a>00377         }
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="comment">// Si un champ aux faces est demande, il faut que le champ d&#39;origine</span>
<a name="l00380"></a>00380 <span class="comment">// soit aux faces (on ne sait pas interpoler le champ)</span>
<a name="l00381"></a>00381       <span class="keywordflow">if</span> (loc == FACES)
<a name="l00382"></a>00382         {
<a name="l00383"></a>00383           refch_base = pb.<a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">get_champ</a>(motcle);
<a name="l00384"></a>00384 
<a name="l00385"></a>00385           <span class="keyword">const</span> <span class="keywordtype">int</span> nb_valeurs =
<a name="l00386"></a>00386             refch_base.valeur().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00387"></a>00387           <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces =
<a name="l00388"></a>00388             pb.<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>().<a class="code" href="classDomaine__dis.html#a00b2c1bece9e5831d170c39800bd79d0" title="Renvoie une reference sur la i-eme zone discretisee du domaine. (version const)">zone_dis</a>(0).<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>().<a class="code" href="classZone__dis__base.html#a4e64403fbe9a9c504f1eca9aa2bcd58d">face_sommets</a>().<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00389"></a>00389           <span class="keywordflow">if</span> (nb_valeurs != nb_faces)
<a name="l00390"></a>00390             {
<a name="l00391"></a>00391               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Postraitement_lata::lire_champs :\n&quot;</span>;
<a name="l00392"></a>00392               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; The field &quot;</span> &lt;&lt; motcle;
<a name="l00393"></a>00393               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; can not be postprocessed to the faces.\n&quot;</span>;
<a name="l00394"></a>00394               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; (Fields allowed: only fields discretized to the faces)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00395"></a>00395               exit();
<a name="l00396"></a>00396             }
<a name="l00397"></a>00397         }
<a name="l00398"></a>00398       <span class="keywordflow">if</span> (!liste.<a class="code" href="classMotcles.html#ac190a5c47c142b0020ece15413a14843">contient_</a>(motcle))
<a name="l00399"></a>00399         liste.<a class="code" href="classVect__Motcle.html#a68a2feae15986909fa00c7ceb2c20a25">add</a>(motcle);
<a name="l00400"></a>00400     }
<a name="l00401"></a>00401 }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 <span class="comment">//</span>
<a name="l00404"></a>00404 <span class="comment">//</span>
<a name="l00405"></a>00405 <span class="comment">//</span>
<a name="l00406"></a>00406 <span class="comment">//</span>
<a name="l00407"></a>00407 <span class="comment">//</span><span class="comment"></span>
<a name="l00408"></a>00408 <span class="comment">//! Evident...&lt;br&gt;Parametre: loc&lt;br&gt;valeurs autorisees: SOMMETS, ou ELEMENTS ou FACES&lt;br&gt;Parametre: liste&lt;br&gt;une liste de champs compris par le probleme.</span>
<a name="l00409"></a><a class="code" href="classPostraitement__lata.html#afe914c0eb4c1a3d5e71ff45b05d66dd2">00409</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#afe914c0eb4c1a3d5e71ff45b05d66dd2" title="Evident... Parametre: loc valeurs autorisees: SOMMETS, ou ELEMENTS ou FACES Parametre: liste une list...">Postraitement_lata::postraiter_liste_champs</a>(<a class="code" href="classPostraitement__base.html#a6a43e4c7caaafa57902a067e706d56e9">Localisation</a> loc, <span class="keyword">const</span> <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a>&amp; <a class="code" href="classliste.html" title="Les classes liste et liste_curseur representent une liste de Deriv&lt;Objet_U&gt; et un curseur associe...">liste</a>)
<a name="l00410"></a>00410 {
<a name="l00411"></a>00411   <span class="keywordflow">if</span> (verbose_stream_)
<a name="l00412"></a>00412     {
<a name="l00413"></a>00413       *verbose_stream_ &lt;&lt; <span class="stringliteral">&quot;Postraitement_lata::postraiter_liste_champs &quot;</span>;
<a name="l00414"></a>00414       <span class="keywordflow">switch</span>(loc)
<a name="l00415"></a>00415         {
<a name="l00416"></a>00416         <span class="keywordflow">case</span> SOMMETS:
<a name="l00417"></a>00417           *verbose_stream_ &lt;&lt; <span class="stringliteral">&quot;sommets&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00418"></a>00418           <span class="keywordflow">break</span>;
<a name="l00419"></a>00419         <span class="keywordflow">case</span> ELEMENTS:
<a name="l00420"></a>00420           *verbose_stream_ &lt;&lt; <span class="stringliteral">&quot;elements&quot;</span> &lt;&lt; finl;
<a name="l00421"></a>00421           <span class="keywordflow">break</span>;
<a name="l00422"></a>00422         <span class="keywordflow">case</span> FACES:
<a name="l00423"></a>00423           *verbose_stream_ &lt;&lt; <span class="stringliteral">&quot;faces&quot;</span> &lt;&lt; finl;
<a name="l00424"></a>00424           <span class="keywordflow">break</span>;
<a name="l00425"></a>00425         <span class="keywordflow">default</span>:
<a name="l00426"></a>00426           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Localization &quot;</span> &lt;&lt; (int)loc &lt;&lt; <span class="stringliteral">&quot; not recognized in Postraitement_lata::postraiter_liste_champs&quot;</span> &lt;&lt; finl;
<a name="l00427"></a>00427           exit();
<a name="l00428"></a>00428         }
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431   <span class="keyword">const</span> <a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a> * comm_group = 0;
<a name="l00432"></a>00432   <span class="keywordflow">if</span> (fichiers_multiples_ == 0)
<a name="l00433"></a>00433     comm_group = &amp; <a class="code" href="classPE__Groups.html#af38ed6631e572dc5117361b3f26a47a3" title="Renvoie une reference au groupe de tous les processeurs TRUST.">PE_Groups::groupe_TRUST</a>();
<a name="l00434"></a>00434 
<a name="l00435"></a>00435   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_champs = liste.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>();
<a name="l00436"></a>00436   <span class="keywordflow">if</span> (nb_champs == 0)
<a name="l00437"></a>00437     <span class="keywordflow">return</span>;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 <span class="comment">// Postraitement des champs :</span>
<a name="l00440"></a>00440   <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb          = mon_probleme.valeur();
<a name="l00441"></a>00441   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp;           la_zone     = pb.<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00442"></a>00442   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp;  zone_dis    = pb.<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>().<a class="code" href="classDomaine__dis.html#a00b2c1bece9e5831d170c39800bd79d0" title="Renvoie une reference sur la i-eme zone discretisee du domaine. (version const)">zone_dis</a>(0).<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>();
<a name="l00443"></a>00443   <span class="keyword">const</span> <span class="keywordtype">int</span>          nb_elem     = la_zone.<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00444"></a>00444   <span class="keyword">const</span> <span class="keywordtype">int</span>          nb_sommets  = la_zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>();
<a name="l00445"></a>00445   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;            <a class="code" href="classPostraitement__lata__private__data.html#ac845278f0fcc4bc7b2efe66987075777">valeurs</a>             = private_data_-&gt;valeurs;
<a name="l00446"></a>00446   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;            <a class="code" href="classPostraitement__lata__private__data.html#ab6ee060622b1fd590dbdc7c04520f9ba">centres_de_gravites</a> = private_data_-&gt;centres_de_gravites;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448   <a class="code" href="classIntVect.html">IntVect</a>&amp;              <a class="code" href="classPostraitement__lata__private__data.html#ab8058c835484fbf8cc457a51329c5276">les_polys</a>           = private_data_-&gt;les_polys;
<a name="l00449"></a>00449   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) &amp;     <a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a>            = private_data_-&gt;le_champ;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451   <span class="keywordflow">if</span> (loc == ELEMENTS)
<a name="l00452"></a>00452     {
<a name="l00453"></a>00453 <span class="comment">//</span>
<a name="l00454"></a>00454 <span class="comment">// Ouille... faut calculer ca ???</span>
<a name="l00455"></a>00455 <span class="comment">//</span>
<a name="l00456"></a>00456       <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis);
<a name="l00457"></a>00457       centres_de_gravites = zvf.<a class="code" href="classZone__VF.html#a87a29f0223c71256a25ee343c9277599">xp</a>();
<a name="l00458"></a>00458 
<a name="l00459"></a>00459       les_polys.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_elem);
<a name="l00460"></a>00460       <span class="keywordtype">int</span> i;
<a name="l00461"></a>00461       <span class="keywordflow">for</span> (i = 0; i &lt; nb_elem; i++)
<a name="l00462"></a>00462         <a class="code" href="classPostraitement__lata__private__data.html#ab8058c835484fbf8cc457a51329c5276">les_polys</a>(i) = i;
<a name="l00463"></a>00463     }
<a name="l00464"></a>00464 
<a name="l00465"></a>00465   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_champs; i++)
<a name="l00466"></a>00466     {
<a name="l00467"></a>00467       <span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> nom_du_champ = liste[i];
<a name="l00468"></a>00468       <span class="keywordflow">if</span> (verbose_stream_)
<a name="l00469"></a>00469         *verbose_stream_ &lt;&lt; <span class="stringliteral">&quot;Postraitement du champ &quot;</span> &lt;&lt; nom_du_champ &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 
<a name="l00472"></a>00472       <a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a> = pb.<a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">get_champ</a>(nom_du_champ);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474       {
<a name="l00475"></a>00475         <span class="keywordflow">if</span> (loc == FACES)
<a name="l00476"></a>00476           valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(0);
<a name="l00477"></a>00477         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (loc == SOMMETS )
<a name="l00478"></a>00478           {
<a name="l00479"></a>00479             <span class="keywordtype">int</span> dimension0 = (loc==SOMMETS) ? nb_sommets : nb_elem;
<a name="l00480"></a>00480             <span class="keyword">const</span> <span class="keywordtype">int</span> dimension1 = <a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a>.<a class="code" href="classRef__Champ__base.html#a0cda53fe61d4f24bc8861720d525b32a">valeur</a>().<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00481"></a>00481             valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dimension0, dimension1);
<a name="l00482"></a>00482           }
<a name="l00483"></a>00483         <span class="keywordflow">else</span>
<a name="l00484"></a>00484           {
<a name="l00485"></a>00485             <span class="keywordtype">int</span> dimension0 = (loc==SOMMETS) ? nb_sommets : nb_elem;
<a name="l00486"></a>00486             <span class="keywordflow">if</span> (<a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a>.<a class="code" href="classRef__Champ__base.html#a0cda53fe61d4f24bc8861720d525b32a">valeur</a>().<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>() == 1)
<a name="l00487"></a>00487               valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dimension0);
<a name="l00488"></a>00488             <span class="keywordflow">else</span>
<a name="l00489"></a>00489               {
<a name="l00490"></a>00490                 <span class="keyword">const</span> <span class="keywordtype">int</span> dimension1 = <a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a>.<a class="code" href="classRef__Champ__base.html#a0cda53fe61d4f24bc8861720d525b32a">valeur</a>().<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00491"></a>00491                 valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dimension0, dimension1);
<a name="l00492"></a>00492               }
<a name="l00493"></a>00493           }
<a name="l00494"></a>00494       }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> * valeurs_a_ecrire = 0;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498       <span class="keywordflow">switch</span> (loc)
<a name="l00499"></a>00499         {
<a name="l00500"></a>00500         <span class="keywordflow">case</span> SOMMETS:
<a name="l00501"></a>00501 <span class="comment">// Interpolation du champ aux sommets</span>
<a name="l00502"></a>00502           <a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a>.<a class="code" href="classRef__Champ__base.html#a0cda53fe61d4f24bc8861720d525b32a">valeur</a>().<a class="code" href="classChamp__base.html#a5987426ce22e4dca7f506b8872ae6eac" title="renvoie les valeurs aux sommets du Domaine dom">valeur_aux_sommets</a>(pb.<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>(), <a class="code" href="classPostraitement__lata__private__data.html#ac845278f0fcc4bc7b2efe66987075777">valeurs</a>);
<a name="l00503"></a>00503           valeurs_a_ecrire = &amp;<a class="code" href="classPostraitement__lata__private__data.html#ac845278f0fcc4bc7b2efe66987075777">valeurs</a>;
<a name="l00504"></a>00504           <span class="keywordflow">break</span>;
<a name="l00505"></a>00505         <span class="keywordflow">case</span> ELEMENTS:
<a name="l00506"></a>00506 <span class="comment">// Interpolation du champ aux elements</span>
<a name="l00507"></a>00507           <a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a>.<a class="code" href="classRef__Champ__base.html#a0cda53fe61d4f24bc8861720d525b32a">valeur</a>().<a class="code" href="classChamp__base.html#a43eede56d800b44980b8534a1845c9a5" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux_elems</a>(centres_de_gravites, les_polys, valeurs);
<a name="l00508"></a>00508           valeurs_a_ecrire = &amp;<a class="code" href="classPostraitement__lata__private__data.html#ac845278f0fcc4bc7b2efe66987075777">valeurs</a>;
<a name="l00509"></a>00509           <span class="keywordflow">break</span>;
<a name="l00510"></a>00510         <span class="keywordflow">case</span> FACES:
<a name="l00511"></a>00511 <span class="comment">// Pour un champ aux faces, aucune interpolation, on ecrit le tableau tel quel.</span>
<a name="l00512"></a>00512           valeurs_a_ecrire = &amp;<a class="code" href="classPostraitement__lata__private__data.html#aee5744942ffafb6dc89f00e7ee87fc45">le_champ</a>.<a class="code" href="classRef__Champ__base.html#a0cda53fe61d4f24bc8861720d525b32a">valeur</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00513"></a>00513           <span class="keywordflow">break</span>;
<a name="l00514"></a>00514         <span class="keywordflow">default</span>:
<a name="l00515"></a>00515           exit();
<a name="l00516"></a>00516         }
<a name="l00517"></a>00517 
<a name="l00518"></a>00518       ecrire_champ(lata_basename_,
<a name="l00519"></a>00519                    nom_du_champ, <span class="comment">//!&lt; nom du champ</span>
<a name="l00520"></a>00520 <span class="comment"></span>                   CHAMP,  <span class="comment">//!&lt; type</span>
<a name="l00521"></a>00521 <span class="comment"></span>                   <span class="charliteral">&#39;I&#39;</span>,    <span class="comment">//!&lt; champ instationnaire</span>
<a name="l00522"></a>00522 <span class="comment"></span>                   pb.<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>(),
<a name="l00523"></a>00523                    pb.<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>(),
<a name="l00524"></a>00524                    temps_,
<a name="l00525"></a>00525                    loc,
<a name="l00526"></a>00526                    *valeurs_a_ecrire,
<a name="l00527"></a>00527                    format_,
<a name="l00528"></a>00528                    comm_group);
<a name="l00529"></a>00529     }
<a name="l00530"></a>00530 <span class="comment">// On libere la memoire des tableaux temporaires</span>
<a name="l00531"></a>00531 <span class="comment">// (mais on garde les objets)</span>
<a name="l00532"></a>00532 <span class="comment">// valeurs.resize(0);</span>
<a name="l00533"></a>00533   valeurs.<a class="code" href="classDoubleTab.html#acb465ae8c9b24990db18002693b42dea" title="met le tableau dans l&#39;etat obtenu par le constructeur par defaut voir DoubleVect::reset()">reset</a>();
<a name="l00534"></a>00534   centres_de_gravites.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(0);
<a name="l00535"></a>00535   les_polys.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(0);
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 <span class="comment">//</span>
<a name="l00539"></a>00539 <span class="comment">//</span>
<a name="l00540"></a>00540 <span class="comment">//</span><span class="comment"></span>
<a name="l00541"></a>00541 <span class="comment">//! Ecrit l&#39;entete si ca n&#39;a pas ete fait, puis, si le temps est ecoule,&lt;br&gt;post-traite les champs demandes. Le temps actuel est le temps&lt;br&gt;attribue lors du dernier appel a mettre_a_jour du postraitement.</span>
<a name="l00542"></a><a class="code" href="classPostraitement__lata.html#a839eb7d1c13c2e8fd012641d727a9047">00542</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classPostraitement__lata.html#a839eb7d1c13c2e8fd012641d727a9047" title="Ecrit l&#39;entete si ca n&#39;a pas ete fait, puis, si le temps est ecoule, post-traite les champs demandes...">Postraitement_lata::postraiter</a>(<span class="keywordtype">int</span> forcer)
<a name="l00543"></a>00543 {
<a name="l00544"></a>00544   <span class="comment">/*</span>
<a name="l00545"></a>00545 <span class="comment">            if (verbose_stream_) {</span>
<a name="l00546"></a>00546 <span class="comment">            *verbose_stream_ &lt;&lt; &quot;Postraitement_lata::postraiter nom:&quot; &lt;&lt; le_nom();</span>
<a name="l00547"></a>00547 <span class="comment">            *verbose_stream_ &lt;&lt; &quot; fichier:&quot; &lt;&lt; lata_basename_ &lt;&lt; finl;</span>
<a name="l00548"></a>00548 <span class="comment">            } */</span>
<a name="l00549"></a>00549   <span class="keyword">const</span> <a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a> * comm_group = 0;
<a name="l00550"></a>00550   <span class="keywordflow">if</span> (fichiers_multiples_ == 0)
<a name="l00551"></a>00551     comm_group = &amp; <a class="code" href="classPE__Groups.html#af38ed6631e572dc5117361b3f26a47a3" title="Renvoie une reference au groupe de tous les processeurs TRUST.">PE_Groups::groupe_TRUST</a>();
<a name="l00552"></a>00552 
<a name="l00553"></a>00553   <span class="keywordflow">if</span> (! skip_header_)
<a name="l00554"></a>00554     {
<a name="l00555"></a>00555       <span class="keywordflow">if</span> (! entete_ok_)
<a name="l00556"></a>00556         {
<a name="l00557"></a>00557 <span class="comment">// Ecriture de l&#39;entete du fichier</span>
<a name="l00558"></a>00558           <span class="keywordflow">if</span> (verbose_stream_)
<a name="l00559"></a>00559             *verbose_stream_ &lt;&lt; <span class="stringliteral">&quot; Ecriture de l&#39;entete.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00560"></a>00560           ecrire_entete(lata_basename_,
<a name="l00561"></a>00561                         mon_probleme.valeur().discretisation().que_suis_je(),
<a name="l00562"></a>00562                         format_,
<a name="l00563"></a>00563                         comm_group);
<a name="l00564"></a>00564           <span class="keywordflow">if</span> (verbose_stream_)
<a name="l00565"></a>00565             *verbose_stream_ &lt;&lt; <span class="stringliteral">&quot; Ecriture de la zone.&quot;</span> &lt;&lt; finl;
<a name="l00566"></a>00566 
<a name="l00567"></a>00567 <span class="comment">// S&#39;il y a des champs aux faces a postraiter, ecrire les faces</span>
<a name="l00568"></a>00568           <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a> * zone_dis_baseptr = 0;
<a name="l00569"></a>00569           <span class="keywordflow">if</span> (liste_champs_aux_faces.size() &gt; 0)
<a name="l00570"></a>00570             zone_dis_baseptr = &amp; mon_probleme.valeur().<a class="code" href="classZone__dis__base.html#a65fdde8e309b6f1f0d8987fa4b9a5b93">domaine_dis</a>().<a class="code" href="classDomaine__dis.html#a00b2c1bece9e5831d170c39800bd79d0" title="Renvoie une reference sur la i-eme zone discretisee du domaine. (version const)">zone_dis</a>(0).<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>();
<a name="l00571"></a>00571           ecrire_zone(lata_basename_,
<a name="l00572"></a>00572                       mon_probleme.valeur().domaine().zone(0),
<a name="l00573"></a>00573                       format_,
<a name="l00574"></a>00574                       comm_group,
<a name="l00575"></a>00575                       zone_dis_baseptr);
<a name="l00576"></a>00576           entete_ok_ = 1;
<a name="l00577"></a>00577         }
<a name="l00578"></a>00578     }
<a name="l00579"></a>00579   <span class="keywordflow">if</span> (! forcer)
<a name="l00580"></a>00580     <span class="keywordflow">if</span> (! dt_post_ecoule(dt_post_, temps_dernier_post_))
<a name="l00581"></a>00581 <span class="comment">// L&#39;intervalle de temps entre postraitements n&#39;est pas ecoule</span>
<a name="l00582"></a>00582       <span class="keywordflow">return</span>;
<a name="l00583"></a>00583 
<a name="l00584"></a>00584   <span class="keywordflow">if</span> (! skip_header_)
<a name="l00585"></a>00585     {
<a name="l00586"></a>00586       <span class="keywordflow">if</span> (verbose_stream_)
<a name="l00587"></a>00587         *verbose_stream_ &lt;&lt; <span class="stringliteral">&quot; Ecriture du temps : &quot;</span> &lt;&lt; temps_ &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00588"></a>00588       ecrire_temps(lata_basename_,
<a name="l00589"></a>00589                    temps_,
<a name="l00590"></a>00590                    format_,
<a name="l00591"></a>00591                    comm_group);
<a name="l00592"></a>00592 
<a name="l00593"></a>00593     }
<a name="l00594"></a>00594   postraiter_liste_champs(SOMMETS, liste_champs_aux_sommets);
<a name="l00595"></a>00595   postraiter_liste_champs(ELEMENTS, liste_champs_aux_elements);
<a name="l00596"></a>00596   <span class="keywordflow">if</span> (liste_champs_aux_faces.size() &gt; 0)
<a name="l00597"></a>00597     postraiter_liste_champs(FACES, liste_champs_aux_faces);
<a name="l00598"></a>00598 
<a name="l00599"></a>00599   temps_dernier_post_ = temps_;
<a name="l00600"></a>00600 }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602 <span class="comment">//</span><span class="comment"></span>
<a name="l00603"></a>00603 <span class="comment">//! renvoie 1 si l&#39;intervalle de temps demande entre deux&lt;br&gt;postraitements est ecoule.</span>
<a name="l00604"></a><a class="code" href="classPostraitement__lata.html#a4e525edb5301b651fb6b4571bd5266e8">00604</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classPostraitement__lata.html#a4e525edb5301b651fb6b4571bd5266e8" title="renvoie 1 si l&#39;intervalle de temps demande entre deux postraitements est ecoule.">Postraitement_lata::dt_post_ecoule</a>(<span class="keywordtype">double</span>&amp; dt_post,
<a name="l00605"></a>00605                                        <span class="keywordtype">double</span> temps_dernier_post)
<a name="l00606"></a>00606 {
<a name="l00607"></a>00607   <span class="keywordflow">if</span> (dt_post&lt;=temps_ - temps_dernier_post_ || dt_post==0)
<a name="l00608"></a>00608     <span class="keywordflow">return</span> 1;
<a name="l00609"></a>00609   <span class="keywordflow">else</span>
<a name="l00610"></a>00610     {
<a name="l00611"></a>00611       fdt_post.setVar(<span class="stringliteral">&quot;t&quot;</span>,temps_);
<a name="l00612"></a>00612       dt_post = fdt_post.eval();
<a name="l00613"></a>00613 <span class="comment">// Voir Schema_Temps_base::limpr pour information sur epsilon et modf</span>
<a name="l00614"></a>00614       <span class="keywordtype">double</span> i, j, epsilon = 1.e-8;
<a name="l00615"></a>00615       modf(temps_/dt_post + epsilon, &amp;i);
<a name="l00616"></a>00616       modf(temps_dernier_post/dt_post + epsilon, &amp;j);
<a name="l00617"></a>00617       <span class="keywordflow">return</span> ( i&gt;j );
<a name="l00618"></a>00618     }
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:16 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
