<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: Op_PolyMAC_Elem Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Op_PolyMAC_Elem Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Op_PolyMAC_Elem" -->
<p><code>#include &lt;<a class="el" href="Op__PolyMAC__Elem_8h_source.html">Op_PolyMAC_Elem.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Op_PolyMAC_Elem:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classOp__PolyMAC__Elem.png" usemap="#Op_PolyMAC_Elem_map" alt=""/>
  <map id="Op_PolyMAC_Elem_map" name="Op_PolyMAC_Elem_map">
<area href="classOp__Conv__Amont__PolyMAC__Elem.html" title="class Op_Conv_Amont_PolyMAC_Elem Cette classe represente l&#39;operateur de convection associe a une equa..." alt="Op_Conv_Amont_PolyMAC_Elem" shape="rect" coords="0,56,206,80"/>
<area href="classOp__Conv__Centre__PolyMAC__Elem.html" title="class Op_Conv_Centre_PolyMAC_Elem Cette classe represente l&#39;operateur de convection associe a une equ..." alt="Op_Conv_Centre_PolyMAC_Elem" shape="rect" coords="216,56,422,80"/>
</map>
 </div></div>

<p><a href="classOp__PolyMAC__Elem-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOp__PolyMAC__Elem.html#a98f45c9ae1a6b49a0ae5d1804d7ad982">dimensionner</a> (const <a class="el" href="classZone__PolyMAC.html">Zone_PolyMAC</a> &amp;, const <a class="el" href="classZone__Cl__PolyMAC.html">Zone_Cl_PolyMAC</a> &amp;, <a class="el" href="classMatrice__Morse.html">Matrice_Morse</a> &amp;) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOp__PolyMAC__Elem.html#a8804ee21edf6ea29c616757b19609628">dimensionner_bloc_vitesse</a> (const <a class="el" href="classZone__PolyMAC.html">Zone_PolyMAC</a> &amp;, const <a class="el" href="classZone__Cl__PolyMAC.html">Zone_Cl_PolyMAC</a> &amp;, <a class="el" href="classMatrice__Morse.html">Matrice_Morse</a> &amp;) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOp__PolyMAC__Elem.html#ad0294dd8aad7be38527fcf31898b88af">modifier_pour_Cl</a> (const <a class="el" href="classZone__PolyMAC.html">Zone_PolyMAC</a> &amp;, const <a class="el" href="classZone__Cl__PolyMAC.html">Zone_Cl_PolyMAC</a> &amp;, <a class="el" href="classMatrice__Morse.html">Matrice_Morse</a> &amp;, <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;) const </td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="Op__PolyMAC__Elem_8h_source.html#l00031">31</a> of file <a class="el" href="Op__PolyMAC__Elem_8h_source.html">Op_PolyMAC_Elem.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a98f45c9ae1a6b49a0ae5d1804d7ad982"></a><!-- doxytag: member="Op_PolyMAC_Elem::dimensionner" ref="a98f45c9ae1a6b49a0ae5d1804d7ad982" args="(const Zone_PolyMAC &amp;, const Zone_Cl_PolyMAC &amp;, Matrice_Morse &amp;) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Op_PolyMAC_Elem::dimensionner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classZone__PolyMAC.html">Zone_PolyMAC</a> &amp;&#160;</td>
          <td class="paramname"><em>la_zone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classZone__Cl__PolyMAC.html">Zone_Cl_PolyMAC</a> &amp;&#160;</td>
          <td class="paramname"><em>la_zone_cl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMatrice__Morse.html">Matrice_Morse</a> &amp;&#160;</td>
          <td class="paramname"><em>la_matrice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Op__PolyMAC__Elem_8cpp_source.html#l00033">33</a> of file <a class="el" href="Op__PolyMAC__Elem_8cpp_source.html">Op_PolyMAC_Elem.cpp</a>.</p>

<p>References <a class="el" href="Champ__P1iP1B__implementation_8cpp_source.html#l00331">coeff</a>, <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="Matrice__Morse_8cpp_source.html#l00346">Matrice_Morse::dimensionner()</a>, <a class="el" href="MorEqn_8h_source.html#l00082">MorEqn::equation()</a>, <a class="el" href="Periodique_8h_source.html#l00056">Periodique::face_associee()</a>, <a class="el" href="Zone__VF_8h_source.html#l00458">Zone_VF::face_voisins()</a>, <a class="el" href="Cond__lim_8h_source.html#l00130">Cond_lim::frontiere_dis()</a>, <a class="el" href="Matrice__Morse_8h_source.html#l00129">Matrice_Morse::get_set_coeff()</a>, <a class="el" href="Matrice__Morse_8h_source.html#l00119">Matrice_Morse::get_set_tab1()</a>, <a class="el" href="Matrice__Morse_8h_source.html#l00124">Matrice_Morse::get_set_tab2()</a>, <a class="el" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">Equation_base::inconnue()</a>, <a class="el" href="Zone__Cl__dis__base_8cpp_source.html#l00522">Zone_Cl_dis_base::les_conditions_limites()</a>, <a class="el" href="DoubleTab_8h_source.html#l00264">DoubleTab::nb_dim()</a>, <a class="el" href="Zone_8h_source.html#l00319">Zone::nb_elem_tot()</a>, <a class="el" href="Zone__VF_8h_source.html#l00519">Zone_VF::nb_faces()</a>, <a class="el" href="Zone__VF_8h_source.html#l00527">Zone_VF::nb_faces_tot()</a>, <a class="el" href="Zone__VF_8h_source.html#l00512">Zone_VF::premiere_face_int()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="vect__impl_8h_source.html#l00057">vect_impl::size()</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, <a class="el" href="Cond__lim_8h_source.html#l00031">Deriv_Cond_lim_base::valeur()</a>, <a class="el" href="Champ__Inc_8cpp_source.html#l00245">Champ_Inc::valeurs()</a>, and <a class="el" href="Zone__dis__base_8h_source.html#l00106">Zone_dis_base::zone()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// Dimensionnement de la matrice qui devra recevoir les coefficients provenant de</span>
<span class="comment">// la convection, de la diffusion pour le cas des elements.</span>
<span class="comment">// Cette matrice a une structure de matrice morse.</span>
<span class="comment">// Nous commencons par calculer les tailles des tableaux tab1 et tab2.</span>

  <span class="keywordtype">int</span> num_face,face,k;
  <span class="keywordtype">int</span> n1 = la_zone.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#aa3a33e8b723618b9092460007153e42d" title="Renvoie le nombre total d&#39;elements de la zone.">nb_elem_tot</a>(), n2 = la_zone.<a class="code" href="classZone__VF.html#a50fd21c9535680489015a3c8b88c685a" title="renvoie le nombre total de faces. C&#39;est-a-dire faces reelles + faces virtuelles">nb_faces_tot</a>();
  <span class="keywordtype">int</span> elem1,elem2, i;
  <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = la_zone.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<span class="comment">// const DoubleVect&amp; face_surfaces = la_zone.face_surfaces();</span>
<span class="comment">// const DoubleVect&amp; volumes_entrelaces = la_zone.volumes_entrelaces();</span>
<span class="comment">// const DoubleVect&amp; porosite_face = la_zone.porosite_face();</span>
  <span class="keyword">const</span> <a class="code" href="classConds__lim.html">Conds_lim</a>&amp; les_cl = la_zone_cl.<a class="code" href="classZone__Cl__dis__base.html#af75e0ed7786863e4d333bfb29d67c323" title="Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>();
  <span class="keywordtype">int</span> nb_comp = 1;

  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; champ_inconnue = la_zone_cl.<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>();
  <span class="keywordflow">if</span> (champ_inconnue.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>() == 2) nb_comp = champ_inconnue.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<span class="comment">// Cerr &lt;&lt; &quot;nb_compo de Op_PolyMAC_Elem::dimensionner&quot; &lt;&lt; nb_comp &lt;&lt; finl;</span>
<span class="comment">// Cerr &lt;&lt; &quot; nombre d&#39;elements de Op_PolyMAC_Elem::dimensionner&quot; &lt;&lt; n1 &lt;&lt; finl;</span>

  la_matrice.<a class="code" href="classMatrice__Morse.html#ae95f9ed88a8a3fc637cd2a705cead9c8" title="Size the matrix with n lines and n columns and nnz zero-values coefficients.">dimensionner</a>((n1 + n2) * nb_comp, (n1 + n2) * nb_comp, 0);

  <a class="code" href="classIntVect.html">IntVect</a>&amp; tab1=la_matrice.<a class="code" href="classMatrice__Morse.html#a7a49c763706dcfaed900f9d2cbb68716">get_set_tab1</a>();
  <a class="code" href="classIntVect.html">IntVect</a>&amp; tab2=la_matrice.<a class="code" href="classMatrice__Morse.html#af11c5853518e9e6db4c7e6e6acc8d7fd">get_set_tab2</a>();

  <span class="keywordtype">int</span> ndeb = la_zone.<a class="code" href="classZone__VF.html#a12869806fa4834aca8f2964e16509dfd" title="une face est interne ssi elle separe deux elements. renvoie le numero de la premiere face interne...">premiere_face_int</a>();
  <span class="keywordtype">int</span> nfin = la_zone.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
  <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="Champ__P1iP1B__implementation_8cpp.html#aa8c8f49390c3cf7c702d71a71bc977e3">coeff</a> = la_matrice.<a class="code" href="classMatrice__Morse.html#acd067e8514e5741f52b18a1d99746d11">get_set_coeff</a>();
  coeff=0;

  <a class="code" href="classIntVect.html">IntVect</a> rang_voisin(n1*nb_comp);
  rang_voisin=1;

  <span class="keywordflow">for</span> (num_face=ndeb; num_face&lt;nfin; num_face++)
    {
      elem1 = face_voisins(num_face,0);
      elem2 = face_voisins(num_face,1);
      (rang_voisin(elem2))++;
      (rang_voisin(elem1))++;
    }

<span class="comment">// Prise en compte des conditions de type periodicite</span>

  <span class="keywordflow">for</span> (i=0; i&lt;les_cl.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); i++)
    {
      <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = les_cl[i];

      <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
        {
          <span class="keyword">const</span> <a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>&amp; la_cl_perio = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>());
          <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_dis = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>());
          <span class="keywordtype">int</span> numdeb = la_front_dis.num_premiere_face();
          <span class="keywordtype">int</span> nfaces = la_front_dis.nb_faces();
          <span class="keywordtype">int</span> ind_face_global;
          <a class="code" href="classIntVect.html">IntVect</a> fait(nfaces);
          fait = 0;
          <span class="keywordflow">for</span> (face=0; face&lt;nfaces; face++)
            {
              <span class="keywordflow">if</span> (fait[face] == 0)
                {
                  fait[face] = 1;
                  fait[la_cl_perio.<a class="code" href="classPeriodique.html#a207b86556f199a63ea059b841851ca6a">face_associee</a>(face)] = 1;
                  ind_face_global = face+numdeb;

                  elem1 = face_voisins(ind_face_global,0);
                  elem2 = face_voisins(ind_face_global,1);

                  (rang_voisin(elem2))++;
                  (rang_voisin(elem1))++;
                }
            }
        }
    }

<span class="comment">// on balaye les elements pour dimensionner tab1 et tab2</span>

  tab1(0)=1;
  <span class="keywordflow">for</span>(i=0; i&lt;n1; i++)
    <span class="keywordflow">for</span> (k=0; k&lt; nb_comp; k++)
      tab1(i*nb_comp+1+k)=rang_voisin(i) +  tab1(i*nb_comp+k);
  <span class="keywordflow">for</span>(i = n1; i &lt; n1 + n2; i++)
    <span class="keywordflow">for</span> (k = 0; k &lt; nb_comp; k++)
      tab1(i*nb_comp+1+k)=tab1(i*nb_comp+k);

<span class="comment">// Cerr &lt;&lt; &quot; dimension de la matrice &quot; &lt;&lt; n1*nb_comp</span>
<span class="comment">// &lt;&lt; &quot;   &quot; &lt;&lt; tab1(n1*nb_comp)-1 &lt;&lt;finl;</span>
  la_matrice.<a class="code" href="classMatrice__Morse.html#ae95f9ed88a8a3fc637cd2a705cead9c8" title="Size the matrix with n lines and n columns and nnz zero-values coefficients.">dimensionner</a>((n1 + n2) * nb_comp,tab1(n1*nb_comp)-1);

  <span class="keywordflow">for</span>(i=0; i&lt;n1*nb_comp; i++)
    {
      tab2[tab1[i]-1]=i+1;
      rang_voisin[i]=tab1[i];
    }

<span class="comment">// on traite les faces internes pour les voisins</span>

  <span class="keywordflow">for</span> (num_face=ndeb; num_face&lt;nfin; num_face++)
    {
      elem1 = face_voisins(num_face,0);
      elem2 = face_voisins(num_face,1);

      <span class="keywordflow">for</span> (k=0; k&lt;nb_comp; k++)
        {
          tab2[rang_voisin[elem2*nb_comp+k]]=elem1*nb_comp+1+k;
          rang_voisin[elem2*nb_comp+k]++;

          tab2[rang_voisin[elem1*nb_comp+k]]=elem2*nb_comp+1+k;
          rang_voisin[elem1*nb_comp+k]++;
        }
    }
<span class="comment">// Cerr &lt;&lt; &quot;tab2 = &quot; &lt;&lt; tab2 &lt;&lt; finl;</span>
<span class="comment">// on traite la condition de periodicite</span>
  <span class="keywordflow">for</span> (i=0; i&lt;les_cl.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); i++)
    {
      <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = les_cl[i];
      <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()) )
        {
          <span class="keyword">const</span> <a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>&amp; la_cl_perio = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>());
          <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_dis = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>());
          <span class="keywordtype">int</span> numdeb = la_front_dis.num_premiere_face();
          <span class="keywordtype">int</span> nfaces = la_front_dis.nb_faces();
          <span class="keywordtype">int</span> ind_face_local;
          <a class="code" href="classIntVect.html">IntVect</a> fait(nfaces);
          fait = 0;
          <span class="keywordflow">for</span> (ind_face_local=0; ind_face_local&lt;nfaces; ind_face_local++)
            {
<span class="comment">// ind_face_local = num_face - ndeb;</span>
              <span class="keywordflow">if</span> (fait[ind_face_local] == 0)
                {
                  num_face = numdeb + ind_face_local;
                  fait[ind_face_local] = 1;
                  fait[la_cl_perio.<a class="code" href="classPeriodique.html#a207b86556f199a63ea059b841851ca6a">face_associee</a>(ind_face_local)] = 1;

                  elem1 = face_voisins(num_face,0);
                  elem2 = face_voisins(num_face,1);

                  <span class="keywordflow">for</span> (k=0; k&lt;nb_comp; k++)
                    {
                      tab2[rang_voisin[elem2*nb_comp+k]]=elem1*nb_comp+1+k;
                      rang_voisin[elem2*nb_comp+k]++;

                      tab2[rang_voisin[elem1*nb_comp+k]]=elem2*nb_comp+1+k;
                      rang_voisin[elem1*nb_comp+k]++;
                    }
                }
            }
        }
    }
<span class="comment">// Cerr &lt;&lt; &quot;tab2 = &quot; &lt;&lt; tab2 &lt;&lt; finl;</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8804ee21edf6ea29c616757b19609628"></a><!-- doxytag: member="Op_PolyMAC_Elem::dimensionner_bloc_vitesse" ref="a8804ee21edf6ea29c616757b19609628" args="(const Zone_PolyMAC &amp;, const Zone_Cl_PolyMAC &amp;, Matrice_Morse &amp;) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Op_PolyMAC_Elem::dimensionner_bloc_vitesse </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classZone__PolyMAC.html">Zone_PolyMAC</a> &amp;&#160;</td>
          <td class="paramname"><em>la_zone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classZone__Cl__PolyMAC.html">Zone_Cl_PolyMAC</a> &amp;&#160;</td>
          <td class="paramname"><em>la_zone_cl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMatrice__Morse.html">Matrice_Morse</a> &amp;&#160;</td>
          <td class="paramname"><em>matrice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Op__PolyMAC__Elem_8cpp_source.html#l00188">188</a> of file <a class="el" href="Op__PolyMAC__Elem_8cpp_source.html">Op_PolyMAC_Elem.cpp</a>.</p>

<p>References <a class="el" href="Matrix__tools_8cpp_source.html#l00112">Matrix_tools::allocate_morse_matrix()</a>, <a class="el" href="Zone__VF_8h_source.html#l00458">Zone_VF::face_voisins()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00144">Zone_dis_base::nb_elem_tot()</a>, <a class="el" href="Zone__VF_8h_source.html#l00519">Zone_VF::nb_faces()</a>, <a class="el" href="Zone__VF_8h_source.html#l00527">Zone_VF::nb_faces_tot()</a>, <a class="el" href="IntTab_8cpp_source.html#l00353">IntTab::resize()</a>, <a class="el" href="ArrOfInt_8cpp_source.html#l00443">ArrOfInt::set_smart_resize()</a>, and <a class="el" href="Array__tools_8cpp_source.html#l00389">tableau_trier_retirer_doublons()</a>.</p>
<div class="fragment"><pre class="fragment">{

  <span class="keywordtype">int</span> nb_faces=la_zone.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
  <span class="keywordtype">int</span> nb_faces_tot=la_zone.<a class="code" href="classZone__VF.html#a50fd21c9535680489015a3c8b88c685a" title="renvoie le nombre total de faces. C&#39;est-a-dire faces reelles + faces virtuelles">nb_faces_tot</a>();
  <span class="keywordtype">int</span> nb_elem_tot=la_zone.<a class="code" href="classZone__dis__base.html#a4d6aa445f152aa6dc54d66ea7a071147">nb_elem_tot</a>();
  <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> stencyl(0,2);
  stencyl.set_smart_resize(1);
  <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = la_zone.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();

  <span class="keywordtype">int</span> nb_coef=0;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face=0; face&lt;nb_faces; face++)
    {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dir=0; dir&lt;2; dir++)
        {
          <span class="keywordtype">int</span> elem=face_voisins(face,dir);
          <span class="keywordflow">if</span> (elem!=-1)
            {
              stencyl.resize(nb_coef+1,2);
              stencyl(nb_coef,0)=elem;
              stencyl(nb_coef,1)=face;
              nb_coef++;
            }
        }
    }
  <a class="code" href="Array__tools_8cpp.html#a07eed4c823b0632bdbf353fdab2a3c6b" title="Trie le tableau tab dans l&#39;ordre lexicographique et retire les doublons (attention [1...">tableau_trier_retirer_doublons</a>(stencyl);
  <a class="code" href="classMatrix__tools.html#a481961691c1dbee5372da25777e5c1e8">Matrix_tools::allocate_morse_matrix</a>(nb_elem_tot,nb_faces_tot,stencyl,matrice);

}
</pre></div>
</div>
</div>
<a class="anchor" id="ad0294dd8aad7be38527fcf31898b88af"></a><!-- doxytag: member="Op_PolyMAC_Elem::modifier_pour_Cl" ref="ad0294dd8aad7be38527fcf31898b88af" args="(const Zone_PolyMAC &amp;, const Zone_Cl_PolyMAC &amp;, Matrice_Morse &amp;, DoubleTab &amp;) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Op_PolyMAC_Elem::modifier_pour_Cl </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classZone__PolyMAC.html">Zone_PolyMAC</a> &amp;&#160;</td>
          <td class="paramname"><em>la_zone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classZone__Cl__PolyMAC.html">Zone_Cl_PolyMAC</a> &amp;&#160;</td>
          <td class="paramname"><em>la_zone_cl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMatrice__Morse.html">Matrice_Morse</a> &amp;&#160;</td>
          <td class="paramname"><em>la_matrice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>secmem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Op__PolyMAC__Elem_8cpp_source.html#l00221">221</a> of file <a class="el" href="Op__PolyMAC__Elem_8cpp_source.html">Op_PolyMAC_Elem.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// Dimensionnement de la matrice qui devra recevoir les coefficients provenant de</span>
<span class="comment">// la convection, de la diffusion pour le cas des faces.</span>
<span class="comment">// Cette matrice a une structure de matrice morse.</span>
<span class="comment">// Nous commencons par calculer les tailles des tableaux tab1 et tab2.</span>

<span class="comment">// int nfin = la_zone.nb_faces();</span>
<span class="comment">// const Conds_lim&amp; les_cl = la_zone_cl.les_conditions_limites();</span>
<span class="comment">// const IntVect&amp; orientation=la_zone.orientation();</span>

<span class="comment">// Prise en compte des conditions de type periodicite</span>
<span class="comment">// Cerr &lt;&lt; &quot;dans Op_PolyMAC_Elem:: modifier_pour_Cl&quot; &lt;&lt; finl;</span>

}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/PolyMAC/Operateurs/Conv_iterateur/<a class="el" href="Op__PolyMAC__Elem_8h_source.html">Op_PolyMAC_Elem.h</a></li>
<li>src/PolyMAC/Operateurs/Conv_iterateur/<a class="el" href="Op__PolyMAC__Elem_8cpp_source.html">Op_PolyMAC_Elem.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:37:28 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
