<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: Traduction_Indice_Global_Local Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Traduction_Indice_Global_Local Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Traduction_Indice_Global_Local" -->
<p>Cette classe fournit les outils pour construire l'espace<br/>
virtuel d'un tableau contenant des indices d'entites geometriques&lt;br&gt;(sommets, elements, faces). Elle gere en particulier la<br/>
renumerotation des elements virtuels.  
 <a href="classTraduction__Indice__Global__Local.html#details">More...</a></p>

<p><a href="classTraduction__Indice__Global__Local-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#ada36c0c489ea95db3bb8401f84d55c3a">Traduction_Indice_Global_Local</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#af8aae1bb5e815066c64937bde87b7e8a">initialiser</a> (const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;md_items)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise le dictionnaire<br/>
Precontition:<br/>
Les espaces distants des entites utilisees doivent avoir ete calculees.  <a href="#af8aae1bb5e815066c64937bde87b7e8a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#aa13ac6b9ecba36b9701c46cbb11d06c4">reset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#a633b4d9dc27e092f08bb2918401a4c7b">traduire_indice_local_vers_global</a> (const <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;indices_locaux, <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;indices_globaux, int n) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforme les indices locaux en indices globaux a l'aide la<br/>
"table_" (voir initialiser). On fait :<br/>
Pour debut &lt;= i &lt; debut+nb<br/>
indices_globaux[i] = table_[indices_locaux[i]]<br/>
si indices_locaux[i] &lt; 0 alors indices_globaux[i] = -1.  <a href="#a633b4d9dc27e092f08bb2918401a4c7b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#af7d70b1f6312872791271392881768d5">traduire_indice_global_vers_local</a> (const <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;indices_globaux, <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;indices_locaux) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pour debut &lt;= i &lt; debut+nb<br/>
indices_locaux[i] = chercher l'indice local de "indices_globaux[i]"<br/>
Parametre: indices_globaux<br/>
Signification: le tableau des indices globaux a traduire<br/>
Parametre: indices_locaux<br/>
Signification: en sortie, les indices locaux ou -1 si l'indice global<br/>
n'a pas ete trouve.<br/>
Valeur de retour: nombre d'indices non trouves (indices globaux qui<br/>
ne correspondent a aucun indice local).  <a href="#af7d70b1f6312872791271392881768d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#a9a0510ebef5ce63dcfcf00e35c0578c3">traduire_espace_virtuel</a> (<a class="el" href="classIntVect.html">IntVect</a> &amp;tableau) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A partir d'un tableau dont la structure d'espace virtuel est initialisee&lt;br&gt;(descripteurs elements distants et virtuels, items communs)<br/>
et contenant des indices compatibles avec le contenu des tables<br/>
(indices de sommets ou d'elements selon type_table_),<br/>
on remplit les elements virtuels du "tableau" en fonction des elements<br/>
distants et on traduit les indices en indices locaux.<br/>
(exemple, voir construire_espace_virtuel_elements et<br/>
construire_espace_virtuel_faces).<br/>
Valeur de retour: nombre d'indices qui n'ont pas pu etre traduits<br/>
(par exemple, le sommet reference n'existe pas sur le processeur voisin)  <a href="#a9a0510ebef5ce63dcfcf00e35c0578c3"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#a837fb55e45b63ed0ed16085b7f4c9c0d">chercher_table_inverse</a> (const <a class="el" href="classIntTab.html">IntTab</a> &amp;table_inverse, const int sommet_global)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Cherche i tel que table_inverse(i, 0) == sommet_global,<br/>
et renvoie table_inverse(i, 1) (l'indice local du sommet).<br/>
Si le sommet n'est pas trouve dans la table, renvoie -1.<br/>
La table_inverse doit etre triee par ordre croissant de la colonne 0.<br/>
La table_inverse ne doit pas avoir d'espace virtuel.  <a href="#a837fb55e45b63ed0ed16085b7f4c9c0d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMD__Vector.html">MD_Vector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#a83ba597c1d6ef619bdda41ea9345f610">md_items_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#ab93ee6d07d2960f8d6fe8b67cb3f6852">premier_indice_global_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classIntVect.html">IntVect</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classIntTab.html">IntTab</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Cette classe fournit les outils pour construire l'espace<br/>
virtuel d'un tableau contenant des indices d'entites geometriques&lt;br&gt;(sommets, elements, faces). Elle gere en particulier la<br/>
renumerotation des elements virtuels. </p>

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01528">1528</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ada36c0c489ea95db3bb8401f84d55c3a"></a><!-- doxytag: member="Traduction_Indice_Global_Local::Traduction_Indice_Global_Local" ref="ada36c0c489ea95db3bb8401f84d55c3a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Traduction_Indice_Global_Local::Traduction_Indice_Global_Local </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01531">1531</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>
<div class="fragment"><pre class="fragment">{};
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a837fb55e45b63ed0ed16085b7f4c9c0d"></a><!-- doxytag: member="Traduction_Indice_Global_Local::chercher_table_inverse" ref="a837fb55e45b63ed0ed16085b7f4c9c0d" args="(const IntTab &amp;table_inverse, const int sommet_global)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Traduction_Indice_Global_Local::chercher_table_inverse </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIntTab.html">IntTab</a> &amp;&#160;</td>
          <td class="paramname"><em>table_inverse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>sommet_global</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cherche i tel que table_inverse(i, 0) == sommet_global,<br/>
et renvoie table_inverse(i, 1) (l'indice local du sommet).<br/>
Si le sommet n'est pas trouve dans la table, renvoie -1.<br/>
La table_inverse doit etre triee par ordre croissant de la colonne 0.<br/>
La table_inverse ne doit pas avoir d'espace virtuel. </p>

<p><p>&lt; (min+max)/2 </p>
</p>

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01614">1614</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>References <a class="el" href="communications_8cpp_source.html#l00777">compare()</a>, <a class="el" href="IntTab_8h_source.html#l00233">IntTab::dimension()</a>, and <a class="el" href="Source__Generique__Face__PolyMAC_8cpp_source.html#l00045">valeur()</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01678">traduire_indice_global_vers_local()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// Algorithme : recherche par dichotomie:</span>
  <span class="keywordtype">int</span> imin = 0;
  <span class="keywordtype">int</span> imax = table_inverse.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0) - 1;
<span class="comment">// Si un seul element dans la table, on ne passe pas dans while</span>
<span class="comment">// (donc initialisation a table_inverse(0, 0))</span>
<span class="comment">// Sinon, si aucun element, il ne faut pas que valeur == sommet_global,</span>
<span class="comment">// sinon, valeur quelconque, elle sera ecrasee dans le while.</span>
  <span class="keywordtype">int</span> <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>;
  <span class="keywordflow">if</span> (imax == 0)
    valeur = table_inverse(0, 0);
  <span class="keywordflow">else</span>
    valeur = sommet_global - 1;

  <span class="keywordflow">while</span> (imax &gt; imin)
    {
      <span class="keyword">const</span> <span class="keywordtype">int</span> milieu = (imin + imax) &gt;&gt; 1; <span class="comment">//!&lt; (min+max)/2</span>
<span class="comment"></span>      valeur = table_inverse(milieu, 0);
      <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="communications_8cpp.html#aedeafb71cede98447e03249a15284305">compare</a> = valeur - sommet_global;
      <span class="keywordflow">if</span> (compare &lt; 0)
        imin = milieu + 1;
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (compare &gt; 0)
        imax = milieu - 1;
      <span class="keywordflow">else</span>
        imin = imax = milieu;
    }
  <span class="keywordtype">int</span> resu = -1;
  valeur = table_inverse(imin, 0);
  <span class="keywordflow">if</span> (valeur == sommet_global)
    resu = table_inverse(imin, 1);
  <span class="keywordflow">return</span> resu;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af8aae1bb5e815066c64937bde87b7e8a"></a><!-- doxytag: member="Traduction_Indice_Global_Local::initialiser" ref="af8aae1bb5e815066c64937bde87b7e8a" args="(const MD_Vector &amp;md_items)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Traduction_Indice_Global_Local::initialiser </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>md_items</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialise le dictionnaire<br/>
Precontition:<br/>
Les espaces distants des entites utilisees doivent avoir ete calculees. </p>

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01561">1561</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>References <a class="el" href="ArrOfInt_8h_source.html#l00371">ArrOfInt::addr()</a>, <a class="el" href="IntTab_8h_source.html#l00261">IntTab::append_line()</a>, <a class="el" href="MD__Vector__tools_8cpp_source.html#l00039">creer_tableau_distribue()</a>, <a class="el" href="IntTab_8h_source.html#l00233">IntTab::dimension()</a>, <a class="el" href="IntVect_8cpp_source.html#l00276">IntVect::echange_espace_virtuel()</a>, <a class="el" href="Scatter_8cpp_source.html#l01507">fct_tri_table_inverse()</a>, <a class="el" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">MD_Vector_base::get_nb_items_tot()</a>, <a class="el" href="Scatter_8cpp_source.html#l01543">md_items_</a>, <a class="el" href="communications_8cpp_source.html#l00608">mppartial_sum()</a>, <a class="el" href="Scatter_8cpp_source.html#l01544">premier_indice_global_</a>, <a class="el" href="IntVect_8cpp_source.html#l00110">IntVect::reset()</a>, <a class="el" href="IntTab_8cpp_source.html#l00353">IntTab::resize()</a>, <a class="el" href="ArrOfInt_8cpp_source.html#l00443">ArrOfInt::set_smart_resize()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>, <a class="el" href="IntVect_8h_source.html#l00145">IntVect::size_totale()</a>, <a class="el" href="Scatter_8cpp_source.html#l01549">table_</a>, <a class="el" href="Scatter_8cpp_source.html#l01554">table_inverse_</a>, and <a class="el" href="MD__Vector_8h_source.html#l00067">MD_Vector::valeur()</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01762">Scatter::construire_espace_virtuel_traduction()</a>, and <a class="el" href="Scatter_8cpp_source.html#l01807">Scatter::reordonner_faces_de_joint()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classTraduction__Indice__Global__Local.html#a83ba597c1d6ef619bdda41ea9345f610">md_items_</a> = md_items;

<span class="comment">// Construction de &quot;table&quot; : on cree un numero global pour les entites reelles</span>
<span class="comment">// (indice de l&#39;entite + nombre total d&#39;entites sur les processeurs de rang inferieur)</span>
<span class="comment">// puis on echange l&#39;espace virtuel de ce tableau, on obtient pour chaque entite</span>
<span class="comment">// reelle ou virtuelle son numero global.</span>

  <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>.<a class="code" href="classIntVect.html#a273976ecf3d2d4fdbdc48ab446027e8e" title="met l&#39;objet dans l&#39;etat obtenu par le constructeur par defaut. (voir ArrOfInt::reset())">reset</a>();
  <a class="code" href="MD__Vector__tools_8cpp.html#aff1ed2791dba1a76fdb300920147cfdf">MD_Vector_tools::creer_tableau_distribue</a>(md_items, <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>);

  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_entites = md_items.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">get_nb_items_tot</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> decal = <a class="code" href="communications_8cpp.html#a13b5bdc7cfe14771b52a033b1ecbc071" title="Calul de la somme partielle de i sur les processeurs 0 a me()-1 (renvoie 0 sur le processeur 0)...">mppartial_sum</a>(nb_entites);
  <a class="code" href="classTraduction__Indice__Global__Local.html#ab93ee6d07d2960f8d6fe8b67cb3f6852">premier_indice_global_</a> = decal;

  <span class="keywordtype">int</span> i;
  <span class="keywordflow">for</span> (i = 0; i &lt; nb_entites; i++)
    <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>[i] = i + decal;
  <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>.<a class="code" href="classIntVect.html#ad12bea67621d1a0ee82b27c9a37ca4ef">echange_espace_virtuel</a>();

<span class="comment">// Construction de la table_inverse contenant les indices non triviaux</span>
<span class="comment">// (pour lesquels table_[i] != i + decal apres l&#39;echange)</span>
<span class="comment">// tri par ordre croissant du numero global.</span>
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_entites_tot = <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
  <a class="code" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a>.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(0, 2);
  <a class="code" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
  <span class="keywordflow">for</span> (i = 0; i &lt; nb_entites_tot; i++)
    {
      <span class="keywordflow">if</span> (<a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>[i] != i + decal)
        <a class="code" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a>.<a class="code" href="classIntTab.html#ac0af4eac42ca46facc05f985c3ef05c6" title="Adds 1 to dimension_tot(0) and puts a in the added line.">append_line</a>(<a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>[i], i);
    }
<span class="comment">// insure se plaint .. regarder si il a raison</span>
  <span class="keywordflow">if</span> (<a class="code" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>()&gt;0)
    qsort(<a class="code" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a>.<a class="code" href="classArrOfInt.html#ad0b31250e60cd9040ea60be55db73c3d" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>(),
          <a class="code" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0),
          2 * <span class="keyword">sizeof</span>(int),
          <a class="code" href="Scatter_8cpp.html#a944250a2c83f0a472deb1c18072b9b69">fct_tri_table_inverse</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa13ac6b9ecba36b9701c46cbb11d06c4"></a><!-- doxytag: member="Traduction_Indice_Global_Local::reset" ref="aa13ac6b9ecba36b9701c46cbb11d06c4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Traduction_Indice_Global_Local::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01601">1601</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>References <a class="el" href="MD__Vector_8h_source.html#l00093">MD_Vector::detach()</a>, <a class="el" href="Scatter_8cpp_source.html#l01543">md_items_</a>, <a class="el" href="IntTab_8cpp_source.html#l00325">IntTab::reset()</a>, <a class="el" href="IntVect_8cpp_source.html#l00110">IntVect::reset()</a>, <a class="el" href="Scatter_8cpp_source.html#l01549">table_</a>, and <a class="el" href="Scatter_8cpp_source.html#l01554">table_inverse_</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classTraduction__Indice__Global__Local.html#a83ba597c1d6ef619bdda41ea9345f610">md_items_</a>.<a class="code" href="classMD__Vector.html#aa8b6d80c076feecf7373552d58489e22" title="Detache le pointeur de l&#39;objet pointe et decremente le compteur de ref. Si le compteur est nul...">detach</a>();
  <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>.<a class="code" href="classIntVect.html#a273976ecf3d2d4fdbdc48ab446027e8e" title="met l&#39;objet dans l&#39;etat obtenu par le constructeur par defaut. (voir ArrOfInt::reset())">reset</a>();
  <a class="code" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a>.<a class="code" href="classIntTab.html#ac66710ddde96fe2745f341a0166b3b34" title="met le tableau dans l&#39;etat obtenu par le constructeur par defaut voir IntVect::reset()">reset</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a0510ebef5ce63dcfcf00e35c0578c3"></a><!-- doxytag: member="Traduction_Indice_Global_Local::traduire_espace_virtuel" ref="a9a0510ebef5ce63dcfcf00e35c0578c3" args="(IntVect &amp;tableau) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Traduction_Indice_Global_Local::traduire_espace_virtuel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>tableau</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A partir d'un tableau dont la structure d'espace virtuel est initialisee&lt;br&gt;(descripteurs elements distants et virtuels, items communs)<br/>
et contenant des indices compatibles avec le contenu des tables<br/>
(indices de sommets ou d'elements selon type_table_),<br/>
on remplit les elements virtuels du "tableau" en fonction des elements<br/>
distants et on traduit les indices en indices locaux.<br/>
(exemple, voir construire_espace_virtuel_elements et<br/>
construire_espace_virtuel_faces).<br/>
Valeur de retour: nombre d'indices qui n'ont pas pu etre traduits<br/>
(par exemple, le sommet reference n'existe pas sur le processeur voisin) </p>

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01725">1725</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>References <a class="el" href="IntVect_8cpp_source.html#l00165">IntVect::copy()</a>, <a class="el" href="IntVect_8cpp_source.html#l00276">IntVect::echange_espace_virtuel()</a>, <a class="el" href="Array__base_8h_source.html#l00038">Array_base::NOCOPY_NOINIT</a>, <a class="el" href="ArrOfInt_8cpp_source.html#l00952">ArrOfInt::ref_array()</a>, <a class="el" href="IntVect_8h_source.html#l00121">IntVect::size_reelle()</a>, <a class="el" href="IntVect_8h_source.html#l00145">IntVect::size_totale()</a>, <a class="el" href="Scatter_8cpp_source.html#l01678">traduire_indice_global_vers_local()</a>, and <a class="el" href="Scatter_8cpp_source.html#l01655">traduire_indice_local_vers_global()</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01762">Scatter::construire_espace_virtuel_traduction()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// On cree une copie du tableau, dans laquelle on met les indices globaux:</span>
  <a class="code" href="classIntVect.html">IntVect</a> indices_globaux;
<span class="comment">// Ne copier que la structure</span>
  indices_globaux.<a class="code" href="classIntVect.html#a94564e16be1ede0879c6aea2dfc810af" title="copie de la structure et des valeurs (si opt==COPY_INIT) du tableau v. Attention, v doit vraiment etr...">copy</a>(tableau, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);

  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_items_reels    = tableau.<a class="code" href="classIntVect.html#ae17a73660093eb1d4e90fd8d0ec52670" title="Taille de l&#39;espace &quot;reel&quot; du vecteur. (si md_vector_ est nul, cette valeur est identique a size_arr...">size_reelle</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_items_tot      = tableau.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_items_virtuels = nb_items_tot - nb_items_reels;

<span class="comment">// On traduit les items reels en indices globaux:</span>
  <a class="code" href="classTraduction__Indice__Global__Local.html#a633b4d9dc27e092f08bb2918401a4c7b" title="Transforme les indices locaux en indices globaux a l&#39;aide la &quot;table_&quot; (voir initialiser). On fait : Pour debut &lt;= i &lt; debut+nb indices_globaux[i] = table_[indices_locaux[i]] si indices_locaux[i] &lt; 0 alors indices_globaux[i] = -1.">traduire_indice_local_vers_global</a>(tableau, indices_globaux, nb_items_reels);
<span class="comment">// On remplit les cases virtuelles</span>
  indices_globaux.<a class="code" href="classIntVect.html#ad12bea67621d1a0ee82b27c9a37ca4ef">echange_espace_virtuel</a>();

<span class="comment">// On retraduit uniquement les items virtuels du &quot;tableau&quot; en indices locaux:</span>
  <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> src;
  <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> dest;
  src.<a class="code" href="classArrOfInt.html#acdd0214cc8f6c95882e5032b9e3121ea" title="Fait pointer le tableau vers les memes donnees qu&#39;un tableau existant. Le tableau sera du meme type q...">ref_array</a>(indices_globaux, nb_items_reels <span class="comment">/*debut*/</span>, nb_items_virtuels <span class="comment">/*taille*/</span>);
  dest.<a class="code" href="classArrOfInt.html#acdd0214cc8f6c95882e5032b9e3121ea" title="Fait pointer le tableau vers les memes donnees qu&#39;un tableau existant. Le tableau sera du meme type q...">ref_array</a>(tableau, nb_items_reels <span class="comment">/*debut*/</span>, nb_items_virtuels <span class="comment">/*taille*/</span>);
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_erreurs = <a class="code" href="classTraduction__Indice__Global__Local.html#af7d70b1f6312872791271392881768d5" title="Pour debut &lt;= i &lt; debut+nb indices_locaux[i] = chercher l&#39;indice local de &quot;indices_globaux[i]&quot; Parame...">traduire_indice_global_vers_local</a>(src, dest);
  <span class="keywordflow">return</span> nb_erreurs;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af7d70b1f6312872791271392881768d5"></a><!-- doxytag: member="Traduction_Indice_Global_Local::traduire_indice_global_vers_local" ref="af7d70b1f6312872791271392881768d5" args="(const ArrOfInt &amp;indices_globaux, ArrOfInt &amp;indices_locaux) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Traduction_Indice_Global_Local::traduire_indice_global_vers_local </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>indices_globaux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>indices_locaux</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pour debut &lt;= i &lt; debut+nb<br/>
indices_locaux[i] = chercher l'indice local de "indices_globaux[i]"<br/>
Parametre: indices_globaux<br/>
Signification: le tableau des indices globaux a traduire<br/>
Parametre: indices_locaux<br/>
Signification: en sortie, les indices locaux ou -1 si l'indice global<br/>
n'a pas ete trouve.<br/>
Valeur de retour: nombre d'indices non trouves (indices globaux qui<br/>
ne correspondent a aucun indice local). </p>

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01678">1678</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>References <a class="el" href="Scatter_8cpp_source.html#l01614">chercher_table_inverse()</a>, <a class="el" href="Scatter_8cpp_source.html#l01544">premier_indice_global_</a>, <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>, <a class="el" href="Scatter_8cpp_source.html#l01549">table_</a>, and <a class="el" href="Scatter_8cpp_source.html#l01554">table_inverse_</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01807">Scatter::reordonner_faces_de_joint()</a>, and <a class="el" href="Scatter_8cpp_source.html#l01725">traduire_espace_virtuel()</a>.</p>
<div class="fragment"><pre class="fragment">{
  assert(indices_globaux.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() == indices_locaux.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
  <span class="keywordtype">int</span> i;
  <span class="keywordtype">int</span> nb_erreurs = 0;
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_indices = indices_globaux.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> size_table = <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keywordflow">for</span> (i = 0; i &lt; nb_indices; i++)
    {
      <span class="keyword">const</span> <span class="keywordtype">int</span> i_glob = indices_globaux[i];
      <span class="keywordtype">int</span> i_loc;
      <span class="keywordflow">if</span> (i_glob &lt; 0)
        {
<span class="comment">// Indice negatif, on considere que c&#39;est normal,</span>
<span class="comment">// c&#39;est un marqueur &quot;indice vide&quot;.</span>
          i_loc = -1;
        }
      <span class="keywordflow">else</span>
        {
<span class="comment">// On teste si l&#39;item n&#39;est pas renumerote</span>
          i_loc = i_glob - <a class="code" href="classTraduction__Indice__Global__Local.html#ab93ee6d07d2960f8d6fe8b67cb3f6852">premier_indice_global_</a>;
          <span class="keywordflow">if</span> (i_loc &lt; 0 || i_loc &gt;= size_table || <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>[i_loc] != i_glob)
            {
<span class="comment">// non, il faut inverser la table:</span>
              i_loc = <a class="code" href="classTraduction__Indice__Global__Local.html#a837fb55e45b63ed0ed16085b7f4c9c0d" title="Cherche i tel que table_inverse(i, 0) == sommet_global, et renvoie table_inverse(i, 1) (l&#39;indice local du sommet). Si le sommet n&#39;est pas trouve dans la table, renvoie -1. La table_inverse doit etre triee par ordre croissant de la colonne 0. La table_inverse ne doit pas avoir d&#39;espace virtuel.">chercher_table_inverse</a>(<a class="code" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">table_inverse_</a>, i_glob);
            }
          <span class="keywordflow">if</span> (i_loc &lt; 0)
            nb_erreurs++;
        }
      indices_locaux[i] = i_loc;
    }
  <span class="keywordflow">return</span> nb_erreurs;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a633b4d9dc27e092f08bb2918401a4c7b"></a><!-- doxytag: member="Traduction_Indice_Global_Local::traduire_indice_local_vers_global" ref="a633b4d9dc27e092f08bb2918401a4c7b" args="(const ArrOfInt &amp;indices_locaux, ArrOfInt &amp;indices_globaux, int n) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Traduction_Indice_Global_Local::traduire_indice_local_vers_global </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>indices_locaux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>indices_globaux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Transforme les indices locaux en indices globaux a l'aide la<br/>
"table_" (voir initialiser). On fait :<br/>
Pour debut &lt;= i &lt; debut+nb<br/>
indices_globaux[i] = table_[indices_locaux[i]]<br/>
si indices_locaux[i] &lt; 0 alors indices_globaux[i] = -1. </p>

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01655">1655</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>References <a class="el" href="Scatter_8cpp_source.html#l01549">table_</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01807">Scatter::reordonner_faces_de_joint()</a>, and <a class="el" href="Scatter_8cpp_source.html#l01725">traduire_espace_virtuel()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_items_a_traiter; i++)
    {
      <span class="keyword">const</span> <span class="keywordtype">int</span> i_loc = indices_locaux[i];
      <span class="keyword">const</span> <span class="keywordtype">int</span> i_glob = (i_loc &lt; 0) ? -1 : <a class="code" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">table_</a>[i_loc];
      indices_globaux[i] = i_glob;
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a83ba597c1d6ef619bdda41ea9345f610"></a><!-- doxytag: member="Traduction_Indice_Global_Local::md_items_" ref="a83ba597c1d6ef619bdda41ea9345f610" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMD__Vector.html">MD_Vector</a> <a class="el" href="classTraduction__Indice__Global__Local.html#a83ba597c1d6ef619bdda41ea9345f610">Traduction_Indice_Global_Local::md_items_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01543">1543</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01561">initialiser()</a>, and <a class="el" href="Scatter_8cpp_source.html#l01601">reset()</a>.</p>

</div>
</div>
<a class="anchor" id="ab93ee6d07d2960f8d6fe8b67cb3f6852"></a><!-- doxytag: member="Traduction_Indice_Global_Local::premier_indice_global_" ref="ab93ee6d07d2960f8d6fe8b67cb3f6852" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classTraduction__Indice__Global__Local.html#ab93ee6d07d2960f8d6fe8b67cb3f6852">Traduction_Indice_Global_Local::premier_indice_global_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01544">1544</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01561">initialiser()</a>, and <a class="el" href="Scatter_8cpp_source.html#l01678">traduire_indice_global_vers_local()</a>.</p>

</div>
</div>
<a class="anchor" id="a8a3ff36f74660ae806875731ecfcf73a"></a><!-- doxytag: member="Traduction_Indice_Global_Local::table_" ref="a8a3ff36f74660ae806875731ecfcf73a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIntVect.html">IntVect</a> <a class="el" href="classTraduction__Indice__Global__Local.html#a8a3ff36f74660ae806875731ecfcf73a">Traduction_Indice_Global_Local::table_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01549">1549</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01561">initialiser()</a>, <a class="el" href="Scatter_8cpp_source.html#l01601">reset()</a>, <a class="el" href="Scatter_8cpp_source.html#l01678">traduire_indice_global_vers_local()</a>, and <a class="el" href="Scatter_8cpp_source.html#l01655">traduire_indice_local_vers_global()</a>.</p>

</div>
</div>
<a class="anchor" id="ac70085221bd16c6595310480c5756da9"></a><!-- doxytag: member="Traduction_Indice_Global_Local::table_inverse_" ref="ac70085221bd16c6595310480c5756da9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIntTab.html">IntTab</a> <a class="el" href="classTraduction__Indice__Global__Local.html#ac70085221bd16c6595310480c5756da9">Traduction_Indice_Global_Local::table_inverse_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Scatter_8cpp_source.html#l01554">1554</a> of file <a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a>.</p>

<p>Referenced by <a class="el" href="Scatter_8cpp_source.html#l01561">initialiser()</a>, <a class="el" href="Scatter_8cpp_source.html#l01601">reset()</a>, and <a class="el" href="Scatter_8cpp_source.html#l01678">traduire_indice_global_vers_local()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/Kernel/Geometrie/<a class="el" href="Scatter_8cpp_source.html">Scatter.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:38:06 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
