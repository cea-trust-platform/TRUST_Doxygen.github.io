<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Incompressible/Champs/Champ_front_synt.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Incompressible/Champs/Champ_front_synt.cpp</div>  </div>
</div>
<div class="contents">
<a href="Champ__front__synt_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Champ_front_synt.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Incompressible/Champs</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/24</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Champ__front__synt_8h.html">Champ_front_synt.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Frontiere__dis__base_8h.html">Frontiere_dis_base.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Frontiere_8h.html">Frontiere.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Navier__Stokes__std_8h.html">Navier_Stokes_std.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Fluide__base_8h.html">Fluide_base.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Uniforme_8h.html">Champ_Uniforme.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Temps_8h.html">Schema_Temps.h</a>&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;random&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="Champ__front__synt_8cpp.html#a463e35176eb3a0deb6159b77af937685">00037</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classChamp__front__synt.html" title="classe Champ_front_synt Classe derivee de Champ_front_base">Champ_front_synt</a>,<span class="stringliteral">&quot;Champ_front_synt&quot;</span>,<a class="code" href="classCh__front__var__instationnaire__dep.html" title="classe Ch_front_var_instationnaire_dep Cette classe abstraite represente un champ sur une frontiere...">Ch_front_var_instationnaire_dep</a>);
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment">// Precondition:</span>
<a name="l00040"></a>00040 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00041"></a>00041 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00042"></a>00042 <span class="comment">// Valeurs par defaut:</span>
<a name="l00043"></a>00043 <span class="comment">// Contraintes:</span>
<a name="l00044"></a>00044 <span class="comment">// Acces: entree/sortie</span>
<a name="l00045"></a>00045 <span class="comment">// Exception:</span>
<a name="l00046"></a>00046 <span class="comment">// Effets de bord:</span>
<a name="l00047"></a>00047 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00048"></a>00048 <span class="comment">//</span>
<a name="l00049"></a>00049 <span class="comment">//</span>
<a name="l00050"></a>00050 <span class="comment">//</span><span class="comment"></span>
<a name="l00051"></a>00051 <span class="comment">//! Impression sur un flot de sortie au format:&lt;br&gt;taille&lt;br&gt;valeur(0) ... valeur(i)  ... valeur(taille-1)</span>
<a name="l00052"></a>00052 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00053"></a>00053 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00054"></a>00054 <span class="comment">Contraintes: */</span>
<a name="l00055"></a><a class="code" href="classChamp__front__synt.html#a386a81d122b18eec8b5c0267bd18fa62">00055</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classChamp__front__synt.html#a386a81d122b18eec8b5c0267bd18fa62" title="Impression sur un flot de sortie au format: taille valeur(0) ... valeur(i) ... valeur(taille-1)">Champ_front_synt::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00056"></a>00056 <span class="keyword"></span>{
<a name="l00057"></a>00057   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab=<a class="code" href="classChamp__front__base.html#a7d124849f85571b21d805a760deefdc0" title="Renvoie le tableau des valeurs du champ.">valeurs</a>();
<a name="l00058"></a>00058   os &lt;&lt; tab.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00059"></a>00059   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;tab.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
<a name="l00060"></a>00060     os &lt;&lt; tab(0,i);
<a name="l00061"></a>00061   <span class="keywordflow">return</span> os;
<a name="l00062"></a>00062 }
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="comment">//</span><span class="comment"></span>
<a name="l00065"></a>00065 <span class="comment">//! Mise a jour du temps</span>
<a name="l00066"></a>00066 <span class="comment"></span>
<a name="l00067"></a><a class="code" href="classChamp__front__synt.html#ac14acf42714a07381b5290da16f24daf">00067</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__front__synt.html#ac14acf42714a07381b5290da16f24daf" title="Mise a jour du temps.">Champ_front_synt::initialiser</a>(<span class="keywordtype">double</span> tps, <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; inco)
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069   <span class="keywordflow">if</span> (!<a class="code" href="classCh__front__var__instationnaire__dep.html#a5e18c33d21cdbee5214cd7e93de34bc3" title="Initialise le temps courant et Gpoint.">Ch_front_var_instationnaire_dep::initialiser</a>(tps,inco))
<a name="l00070"></a>00070     <span class="keywordflow">return</span> 0;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <a class="code" href="classChamp__front__synt.html#a5d83b053c594274d013daeadde5c936c">ref_inco_</a> = inco;
<a name="l00073"></a>00073   <a class="code" href="classChamp__front__synt.html#a4f940dd2353494b3ef571fa440cd911d" title="NE FAIT RIEN, a surcharger. Cette methode est appelee au debut de chaque pas de temps ou sous-pas-de-...">mettre_a_jour</a>(tps);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075   <span class="keywordflow">return</span> 1;
<a name="l00076"></a>00076 }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="comment">// Precondition:</span>
<a name="l00080"></a>00080 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00081"></a>00081 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00082"></a>00082 <span class="comment">// Valeurs par defaut:</span>
<a name="l00083"></a>00083 <span class="comment">// Contraintes:</span>
<a name="l00084"></a>00084 <span class="comment">// Acces: entree/sortie</span>
<a name="l00085"></a>00085 <span class="comment">// Exception: accolade ouvrante attendue</span>
<a name="l00086"></a>00086 <span class="comment">// Exception: mot clef inconnu a cet endroit</span>
<a name="l00087"></a>00087 <span class="comment">// Exception: accolade fermante attendue</span>
<a name="l00088"></a>00088 <span class="comment">// Effets de bord:</span>
<a name="l00089"></a>00089 <span class="comment">// Postcondition:</span>
<a name="l00090"></a>00090 <span class="comment">//</span>
<a name="l00091"></a>00091 <span class="comment">//</span>
<a name="l00092"></a>00092 <span class="comment">//</span>
<a name="l00093"></a>00093 <span class="comment">//</span><span class="comment"></span>
<a name="l00094"></a>00094 <span class="comment">//! Lecture a partir d&#39;un flot d&#39;entree au format:&lt;br&gt;nombre_de_composantes&lt;br&gt;moyenne moyenne(0) ... moyenne(nombre_de_composantes-1)&lt;br&gt;moyenne amplitude(0) ... amplitude(nombre_de_composantes-1)</span>
<a name="l00095"></a>00095 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00096"></a>00096 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00097"></a>00097 <span class="comment">Contraintes: */</span>
<a name="l00098"></a><a class="code" href="classChamp__front__synt.html#a534780751c63b514b66d270c2234e579">00098</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classChamp__front__synt.html#a534780751c63b514b66d270c2234e579" title="Lecture a partir d&#39;un flot d&#39;entree au format: nombre_de_composantes moyenne moyenne(0) ...">Champ_front_synt::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100   <a class="code" href="classChamp__front__synt.html#ac7bcfe70d10290225d0e10a3b823ff7a">timeScale</a> = 0.;
<a name="l00101"></a>00101   <a class="code" href="classChamp__front__synt.html#ad847274828a02b8940cfeb007742ce6b">lenghtScale</a> =0.;
<a name="l00102"></a>00102   <a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>=0;
<a name="l00103"></a>00103   <a class="code" href="classChamp__front__synt.html#a69670c312984fda62bca494aff74e964">turbKinEn</a>=0.;
<a name="l00104"></a>00104   <a class="code" href="classChamp__front__synt.html#a2344f0f4b17e6c212558f27132014f8a">p</a>=0.;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="keywordtype">int</span> dim;
<a name="l00107"></a>00107   dim=<a class="code" href="classChamp__Proto.html#aab57f8de7f990578e4aa3bb83046b303" title="Verification de la dimension du champ Renvoie la dimension du champ.">lire_dimension</a>(is,<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00108"></a>00108   <span class="keywordflow">if</span>( dim != 3)
<a name="l00109"></a>00109     {
<a name="l00110"></a>00110       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error the dimension must be equal to 3&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00111"></a>00111       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu;
<a name="l00114"></a>00114   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_mots(7);
<a name="l00115"></a>00115   les_mots[0]=<span class="stringliteral">&quot;moyenne&quot;</span>;
<a name="l00116"></a>00116   les_mots[1]=<span class="stringliteral">&quot;lenghtScale&quot;</span>;
<a name="l00117"></a>00117   les_mots[2]=<span class="stringliteral">&quot;nbModes&quot;</span>;
<a name="l00118"></a>00118   les_mots[3]=<span class="stringliteral">&quot;turbKinEn&quot;</span>;
<a name="l00119"></a>00119   les_mots[4]=<span class="stringliteral">&quot;p&quot;</span>;
<a name="l00120"></a>00120   les_mots[5]=<span class="stringliteral">&quot;timeScale&quot;</span>;
<a name="l00121"></a>00121   les_mots[6]=<span class="stringliteral">&quot;dir_fluct&quot;</span>;
<a name="l00122"></a>00122 
<a name="l00123"></a>00123   is &gt;&gt; motlu;
<a name="l00124"></a>00124   <span class="keywordflow">if</span> (motlu != <span class="stringliteral">&quot;{&quot;</span>)
<a name="l00125"></a>00125     {
<a name="l00126"></a>00126       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading Champ_front_synt&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00127"></a>00127       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We expected a { instead of &quot;</span> &lt;&lt; motlu &lt;&lt; finl;
<a name="l00128"></a>00128       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130   <span class="keywordtype">int</span> cpt = 0;
<a name="l00131"></a>00131   is &gt;&gt; motlu;
<a name="l00132"></a>00132   <span class="keywordflow">while</span> (motlu!=<span class="stringliteral">&quot;}&quot;</span>)
<a name="l00133"></a>00133     {
<a name="l00134"></a>00134       <span class="keywordtype">int</span> rang=les_mots.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(motlu);
<a name="l00135"></a>00135       <span class="keywordflow">switch</span>(rang)
<a name="l00136"></a>00136         {
<a name="l00137"></a>00137         <span class="keywordflow">case</span> 0:
<a name="l00138"></a>00138           {
<a name="l00139"></a>00139             cpt++;
<a name="l00140"></a>00140             <a class="code" href="classChamp__front__synt.html#a50dbd649ab5a0219af37268e1b4d4082">moyenne</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dim);
<a name="l00141"></a>00141             <a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(dim);
<a name="l00142"></a>00142             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dim; i++)
<a name="l00143"></a>00143               is &gt;&gt; <a class="code" href="classChamp__front__synt.html#a50dbd649ab5a0219af37268e1b4d4082">moyenne</a>(i);
<a name="l00144"></a>00144             <span class="keywordflow">break</span>;
<a name="l00145"></a>00145           }
<a name="l00146"></a>00146         <span class="keywordflow">case</span> 1:
<a name="l00147"></a>00147           {
<a name="l00148"></a>00148             cpt++;
<a name="l00149"></a>00149             is &gt;&gt; <a class="code" href="classChamp__front__synt.html#ad847274828a02b8940cfeb007742ce6b">lenghtScale</a>;
<a name="l00150"></a>00150             <span class="keywordflow">break</span>;
<a name="l00151"></a>00151           }
<a name="l00152"></a>00152         <span class="keywordflow">case</span> 2:
<a name="l00153"></a>00153           {
<a name="l00154"></a>00154             cpt++;
<a name="l00155"></a>00155             is &gt;&gt; <a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>;
<a name="l00156"></a>00156             <span class="keywordflow">break</span>;
<a name="l00157"></a>00157           }
<a name="l00158"></a>00158         <span class="keywordflow">case</span> 3:
<a name="l00159"></a>00159           {
<a name="l00160"></a>00160             cpt++;
<a name="l00161"></a>00161             is &gt;&gt; <a class="code" href="classChamp__front__synt.html#a69670c312984fda62bca494aff74e964">turbKinEn</a>;
<a name="l00162"></a>00162             <span class="keywordflow">break</span>;
<a name="l00163"></a>00163           }
<a name="l00164"></a>00164         <span class="keywordflow">case</span> 4:
<a name="l00165"></a>00165           {
<a name="l00166"></a>00166             cpt++;
<a name="l00167"></a>00167             is &gt;&gt; <a class="code" href="classChamp__front__synt.html#a2344f0f4b17e6c212558f27132014f8a">p</a>;
<a name="l00168"></a>00168             <span class="keywordflow">break</span>;
<a name="l00169"></a>00169           }
<a name="l00170"></a>00170         <span class="keywordflow">case</span> 5:
<a name="l00171"></a>00171           {
<a name="l00172"></a>00172             cpt++;
<a name="l00173"></a>00173             is &gt;&gt; <a class="code" href="classChamp__front__synt.html#ac7bcfe70d10290225d0e10a3b823ff7a">timeScale</a>;
<a name="l00174"></a>00174             <span class="keywordflow">break</span>;
<a name="l00175"></a>00175           }
<a name="l00176"></a>00176         <span class="keywordflow">case</span> 6:
<a name="l00177"></a>00177           {
<a name="l00178"></a>00178             cpt++;
<a name="l00179"></a>00179             <a class="code" href="classChamp__front__synt.html#aaacb006b16b8024e821a555638ebedd9">dir_fluct</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dim);
<a name="l00180"></a>00180             <a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(dim);
<a name="l00181"></a>00181             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dim; i++)
<a name="l00182"></a>00182               {
<a name="l00183"></a>00183                 is &gt;&gt; <a class="code" href="classChamp__front__synt.html#aaacb006b16b8024e821a555638ebedd9">dir_fluct</a>(i);
<a name="l00184"></a>00184               }
<a name="l00185"></a>00185             <span class="keywordflow">break</span>;
<a name="l00186"></a>00186           }
<a name="l00187"></a>00187         <span class="keywordflow">default</span> :
<a name="l00188"></a>00188           {
<a name="l00189"></a>00189             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading Champ_front_synt&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00190"></a>00190             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot;is not understood.&quot;</span>&lt;&lt; finl;
<a name="l00191"></a>00191             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We are expecting a word among &quot;</span> &lt;&lt; les_mots &lt;&lt; finl;
<a name="l00192"></a>00192             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00193"></a>00193           }
<a name="l00194"></a>00194         }
<a name="l00195"></a>00195       is &gt;&gt; motlu;
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197   <span class="keywordflow">if</span>(cpt != 7)
<a name="l00198"></a>00198     {
<a name="l00199"></a>00199       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading Champ_front_synt: wrong number of parameters&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00200"></a>00200       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You should specify all these parameters: &quot;</span> &lt;&lt; les_mots &lt;&lt; finl;
<a name="l00201"></a>00201       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203   <span class="keywordflow">if</span>( <a class="code" href="classChamp__front__synt.html#ad847274828a02b8940cfeb007742ce6b">lenghtScale</a> == 0 || <a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a> == 0 || <a class="code" href="classChamp__front__synt.html#a69670c312984fda62bca494aff74e964">turbKinEn</a> == 0 || <a class="code" href="classChamp__front__synt.html#a2344f0f4b17e6c212558f27132014f8a">p</a> == 0 || <a class="code" href="classChamp__front__synt.html#ac7bcfe70d10290225d0e10a3b823ff7a">timeScale</a> == 0)
<a name="l00204"></a>00204     {
<a name="l00205"></a>00205       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading Champ_front_synt&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00206"></a>00206       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;There is at least one parameter among: timeScale, lenghtScale, nbModes and turbKinEn set to 0&quot;</span> &lt;&lt; finl;
<a name="l00207"></a>00207       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   <span class="keywordflow">return</span> is;
<a name="l00211"></a>00211 }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 <span class="comment">// Precondition:</span>
<a name="l00215"></a>00215 <span class="comment">// Parametre: Champ_front_base&amp; ch</span>
<a name="l00216"></a>00216 <span class="comment">// Signification:</span>
<a name="l00217"></a>00217 <span class="comment">// Valeurs par defaut:</span>
<a name="l00218"></a>00218 <span class="comment">// Contraintes: reference constante</span>
<a name="l00219"></a>00219 <span class="comment">// Acces: NON ACCEDE</span>
<a name="l00220"></a>00220 <span class="comment">// Exception:</span>
<a name="l00221"></a>00221 <span class="comment">// Effets de bord:</span>
<a name="l00222"></a>00222 <span class="comment">// Postcondition:</span>
<a name="l00223"></a>00223 <span class="comment">//</span><span class="comment"></span>
<a name="l00224"></a>00224 <span class="comment">//! Pas code !!</span>
<a name="l00225"></a>00225 <span class="comment"></span><span class="comment">/** \return Champ_front_base\&amp;&lt;br&gt;</span>
<a name="l00226"></a>00226 <span class="comment">Signification:&lt;br&gt;</span>
<a name="l00227"></a>00227 <span class="comment">Contraintes: */</span>
<a name="l00228"></a><a class="code" href="classChamp__front__synt.html#ad0cb61d93cdec2e78dff60b50faaf5c4">00228</a> <a class="code" href="classChamp__front__base.html" title="classe Champ_front_base Classe de base pour la hierarchie des champs aux frontieres. Un objet Champ_front_base definit un champ sur la frontiere d&#39;un domaine. Un objet de type Champ_front_base sera associe a chaque condition aux limites. Champ_front_base derive de Champ_Proto, afin d&#39;avoir une interface conforme a tous les champs, et d&#39;heriter des operations courantes sur les Champs. Les deux methodes principales sont initialiser et mettre_a_jour. Ce sont les deux seules qui peuvent modifier les valeurs du champ. La methode initialiser est appelee une fois au debut du calcul. Elle ne doit pas dependre de donnees exterieures a l&#39;equation qui porte la CL (en effet, rien ne garantit que ces donnees sont initialisees). En revanche, les valeurs de l&#39;inconnue sur laquelle porte la CL peuvent etre utiles pour l&#39;initialisation =&gt; l&#39;inconnue est passee en parametre en lecture seule. La methode mettre_a_jour est appelee au debut de chaque pas de temps ou sous-pas-de-temps, elle peut utiliser des donnees exterieures a l&#39;equation. A charge a l&#39;algorithme de s&#39;assurer que ces donnees sont pertinentes... Dans le cas de champs stationnaires, la methode mettre_a_jour n&#39;a rien a faire et les valeurs sont remplies une fois pour toutes par la methode initialiser. Dans le cas de champs instationnaires, il y a plusieurs valeurs en temps et chacune peut etre mise a jour. Les Champ_front sont divises en : * Champ_front_uniforme, constant dans le temps et l&#39;espace * Champ_front_instationnaire_base, uniformes en espace mais variables en temps * Champ_front_var, variables en espace. Les Champ_front_var sont ensuite classes selon qu&#39;ils sont stationnaires ou instationnaires. Les valeurs sont stockees dans une roue de DoubleTab. Si le champ est uniforme en espace, les DoubleTab sont dimensionnes a 1. S&#39;il est stationnaire, la roue n&#39;a qu&#39;une valeur temporelle et le temps qui lui est assigne n&#39;a pas de sens. S&#39;il est instationnaire, les valeurs temporelles sont celles de l&#39;inconnue de l&#39;equation a laquelle se rapporte le champ.">Champ_front_base</a>&amp; <a class="code" href="classChamp__front__synt.html#ad0cb61d93cdec2e78dff60b50faaf5c4" title="Pas code !!">Champ_front_synt::affecter_</a>(<span class="keyword">const</span> <a class="code" href="classChamp__front__base.html" title="classe Champ_front_base Classe de base pour la hierarchie des champs aux frontieres. Un objet Champ_front_base definit un champ sur la frontiere d&#39;un domaine. Un objet de type Champ_front_base sera associe a chaque condition aux limites. Champ_front_base derive de Champ_Proto, afin d&#39;avoir une interface conforme a tous les champs, et d&#39;heriter des operations courantes sur les Champs. Les deux methodes principales sont initialiser et mettre_a_jour. Ce sont les deux seules qui peuvent modifier les valeurs du champ. La methode initialiser est appelee une fois au debut du calcul. Elle ne doit pas dependre de donnees exterieures a l&#39;equation qui porte la CL (en effet, rien ne garantit que ces donnees sont initialisees). En revanche, les valeurs de l&#39;inconnue sur laquelle porte la CL peuvent etre utiles pour l&#39;initialisation =&gt; l&#39;inconnue est passee en parametre en lecture seule. La methode mettre_a_jour est appelee au debut de chaque pas de temps ou sous-pas-de-temps, elle peut utiliser des donnees exterieures a l&#39;equation. A charge a l&#39;algorithme de s&#39;assurer que ces donnees sont pertinentes... Dans le cas de champs stationnaires, la methode mettre_a_jour n&#39;a rien a faire et les valeurs sont remplies une fois pour toutes par la methode initialiser. Dans le cas de champs instationnaires, il y a plusieurs valeurs en temps et chacune peut etre mise a jour. Les Champ_front sont divises en : * Champ_front_uniforme, constant dans le temps et l&#39;espace * Champ_front_instationnaire_base, uniformes en espace mais variables en temps * Champ_front_var, variables en espace. Les Champ_front_var sont ensuite classes selon qu&#39;ils sont stationnaires ou instationnaires. Les valeurs sont stockees dans une roue de DoubleTab. Si le champ est uniforme en espace, les DoubleTab sont dimensionnes a 1. S&#39;il est stationnaire, la roue n&#39;a qu&#39;une valeur temporelle et le temps qui lui est assigne n&#39;a pas de sens. S&#39;il est instationnaire, les valeurs temporelles sont celles de l&#39;inconnue de l&#39;equation a laquelle se rapporte le champ.">Champ_front_base</a>&amp; ch)
<a name="l00229"></a>00229 {
<a name="l00230"></a>00230   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00231"></a>00231 }
<a name="l00232"></a>00232 
<a name="l00233"></a><a class="code" href="classChamp__front__synt.html#a4f940dd2353494b3ef571fa440cd911d">00233</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__synt.html#a4f940dd2353494b3ef571fa440cd911d" title="NE FAIT RIEN, a surcharger. Cette methode est appelee au debut de chaque pas de temps ou sous-pas-de-...">Champ_front_synt::mettre_a_jour</a>(<span class="keywordtype">double</span> temps)
<a name="l00234"></a>00234 {
<a name="l00235"></a>00235 
<a name="l00236"></a>00236 <span class="comment">// Acceder a l&#39;equation depuis l&#39;inconnue, ensuite acceder au milieu</span>
<a name="l00237"></a>00237   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; equ = <a class="code" href="classChamp__front__synt.html#a5d83b053c594274d013daeadde5c936c">ref_inco_</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00238"></a>00238   <span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; mil = equ.<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>();
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 <span class="comment">//</span><span class="comment"></span>
<a name="l00241"></a>00241 <span class="comment">  ///!&lt;            donnees d&#39;initialisation        ///</span>
<a name="l00242"></a>00242 <span class="comment"></span><span class="comment">//</span>
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   <span class="keywordtype">double</span> visc = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>,mil).viscosite_cinematique().valeur()(0,0);
<a name="l00245"></a>00245   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; front = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>.<a class="code" href="classRef__Frontiere__dis__base.html#a345b498748a0885ac39c13ddf0041989">valeur</a>());
<a name="l00246"></a>00246   <span class="keywordtype">int</span> nb_face = front.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>(); <span class="comment">//!&lt; real only</span>
<a name="l00247"></a>00247 <span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; tabFaces = front.<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#ac64479069f0c43a17cb5766a39ce5ba8" title="Renvoie les faces de la frontiere&lt;br&gt;(version const)">faces</a>(); <span class="comment">//!&lt; recuperation des faces</span>
<a name="l00248"></a>00248 <span class="comment"></span>
<a name="l00249"></a>00249   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab=<a class="code" href="classChamp__front__var__instationnaire.html#a4ce857027c891d19b36813a44f260400" title="Renvoie les valeurs au temps desire. Sinon, sort en erreur.">valeurs_au_temps</a>(temps);
<a name="l00250"></a>00250 
<a name="l00251"></a>00251   <a class="code" href="classDoubleVect.html">DoubleVect</a> aireFaces; <span class="comment">//!&lt; Attention : contains real + virtual faces</span>
<a name="l00252"></a>00252 <span class="comment"></span>  tabFaces.<a class="code" href="classFaces.html#a8143c6ab93f3350b3f1370d6616953c9" title="Calcule la surface des faces.">calculer_surfaces</a>(aireFaces);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254   <span class="keywordtype">double</span> sum_aire=0.;
<a name="l00255"></a>00255   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_face; i++) sum_aire += aireFaces[i];
<a name="l00256"></a>00256 
<a name="l00257"></a>00257   sum_aire = <a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(sum_aire);
<a name="l00258"></a>00258   <span class="keywordtype">double</span> <a class="code" href="Double_8h.html#a04e03b7aad55468a8b8eae326087338a">dmin</a> = sum_aire / <a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(nb_face) ;
<a name="l00259"></a>00259   <span class="keywordtype">double</span> turbScale = sqrt(2*<a class="code" href="classChamp__front__synt.html#a69670c312984fda62bca494aff74e964">turbKinEn</a>/3);
<a name="l00260"></a>00260   <span class="keywordtype">double</span> eps = pow(<a class="code" href="classChamp__front__synt.html#a69670c312984fda62bca494aff74e964">turbKinEn</a>,1.5);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 <span class="comment">//</span><span class="comment"></span>
<a name="l00263"></a>00263 <span class="comment">  ///!&lt; valeurs remarquables du nombre d&#39;onde ///</span>
<a name="l00264"></a>00264 <span class="comment"></span><span class="comment">//</span>
<a name="l00265"></a>00265 
<a name="l00266"></a>00266   <span class="keywordtype">double</span> kapa_max = <a class="code" href="classChamp__front__synt.html#a3dd8bc9ac2058bd95d5970c46a4e5436">pi</a>/<a class="code" href="Double_8h.html#a04e03b7aad55468a8b8eae326087338a">dmin</a>; <span class="comment">//!&lt; plus grande nombre d&#39;onde</span>
<a name="l00267"></a>00267 <span class="comment"></span>  <span class="keywordtype">double</span> kapa_e = 9*<a class="code" href="classChamp__front__synt.html#a3dd8bc9ac2058bd95d5970c46a4e5436">pi</a>*<a class="code" href="classChamp__front__synt.html#a3930821fc0c208547c28ff56e44e9c4b">amp</a>/(55*<a class="code" href="classChamp__front__synt.html#ad847274828a02b8940cfeb007742ce6b">lenghtScale</a>); <span class="comment">//pic d&#39;energie</span>
<a name="l00268"></a>00268   <span class="keywordtype">double</span> kapa_eta = pow((eps/(visc*visc*visc)),0.25); <span class="comment">//!&lt; pour le spectre de von Karman</span>
<a name="l00269"></a>00269 <span class="comment"></span>  <span class="keywordtype">double</span> kapa_min = kapa_e / <a class="code" href="classChamp__front__synt.html#a2344f0f4b17e6c212558f27132014f8a">p</a>; <span class="comment">//!&lt; plus petit nombre d&#39;onde</span>
<a name="l00270"></a>00270 <span class="comment"></span>  <span class="keywordtype">double</span> delta_kappa = (kapa_max - kapa_min) / <a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>; <span class="comment">//subdivision du nombre d onde</span>
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   <a class="code" href="classDoubleVect.html">DoubleVect</a> kapa_face(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>+1);
<a name="l00273"></a>00273   <a class="code" href="classDoubleVect.html">DoubleVect</a> kapa_center(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00274"></a>00274   <a class="code" href="classDoubleVect.html">DoubleVect</a> dkn(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <a class="code" href="classDoubleVect.html">DoubleVect</a> kapa_x(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00277"></a>00277   <a class="code" href="classDoubleVect.html">DoubleVect</a> kapa_y(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00278"></a>00278   <a class="code" href="classDoubleVect.html">DoubleVect</a> kapa_z(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <a class="code" href="classDoubleVect.html">DoubleVect</a> sigma_x(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00281"></a>00281   <a class="code" href="classDoubleVect.html">DoubleVect</a> sigma_y(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00282"></a>00282   <a class="code" href="classDoubleVect.html">DoubleVect</a> sigma_z(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <a class="code" href="classDoubleVect.html">DoubleVect</a> fi(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00285"></a>00285   <a class="code" href="classDoubleVect.html">DoubleVect</a> alpha(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00286"></a>00286   <a class="code" href="classDoubleVect.html">DoubleVect</a> psi(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00287"></a>00287   <a class="code" href="classDoubleVect.html">DoubleVect</a> teta(<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>);
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 <span class="comment">//</span><span class="comment"></span>
<a name="l00290"></a>00290 <span class="comment">  ///!&lt; generation aleatoire des angles      ///</span>
<a name="l00291"></a>00291 <span class="comment"></span><span class="comment">//</span>
<a name="l00292"></a>00292 
<a name="l00293"></a>00293   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>; i++)
<a name="l00294"></a>00294     {
<a name="l00295"></a>00295       fi(i) = drand48()* 2*<a class="code" href="classChamp__front__synt.html#a3dd8bc9ac2058bd95d5970c46a4e5436">pi</a> ;
<a name="l00296"></a>00296       alpha(i) = drand48()* 2*<a class="code" href="classChamp__front__synt.html#a3dd8bc9ac2058bd95d5970c46a4e5436">pi</a> ;
<a name="l00297"></a>00297       psi(i) = drand48()* 2*<a class="code" href="classChamp__front__synt.html#a3dd8bc9ac2058bd95d5970c46a4e5436">pi</a> ;
<a name="l00298"></a>00298       teta(i) = drand48()* <a class="code" href="classChamp__front__synt.html#a3dd8bc9ac2058bd95d5970c46a4e5436">pi</a> ;
<a name="l00299"></a>00299 <span class="comment"></span>
<a name="l00300"></a>00300 <span class="comment">      ///!&lt; creation vecteur onde en coordonnee cartesienne ///</span>
<a name="l00301"></a>00301 <span class="comment"></span>      kapa_x(i) = sin(teta(i))*cos(fi(i));
<a name="l00302"></a>00302       kapa_y(i) = sin(teta(i))*sin(fi(i));
<a name="l00303"></a>00303       kapa_z(i) = cos(teta(i));
<a name="l00304"></a>00304 <span class="comment"></span>
<a name="l00305"></a>00305 <span class="comment">      ///!&lt; creation de la direction orthogonal au vecteur onde ///</span>
<a name="l00306"></a>00306 <span class="comment"></span>      sigma_x(i) = cos(fi(i))*cos(teta(i))*cos(alpha(i)) - sin(fi(i))*sin(alpha(i));
<a name="l00307"></a>00307       sigma_y(i) = sin(fi(i))*cos(teta(i))*cos(alpha(i)) + cos(fi(i))*sin(alpha(i));
<a name="l00308"></a>00308       sigma_z(i) = -sin(teta(i))*cos(alpha(i));
<a name="l00309"></a>00309     }
<a name="l00310"></a>00310 
<a name="l00311"></a>00311   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt; nbModes+1; i++) kapa_face(i) = kapa_min + delta_kappa*i;
<a name="l00312"></a>00312   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt; <a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>; i++)
<a name="l00313"></a>00313     {
<a name="l00314"></a>00314       kapa_center(i) = 1.0/2.0*(kapa_face(i+1)+kapa_face(i));
<a name="l00315"></a>00315       dkn(i) = kapa_face(i+1)- kapa_face(i);
<a name="l00316"></a>00316     }
<a name="l00317"></a>00317 <span class="comment"></span>
<a name="l00318"></a>00318 <span class="comment">  ///!&lt; recuperation des centres de gravites ///</span>
<a name="l00319"></a>00319 <span class="comment"></span>  <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> centreGrav(nb_face);
<a name="l00320"></a>00320   tabFaces.<a class="code" href="classFaces.html#aff1f39c3e63c21260ab8c49497dd3a3f" title="Calcule les centres de gravite de chaque face.">calculer_centres_gravite</a>(centreGrav);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 
<a name="l00323"></a>00323   <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i&lt;nb_face; i++ )
<a name="l00324"></a>00324     {
<a name="l00325"></a>00325       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> turb(<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>());
<a name="l00326"></a>00326 <span class="comment">// recuperer les points du millieu du maillage</span>
<a name="l00327"></a>00327 
<a name="l00328"></a>00328       <span class="keywordtype">double</span> x_center = centreGrav(i,0);
<a name="l00329"></a>00329       <span class="keywordtype">double</span> y_center = centreGrav(i,1);
<a name="l00330"></a>00330       <span class="keywordtype">double</span> z_center = centreGrav(i,2);
<a name="l00331"></a>00331 
<a name="l00332"></a>00332       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> m = 0; m&lt;<a class="code" href="classChamp__front__synt.html#a5e6fbdf2cae2bce140554ecf99be81d4">nbModes</a>; m++)
<a name="l00333"></a>00333         {
<a name="l00334"></a>00334           <span class="keywordtype">double</span> kx = kapa_x(m) * kapa_center(m);
<a name="l00335"></a>00335           <span class="keywordtype">double</span> ky = kapa_y(m) * kapa_center(m);
<a name="l00336"></a>00336           <span class="keywordtype">double</span> kz = kapa_z(m) * kapa_center(m);
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 
<a name="l00339"></a>00339           <span class="keywordtype">double</span> rk = sqrt(kx*kx + ky*ky + kz*kz);
<a name="l00340"></a>00340 
<a name="l00341"></a>00341           <span class="keywordflow">if</span>(rk &lt; kapa_e)
<a name="l00342"></a>00342             {
<a name="l00343"></a>00343               <span class="keywordtype">double</span> arg = kx*x_center + ky*y_center + kz*z_center + psi(m);
<a name="l00344"></a>00344 
<a name="l00345"></a>00345               <span class="keywordtype">double</span> tfunk = cos(arg);
<a name="l00346"></a>00346 
<a name="l00347"></a>00347               <span class="keywordtype">double</span> karman_spectrum = <a class="code" href="classChamp__front__synt.html#a3930821fc0c208547c28ff56e44e9c4b">amp</a>/kapa_e * pow((kapa_center(m)/kapa_e),4)/pow(1+pow(kapa_center(m)/kapa_e, 2),17.0/6.0) * exp(-2*(pow(kapa_center(m)/kapa_eta, 2)));
<a name="l00348"></a>00348               <span class="keywordtype">double</span> amplitude = sqrt(karman_spectrum *  turbScale * turbScale * dkn(m));
<a name="l00349"></a>00349 
<a name="l00350"></a>00350               turb(0) += 2*amplitude*tfunk*sigma_x(m);
<a name="l00351"></a>00351               turb(1) += 2*amplitude*tfunk*sigma_y(m);
<a name="l00352"></a>00352               turb(2) += 2*amplitude*tfunk*sigma_z(m);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354             }
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 <span class="comment">//</span><span class="comment"></span>
<a name="l00358"></a>00358 <span class="comment">      ///!&lt; MISE EN PLACE AUTOCORRELATION  ///</span>
<a name="l00359"></a>00359 <span class="comment"></span><span class="comment">//</span>
<a name="l00360"></a>00360 
<a name="l00361"></a>00361       <span class="keywordtype">double</span> dt = equ.<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a0e4f67ef6086c09434ddc161668077b2" title="Renvoie le pas de temps (delta_t) courant.">pas_de_temps</a>();
<a name="l00362"></a>00362       <span class="keywordtype">double</span> a = exp(-dt/<a class="code" href="classChamp__front__synt.html#ac7bcfe70d10290225d0e10a3b823ff7a">timeScale</a>);
<a name="l00363"></a>00363       <span class="keywordtype">double</span> b = sqrt(1-a*a);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365       tab(i,0) = <a class="code" href="classChamp__front__synt.html#a50dbd649ab5a0219af37268e1b4d4082">moyenne</a>(0) + <a class="code" href="classChamp__front__synt.html#aaacb006b16b8024e821a555638ebedd9">dir_fluct</a>(0) * (a * (tab(i,0)- <a class="code" href="classChamp__front__synt.html#a50dbd649ab5a0219af37268e1b4d4082">moyenne</a>(0)) + b * turb(0));
<a name="l00366"></a>00366       tab(i,1) = <a class="code" href="classChamp__front__synt.html#a50dbd649ab5a0219af37268e1b4d4082">moyenne</a>(1) + <a class="code" href="classChamp__front__synt.html#aaacb006b16b8024e821a555638ebedd9">dir_fluct</a>(1) * (a * (tab(i,1)- <a class="code" href="classChamp__front__synt.html#a50dbd649ab5a0219af37268e1b4d4082">moyenne</a>(1)) + b * turb(1));
<a name="l00367"></a>00367       tab(i,2) = <a class="code" href="classChamp__front__synt.html#a50dbd649ab5a0219af37268e1b4d4082">moyenne</a>(2) + <a class="code" href="classChamp__front__synt.html#aaacb006b16b8024e821a555638ebedd9">dir_fluct</a>(2) * (a * (tab(i,2)- <a class="code" href="classChamp__front__synt.html#a50dbd649ab5a0219af37268e1b4d4082">moyenne</a>(2)) + b * turb(2));
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371   tab.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00372"></a>00372 }
<a name="l00373"></a>00373 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:33 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
