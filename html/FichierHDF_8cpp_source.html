<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TRUST: src/Kernel/Utilitaires/FichierHDF.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TRUST<span id="projectnumber">&#160;1.9.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_4ebb9cf478835123b919db691d6366a3.html">Kernel</a></li><li class="navelem"><a class="el" href="dir_cdaacd66118cd3761cec6ba1adfb2dd4.html">Utilitaires</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">FichierHDF.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="FichierHDF_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/****************************************************************************</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">* Copyright (c) 2022, CEA</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">* All rights reserved.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">*</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">*</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">*</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">*****************************************************************************/</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;<a class="code" href="EntreeSortie_8h.html">EntreeSortie.h</a>&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;<a class="code" href="FichierHDF_8h.html">FichierHDF.h</a>&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#ifndef MED_</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="classFichierHDF.html#ac43702178467435cbdef199bc28a5fa9">   21</a></span><a class="code hl_function" href="classFichierHDF.html#ac43702178467435cbdef199bc28a5fa9">FichierHDF::FichierHDF</a>()</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>{</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;FichierHDF needs HDF (so MED) to be used!&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>  <a class="code hl_function" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a>(-1);</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>}</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno"><a class="line" href="classFichierHDF.html#ab680851f981677ee033f22f7b6bb4d1f">   26</a></span><a class="code hl_function" href="classFichierHDF.html#ab680851f981677ee033f22f7b6bb4d1f">FichierHDF::~FichierHDF</a>() {}</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno"><a class="line" href="classFichierHDF.html#ae8d1c1444d9d7ac5d0bef32feaa050df">   28</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#ae8d1c1444d9d7ac5d0bef32feaa050df">FichierHDF::create</a>(<a class="code hl_class" href="classNom.html">Nom</a> filename) {}</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a55803f961da3af25680be6cec26e85ec">   29</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a55803f961da3af25680be6cec26e85ec">FichierHDF::open</a>(<a class="code hl_class" href="classNom.html">Nom</a> filename, <span class="keywordtype">bool</span> readOnly) {}</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="classFichierHDF.html#ac5d8eb389ee60109c2d60029f442487f">   30</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#ac5d8eb389ee60109c2d60029f442487f">FichierHDF::close</a>() {}</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">   32</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">FichierHDF::create_and_fill_dataset_MW</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_basename, <a class="code hl_class" href="classSortie__Brute.html">Sortie_Brute</a>&amp; sortie) {}</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a318cc4c44e8d8e24fa4b457e378308b8">   33</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">FichierHDF::create_and_fill_dataset_MW</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_basename, <a class="code hl_class" href="classSChaine.html">SChaine</a>&amp; sortie) {}</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a7ba14e3b21aaca1de6d4473ccd3a5a66">   34</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a7ba14e3b21aaca1de6d4473ccd3a5a66">FichierHDF::create_and_fill_dataset_SW</a>(<a class="code hl_class" href="classNom.html">Nom</a> datasetname, <a class="code hl_class" href="classSortie__Brute.html">Sortie_Brute</a>&amp; sortie) {}</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a4a6063ebd4afc5bac8d24f4ceb60bf62">   35</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a4a6063ebd4afc5bac8d24f4ceb60bf62">FichierHDF::fill_dataset</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_name, <a class="code hl_class" href="classSortie__Brute.html">Sortie_Brute</a>&amp; sortie) {}</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a4b1e63bb02aebe3cd085af22cdd870af">   37</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a4b1e63bb02aebe3cd085af22cdd870af">FichierHDF::read_dataset</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_basename, <span class="keywordtype">int</span> proc_rank, <a class="code hl_class" href="classEntree__Brute.html">Entree_Brute</a>&amp; entree) {}</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a5731b503f5e1472ad9ab934f759dcf7b">   39</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classFichierHDF.html#a5731b503f5e1472ad9ab934f759dcf7b">FichierHDF::exists</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* dataset_name)</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>{</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>}</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a0ad22bc624e64d0fecd33abb64b4881a">   43</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classFichierHDF.html#a0ad22bc624e64d0fecd33abb64b4881a">FichierHDF::is_hdf5</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *file_name)</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>{</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>}</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a400d8db992340b6e5f4a0379e87ce560">   48</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a400d8db992340b6e5f4a0379e87ce560">FichierHDF::prepare_file_props</a>() {}</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="classFichierHDF.html#a8251a110f8aedee5695532706ebc2b4b">   49</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a8251a110f8aedee5695532706ebc2b4b">FichierHDF::prepare_dataset_props</a>() {}</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> hdf5_error(T status)</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>{</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>  <span class="keywordflow">if</span> (status &lt;0)</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    {</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;HDF5 error occured - exiting&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>      <a class="code hl_function" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a>();</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    }</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>}</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><a class="code hl_function" href="classFichierHDF.html#ac43702178467435cbdef199bc28a5fa9">FichierHDF::FichierHDF</a>():  file_id_(0), file_access_plst_(0),</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  dataset_transfer_plst_(0) {}</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><a class="code hl_function" href="classFichierHDF.html#ab680851f981677ee033f22f7b6bb4d1f">FichierHDF::~FichierHDF</a>()</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>{</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment">// close();</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>}</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#ae8d1c1444d9d7ac5d0bef32feaa050df">FichierHDF::create</a>(<a class="code hl_class" href="classNom.html">Nom</a> filename)</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>{</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  <a class="code hl_function" href="classFichierHDF.html#a400d8db992340b6e5f4a0379e87ce560">prepare_file_props</a>();</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  file_id_ = H5Fcreate(filename, H5F_ACC_TRUNC <span class="comment">/*H5F_ACC_EXCL*/</span>, H5P_DEFAULT, file_access_plst_);</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  hdf5_error&lt;hid_t&gt;(file_id_);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;HDF5 &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; file created !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>  <a class="code hl_function" href="classFichierHDF.html#a7d5bffb599ec7d2053ca95b3aeb23a2f">set_int_size</a>();</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>}</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a55803f961da3af25680be6cec26e85ec">FichierHDF::open</a>(<a class="code hl_class" href="classNom.html">Nom</a> filename, <span class="keywordtype">bool</span> readOnly)</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>{</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  <a class="code hl_function" href="classFichierHDF.html#a400d8db992340b6e5f4a0379e87ce560">prepare_file_props</a>();</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> st = readOnly ? H5F_ACC_RDONLY : H5F_ACC_RDWR;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  file_id_ = H5Fopen(filename, st, file_access_plst_);</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  hdf5_error&lt;hid_t&gt;(file_id_);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;HDF5 &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; file opened !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  <a class="code hl_function" href="classFichierHDF.html#a0871fd1d5218ab377e48f4d69f34e092">check_int_size</a>(filename);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>}</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a400d8db992340b6e5f4a0379e87ce560">FichierHDF::prepare_file_props</a>()</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>{</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  file_access_plst_ = H5Pcreate(H5P_FILE_ACCESS);</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="comment">// increasing size of the B-tree containing metadata info (to approximately match the size striping)</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="comment">// useful when we are writing a lot of chunks</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="comment">// see https://www.nersc.gov/users/training/online-tutorials/introduction-to-scientific-i-o/?show_all=1</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment">// file_creation_plst_ = H5Pcreate(H5P_FILE_CREATE);</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment">// hsize_t btree_ik = (stripe_size - 4096) / 96;</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">// H5Pset_istore_k(file_creation_plst_, btree_ik);</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>}</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a8251a110f8aedee5695532706ebc2b4b">FichierHDF::prepare_dataset_props</a>()</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>{</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>  dataset_transfer_plst_ = H5Pcreate(H5P_DATASET_XFER);</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>}</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#ac5d8eb389ee60109c2d60029f442487f">FichierHDF::close</a>()</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>{</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] closing file...&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="comment">// getting file name</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  <span class="keywordtype">char</span> filename[100];</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>  H5Fget_name(file_id_, filename, 100);</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>  H5Fclose(file_id_);</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>  <span class="keywordflow">if</span>(file_access_plst_)    H5Pclose(file_access_plst_);</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>  <span class="keywordflow">if</span>(dataset_transfer_plst_) H5Pclose(dataset_transfer_plst_);</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;HDF5 &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; file closed !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>}</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a4b1e63bb02aebe3cd085af22cdd870af">FichierHDF::read_dataset</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_basename, <span class="keywordtype">int</span> proc_rank, <a class="code hl_class" href="classEntree__Brute.html">Entree_Brute</a>&amp; entree)</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>{</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>  <a class="code hl_function" href="classFichierHDF.html#a8251a110f8aedee5695532706ebc2b4b">prepare_dataset_props</a>();</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  <a class="code hl_class" href="classNom.html">Nom</a> dataset_name = dataset_basename;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>  dataset_name = dataset_name.<a class="code hl_function" href="classNom.html#a67b66f01988827cce6bf1f108b850bda">nom_me</a>(proc_rank, 0, 1 <span class="comment">/*without_padding*/</span>);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataset_id = H5Dopen2(file_id_, dataset_name, H5P_DEFAULT);</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataspace_id =  H5Dget_space(dataset_id);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  <a class="code hl_typedef" href="med__nul_8h.html#a37225a851847bea76ca13daa6c0c8d49">hssize_t</a> sz = H5Sget_simple_extent_npoints(dataspace_id);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  <span class="keywordtype">char</span> * dset_data = <span class="keyword">new</span> <span class="keywordtype">char</span>[sz];</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] Reading into HDF dataset &quot;</span> &lt;&lt; dataset_name &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>  H5Dread(dataset_id, H5T_NATIVE_OPAQUE, H5S_ALL, H5S_ALL, dataset_transfer_plst_, dset_data);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Done !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="comment">// Put extracted data in a standard Entree_Brute from TRUST, that we then use to feed TRUST objects</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  entree.<a class="code hl_function" href="classEntree.html#ada684ed59614198657d59fd8ca9ed369">set_different_int_size</a>(is_different_int_size_);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  entree.<a class="code hl_function" href="classEntree__Brute.html#ae1857b40f712d9cf5ba958143ae2a693">set_data</a>(dset_data, sz);  <span class="comment">//!&lt; data are copied into the Entree</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  <span class="keyword">delete</span>[] dset_data;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  H5Dclose(dataset_id);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  H5Sclose(dataspace_id);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>}</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span><span class="keywordtype">void</span> FichierHDF::create_datasets(<a class="code hl_class" href="classNoms.html">Noms</a> dataset_names, <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> length)</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>{</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataspace_id = H5Screate_simple(1, &amp;length, NULL);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="comment">// Create the dataset</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;dataset_names.<a class="code hl_function" href="classvect__impl.html#aa4ead68b9a3b2cba74be2766cbafcad4">size</a>(); i++)</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    {</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>      <a class="code hl_class" href="classNom.html">Nom</a> dataset_name = dataset_names[i];</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>      <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataset_id = H5Dcreate2(file_id_, dataset_name, H5T_NATIVE_OPAQUE, dataspace_id, H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>      hdf5_error&lt;herr_t&gt;(H5Dclose(dataset_id));</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    }</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="comment">// Close dataset and dataspace</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  hdf5_error&lt;herr_t&gt;(H5Sclose(dataspace_id));</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] All datasets created !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>}</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a4a6063ebd4afc5bac8d24f4ceb60bf62">FichierHDF::fill_dataset</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_name, <a class="code hl_class" href="classSortie__Brute.html">Sortie_Brute</a>&amp; sortie)</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>{</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  <a class="code hl_function" href="classFichierHDF.html#a8251a110f8aedee5695532706ebc2b4b">prepare_dataset_props</a>();</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>  <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> lenData = sortie.<a class="code hl_function" href="classSortie__Brute.html#a5429279d5f058f3fa8cb1891ab8fe644">get_size</a>();</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> * data = sortie.<a class="code hl_function" href="classSortie__Brute.html#a8c671dadd57fdfc806023b4bf9413a6f">get_data</a>();</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> dims[1] = {lenData};</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataspace_id = H5Screate_simple(1, dims, NULL);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="comment">// Open the dataset</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataset_id = H5Dopen2(file_id_, dataset_name, H5P_DEFAULT);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  hdf5_error&lt;hid_t&gt;(dataset_id );</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="comment">// Writing into it:</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] Writing into HDF dataset &quot;</span> &lt;&lt; dataset_name &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  hdf5_error&lt;herr_t&gt;(H5Dwrite(dataset_id, H5T_NATIVE_OPAQUE, H5S_ALL, dataspace_id, dataset_transfer_plst_, data));</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Done !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span><span class="comment">// Close dataset and dataspace</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>  hdf5_error&lt;herr_t&gt;(H5Dclose(dataset_id));</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  hdf5_error&lt;herr_t&gt;(H5Sclose(dataspace_id));</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>}</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">FichierHDF::create_and_fill_dataset_MW</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_basename, <a class="code hl_class" href="classSortie__Brute.html">Sortie_Brute</a>&amp; sortie)</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>{</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> lenData = sortie.<a class="code hl_function" href="classSortie__Brute.html#a5429279d5f058f3fa8cb1891ab8fe644">get_size</a>();</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> * data = sortie.<a class="code hl_function" href="classSortie__Brute.html#a8c671dadd57fdfc806023b4bf9413a6f">get_data</a>();</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  <a class="code hl_function" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">create_and_fill_dataset_MW</a>(dataset_basename, data, lenData, H5T_NATIVE_OPAQUE);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>}</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">FichierHDF::create_and_fill_dataset_MW</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_basename, <a class="code hl_class" href="classSChaine.html">SChaine</a>&amp; sortie)</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>{</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> lenData = sortie.<a class="code hl_function" href="classSChaine.html#a44cc86f71761104ba5d2f940dd58d5d7">get_size</a>();</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> * data = sortie.<a class="code hl_function" href="classSChaine.html#a328b5a25ca0f229dd8d014ee98ee7f1d">get_str</a>();</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  <a class="code hl_function" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">create_and_fill_dataset_MW</a>(dataset_basename, data, lenData, H5T_C_S1);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>}</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">FichierHDF::create_and_fill_dataset_MW</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_basename, <span class="keyword">const</span> <span class="keywordtype">char</span>* data, <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> lenData, <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> datatype)</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>{</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="comment">// collecting the lengths of the datasets from every other processors</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  <span class="keywordtype">long</span> <span class="keywordtype">long</span> init_value = lenData;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  std::vector&lt;long long&gt; datasets_len(<a class="code hl_function" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1">Process::nproc</a>(), init_value);</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  <a class="code hl_function" href="communications_8cpp.html#a11460f0a3e3fa43ee1ed51b9b881be89">envoyer_all_to_all</a>(datasets_len, datasets_len);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="comment">// Creating the datasets from every processor</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span><span class="comment">// (metadata have to be written collectively)</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  std::vector&lt;hid_t&gt; datasets_id(<a class="code hl_function" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1">Process::nproc</a>());</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <a class="code hl_class" href="classNom.html">Nom</a> my_dataset_name;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> p = 0; p &lt; <a class="code hl_function" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1">Process::nproc</a>(); p++)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>      <a class="code hl_class" href="classNom.html">Nom</a> dname = dataset_basename;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>      dname = dname.<a class="code hl_function" href="classNom.html#a67b66f01988827cce6bf1f108b850bda">nom_me</a>(p, 0, 1 <span class="comment">/*without_padding*/</span>);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>      <span class="keywordflow">if</span>(p == <a class="code hl_function" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4">Process::me</a>()) my_dataset_name = dname;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>      <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> dlen= datasets_len[p];</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>      <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dspace = H5Screate_simple(1, &amp;dlen, NULL);</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>      datasets_id[p] = H5Dcreate2(file_id_, dname, datatype, dspace,</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>                                  H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT );</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>      H5Sclose(dspace);</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    }</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] All datasets created !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataspace_id = H5Screate_simple(1, &amp;lenData, NULL);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] Writing into HDF dataset &quot;</span> &lt;&lt; my_dataset_name &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span><span class="comment">// Writing my own dataset</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>  H5Dwrite(datasets_id[<a class="code hl_function" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4">Process::me</a>()], datatype, dataspace_id, H5S_ALL, dataset_transfer_plst_, data);</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Dataset written !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span> </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="comment">// Close dataset and dataspace</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> p = 0; p &lt; <a class="code hl_function" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1">Process::nproc</a>(); p++)</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    H5Dclose(datasets_id[p]);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] All datasets closed !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span> </div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>  H5Sclose(dataspace_id);</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>}</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a7ba14e3b21aaca1de6d4473ccd3a5a66">FichierHDF::create_and_fill_dataset_SW</a>(<a class="code hl_class" href="classNom.html">Nom</a> dataset_name, <a class="code hl_class" href="classSortie__Brute.html">Sortie_Brute</a>&amp; sortie)</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>{</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  <a class="code hl_function" href="classFichierHDF.html#a8251a110f8aedee5695532706ebc2b4b">prepare_dataset_props</a>();</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span> </div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>  <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> lenData = sortie.<a class="code hl_function" href="classSortie__Brute.html#a5429279d5f058f3fa8cb1891ab8fe644">get_size</a>();</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  <span class="keyword">const</span> <span class="keywordtype">char</span> * data = sortie.<a class="code hl_function" href="classSortie__Brute.html#a8c671dadd57fdfc806023b4bf9413a6f">get_data</a>();</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>  <a class="code hl_typedef" href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a> dims[1] = {lenData};</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataspace_id = H5Screate_simple(1, dims, NULL);</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><span class="comment">// Create the dataset</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> dataset_id = H5Dcreate2(file_id_, dataset_name, H5T_NATIVE_OPAQUE, dataspace_id,</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                                H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span><span class="comment">// Writing into it:</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] Writing into HDF dataset &quot;</span> &lt;&lt; dataset_name &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  H5Dwrite(dataset_id, H5T_NATIVE_OPAQUE, H5S_ALL, H5S_ALL, dataset_transfer_plst_, data);</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Done !&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span><span class="comment">// Close dataset and dataspace</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>  H5Dclose(dataset_id);</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>  H5Sclose(dataspace_id);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>}</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classFichierHDF.html#a5731b503f5e1472ad9ab934f759dcf7b">FichierHDF::exists</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* dataset_name)</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>{</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>  <span class="keywordflow">return</span> H5Lexists( file_id_, dataset_name, H5P_DEFAULT )&gt;0;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>}</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classFichierHDF.html#a0ad22bc624e64d0fecd33abb64b4881a">FichierHDF::is_hdf5</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * file_name)</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>{</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  <span class="keywordflow">return</span> H5Fis_hdf5(file_name)&gt;0;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>}</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span> </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span><span class="keywordtype">void</span> <a class="code hl_function" href="classFichierHDF.html#a7d5bffb599ec7d2053ca95b3aeb23a2f">FichierHDF::set_int_size</a>()</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>{</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span><span class="comment">// Create attribute specifying whether ints are 32 or 64 bits</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> space_id = H5Screate(H5S_SCALAR);</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>  <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> attr_id = H5Acreate(file_id_, <span class="stringliteral">&quot;int_size_in_bits&quot;</span>, H5T_NATIVE_INT32, space_id, H5P_DEFAULT, H5P_DEFAULT);</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><span class="preprocessor">#ifdef INT_is_64_</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  <a class="code hl_typedef" href="arch_8h.html#a1caaf369d9c5f0817dbaa76b43b8d87b">True_int</a> int_size = 64;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>  <a class="code hl_typedef" href="arch_8h.html#a1caaf369d9c5f0817dbaa76b43b8d87b">True_int</a> int_size = 32;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>  H5Awrite(attr_id, H5T_NATIVE_INT32, &amp;int_size);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>  H5Aclose(attr_id);</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  H5Sclose(space_id);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>}</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="keywordtype">void</span>  <a class="code hl_function" href="classFichierHDF.html#a0871fd1d5218ab377e48f4d69f34e092">FichierHDF::check_int_size</a>(<a class="code hl_class" href="classNom.html">Nom</a> filename)</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>{</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  <span class="keywordtype">int</span> TRUST_int_type_exists_in_file = H5Aexists(file_id_, <span class="stringliteral">&quot;int_size_in_bits&quot;</span>);</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <span class="keywordflow">if</span> (TRUST_int_type_exists_in_file &lt; 0)</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error &quot;</span> &lt;&lt; (int) TRUST_int_type_exists_in_file;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; while getting the attribute &#39;int_size_in_bits&#39; in the &quot;</span>;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; HDF file&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>      <a class="code hl_function" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a>(-1);</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TRUST_int_type_exists_in_file == 0)</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Warning, we can&#39;t find whether the &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; HDF file was written with -int32 or -int64&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;If an error occurs, or results seem weird, try opening it with &quot;</span>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="preprocessor">#ifdef INT_is_64_</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;an -int32 TRUST version.&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;an -int64 TRUST version.&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    {</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>      <a class="code hl_typedef" href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a> attr_id = H5Aopen(file_id_, <span class="stringliteral">&quot;int_size_in_bits&quot;</span>, H5P_DEFAULT);</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>      <a class="code hl_typedef" href="arch_8h.html#a1caaf369d9c5f0817dbaa76b43b8d87b">True_int</a> int_size_in_bits;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>      H5Aread(attr_id, H5T_NATIVE_INT32, &amp;int_size_in_bits);</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] We read that &quot;</span>&lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; was written in -int&quot;</span> &lt;&lt; (int)int_size_in_bits &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span><span class="preprocessor">#ifdef INT_is_64_</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>      <span class="keywordflow">if</span> (int_size_in_bits == 32)</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        {</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>          is_different_int_size_ = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (int_size_in_bits != 64)</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>          <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] We read -int&quot;</span>&lt;&lt; (int)int_size_in_bits &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; which is abnormal.&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>          H5Aclose(attr_id);</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>          <a class="code hl_function" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a>(-1);</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        }</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>      <span class="keywordflow">if</span> (int_size_in_bits == 64)</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>          is_different_int_size_ = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>          <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Warning, HDF file &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; was written with an -int64 version and you are reading it with an -int32 version.&quot;</span>&lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>          <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Make sure your mesh doesn&#39;t contain more than 2^32 elements, nodes or faces.&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        }</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (int_size_in_bits != 32)</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        {</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>          <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;[HDF5] We read -int&quot;</span>&lt;&lt; (int)int_size_in_bits &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; which is abnormal.&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>          H5Aclose(attr_id);</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>          <a class="code hl_function" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a>(-1);</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        }</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>      H5Aclose(attr_id);</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    }</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>}</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span><span class="comment">// void FichierHDF::get_chunking(hsize_t datasetLen)</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span><span class="comment">// {</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span><span class="comment">// hsize_t FourGB = 4294967296; //maximum limit tolerated by HDF5</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span><span class="comment">// //if the dataset is not big enough, there&#39;s no need for chunking</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span><span class="comment">// if(datasetLen &gt; FourGB)</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span><span class="comment">// chunk_size_ = FourGB;</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span><span class="comment">// }</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span> </div>
<div class="ttc" id="aEntreeSortie_8h_html"><div class="ttname"><a href="EntreeSortie_8h.html">EntreeSortie.h</a></div></div>
<div class="ttc" id="aEntreeSortie_8h_html_a5ebb6b5243d6167369bddecb78d0b5b8"><div class="ttname"><a href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a></div><div class="ttdeci">#define Cerr</div><div class="ttdef"><b>Definition:</b> <a href="EntreeSortie_8h_source.html#l00025">EntreeSortie.h:25</a></div></div>
<div class="ttc" id="aEntreeSortie_8h_html_a7f716d3c5b6411631d5d0700ead09467"><div class="ttname"><a href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a></div><div class="ttdeci">const Separateur finl</div></div>
<div class="ttc" id="aFichierHDF_8h_html"><div class="ttname"><a href="FichierHDF_8h.html">FichierHDF.h</a></div></div>
<div class="ttc" id="aarch_8h_html_a1caaf369d9c5f0817dbaa76b43b8d87b"><div class="ttname"><a href="arch_8h.html#a1caaf369d9c5f0817dbaa76b43b8d87b">True_int</a></div><div class="ttdeci">int True_int</div><div class="ttdef"><b>Definition:</b> <a href="arch_8h_source.html#l00080">arch.h:80</a></div></div>
<div class="ttc" id="aclassEntree__Brute_html"><div class="ttname"><a href="classEntree__Brute.html">Entree_Brute</a></div><div class="ttdoc">An Entree whose main source of data is an arbitrary binary buffer set using the set_data() method....</div><div class="ttdef"><b>Definition:</b> <a href="Entree__Brute_8h_source.html#l00031">Entree_Brute.h:32</a></div></div>
<div class="ttc" id="aclassEntree__Brute_html_ae1857b40f712d9cf5ba958143ae2a693"><div class="ttname"><a href="classEntree__Brute.html#ae1857b40f712d9cf5ba958143ae2a693">Entree_Brute::set_data</a></div><div class="ttdeci">void set_data(const char *data, unsigned sz)</div><div class="ttdef"><b>Definition:</b> <a href="Entree__Brute_8cpp_source.html#l00047">Entree_Brute.cpp:47</a></div></div>
<div class="ttc" id="aclassEntree_html_ada684ed59614198657d59fd8ca9ed369"><div class="ttname"><a href="classEntree.html#ada684ed59614198657d59fd8ca9ed369">Entree::set_different_int_size</a></div><div class="ttdeci">void set_different_int_size(bool is_different_int_size)</div><div class="ttdef"><b>Definition:</b> <a href="Entree_8cpp_source.html#l00038">Entree.cpp:38</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a0871fd1d5218ab377e48f4d69f34e092"><div class="ttname"><a href="classFichierHDF.html#a0871fd1d5218ab377e48f4d69f34e092">FichierHDF::check_int_size</a></div><div class="ttdeci">void check_int_size(Nom filename)</div></div>
<div class="ttc" id="aclassFichierHDF_html_a0ad22bc624e64d0fecd33abb64b4881a"><div class="ttname"><a href="classFichierHDF.html#a0ad22bc624e64d0fecd33abb64b4881a">FichierHDF::is_hdf5</a></div><div class="ttdeci">static bool is_hdf5(const char *file_name)</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00043">FichierHDF.cpp:43</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a25d4709e6498f901d7624c01306f3def"><div class="ttname"><a href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">FichierHDF::create_and_fill_dataset_MW</a></div><div class="ttdeci">virtual void create_and_fill_dataset_MW(Nom dataset_basename, Sortie_Brute &amp;sortie)</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00032">FichierHDF.cpp:32</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a400d8db992340b6e5f4a0379e87ce560"><div class="ttname"><a href="classFichierHDF.html#a400d8db992340b6e5f4a0379e87ce560">FichierHDF::prepare_file_props</a></div><div class="ttdeci">virtual void prepare_file_props()</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00048">FichierHDF.cpp:48</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a4a6063ebd4afc5bac8d24f4ceb60bf62"><div class="ttname"><a href="classFichierHDF.html#a4a6063ebd4afc5bac8d24f4ceb60bf62">FichierHDF::fill_dataset</a></div><div class="ttdeci">void fill_dataset(Nom dataset_name, Sortie_Brute &amp;sortie)</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00035">FichierHDF.cpp:35</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a4b1e63bb02aebe3cd085af22cdd870af"><div class="ttname"><a href="classFichierHDF.html#a4b1e63bb02aebe3cd085af22cdd870af">FichierHDF::read_dataset</a></div><div class="ttdeci">virtual void read_dataset(Nom dataset_basename, int proc_rank, Entree_Brute &amp;entree)</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00037">FichierHDF.cpp:37</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a55803f961da3af25680be6cec26e85ec"><div class="ttname"><a href="classFichierHDF.html#a55803f961da3af25680be6cec26e85ec">FichierHDF::open</a></div><div class="ttdeci">virtual void open(Nom filename, bool readOnly)</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00029">FichierHDF.cpp:29</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a5731b503f5e1472ad9ab934f759dcf7b"><div class="ttname"><a href="classFichierHDF.html#a5731b503f5e1472ad9ab934f759dcf7b">FichierHDF::exists</a></div><div class="ttdeci">virtual bool exists(const char *dataset_name)</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00039">FichierHDF.cpp:39</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a7ba14e3b21aaca1de6d4473ccd3a5a66"><div class="ttname"><a href="classFichierHDF.html#a7ba14e3b21aaca1de6d4473ccd3a5a66">FichierHDF::create_and_fill_dataset_SW</a></div><div class="ttdeci">virtual void create_and_fill_dataset_SW(Nom datasetname, Sortie_Brute &amp;sortie)</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00034">FichierHDF.cpp:34</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_a7d5bffb599ec7d2053ca95b3aeb23a2f"><div class="ttname"><a href="classFichierHDF.html#a7d5bffb599ec7d2053ca95b3aeb23a2f">FichierHDF::set_int_size</a></div><div class="ttdeci">void set_int_size()</div></div>
<div class="ttc" id="aclassFichierHDF_html_a8251a110f8aedee5695532706ebc2b4b"><div class="ttname"><a href="classFichierHDF.html#a8251a110f8aedee5695532706ebc2b4b">FichierHDF::prepare_dataset_props</a></div><div class="ttdeci">virtual void prepare_dataset_props()</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00049">FichierHDF.cpp:49</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_ab680851f981677ee033f22f7b6bb4d1f"><div class="ttname"><a href="classFichierHDF.html#ab680851f981677ee033f22f7b6bb4d1f">FichierHDF::~FichierHDF</a></div><div class="ttdeci">virtual ~FichierHDF()</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00026">FichierHDF.cpp:26</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_ac43702178467435cbdef199bc28a5fa9"><div class="ttname"><a href="classFichierHDF.html#ac43702178467435cbdef199bc28a5fa9">FichierHDF::FichierHDF</a></div><div class="ttdeci">FichierHDF()</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00021">FichierHDF.cpp:21</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_ac5d8eb389ee60109c2d60029f442487f"><div class="ttname"><a href="classFichierHDF.html#ac5d8eb389ee60109c2d60029f442487f">FichierHDF::close</a></div><div class="ttdeci">virtual void close()</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00030">FichierHDF.cpp:30</a></div></div>
<div class="ttc" id="aclassFichierHDF_html_ae8d1c1444d9d7ac5d0bef32feaa050df"><div class="ttname"><a href="classFichierHDF.html#ae8d1c1444d9d7ac5d0bef32feaa050df">FichierHDF::create</a></div><div class="ttdeci">virtual void create(Nom filename)</div><div class="ttdef"><b>Definition:</b> <a href="FichierHDF_8cpp_source.html#l00028">FichierHDF.cpp:28</a></div></div>
<div class="ttc" id="aclassNom_html"><div class="ttname"><a href="classNom.html">Nom</a></div><div class="ttdoc">class Nom Une chaine de caractere pour nommer les objets de TRUST NOM_H</div><div class="ttdef"><b>Definition:</b> <a href="Nom_8h_source.html#l00034">Nom.h:35</a></div></div>
<div class="ttc" id="aclassNom_html_a67b66f01988827cce6bf1f108b850bda"><div class="ttname"><a href="classNom.html#a67b66f01988827cce6bf1f108b850bda">Nom::nom_me</a></div><div class="ttdeci">Nom nom_me(int, const char *prefix=0, int without_padding=0) const</div><div class="ttdoc">Insere _prefix000n (n=me() ou nproc()) dans un nom de fichier (par ex:toto.titi) pour donner toto_pre...</div><div class="ttdef"><b>Definition:</b> <a href="Nom_8cpp_source.html#l00524">Nom.cpp:524</a></div></div>
<div class="ttc" id="aclassNoms_html"><div class="ttname"><a href="classNoms.html">Noms</a></div><div class="ttdoc">Un tableau de chaine de caracteres (VECT(Nom))</div><div class="ttdef"><b>Definition:</b> <a href="Noms_8h_source.html#l00029">Noms.h:30</a></div></div>
<div class="ttc" id="aclassProcess_html_a6bf692ce58d9578aa62ac3c07b8caaa1"><div class="ttname"><a href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1">Process::nproc</a></div><div class="ttdeci">static int nproc()</div><div class="ttdoc">renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...</div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00099">Process.cpp:99</a></div></div>
<div class="ttc" id="aclassProcess_html_ab55ba07167ec807ed3a145cac0f5dca4"><div class="ttname"><a href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4">Process::me</a></div><div class="ttdeci">static int me()</div><div class="ttdoc">renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...</div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00107">Process.cpp:107</a></div></div>
<div class="ttc" id="aclassProcess_html_acc2fbbe761e08e5870ae605c0705491c"><div class="ttname"><a href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a></div><div class="ttdeci">static void exit(int exit_code=-1)</div><div class="ttdoc">Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...</div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00213">Process.cpp:213</a></div></div>
<div class="ttc" id="aclassSChaine_html"><div class="ttname"><a href="classSChaine.html">SChaine</a></div><div class="ttdoc">Cette classe derivee de Sortie empile ce qu'on lui envoie dans une chaine de caracteres....</div><div class="ttdef"><b>Definition:</b> <a href="SChaine_8h_source.html#l00027">SChaine.h:28</a></div></div>
<div class="ttc" id="aclassSChaine_html_a328b5a25ca0f229dd8d014ee98ee7f1d"><div class="ttname"><a href="classSChaine.html#a328b5a25ca0f229dd8d014ee98ee7f1d">SChaine::get_str</a></div><div class="ttdeci">const char * get_str() const</div><div class="ttdoc">returns a copy of the string stored by the SChaine</div><div class="ttdef"><b>Definition:</b> <a href="SChaine_8cpp_source.html#l00079">SChaine.cpp:79</a></div></div>
<div class="ttc" id="aclassSChaine_html_a44cc86f71761104ba5d2f940dd58d5d7"><div class="ttname"><a href="classSChaine.html#a44cc86f71761104ba5d2f940dd58d5d7">SChaine::get_size</a></div><div class="ttdeci">unsigned get_size() const</div><div class="ttdef"><b>Definition:</b> <a href="SChaine_8cpp_source.html#l00087">SChaine.cpp:87</a></div></div>
<div class="ttc" id="aclassSortie__Brute_html"><div class="ttname"><a href="classSortie__Brute.html">Sortie_Brute</a></div><div class="ttdoc">This derived class of Sortie stacks whatever it receives in an internal binary buffer....</div><div class="ttdef"><b>Definition:</b> <a href="Sortie__Brute_8h_source.html#l00028">Sortie_Brute.h:29</a></div></div>
<div class="ttc" id="aclassSortie__Brute_html_a5429279d5f058f3fa8cb1891ab8fe644"><div class="ttname"><a href="classSortie__Brute.html#a5429279d5f058f3fa8cb1891ab8fe644">Sortie_Brute::get_size</a></div><div class="ttdeci">unsigned get_size() const</div><div class="ttdef"><b>Definition:</b> <a href="Sortie__Brute_8cpp_source.html#l00045">Sortie_Brute.cpp:45</a></div></div>
<div class="ttc" id="aclassSortie__Brute_html_a8c671dadd57fdfc806023b4bf9413a6f"><div class="ttname"><a href="classSortie__Brute.html#a8c671dadd57fdfc806023b4bf9413a6f">Sortie_Brute::get_data</a></div><div class="ttdeci">const char * get_data() const</div><div class="ttdoc">returns a pointer to the internal data. The data is valid as long as no other write operation is done...</div><div class="ttdef"><b>Definition:</b> <a href="Sortie__Brute_8cpp_source.html#l00038">Sortie_Brute.cpp:38</a></div></div>
<div class="ttc" id="aclassvect__impl_html_aa4ead68b9a3b2cba74be2766cbafcad4"><div class="ttname"><a href="classvect__impl.html#aa4ead68b9a3b2cba74be2766cbafcad4">vect_impl::size</a></div><div class="ttdeci">int size() const</div><div class="ttdef"><b>Definition:</b> <a href="vect__impl_8h_source.html#l00050">vect_impl.h:50</a></div></div>
<div class="ttc" id="acommunications_8cpp_html_a11460f0a3e3fa43ee1ed51b9b881be89"><div class="ttname"><a href="communications_8cpp.html#a11460f0a3e3fa43ee1ed51b9b881be89">envoyer_all_to_all</a></div><div class="ttdeci">int envoyer_all_to_all(const TRUST_Vector&lt; TRUSTTab, double &gt; &amp;src, TRUST_Vector&lt; TRUSTTab, double &gt; &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="communications_8cpp_source.html#l00202">communications.cpp:202</a></div></div>
<div class="ttc" id="acommunications_8h_html"><div class="ttname"><a href="communications_8h.html">communications.h</a></div></div>
<div class="ttc" id="amed__nul_8h_html_a099bca2137f4b14f99571149bb318c92"><div class="ttname"><a href="med__nul_8h.html#a099bca2137f4b14f99571149bb318c92">hsize_t</a></div><div class="ttdeci">unsigned long hsize_t</div><div class="ttdef"><b>Definition:</b> <a href="med__nul_8h_source.html#l00079">med_nul.h:79</a></div></div>
<div class="ttc" id="amed__nul_8h_html_a37225a851847bea76ca13daa6c0c8d49"><div class="ttname"><a href="med__nul_8h.html#a37225a851847bea76ca13daa6c0c8d49">hssize_t</a></div><div class="ttdeci">signed long hssize_t</div><div class="ttdef"><b>Definition:</b> <a href="med__nul_8h_source.html#l00080">med_nul.h:80</a></div></div>
<div class="ttc" id="amed__nul_8h_html_a96df66c0d11ed2a58049c29f6fa510ce"><div class="ttname"><a href="med__nul_8h.html#a96df66c0d11ed2a58049c29f6fa510ce">hid_t</a></div><div class="ttdeci">int hid_t</div><div class="ttdef"><b>Definition:</b> <a href="med__nul_8h_source.html#l00081">med_nul.h:81</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 29 2022 11:11:30 for TRUST by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
