<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/OrienteFacesBord.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/OrienteFacesBord.cpp</div>  </div>
</div>
<div class="contents">
<a href="OrienteFacesBord_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2015 - 2016, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        OrienteFacesBord.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Geometrie</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/5</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="OrienteFacesBord_8h.html">OrienteFacesBord.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Motcle_8h.html">Motcle.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="EFichier_8h.html">EFichier.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="SFichier_8h.html">SFichier.h</a>&gt;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="OrienteFacesBord_8cpp.html#ad9cb39494b97e1258906cbdda844bfcc">00028</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classOrienteFacesBord.html">OrienteFacesBord</a>,<span class="stringliteral">&quot;OrienteFacesBord&quot;</span>,<a class="code" href="classInterprete__geometrique__base.html" title="classe Interprete_geometrique_base .">Interprete_geometrique_base</a>);
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="classOrienteFacesBord.html#a3205bd5407062d1e499f809addb68e0e">00031</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classOrienteFacesBord.html#a3205bd5407062d1e499f809addb68e0e" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">OrienteFacesBord::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00032"></a>00032 <span class="keyword"></span>{
<a name="l00033"></a>00033   <span class="keywordflow">return</span> <a class="code" href="classOrienteFacesBord.html#a3205bd5407062d1e499f809addb68e0e" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Interprete::printOn</a>(os);
<a name="l00034"></a>00034 }
<a name="l00035"></a>00035 
<a name="l00036"></a><a class="code" href="classOrienteFacesBord.html#af46da538b5a72ad16115c70f2eab2d83">00036</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classOrienteFacesBord.html#af46da538b5a72ad16115c70f2eab2d83" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">OrienteFacesBord::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038   <span class="keywordflow">return</span> <a class="code" href="classOrienteFacesBord.html#af46da538b5a72ad16115c70f2eab2d83" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Interprete::readOn</a>(is);
<a name="l00039"></a>00039 }
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="classOrienteFacesBord.html#a881a10a155460ff442a54da43f6a374e">00041</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classOrienteFacesBord.html#a881a10a155460ff442a54da43f6a374e">OrienteFacesBord::interpreter_</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00042"></a>00042 {
<a name="l00043"></a>00043   <a class="code" href="classInterprete__geometrique__base.html#ac0d2fd316a4bb1585ec579f473684caa">associer_domaine</a>(is);
<a name="l00044"></a>00044   <a class="code" href="classOrienteFacesBord.html#a794c94b1898ee56710c5ceccc9f9e24c">oriente_faces_bord</a>(<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>().<a class="code" href="classObjet__U.html#a70413a8785d36bf5105fced1c89d0d2b" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>());
<a name="l00045"></a>00045   <span class="keywordflow">return</span> is;
<a name="l00046"></a>00046 }
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="classOrienteFacesBord.html#a794c94b1898ee56710c5ceccc9f9e24c">00049</a> <span class="keywordtype">void</span> <a class="code" href="classOrienteFacesBord.html#a794c94b1898ee56710c5ceccc9f9e24c">OrienteFacesBord::oriente_faces_bord</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_dom)
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051 
<a name="l00052"></a>00052   <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(nom_dom));
<a name="l00053"></a>00053 
<a name="l00054"></a>00054   <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00055"></a>00055   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> type=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058   <span class="keywordtype">double</span> e=0.001;
<a name="l00059"></a>00059   <a class="code" href="classIntVect.html">IntVect</a> elem(1);
<a name="l00060"></a>00060   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> pos(1,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00061"></a>00061   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coords=dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00062"></a>00062   <span class="keywordtype">int</span> nombre_faces_rayonnantes=zone.<a class="code" href="classZone.html#a7d6ba9a2216d306cb0a0bf3dfff6f170" title="Renvoie le nombre de bords de la zone.">nb_bords</a>()+zone.<a class="code" href="classZone.html#a150d1dac14da48d5f22abdae26fd85f3" title="Renvoie le nombre de raccords de la zone.">nb_raccords</a>();
<a name="l00063"></a>00063   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iface=0; iface&lt;nombre_faces_rayonnantes; iface++)
<a name="l00064"></a>00064     {
<a name="l00065"></a>00065       <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; som=(iface&lt;zone.<a class="code" href="classZone.html#a7d6ba9a2216d306cb0a0bf3dfff6f170" title="Renvoie le nombre de bords de la zone.">nb_bords</a>()?zone.<a class="code" href="classZone.html#af2f1e6a14af55249979da674e7aac11a" title="Renvoie le i-ieme bord de la zone&lt;br&gt;(version const)">bord</a>(iface).<a class="code" href="classFrontiere.html#ac64479069f0c43a17cb5766a39ce5ba8" title="Renvoie les faces de la frontiere&lt;br&gt;(version const)">faces</a>().<a class="code" href="classFaces.html#a07b8d8db9e3d656b93a21a49c063430c">les_sommets</a>():zone.<a class="code" href="classZone.html#a83ed6844a8fa95eca730acfc873e75e7" title="Renvoie le i-ieme raccord de la zone&lt;br&gt;(version const)">raccord</a>(iface-zone.<a class="code" href="classZone.html#a7d6ba9a2216d306cb0a0bf3dfff6f170" title="Renvoie le nombre de bords de la zone.">nb_bords</a>()).<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>().faces().les_sommets());
<a name="l00066"></a>00066       <span class="keywordtype">int</span> nb_faces=som.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00067"></a>00067       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> new_faces(nb_faces,som.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1));
<a name="l00068"></a>00068 
<a name="l00069"></a>00069       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nb_faces; j++)
<a name="l00070"></a>00070         {
<a name="l00071"></a>00071           <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==2)
<a name="l00072"></a>00072             {
<a name="l00073"></a>00073               <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#ad9b82ace9d4c7902ec704b6a78f76991">axi</a>)
<a name="l00074"></a>00074                 {
<a name="l00075"></a>00075                   <span class="keywordtype">double</span> r0,t0,r1,t1;
<a name="l00076"></a>00076                   r0=coords(som(j,0),0);
<a name="l00077"></a>00077                   t0=coords(som(j,0),1);
<a name="l00078"></a>00078                   r1=coords(som(j,1),0);
<a name="l00079"></a>00079                   t1=coords(som(j,1),1);
<a name="l00080"></a>00080                   <span class="keywordflow">if</span> (t1&lt;t0) t1+=2*<a class="code" href="Double_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>;
<a name="l00081"></a>00081                   <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(r0,r1))
<a name="l00082"></a>00082                     {
<a name="l00083"></a>00083                       pos(0,1)=0.5*(t0+t1);
<a name="l00084"></a>00084                       <span class="keywordflow">if</span> (t0&lt;t1)
<a name="l00085"></a>00085                         pos(0,0)=(1-e)*r0;
<a name="l00086"></a>00086                       <span class="keywordflow">else</span>
<a name="l00087"></a>00087                         pos(0,0)=(1+e)*r0;
<a name="l00088"></a>00088                     }
<a name="l00089"></a>00089                   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(t0,t1))
<a name="l00090"></a>00090                     {
<a name="l00091"></a>00091                       pos(0,0)=0.5*(r0+r1);
<a name="l00092"></a>00092                       <span class="keywordflow">if</span> (r0&lt;r1)
<a name="l00093"></a>00093                         pos(0,1)=(1+e)*t0;
<a name="l00094"></a>00094                       <span class="keywordflow">else</span>
<a name="l00095"></a>00095                         pos(0,1)=(1-e)*t0;
<a name="l00096"></a>00096                     }
<a name="l00097"></a>00097                 }
<a name="l00098"></a>00098               <span class="keywordflow">else</span>
<a name="l00099"></a>00099                 {
<a name="l00100"></a>00100                   <span class="keywordtype">double</span> x0,y0,x1,y1;
<a name="l00101"></a>00101                   x0=coords(som(j,0),0);
<a name="l00102"></a>00102                   y0=coords(som(j,0),1);
<a name="l00103"></a>00103                   x1=coords(som(j,1),0);
<a name="l00104"></a>00104                   y1=coords(som(j,1),1);
<a name="l00105"></a>00105                   <span class="keywordtype">double</span> nx=y0-y1;
<a name="l00106"></a>00106                   <span class="keywordtype">double</span> ny=x1-x0;
<a name="l00107"></a>00107                   <span class="keywordtype">double</span> alpha=10*<a class="code" href="classObjet__U.html#a7447e25c68cc8d3a1c06cf99f0565cff">Objet_U::precision_geom</a>/(sqrt(nx*nx+ny*ny));
<a name="l00108"></a>00108                   pos(0,0)=0.5*(x0+x1)+alpha*nx;
<a name="l00109"></a>00109                   pos(0,1)=0.5*(y0+y1)+alpha*ny;
<a name="l00110"></a>00110                 }
<a name="l00111"></a>00111               dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(pos,elem);
<a name="l00112"></a>00112               <span class="keywordflow">if</span> (elem(0)!=-1)
<a name="l00113"></a>00113                 {
<a name="l00114"></a>00114                   new_faces(j,0) = som(j,0);
<a name="l00115"></a>00115                   new_faces(j,1) = som(j,1);
<a name="l00116"></a>00116                 }
<a name="l00117"></a>00117               <span class="keywordflow">else</span>
<a name="l00118"></a>00118                 {
<a name="l00119"></a>00119                   new_faces(j,0) = som(j,1);
<a name="l00120"></a>00120                   new_faces(j,1) = som(j,0);
<a name="l00121"></a>00121                 }
<a name="l00122"></a>00122             }
<a name="l00123"></a>00123           <span class="keywordflow">else</span>
<a name="l00124"></a>00124             {
<a name="l00125"></a>00125               <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#ad9b82ace9d4c7902ec704b6a78f76991">axi</a>)
<a name="l00126"></a>00126                 {
<a name="l00127"></a>00127                   <span class="keywordtype">double</span> r0,t0,z0,r3,t3,z3;
<a name="l00128"></a>00128                   r0=coords(som(j,0),0);
<a name="l00129"></a>00129                   t0=coords(som(j,0),1);
<a name="l00130"></a>00130                   z0=coords(som(j,0),2);
<a name="l00131"></a>00131                   r3=coords(som(j,3),0);
<a name="l00132"></a>00132                   t3=coords(som(j,3),1);
<a name="l00133"></a>00133                   z3=coords(som(j,3),2);
<a name="l00134"></a>00134 <span class="comment">// Cas ou on repasse a teta=0;</span>
<a name="l00135"></a>00135                   <span class="keywordflow">if</span> (t3&lt;t0) t3+=2*<a class="code" href="Double_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>;
<a name="l00136"></a>00136 
<a name="l00137"></a>00137                   <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(r0,r3))
<a name="l00138"></a>00138                     {
<a name="l00139"></a>00139                       pos(0,1)=0.5*(t0+t3);
<a name="l00140"></a>00140                       <span class="keywordflow">if</span> (t0&lt;t3)
<a name="l00141"></a>00141                         pos(0,0)=(1+e)*r0;
<a name="l00142"></a>00142                       <span class="keywordflow">else</span>
<a name="l00143"></a>00143                         pos(0,0)=(1-e)*r0;
<a name="l00144"></a>00144                       pos(0,2)=0.5*(z0+z3);
<a name="l00145"></a>00145                     }
<a name="l00146"></a>00146                   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(z0,z3))
<a name="l00147"></a>00147                     {
<a name="l00148"></a>00148                       pos(0,0)=0.5*(r0+r3);
<a name="l00149"></a>00149                       pos(0,1)=0.5*(t0+t3);
<a name="l00150"></a>00150                       <span class="keywordflow">if</span> (r0&lt;r3)
<a name="l00151"></a>00151                         pos(0,2)=(1+e)*z0;
<a name="l00152"></a>00152                       <span class="keywordflow">else</span>
<a name="l00153"></a>00153                         pos(0,2)=(1-e)*z0;
<a name="l00154"></a>00154                     }
<a name="l00155"></a>00155                   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(t0,t3))
<a name="l00156"></a>00156                     {
<a name="l00157"></a>00157                       pos(0,0)=0.5*(r0+r3);
<a name="l00158"></a>00158                       pos(0,2)=0.5*(z0+z3);
<a name="l00159"></a>00159                       <span class="keywordflow">if</span> (r0&lt;r3)
<a name="l00160"></a>00160                         pos(0,1)=(1+e)*t0;
<a name="l00161"></a>00161                       <span class="keywordflow">else</span>
<a name="l00162"></a>00162                         pos(0,1)=(1-e)*t0;
<a name="l00163"></a>00163                     }
<a name="l00164"></a>00164                   dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(pos,elem);
<a name="l00165"></a>00165                   <span class="keywordflow">if</span> (elem(0)!=-1)
<a name="l00166"></a>00166                     {
<a name="l00167"></a>00167                       new_faces(j,0) = som(j,0);
<a name="l00168"></a>00168                       new_faces(j,1) = som(j,2);
<a name="l00169"></a>00169                       new_faces(j,2) = som(j,3);
<a name="l00170"></a>00170                       new_faces(j,3) = som(j,1);
<a name="l00171"></a>00171                     }
<a name="l00172"></a>00172                   <span class="keywordflow">else</span>
<a name="l00173"></a>00173                     {
<a name="l00174"></a>00174                       new_faces(j,0) = som(j,0);
<a name="l00175"></a>00175                       new_faces(j,1) = som(j,1);
<a name="l00176"></a>00176                       new_faces(j,2) = som(j,3);
<a name="l00177"></a>00177                       new_faces(j,3) = som(j,2);
<a name="l00178"></a>00178                     }
<a name="l00179"></a>00179                 }
<a name="l00180"></a>00180               <span class="keywordflow">else</span>
<a name="l00181"></a>00181                 {
<a name="l00182"></a>00182                   <span class="keywordtype">double</span> x0,y0,z0,x1,y1,z1,x2,y2,z2;
<a name="l00183"></a>00183                   x0=coords(som(j,0),0);
<a name="l00184"></a>00184                   y0=coords(som(j,0),1);
<a name="l00185"></a>00185                   z0=coords(som(j,0),2);
<a name="l00186"></a>00186                   x1=coords(som(j,1),0);
<a name="l00187"></a>00187                   y1=coords(som(j,1),1);
<a name="l00188"></a>00188                   z1=coords(som(j,1),2);
<a name="l00189"></a>00189                   x2=coords(som(j,2),0);
<a name="l00190"></a>00190                   y2=coords(som(j,2),1);
<a name="l00191"></a>00191                   z2=coords(som(j,2),2);
<a name="l00192"></a>00192                   <span class="keywordtype">double</span> nx=(y1-y0)*(z2-z0)-(z1-z0)*(y2-y0);
<a name="l00193"></a>00193                   <span class="keywordtype">double</span> ny=(z1-z0)*(x2-x0)-(x1-x0)*(z2-z0);
<a name="l00194"></a>00194                   <span class="keywordtype">double</span> nz=(x1-x0)*(y2-y0)-(y1-y0)*(x2-x0);
<a name="l00195"></a>00195                   <span class="keywordtype">double</span> alpha=100*<a class="code" href="classObjet__U.html#a7447e25c68cc8d3a1c06cf99f0565cff">Objet_U::precision_geom</a>/(sqrt(nx*nx+ny*ny+nz*nz));
<a name="l00196"></a>00196                   pos(0,0)=(x0+x1+x2)/3.+alpha*nx;
<a name="l00197"></a>00197                   pos(0,1)=(y0+y1+y2)/3.+alpha*ny;
<a name="l00198"></a>00198                   pos(0,2)=(z0+z1+z2)/3.+alpha*nz;
<a name="l00199"></a>00199                   dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(pos,elem);
<a name="l00200"></a>00200                   <span class="comment">/*</span>
<a name="l00201"></a>00201 <span class="comment">                    if (x0&gt;0 &amp;&amp; y0&gt;0 &amp;&amp; x1&gt;0 &amp;&amp; y1&gt;0 &amp;&amp; x2&gt;0 &amp;&amp; y2&gt;0)</span>
<a name="l00202"></a>00202 <span class="comment">                    {</span>
<a name="l00203"></a>00203 <span class="comment">                    Cout &lt;&lt; &quot;nx = &quot; &lt;&lt; nx &lt;&lt; &quot; &quot; &lt;&lt; ny &lt;&lt; &quot; &quot; &lt;&lt; nz &lt;&lt; finl;</span>
<a name="l00204"></a>00204 <span class="comment">                    Cout &lt;&lt; &quot;pos = &quot; &lt;&lt; pos &lt;&lt; finl;</span>
<a name="l00205"></a>00205 <span class="comment">                    Cout &lt;&lt; elem(0) &lt;&lt; finl;</span>
<a name="l00206"></a>00206 <span class="comment">                    } */</span>
<a name="l00207"></a>00207                   <span class="keywordflow">if</span> (elem(0)!=-1)
<a name="l00208"></a>00208                     {
<a name="l00209"></a>00209 <span class="comment">// Cout &lt;&lt; &quot;non inversion&quot; &lt;&lt; finl;</span>
<a name="l00210"></a>00210                       <span class="keywordflow">if</span> (type==<span class="stringliteral">&quot;Tetraedre&quot;</span>)
<a name="l00211"></a>00211                         {
<a name="l00212"></a>00212                           new_faces(j,0) = som(j,0);
<a name="l00213"></a>00213                           new_faces(j,1) = som(j,1);
<a name="l00214"></a>00214                           new_faces(j,2) = som(j,2);
<a name="l00215"></a>00215 
<a name="l00216"></a>00216                         }
<a name="l00217"></a>00217                       <span class="keywordflow">else</span>
<a name="l00218"></a>00218                         {
<a name="l00219"></a>00219                           new_faces(j,0) = som(j,0);
<a name="l00220"></a>00220                           new_faces(j,1) = som(j,1);
<a name="l00221"></a>00221                           new_faces(j,2) = som(j,3);
<a name="l00222"></a>00222                           new_faces(j,3) = som(j,2);
<a name="l00223"></a>00223                         }
<a name="l00224"></a>00224                     }
<a name="l00225"></a>00225                   <span class="keywordflow">else</span>
<a name="l00226"></a>00226                     {
<a name="l00227"></a>00227 <span class="comment">// Cout &lt;&lt; &quot;inversion&quot; &lt;&lt; finl;</span>
<a name="l00228"></a>00228                       <span class="keywordflow">if</span> (type==<span class="stringliteral">&quot;Tetraedre&quot;</span>)
<a name="l00229"></a>00229                         {
<a name="l00230"></a>00230                           new_faces(j,0) = som(j,0);
<a name="l00231"></a>00231                           new_faces(j,1) = som(j,2);
<a name="l00232"></a>00232                           new_faces(j,2) = som(j,1);
<a name="l00233"></a>00233                         }
<a name="l00234"></a>00234                       <span class="keywordflow">else</span>
<a name="l00235"></a>00235                         {
<a name="l00236"></a>00236                           new_faces(j,0) = som(j,0);
<a name="l00237"></a>00237                           new_faces(j,1) = som(j,2);
<a name="l00238"></a>00238                           new_faces(j,2) = som(j,3);
<a name="l00239"></a>00239                           new_faces(j,3) = som(j,1);
<a name="l00240"></a>00240                         }
<a name="l00241"></a>00241                     }
<a name="l00242"></a>00242                   <span class="keywordflow">if</span> (elem(0)!=-1)
<a name="l00243"></a>00243                     {
<a name="l00244"></a>00244                       <span class="keywordtype">int</span> el=elem(0);
<a name="l00245"></a>00245                       pos(0,0)=(x0+x1+x2)/3.-alpha*nx;
<a name="l00246"></a>00246                       pos(0,1)=(y0+y1+y2)/3.-alpha*ny;
<a name="l00247"></a>00247                       pos(0,2)=(z0+z1+z2)/3.-alpha*nz;
<a name="l00248"></a>00248                       dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(pos,elem);
<a name="l00249"></a>00249                       <span class="keywordflow">if</span> (elem(0)!=-1)
<a name="l00250"></a>00250                         {
<a name="l00251"></a>00251                           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Case not implemented in the OrienteFacesBord algorithm! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00252"></a>00252                           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The face &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; is surrounded by the two elements &quot;</span> &lt;&lt; el &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; elem(0) &lt;&lt; finl;
<a name="l00253"></a>00253                           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; alpha*nx &lt;&lt; finl;
<a name="l00254"></a>00254                           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; alpha*ny &lt;&lt; finl;
<a name="l00255"></a>00255                           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; alpha*nz &lt;&lt; finl;
<a name="l00256"></a>00256                           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Contact TRUST support.&quot;</span> &lt;&lt;finl;
<a name="l00257"></a>00257                           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00258"></a>00258                         }
<a name="l00259"></a>00259                     }
<a name="l00260"></a>00260                 }
<a name="l00261"></a>00261             }
<a name="l00262"></a>00262         }
<a name="l00263"></a>00263       <span class="keywordflow">if</span> (iface&lt;zone.<a class="code" href="classZone.html#a7d6ba9a2216d306cb0a0bf3dfff6f170" title="Renvoie le nombre de bords de la zone.">nb_bords</a>())
<a name="l00264"></a>00264         zone.<a class="code" href="classZone.html#af2f1e6a14af55249979da674e7aac11a" title="Renvoie le i-ieme bord de la zone&lt;br&gt;(version const)">bord</a>(iface).<a class="code" href="classFrontiere.html#ac64479069f0c43a17cb5766a39ce5ba8" title="Renvoie les faces de la frontiere&lt;br&gt;(version const)">faces</a>().<a class="code" href="classFaces.html#a07b8d8db9e3d656b93a21a49c063430c">les_sommets</a>().<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(new_faces);
<a name="l00265"></a>00265       <span class="keywordflow">else</span>
<a name="l00266"></a>00266         zone.<a class="code" href="classZone.html#a83ed6844a8fa95eca730acfc873e75e7" title="Renvoie le i-ieme raccord de la zone&lt;br&gt;(version const)">raccord</a>(iface-zone.<a class="code" href="classZone.html#a7d6ba9a2216d306cb0a0bf3dfff6f170" title="Renvoie le nombre de bords de la zone.">nb_bords</a>()).<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>().faces().les_sommets().ref(new_faces);
<a name="l00267"></a>00267     }
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:19 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
