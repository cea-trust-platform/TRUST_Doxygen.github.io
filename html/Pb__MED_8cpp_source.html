<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/MEDimpl/Pb_MED.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/MEDimpl/Pb_MED.cpp</div>  </div>
</div>
<div class="contents">
<a href="Pb__MED_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2017, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Pb_MED.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/MEDimpl</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/30</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Pb__MED_8h.html">Pb_MED.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Fonc__MED_8h.html">Champ_Fonc_MED.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="LireMED_8h.html">LireMED.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Postraitement_8h.html">Postraitement.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Interprete__bloc_8h.html">Interprete_bloc.h</a>&gt;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a><a class="code" href="Pb__MED_8cpp.html#a7e0d9aedbdd53e4fd701fc6e7ee83f2d">00029</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classPb__MED.html" title="Classe Pb_MED Classe pour postraiter relire des fichiers med et les postraiter.">Pb_MED</a>,<span class="stringliteral">&quot;Pb_MED&quot;</span>,<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>);
<a name="l00030"></a><a class="code" href="Pb__MED_8cpp.html#ad86703b249c354f5b23b5d9bb07d4e15">00030</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classPbc__MED.html">Pbc_MED</a>,<span class="stringliteral">&quot;Pbc_MED&quot;</span>,<a class="code" href="classProbleme__Couple.html" title="classe Probleme_Couple C&#39;est la classe historique de couplage de TRUST. Il s&#39;agit d&#39;un Couplage_U par...">Probleme_Couple</a>);
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="comment">// Precondition:</span>
<a name="l00034"></a>00034 <span class="comment">// Parametre: Sortie&amp; s</span>
<a name="l00035"></a>00035 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00036"></a>00036 <span class="comment">// Valeurs par defaut:</span>
<a name="l00037"></a>00037 <span class="comment">// Contraintes:</span>
<a name="l00038"></a>00038 <span class="comment">// Acces:</span>
<a name="l00039"></a>00039 <span class="comment">// Exception:</span>
<a name="l00040"></a>00040 <span class="comment">// Effets de bord:</span>
<a name="l00041"></a>00041 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00042"></a>00042 <span class="comment">//</span><span class="comment"></span>
<a name="l00043"></a>00043 <span class="comment">//! NE FAIT RIEN</span>
<a name="l00044"></a>00044 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00045"></a>00045 <span class="comment">Signification: le flot de sortie&lt;br&gt;</span>
<a name="l00046"></a>00046 <span class="comment">Contraintes: */</span>
<a name="l00047"></a><a class="code" href="classPb__MED.html#a1a89498e6a69f8387d2b01141a35909d">00047</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classPb__MED.html#a1a89498e6a69f8387d2b01141a35909d" title="NE FAIT RIEN.">Pb_MED::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s )<span class="keyword"> const</span>
<a name="l00048"></a>00048 <span class="keyword"></span>{
<a name="l00049"></a>00049   <span class="keywordflow">return</span> s;
<a name="l00050"></a>00050 }
<a name="l00051"></a><a class="code" href="classPbc__MED.html#ad5d9a7a9279d20795dd887f7d0bd7f7b">00051</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classPbc__MED.html#ad5d9a7a9279d20795dd887f7d0bd7f7b" title="Surcharge Objet_U::printOn(Sortie&amp;) Imprime les problemes couples sur un flot de sortie.">Pbc_MED::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s )<span class="keyword"> const</span>
<a name="l00052"></a>00052 <span class="keyword"></span>{
<a name="l00053"></a>00053   <span class="keywordflow">return</span> s;
<a name="l00054"></a>00054 }
<a name="l00055"></a><a class="code" href="classPbc__MED.html#a49be2be45401378617865d7c1b91c0c0">00055</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classPbc__MED.html#a49be2be45401378617865d7c1b91c0c0" title="A surcharger...">Pbc_MED::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is )
<a name="l00056"></a>00056 {
<a name="l00057"></a>00057 
<a name="l00058"></a>00058   <span class="keywordtype">int</span> nmax=10,npb=0;
<a name="l00059"></a>00059   <a class="code" href="classPbc__MED.html#a8025100059f6aa8165383943526b1731">sch_</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;Schema_Euler_explicite&quot;</span>);
<a name="l00060"></a>00060 <span class="comment">// Schema_Euler_explicite&amp; sch=ref_cast(Schema_Euler_explicite,sch_.valeur());</span>
<a name="l00061"></a>00061   <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>,<a class="code" href="classPbc__MED.html#a8025100059f6aa8165383943526b1731">sch_</a>.<a class="code" href="classDeriv__Schema__Temps__base.html#aa12c06568dc7f181cd2e8b82d71a37f4">valeur</a>());
<a name="l00062"></a>00062   sch.<a class="code" href="classSchema__Temps__base.html#adcbfea514c4f5d155c8208084d3ffc88" title="Change le temps courant.">changer_temps_courant</a>(-1.);
<a name="l00063"></a>00063   <a class="code" href="classProbleme__Couple.html#a81578a76626ac5f5d4e3c674ff74a49c" title="Associe une copie du schema en temps a chaque probleme du Probleme couple.">associer_sch_tps_base</a>(sch);
<a name="l00064"></a>00064 <span class="comment">// Pb_MED* listpb;</span>
<a name="l00065"></a>00065 <span class="comment">// On cree une liste de DerObjU car c&#39;est eux que l&#39;on peut ajouter a l&#39;interprete...</span>
<a name="l00066"></a>00066   <a class="code" href="classDeriv__Objet__U.html">DerObjU</a>* listob =<span class="keyword">new</span> <a class="code" href="classDeriv__Objet__U.html">DerObjU</a>[nmax];
<a name="l00067"></a>00067   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> accouv(<span class="stringliteral">&quot;{&quot;</span>),accfer(<span class="stringliteral">&quot;}&quot;</span>),virg(<span class="stringliteral">&quot;,&quot;</span>),motlu;
<a name="l00068"></a>00068   is &gt;&gt; motlu;
<a name="l00069"></a>00069   <span class="keywordflow">if</span> (motlu!=accouv)
<a name="l00070"></a>00070     {
<a name="l00071"></a>00071       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; One expects { to begin the read of Pbc_Med&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00072"></a>00072       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00073"></a>00073     }
<a name="l00074"></a>00074   <a class="code" href="classInterprete__bloc.html" title="Interprete un bloc d&#39;instructions dans le jeu de donnees. Voir Interprete_bloc::interpreter()">Interprete_bloc</a> inter;
<a name="l00075"></a>00075   <span class="keywordflow">while</span> (motlu!=accfer)
<a name="l00076"></a>00076     {
<a name="l00077"></a>00077       assert((motlu==virg)||(motlu==accouv));
<a name="l00078"></a>00078       <span class="keywordflow">if</span> (npb&gt;=nmax)
<a name="l00079"></a>00079         {
<a name="l00080"></a>00080           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The number of coupled problems is to large&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00081"></a>00081           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00082"></a>00082         }
<a name="l00083"></a>00083       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_numero(npb);
<a name="l00084"></a>00084       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nompb(<span class="stringliteral">&quot;pbMED_&quot;</span>);
<a name="l00085"></a>00085       nompb+=nom_numero;
<a name="l00086"></a>00086       <a class="code" href="classDeriv__Objet__U.html">DerObjU</a>&amp; ob= listob[npb];
<a name="l00087"></a>00087       ob.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;Pb_MED&quot;</span>);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089       inter.<a class="code" href="classInterprete__bloc.html#a229ccd01911aa158cca828a109ead063" title="Ajoute l&#39;objet ob a la liste des objets de l&#39;interprete, et nomme l&#39;objet avec nom. Si l&#39;objet existe deja, exit()">ajouter</a>(nompb,ob);
<a name="l00090"></a>00090       <a class="code" href="classPb__MED.html" title="Classe Pb_MED Classe pour postraiter relire des fichiers med et les postraiter.">Pb_MED</a>&amp; pb=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPb__MED.html" title="Classe Pb_MED Classe pour postraiter relire des fichiers med et les postraiter.">Pb_MED</a>,inter.<a class="code" href="classInterprete__bloc.html#ae0b05c3b185638c72c0521be856f1d4f" title="cherche l&#39;objet demande dans l&#39;Interprete_bloc courant (Interprete_bloc::interprete_courant()) et dan...">objet_global</a>(nompb));
<a name="l00091"></a>00091       pb.<a class="code" href="classProbleme__base.html#ab315c9b03eba6a89fda6401a40af5206" title="surcharge Objet_U::nommer(const Nom&amp;) Donne un nom au probleme">nommer</a>(nompb);
<a name="l00092"></a>00092       <a class="code" href="classProbleme__Couple.html#a24fece361d082010a5f17a6a0eaff472" title="Surcharge Objet_U::associer_(Objet_U&amp;) Associe un objet au probleme couple, en verifiant le type dyna...">associer_</a>(pb);
<a name="l00093"></a>00093 
<a name="l00094"></a>00094       pb.<a class="code" href="classProbleme__base.html#a90bef636c0d4a05f4487238053c0f027" title="Associe un schema en temps au probleme. Associe ensuite le schema en temps a toutes les equations du ...">associer_sch_tps_base</a>(sch);
<a name="l00095"></a>00095       is &gt;&gt; pb;
<a name="l00096"></a>00096       npb++;
<a name="l00097"></a>00097       is &gt;&gt; motlu;
<a name="l00098"></a>00098       <span class="keywordflow">if</span> ((motlu!=accfer)&amp;&amp;(motlu!=virg))
<a name="l00099"></a>00099         {
<a name="l00100"></a>00100           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;One expects } or , between the problems &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00101"></a>00101           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;and not &quot;</span>&lt;&lt;motlu&lt;&lt;finl;
<a name="l00102"></a>00102           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00103"></a>00103         }
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 
<a name="l00107"></a>00107   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classCouplage__U.html#abb5aa9654efade53ade07f8181f8cf8b" title="Number of problems.">nb_problemes</a>(); i++)
<a name="l00108"></a>00108     <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>,<a class="code" href="classCouplage__U.html#af963c77dd8af104e2005f0b2272e5325" title="Access by index (const)">probleme</a>(i)).init_postraitements();
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">// On oublie les axi, car les inconnues ont deja eu le traitement</span>
<a name="l00112"></a>00112 <span class="comment">// apres l&#39;init pour ecrire correctement les geom</span>
<a name="l00113"></a>00113   <a class="code" href="classObjet__U.html#a9a47c1add9760324894500792c17a178">bidim_axi</a>=0;
<a name="l00114"></a>00114   <a class="code" href="classObjet__U.html#ad9b82ace9d4c7902ec704b6a78f76991">axi</a>=0;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 <span class="comment">// const Probleme_base&amp; pb1=les_problemes[0].valeur();</span>
<a name="l00117"></a>00117   <span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; temps_sauv=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPb__MED.html" title="Classe Pb_MED Classe pour postraiter relire des fichiers med et les postraiter.">Pb_MED</a>,inter.<a class="code" href="classInterprete__bloc.html#ae0b05c3b185638c72c0521be856f1d4f" title="cherche l&#39;objet demande dans l&#39;Interprete_bloc courant (Interprete_bloc::interprete_courant()) et dan...">objet_global</a>(<span class="stringliteral">&quot;pbMED_0&quot;</span>)).temps_sauv();
<a name="l00118"></a>00118   <span class="keywordtype">int</span> nbpasdetemps=temps_sauv.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00119"></a>00119   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;nbpasdetemps &quot;</span>&lt;&lt;nbpasdetemps&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00120"></a>00120   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbpasdetemps; i++)
<a name="l00121"></a>00121     {
<a name="l00122"></a>00122 
<a name="l00123"></a>00123       <a class="code" href="classProbleme__Couple.html#a4df650034cd67564319dbcc20646e129" title="Renvoie le schema en temps associe aux problemes couples. (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#acc7bc155d31abe8b073e931f43bbc399" title="Mise a jour du temps courant (t+=dt) et du nombre de pas de temps effectue (nb_pas_dt_++).">mettre_a_jour</a>();
<a name="l00124"></a>00124       <a class="code" href="classProbleme__Couple.html#a4df650034cd67564319dbcc20646e129" title="Renvoie le schema en temps associe aux problemes couples. (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#adcbfea514c4f5d155c8208084d3ffc88" title="Change le temps courant.">changer_temps_courant</a>(temps_sauv[i]);
<a name="l00125"></a>00125       <a class="code" href="classCouplage__U.html#afd8f42477740b239dc8149b72426aad1" title="Demande au probleme de postraiter ses champs, sondes,... Dans Probleme_U::run(), postraiter() est app...">postraiter</a>();
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00129"></a>00129   <span class="keywordflow">if</span> (nbpasdetemps==1)
<a name="l00130"></a>00130     {
<a name="l00131"></a>00131 <span class="comment">// pour eviter bug meshtv</span>
<a name="l00132"></a>00132 <span class="comment">// postraiter();</span>
<a name="l00133"></a>00133     }
<a name="l00134"></a>00134   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classCouplage__U.html#abb5aa9654efade53ade07f8181f8cf8b" title="Number of problems.">nb_problemes</a>(); i++)
<a name="l00135"></a>00135     <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>,<a class="code" href="classCouplage__U.html#af963c77dd8af104e2005f0b2272e5325" title="Access by index (const)">probleme</a>(i)).finir();
<a name="l00136"></a>00136   <span class="keyword">delete</span> [] listob;
<a name="l00137"></a>00137   <span class="keywordflow">return</span> is;
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="comment">// Precondition:</span>
<a name="l00141"></a>00141 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00142"></a>00142 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00143"></a>00143 <span class="comment">// Valeurs par defaut:</span>
<a name="l00144"></a>00144 <span class="comment">// Contraintes:</span>
<a name="l00145"></a>00145 <span class="comment">// Acces: entree/sortie</span>
<a name="l00146"></a>00146 <span class="comment">// Exception:</span>
<a name="l00147"></a>00147 <span class="comment">// Effets de bord:</span>
<a name="l00148"></a>00148 <span class="comment">// Postcondition:</span>
<a name="l00149"></a>00149 <span class="comment">//</span><span class="comment"></span>
<a name="l00150"></a>00150 <span class="comment">//! Simple appel a: Probleme_base::readOn(Entree\&amp;)</span>
<a name="l00151"></a>00151 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00152"></a>00152 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00153"></a>00153 <span class="comment">Contraintes: */</span>
<a name="l00154"></a><a class="code" href="classPb__MED.html#adff4a99d8ec51c0c4c002311044e3888">00154</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classPb__MED.html#adff4a99d8ec51c0c4c002311044e3888" title="Simple appel a: Probleme_base::readOn(Entree&amp;)">Pb_MED::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is )
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156   <a class="code" href="classPb__MED.html#ad10e28007a83e2d57e333f0664aa8112">dis_bidon</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;VF_inst&quot;</span>);
<a name="l00157"></a>00157   <a class="code" href="classProbleme__base.html#af670cc3704e9dcaf9a9ce1520cb440fe">la_discretisation</a>=<a class="code" href="classPb__MED.html#ad10e28007a83e2d57e333f0664aa8112">dis_bidon</a>.<a class="code" href="classDeriv__Discretisation__base.html#add1c53a16ea36ea25b39439bdd6c78bd">valeur</a>();
<a name="l00158"></a>00158   is &gt;&gt; <a class="code" href="classPb__MED.html#ab6f12a35a2671cdde24d9362d5472205">nom_fic</a>;
<a name="l00159"></a>00159   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom;
<a name="l00160"></a>00160   is &gt;&gt; nom_dom;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="comment">// on retire _0000 si il existe et on cree le bon fichier</span>
<a name="l00163"></a>00163   <a class="code" href="LireMED_8h.html#a2dec7dece3c136e1db798e80268710d0">traite_nom_fichier_med</a>(nom_fic);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165   <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">Interprete::objet</a>(nom_dom));
<a name="l00166"></a>00166   <a class="code" href="classProbleme__base.html#a2b2cf5efc1ede3bbd2f978b8921d0f70" title="Associe un domaine au probleme. Prend un_domaine comme support. apelle Domaine_dis::associer_dom(cons...">associer_domaine</a>(dom);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="comment">// Read domain in MED file:</span>
<a name="l00169"></a>00169   <a class="code" href="classLireMED.html">LireMED</a> lire;
<a name="l00170"></a>00170   lire.<a class="code" href="classLireMED.html#afc44546342eec9ef106d45050f9ceb92">lire_geom</a>(nom_fic, dom, nom_dom, nom_dom);
<a name="l00171"></a>00171   dom.<a class="code" href="classDomaine.html#a0d407f1671c26ed0f3d3d331135a77e2" title="Reordonne les mailles du domaine suivant les conventions de Trio-U.">reordonner</a>();
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>.<a class="code" href="classDomaine__dis.html#add03fcde5334b832f83d7aec6425fa4a" title="Associe un Domaine (non discretise) a l&#39;objet. Dimensionne le tableau des zones discretisees associee...">associer_domaine</a>(dom);
<a name="l00174"></a>00174   <a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>.<a class="code" href="classDomaine__dis.html#a43cf38485d8946f80e0e4703522371ad" title="Discretise le domaine. On type et on discretise chaque zone discretisee du domaine discretise grace a...">discretiser</a>(<span class="stringliteral">&quot;NO_FACE_Zone_VF_inst&quot;</span>);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Reading the name of existing fields in &quot;</span>&lt;&lt;nom_fic&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00177"></a>00177 <span class="preprocessor">#ifdef MED_</span>
<a name="l00178"></a>00178 <span class="preprocessor"></span>  <a class="code" href="LireMED_8h.html#a7471df37f7a4b6986205165c043c564e">medinfochamp_existe</a>(nom_fic, <a class="code" href="classPb__MED.html#a97e9d8073c30f678989970c691942c61">nomschampmed</a>, <a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>(), <a class="code" href="classPb__MED.html#a0b00fc1a7128abcfe1934b063e82c1a9">temps_sauv_</a>);
<a name="l00179"></a>00179 <span class="preprocessor">#else</span>
<a name="l00180"></a>00180 <span class="preprocessor"></span>  <a class="code" href="LireMED_8h.html#a4321f757cc3cf10b49c4045de68adaed">med_non_installe</a>();
<a name="l00181"></a>00181 <span class="preprocessor">#endif</span>
<a name="l00182"></a>00182 <span class="preprocessor"></span>  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;temps_sauv &quot;</span>&lt;&lt;<a class="code" href="classPb__MED.html#a0b00fc1a7128abcfe1934b063e82c1a9">temps_sauv_</a>&lt;&lt;finl;
<a name="l00183"></a>00183   <a class="code" href="classPb__MED.html#adff4a99d8ec51c0c4c002311044e3888" title="Simple appel a: Probleme_base::readOn(Entree&amp;)">Probleme_base::readOn</a>(is);
<a name="l00184"></a>00184   <span class="keywordflow">return</span> is;
<a name="l00185"></a>00185 }
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="comment">// Precondition:</span>
<a name="l00189"></a>00189 <span class="comment">// Parametre:</span>
<a name="l00190"></a>00190 <span class="comment">// Signification:</span>
<a name="l00191"></a>00191 <span class="comment">// Valeurs par defaut:</span>
<a name="l00192"></a>00192 <span class="comment">// Contraintes:</span>
<a name="l00193"></a>00193 <span class="comment">// Acces:</span>
<a name="l00194"></a>00194 <span class="comment">// Exception:</span>
<a name="l00195"></a>00195 <span class="comment">// Effets de bord:</span>
<a name="l00196"></a>00196 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00197"></a>00197 <span class="comment">//</span>
<a name="l00198"></a>00198 <span class="comment">//</span><span class="comment"></span>
<a name="l00199"></a>00199 <span class="comment">//! Renvoie le nombre d&#39;equations du probleme.&lt;br&gt;Toujours egal a 1 pour un probleme de conduction standart.</span>
<a name="l00200"></a>00200 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00201"></a>00201 <span class="comment">Signification: le nombre d&#39;equations du probleme&lt;br&gt;</span>
<a name="l00202"></a>00202 <span class="comment">Contraintes: toujours egal a 1 */</span>
<a name="l00203"></a><a class="code" href="classPb__MED.html#ae67ca57023b3f4167f95318eb5709cd8">00203</a> <span class="keywordtype">int</span> <a class="code" href="classPb__MED.html#ae67ca57023b3f4167f95318eb5709cd8" title="Renvoie le nombre d&#39;equations du probleme. Toujours egal a 1 pour un probleme de conduction standart...">Pb_MED::nombre_d_equations</a>()<span class="keyword"> const</span>
<a name="l00204"></a>00204 <span class="keyword"></span>{
<a name="l00205"></a>00205   <span class="keywordflow">return</span> 0;
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">// Precondition:</span>
<a name="l00209"></a>00209 <span class="comment">// Parametre: int i</span>
<a name="l00210"></a>00210 <span class="comment">// Signification: l&#39;index de l&#39;equation a renvoyer</span>
<a name="l00211"></a>00211 <span class="comment">// Valeurs par defaut:</span>
<a name="l00212"></a>00212 <span class="comment">// Contraintes: i doit etre egal a zero</span>
<a name="l00213"></a>00213 <span class="comment">// Acces:</span>
<a name="l00214"></a>00214 <span class="comment">// Exception:</span>
<a name="l00215"></a>00215 <span class="comment">// Effets de bord:</span>
<a name="l00216"></a>00216 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00217"></a>00217 <span class="comment">//</span>
<a name="l00218"></a>00218 <span class="comment">//</span>
<a name="l00219"></a>00219 <span class="comment">//</span>
<a name="l00220"></a>00220 <span class="comment">//</span>
<a name="l00221"></a>00221 <span class="comment">//</span><span class="comment"></span>
<a name="l00222"></a>00222 <span class="comment">//! Renvoie l&#39;equation de type MED&lt;br&gt;si i = 0,&lt;br&gt;Provoque une erreur sinon car le probleme&lt;br&gt;n&#39;a qu&#39;une seule equation.&lt;br&gt;(version const)</span>
<a name="l00223"></a>00223 <span class="comment"></span><span class="comment">/** \return Equation_base\&amp;&lt;br&gt;</span>
<a name="l00224"></a>00224 <span class="comment">Signification: l&#39;equation de type MED&lt;br&gt;</span>
<a name="l00225"></a>00225 <span class="comment">Contraintes: reference constante */</span>
<a name="l00226"></a><a class="code" href="classPb__MED.html#a494054b7761e5eda3bba1b12b31b48c7">00226</a> <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; <a class="code" href="classPb__MED.html#a494054b7761e5eda3bba1b12b31b48c7" title="Renvoie l&#39;equation de type MED si i = 0, Provoque une erreur sinon car le probleme n&#39;a qu&#39;une seule e...">Pb_MED::equation</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00227"></a>00227 <span class="keyword"></span>{
<a name="l00228"></a>00228   assert(0);
<a name="l00229"></a>00229   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00230"></a>00230   assert (i==0);
<a name="l00231"></a>00231 <span class="comment">// pour les compilos</span>
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   <span class="keywordflow">return</span> <a class="code" href="classPb__MED.html#a494054b7761e5eda3bba1b12b31b48c7" title="Renvoie l&#39;equation de type MED si i = 0, Provoque une erreur sinon car le probleme n&#39;a qu&#39;une seule e...">Probleme_base::equation</a>(<span class="stringliteral">&quot;bidon&quot;</span>);
<a name="l00234"></a>00234 }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236 <span class="comment">// Precondition:</span>
<a name="l00237"></a>00237 <span class="comment">// Parametre: int i</span>
<a name="l00238"></a>00238 <span class="comment">// Signification: l&#39;index de l&#39;equation a renvoyer</span>
<a name="l00239"></a>00239 <span class="comment">// Valeurs par defaut:</span>
<a name="l00240"></a>00240 <span class="comment">// Contraintes: i doit etre egal a zero</span>
<a name="l00241"></a>00241 <span class="comment">// Acces:</span>
<a name="l00242"></a>00242 <span class="comment">// Exception:</span>
<a name="l00243"></a>00243 <span class="comment">// Effets de bord:</span>
<a name="l00244"></a>00244 <span class="comment">// Postcondition:</span>
<a name="l00245"></a>00245 <span class="comment">//</span>
<a name="l00246"></a>00246 <span class="comment">//</span>
<a name="l00247"></a>00247 <span class="comment">//</span>
<a name="l00248"></a>00248 <span class="comment">//</span><span class="comment"></span>
<a name="l00249"></a>00249 <span class="comment">//! Renvoie l&#39;equation de type MED&lt;br&gt;si i = 0,&lt;br&gt;Provoque une erreur sinon car le probleme&lt;br&gt;n&#39;a qu&#39;une seule equation.</span>
<a name="l00250"></a>00250 <span class="comment"></span><span class="comment">/** \return Equation_base\&amp;&lt;br&gt;</span>
<a name="l00251"></a>00251 <span class="comment">Signification: l&#39;equation de type MED&lt;br&gt;</span>
<a name="l00252"></a>00252 <span class="comment">Contraintes: */</span>
<a name="l00253"></a><a class="code" href="classPb__MED.html#a21beee0a5fafee41cb1e8ea764a68d81">00253</a> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; <a class="code" href="classPb__MED.html#a494054b7761e5eda3bba1b12b31b48c7" title="Renvoie l&#39;equation de type MED si i = 0, Provoque une erreur sinon car le probleme n&#39;a qu&#39;une seule e...">Pb_MED::equation</a>(<span class="keywordtype">int</span> i)
<a name="l00254"></a>00254 {
<a name="l00255"></a>00255   assert(0);
<a name="l00256"></a>00256   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00257"></a>00257   assert (i==0);
<a name="l00258"></a>00258 <span class="comment">// pour les compilos</span>
<a name="l00259"></a>00259   <span class="keywordflow">return</span> <a class="code" href="classPb__MED.html#a494054b7761e5eda3bba1b12b31b48c7" title="Renvoie l&#39;equation de type MED si i = 0, Provoque une erreur sinon car le probleme n&#39;a qu&#39;une seule e...">Probleme_base::equation</a>(<span class="stringliteral">&quot;bidon&quot;</span>) ;
<a name="l00260"></a>00260 }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 
<a name="l00264"></a><a class="code" href="classPb__MED.html#ae500cb2dc39c3aa0daa9b63de7028d32">00264</a> <span class="keywordtype">int</span> <a class="code" href="classPb__MED.html#ae500cb2dc39c3aa0daa9b63de7028d32">Pb_MED::comprend_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; mot)<span class="keyword"> const</span>
<a name="l00265"></a>00265 <span class="keyword"></span>{
<a name="l00266"></a>00266 <span class="comment">// Cerr&lt;&lt;&quot; Pb_MED::comprend_champ&quot;&lt;&lt;mot &lt;&lt;&quot; &quot; &lt;&lt;nomschampmed&lt;&lt;finl;</span>
<a name="l00267"></a>00267   <span class="keywordtype">int</span> nbchampmed=<a class="code" href="classPb__MED.html#a97e9d8073c30f678989970c691942c61">nomschampmed</a>.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>();
<a name="l00268"></a>00268   <span class="keywordtype">int</span> ind=0;
<a name="l00269"></a>00269   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch=0; ch&lt;nbchampmed; ch++)
<a name="l00270"></a>00270     {
<a name="l00271"></a>00271       <span class="keywordflow">if</span> (mot==<a class="code" href="classPb__MED.html#a97e9d8073c30f678989970c691942c61">nomschampmed</a>[ch]) ind= 1;
<a name="l00272"></a>00272     }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <span class="keywordflow">if</span> (ind == 1)
<a name="l00275"></a>00275     <span class="keywordflow">return</span> ind;
<a name="l00276"></a>00276 
<a name="l00277"></a>00277   <span class="keywordflow">if</span> (ind == 0)
<a name="l00278"></a>00278     {
<a name="l00279"></a>00279       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error when reading the data for post-processing&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00280"></a>00280       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The field &quot;</span> &lt;&lt; mot &lt;&lt; <span class="stringliteral">&quot; is not recognized by the problem&quot;</span> &lt;&lt; finl;
<a name="l00281"></a>00281       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;recognized words are &quot;</span>&lt;&lt;<a class="code" href="classPb__MED.html#a97e9d8073c30f678989970c691942c61">nomschampmed</a>&lt;&lt;finl;
<a name="l00282"></a>00282       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00283"></a>00283     }
<a name="l00284"></a>00284   <span class="keywordflow">return</span> -1;
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 
<a name="l00287"></a><a class="code" href="classPb__MED.html#a3e0195a1e7708afa8fea3cb233d091ae">00287</a> <span class="keywordtype">void</span> <a class="code" href="classPb__MED.html#a3e0195a1e7708afa8fea3cb233d091ae">Pb_MED::creer_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; motlu)
<a name="l00288"></a>00288 {
<a name="l00289"></a>00289   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Pb_MED::creer_champ &quot;</span>&lt;&lt; motlu&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00290"></a>00290   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> liste_noms;
<a name="l00291"></a>00291   <a class="code" href="classPb__MED.html#aaab20b69fabc10effcadfcc146358d11">get_noms_champs_postraitables</a>(liste_noms);
<a name="l00292"></a>00292   <a class="code" href="classChamp__Fonc.html" title="classe Champ_Fonc Classe generique de la hierarchie des champs fontions du temps, un objet Champ_Fonc...">Champ_Fonc</a> toto; <span class="comment">//!&lt; on ajoute toto et on le type apres pour eviter des copies qui ne marchent pas ...</span>
<a name="l00293"></a>00293 <span class="comment"></span>  <a class="code" href="classChamp__Fonc.html" title="classe Champ_Fonc Classe generique de la hierarchie des champs fontions du temps, un objet Champ_Fonc...">Champ_Fonc</a>&amp; le_ch_fonc= <a class="code" href="classPb__MED.html#a4cdd4998f1b0c98c3f410b253657866d">champs_fonc_post</a>.<a class="code" href="classList__Champ__Fonc.html#a8e46be865d0f5a4106a0bea88fbbe727">add</a>(toto);
<a name="l00294"></a>00294   le_ch_fonc.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;Champ_Fonc_MED&quot;</span>);
<a name="l00295"></a>00295   <span class="keywordtype">int</span> nbchampmed=<a class="code" href="classPb__MED.html#a97e9d8073c30f678989970c691942c61">nomschampmed</a>.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>();
<a name="l00296"></a>00296 
<a name="l00297"></a>00297   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> localisation;
<a name="l00298"></a>00298   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> es;
<a name="l00299"></a>00299   le_ch_fonc.<a class="code" href="classDeriv__Champ__Fonc__base.html#a6c7253d2225e858b40c9251d97d57f72">valeur</a>().<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(motlu);
<a name="l00300"></a>00300 
<a name="l00301"></a>00301   <span class="keywordtype">int</span> flag=0;
<a name="l00302"></a>00302   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> <a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>(<span class="stringliteral">&quot;_&quot;</span>);
<a name="l00303"></a>00303   test+=<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00304"></a>00304 
<a name="l00305"></a>00305   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch=0; ch&lt;nbchampmed; ch++)
<a name="l00306"></a>00306     {
<a name="l00307"></a>00307       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> pp(<a class="code" href="classPb__MED.html#a97e9d8073c30f678989970c691942c61">nomschampmed</a>[ch]);
<a name="l00308"></a>00308       pp.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(test);
<a name="l00309"></a>00309 <span class="comment">// Cerr&lt;&lt;test&lt;&lt;&quot; ICI &quot;&lt;&lt;pp&lt;&lt;&quot; &quot;&lt;&lt;motlu&lt;&lt;finl;</span>
<a name="l00310"></a>00310       <span class="keywordflow">if</span> (motlu==pp)
<a name="l00311"></a>00311         {
<a name="l00312"></a>00312           es=pp;
<a name="l00313"></a>00313           es.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_SOM&quot;</span>);
<a name="l00314"></a>00314           <span class="keywordflow">if</span> (es!=pp)
<a name="l00315"></a>00315             localisation=<span class="stringliteral">&quot;som&quot;</span>;
<a name="l00316"></a>00316           <span class="keywordflow">else</span>
<a name="l00317"></a>00317             {
<a name="l00318"></a>00318               es.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_ELEM&quot;</span>);
<a name="l00319"></a>00319               <span class="keywordflow">if</span> (es!=pp)
<a name="l00320"></a>00320                 localisation=<span class="stringliteral">&quot;elem&quot;</span>;
<a name="l00321"></a>00321             }
<a name="l00322"></a>00322           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;One wishes to read the field &quot;</span>&lt;&lt;es&lt;&lt;<span class="stringliteral">&quot; choice &quot;</span>&lt;&lt;localisation&lt;&lt;<span class="stringliteral">&quot; readen word in the data set &quot;</span>&lt;&lt;motlu&lt;&lt;finl;
<a name="l00323"></a>00323           le_ch_fonc.<a class="code" href="classDeriv__Champ__Fonc__base.html#a6c7253d2225e858b40c9251d97d57f72">valeur</a>().<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(es);
<a name="l00324"></a>00324           flag=1;
<a name="l00325"></a>00325         }
<a name="l00326"></a>00326     }
<a name="l00327"></a>00327   <a class="code" href="classChamp__Fonc__MED.html" title="classe Champ_Fonc_MED">Champ_Fonc_MED</a>&amp; chmed=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Fonc__MED.html" title="classe Champ_Fonc_MED">Champ_Fonc_MED</a>,le_ch_fonc.<a class="code" href="classDeriv__Champ__Fonc__base.html#a6c7253d2225e858b40c9251d97d57f72">valeur</a>());
<a name="l00328"></a>00328   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom_med = <a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>();
<a name="l00329"></a>00329   chmed.<a class="code" href="classChamp__Fonc__MED.html#a8e4e0c74c245bdeca1e27325fcbc7b17">creer</a>(<a class="code" href="classPb__MED.html#ab6f12a35a2671cdde24d9362d5472205">nom_fic</a>,dom_med,localisation, <a class="code" href="classPb__MED.html#a0b00fc1a7128abcfe1934b063e82c1a9">temps_sauv_</a>);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331   <span class="keywordflow">if</span> (flag)
<a name="l00332"></a>00332     {
<a name="l00333"></a>00333       chmed.<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(le_ch_fonc.<a class="code" href="classDeriv__Champ__Fonc__base.html#a6c7253d2225e858b40c9251d97d57f72">valeur</a>().<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>());
<a name="l00334"></a>00334       chmed.<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__base.html#ad4ce4adc1125f3ff1fe87f405129984a" title="cette methode va fixer les unites et le nom des compos elle n&#39;est pas const en realite !!!...">corriger_unite_nom_compo</a>();
<a name="l00335"></a>00335       chmed.<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(motlu);
<a name="l00336"></a>00336     }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338   le_ch_fonc.<a class="code" href="classDeriv__Champ__Fonc__base.html#a6c7253d2225e858b40c9251d97d57f72">valeur</a>().<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(motlu);
<a name="l00339"></a>00339   chmed.<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(motlu);
<a name="l00340"></a>00340   <span class="keywordflow">if</span> (!le_ch_fonc.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00341"></a>00341     {
<a name="l00342"></a>00342       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error when reading data for post-processing&quot;</span> &lt;&lt; finl;
<a name="l00343"></a>00343       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The creation of the field &quot;</span> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot; has failed.&quot;</span> &lt;&lt; finl;
<a name="l00344"></a>00344       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346 }
<a name="l00347"></a>00347 
<a name="l00348"></a><a class="code" href="classPb__MED.html#a3b29f8f37996d158218e906dd2d9ee65">00348</a> <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classPb__MED.html#a3b29f8f37996d158218e906dd2d9ee65">Pb_MED::get_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; un_nom)<span class="keyword"> const</span>
<a name="l00349"></a>00349 <span class="keyword"></span>{
<a name="l00350"></a>00350   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) ref_champ;
<a name="l00351"></a>00351 
<a name="l00352"></a>00352   <span class="keywordtype">double</span> temps_courant = <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>();
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <a class="code" href="List_8h.html#add189d7375e577842ac891b09afc6d4b">CONST_LIST_CURSEUR</a>(<a class="code" href="classChamp__Fonc.html" title="classe Champ_Fonc Classe generique de la hierarchie des champs fontions du temps, un objet Champ_Fonc...">Champ_Fonc</a>) curseur = <a class="code" href="classPb__MED.html#a4cdd4998f1b0c98c3f410b253657866d">champs_fonc_post</a> ;
<a name="l00355"></a>00355   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> nom_champ;
<a name="l00356"></a>00356   <span class="keywordtype">int</span> ok_post=1;
<a name="l00357"></a>00357   <span class="keywordflow">while</span>(curseur)
<a name="l00358"></a>00358     {
<a name="l00359"></a>00359       <a class="code" href="classChamp__Fonc__MED.html" title="classe Champ_Fonc_MED">Champ_Fonc_MED</a>&amp; ch_med = <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classChamp__Fonc__MED.html" title="classe Champ_Fonc_MED">Champ_Fonc_MED</a>,curseur.valeur().valeur());
<a name="l00360"></a>00360       nom_champ = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(curseur.valeur().le_nom());
<a name="l00361"></a>00361 <span class="comment">// nom_champ=ch_med.le_champ().le_nom();</span>
<a name="l00362"></a>00362 <span class="comment">// Cerr&lt;&lt;(int)__LINE__&lt;&lt;nom_champ&lt;&lt;finl;</span>
<a name="l00363"></a>00363 <span class="comment">// nom_champ = Motcle(curseur.valeur().valeur().le_nom());</span>
<a name="l00364"></a>00364       <span class="keywordflow">if</span> ((nom_champ==un_nom) &amp;&amp; (ok_post==1))
<a name="l00365"></a>00365         {
<a name="l00366"></a>00366           ref_champ = curseur.valeur();
<a name="l00367"></a>00367           <span class="keywordflow">if</span> (ch_med.<a class="code" href="classChamp__base.html#ada7350aecb7b6f20dcaee2d1106ab1a0" title="Renvoie le temps du champ.">temps</a>()!=temps_courant)
<a name="l00368"></a>00368             ch_med.<a class="code" href="classChamp__Fonc__MED.html#aa82b8aa65d1b575e7059d097d5664492" title="Mise a jour en temps du champ.">mettre_a_jour</a>(temps_courant);
<a name="l00369"></a>00369           <span class="keywordflow">return</span> ch_med.<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>();
<a name="l00370"></a>00370 <span class="comment">// return ref_champ.valeur();</span>
<a name="l00371"></a>00371         }
<a name="l00372"></a>00372       <span class="keywordflow">else</span>
<a name="l00373"></a>00373         {
<a name="l00374"></a>00374           <span class="keywordtype">int</span> nb_composantes = curseur.valeur().valeur().<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00375"></a>00375           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_composantes; i++)
<a name="l00376"></a>00376             {
<a name="l00377"></a>00377               nom_champ = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(curseur.valeur().valeur().nom_compo(i));
<a name="l00378"></a>00378               <span class="keywordflow">if</span> ((nom_champ==un_nom) &amp;&amp; (ok_post==1))
<a name="l00379"></a>00379                 {
<a name="l00380"></a>00380                   ref_champ = curseur.valeur();
<a name="l00381"></a>00381                   <span class="keywordflow">if</span> (ch_med.<a class="code" href="classChamp__base.html#ada7350aecb7b6f20dcaee2d1106ab1a0" title="Renvoie le temps du champ.">temps</a>()!=temps_courant)
<a name="l00382"></a>00382                     ch_med.<a class="code" href="classChamp__Fonc__MED.html#aa82b8aa65d1b575e7059d097d5664492" title="Mise a jour en temps du champ.">mettre_a_jour</a>(temps_courant);
<a name="l00383"></a>00383 <span class="comment">// return ref_champ.valeur();</span>
<a name="l00384"></a>00384                   <span class="keywordflow">return</span> ch_med.<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>();
<a name="l00385"></a>00385                 }
<a name="l00386"></a>00386             }
<a name="l00387"></a>00387         }
<a name="l00388"></a>00388       ++curseur;
<a name="l00389"></a>00389     }
<a name="l00390"></a>00390 
<a name="l00391"></a>00391   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The indicated name &quot;</span>&lt;&lt;un_nom&lt;&lt;<span class="stringliteral">&quot; do not correspond to a field understood by the problem&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00392"></a>00392   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Check the field name to indicate in the post-processing set&quot;</span>&lt;&lt;finl;
<a name="l00393"></a>00393   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="comment">// Pour compilation</span>
<a name="l00396"></a>00396   <span class="keywordflow">return</span> ref_champ;
<a name="l00397"></a>00397 }
<a name="l00398"></a>00398 
<a name="l00399"></a><a class="code" href="classPb__MED.html#aaab20b69fabc10effcadfcc146358d11">00399</a> <span class="keywordtype">void</span> <a class="code" href="classPb__MED.html#aaab20b69fabc10effcadfcc146358d11">Pb_MED::get_noms_champs_postraitables</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms,<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35f">Option</a> opt)<span class="keyword"> const</span>
<a name="l00400"></a>00400 <span class="keyword"></span>{
<a name="l00401"></a>00401 <span class="comment">// La methode surcharge celle de Probleme_base</span>
<a name="l00402"></a>00402   <span class="keywordflow">if</span> (opt==<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35fab6018339139b51a498dc44bd760766fc">DESCRIPTION</a>)
<a name="l00403"></a>00403     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Pb_MED : : &quot;</span>&lt;&lt;<a class="code" href="classPb__MED.html#a97e9d8073c30f678989970c691942c61">nomschampmed</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00404"></a>00404   <span class="keywordflow">else</span>
<a name="l00405"></a>00405     noms.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(<a class="code" href="classPb__MED.html#a97e9d8073c30f678989970c691942c61">nomschampmed</a>);
<a name="l00406"></a>00406 }
<a name="l00407"></a>00407 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:24 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
