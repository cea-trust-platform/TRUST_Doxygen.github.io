<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/VEF/Cond_Lim/Echange_contact_Correlation_VEF.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/VEF/Cond_Lim/Echange_contact_Correlation_VEF.cpp</div>  </div>
</div>
<div class="contents">
<a href="Echange__contact__Correlation__VEF_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Echange_contact_Correlation_VEF.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/VEF/Cond_Lim</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/30</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Echange__contact__Correlation__VEF_8h.html">Echange_contact_Correlation_VEF.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Champ__front__calc_8h.html">Champ_front_calc.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VEF_8h.html">Zone_VEF.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Milieu__base_8h.html">Milieu_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Champ__front__fonc_8h.html">Champ_front_fonc.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Uniforme_8h.html">Champ_Uniforme.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Solv__TDMA_8h.html">Solv_TDMA.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Comm_8h.html">Schema_Comm.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="EFichier_8h.html">EFichier.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="SFichier_8h.html">SFichier.h</a>&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="Echange__contact__Correlation__VEF_8cpp.html#a80f0c0abcf62afe98040e3d70775aace">00037</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html">Echange_contact_Correlation_VEF</a>,<span class="stringliteral">&quot;Paroi_Echange_contact_Correlation_VEF&quot;</span>,<a class="code" href="classTemperature__imposee__paroi.html" title="classe Temperature_imposee_paroi Impose la temperature de la paroi dans une equation de type Convecti...">Temperature_imposee_paroi</a>);
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#a82ebf81a0fea49a1b5be874e21fee7cf">00042</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classEchange__contact__Correlation__VEF.html#a82ebf81a0fea49a1b5be874e21fee7cf" title="Ecrit le type de l&#39;objet sur un flot de sortie.">Echange_contact_Correlation_VEF::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s )<span class="keyword"> const</span>
<a name="l00043"></a>00043 <span class="keyword"></span>{
<a name="l00044"></a>00044   <span class="keywordflow">return</span> s &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#aa96bba2328984d7b0c7e3b303a50d9dd">00047</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classEchange__contact__Correlation__VEF.html#aa96bba2328984d7b0c7e3b303a50d9dd" title="Simple appel a: Dirichlet::readOn(Entree&amp; )">Echange_contact_Correlation_VEF::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is )
<a name="l00048"></a>00048 {
<a name="l00049"></a>00049 <span class="comment">// Motcles les_mots(16);</span>
<a name="l00050"></a>00050 <span class="comment">// Rajout Cyril MALOD (14/09/2006)</span>
<a name="l00051"></a>00051   <a class="code" href="classEchange__contact__Correlation__VEF.html#ad8947cf4bc6e2d107405ca81374851c7">Reprise_temperature</a>=0;
<a name="l00052"></a>00052   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_mots(17);
<a name="l00053"></a>00053   {
<a name="l00054"></a>00054     les_mots[0] = <span class="stringliteral">&quot;dir&quot;</span>;
<a name="l00055"></a>00055     les_mots[1] = <span class="stringliteral">&quot;Tinf&quot;</span>;
<a name="l00056"></a>00056     les_mots[2] = <span class="stringliteral">&quot;Tsup&quot;</span>;
<a name="l00057"></a>00057     les_mots[3] = <span class="stringliteral">&quot;lambda&quot;</span>;
<a name="l00058"></a>00058     les_mots[4] = <span class="stringliteral">&quot;rho&quot;</span>;
<a name="l00059"></a>00059     les_mots[5] = <span class="stringliteral">&quot;Cp&quot;</span>;
<a name="l00060"></a>00060     les_mots[6] = <span class="stringliteral">&quot;dt_impr&quot;</span>;
<a name="l00061"></a>00061     les_mots[7] = <span class="stringliteral">&quot;mu&quot;</span>;
<a name="l00062"></a>00062     les_mots[8] = <span class="stringliteral">&quot;debit&quot;</span>;
<a name="l00063"></a>00063     les_mots[9] = <span class="stringliteral">&quot;Dh&quot;</span>;
<a name="l00064"></a>00064     les_mots[10] = <span class="stringliteral">&quot;N&quot;</span>;
<a name="l00065"></a>00065     les_mots[11] = <span class="stringliteral">&quot;surface&quot;</span>;
<a name="l00066"></a>00066     les_mots[12] = <span class="stringliteral">&quot;Nu&quot;</span>;
<a name="l00067"></a>00067     les_mots[13] = <span class="stringliteral">&quot;xinf&quot;</span>;
<a name="l00068"></a>00068     les_mots[14] = <span class="stringliteral">&quot;xsup&quot;</span>;
<a name="l00069"></a>00069 <span class="comment">// Le mot cle suivant n&#39;est pas encore commente car les hypotheses sur ce rayonnement sont restrictives</span>
<a name="l00070"></a>00070     les_mots[15] = <span class="stringliteral">&quot;emissivite_pour_rayonnement_entre_deux_plaques_quasi_infinies&quot;</span>;
<a name="l00071"></a>00071 <span class="comment">// Rajout Cyril MALOD (14/09/2006)</span>
<a name="l00072"></a>00072     les_mots[16] = <span class="stringliteral">&quot;Reprise_correlation&quot;</span>;
<a name="l00073"></a>00073   }
<a name="l00074"></a>00074 
<a name="l00075"></a>00075   <a class="code" href="classEchange__contact__Correlation__VEF.html#a19a42f29aac5ae0bf90e8efd51622e2d">dt_impr</a> = 1e10;
<a name="l00076"></a>00076   <a class="code" href="classEchange__contact__Correlation__VEF.html#ac3e3060e74b1e5fd02485f16ffe8bdc2">avec_rayo</a>=0;
<a name="l00077"></a>00077   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu, accolade_fermee=<span class="stringliteral">&quot;}&quot;</span>, accolade_ouverte=<span class="stringliteral">&quot;{&quot;</span>;
<a name="l00078"></a>00078   is &gt;&gt; motlu;
<a name="l00079"></a>00079   <span class="keywordflow">if</span>(motlu!=accolade_ouverte)
<a name="l00080"></a>00080     {
<a name="l00081"></a>00081       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait une { a la lecture d&#39;une &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00082"></a>00082       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;et non : &quot;</span> &lt;&lt; motlu &lt;&lt; finl;
<a name="l00083"></a>00083       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00084"></a>00084     }
<a name="l00085"></a>00085   is &gt;&gt; motlu;
<a name="l00086"></a>00086   <span class="keywordflow">while</span> (motlu != accolade_fermee)
<a name="l00087"></a>00087     {
<a name="l00088"></a>00088 
<a name="l00089"></a>00089       <span class="keywordtype">int</span> rang=les_mots.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(motlu);
<a name="l00090"></a>00090       <span class="keywordflow">switch</span>(rang)
<a name="l00091"></a>00091         {
<a name="l00092"></a>00092         <span class="keywordflow">case</span> 0 :
<a name="l00093"></a>00093           {
<a name="l00094"></a>00094             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a310986810ee87c98ab329a6babc09035" title="Direction du cylindre.">dir</a>;
<a name="l00095"></a>00095             <span class="keywordflow">if</span> (dir&lt;0 ||dir&gt;2)
<a name="l00096"></a>00096               {
<a name="l00097"></a>00097                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;La direction doit etre 0, 1 ou 2 dans  &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00098"></a>00098                 <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00099"></a>00099               }
<a name="l00100"></a>00100             <span class="keywordflow">break</span>;
<a name="l00101"></a>00101           }
<a name="l00102"></a>00102         <span class="keywordflow">case</span> 1 :
<a name="l00103"></a>00103           {
<a name="l00104"></a>00104             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a8a569173e9f3d5fde683cbe82d760ff3">Tinf</a>;
<a name="l00105"></a>00105             <span class="keywordflow">break</span>;
<a name="l00106"></a>00106           }
<a name="l00107"></a>00107         <span class="keywordflow">case</span> 2 :
<a name="l00108"></a>00108           {
<a name="l00109"></a>00109             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a90ad35e91293fe87ed772ce45023b0fb" title="Temperature entree, sortie.">Tsup</a>;
<a name="l00110"></a>00110             <span class="keywordflow">break</span>;
<a name="l00111"></a>00111           }
<a name="l00112"></a>00112         <span class="keywordflow">case</span> 3 :
<a name="l00113"></a>00113           {
<a name="l00114"></a>00114             <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp;
<a name="l00115"></a>00115             is &gt;&gt; tmp;
<a name="l00116"></a>00116             <a class="code" href="classEchange__contact__Correlation__VEF.html#aed6d0de775952728a910df0757ab57b9">lambda_T</a>.<a class="code" href="classParser__U.html#a3ff44eabf641cbcea9ca59f84167e2c1">setNbVar</a>(1);
<a name="l00117"></a>00117             <a class="code" href="classEchange__contact__Correlation__VEF.html#aed6d0de775952728a910df0757ab57b9">lambda_T</a>.<a class="code" href="classParser__U.html#a25d581b85688da391aa64117abf0a073">setString</a>(tmp);
<a name="l00118"></a>00118             <a class="code" href="classEchange__contact__Correlation__VEF.html#aed6d0de775952728a910df0757ab57b9">lambda_T</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;T&quot;</span>);
<a name="l00119"></a>00119             <a class="code" href="classEchange__contact__Correlation__VEF.html#aed6d0de775952728a910df0757ab57b9">lambda_T</a>.<a class="code" href="classParser__U.html#a441c2fd29f5d4370c0c7b6a1cdfe56d5">parseString</a>();
<a name="l00120"></a>00120             <span class="keywordflow">break</span>;
<a name="l00121"></a>00121           }
<a name="l00122"></a>00122         <span class="keywordflow">case</span> 4 :
<a name="l00123"></a>00123           {
<a name="l00124"></a>00124             <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp;
<a name="l00125"></a>00125             is &gt;&gt; tmp;
<a name="l00126"></a>00126             <a class="code" href="classEchange__contact__Correlation__VEF.html#aabf87a66608c14cc79e0d6310c2e31a6">rho_T</a>.<a class="code" href="classParser__U.html#a3ff44eabf641cbcea9ca59f84167e2c1">setNbVar</a>(1);
<a name="l00127"></a>00127             <a class="code" href="classEchange__contact__Correlation__VEF.html#aabf87a66608c14cc79e0d6310c2e31a6">rho_T</a>.<a class="code" href="classParser__U.html#a25d581b85688da391aa64117abf0a073">setString</a>(tmp);
<a name="l00128"></a>00128             <a class="code" href="classEchange__contact__Correlation__VEF.html#aabf87a66608c14cc79e0d6310c2e31a6">rho_T</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;T&quot;</span>);
<a name="l00129"></a>00129             <a class="code" href="classEchange__contact__Correlation__VEF.html#aabf87a66608c14cc79e0d6310c2e31a6">rho_T</a>.<a class="code" href="classParser__U.html#a441c2fd29f5d4370c0c7b6a1cdfe56d5">parseString</a>();
<a name="l00130"></a>00130             <span class="keywordflow">break</span>;
<a name="l00131"></a>00131           }
<a name="l00132"></a>00132         <span class="keywordflow">case</span> 5 :
<a name="l00133"></a>00133           {
<a name="l00134"></a>00134             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a459669c83171a95871a4e390e1053d6b">Cp</a>;
<a name="l00135"></a>00135             <span class="keywordflow">break</span>;
<a name="l00136"></a>00136           }
<a name="l00137"></a>00137         <span class="keywordflow">case</span> 6 :
<a name="l00138"></a>00138           {
<a name="l00139"></a>00139             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a19a42f29aac5ae0bf90e8efd51622e2d">dt_impr</a>;
<a name="l00140"></a>00140             <span class="keywordflow">break</span>;
<a name="l00141"></a>00141           }
<a name="l00142"></a>00142         <span class="keywordflow">case</span> 7 :
<a name="l00143"></a>00143           {
<a name="l00144"></a>00144             <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp;
<a name="l00145"></a>00145             is &gt;&gt; tmp;
<a name="l00146"></a>00146             <a class="code" href="classEchange__contact__Correlation__VEF.html#a1259a39964adb6b24ba6995110cace4a">mu_T</a>.<a class="code" href="classParser__U.html#a3ff44eabf641cbcea9ca59f84167e2c1">setNbVar</a>(1);
<a name="l00147"></a>00147             <a class="code" href="classEchange__contact__Correlation__VEF.html#a1259a39964adb6b24ba6995110cace4a">mu_T</a>.<a class="code" href="classParser__U.html#a25d581b85688da391aa64117abf0a073">setString</a>(tmp);
<a name="l00148"></a>00148             <a class="code" href="classEchange__contact__Correlation__VEF.html#a1259a39964adb6b24ba6995110cace4a">mu_T</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;T&quot;</span>);
<a name="l00149"></a>00149             <a class="code" href="classEchange__contact__Correlation__VEF.html#a1259a39964adb6b24ba6995110cace4a">mu_T</a>.<a class="code" href="classParser__U.html#a441c2fd29f5d4370c0c7b6a1cdfe56d5">parseString</a>();
<a name="l00150"></a>00150             <span class="keywordflow">break</span>;
<a name="l00151"></a>00151           }
<a name="l00152"></a>00152         <span class="keywordflow">case</span> 8 :
<a name="l00153"></a>00153           {
<a name="l00154"></a>00154             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a69c6be3ce15f56e823bf29f2d19b2426">debit</a>;
<a name="l00155"></a>00155             <span class="keywordflow">break</span>;
<a name="l00156"></a>00156           }
<a name="l00157"></a>00157         <span class="keywordflow">case</span> 9 :
<a name="l00158"></a>00158           {
<a name="l00159"></a>00159             <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp;
<a name="l00160"></a>00160             is &gt;&gt; tmp;
<a name="l00161"></a>00161             <a class="code" href="classEchange__contact__Correlation__VEF.html#a32bc56e740cc90838752d39f6602465d">fct_Dh</a>.<a class="code" href="classParser__U.html#a3ff44eabf641cbcea9ca59f84167e2c1">setNbVar</a>(1);
<a name="l00162"></a>00162             <a class="code" href="classEchange__contact__Correlation__VEF.html#a32bc56e740cc90838752d39f6602465d">fct_Dh</a>.<a class="code" href="classParser__U.html#a25d581b85688da391aa64117abf0a073">setString</a>(tmp);
<a name="l00163"></a>00163             <a class="code" href="classEchange__contact__Correlation__VEF.html#a32bc56e740cc90838752d39f6602465d">fct_Dh</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;x&quot;</span>);
<a name="l00164"></a>00164             <a class="code" href="classEchange__contact__Correlation__VEF.html#a32bc56e740cc90838752d39f6602465d">fct_Dh</a>.<a class="code" href="classParser__U.html#a441c2fd29f5d4370c0c7b6a1cdfe56d5">parseString</a>();
<a name="l00165"></a>00165             <span class="keywordflow">break</span>;
<a name="l00166"></a>00166           }
<a name="l00167"></a>00167         <span class="keywordflow">case</span> 10 :
<a name="l00168"></a>00168           {
<a name="l00169"></a>00169             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>;
<a name="l00170"></a>00170             <span class="keywordflow">break</span>;
<a name="l00171"></a>00171           }
<a name="l00172"></a>00172         <span class="keywordflow">case</span> 11 :
<a name="l00173"></a>00173           {
<a name="l00174"></a>00174             <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp;
<a name="l00175"></a>00175             is &gt;&gt; tmp;
<a name="l00176"></a>00176             <a class="code" href="classEchange__contact__Correlation__VEF.html#a575db1d8e1498d34162495f106227139">fct_vol</a>.<a class="code" href="classParser__U.html#a3ff44eabf641cbcea9ca59f84167e2c1">setNbVar</a>(2);
<a name="l00177"></a>00177             <a class="code" href="classEchange__contact__Correlation__VEF.html#a575db1d8e1498d34162495f106227139">fct_vol</a>.<a class="code" href="classParser__U.html#a25d581b85688da391aa64117abf0a073">setString</a>(tmp);
<a name="l00178"></a>00178             <a class="code" href="classEchange__contact__Correlation__VEF.html#a575db1d8e1498d34162495f106227139">fct_vol</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;Dh&quot;</span>);
<a name="l00179"></a>00179             <a class="code" href="classEchange__contact__Correlation__VEF.html#a575db1d8e1498d34162495f106227139">fct_vol</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;x&quot;</span>);
<a name="l00180"></a>00180             <a class="code" href="classEchange__contact__Correlation__VEF.html#a575db1d8e1498d34162495f106227139">fct_vol</a>.<a class="code" href="classParser__U.html#a441c2fd29f5d4370c0c7b6a1cdfe56d5">parseString</a>();
<a name="l00181"></a>00181             <span class="keywordflow">break</span>;
<a name="l00182"></a>00182           }
<a name="l00183"></a>00183         <span class="keywordflow">case</span> 12 :
<a name="l00184"></a>00184           {
<a name="l00185"></a>00185             <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp;
<a name="l00186"></a>00186             is &gt;&gt; tmp;
<a name="l00187"></a>00187             <a class="code" href="classEchange__contact__Correlation__VEF.html#adbaf59b7c899b2f641112249da6eba2c">fct_Nu</a>.<a class="code" href="classParser__U.html#a3ff44eabf641cbcea9ca59f84167e2c1">setNbVar</a>(2);
<a name="l00188"></a>00188             <a class="code" href="classEchange__contact__Correlation__VEF.html#adbaf59b7c899b2f641112249da6eba2c">fct_Nu</a>.<a class="code" href="classParser__U.html#a25d581b85688da391aa64117abf0a073">setString</a>(tmp);
<a name="l00189"></a>00189             <a class="code" href="classEchange__contact__Correlation__VEF.html#adbaf59b7c899b2f641112249da6eba2c">fct_Nu</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;Re&quot;</span>);
<a name="l00190"></a>00190             <a class="code" href="classEchange__contact__Correlation__VEF.html#adbaf59b7c899b2f641112249da6eba2c">fct_Nu</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;Pr&quot;</span>);
<a name="l00191"></a>00191             <a class="code" href="classEchange__contact__Correlation__VEF.html#adbaf59b7c899b2f641112249da6eba2c">fct_Nu</a>.<a class="code" href="classParser__U.html#a441c2fd29f5d4370c0c7b6a1cdfe56d5">parseString</a>();
<a name="l00192"></a>00192             <span class="keywordflow">break</span>;
<a name="l00193"></a>00193           }
<a name="l00194"></a>00194         <span class="keywordflow">case</span> 13 :
<a name="l00195"></a>00195           {
<a name="l00196"></a>00196             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a328a7c8697bf09d766e2e0e0b8c15f11">xinf</a>;
<a name="l00197"></a>00197             <span class="keywordflow">break</span>;
<a name="l00198"></a>00198           }
<a name="l00199"></a>00199         <span class="keywordflow">case</span> 14 :
<a name="l00200"></a>00200           {
<a name="l00201"></a>00201             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#aff239ded5df7d5de83b0700c8cbf6dd3">xsup</a>;
<a name="l00202"></a>00202             <span class="keywordflow">break</span>;
<a name="l00203"></a>00203           }
<a name="l00204"></a>00204         <span class="keywordflow">case</span> 15 :
<a name="l00205"></a>00205           {
<a name="l00206"></a>00206             <a class="code" href="classEchange__contact__Correlation__VEF.html#ac3e3060e74b1e5fd02485f16ffe8bdc2">avec_rayo</a> = 1;
<a name="l00207"></a>00207             is &gt;&gt; <a class="code" href="classEchange__contact__Correlation__VEF.html#af2bbf5b56aa5d18608262d9e93cd9729">emissivite</a>;
<a name="l00208"></a>00208             <span class="keywordflow">break</span>;
<a name="l00209"></a>00209           }
<a name="l00210"></a>00210 <span class="comment">// Rajout Cyril MALOD (14/09/2006)</span>
<a name="l00211"></a>00211         <span class="keywordflow">case</span> 16 :
<a name="l00212"></a>00212           {
<a name="l00213"></a>00213             <a class="code" href="classEchange__contact__Correlation__VEF.html#ad8947cf4bc6e2d107405ca81374851c7">Reprise_temperature</a>=1;
<a name="l00214"></a>00214             <span class="keywordflow">break</span>;
<a name="l00215"></a>00215           }
<a name="l00216"></a>00216         <span class="keywordflow">default</span> :
<a name="l00217"></a>00217           {
<a name="l00218"></a>00218             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On ne comprend le mot : &quot;</span> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot;dans &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00219"></a>00219             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00220"></a>00220           }
<a name="l00221"></a>00221         }
<a name="l00222"></a>00222       is &gt;&gt; motlu;
<a name="l00223"></a>00223     }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 
<a name="l00226"></a>00226 
<a name="l00227"></a>00227   <a class="code" href="classCond__lim__base.html#a8cddc02f544ee44bebd5bae0e6a9581c">champ_front</a>().<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;Champ_front_fonc&quot;</span>);
<a name="l00228"></a>00228   <a class="code" href="classCond__lim__base.html#a8cddc02f544ee44bebd5bae0e6a9581c">champ_front</a>()-&gt;fixer_nb_comp(1);
<a name="l00229"></a>00229   <span class="keywordflow">return</span> is ;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="comment"></span>
<a name="l00234"></a>00234 <span class="comment">/**</span>
<a name="l00235"></a>00235 <span class="comment"> * Calcule le coeff d echange local dans la maille solide.</span>
<a name="l00236"></a>00236 <span class="comment"> */</span>
<a name="l00237"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#af286e4ae41b339e169fded700260648c">00237</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#af286e4ae41b339e169fded700260648c">Echange_contact_Correlation_VEF::calculer_h_solide</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab)
<a name="l00238"></a>00238 {
<a name="l00239"></a>00239 <span class="comment">// forcement local</span>
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; mon_eqn = <a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00243"></a>00243   <span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; mon_milieu = mon_eqn.<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>();
<a name="l00244"></a>00244   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zvef = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>,<a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().zone_dis().<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>());
<a name="l00245"></a>00245   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; ma_front_vf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>());
<a name="l00246"></a>00246   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = zvef.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   <span class="keywordtype">int</span> nb_comp = mon_milieu.<a class="code" href="classMilieu__base.html#a99251c07d04e1f13ec4c300bfe8757db" title="Renvoie la conductivite du milieu. (version const)">conductivite</a>()-&gt;<a class="code" href="classChamp__Don.html#aa0b82f09287c5934333d540ef77e0059" title="Appel a l&#39;objet sous-jacent Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00249"></a>00249   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces_bord = ma_front_vf.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00250"></a>00250 
<a name="l00251"></a>00251   <span class="keyword">const</span> <span class="keywordtype">int</span> ndeb = ma_front_vf.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00252"></a>00252   <span class="keyword">const</span> <span class="keywordtype">int</span> nfin = ndeb + nb_faces_bord;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 
<a name="l00256"></a>00256   <span class="keywordflow">if</span>(!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,mon_milieu.<a class="code" href="classMilieu__base.html#a99251c07d04e1f13ec4c300bfe8757db" title="Renvoie la conductivite du milieu. (version const)">conductivite</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()))
<a name="l00257"></a>00257     {
<a name="l00258"></a>00258       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_lambda = mon_milieu.<a class="code" href="classMilieu__base.html#a99251c07d04e1f13ec4c300bfe8757db" title="Renvoie la conductivite du milieu. (version const)">conductivite</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>();
<a name="l00259"></a>00259 
<a name="l00260"></a>00260       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face=ndeb; face&lt;nfin; face++)
<a name="l00261"></a>00261         {
<a name="l00262"></a>00262           <span class="keywordtype">int</span> elem =  face_voisins(face,0);
<a name="l00263"></a>00263           <span class="keywordflow">if</span>(elem == -1)
<a name="l00264"></a>00264             elem =  face_voisins(face,1);
<a name="l00265"></a>00265 
<a name="l00266"></a>00266           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_comp; i++)
<a name="l00267"></a>00267             tab(face-ndeb,i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#aa9c304e21dcb5c533da6aaba05eff932">pdt_scalSqrt</a>(zvef,face,face,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,tab_lambda(elem,i)) ;
<a name="l00268"></a>00268         }
<a name="l00269"></a>00269     }
<a name="l00270"></a>00270   <span class="keywordflow">else</span>  <span class="comment">//!&lt; la conductivite est un Champ uniforme</span>
<a name="l00271"></a>00271 <span class="comment"></span>    {
<a name="l00272"></a>00272       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_lambda = mon_milieu.<a class="code" href="classMilieu__base.html#a99251c07d04e1f13ec4c300bfe8757db" title="Renvoie la conductivite du milieu. (version const)">conductivite</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>();
<a name="l00273"></a>00273 
<a name="l00274"></a>00274       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face=ndeb; face&lt;nfin; face++)
<a name="l00275"></a>00275         {
<a name="l00276"></a>00276           <span class="keywordtype">int</span> elem =  face_voisins(face,0);
<a name="l00277"></a>00277           <span class="keywordflow">if</span>(elem == -1)
<a name="l00278"></a>00278             elem =  face_voisins(face,1);
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 
<a name="l00281"></a>00281           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_comp; i++)
<a name="l00282"></a>00282             {
<a name="l00283"></a>00283               tab(face-ndeb,i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#aa9c304e21dcb5c533da6aaba05eff932">pdt_scalSqrt</a>(zvef,face,face,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,tab_lambda(0,i));
<a name="l00284"></a>00284             }
<a name="l00285"></a>00285         }
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="comment"></span>
<a name="l00292"></a>00292 <span class="comment">/**</span>
<a name="l00293"></a>00293 <span class="comment"> * Complete et initialise les attributs de la classe</span>
<a name="l00294"></a>00294 <span class="comment"> */</span>
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#ac0535622dce7ebb19c970ba4d7acbce6">00296</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#ac0535622dce7ebb19c970ba4d7acbce6">Echange_contact_Correlation_VEF::completer</a>()
<a name="l00297"></a>00297 {
<a name="l00298"></a>00298 
<a name="l00299"></a>00299   <a class="code" href="classEchange__contact__Correlation__VEF.html#a0b4f74b4b37252273fe449c99c3f3ae0">init</a>();
<a name="l00300"></a>00300 
<a name="l00301"></a>00301   <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>=<a class="code" href="Double_8h.html#a2f8edc4561e9744ed4233b205fa7ec32">min</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a8a569173e9f3d5fde683cbe82d760ff3">Tinf</a>,<a class="code" href="classEchange__contact__Correlation__VEF.html#a90ad35e91293fe87ed772ce45023b0fb" title="Temperature entree, sortie.">Tsup</a>);
<a name="l00302"></a>00302   <a class="code" href="classEchange__contact__Correlation__VEF.html#af015992f7feef1014f7d5e2f8b35f96e">calculer_prop_physique</a>();
<a name="l00303"></a>00303   <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(0)==<a class="code" href="classEchange__contact__Correlation__VEF.html#a8a569173e9f3d5fde683cbe82d760ff3">Tinf</a>)
<a name="l00304"></a>00304     <a class="code" href="classEchange__contact__Correlation__VEF.html#a1bf9d5590c338937a77702ddc0bf6abd">U</a>=<a class="code" href="classEchange__contact__Correlation__VEF.html#a69c6be3ce15f56e823bf29f2d19b2426">debit</a>/<a class="code" href="classEchange__contact__Correlation__VEF.html#a70a928aedcf3a92b68156cfc8ee3a67a">rho</a>(0);
<a name="l00305"></a>00305   <span class="keywordflow">else</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#a1bf9d5590c338937a77702ddc0bf6abd">U</a> = <a class="code" href="classEchange__contact__Correlation__VEF.html#a69c6be3ce15f56e823bf29f2d19b2426">debit</a>/<a class="code" href="classEchange__contact__Correlation__VEF.html#a70a928aedcf3a92b68156cfc8ee3a67a">rho</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1);
<a name="l00306"></a>00306 
<a name="l00307"></a>00307   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; mon_eqn = <a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00308"></a>00308   <span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; mon_milieu = mon_eqn.<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>();
<a name="l00309"></a>00309   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; ma_front_vf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>());
<a name="l00310"></a>00310   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces_bord = ma_front_vf.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00311"></a>00311   <span class="keywordtype">int</span> nb_comp = mon_milieu.<a class="code" href="classMilieu__base.html#a99251c07d04e1f13ec4c300bfe8757db" title="Renvoie la conductivite du milieu. (version const)">conductivite</a>()-&gt;<a class="code" href="classChamp__Don.html#aa0b82f09287c5934333d540ef77e0059" title="Appel a l&#39;objet sous-jacent Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00312"></a>00312   <a class="code" href="classEchange__contact__Correlation__VEF.html#ab0e09c2077a0c3b230e4a429452a2ab2" title="le coeff d&#39;echange par correlation">h_solide</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces_bord,nb_comp);
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00316"></a>00316   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>; i++)
<a name="l00317"></a>00317     {
<a name="l00318"></a>00318       <a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>(i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#ace1aa5014d47c6963d0cfc5bcd832c8e">calculer_coefficient_echange</a>(i);
<a name="l00319"></a>00319     }
<a name="l00320"></a>00320   <a class="code" href="classEchange__contact__Correlation__VEF.html#af286e4ae41b339e169fded700260648c">calculer_h_solide</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#ab0e09c2077a0c3b230e4a429452a2ab2" title="le coeff d&#39;echange par correlation">h_solide</a>);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 
<a name="l00325"></a>00325   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Tparoi =<a class="code" href="classCond__lim__base.html#a8cddc02f544ee44bebd5bae0e6a9581c">champ_front</a>().<a class="code" href="classDeriv__Champ__front__base.html#a5405a20c106b868a23805a45c4436a53">valeur</a>().<a class="code" href="classChamp__front__base.html#a7d124849f85571b21d805a760deefdc0" title="Renvoie le tableau des valeurs du champ.">valeurs</a>();
<a name="l00326"></a>00326   Tparoi.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces_bord,nb_comp);
<a name="l00327"></a>00327   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Ts = mon_eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>();
<a name="l00328"></a>00328   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zvef = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>,<a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().zone_dis().<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>());
<a name="l00329"></a>00329   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = zvef.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00330"></a>00330   <span class="keyword">const</span> <span class="keywordtype">int</span> ndeb = ma_front_vf.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00331"></a>00331   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0; ii&lt;nb_faces_bord; ii++)
<a name="l00332"></a>00332     {
<a name="l00333"></a>00333       <span class="keywordtype">double</span> Tint=0.;
<a name="l00334"></a>00334       <span class="keywordtype">int</span> face = ndeb+ii;
<a name="l00335"></a>00335       <span class="keywordtype">int</span> elem =  face_voisins(face,0);
<a name="l00336"></a>00336       <span class="keywordflow">if</span>(elem == -1)
<a name="l00337"></a>00337         elem =  face_voisins(face,1);
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 
<a name="l00340"></a>00340 <span class="comment">// on recupere les faces 2, 3 et 4 de l&#39;element contenant &quot;face&quot;</span>
<a name="l00341"></a>00341       <span class="keywordtype">int</span> face2 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,0);
<a name="l00342"></a>00342       <span class="keywordtype">int</span> face3 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,1);
<a name="l00343"></a>00343       <span class="keywordflow">if</span> (face2 == face)
<a name="l00344"></a>00344         face2 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00345"></a>00345       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (face3 == face)
<a name="l00346"></a>00346         face3 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00347"></a>00347 
<a name="l00348"></a>00348       Tint += <a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">pdt_scal</a>(zvef,face,face2,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,1.)*Ts(face2) + <a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">pdt_scal</a>(zvef,face,face3,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,1.)*Ts(face3);
<a name="l00349"></a>00349 
<a name="l00350"></a>00350       <span class="keywordflow">if</span>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> == 3)
<a name="l00351"></a>00351         {
<a name="l00352"></a>00352           <span class="keywordtype">int</span> face4 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,2);
<a name="l00353"></a>00353           <span class="keywordflow">if</span> (face4 == face)
<a name="l00354"></a>00354             face4 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00355"></a>00355           Tint += <a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">pdt_scal</a>(zvef,face,face4,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,1.)*Ts(face4);
<a name="l00356"></a>00356         }
<a name="l00357"></a>00357 
<a name="l00358"></a>00358       Tint *= -1./<a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">pdt_scal</a>(zvef,face,face,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,1.);
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 
<a name="l00361"></a>00361       Tparoi(ii,0) = (<a class="code" href="classEchange__contact__Correlation__VEF.html#ab0e09c2077a0c3b230e4a429452a2ab2" title="le coeff d&#39;echange par correlation">h_solide</a>(ii,0)*Tint+ <a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(ii))*<a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(ii)))/(<a class="code" href="classEchange__contact__Correlation__VEF.html#ab0e09c2077a0c3b230e4a429452a2ab2" title="le coeff d&#39;echange par correlation">h_solide</a>(ii,0)+<a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(ii)));
<a name="l00362"></a>00362     }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364   <a class="code" href="classEchange__contact__Correlation__VEF.html#ad09ee7390ca724721bd3c4d754ea4bf5">init_tab_echange</a>();
<a name="l00365"></a>00365 
<a name="l00366"></a>00366 <span class="comment">// Mise a jour car pas de dependance a des donnees d un autre probleme</span>
<a name="l00367"></a>00367 <span class="comment">// dans le cas de probleme couple</span>
<a name="l00368"></a>00368 <span class="comment">// Methode completer() peut etre a remplacer par methode initialiser()</span>
<a name="l00369"></a>00369   <span class="keyword">const</span> <span class="keywordtype">double</span> temps = mon_eqn.<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>();
<a name="l00370"></a>00370   <a class="code" href="classEchange__contact__Correlation__VEF.html#a18af7b80b6e51358da78071a47766e16">mettre_a_jour</a>(temps);
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 <span class="comment"></span>
<a name="l00373"></a>00373 <span class="comment">/**</span>
<a name="l00374"></a>00374 <span class="comment"> * Initialise le tab tab_ech pour le parallele</span>
<a name="l00375"></a>00375 <span class="comment"> */</span>
<a name="l00376"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#ad09ee7390ca724721bd3c4d754ea4bf5">00376</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#ad09ee7390ca724721bd3c4d754ea4bf5">Echange_contact_Correlation_VEF::init_tab_echange</a>()
<a name="l00377"></a>00377 {
<a name="l00378"></a>00378 }<span class="comment"></span>
<a name="l00379"></a>00379 <span class="comment">/**</span>
<a name="l00380"></a>00380 <span class="comment"> * Calcule les CL a appliquer sur l&#39;equation d&#39;energie</span>
<a name="l00381"></a>00381 <span class="comment"> */</span>
<a name="l00382"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#a5fa93272d920816ea88b331e8ff7bb8a">00382</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#a5fa93272d920816ea88b331e8ff7bb8a">Echange_contact_Correlation_VEF::calculer_CL</a>()
<a name="l00383"></a>00383 {
<a name="l00384"></a>00384   <a class="code" href="classSchema__Comm.html">Schema_Comm</a> schema_comm;
<a name="l00385"></a>00385   <span class="keyword">const</span> <a class="code" href="classJoints.html" title="Classe Joints Cette classe represente une liste d&#39;objet de type Joint.">Joints</a>&amp; joints = <a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().<a class="code" href="classZone__Cl__dis__base.html#a5dc98e8f521700c8f5f9148e36d0a8ec">zone</a>().<a class="code" href="classZone.html#a16f273a76321d31435995cdad664285a" title="Renvoie la liste des joints de la zone. (version const)">faces_joint</a>();
<a name="l00386"></a>00386   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_voisins = joints.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00387"></a>00387   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> send_pe_list(nb_voisins);
<a name="l00388"></a>00388   <span class="keywordtype">int</span> i;
<a name="l00389"></a>00389   <span class="keywordflow">for</span> (i = 0; i &lt; nb_voisins; i++)
<a name="l00390"></a>00390     send_pe_list[i] = joints[i].PEvoisin();
<a name="l00391"></a>00391   schema_comm.<a class="code" href="classSchema__Comm.html#ad11c9b47999c294c26ae4df8d2bbd57b" title="Definit la liste des processeurs a qui on va envoyer et de qui on va recevoir des donnees...">set_send_recv_pe_list</a>(send_pe_list, send_pe_list);
<a name="l00392"></a>00392 
<a name="l00393"></a>00393   <span class="keyword">const</span> <span class="keywordtype">double</span> ymin = <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(1);
<a name="l00394"></a>00394   <span class="keyword">const</span> <span class="keywordtype">double</span> ymax = <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-2);
<a name="l00395"></a>00395   <span class="keyword">const</span> <span class="keywordtype">double</span> Tmin = <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(1);
<a name="l00396"></a>00396   <span class="keyword">const</span> <span class="keywordtype">double</span> Tmax = <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-2);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398   <a class="code" href="classEchange__contact__Correlation__VEF.html#a951636d5f2009e73e401407665aa7732">T_CL0</a> = <a class="code" href="classEchange__contact__Correlation__VEF.html#a8a569173e9f3d5fde683cbe82d760ff3">Tinf</a>;
<a name="l00399"></a>00399   <a class="code" href="classEchange__contact__Correlation__VEF.html#acc935d0cfaafa13f3978e96607927167" title="CL sur le domaine. En seq. = Tinf et Tsup ; En parallele = Tvoisin.">T_CL1</a> = <a class="code" href="classEchange__contact__Correlation__VEF.html#a90ad35e91293fe87ed772ce45023b0fb" title="Temperature entree, sortie.">Tsup</a>;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   schema_comm.<a class="code" href="classSchema__Comm.html#ac617b53de22748cdd9fa30a0cfd0f4a8" title="Statut passe a WRITING Autorise si status_ == WRITING:">begin_comm</a>();
<a name="l00402"></a>00402   <span class="keywordflow">for</span> (i = 0; i &lt; nb_voisins; i++)
<a name="l00403"></a>00403     {
<a name="l00404"></a>00404       <span class="keyword">const</span> <span class="keywordtype">int</span> pe = send_pe_list[i];
<a name="l00405"></a>00405       schema_comm.<a class="code" href="classSchema__Comm.html#a6c771eae3b46250ae0d2f0126a7d8065" title="renvoie le buffer correspondant au processeur num_PE pour y entasser des donnees a envoyer...">send_buffer</a>(pe) &lt;&lt; ymin &lt;&lt; ymax &lt;&lt; Tmin &lt;&lt; Tmax;
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407   schema_comm.<a class="code" href="classSchema__Comm.html#abca0e8ac6c2b742d26f3cfaee0690c72" title="Statut passe a EXCHANGED.">echange_taille_et_messages</a>();
<a name="l00408"></a>00408   <span class="keywordflow">for</span> (i = 0; i &lt; nb_voisins; i++)
<a name="l00409"></a>00409     {
<a name="l00410"></a>00410       <span class="keyword">const</span> <span class="keywordtype">int</span> pe = send_pe_list[i];
<a name="l00411"></a>00411       <span class="keywordtype">double</span> ymin_voisin, ymax_voisin, Tmin_voisin, Tmax_voisin;
<a name="l00412"></a>00412       schema_comm.<a class="code" href="classSchema__Comm.html#a0c056eb81ab8fd513912b336b4d13a1a" title="renvoie le buffer correspondant au processeur num_PE pour y lire les donnees recues. Le schema doit etre dans l&#39;etat EXCHANGED.">recv_buffer</a>(pe) &gt;&gt; ymin_voisin &gt;&gt; ymax_voisin &gt;&gt; Tmin_voisin &gt;&gt; Tmax_voisin;
<a name="l00413"></a>00413       <span class="keywordflow">if</span> (ymax_voisin &lt; ymin)
<a name="l00414"></a>00414         <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(0) = <a class="code" href="classEchange__contact__Correlation__VEF.html#a951636d5f2009e73e401407665aa7732">T_CL0</a> = 0.5 * (Tmax_voisin + Tmin);
<a name="l00415"></a>00415       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ymin_voisin &gt; ymax)
<a name="l00416"></a>00416         <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1) = <a class="code" href="classEchange__contact__Correlation__VEF.html#acc935d0cfaafa13f3978e96607927167" title="CL sur le domaine. En seq. = Tinf et Tsup ; En parallele = Tvoisin.">T_CL1</a> = 0.5 * (Tmin_voisin + Tmax);
<a name="l00417"></a>00417       <span class="keywordflow">else</span>
<a name="l00418"></a>00418         {
<a name="l00419"></a>00419           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Erreur dans Echange_contact_Correlation_VEF::calculer_CL() (decoupage incompatible ?)&quot;</span>;
<a name="l00420"></a>00420           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00421"></a>00421         }
<a name="l00422"></a>00422     }
<a name="l00423"></a>00423   schema_comm.<a class="code" href="classSchema__Comm.html#a73a981f88b6ffebc150fb46c5cce75d9" title="Statut passe a RESET Accesseurs:">end_comm</a>();
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 <span class="comment"></span>
<a name="l00426"></a>00426 <span class="comment">/**</span>
<a name="l00427"></a>00427 <span class="comment"> * Calcule rho, mu et lambda du fluide pour la temperature courante</span>
<a name="l00428"></a>00428 <span class="comment"> */</span>
<a name="l00429"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#af015992f7feef1014f7d5e2f8b35f96e">00429</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#af015992f7feef1014f7d5e2f8b35f96e">Echange_contact_Correlation_VEF::calculer_prop_physique</a>()
<a name="l00430"></a>00430 {
<a name="l00431"></a>00431   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>; i++)
<a name="l00432"></a>00432     {
<a name="l00433"></a>00433       <a class="code" href="classEchange__contact__Correlation__VEF.html#aabf87a66608c14cc79e0d6310c2e31a6">rho_T</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(<span class="stringliteral">&quot;T&quot;</span>,<a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(i));
<a name="l00434"></a>00434       <a class="code" href="classEchange__contact__Correlation__VEF.html#a1259a39964adb6b24ba6995110cace4a">mu_T</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(<span class="stringliteral">&quot;T&quot;</span>,<a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(i));
<a name="l00435"></a>00435       <a class="code" href="classEchange__contact__Correlation__VEF.html#aed6d0de775952728a910df0757ab57b9">lambda_T</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(<span class="stringliteral">&quot;T&quot;</span>,<a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(i));
<a name="l00436"></a>00436       <a class="code" href="classEchange__contact__Correlation__VEF.html#a70a928aedcf3a92b68156cfc8ee3a67a">rho</a>(i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#aabf87a66608c14cc79e0d6310c2e31a6">rho_T</a>.<a class="code" href="classParser__U.html#a61605bc1b85e466f884f1739e811b6b4">eval</a>();
<a name="l00437"></a>00437       <a class="code" href="classEchange__contact__Correlation__VEF.html#a9ef728f85354ace957ca3ada903ffbe5">mu</a>(i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#a1259a39964adb6b24ba6995110cace4a">mu_T</a>.<a class="code" href="classParser__U.html#a61605bc1b85e466f884f1739e811b6b4">eval</a>();
<a name="l00438"></a>00438       <a class="code" href="classEchange__contact__Correlation__VEF.html#a46a94fbd278297cdeaf6ba7fcfeffc51">lambda</a>(i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#aed6d0de775952728a910df0757ab57b9">lambda_T</a>.<a class="code" href="classParser__U.html#a61605bc1b85e466f884f1739e811b6b4">eval</a>();
<a name="l00439"></a>00439     }
<a name="l00440"></a>00440 }
<a name="l00441"></a>00441 <span class="comment"></span>
<a name="l00442"></a>00442 <span class="comment">/**</span>
<a name="l00443"></a>00443 <span class="comment"> * Calcule le coeff d echange suivant la correlation entree dans le jdd</span>
<a name="l00444"></a>00444 <span class="comment"> */</span>
<a name="l00445"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#ace1aa5014d47c6963d0cfc5bcd832c8e">00445</a> <span class="keywordtype">double</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#ace1aa5014d47c6963d0cfc5bcd832c8e">Echange_contact_Correlation_VEF::calculer_coefficient_echange</a>(<span class="keywordtype">int</span> i)
<a name="l00446"></a>00446 {
<a name="l00447"></a>00447   <span class="keywordtype">double</span> Re,Pr;
<a name="l00448"></a>00448   Re = fabs(<a class="code" href="classEchange__contact__Correlation__VEF.html#ac81c895ac41edb733cad7de045478d11">getQh</a>()*<a class="code" href="classEchange__contact__Correlation__VEF.html#aecf26d40495ae77f2f783d3125a4e890">getDh</a>(i)/<a class="code" href="classEchange__contact__Correlation__VEF.html#afc480e032f3485a4cc4e4d1bb3a4ce1f">getMu</a>(i));
<a name="l00449"></a>00449   Pr = <a class="code" href="classEchange__contact__Correlation__VEF.html#afc480e032f3485a4cc4e4d1bb3a4ce1f">getMu</a>(i)*<a class="code" href="classEchange__contact__Correlation__VEF.html#a6ae3f5e0911e52b0d6862451636da5e9">getCp</a>()/<a class="code" href="classEchange__contact__Correlation__VEF.html#a04f0fc33ee2949c6e41e57cdb57c2489">getLambda</a>(i);
<a name="l00450"></a>00450   <a class="code" href="classEchange__contact__Correlation__VEF.html#adbaf59b7c899b2f641112249da6eba2c">fct_Nu</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(<span class="stringliteral">&quot;Re&quot;</span>,Re);
<a name="l00451"></a>00451   <a class="code" href="classEchange__contact__Correlation__VEF.html#adbaf59b7c899b2f641112249da6eba2c">fct_Nu</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(<span class="stringliteral">&quot;Pr&quot;</span>,Pr);
<a name="l00452"></a>00452   <span class="keywordflow">return</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#adbaf59b7c899b2f641112249da6eba2c">fct_Nu</a>.<a class="code" href="classParser__U.html#a61605bc1b85e466f884f1739e811b6b4">eval</a>()*<a class="code" href="classEchange__contact__Correlation__VEF.html#a04f0fc33ee2949c6e41e57cdb57c2489">getLambda</a>(i)/<a class="code" href="classEchange__contact__Correlation__VEF.html#aecf26d40495ae77f2f783d3125a4e890">getDh</a>(i);
<a name="l00453"></a>00453 }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455 <span class="comment"></span>
<a name="l00456"></a>00456 <span class="comment">/**</span>
<a name="l00457"></a>00457 <span class="comment"> * Calcul du terme source  de puissance volumique dans l&#39;equation d&#39;energie 1D fluide.</span>
<a name="l00458"></a>00458 <span class="comment"> */</span>
<a name="l00459"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#ae4c7e5711bed76bab63a23709cb6ed27">00459</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#ae4c7e5711bed76bab63a23709cb6ed27">Echange_contact_Correlation_VEF::calculer_Q</a>()
<a name="l00460"></a>00460 {
<a name="l00461"></a>00461   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; ma_zvef = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>,<a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().zone_dis().<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>());
<a name="l00462"></a>00462   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; ma_front_vf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>());
<a name="l00463"></a>00463   <span class="keyword">const</span> <span class="keywordtype">int</span> ndeb = ma_front_vf.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00464"></a>00464   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces_bord = ma_front_vf.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00465"></a>00465   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = ma_zvef.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00466"></a>00466 
<a name="l00467"></a>00467   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Tp= <a class="code" href="classCond__lim__base.html#a8cddc02f544ee44bebd5bae0e6a9581c">champ_front</a>()-&gt;<a class="code" href="classChamp__front.html#a74caddb39fcac6ade95ec1399fac38b7" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>();
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 
<a name="l00470"></a>00470   <a class="code" href="classEchange__contact__Correlation__VEF.html#abe2234bb04c81b1ec11309a4951f11c1" title="puissance volumique dans le fluide 1D">Qvol</a>=0.;
<a name="l00471"></a>00471   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> iface=0; iface&lt;nb_faces_bord; iface++)
<a name="l00472"></a>00472     {
<a name="l00473"></a>00473       <span class="keywordtype">int</span> face = ndeb+iface;
<a name="l00474"></a>00474       <span class="keywordtype">int</span> corresp = <a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(iface);
<a name="l00475"></a>00475       <span class="keywordtype">int</span> elem =  face_voisins(face,0);
<a name="l00476"></a>00476       <span class="keywordflow">if</span>(elem == -1)
<a name="l00477"></a>00477         elem =  face_voisins(face,1);
<a name="l00478"></a>00478       <a class="code" href="classEchange__contact__Correlation__VEF.html#abe2234bb04c81b1ec11309a4951f11c1" title="puissance volumique dans le fluide 1D">Qvol</a>(corresp)+=<a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>(corresp)*(Tp(iface,0)-<a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(corresp))*<a class="code" href="classEchange__contact__Correlation__VEF.html#ae163772a1348d0ae177ab104ffe5d222">surfacesVEF</a>(ma_zvef,face,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00479"></a>00479     }
<a name="l00480"></a>00480   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>; i++)
<a name="l00481"></a>00481     <a class="code" href="classEchange__contact__Correlation__VEF.html#abe2234bb04c81b1ec11309a4951f11c1" title="puissance volumique dans le fluide 1D">Qvol</a>(i)/=<a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>(i);
<a name="l00482"></a>00482 
<a name="l00483"></a>00483 }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 
<a name="l00487"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#a0b4f74b4b37252273fe449c99c3f3ae0">00487</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#a0b4f74b4b37252273fe449c99c3f3ae0">Echange_contact_Correlation_VEF::init</a>()
<a name="l00488"></a>00488 {
<a name="l00489"></a>00489   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; ma_zvef = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>,<a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().zone_dis().<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>());
<a name="l00490"></a>00490   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; ma_front_vf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>());
<a name="l00491"></a>00491   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv = ma_zvef.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00492"></a>00492   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_sommets = ma_zvef.<a class="code" href="classZone__VF.html#a298e73b18e17da55f421b1fb0879bd46" title="renvoie le numero du ieme sommet de la face num_face.">face_sommets</a>();
<a name="l00493"></a>00493   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_som = ma_zvef.<a class="code" href="classZone__dis__base.html#a65fdde8e309b6f1f0d8987fa4b9a5b93">domaine_dis</a>().<a class="code" href="classDomaine__dis.html#a5537c5abe880a7149de87f00312ddad3" title="Renvoie une reference sur le Domaine associe au domaine discretise.">domaine</a>().<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00494"></a>00494 
<a name="l00495"></a>00495   <span class="keyword">const</span> <span class="keywordtype">int</span> ndeb = ma_front_vf.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00496"></a>00496   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces_bord = ma_front_vf.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00497"></a>00497 
<a name="l00498"></a>00498 <span class="comment">// N entre par l&#39;utilisateur = Nombre de mailles 1D</span>
<a name="l00499"></a>00499   <a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>=<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>/<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>()+2;
<a name="l00500"></a>00500 <span class="comment">// N modifie pour que cela soit le nombre de noeuds 1D par processeur</span>
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 <span class="comment">// Ici, on suppose que l&#39;utilisateur a decoupe en tranche selon la direction 1D</span>
<a name="l00503"></a>00503   <span class="keywordtype">double</span> delta=(<a class="code" href="classEchange__contact__Correlation__VEF.html#aff239ded5df7d5de83b0700c8cbf6dd3">xsup</a>-<a class="code" href="classEchange__contact__Correlation__VEF.html#a328a7c8697bf09d766e2e0e0b8c15f11">xinf</a>)/<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>();
<a name="l00504"></a>00504   <a class="code" href="classEchange__contact__Correlation__VEF.html#a328a7c8697bf09d766e2e0e0b8c15f11">xinf</a>=<a class="code" href="classEchange__contact__Correlation__VEF.html#a328a7c8697bf09d766e2e0e0b8c15f11">xinf</a>+<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()*delta;
<a name="l00505"></a>00505   <a class="code" href="classEchange__contact__Correlation__VEF.html#aff239ded5df7d5de83b0700c8cbf6dd3">xsup</a>=<a class="code" href="classEchange__contact__Correlation__VEF.html#a328a7c8697bf09d766e2e0e0b8c15f11">xinf</a>+delta;
<a name="l00506"></a>00506 <span class="comment">// on dimensionne</span>
<a name="l00507"></a>00507   <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00508"></a>00508   <a class="code" href="classEchange__contact__Correlation__VEF.html#a1bf9d5590c338937a77702ddc0bf6abd">U</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00509"></a>00509   <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00510"></a>00510   <a class="code" href="classEchange__contact__Correlation__VEF.html#abe2234bb04c81b1ec11309a4951f11c1" title="puissance volumique dans le fluide 1D">Qvol</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00511"></a>00511   <a class="code" href="classEchange__contact__Correlation__VEF.html#a70a928aedcf3a92b68156cfc8ee3a67a">rho</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00512"></a>00512   <a class="code" href="classEchange__contact__Correlation__VEF.html#a9ef728f85354ace957ca3ada903ffbe5">mu</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00513"></a>00513   <a class="code" href="classEchange__contact__Correlation__VEF.html#a46a94fbd278297cdeaf6ba7fcfeffc51">lambda</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00514"></a>00514   <a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00515"></a>00515   <a class="code" href="classEchange__contact__Correlation__VEF.html#a43876413044398ca6f954fa9c220d5be" title="tableau des proprietes physiques du fluide a un instant donne">diam</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00516"></a>00516   <a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00517"></a>00517 
<a name="l00518"></a>00518 <span class="comment">// on remplit les coordonnees des noeuds du maillages 1D dans le fluide</span>
<a name="l00519"></a>00519   <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(0)=<a class="code" href="classEchange__contact__Correlation__VEF.html#a328a7c8697bf09d766e2e0e0b8c15f11">xinf</a>;
<a name="l00520"></a>00520   <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1)=<a class="code" href="classEchange__contact__Correlation__VEF.html#aff239ded5df7d5de83b0700c8cbf6dd3">xsup</a>;
<a name="l00521"></a>00521   <span class="keywordtype">double</span> dx = (<a class="code" href="classEchange__contact__Correlation__VEF.html#aff239ded5df7d5de83b0700c8cbf6dd3">xsup</a>-<a class="code" href="classEchange__contact__Correlation__VEF.html#a328a7c8697bf09d766e2e0e0b8c15f11">xinf</a>)/(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-2);
<a name="l00522"></a>00522   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1; i++)
<a name="l00523"></a>00523     {
<a name="l00524"></a>00524       <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#a328a7c8697bf09d766e2e0e0b8c15f11">xinf</a>+dx*(i-0.5);
<a name="l00525"></a>00525     }
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 <span class="comment">// on remplit les correspondances elements solides -&gt; elements fluides</span>
<a name="l00528"></a>00528   <a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces_bord);
<a name="l00529"></a>00529   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_faces_bord; i++)
<a name="l00530"></a>00530     {
<a name="l00531"></a>00531       <span class="keywordtype">double</span> <a class="code" href="Double_8h.html#a2f8edc4561e9744ed4233b205fa7ec32">min</a>=<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(xv(i+ndeb,<a class="code" href="classEchange__contact__Correlation__VEF.html#a310986810ee87c98ab329a6babc09035" title="Direction du cylindre.">dir</a>)-<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(1));
<a name="l00532"></a>00532       <span class="keywordtype">double</span> tmp=0.;
<a name="l00533"></a>00533       <span class="keywordtype">int</span> jmin=1;
<a name="l00534"></a>00534       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=2; j&lt;N-1; j++)
<a name="l00535"></a>00535         {
<a name="l00536"></a>00536           <span class="keywordflow">if</span> ((tmp=<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(xv(i+ndeb,<a class="code" href="classEchange__contact__Correlation__VEF.html#a310986810ee87c98ab329a6babc09035" title="Direction du cylindre.">dir</a>)-<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(j))) &lt; min)
<a name="l00537"></a>00537             {
<a name="l00538"></a>00538               min = tmp;
<a name="l00539"></a>00539               jmin = j;
<a name="l00540"></a>00540             }
<a name="l00541"></a>00541         }
<a name="l00542"></a>00542 <span class="comment">// Cerr &lt;&lt; &quot;min=&quot; &lt;&lt; min &lt;&lt; &quot; jmin=&quot; &lt;&lt; jmin &lt;&lt; finl;</span>
<a name="l00543"></a>00543       <a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(i) = jmin;
<a name="l00544"></a>00544     }
<a name="l00545"></a>00545 <span class="comment">// Cerr &lt;&lt; Process::me() &lt;&lt; finl;</span>
<a name="l00546"></a>00546 <span class="comment">// Cerr &lt;&lt; correspondance_solide_fluide &lt;&lt; finl;</span>
<a name="l00547"></a>00547 
<a name="l00548"></a>00548   <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#ac3e3060e74b1e5fd02485f16ffe8bdc2">avec_rayo</a> == 1)
<a name="l00549"></a>00549     {
<a name="l00550"></a>00550       <span class="keyword">const</span> <span class="keywordtype">double</span> precision = 1.e-6;
<a name="l00551"></a>00551       <span class="keyword">const</span> <span class="keywordtype">int</span> MAX_FACES_PATCH = 500; <span class="comment">//!!! a revoir</span>
<a name="l00552"></a>00552 <span class="comment"></span>      <span class="keywordtype">int</span> nb_patches = 2*(N-2);
<a name="l00553"></a>00553       <a class="code" href="classEchange__contact__Correlation__VEF.html#a196a9daf593120086e5b358b39725d26">patches_rayo</a>.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_patches,MAX_FACES_PATCH);
<a name="l00554"></a>00554       <a class="code" href="classEchange__contact__Correlation__VEF.html#aab5b18bab0c1d1ddcb34fb96429eae59">nb_faces_patch</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_patches);
<a name="l00555"></a>00555       <a class="code" href="classIntVect.html">IntVect</a> traite(nb_faces_bord);
<a name="l00556"></a>00556       <a class="code" href="classEchange__contact__Correlation__VEF.html#abc54cdba1486ae8ca09955a3f627a073">correspondance_fluide_patch</a>.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(N,2); <span class="comment">//!&lt; en dur, deux patches associes a un point fluide</span>
<a name="l00557"></a>00557 <span class="comment"></span>      <a class="code" href="classEchange__contact__Correlation__VEF.html#a5d04c4d304e2addab755b40aa6a99c66">correspondance_face_patch</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces_bord); <span class="comment">//!&lt; fournit pour chaque face du bord, le numero du patch auquel elle appartient</span>
<a name="l00558"></a>00558 <span class="comment"></span>      traite=0;
<a name="l00559"></a>00559       <a class="code" href="classEchange__contact__Correlation__VEF.html#abc54cdba1486ae8ca09955a3f627a073">correspondance_fluide_patch</a>=-1;
<a name="l00560"></a>00560       <span class="keywordtype">int</span> compteur_patches = 0;
<a name="l00561"></a>00561       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_faces_bord; i++)
<a name="l00562"></a>00562         {
<a name="l00563"></a>00563           <span class="keywordtype">int</span> face_corresp = <a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(i);
<a name="l00564"></a>00564           <span class="keywordflow">if</span> (traite(i) == 0)
<a name="l00565"></a>00565             {
<a name="l00566"></a>00566               <span class="keywordtype">int</span> compteur_face=1;
<a name="l00567"></a>00567               traite(i)=1;
<a name="l00568"></a>00568               <span class="keywordflow">if</span> (compteur_patches==nb_patches)
<a name="l00569"></a>00569                 {
<a name="l00570"></a>00570                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Erreur dans Echange_contact_Correlation_VEF::initialiser&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00571"></a>00571                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Le nombre de patches est depasse.&quot;</span> &lt;&lt; finl;
<a name="l00572"></a>00572                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Contacter le support TRUST.&quot;</span> &lt;&lt; finl;
<a name="l00573"></a>00573                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00574"></a>00574                 }
<a name="l00575"></a>00575               <a class="code" href="classEchange__contact__Correlation__VEF.html#a196a9daf593120086e5b358b39725d26">patches_rayo</a>(compteur_patches,0) = i;
<a name="l00576"></a>00576               <a class="code" href="classEchange__contact__Correlation__VEF.html#a5d04c4d304e2addab755b40aa6a99c66">correspondance_face_patch</a>(i)=compteur_patches;
<a name="l00577"></a>00577               <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#abc54cdba1486ae8ca09955a3f627a073">correspondance_fluide_patch</a>(face_corresp,0) == -1)
<a name="l00578"></a>00578                 <a class="code" href="classEchange__contact__Correlation__VEF.html#abc54cdba1486ae8ca09955a3f627a073">correspondance_fluide_patch</a>(face_corresp,0) = compteur_patches;
<a name="l00579"></a>00579               <span class="keywordflow">else</span>
<a name="l00580"></a>00580                 <a class="code" href="classEchange__contact__Correlation__VEF.html#abc54cdba1486ae8ca09955a3f627a073">correspondance_fluide_patch</a>(face_corresp,1) = compteur_patches;
<a name="l00581"></a>00581 
<a name="l00582"></a>00582               <span class="keywordtype">int</span> s0 = face_sommets(ndeb+i,0);
<a name="l00583"></a>00583               <span class="keywordtype">int</span> s1 = face_sommets(ndeb+i,1);
<a name="l00584"></a>00584               <span class="keywordtype">int</span> s2 = face_sommets(ndeb+i,2);
<a name="l00585"></a>00585               <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> v01(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00586"></a>00586               <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> v02(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00587"></a>00587               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idim=0; idim&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; idim++)
<a name="l00588"></a>00588                 {
<a name="l00589"></a>00589                   v01(idim) = coord_som(s1,idim)-coord_som(s0,idim);
<a name="l00590"></a>00590                   v02(idim) = coord_som(s2,idim)-coord_som(s0,idim);
<a name="l00591"></a>00591                 }
<a name="l00592"></a>00592               <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> normale(dimension);
<a name="l00593"></a>00593               normale(0) = v01(1)*v02(2)-v01(2)*v02(1);
<a name="l00594"></a>00594               normale(1) = -v01(0)*v02(2)+v01(2)*v02(0);
<a name="l00595"></a>00595               normale(2) = v01(0)*v02(1)-v01(1)*v02(0);
<a name="l00596"></a>00596 
<a name="l00597"></a>00597               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;nb_faces_bord; j++)
<a name="l00598"></a>00598                 {
<a name="l00599"></a>00599                   <span class="keywordflow">if</span> ((traite(j) == 0) &amp;&amp; (<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(j) == face_corresp))
<a name="l00600"></a>00600                     {
<a name="l00601"></a>00601                       <span class="keywordtype">int</span> sj_0 = face_sommets(ndeb+j,0);
<a name="l00602"></a>00602                       <span class="keywordtype">double</span> pscal = 0.;
<a name="l00603"></a>00603                       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idim=0; idim&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; idim++)
<a name="l00604"></a>00604                         {
<a name="l00605"></a>00605                           pscal += normale(idim)*(coord_som(sj_0,idim)-coord_som(s0,idim));
<a name="l00606"></a>00606                         }
<a name="l00607"></a>00607                       <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(pscal) &lt; precision)
<a name="l00608"></a>00608                         {
<a name="l00609"></a>00609                           traite(j) = 1;
<a name="l00610"></a>00610                           <span class="keywordflow">if</span> (compteur_face==MAX_FACES_PATCH)
<a name="l00611"></a>00611                             {
<a name="l00612"></a>00612                               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Erreur dans Echange_contact_Correlation_VEF::initialiser&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00613"></a>00613                               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Le nombre maximal de faces de patches est depasse.&quot;</span> &lt;&lt; finl;
<a name="l00614"></a>00614                               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Contacter le support TRUST.&quot;</span> &lt;&lt; finl;
<a name="l00615"></a>00615                               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00616"></a>00616                             }
<a name="l00617"></a>00617                           <a class="code" href="classEchange__contact__Correlation__VEF.html#a196a9daf593120086e5b358b39725d26">patches_rayo</a>(compteur_patches,compteur_face++) = j;
<a name="l00618"></a>00618                           <a class="code" href="classEchange__contact__Correlation__VEF.html#a5d04c4d304e2addab755b40aa6a99c66">correspondance_face_patch</a>(j)=compteur_patches;
<a name="l00619"></a>00619                         }
<a name="l00620"></a>00620                     }
<a name="l00621"></a>00621                 }
<a name="l00622"></a>00622               <a class="code" href="classEchange__contact__Correlation__VEF.html#aab5b18bab0c1d1ddcb34fb96429eae59">nb_faces_patch</a>(compteur_patches) = compteur_face;
<a name="l00623"></a>00623               compteur_patches++;
<a name="l00624"></a>00624             }
<a name="l00625"></a>00625         }
<a name="l00626"></a>00626 
<a name="l00627"></a>00627 
<a name="l00628"></a>00628     }
<a name="l00629"></a>00629 <span class="comment">// calcul du diametre hydraulique</span>
<a name="l00630"></a>00630   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>; i++)
<a name="l00631"></a>00631     {
<a name="l00632"></a>00632       <a class="code" href="classEchange__contact__Correlation__VEF.html#a32bc56e740cc90838752d39f6602465d">fct_Dh</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(<span class="stringliteral">&quot;x&quot;</span>,<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(i));
<a name="l00633"></a>00633       <a class="code" href="classEchange__contact__Correlation__VEF.html#a43876413044398ca6f954fa9c220d5be" title="tableau des proprietes physiques du fluide a un instant donne">diam</a>(i)=<a class="code" href="classEchange__contact__Correlation__VEF.html#a32bc56e740cc90838752d39f6602465d">fct_Dh</a>.<a class="code" href="classParser__U.html#a61605bc1b85e466f884f1739e811b6b4">eval</a>();
<a name="l00634"></a>00634     }
<a name="l00635"></a>00635 <span class="comment">// calcul des volumes des tranches</span>
<a name="l00636"></a>00636   <a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>=0.;
<a name="l00637"></a>00637   <span class="keyword">const</span> <span class="keywordtype">double</span> dz = (<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(2)-<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(1)); <span class="comment">//!&lt; pour l&#39;instant dz est constant, le maillage fluide est regulier (hormis pour le premier et dernier point)</span>
<a name="l00638"></a>00638 <span class="comment"></span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;N-1; i++)
<a name="l00639"></a>00639     {
<a name="l00640"></a>00640       <a class="code" href="classEchange__contact__Correlation__VEF.html#a575db1d8e1498d34162495f106227139">fct_vol</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(<span class="stringliteral">&quot;Dh&quot;</span>,<a class="code" href="classEchange__contact__Correlation__VEF.html#aecf26d40495ae77f2f783d3125a4e890">getDh</a>(i));
<a name="l00641"></a>00641       <a class="code" href="classEchange__contact__Correlation__VEF.html#a575db1d8e1498d34162495f106227139">fct_vol</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(<span class="stringliteral">&quot;x&quot;</span>,<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(i));
<a name="l00642"></a>00642       <a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>(i)=<a class="code" href="classEchange__contact__Correlation__VEF.html#a575db1d8e1498d34162495f106227139">fct_vol</a>.<a class="code" href="classParser__U.html#a61605bc1b85e466f884f1739e811b6b4">eval</a>()*dz;
<a name="l00643"></a>00643     }
<a name="l00644"></a>00644   <a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>(0) = <a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>(N-1) = 1.; <span class="comment">//!&lt; ne sert pas mais evite une division par zero dans le calcul de Qvol.</span>
<a name="l00645"></a>00645 <span class="comment"></span>}
<a name="l00646"></a>00646 
<a name="l00647"></a>00647 <span class="comment"></span>
<a name="l00648"></a>00648 <span class="comment">/**</span>
<a name="l00649"></a>00649 <span class="comment"> * Calcule la vitesse par conservation de la masse</span>
<a name="l00650"></a>00650 <span class="comment"> */</span>
<a name="l00651"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#ae6d53a88febd21624911e102cd192f9a">00651</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#ae6d53a88febd21624911e102cd192f9a">Echange_contact_Correlation_VEF::calculer_Vitesse</a>()
<a name="l00652"></a>00652 {
<a name="l00653"></a>00653   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>; i++)
<a name="l00654"></a>00654     <a class="code" href="classEchange__contact__Correlation__VEF.html#a1bf9d5590c338937a77702ddc0bf6abd">U</a>(i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#a69c6be3ce15f56e823bf29f2d19b2426">debit</a>/<a class="code" href="classEchange__contact__Correlation__VEF.html#a70a928aedcf3a92b68156cfc8ee3a67a">rho</a>(i);
<a name="l00655"></a>00655 }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657 <span class="comment"></span>
<a name="l00658"></a>00658 <span class="comment">/**</span>
<a name="l00659"></a>00659 <span class="comment"> * Calcule la temperature 1D dans le fluide en resolvant la conservation de l&#39;energie</span>
<a name="l00660"></a>00660 <span class="comment"> */</span>
<a name="l00661"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#a92b24a8c00f7bc70d05e5d6514cb5cfd">00661</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#a92b24a8c00f7bc70d05e5d6514cb5cfd">Echange_contact_Correlation_VEF::calculer_Tfluide</a>()
<a name="l00662"></a>00662 {
<a name="l00663"></a>00663   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; mon_eqn = <a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00664"></a>00664   <span class="keyword">const</span> <span class="keywordtype">double</span> dt = mon_eqn.<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a0e4f67ef6086c09434ddc161668077b2" title="Renvoie le pas de temps (delta_t) courant.">pas_de_temps</a>();
<a name="l00665"></a>00665 
<a name="l00666"></a>00666   <a class="code" href="classDoubleVect.html">DoubleVect</a> ma(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>); <span class="comment">//!&lt; diagonale</span>
<a name="l00667"></a>00667 <span class="comment"></span>  <a class="code" href="classDoubleVect.html">DoubleVect</a> mb(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1); <span class="comment">//!&lt; sous-diagonale</span>
<a name="l00668"></a>00668 <span class="comment"></span>  <a class="code" href="classDoubleVect.html">DoubleVect</a> mc(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1); <span class="comment">//!&lt; sur-diagonale</span>
<a name="l00669"></a>00669 <span class="comment"></span>  <a class="code" href="classDoubleVect.html">DoubleVect</a> sm(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>);
<a name="l00670"></a>00670   <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="Op__Conv__Muscl__old__VEF__Face_8cpp.html#ae1b5a554c1d4d97654c06032a92f800a">sgn</a> = (<a class="code" href="classEchange__contact__Correlation__VEF.html#a69c6be3ce15f56e823bf29f2d19b2426">debit</a>&gt;0) ? 1 : -1; <span class="comment">//!&lt; schema amont pour le transport</span>
<a name="l00671"></a>00671 <span class="comment"></span>
<a name="l00672"></a>00672 
<a name="l00673"></a>00673   ma(0) = 1.;
<a name="l00674"></a>00674   ma(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1) = 1.;
<a name="l00675"></a>00675   sm(0) = <a class="code" href="classEchange__contact__Correlation__VEF.html#a951636d5f2009e73e401407665aa7732">T_CL0</a>;
<a name="l00676"></a>00676   sm(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1) = <a class="code" href="classEchange__contact__Correlation__VEF.html#acc935d0cfaafa13f3978e96607927167" title="CL sur le domaine. En seq. = Tinf et Tsup ; En parallele = Tvoisin.">T_CL1</a>;
<a name="l00677"></a>00677   mc(0) = 0.;
<a name="l00678"></a>00678   mb(<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-2) = 0.;
<a name="l00679"></a>00679   <span class="keywordtype">int</span> i;
<a name="l00680"></a>00680   <span class="keywordflow">for</span> (i=1; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>-1; i++)
<a name="l00681"></a>00681     {
<a name="l00682"></a>00682       <span class="keyword">const</span> <span class="keywordtype">double</span> dtrhoCp = dt/<a class="code" href="classEchange__contact__Correlation__VEF.html#a70a928aedcf3a92b68156cfc8ee3a67a">rho</a>(i)/<a class="code" href="classEchange__contact__Correlation__VEF.html#a459669c83171a95871a4e390e1053d6b">Cp</a>;
<a name="l00683"></a>00683       <span class="keyword">const</span> <span class="keywordtype">double</span> dz1 = <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(i+1)-<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(i);
<a name="l00684"></a>00684       <span class="keyword">const</span> <span class="keywordtype">double</span> dz2 = <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(i)-<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(i-1);
<a name="l00685"></a>00685       <span class="keyword">const</span> <span class="keywordtype">double</span> l1 = 0.5*(<a class="code" href="classEchange__contact__Correlation__VEF.html#a46a94fbd278297cdeaf6ba7fcfeffc51">lambda</a>(i+1)+<a class="code" href="classEchange__contact__Correlation__VEF.html#a46a94fbd278297cdeaf6ba7fcfeffc51">lambda</a>(i));
<a name="l00686"></a>00686       <span class="keyword">const</span> <span class="keywordtype">double</span> l2 = 0.5*(<a class="code" href="classEchange__contact__Correlation__VEF.html#a46a94fbd278297cdeaf6ba7fcfeffc51">lambda</a>(i)+<a class="code" href="classEchange__contact__Correlation__VEF.html#a46a94fbd278297cdeaf6ba7fcfeffc51">lambda</a>(i-1));
<a name="l00687"></a>00687 
<a name="l00688"></a>00688       ma(i)=1+dtrhoCp*(sgn*<a class="code" href="classEchange__contact__Correlation__VEF.html#a459669c83171a95871a4e390e1053d6b">Cp</a>*<a class="code" href="classEchange__contact__Correlation__VEF.html#a69c6be3ce15f56e823bf29f2d19b2426">debit</a>/dz1+2*(l1/dz1+l2/dz2)/(dz1+dz2));
<a name="l00689"></a>00689 
<a name="l00690"></a>00690       sm(i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(i)+dtrhoCp*<a class="code" href="classEchange__contact__Correlation__VEF.html#abe2234bb04c81b1ec11309a4951f11c1" title="puissance volumique dans le fluide 1D">Qvol</a>(i);
<a name="l00691"></a>00691 
<a name="l00692"></a>00692       mc(i) = dtrhoCp*(0.5*(1-<a class="code" href="Op__Conv__Muscl__old__VEF__Face_8cpp.html#ae1b5a554c1d4d97654c06032a92f800a">sgn</a>)*<a class="code" href="classEchange__contact__Correlation__VEF.html#a459669c83171a95871a4e390e1053d6b">Cp</a>*<a class="code" href="classEchange__contact__Correlation__VEF.html#a69c6be3ce15f56e823bf29f2d19b2426">debit</a>/dz1-2*l1/dz1/(dz1+dz2));
<a name="l00693"></a>00693 
<a name="l00694"></a>00694       mb(i-1) = dtrhoCp*(-2*l2/dz2/(dz1+dz2));
<a name="l00695"></a>00695       mb(i-1) += dtrhoCp*(-0.5*(1+<a class="code" href="Op__Conv__Muscl__old__VEF__Face_8cpp.html#ae1b5a554c1d4d97654c06032a92f800a">sgn</a>)*<a class="code" href="classEchange__contact__Correlation__VEF.html#a459669c83171a95871a4e390e1053d6b">Cp</a>*<a class="code" href="classEchange__contact__Correlation__VEF.html#a69c6be3ce15f56e823bf29f2d19b2426">debit</a>/dz1);
<a name="l00696"></a>00696     }
<a name="l00697"></a>00697 
<a name="l00698"></a>00698 
<a name="l00699"></a>00699 
<a name="l00700"></a>00700 
<a name="l00701"></a>00701   <a class="code" href="classDoubleVect.html">DoubleVect</a> xx(N);
<a name="l00702"></a>00702   xx=0.;
<a name="l00703"></a>00703   <a class="code" href="classSolv__TDMA.html#a349ae16cb648a3868728c1d88b9ac0f3">Solv_TDMA::resoudre</a>(ma,mb,mc,sm,xx,N);
<a name="l00704"></a>00704   <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>; i++)
<a name="l00705"></a>00705     <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(i) = xx(i);
<a name="l00706"></a>00706 }
<a name="l00707"></a>00707 
<a name="l00708"></a><a class="code" href="Echange__contact__Correlation__VEF_8cpp.html#adbfe2a3e7678c13e710b7e5706e93e70">00708</a> <span class="keywordtype">void</span> <a class="code" href="Echange__contact__Correlation__VEF_8cpp.html#adbfe2a3e7678c13e710b7e5706e93e70">Echange_contact_Correlation_VEF_sauvegarder</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; filename, <span class="keyword">const</span> <span class="keywordtype">double</span> temps, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; T)
<a name="l00709"></a>00709 {
<a name="l00710"></a>00710   <span class="keyword">const</span> <span class="keywordtype">int</span> canal = 56;
<a name="l00711"></a>00711   <span class="keyword">const</span> <span class="keywordtype">int</span> nproc = <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>();
<a name="l00712"></a>00712   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00713"></a>00713     {
<a name="l00714"></a>00714       <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Process::Journal</a>() &lt;&lt; <span class="stringliteral">&quot;Echange_contact_Correlation_VEF::mettre_a_jour: sauvegarde dans le fichier &quot;</span>
<a name="l00715"></a>00715                          &lt;&lt; filename &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00716"></a>00716       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file(filename);
<a name="l00717"></a>00717       file &lt;&lt; <span class="stringliteral">&quot;Temps = &quot;</span> &lt;&lt; temps &lt;&lt; finl;
<a name="l00718"></a>00718       <a class="code" href="classDoubleVect.html">DoubleVect</a> tmp(T); <span class="comment">//!&lt; copie de T</span>
<a name="l00719"></a>00719 <span class="comment"></span>      <span class="keywordtype">int</span> count = 0;
<a name="l00720"></a>00720       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pe = 0; pe &lt; nproc; pe++)
<a name="l00721"></a>00721         {
<a name="l00722"></a>00722           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(tmp, pe, canal); <span class="comment">//!&lt; ne fait rien si pe==0</span>
<a name="l00723"></a>00723 <span class="comment"></span>          <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = tmp.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00724"></a>00724           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a>; i++)
<a name="l00725"></a>00725             {
<a name="l00726"></a>00726               file &lt;&lt; <span class="stringliteral">&quot;T(&quot;</span> &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;)\t = &quot;</span> &lt;&lt; tmp[i] &lt;&lt; finl;
<a name="l00727"></a>00727               count++;
<a name="l00728"></a>00728             }
<a name="l00729"></a>00729         }
<a name="l00730"></a>00730     }
<a name="l00731"></a>00731   <span class="keywordflow">else</span>
<a name="l00732"></a>00732     {
<a name="l00733"></a>00733       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(T, 0, canal);
<a name="l00734"></a>00734     }
<a name="l00735"></a>00735 }
<a name="l00736"></a>00736 
<a name="l00737"></a><a class="code" href="Echange__contact__Correlation__VEF_8cpp.html#a8f9136031752ff5b6e505176a4b6c79a">00737</a> <span class="keywordtype">void</span> <a class="code" href="Echange__contact__Correlation__VEF_8cpp.html#a8f9136031752ff5b6e505176a4b6c79a">Echange_contact_Correlation_VEF_reprendre</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; filename, <span class="keyword">const</span> <span class="keywordtype">double</span> temps, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; T)
<a name="l00738"></a>00738 {
<a name="l00739"></a>00739   <span class="keyword">const</span> <span class="keywordtype">int</span> canal = 56;
<a name="l00740"></a>00740   <span class="keyword">const</span> <span class="keywordtype">int</span> nproc = <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>();
<a name="l00741"></a>00741   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00742"></a>00742     {
<a name="l00743"></a>00743       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Echange_contact_Correlation_VEF::mettre_a_jour: reprise dans le fichier &quot;</span>
<a name="l00744"></a>00744            &lt;&lt; filename &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00745"></a>00745       <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> file(filename);
<a name="l00746"></a>00746       file.<a class="code" href="classEntree.html#a955e06069e0554f46804134964371716" title="Change le comportement en cas d&#39;erreur de l&#39;entree, voir error_handle_() et get_error_action()">set_error_action</a>(<a class="code" href="classEntree.html#a92919bfab8dfa0cfdf8cf8e3dc13b078a3680fe7027fd3fe92932f46bd8967fba">Entree::ERROR_EXIT</a>); <span class="comment">//!&lt; Exit en cas d&#39;erreur de lecture</span>
<a name="l00747"></a>00747 <span class="comment"></span>      file.<a class="code" href="classEntree.html#a8eb17df69e13b62024c8783f0dd99565" title="indique si le stream doit verifier les types des objets lus&lt;br&gt;(ints et nombres flottants). Exemple : l&#39;entree contient 123.456 123.456 int i; check_types(0); is &gt;&gt; i; // i contient 123 check_types(1); is &gt;&gt; i; // Erreur : on lit la chaine 123.456 et on essaye de la convertir en int Voir operator&gt;&gt;(int &amp;)">set_check_types</a>(1); <span class="comment">//!&lt; Verifie que c&#39;est bien des double</span>
<a name="l00748"></a>00748 <span class="comment"></span>      <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> bidon1, bidon2, temps_lu;
<a name="l00749"></a>00749 <span class="comment">// Le format attendu en entete est &quot;Temps = valeur&quot;</span>
<a name="l00750"></a>00750       file &gt;&gt; bidon1 &gt;&gt; bidon2 &gt;&gt; temps_lu;
<a name="l00751"></a>00751       <span class="keywordflow">if</span> (bidon1 != <span class="stringliteral">&quot;Temps&quot;</span> || bidon2 != <span class="stringliteral">&quot;=&quot;</span> || temps_lu != temps)
<a name="l00752"></a>00752         {
<a name="l00753"></a>00753           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Erreur dans Echange_contact_Correlation_VEF::mettre_a_jour() :\n&quot;</span>
<a name="l00754"></a>00754                &lt;&lt; <span class="stringliteral">&quot; On attendait l&#39;entet suivante dans le fichier &quot;</span> &lt;&lt; filename
<a name="l00755"></a>00755                &lt;&lt; <span class="stringliteral">&quot;\n Temps = &quot;</span> &lt;&lt; temps &lt;&lt; finl;
<a name="l00756"></a>00756           <span class="keywordflow">if</span> (temps_lu != temps)
<a name="l00757"></a>00757             {
<a name="l00758"></a>00758               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Le temps indique dans le fichierest different du temps de reprise du calcul &quot;</span> &lt;&lt; temps
<a name="l00759"></a>00759                    &lt;&lt; <span class="stringliteral">&quot;Vous ne pouvez pas faire de reprise pour la correlation.\n&quot;</span>
<a name="l00760"></a>00760                    &lt;&lt; <span class="stringliteral">&quot;Supprimez dans la correlation le mot clef \&quot;Reprise\&quot;.\n&quot;</span>
<a name="l00761"></a>00761                    &lt;&lt; <span class="stringliteral">&quot;La phase transitoire du calcul sera fausse, mais l&#39;etat stationnaire sera juste.&quot;</span> &lt;&lt; finl;
<a name="l00762"></a>00762             }
<a name="l00763"></a>00763           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00764"></a>00764         }
<a name="l00765"></a>00765       <a class="code" href="classDoubleVect.html">DoubleVect</a> tmp(T); <span class="comment">//!&lt; copie de T</span>
<a name="l00766"></a>00766 <span class="comment"></span>      <span class="keywordtype">double</span> <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>;
<a name="l00767"></a>00767       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pe = 0; pe &lt; nproc; pe++)
<a name="l00768"></a>00768         {
<a name="l00769"></a>00769           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(tmp, pe, canal); <span class="comment">//!&lt; ne fait rien si pe==0</span>
<a name="l00770"></a>00770 <span class="comment"></span>          <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = tmp.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00771"></a>00771           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a>; i++)
<a name="l00772"></a>00772             {
<a name="l00773"></a>00773 <span class="comment">// Le format attendu est &quot;T(i) = valeur&quot;</span>
<a name="l00774"></a>00774               file &gt;&gt; bidon1 &gt;&gt; bidon2 &gt;&gt; <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>;
<a name="l00775"></a>00775               tmp[i] = <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>;
<a name="l00776"></a>00776             }
<a name="l00777"></a>00777           <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(tmp, pe, canal); <span class="comment">//!&lt; ne fait rien si pe==0</span>
<a name="l00778"></a>00778 <span class="comment"></span>          <span class="keywordflow">if</span> (pe == 0)
<a name="l00779"></a>00779             T = tmp;
<a name="l00780"></a>00780         }
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782   <span class="keywordflow">else</span>
<a name="l00783"></a>00783     {
<a name="l00784"></a>00784       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(T, 0, canal); <span class="comment">//!&lt; j&#39;envoie un tableau de la bonne taille au proc 0</span>
<a name="l00785"></a>00785 <span class="comment"></span>      <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(T, 0, canal);<span class="comment">//!&lt; je recois le tableau rempli</span>
<a name="l00786"></a>00786 <span class="comment"></span>    }
<a name="l00787"></a>00787 }
<a name="l00788"></a>00788 <span class="comment"></span>
<a name="l00789"></a>00789 <span class="comment">/**</span>
<a name="l00790"></a>00790 <span class="comment"> * Mise a jour de la vitesse, temperature fluide et coeff d&#39;echange</span>
<a name="l00791"></a>00791 <span class="comment"> */</span>
<a name="l00792"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#a18af7b80b6e51358da78071a47766e16">00792</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#a18af7b80b6e51358da78071a47766e16">Echange_contact_Correlation_VEF::mettre_a_jour</a>(<span class="keywordtype">double</span> temps)
<a name="l00793"></a>00793 {
<a name="l00794"></a>00794 
<a name="l00795"></a>00795 <span class="comment">// Nom des fichiers de sauvegarde</span>
<a name="l00796"></a>00796   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> Fichier_sauv_nom = <a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>();
<a name="l00797"></a>00797   Fichier_sauv_nom+=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l00798"></a>00798   Fichier_sauv_nom+=<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>().<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>();
<a name="l00799"></a>00799   Fichier_sauv_nom+=<span class="stringliteral">&quot;.sauv&quot;</span>;
<a name="l00800"></a>00800 
<a name="l00801"></a>00801 <span class="comment">// Operation de reprise du champ de temperature dans le fluide</span>
<a name="l00802"></a>00802   <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#ad8947cf4bc6e2d107405ca81374851c7">Reprise_temperature</a>==1)
<a name="l00803"></a>00803     {
<a name="l00804"></a>00804       <a class="code" href="Echange__contact__Correlation__VEF_8cpp.html#a8f9136031752ff5b6e505176a4b6c79a">Echange_contact_Correlation_VEF_reprendre</a>(Fichier_sauv_nom, temps, <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>);
<a name="l00805"></a>00805       <a class="code" href="classEchange__contact__Correlation__VEF.html#ad8947cf4bc6e2d107405ca81374851c7">Reprise_temperature</a>=0;
<a name="l00806"></a>00806     }
<a name="l00807"></a>00807 
<a name="l00808"></a>00808   <a class="code" href="classEchange__contact__Correlation__VEF.html#a5fa93272d920816ea88b331e8ff7bb8a">calculer_CL</a>();
<a name="l00809"></a>00809   <a class="code" href="classEchange__contact__Correlation__VEF.html#af015992f7feef1014f7d5e2f8b35f96e">calculer_prop_physique</a>();
<a name="l00810"></a>00810   <a class="code" href="classEchange__contact__Correlation__VEF.html#ae4c7e5711bed76bab63a23709cb6ed27">calculer_Q</a>();
<a name="l00811"></a>00811   <a class="code" href="classEchange__contact__Correlation__VEF.html#ae6d53a88febd21624911e102cd192f9a">calculer_Vitesse</a>();
<a name="l00812"></a>00812   <a class="code" href="classEchange__contact__Correlation__VEF.html#a92b24a8c00f7bc70d05e5d6514cb5cfd">calculer_Tfluide</a>();
<a name="l00813"></a>00813 
<a name="l00814"></a>00814 
<a name="l00815"></a>00815 
<a name="l00816"></a>00816   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>; i++)
<a name="l00817"></a>00817     <a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>(i) = <a class="code" href="classEchange__contact__Correlation__VEF.html#ace1aa5014d47c6963d0cfc5bcd832c8e">calculer_coefficient_echange</a>(i);
<a name="l00818"></a>00818 
<a name="l00819"></a>00819   <a class="code" href="classEchange__contact__Correlation__VEF.html#af286e4ae41b339e169fded700260648c">calculer_h_solide</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#ab0e09c2077a0c3b230e4a429452a2ab2" title="le coeff d&#39;echange par correlation">h_solide</a>);
<a name="l00820"></a>00820 
<a name="l00821"></a>00821   <span class="keyword">const</span> <span class="keywordtype">int</span> taille = <a class="code" href="classEchange__contact__Correlation__VEF.html#ab0e09c2077a0c3b230e4a429452a2ab2" title="le coeff d&#39;echange par correlation">h_solide</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00822"></a>00822   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Tparoi = <a class="code" href="classCond__lim__base.html#a8cddc02f544ee44bebd5bae0e6a9581c">champ_front</a>().<a class="code" href="classDeriv__Champ__front__base.html#a5405a20c106b868a23805a45c4436a53">valeur</a>().<a class="code" href="classChamp__front__base.html#a7d124849f85571b21d805a760deefdc0" title="Renvoie le tableau des valeurs du champ.">valeurs</a>();
<a name="l00823"></a>00823   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; mon_eqn = <a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00824"></a>00824   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Ts = mon_eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>();
<a name="l00825"></a>00825   <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zvef = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>,<a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().zone_dis().<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>());
<a name="l00826"></a>00826   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; ma_front_vf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>());
<a name="l00827"></a>00827   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = zvef.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00828"></a>00828   <span class="keyword">const</span> <span class="keywordtype">int</span> ndeb = ma_front_vf.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00829"></a>00829   <span class="keyword">const</span> <span class="keywordtype">double</span> sigma = 5.67e-8;
<a name="l00830"></a>00830   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; face_surfaces = zvef.<a class="code" href="classZone__VF.html#a40c3382b189a4fc508cf1c3e37b04b21">face_surfaces</a>();
<a name="l00831"></a>00831   <span class="keywordtype">int</span> nb_patches=2*(N-2);
<a name="l00832"></a>00832   <a class="code" href="classEchange__contact__Correlation__VEF.html#ad4377b08d02dd3cde0a369b8c600e76d" title="le flux radiatif entre patch">flux_radiatif</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_patches);
<a name="l00833"></a>00833   <a class="code" href="classEchange__contact__Correlation__VEF.html#ad4377b08d02dd3cde0a369b8c600e76d" title="le flux radiatif entre patch">flux_radiatif</a>=0;
<a name="l00834"></a>00834   <a class="code" href="classIntVect.html">IntVect</a> patch_calcule(nb_patches);
<a name="l00835"></a>00835   patch_calcule=0;
<a name="l00836"></a>00836   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0; ii&lt;taille; ii++)
<a name="l00837"></a>00837     {
<a name="l00838"></a>00838       <span class="keywordtype">double</span> Tint=0.;
<a name="l00839"></a>00839       <span class="keywordtype">int</span> face = ndeb+ii;
<a name="l00840"></a>00840       <span class="keywordtype">int</span> elem =  face_voisins(face,0);
<a name="l00841"></a>00841       <span class="keywordflow">if</span>(elem == -1)
<a name="l00842"></a>00842         elem =  face_voisins(face,1);
<a name="l00843"></a>00843 
<a name="l00844"></a>00844 
<a name="l00845"></a>00845 <span class="comment">// on recupere les faces 2, 3 et 4 de l&#39;element contenant &quot;face&quot;</span>
<a name="l00846"></a>00846       <span class="keywordtype">int</span> face2 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,0);
<a name="l00847"></a>00847       <span class="keywordtype">int</span> face3 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,1);
<a name="l00848"></a>00848       <span class="keywordflow">if</span> (face2 == face)
<a name="l00849"></a>00849         face2 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00850"></a>00850       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (face3 == face)
<a name="l00851"></a>00851         face3 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00852"></a>00852 
<a name="l00853"></a>00853       Tint += <a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">pdt_scal</a>(zvef,face,face2,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,1.)*Ts(face2) + <a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">pdt_scal</a>(zvef,face,face3,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,1.)*Ts(face3);
<a name="l00854"></a>00854 
<a name="l00855"></a>00855       <span class="keywordflow">if</span>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> == 3)
<a name="l00856"></a>00856         {
<a name="l00857"></a>00857           <span class="keywordtype">int</span> face4 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,2);
<a name="l00858"></a>00858           <span class="keywordflow">if</span> (face4 == face)
<a name="l00859"></a>00859             face4 = zvef.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>(elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00860"></a>00860           Tint += <a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">pdt_scal</a>(zvef,face,face4,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,1.)*Ts(face4);
<a name="l00861"></a>00861         }
<a name="l00862"></a>00862 
<a name="l00863"></a>00863       Tint *= -1./<a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">pdt_scal</a>(zvef,face,face,elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,1.);
<a name="l00864"></a>00864 
<a name="l00865"></a>00865       <span class="keywordtype">int</span> patch_courant = 0;
<a name="l00866"></a>00866       <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#ac3e3060e74b1e5fd02485f16ffe8bdc2">avec_rayo</a> == 1)
<a name="l00867"></a>00867         {
<a name="l00868"></a>00868           patch_courant = <a class="code" href="classEchange__contact__Correlation__VEF.html#a5d04c4d304e2addab755b40aa6a99c66">correspondance_face_patch</a>(ii);
<a name="l00869"></a>00869           <span class="keywordflow">if</span> (!patch_calcule(patch_courant))
<a name="l00870"></a>00870             {
<a name="l00871"></a>00871               <span class="keywordtype">int</span> patch_en_face = <a class="code" href="classEchange__contact__Correlation__VEF.html#abc54cdba1486ae8ca09955a3f627a073">correspondance_fluide_patch</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(ii),0);
<a name="l00872"></a>00872               <span class="keywordflow">if</span> (patch_en_face == patch_courant)
<a name="l00873"></a>00873                 patch_en_face = <a class="code" href="classEchange__contact__Correlation__VEF.html#abc54cdba1486ae8ca09955a3f627a073">correspondance_fluide_patch</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(ii),1);
<a name="l00874"></a>00874 
<a name="l00875"></a>00875               <span class="keywordtype">double</span> Tp14 = 0.;
<a name="l00876"></a>00876               <span class="keywordtype">double</span> surf1_tot = 0.;
<a name="l00877"></a>00877               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face_patch=0; face_patch&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#aab5b18bab0c1d1ddcb34fb96429eae59">nb_faces_patch</a>(patch_courant); face_patch++)
<a name="l00878"></a>00878                 {
<a name="l00879"></a>00879                   <span class="keywordtype">int</span> f = ndeb+<a class="code" href="classEchange__contact__Correlation__VEF.html#a196a9daf593120086e5b358b39725d26">patches_rayo</a>(patch_courant,face_patch);
<a name="l00880"></a>00880                   <span class="keywordtype">double</span> surf = face_surfaces(f);
<a name="l00881"></a>00881                   Tp14 += surf*pow(Ts(f),4);
<a name="l00882"></a>00882                   surf1_tot += surf;
<a name="l00883"></a>00883                 }
<a name="l00884"></a>00884               Tp14 /= surf1_tot;
<a name="l00885"></a>00885               <span class="keywordtype">double</span> Tp24 = 0.;
<a name="l00886"></a>00886               <span class="keywordtype">double</span> surf2_tot = 0.;
<a name="l00887"></a>00887               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face_patch=0; face_patch&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#aab5b18bab0c1d1ddcb34fb96429eae59">nb_faces_patch</a>(patch_en_face); face_patch++)
<a name="l00888"></a>00888                 {
<a name="l00889"></a>00889                   <span class="keywordtype">int</span> f = ndeb+<a class="code" href="classEchange__contact__Correlation__VEF.html#a196a9daf593120086e5b358b39725d26">patches_rayo</a>(patch_en_face,face_patch);
<a name="l00890"></a>00890                   <span class="keywordtype">double</span> surf = face_surfaces(f);
<a name="l00891"></a>00891                   Tp24 += surf*pow(Ts(f),4);
<a name="l00892"></a>00892                   surf2_tot += surf;
<a name="l00893"></a>00893                 }
<a name="l00894"></a>00894               Tp24 /= surf2_tot;
<a name="l00895"></a>00895 
<a name="l00896"></a>00896               <a class="code" href="classEchange__contact__Correlation__VEF.html#ad4377b08d02dd3cde0a369b8c600e76d" title="le flux radiatif entre patch">flux_radiatif</a>(patch_courant) = sigma*<a class="code" href="classEchange__contact__Correlation__VEF.html#af2bbf5b56aa5d18608262d9e93cd9729">emissivite</a>/(2-<a class="code" href="classEchange__contact__Correlation__VEF.html#af2bbf5b56aa5d18608262d9e93cd9729">emissivite</a>)*(Tp24-Tp14);
<a name="l00897"></a>00897               patch_calcule(patch_courant) = 1;
<a name="l00898"></a>00898               <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#aa5ddab29b9c33bf43f43911d57ef467b">limpr</a>(temps,mon_eqn.<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a0e4f67ef6086c09434ddc161668077b2" title="Renvoie le pas de temps (delta_t) courant.">pas_de_temps</a>()))
<a name="l00899"></a>00899                 {
<a name="l00900"></a>00900 <span class="comment">// Cout &lt;&lt; ii &lt;&lt; &quot; &quot; &lt;&lt; patch_courant &lt;&lt; finl;</span>
<a name="l00901"></a>00901                   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>()&gt;1) <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;Processeur &quot;</span> &lt;&lt; <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00902"></a>00902                   <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; ma_front_vf.<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; patch &quot;</span> &lt;&lt; patch_courant;
<a name="l00903"></a>00903                   <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; : flux radiatif=sigma*eps/(2-eps)*(TP2^4-TP1^4)= &quot;</span> &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#ad4377b08d02dd3cde0a369b8c600e76d" title="le flux radiatif entre patch">flux_radiatif</a>(patch_courant) &lt;&lt; <span class="stringliteral">&quot; W/m2&quot;</span>;
<a name="l00904"></a>00904                   <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; TP2= &quot;</span> &lt;&lt; pow(Tp24,0.25) &lt;&lt; <span class="stringliteral">&quot; K&quot;</span>;
<a name="l00905"></a>00905                   <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; TP1= &quot;</span> &lt;&lt; pow(Tp14,0.25) &lt;&lt; <span class="stringliteral">&quot; K&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00906"></a>00906                 }
<a name="l00907"></a>00907             }
<a name="l00908"></a>00908         }
<a name="l00909"></a>00909       Tparoi(ii,0) = (<a class="code" href="classEchange__contact__Correlation__VEF.html#ab0e09c2077a0c3b230e4a429452a2ab2" title="le coeff d&#39;echange par correlation">h_solide</a>(ii,0)*Tint+<a class="code" href="classEchange__contact__Correlation__VEF.html#ad4377b08d02dd3cde0a369b8c600e76d" title="le flux radiatif entre patch">flux_radiatif</a>(patch_courant)+ <a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(ii))*<a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(ii)))/(<a class="code" href="classEchange__contact__Correlation__VEF.html#ab0e09c2077a0c3b230e4a429452a2ab2" title="le coeff d&#39;echange par correlation">h_solide</a>(ii,0)+<a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a41369f0a2fa87b1a3ace8598834a3bce">correspondance_solide_fluide</a>(ii)));
<a name="l00910"></a>00910     }
<a name="l00911"></a>00911 <span class="comment">// Mise a jour des CLs pour avoir une impression correcte des resultats</span>
<a name="l00912"></a>00912   <a class="code" href="classEchange__contact__Correlation__VEF.html#a5fa93272d920816ea88b331e8ff7bb8a">calculer_CL</a>();
<a name="l00913"></a>00913   <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#aa5ddab29b9c33bf43f43911d57ef467b">limpr</a>(temps,mon_eqn.<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a0e4f67ef6086c09434ddc161668077b2" title="Renvoie le pas de temps (delta_t) courant.">pas_de_temps</a>())) <a class="code" href="classEchange__contact__Correlation__VEF.html#a0aa95dcd55fdc136f842b57330898740">imprimer</a>(temps);
<a name="l00914"></a>00914 
<a name="l00915"></a>00915   <a class="code" href="classEchange__contact__Correlation__VEF.html#a18af7b80b6e51358da78071a47766e16">Temperature_imposee_paroi::mettre_a_jour</a>(temps);
<a name="l00916"></a>00916 
<a name="l00917"></a>00917   <a class="code" href="Echange__contact__Correlation__VEF_8cpp.html#adbfe2a3e7678c13e710b7e5706e93e70">Echange_contact_Correlation_VEF_sauvegarder</a>(Fichier_sauv_nom, temps, <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>);
<a name="l00918"></a>00918 }
<a name="l00919"></a>00919 
<a name="l00920"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#af1125ff9d5ec7ccea3ef81fd230135af">00920</a> <span class="keywordtype">int</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#af1125ff9d5ec7ccea3ef81fd230135af" title="Renvoie un booleen indiquant la compatibilite des conditions aux limites avec l&#39;equation specifiee en...">Echange_contact_Correlation_VEF::compatible_avec_eqn</a>(<span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn)<span class="keyword"> const</span>
<a name="l00921"></a>00921 <span class="keyword"></span>{
<a name="l00922"></a>00922   <span class="keywordflow">if</span> ( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classConduction.html" title="Classe Conduction Cette classe represente l&#39;equation d&#39;evolution de la temperature dans un solide de ...">Conduction</a>, eqn) )
<a name="l00923"></a>00923     <span class="keywordflow">return</span> 1;
<a name="l00924"></a>00924   <span class="keywordflow">else</span>
<a name="l00925"></a>00925     {
<a name="l00926"></a>00926       <a class="code" href="classCond__lim__base.html#a765ac31df36a6f010e65a668961cc735" title="Cette methode est appelee quand la condition aux limites n&#39;est pas compatible avec l&#39;equation sur laq...">err_pas_compatible</a>(eqn);
<a name="l00927"></a>00927       <span class="keywordflow">return</span> 0;
<a name="l00928"></a>00928     }
<a name="l00929"></a>00929 }
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 <span class="comment"></span>
<a name="l00932"></a>00932 <span class="comment">/**</span>
<a name="l00933"></a>00933 <span class="comment"> * Teste si l&#39;impression est demandee</span>
<a name="l00934"></a>00934 <span class="comment"> */</span>
<a name="l00935"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#aa5ddab29b9c33bf43f43911d57ef467b">00935</a> <span class="keywordtype">int</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#aa5ddab29b9c33bf43f43911d57ef467b">Echange_contact_Correlation_VEF::limpr</a>(<span class="keywordtype">double</span> temps_courant,<span class="keywordtype">double</span> dt)<span class="keyword"> const</span>
<a name="l00936"></a>00936 <span class="keyword"></span>{
<a name="l00937"></a>00937   <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch = <a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>();
<a name="l00938"></a>00938 <span class="comment">// Test un peu tordu, mais ca fonctionne !!!! (CM 05/07/2007)</span>
<a name="l00939"></a>00939   <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#a19a42f29aac5ae0bf90e8efd51622e2d">dt_impr</a>&lt;=dt || ((sch.<a class="code" href="classSchema__Temps__base.html#a1c3b1eb35bf0fc0da015c27ec33b710a" title="Renvoie une reference sur le temps maximum.">temps_max</a>()&lt;=temps_courant || sch.<a class="code" href="classSchema__Temps__base.html#a27bf9c5a67bf4a1ddd036640ebcb26bc" title="Renvoie une reference sur le nombre de pas maxi.">nb_pas_dt_max</a>()&lt;=(sch.<a class="code" href="classSchema__Temps__base.html#a247769eddf9c0bfcaabc50b8dd90d401" title="Renvoie le nombre de pas de temps effectues.">nb_pas_dt</a>()+1) || (temps_courant!=sch.<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>() &amp;&amp; sch.<a class="code" href="classSchema__Temps__base.html#a247769eddf9c0bfcaabc50b8dd90d401" title="Renvoie le nombre de pas de temps effectues.">nb_pas_dt</a>()==0)) &amp;&amp; <a class="code" href="classEchange__contact__Correlation__VEF.html#a19a42f29aac5ae0bf90e8efd51622e2d">dt_impr</a>!=1e10))
<a name="l00940"></a>00940     <span class="keywordflow">return</span> 1;
<a name="l00941"></a>00941   <span class="keywordflow">else</span>
<a name="l00942"></a>00942     {
<a name="l00943"></a>00943 <span class="comment">// Voir Schema_Temps_base::limpr pour information sur epsilon et modf</span>
<a name="l00944"></a>00944       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> epsilon = 1.e-9;
<a name="l00945"></a>00945       <span class="keywordtype">double</span> i, j;
<a name="l00946"></a>00946       modf(temps_courant/<a class="code" href="classEchange__contact__Correlation__VEF.html#a19a42f29aac5ae0bf90e8efd51622e2d">dt_impr</a> + epsilon, &amp;i);
<a name="l00947"></a>00947       modf((temps_courant-dt)/<a class="code" href="classEchange__contact__Correlation__VEF.html#a19a42f29aac5ae0bf90e8efd51622e2d">dt_impr</a> + epsilon, &amp;j);
<a name="l00948"></a>00948       <span class="keywordflow">return</span> ( i&gt;j );
<a name="l00949"></a>00949     }
<a name="l00950"></a>00950 }
<a name="l00951"></a>00951 
<a name="l00952"></a>00952 <span class="comment"></span>
<a name="l00953"></a>00953 <span class="comment">/**</span>
<a name="l00954"></a>00954 <span class="comment"> * Imprime les resultats</span>
<a name="l00955"></a>00955 <span class="comment"> */</span>
<a name="l00956"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#a0aa95dcd55fdc136f842b57330898740">00956</a> <span class="keywordtype">void</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#a0aa95dcd55fdc136f842b57330898740">Echange_contact_Correlation_VEF::imprimer</a>(<span class="keywordtype">double</span> temps)<span class="keyword"> const</span>
<a name="l00957"></a>00957 <span class="keyword"></span>{
<a name="l00958"></a>00958   <span class="keyword">const</span> <span class="keywordtype">int</span> ME = <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>();
<a name="l00959"></a>00959   <span class="keyword">const</span> <span class="keywordtype">int</span> nbproc = <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>();
<a name="l00960"></a>00960 
<a name="l00961"></a>00961   <span class="keywordflow">if</span> (nbproc&gt;1)
<a name="l00962"></a>00962     {
<a name="l00963"></a>00963       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>,ME,0,ME);
<a name="l00964"></a>00964       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>,ME,0,ME);
<a name="l00965"></a>00965       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a1bf9d5590c338937a77702ddc0bf6abd">U</a>,ME,0,ME);
<a name="l00966"></a>00966       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>,ME,0,ME);
<a name="l00967"></a>00967       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a70a928aedcf3a92b68156cfc8ee3a67a">rho</a>,ME,0,ME);
<a name="l00968"></a>00968       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a9ef728f85354ace957ca3ada903ffbe5">mu</a>,ME,0,ME);
<a name="l00969"></a>00969       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a46a94fbd278297cdeaf6ba7fcfeffc51">lambda</a>,ME,0,ME);
<a name="l00970"></a>00970       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#abe2234bb04c81b1ec11309a4951f11c1" title="puissance volumique dans le fluide 1D">Qvol</a>,ME,0,ME);
<a name="l00971"></a>00971       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>,ME,0,ME);
<a name="l00972"></a>00972       <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classEchange__contact__Correlation__VEF.html#ad4377b08d02dd3cde0a369b8c600e76d" title="le flux radiatif entre patch">flux_radiatif</a>,ME,0,ME);
<a name="l00973"></a>00973 
<a name="l00974"></a>00974       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00975"></a>00975         {
<a name="l00976"></a>00976           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_bord=<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>().<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>();
<a name="l00977"></a>00977           nom_bord+=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l00978"></a>00978           nom_bord+=<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(temps);
<a name="l00979"></a>00979           nom_bord+=<span class="stringliteral">&quot;.dat&quot;</span>;
<a name="l00980"></a>00980           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic(nom_bord);
<a name="l00981"></a>00981           fic.<a class="code" href="classSortie__Fichier__base.html#a489ca01946f4e2a7a9aa8f3a3d949b08">precision</a>(<a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().equation().schema_temps().precision_impr());
<a name="l00982"></a>00982           fic.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l00983"></a>00983           <span class="keywordtype">double</span> Qt=0.;
<a name="l00984"></a>00984           fic &lt;&lt; <span class="stringliteral">&quot;# X                T                U                h                rho                mu                lambda                Q[W]&quot;</span>;
<a name="l00985"></a>00985           <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#ac3e3060e74b1e5fd02485f16ffe8bdc2">avec_rayo</a>) fic &lt;&lt; <span class="stringliteral">&quot;                Flux_radiatif(W/m2)&quot;</span>;
<a name="l00986"></a>00986           fic &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00987"></a>00987 
<a name="l00988"></a>00988           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p=0; p&lt;nbproc; p++)
<a name="l00989"></a>00989             {
<a name="l00990"></a>00990               <a class="code" href="classDoubleVect.html">DoubleVect</a> coord_tmp;
<a name="l00991"></a>00991               <a class="code" href="classDoubleVect.html">DoubleVect</a> T_tmp;
<a name="l00992"></a>00992               <a class="code" href="classDoubleVect.html">DoubleVect</a> U_tmp;
<a name="l00993"></a>00993               <a class="code" href="classDoubleVect.html">DoubleVect</a> h_tmp;
<a name="l00994"></a>00994               <a class="code" href="classDoubleVect.html">DoubleVect</a> rho_tmp;
<a name="l00995"></a>00995               <a class="code" href="classDoubleVect.html">DoubleVect</a> mu_tmp;
<a name="l00996"></a>00996               <a class="code" href="classDoubleVect.html">DoubleVect</a> lambda_tmp;
<a name="l00997"></a>00997               <a class="code" href="classDoubleVect.html">DoubleVect</a> Qvol_tmp;
<a name="l00998"></a>00998               <a class="code" href="classDoubleVect.html">DoubleVect</a> vol_tmp;
<a name="l00999"></a>00999               <a class="code" href="classDoubleVect.html">DoubleVect</a> flux_radiatif_tmp;
<a name="l01000"></a>01000 
<a name="l01001"></a>01001               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(coord_tmp,p,0,p);
<a name="l01002"></a>01002               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(T_tmp,p,0,p);
<a name="l01003"></a>01003               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(U_tmp,p,0,p);
<a name="l01004"></a>01004               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(h_tmp,p,0,p);
<a name="l01005"></a>01005               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(rho_tmp,p,0,p);
<a name="l01006"></a>01006               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(mu_tmp,p,0,p);
<a name="l01007"></a>01007               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(lambda_tmp,p,0,p);
<a name="l01008"></a>01008               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(Qvol_tmp,p,0,p);
<a name="l01009"></a>01009               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(vol_tmp,p,0,p);
<a name="l01010"></a>01010               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(flux_radiatif_tmp,p,0,p);
<a name="l01011"></a>01011 
<a name="l01012"></a>01012               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;coord_tmp.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
<a name="l01013"></a>01013                 {
<a name="l01014"></a>01014                   fic &lt;&lt; coord_tmp(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; T_tmp(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; U_tmp(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; h_tmp(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> ;
<a name="l01015"></a>01015                   fic  &lt;&lt; rho_tmp(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; mu_tmp(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; lambda_tmp(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; Qvol_tmp(i)*vol_tmp(i);
<a name="l01016"></a>01016                   <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#ac3e3060e74b1e5fd02485f16ffe8bdc2">avec_rayo</a> &amp;&amp; i&gt;0 &amp;&amp; i&lt;coord_tmp.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()-1) fic &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; flux_radiatif_tmp(i-1);
<a name="l01017"></a>01017                   fic &lt;&lt; finl;
<a name="l01018"></a>01018                   Qt+=Qvol_tmp(i)*vol_tmp(i);
<a name="l01019"></a>01019                 }
<a name="l01020"></a>01020 
<a name="l01021"></a>01021             }
<a name="l01022"></a>01022           fic &lt;&lt; <span class="stringliteral">&quot;# Q total[W] = &quot;</span> &lt;&lt; Qt &lt;&lt; finl;
<a name="l01023"></a>01023           fic &lt;&lt; finl;
<a name="l01024"></a>01024         }
<a name="l01025"></a>01025     }
<a name="l01026"></a>01026   <span class="keywordflow">else</span>
<a name="l01027"></a>01027     {
<a name="l01028"></a>01028       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_bord=<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>().<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>();
<a name="l01029"></a>01029       nom_bord+=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l01030"></a>01030       nom_bord+=<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(temps);
<a name="l01031"></a>01031       nom_bord+=<span class="stringliteral">&quot;.dat&quot;</span>;
<a name="l01032"></a>01032       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic(nom_bord);
<a name="l01033"></a>01033       fic.<a class="code" href="classSortie__Fichier__base.html#a489ca01946f4e2a7a9aa8f3a3d949b08">precision</a>(<a class="code" href="classCond__lim__base.html#a1d3b434c49499d6e7c69311f86119c92" title="Renvoie la zone des conditions aux limites discretisee dont l&#39;objet fait partie.">zone_Cl_dis</a>().equation().schema_temps().precision_impr());
<a name="l01034"></a>01034       fic.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l01035"></a>01035       <span class="keywordtype">double</span> Qt=0.;
<a name="l01036"></a>01036       fic &lt;&lt; <span class="stringliteral">&quot;# X                 T                 U                 h                 rho                 mu                 lambda                  Q[W]&quot;</span>;
<a name="l01037"></a>01037       <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#ac3e3060e74b1e5fd02485f16ffe8bdc2">avec_rayo</a>) fic &lt;&lt; <span class="stringliteral">&quot;                Flux_radiatif(W/m2)&quot;</span>;
<a name="l01038"></a>01038       fic &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01039"></a>01039 
<a name="l01040"></a>01040       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i =0; i&lt;<a class="code" href="classEchange__contact__Correlation__VEF.html#a15fa6c71014b1c5abed6b105be9ec028" title="nb de points du maillage 1D pour la vitesse et la temperature">N</a>; i++)
<a name="l01041"></a>01041         {
<a name="l01042"></a>01042           fic &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#ad1056e6deeefb3dc24224f0a46cd6a2e" title="coordonnees des points de discretisation 1D">coord</a>(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a0327e8ea7959f056d6f765329110d184" title="inconnues fluides vitesse et temperature">T</a>(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a1bf9d5590c338937a77702ddc0bf6abd">U</a>(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a758edfc5fe8bcf4cbc1808b715ead19d" title="le coeff d&#39;echange par correlation">h_correlation</a>(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a70a928aedcf3a92b68156cfc8ee3a67a">rho</a>(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> ;
<a name="l01043"></a>01043           fic &lt;&lt;    <a class="code" href="classEchange__contact__Correlation__VEF.html#a9ef728f85354ace957ca3ada903ffbe5">mu</a>(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#a46a94fbd278297cdeaf6ba7fcfeffc51">lambda</a>(i) &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#abe2234bb04c81b1ec11309a4951f11c1" title="puissance volumique dans le fluide 1D">Qvol</a>(i)*<a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>(i);
<a name="l01044"></a>01044           <span class="keywordflow">if</span> (<a class="code" href="classEchange__contact__Correlation__VEF.html#ac3e3060e74b1e5fd02485f16ffe8bdc2">avec_rayo</a> &amp;&amp; i&gt;0 &amp;&amp; i&lt;N-1) fic &lt;&lt; <span class="stringliteral">&quot; \t&quot;</span> &lt;&lt; <a class="code" href="classEchange__contact__Correlation__VEF.html#ad4377b08d02dd3cde0a369b8c600e76d" title="le flux radiatif entre patch">flux_radiatif</a>(i-1);
<a name="l01045"></a>01045           fic &lt;&lt; finl;
<a name="l01046"></a>01046           Qt+=<a class="code" href="classEchange__contact__Correlation__VEF.html#abe2234bb04c81b1ec11309a4951f11c1" title="puissance volumique dans le fluide 1D">Qvol</a>(i)*<a class="code" href="classEchange__contact__Correlation__VEF.html#a6bf216c144a5b6e6cbe2fc546e9c412c" title="volumes des tranches Sdz du volume suivant la direction de l&#39;ecoulement">vol</a>(i);
<a name="l01047"></a>01047         }
<a name="l01048"></a>01048       fic &lt;&lt; <span class="stringliteral">&quot;# Q total[W] = &quot;</span> &lt;&lt; Qt &lt;&lt; finl;
<a name="l01049"></a>01049       fic &lt;&lt; finl;
<a name="l01050"></a>01050 
<a name="l01051"></a>01051     }
<a name="l01052"></a>01052 
<a name="l01053"></a>01053 }
<a name="l01054"></a>01054 
<a name="l01055"></a>01055 <span class="comment">// Attention : la normale a la face num_face est suppose sortante</span>
<a name="l01056"></a>01056 <span class="comment">// tandis que celle a la face num2 est reorientee dans la methode</span>
<a name="l01057"></a>01057 <span class="comment">// afin d etre sortante.</span>
<a name="l01058"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#aa9c304e21dcb5c533da6aaba05eff932">01058</a> <span class="keywordtype">double</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#aa9c304e21dcb5c533da6aaba05eff932">Echange_contact_Correlation_VEF::pdt_scalSqrt</a>(<span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone,<span class="keywordtype">int</span> num_face,<span class="keywordtype">int</span> num2,
<a name="l01059"></a>01059                                                      <span class="keywordtype">int</span> num_elem,<span class="keywordtype">int</span> dim,<span class="keywordtype">double</span> diffu)
<a name="l01060"></a>01060 {
<a name="l01061"></a>01061   <span class="keywordtype">double</span> pscal;
<a name="l01062"></a>01062 
<a name="l01063"></a>01063   pscal = la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,0)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num2,0)
<a name="l01064"></a>01064           + la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,1)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num2,1);
<a name="l01065"></a>01065   <span class="keywordflow">if</span> (dim == 3)
<a name="l01066"></a>01066     pscal += la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,2)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num2,2);
<a name="l01067"></a>01067   pscal = sqrt(fabs(pscal));
<a name="l01068"></a>01068 
<a name="l01069"></a>01069   <span class="keywordflow">return</span> (pscal*diffu)/la_zone.<a class="code" href="classZone__VF.html#aea771c835e561469d2d21dbca5fac1cf" title="renvoie le volume de la maille i.">volumes</a>(num_elem);
<a name="l01070"></a>01070 }
<a name="l01071"></a>01071 
<a name="l01072"></a>01072 <span class="comment">// Attention : la normal a la face num_face est suppose sortante</span>
<a name="l01073"></a>01073 <span class="comment">// tandis que celle a la face num2 est reorientee dans la methode</span>
<a name="l01074"></a>01074 <span class="comment">// afin d etre sortante.</span>
<a name="l01075"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">01075</a> <span class="keywordtype">double</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#a2fa6c2fb3df84e0f63edb83817fddb98">Echange_contact_Correlation_VEF::pdt_scal</a>(<span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone,<span class="keywordtype">int</span> num_face,<span class="keywordtype">int</span> num2,
<a name="l01076"></a>01076                                                  <span class="keywordtype">int</span> num_elem,<span class="keywordtype">int</span> dim,<span class="keywordtype">double</span> diffu)
<a name="l01077"></a>01077 {
<a name="l01078"></a>01078   <span class="keywordtype">double</span> pscal;
<a name="l01079"></a>01079   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisinsF = la_zone.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l01080"></a>01080 
<a name="l01081"></a>01081   pscal = la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,0)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num2,0)
<a name="l01082"></a>01082           + la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,1)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num2,1);
<a name="l01083"></a>01083   <span class="keywordflow">if</span> (dim == 3)
<a name="l01084"></a>01084     pscal += la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,2)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num2,2);
<a name="l01085"></a>01085 
<a name="l01086"></a>01086   <span class="keywordflow">if</span> ( (face_voisinsF(num_face,0) == face_voisinsF(num2,0)) ||
<a name="l01087"></a>01087        (face_voisinsF(num_face,1) == face_voisinsF(num2,1))) pscal = -pscal;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089   <span class="keywordflow">return</span> (pscal*diffu)/la_zone.<a class="code" href="classZone__VF.html#aea771c835e561469d2d21dbca5fac1cf" title="renvoie le volume de la maille i.">volumes</a>(num_elem);
<a name="l01090"></a>01090 }
<a name="l01091"></a><a class="code" href="classEchange__contact__Correlation__VEF.html#ae163772a1348d0ae177ab104ffe5d222">01091</a> <span class="keywordtype">double</span> <a class="code" href="classEchange__contact__Correlation__VEF.html#ae163772a1348d0ae177ab104ffe5d222">Echange_contact_Correlation_VEF::surfacesVEF</a>(<span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone,<span class="keywordtype">int</span> num_face,<span class="keywordtype">int</span> dim)
<a name="l01092"></a>01092 {
<a name="l01093"></a>01093   <span class="keywordtype">double</span> pscal;
<a name="l01094"></a>01094 
<a name="l01095"></a>01095   pscal = la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,0)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,0)
<a name="l01096"></a>01096           + la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,1)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,1);
<a name="l01097"></a>01097   <span class="keywordflow">if</span> (dim == 3)
<a name="l01098"></a>01098     pscal += la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,2)*la_zone.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>(num_face,2);
<a name="l01099"></a>01099   pscal = sqrt(pscal);
<a name="l01100"></a>01100 
<a name="l01101"></a>01101   <span class="keywordflow">return</span> pscal;
<a name="l01102"></a>01102 }
<a name="l01103"></a>01103 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:42 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
