<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Dilatable/Quasi_Compressible/Milieu/Fluide_Quasi_Compressible.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Dilatable/Quasi_Compressible/Milieu/Fluide_Quasi_Compressible.cpp</div>  </div>
</div>
<div class="contents">
<a href="Fluide__Quasi__Compressible_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Fluide_Quasi_Compressible.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Dilatable/Quasi_Compressible/Milieu</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/49</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Fluide__Quasi__Compressible_8h.html">Fluide_Quasi_Compressible.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Discretisation__base_8h.html">Discretisation_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Loi__Etat__Multi__GP__QC_8h.html">Loi_Etat_Multi_GP_QC.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Fonc__Fonction_8h.html">Champ_Fonc_Fonction.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Neumann__sortie__libre_8h.html">Neumann_sortie_libre.h</a>&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="Fluide__Quasi__Compressible_8cpp.html#a002e86f2ec4d7e7b3d6b4e0b6eafb01a">00031</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classFluide__Quasi__Compressible.html" title="classe Fluide_Quasi_Compressible Cette classe represente un d&#39;un fluide quasi compressible c&#39;est a di...">Fluide_Quasi_Compressible</a>,<span class="stringliteral">&quot;Fluide_Quasi_Compressible&quot;</span>,<a class="code" href="classFluide__Dilatable__base.html" title="classe Fluide_Dilatable_base Cette classe represente un d&#39;un fluide dilatable, heritant de fluide bas...">Fluide_Dilatable_base</a>);
<a name="l00032"></a>00032 <span class="comment">// XD fluide_quasi_compressible fluide_dilatable_base fluide_quasi_compressible -1 Quasi-compressible flow with a low mach number assumption; this means that the thermo-dynamic pressure (used in state law) is uniform in space.</span>
<a name="l00033"></a>00033 <span class="comment">// XD attr sutherland bloc_sutherland sutherland 1 Sutherland law for viscosity and for conductivity.</span>
<a name="l00034"></a>00034 <span class="comment">// XD attr pression double pression 1 Initial thermo-dynamic pressure used in the assosciated state law.</span>
<a name="l00035"></a>00035 <span class="comment">// XD attr loi_etat loi_etat_base loi_etat 1 The state law that will be associated to the Quasi-compressible fluid.</span>
<a name="l00036"></a>00036 <span class="comment">// XD attr traitement_pth chaine(into=[&quot;edo&quot;,&quot;constant&quot;,&quot;conservation_masse&quot;]) traitement_pth 1 Particular treatment for the thermodynamic pressure Pth ; there are three possibilities: NL2 1) with the keyword \&#39;edo\&#39; the code computes Pth solving an O.D.E. ; in this case, the mass is not strictly conserved (it is the default case for quasi compressible computation): NL2 2) the keyword \&#39;conservation_masse\&#39; forces the conservation of the mass (closed geometry or with periodic boundaries condition) NL2 3) the keyword \&#39;constant\&#39; makes it possible to have a constant Pth ; it\&#39;s the good choice when the flow is open (e.g. with pressure boundary conditions). NL2 It is possible to monitor the volume averaged value for temperature and density, plus Pth evolution in the .evol_glob file.</span>
<a name="l00037"></a>00037 <span class="comment">// XD attr traitement_rho_gravite chaine(into=[&quot;standard&quot;,&quot;moins_rho_moyen&quot;]) traitement_rho_gravite 1 It may be :1) \`standard\` : the gravity term is evaluted with rho*g (It is the default). 2) \`moins_rho_moyen\` : the gravity term is evaluated with (rho-rhomoy) *g. Unknown pressure is then P*=P+rhomoy*g*z. It is useful when you apply uniforme pressure boundary condition like P*=0.</span>
<a name="l00038"></a>00038 <span class="comment">// XD attr temps_debut_prise_en_compte_drho_dt double temps_debut_prise_en_compte_drho_dt 1 While time&lt;value, dRho/dt is set to zero (Rho, volumic mass). Useful for some calculation during the first time steps with big variation of temperature and volumic mass.</span>
<a name="l00039"></a>00039 <span class="comment">// XD attr omega_relaxation_drho_dt double omega_relaxation_drho_dt 1 Optional option to have a relaxed algorithm to solve the mass equation. value is used (1 per default) to specify omega.</span>
<a name="l00040"></a>00040 <span class="comment">// XD attr lambda field_base lambda_u 1 Conductivity (W.m-1.K-1).</span>
<a name="l00041"></a>00041 <span class="comment">// XD attr mu field_base mu 1 Dynamic viscosity (kg.m-1.s-1).</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="comment">// XD bloc_sutherland objet_lecture nul 0 Sutherland law for viscosity mu(T)=mu0*((T0+C)/(T+C))*(T/T0)**1.5 and (optional) for conductivity lambda(T)=mu0*Cp/Prandtl*((T0+Slambda)/(T+Slambda))*(T/T0)**1.5</span>
<a name="l00044"></a>00044 <span class="comment">// XD attr problem_name ref_Pb_base problem_name 0 Name of problem.</span>
<a name="l00045"></a>00045 <span class="comment">// XD attr mu0 chaine(into=[&quot;mu0&quot;]) mu0 0 not_set</span>
<a name="l00046"></a>00046 <span class="comment">// XD attr mu0_val double mu0_val 0 not_set</span>
<a name="l00047"></a>00047 <span class="comment">// XD attr t0 chaine(into=[&quot;T0&quot;]) t0 0 not_set</span>
<a name="l00048"></a>00048 <span class="comment">// XD attr t0_val double t0_val 0 not_set</span>
<a name="l00049"></a>00049 <span class="comment">// XD attr Slambda chaine(into=[&quot;Slambda&quot;]) Slambda 1 not_set</span>
<a name="l00050"></a>00050 <span class="comment">// XD attr s double s 1 not_set</span>
<a name="l00051"></a>00051 <span class="comment">// XD attr C chaine(into=[&quot;C&quot;]) C 0 not_set</span>
<a name="l00052"></a>00052 <span class="comment">// XD attr c_val double c_val 0 not_set</span>
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="classFluide__Quasi__Compressible.html#a750b0f86d6ecb38b0d668bfc058853d7">00054</a> <a class="code" href="classFluide__Quasi__Compressible.html#a750b0f86d6ecb38b0d668bfc058853d7">Fluide_Quasi_Compressible::Fluide_Quasi_Compressible</a>() : traitement_rho_gravite_(0),
<a name="l00055"></a>00055   temps_debut_prise_en_compte_drho_dt_(-<a class="code" href="Double_8h.html#ae0ee0cebfad5968da0ad6cc7a49e16b6">DMAXFLOAT</a>),omega_drho_dt_(1.) { }
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="classFluide__Quasi__Compressible.html#aedf1a84b30f6e025121cf8e62b958c6b">00057</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classFluide__Quasi__Compressible.html#aedf1a84b30f6e025121cf8e62b958c6b" title="Ecrit les proprietes du fluide sur un flot de sortie.">Fluide_Quasi_Compressible::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00058"></a>00058 <span class="keyword"></span>{
<a name="l00059"></a>00059   os &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00060"></a>00060   <a class="code" href="classMilieu__base.html#a4f822b3be5b1c7c5eed44dd72f805299" title="Ecrit un objet milieu sur un flot de sortie. Ecrit les caracteristiques du milieu: - masse volumique ...">Fluide_Dilatable_base::ecrire</a>(os);
<a name="l00061"></a>00061   <span class="keywordflow">return</span> os;
<a name="l00062"></a>00062 }
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="classFluide__Quasi__Compressible.html#a6f11f47facef2006f244d9244796fb64">00064</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classFluide__Quasi__Compressible.html#a6f11f47facef2006f244d9244796fb64" title="Lit les caracteristiques du fluide a partir d&#39;un flot d&#39;entree. Format: Fluide_base { Mu type_champ b...">Fluide_Quasi_Compressible::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00065"></a>00065 {
<a name="l00066"></a>00066   <a class="code" href="classFluide__Quasi__Compressible.html#a6f11f47facef2006f244d9244796fb64" title="Lit les caracteristiques du fluide a partir d&#39;un flot d&#39;entree. Format: Fluide_base { Mu type_champ b...">Fluide_Dilatable_base::readOn</a>(is);
<a name="l00067"></a>00067   <span class="keywordflow">return</span> is;
<a name="l00068"></a>00068 }
<a name="l00069"></a>00069 
<a name="l00070"></a><a class="code" href="classFluide__Quasi__Compressible.html#a06228c62db5b8eb52b7ab8e62e7e51a6">00070</a> <span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#a06228c62db5b8eb52b7ab8e62e7e51a6">Fluide_Quasi_Compressible::checkTraitementPth</a>(<span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp; zone_cl)
<a name="l00071"></a>00071 {
<a name="l00072"></a>00072   <span class="comment">/*</span>
<a name="l00073"></a>00073 <span class="comment">   * traitement_PTh=0 =&gt; resolution classique de l&#39;edo</span>
<a name="l00074"></a>00074 <span class="comment">   * traitement_PTh=1 =&gt; pression calculee pour conserver la masse</span>
<a name="l00075"></a>00075 <span class="comment">   * traitement_PTh=2 =&gt; pression laissee cste.</span>
<a name="l00076"></a>00076 <span class="comment">   */</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   <span class="keywordflow">if</span> (<a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a>==0)
<a name="l00079"></a>00079     {
<a name="l00080"></a>00080       <span class="comment">/* Do nothing*/</span>
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082   <span class="keywordflow">else</span>
<a name="l00083"></a>00083     {
<a name="l00084"></a>00084       <span class="keywordtype">int</span> pression_imposee=0;
<a name="l00085"></a>00085       <span class="keywordtype">int</span> size=zone_cl.<a class="code" href="classZone__Cl__dis.html#aafbd0525703e23200e31796bcd4fcac6" title="Appel a l&#39;objet sous-jacent Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>().size();
<a name="l00086"></a>00086       assert(size!=0);
<a name="l00087"></a>00087       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n=0; n&lt;size; n++)
<a name="l00088"></a>00088         {
<a name="l00089"></a>00089           <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = zone_cl.<a class="code" href="classZone__Cl__dis.html#aafbd0525703e23200e31796bcd4fcac6" title="Appel a l&#39;objet sous-jacent Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>(n);
<a name="l00090"></a>00090           <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classNeumann__sortie__libre.html" title="classe Neumann_sortie_libre Cette classe represente une frontiere ouverte sans vitesse imposee Pour l...">Neumann_sortie_libre</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>())) pression_imposee=1;
<a name="l00091"></a>00091         }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093       <span class="keywordflow">if</span> (pression_imposee &amp;&amp; <a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a>!=2)
<a name="l00094"></a>00094         {
<a name="l00095"></a>00095           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00096"></a>00096             {
<a name="l00097"></a>00097               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The Traitement_Pth option selected is not coherent with the boundaries conditions.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00098"></a>00098               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Traitement_Pth constant must be used for the case of free outlet.&quot;</span> &lt;&lt; finl;
<a name="l00099"></a>00099             }
<a name="l00100"></a>00100           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00101"></a>00101         }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103       <span class="keywordflow">if</span> (!pression_imposee &amp;&amp; <a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a>!=1)
<a name="l00104"></a>00104         {
<a name="l00105"></a>00105           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00106"></a>00106             {
<a name="l00107"></a>00107               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The Traitement_Pth option selected is not coherent with the boundaries conditions.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00108"></a>00108               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Traitement_Pth conservation_masse must be used for the case without free outlet.&quot;</span> &lt;&lt; finl;
<a name="l00109"></a>00109             }
<a name="l00110"></a>00110           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00111"></a>00111         }
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113 }
<a name="l00114"></a>00114 
<a name="l00115"></a><a class="code" href="classFluide__Quasi__Compressible.html#a0847f39262538d146e49036846a58dcc">00115</a> <span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#a0847f39262538d146e49036846a58dcc">Fluide_Quasi_Compressible::set_param</a>(<a class="code" href="classParam.html" title="Defined below in this file.">Param</a>&amp; param)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117   <a class="code" href="classFluide__Quasi__Compressible.html#a0847f39262538d146e49036846a58dcc">Fluide_Dilatable_base::set_param</a>(param);
<a name="l00118"></a>00118   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;temps_debut_prise_en_compte_drho_dt&quot;</span>,&amp;<a class="code" href="classFluide__Quasi__Compressible.html#ae73f4006178f9edd5380560ab4a358c3">temps_debut_prise_en_compte_drho_dt_</a>);
<a name="l00119"></a>00119   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;omega_relaxation_drho_dt&quot;</span>,&amp;<a class="code" href="classFluide__Quasi__Compressible.html#a651e7b02c12889c95492cbab02d3ec42">omega_drho_dt_</a>);
<a name="l00120"></a>00120   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;pression&quot;</span>,(<span class="keyword">this</span>),<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
<a name="l00121"></a>00121   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;Traitement_rho_gravite&quot;</span>,(<span class="keyword">this</span>));
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a><a class="code" href="classFluide__Quasi__Compressible.html#a57484a1f59a9108c79232dea757ce77d">00124</a> <span class="keywordtype">int</span> <a class="code" href="classFluide__Quasi__Compressible.html#a57484a1f59a9108c79232dea757ce77d" title="Lecture des parametres de type non simple d&#39;un objet_U a partir d&#39;un flot d&#39;entree.">Fluide_Quasi_Compressible::lire_motcle_non_standard</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; mot, <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00125"></a>00125 {
<a name="l00126"></a>00126   <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;pression&quot;</span>)
<a name="l00127"></a>00127     {
<a name="l00128"></a>00128       is&gt;&gt;<a class="code" href="classFluide__Dilatable__base.html#aa07d9ecb4d311a296048a52984ffabf5">Pth_</a>;
<a name="l00129"></a>00129       <a class="code" href="classFluide__Dilatable__base.html#a4f06ab1ad30953302bb0daca97c5e18b">Pth_n</a> = <a class="code" href="classFluide__Dilatable__base.html#aa07d9ecb4d311a296048a52984ffabf5">Pth_</a>;
<a name="l00130"></a>00130       <a class="code" href="classMilieu__base.html#a3bf5bffa8e79c50c22bf19d26da61676">rho</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;Champ_Uniforme&quot;</span>);
<a name="l00131"></a>00131       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_rho=<a class="code" href="classMilieu__base.html#a3bf5bffa8e79c50c22bf19d26da61676">rho</a>.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>();
<a name="l00132"></a>00132       tab_rho.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1,1);
<a name="l00133"></a>00133       tab_rho(0,0) = 1.;
<a name="l00134"></a>00134       <span class="keywordflow">return</span> 1;
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;Traitement_PTh&quot;</span>)
<a name="l00137"></a>00137     {
<a name="l00138"></a>00138       <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> trait;
<a name="l00139"></a>00139       is &gt;&gt; trait;
<a name="l00140"></a>00140       <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_options(3);
<a name="l00141"></a>00141       {
<a name="l00142"></a>00142         les_options[0] = <span class="stringliteral">&quot;edo&quot;</span>;
<a name="l00143"></a>00143         les_options[1] = <span class="stringliteral">&quot;conservation_masse&quot;</span>;
<a name="l00144"></a>00144         les_options[2] = <span class="stringliteral">&quot;constant&quot;</span>;
<a name="l00145"></a>00145       }
<a name="l00146"></a>00146       <a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a>=les_options.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(trait);
<a name="l00147"></a>00147       <span class="keywordflow">if</span> (<a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a> == -1)
<a name="l00148"></a>00148         {
<a name="l00149"></a>00149           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt; trait &lt;&lt; <span class="stringliteral">&quot; is not understood as an option of the keyword &quot;</span> &lt;&lt; mot &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00150"></a>00150           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt; <span class="stringliteral">&quot;One of the following options was expected : &quot;</span> &lt;&lt; les_options &lt;&lt; finl;
<a name="l00151"></a>00151           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00152"></a>00152         }
<a name="l00153"></a>00153       <span class="keywordflow">return</span> 1;
<a name="l00154"></a>00154     }
<a name="l00155"></a>00155   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;Traitement_rho_gravite&quot;</span>)
<a name="l00156"></a>00156     {
<a name="l00157"></a>00157       <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> trait;
<a name="l00158"></a>00158       is &gt;&gt; trait;
<a name="l00159"></a>00159       <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_options(2);
<a name="l00160"></a>00160       {
<a name="l00161"></a>00161         les_options[0] = <span class="stringliteral">&quot;standard&quot;</span>;
<a name="l00162"></a>00162         les_options[1] = <span class="stringliteral">&quot;moins_rho_moyen&quot;</span>;
<a name="l00163"></a>00163       }
<a name="l00164"></a>00164       <a class="code" href="classFluide__Quasi__Compressible.html#a2df0b82292327ac91d351f31d15078fe" title="0 : gravite = rho*g, 1 : gravite =(rho-rho_moy)*g">traitement_rho_gravite_</a>=les_options.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(trait);
<a name="l00165"></a>00165       <span class="keywordflow">if</span> (<a class="code" href="classFluide__Quasi__Compressible.html#a2df0b82292327ac91d351f31d15078fe" title="0 : gravite = rho*g, 1 : gravite =(rho-rho_moy)*g">traitement_rho_gravite_</a> == -1)
<a name="l00166"></a>00166         {
<a name="l00167"></a>00167           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt; trait &lt;&lt; <span class="stringliteral">&quot; is not understood as an option of the keyword &quot;</span> &lt;&lt; mot &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00168"></a>00168           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt; <span class="stringliteral">&quot;One of the following options was expected : &quot;</span> &lt;&lt; les_options &lt;&lt; finl;
<a name="l00169"></a>00169           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00170"></a>00170         }
<a name="l00171"></a>00171       <span class="keywordflow">return</span> 1;
<a name="l00172"></a>00172     }
<a name="l00173"></a>00173   <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classFluide__Quasi__Compressible.html#a57484a1f59a9108c79232dea757ce77d" title="Lecture des parametres de type non simple d&#39;un objet_U a partir d&#39;un flot d&#39;entree.">Fluide_Dilatable_base::lire_motcle_non_standard</a>(mot,is);
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="comment">// Precondition:</span>
<a name="l00177"></a>00177 <span class="comment">// Parametre: Pb_Thermohydraulique&amp; pb</span>
<a name="l00178"></a>00178 <span class="comment">// Signification: le probleme a resoudre</span>
<a name="l00179"></a>00179 <span class="comment">// Valeurs par defaut:</span>
<a name="l00180"></a>00180 <span class="comment">// Contraintes:</span>
<a name="l00181"></a>00181 <span class="comment">// Acces: lecture</span>
<a name="l00182"></a>00182 <span class="comment">// </span>
<a name="l00183"></a>00183 <span class="comment">// Signification:</span>
<a name="l00184"></a>00184 <span class="comment">// Contraintes:</span>
<a name="l00185"></a>00185 <span class="comment">// Exception:</span>
<a name="l00186"></a>00186 <span class="comment">// Effets de bord:</span>
<a name="l00187"></a>00187 <span class="comment">// Postcondition:</span>
<a name="l00188"></a>00188 <span class="comment">//</span><span class="comment"></span>
<a name="l00189"></a>00189 <span class="comment">//! Complete le fluide avec les champs inconnus associes au probleme</span>
<a name="l00190"></a><a class="code" href="classFluide__Quasi__Compressible.html#a2406312d68c74c52795212e4043abd04">00190</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#a2406312d68c74c52795212e4043abd04" title="Complete le fluide avec les champs inconnus associes au probleme.">Fluide_Quasi_Compressible::completer</a>(<span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb)
<a name="l00191"></a>00191 {
<a name="l00192"></a>00192   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Fluide_Quasi_Compressible::completer Pth = &quot;</span> &lt;&lt; <a class="code" href="classFluide__Dilatable__base.html#aa07d9ecb4d311a296048a52984ffabf5">Pth_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00193"></a>00193   <span class="keywordflow">if</span> ((<a class="code" href="classFluide__Dilatable__base.html#a56e92d198c499815831015174bbf996e">loi_etat_</a>-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Loi_Etat_rhoT_Gaz_Parfait_QC&quot;</span> || <a class="code" href="classFluide__Dilatable__base.html#a56e92d198c499815831015174bbf996e">loi_etat_</a>-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Loi_Etat_Binaire_Gaz_Parfait_QC&quot;</span> )
<a name="l00194"></a>00194       &amp;&amp; <a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a> == 0)
<a name="l00195"></a>00195     {
<a name="l00196"></a>00196       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The option Traitement_PTh EDO is not allowed with the state law &quot;</span> &lt;&lt; <a class="code" href="classFluide__Dilatable__base.html#a56e92d198c499815831015174bbf996e">loi_etat_</a>-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; finl;
<a name="l00197"></a>00197       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Set **traitement_pth** constant or conservation_masse in the Fluide_Quasi_Compressible bloc definition.&quot;</span> &lt;&lt; finl;
<a name="l00198"></a>00198       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201   <a class="code" href="classFluide__Quasi__Compressible.html#a2406312d68c74c52795212e4043abd04" title="Complete le fluide avec les champs inconnus associes au probleme.">Fluide_Dilatable_base::completer</a>(pb);
<a name="l00202"></a>00202   <span class="keywordflow">if</span> (<a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a> != 2) <a class="code" href="classFluide__Quasi__Compressible.html#afd8f776e9889057e06aab094ac1175ff">completer_edo</a>(pb);
<a name="l00203"></a>00203 }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="comment">// Precondition:</span>
<a name="l00206"></a>00206 <span class="comment">// Parametre:</span>
<a name="l00207"></a>00207 <span class="comment">// Signification:</span>
<a name="l00208"></a>00208 <span class="comment">// Valeurs par defaut:</span>
<a name="l00209"></a>00209 <span class="comment">// Contraintes:</span>
<a name="l00210"></a>00210 <span class="comment">// Acces:</span>
<a name="l00211"></a>00211 <span class="comment">// </span>
<a name="l00212"></a>00212 <span class="comment">// Signification:</span>
<a name="l00213"></a>00213 <span class="comment">// Contraintes:</span>
<a name="l00214"></a>00214 <span class="comment">// Exception:</span>
<a name="l00215"></a>00215 <span class="comment">// Effets de bord:</span>
<a name="l00216"></a>00216 <span class="comment">// Postcondition:</span>
<a name="l00217"></a>00217 <span class="comment">//</span><span class="comment"></span>
<a name="l00218"></a>00218 <span class="comment">//! Prepare le pas de temps</span>
<a name="l00219"></a><a class="code" href="classFluide__Quasi__Compressible.html#a3c4fc0c30a5afb795c6cd13ef7491427">00219</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#a3c4fc0c30a5afb795c6cd13ef7491427" title="Prepare le pas de temps.">Fluide_Quasi_Compressible::preparer_pas_temps</a>()
<a name="l00220"></a>00220 {
<a name="l00221"></a>00221   <a class="code" href="classFluide__Quasi__Compressible.html#a3c4fc0c30a5afb795c6cd13ef7491427" title="Prepare le pas de temps.">Fluide_Dilatable_base::preparer_pas_temps</a>();
<a name="l00222"></a>00222   <span class="keywordflow">if</span> (<a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a> != 2 ) <a class="code" href="classFluide__Quasi__Compressible.html#a0eec42711557351f32fff63cf3f685b5">EDO_Pth_</a>-&gt;mettre_a_jour_CL(<a class="code" href="classFluide__Dilatable__base.html#aa07d9ecb4d311a296048a52984ffabf5">Pth_</a>);
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00225"></a><a class="code" href="classFluide__Quasi__Compressible.html#a028ab2abccd1bbec6648b2169416a124">00225</a> <span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#a028ab2abccd1bbec6648b2169416a124">Fluide_Quasi_Compressible::discretiser</a>(<span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb, <span class="keyword">const</span>  <a class="code" href="classDiscretisation__base.html" title="classe Discretisation_base Cette classe represente un schema de discretisation en espace...">Discretisation_base</a>&amp; dis)
<a name="l00226"></a>00226 {
<a name="l00227"></a>00227   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis=pb.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>();
<a name="l00228"></a>00228   <span class="keywordtype">double</span> temps=pb.<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 <span class="comment">// In *_Melange_Binaire_QC we do not even have a temperature variable ...</span>
<a name="l00231"></a>00231 <span class="comment">// it is the species mass fraction Y1... Although named ch_temperature</span>
<a name="l00232"></a>00232   <a class="code" href="classChamp__Don.html" title="classe Champ_Don Classe generique de la hierarchie des champs donnes, un objet Champ_Don peut referen...">Champ_Don</a>&amp; ch_TK = <a class="code" href="classFluide__Dilatable__base.html#afb2fe4b8a5681f0f762a0794aaa6df7c" title="Renvoie le champ de le temperature.">ch_temperature</a>();
<a name="l00233"></a>00233   <span class="keywordflow">if</span> (pb.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()==<span class="stringliteral">&quot;Pb_Hydraulique_Melange_Binaire_QC&quot;</span> || pb.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()==<span class="stringliteral">&quot;Pb_Hydraulique_Melange_Binaire_Turbulent_QC&quot;</span>)
<a name="l00234"></a>00234     dis.<a class="code" href="classDiscretisation__base.html#a03257807e08369739ccc39eba02f74b5">discretiser_champ</a>(<span class="stringliteral">&quot;temperature&quot;</span>,zone_dis,<span class="stringliteral">&quot;fraction_massique&quot;</span>,<span class="stringliteral">&quot;neant&quot;</span>,1,temps,ch_TK);
<a name="l00235"></a>00235   <span class="keywordflow">else</span>
<a name="l00236"></a>00236     dis.<a class="code" href="classDiscretisation__base.html#a03257807e08369739ccc39eba02f74b5">discretiser_champ</a>(<span class="stringliteral">&quot;temperature&quot;</span>,zone_dis,<span class="stringliteral">&quot;temperature&quot;</span>,<span class="stringliteral">&quot;K&quot;</span>,1,temps,ch_TK);
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <span class="keywordflow">if</span> (<a class="code" href="classFluide__Dilatable__base.html#af310e9aeafbd35af667d91bb88714537">type_fluide</a>()!=<span class="stringliteral">&quot;Gaz_Parfait&quot;</span>)
<a name="l00239"></a>00239     <a class="code" href="classFluide__Dilatable__base.html#a3225165b2a79168fd28eaafa1b879165">loi_etat</a>().<a class="code" href="classDeriv__Loi__Etat__base.html#afb5f511e2f3bed1d613fbad6fcf3add8">valeur</a>().<a class="code" href="classLoi__Etat__base.html#ab7f8562c78f7cc41790a096bcb70bfad">champs_compris</a>().<a class="code" href="classChamps__compris.html#aae00ca562b7d89ff638fae94d6973fcf">ajoute_champ</a>(ch_TK);
<a name="l00240"></a>00240 
<a name="l00241"></a>00241   <a class="code" href="classFluide__Quasi__Compressible.html#a028ab2abccd1bbec6648b2169416a124">Fluide_Dilatable_base::discretiser</a>(pb,dis);
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="classFluide__Quasi__Compressible.html#a36ef7dd2f8de2d8599bad934fc964c3a">00244</a> <span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#a36ef7dd2f8de2d8599bad934fc964c3a">Fluide_Quasi_Compressible::prepare_pressure_edo</a>()
<a name="l00245"></a>00245 {
<a name="l00246"></a>00246   <span class="keywordflow">if</span> (<a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a> != 2) <a class="code" href="classFluide__Quasi__Compressible.html#a0eec42711557351f32fff63cf3f685b5">EDO_Pth_</a>-&gt;completer();
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   <a class="code" href="classFluide__Dilatable__base.html#a4e9e5750206f63eba3d4a6939d401af7">eos_tools_</a>-&gt;mettre_a_jour(<a class="code" href="classFluide__Dilatable__base.html#a68f1590cd1e3864527256b45a92522f8">le_probleme_</a>-&gt;schema_temps().temps_courant());
<a name="l00249"></a>00249 }
<a name="l00250"></a>00250 
<a name="l00251"></a><a class="code" href="classFluide__Quasi__Compressible.html#a7e455455e145f144b49c7ed6c5368d0c">00251</a> <span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#a7e455455e145f144b49c7ed6c5368d0c">Fluide_Quasi_Compressible::write_mean_edo</a>(<span class="keywordtype">double</span> temps)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253   <span class="keywordtype">double</span> Ch_m = <a class="code" href="classFluide__Dilatable__base.html#a4e9e5750206f63eba3d4a6939d401af7">eos_tools_</a>-&gt;moyenne_vol(<a class="code" href="classFluide__Dilatable__base.html#a43f55d0af01f0a608bc18858f1991959">inco_chaleur_</a>-&gt;valeurs());
<a name="l00254"></a>00254   <span class="keywordtype">double</span> rhom = <a class="code" href="classFluide__Dilatable__base.html#a4e9e5750206f63eba3d4a6939d401af7">eos_tools_</a>-&gt;moyenne_vol(<a class="code" href="classMilieu__base.html#a3bf5bffa8e79c50c22bf19d26da61676">rho</a>.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>());
<a name="l00255"></a>00255 
<a name="l00256"></a>00256   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>() &amp;&amp; <a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a> != 2)
<a name="l00257"></a>00257     {
<a name="l00258"></a>00258       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (<a class="code" href="classFluide__Quasi__Compressible.html#a80e8af2eeb30fc3b46e484c08a7ea77f">output_file_</a>,ios::app);
<a name="l00259"></a>00259       fic&lt;&lt;temps &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;Ch_m&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;rhom&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;<a class="code" href="classFluide__Dilatable__base.html#aa07d9ecb4d311a296048a52984ffabf5">Pth_</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00260"></a>00260     }
<a name="l00261"></a>00261 }
<a name="l00262"></a>00262 
<a name="l00263"></a><a class="code" href="classFluide__Quasi__Compressible.html#afd8f776e9889057e06aab094ac1175ff">00263</a> <span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#afd8f776e9889057e06aab094ac1175ff">Fluide_Quasi_Compressible::completer_edo</a>(<span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb)
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265   assert(<a class="code" href="classFluide__Dilatable__base.html#a01daaa6fb56a5d6862b5b7f46cb35ff1" title="flag pour le traitement de la pression thermo">traitement_PTh</a> != 2);
<a name="l00266"></a>00266   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> typ = pb.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a324a761eaad25eb00d18e14764a1362e" title="Renvoie la discretisation associee a l&#39;equation.">discretisation</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00267"></a>00267   <span class="keywordflow">if</span> (typ==<span class="stringliteral">&quot;VEFPreP1B&quot;</span>) typ = <span class="stringliteral">&quot;VEF&quot;</span>;
<a name="l00268"></a>00268   typ += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00269"></a>00269 <span class="comment">// EDO_Pression_th_VDF/VEF_Melange_Binaire not implemented yet</span>
<a name="l00270"></a>00270 <span class="comment">// typer Gaz_Parfait instead to use when traitement_PTh=1...</span>
<a name="l00271"></a>00271   <span class="keywordflow">if</span> (pb.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()==<span class="stringliteral">&quot;Pb_Hydraulique_Melange_Binaire_QC&quot;</span> || pb.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()==<span class="stringliteral">&quot;Pb_Hydraulique_Melange_Binaire_Turbulent_QC&quot;</span>)
<a name="l00272"></a>00272     typ +=<span class="stringliteral">&quot;Gaz_Parfait&quot;</span>;
<a name="l00273"></a>00273   <span class="keywordflow">else</span>
<a name="l00274"></a>00274     typ += <a class="code" href="classFluide__Dilatable__base.html#a56e92d198c499815831015174bbf996e">loi_etat_</a>-&gt;type_fluide();
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <a class="code" href="classFluide__Quasi__Compressible.html#a0eec42711557351f32fff63cf3f685b5">EDO_Pth_</a>.<a class="code" href="classEDO__Pression__th.html#aee83bd8e0201e167449b5960004c9359" title="Type la loi d&#39;etat.">typer</a>(typ);
<a name="l00277"></a>00277   <a class="code" href="classFluide__Quasi__Compressible.html#a0eec42711557351f32fff63cf3f685b5">EDO_Pth_</a>-&gt;associer_zones(pb.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>(),pb.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>());
<a name="l00278"></a>00278   <a class="code" href="classFluide__Quasi__Compressible.html#a0eec42711557351f32fff63cf3f685b5">EDO_Pth_</a>-&gt;associer_fluide(*<span class="keyword">this</span>);
<a name="l00279"></a>00279   <a class="code" href="classFluide__Quasi__Compressible.html#a0eec42711557351f32fff63cf3f685b5">EDO_Pth_</a>-&gt;mettre_a_jour_CL(<a class="code" href="classFluide__Dilatable__base.html#aa07d9ecb4d311a296048a52984ffabf5">Pth_</a>);
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 <span class="comment">// Write in file</span>
<a name="l00282"></a>00282   <a class="code" href="classFluide__Quasi__Compressible.html#a80e8af2eeb30fc3b46e484c08a7ea77f">output_file_</a> = <a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>();
<a name="l00283"></a>00283   <a class="code" href="classFluide__Quasi__Compressible.html#a80e8af2eeb30fc3b46e484c08a7ea77f">output_file_</a> += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00284"></a>00284   <a class="code" href="classFluide__Quasi__Compressible.html#a80e8af2eeb30fc3b46e484c08a7ea77f">output_file_</a> += pb.<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>();
<a name="l00285"></a>00285   <a class="code" href="classFluide__Quasi__Compressible.html#a80e8af2eeb30fc3b46e484c08a7ea77f">output_file_</a> += <span class="stringliteral">&quot;.evol_glob&quot;</span>;
<a name="l00286"></a>00286 
<a name="l00287"></a>00287   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Warning! evol_glob file renamed &quot;</span> &lt;&lt; <a class="code" href="classFluide__Quasi__Compressible.html#a80e8af2eeb30fc3b46e484c08a7ea77f">output_file_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00288"></a>00288   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00289"></a>00289     {
<a name="l00290"></a>00290       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (<a class="code" href="classFluide__Quasi__Compressible.html#a80e8af2eeb30fc3b46e484c08a7ea77f">output_file_</a>);
<a name="l00291"></a>00291       fic&lt;&lt;<span class="stringliteral">&quot;# Time sum(T*dv)/sum(dv)[K] sum(rho*dv)/sum(dv)[kg/m3] Pth[Pa]&quot;</span>&lt;&lt;finl;
<a name="l00292"></a>00292     }
<a name="l00293"></a>00293 }
<a name="l00294"></a>00294 
<a name="l00295"></a><a class="code" href="classFluide__Quasi__Compressible.html#ab78de15a7fdc59467045e05b55072f31">00295</a> <span class="keywordtype">void</span> <a class="code" href="classFluide__Quasi__Compressible.html#ab78de15a7fdc59467045e05b55072f31">Fluide_Quasi_Compressible::remplir_champ_pression_tot</a>(<span class="keywordtype">int</span> n, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; PHydro, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; PTot)
<a name="l00296"></a>00296 {
<a name="l00297"></a>00297   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0 ; i&lt;n ; i++) PTot(i,0) = PHydro(i,0) + <a class="code" href="classFluide__Dilatable__base.html#aa07d9ecb4d311a296048a52984ffabf5">Pth_</a>;
<a name="l00298"></a>00298 }
<a name="l00299"></a>00299 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:32 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
