<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/MEDimpl/Format_Post_Med.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/MEDimpl/Format_Post_Med.cpp</div>  </div>
</div>
<div class="contents">
<a href="Format__Post__Med_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Format_Post_Med.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/MEDimpl</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/23</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;<a class="code" href="Format__Post__Med_8h.html">Format_Post_Med.h</a>&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Comm__Group_8h.html">Comm_Group.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="EcrMED_8h.html">EcrMED.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="EcrFicPartage_8h.html">EcrFicPartage.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="EFichier_8h.html">EFichier.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="med_09_09_8h.html">med++.h</a>&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a><a class="code" href="Format__Post__Med_8cpp.html#ac7a8979ca77dca66e1fa96a924225e3d">00030</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classFormat__Post__Med.html" title=": Classe de postraitement des champs euleriens au format med.">Format_Post_Med</a>,<span class="stringliteral">&quot;Format_Post_Med&quot;</span>,<a class="code" href="classFormat__Post__base.html" title="Classe de base des formats de postraitements pour les champs&lt;br&gt;(lata, med, lml, meshtv). Utilisation de la classe par l&#39;interface generique: -typer un objet format de postraitement -initialiser l objet format de postraitement -proceder a des operations de complement et verification -ecrire un domaine -ecrire_temps -ecrire_champ (un type de champ supporte: aux elements ou aux sommets, ou encore aux faces si on a ecrit les faces du domaine et si les faces sont supportees par le postraitement)">Format_Post_base</a>);
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="comment">//</span>
<a name="l00034"></a>00034 <span class="comment">// Parametre: med_basename_</span>
<a name="l00035"></a>00035 <span class="comment">// Signification: debut du nom du fichier</span>
<a name="l00036"></a>00036 <span class="comment">// Extension med</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="comment">// Specificites de ce format</span>
<a name="l00039"></a>00039 <span class="comment">// Generation d un fichier format.med.data exploitable pour reecrire les donnees a un autre format</span>
<a name="l00040"></a>00040 <span class="comment">// -Methodes completer_post_med(...) et preparer_post_med(...) pour generer les fichiers</span>
<a name="l00041"></a>00041 <span class="comment">// -Metode finir_med(...) pour concatener les fichiers crees</span>
<a name="l00042"></a>00042 <span class="comment">//</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="comment">//</span><span class="comment"></span>
<a name="l00045"></a>00045 <span class="comment">//! Constructeur par defaut:</span>
<a name="l00046"></a>00046 <span class="comment"></span>
<a name="l00047"></a>00047 <span class="comment">// Specifier dans commentaire ce qui est fixe par defaut</span>
<a name="l00048"></a><a class="code" href="classFormat__Post__Med.html#a26ecdf8c1e7434890cd2021541866e6f">00048</a> <a class="code" href="classFormat__Post__Med.html#a26ecdf8c1e7434890cd2021541866e6f" title="Constructeur par defaut:">Format_Post_Med::Format_Post_Med</a>()
<a name="l00049"></a>00049 {
<a name="l00050"></a>00050   <a class="code" href="classFormat__Post__Med.html#aabda7b1d65fdb30bc3ac63d04162b911" title="Remet l&#39;objet dans l&#39;etat obtenu par le constructeur par defaut.">reset</a>();
<a name="l00051"></a>00051 }
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="comment">//</span><span class="comment"></span>
<a name="l00054"></a>00054 <span class="comment">//! Remet l&#39;objet dans l&#39;etat obtenu par le constructeur par defaut.</span>
<a name="l00055"></a><a class="code" href="classFormat__Post__Med.html#aabda7b1d65fdb30bc3ac63d04162b911">00055</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classFormat__Post__Med.html#aabda7b1d65fdb30bc3ac63d04162b911" title="Remet l&#39;objet dans l&#39;etat obtenu par le constructeur par defaut.">Format_Post_Med::reset</a>()
<a name="l00056"></a>00056 {
<a name="l00057"></a>00057   <a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a> = <span class="stringliteral">&quot;??&quot;</span>;
<a name="l00058"></a>00058 }
<a name="l00059"></a>00059 <span class="comment"></span>
<a name="l00060"></a>00060 <span class="comment">//! erreur =&gt; exit</span>
<a name="l00061"></a><a class="code" href="classFormat__Post__Med.html#a618bc42123f0c413611f088ed9309c53">00061</a> <span class="comment"></span><a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classFormat__Post__Med.html#a618bc42123f0c413611f088ed9309c53" title="erreur =&gt; exit">Format_Post_Med::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00062"></a>00062 <span class="keyword"></span>{
<a name="l00063"></a>00063   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Format_Post_Meshtv::printOn : error&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00064"></a>00064   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00065"></a>00065   <span class="keywordflow">return</span> os;
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="comment">//</span>
<a name="l00069"></a>00069 <span class="comment">//</span>
<a name="l00070"></a>00070 <span class="comment">//</span>
<a name="l00071"></a>00071 <span class="comment">//</span><span class="comment"></span>
<a name="l00072"></a>00072 <span class="comment">//! Lecture des parametres du postraitement au format &quot;jeu de donnees&quot;&lt;br&gt;Le format attendu est le suivant:&lt;br&gt;{&lt;br&gt;nom_fichier filename_sans_extension&lt;br&gt;}</span>
<a name="l00073"></a><a class="code" href="classFormat__Post__Med.html#a7f5fcbd0a72b0cf190411b2d357dfa50">00073</a> <span class="comment"></span><a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classFormat__Post__Med.html#a7f5fcbd0a72b0cf190411b2d357dfa50" title="Lecture des parametres du postraitement au format &quot;jeu de donnees&quot; Le format attendu est le suivant: ...">Format_Post_Med::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00074"></a>00074 {
<a name="l00075"></a>00075   <a class="code" href="classFormat__Post__Med.html#a7f5fcbd0a72b0cf190411b2d357dfa50" title="Lecture des parametres du postraitement au format &quot;jeu de donnees&quot; Le format attendu est le suivant: ...">Format_Post_base::readOn</a>(is);
<a name="l00076"></a>00076   <span class="keywordflow">return</span> is;
<a name="l00077"></a>00077 }
<a name="l00078"></a>00078 
<a name="l00079"></a><a class="code" href="classFormat__Post__Med.html#ad09d4daad2a39e68380e1236075569e3">00079</a> <span class="keywordtype">void</span> <a class="code" href="classFormat__Post__Med.html#ad09d4daad2a39e68380e1236075569e3">Format_Post_Med::set_param</a>(<a class="code" href="classParam.html" title="Defined below in this file.">Param</a>&amp; param)
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;nom_fichier&quot;</span>,&amp;<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">//</span><span class="comment"></span>
<a name="l00085"></a>00085 <span class="comment">//! Initialisation de la classe avec des parametres par&lt;br&gt;defaut</span>
<a name="l00086"></a><a class="code" href="classFormat__Post__Med.html#a5950166bdb6a4aa21153a06224d4fddf">00086</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a5950166bdb6a4aa21153a06224d4fddf" title="Initialisation de la classe avec des parametres par defaut.">Format_Post_Med::initialize_by_default</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; file_basename)
<a name="l00087"></a>00087 {
<a name="l00088"></a>00088   <a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>= file_basename;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   <span class="keywordflow">return</span> 1;
<a name="l00091"></a>00091 }
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="classFormat__Post__Med.html#a12cd5d3818b727b6b29814aecf241324">00093</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a12cd5d3818b727b6b29814aecf241324">Format_Post_Med::initialize</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; file_basename, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; format, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; option_para)
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095   <a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>= file_basename;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="keywordflow">return</span> 1;
<a name="l00098"></a>00098 }
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="classFormat__Post__Med.html#a8a092cd1924ad06f8652f1c596e7a0a0">00100</a> <a class="code" href="classEcrMED.html">EcrMED</a> <a class="code" href="classFormat__Post__Med.html#a8a092cd1924ad06f8652f1c596e7a0a0">Format_Post_Med::getEcrMED</a>()<span class="keyword"> const</span>
<a name="l00101"></a>00101 <span class="keyword"></span>{
<a name="l00102"></a>00102   <a class="code" href="classEcrMED.html">EcrMED</a> e;
<a name="l00103"></a>00103   e.<a class="code" href="classEcrMED.html#ae654a4cd4b1683de91f80fcfb1d621eb">setMajorMode</a>(<span class="keyword">false</span>);
<a name="l00104"></a>00104   <span class="keywordflow">return</span> e;
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#afa97255235efd94aa5818e55a35ccce0">Format_Post_Med::ecrire_entete</a>(<span class="keywordtype">double</span> temps_courant,<span class="keywordtype">int</span> reprise,<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; est_le_premier_post)
<a name="l00108"></a>00108 {
<a name="l00109"></a>00109 
<a name="l00110"></a>00110   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00111"></a>00111   nom_fich +=<span class="stringliteral">&quot;.&quot;</span>;
<a name="l00112"></a>00112   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> format=<span class="stringliteral">&quot;med&quot;</span>;
<a name="l00113"></a>00113   nom_fich += format;
<a name="l00114"></a>00114   nom_fich += <span class="stringliteral">&quot;.index&quot;</span>;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   <a class="code" href="classFormat__Post__Med.html#a212a5082b4c890582202ed268b2ecaa5">ecrire_entete_med</a>(nom_fich,est_le_premier_post);
<a name="l00117"></a>00117   <span class="keywordflow">return</span> 1;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 }
<a name="l00120"></a>00120 
<a name="l00121"></a><a class="code" href="classFormat__Post__Med.html#a913292234163bf8fffa8296d1ec7ee24">00121</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a913292234163bf8fffa8296d1ec7ee24">Format_Post_Med::finir</a>(<span class="keywordtype">int</span>&amp; est_le_dernier_post)
<a name="l00122"></a>00122 {
<a name="l00123"></a>00123   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fic_base(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00124"></a>00124   nom_fic_base += <span class="stringliteral">&quot;.med&quot;</span>;
<a name="l00125"></a>00125   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fic=nom_fic_base.<a class="code" href="classNom.html#a49a5c6438b6efe73ab314900c60a329c" title="Insere _prefix000n (n=me() ou nproc()) dans un nom de fichier (par ex:toto.titi) pour donner toto_pre...">nom_me</a>(<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00126"></a>00126   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;MED file &quot;</span> &lt;&lt; nom_fic &lt;&lt; <span class="stringliteral">&quot; closed. See .index file for more infos.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00127"></a>00127   <span class="keywordflow">return</span> 1;
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="classFormat__Post__Med.html#ae5ce17dc31d8752f7be243bce8426e3c">00131</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#ae5ce17dc31d8752f7be243bce8426e3c">Format_Post_Med::completer_post</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom,<span class="keyword">const</span> <span class="keywordtype">int</span> is_axi,
<a name="l00132"></a>00132                                     <span class="keyword">const</span> <a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646b" title="This is a base class from which inherit Champ_base and Champ_front_base. It handles all the generic a...">Nature_du_champ</a>&amp; nature,<span class="keyword">const</span> <span class="keywordtype">int</span> nb_compo,<span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms_compo,
<a name="l00133"></a>00133                                     <span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; loc_post,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; le_nom_champ_post)
<a name="l00134"></a>00134 {
<a name="l00135"></a>00135   <span class="keywordflow">return</span> 1;
<a name="l00136"></a>00136   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich2(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00137"></a>00137   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> format=<span class="stringliteral">&quot;med&quot;</span>;
<a name="l00138"></a>00138   nom_fich2 += <span class="stringliteral">&quot;.&quot;</span>;
<a name="l00139"></a>00139   nom_fich2 += format;
<a name="l00140"></a>00140   nom_fich2 += <span class="stringliteral">&quot;.med1&quot;</span>;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom1(le_nom_champ_post);
<a name="l00143"></a>00143   nom1 += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00144"></a>00144   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom2(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(loc_post).majuscule());
<a name="l00145"></a>00145   nom1 += nom2;
<a name="l00146"></a>00146 
<a name="l00147"></a>00147   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_post(le_nom_champ_post);
<a name="l00148"></a>00148   <span class="keywordflow">if</span> (loc_post==<span class="stringliteral">&quot;SOM&quot;</span>)
<a name="l00149"></a>00149     {
<a name="l00150"></a>00150       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>());
<a name="l00151"></a>00151       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_som_&quot;</span>);
<a name="l00152"></a>00152       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_SOM_&quot;</span>);
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (loc_post==<span class="stringliteral">&quot;ELEM&quot;</span>)
<a name="l00155"></a>00155     {
<a name="l00156"></a>00156       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>());
<a name="l00157"></a>00157       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_ELEM_&quot;</span>);
<a name="l00158"></a>00158       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_elem_&quot;</span>);
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (loc_post==<span class="stringliteral">&quot;FACES&quot;</span>)
<a name="l00161"></a>00161     {
<a name="l00162"></a>00162       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>());
<a name="l00163"></a>00163       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_FACES_&quot;</span>);
<a name="l00164"></a>00164       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_faces_&quot;</span>);
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166   nom_post+=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l00167"></a>00167   nom_post+=nom2;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169   <a class="code" href="classFormat__Post__Med.html#a837afacc61806bceb3167be658345e61">completer_post_med</a>(nom_fich2,nom_post,nom2);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="keywordflow">return</span> 1;
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a><a class="code" href="classFormat__Post__Med.html#aa6d0d47628d2e021b998b2f8c24353d0">00174</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#aa6d0d47628d2e021b998b2f8c24353d0">Format_Post_Med::preparer_post</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; id_du_domaine,<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; est_le_premier_post,
<a name="l00175"></a>00175                                    <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; reprise,
<a name="l00176"></a>00176                                    <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; t_init)
<a name="l00177"></a>00177 {
<a name="l00178"></a>00178   <span class="keywordflow">return</span> 1;
<a name="l00179"></a>00179   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich1(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00180"></a>00180   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich2(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00181"></a>00181   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich3(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> format=<span class="stringliteral">&quot;med&quot;</span>;
<a name="l00185"></a>00185   nom_fich1 += <span class="stringliteral">&quot;.&quot;</span>;
<a name="l00186"></a>00186   nom_fich1 += format;
<a name="l00187"></a>00187   nom_fich1 += <span class="stringliteral">&quot;.med0&quot;</span>;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   nom_fich2 += <span class="stringliteral">&quot;.&quot;</span>;
<a name="l00190"></a>00190   nom_fich2 += format;
<a name="l00191"></a>00191   nom_fich2 += <span class="stringliteral">&quot;.med1&quot;</span>;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   nom_fich3 += <span class="stringliteral">&quot;.&quot;</span>;
<a name="l00194"></a>00194   nom_fich3 += format;
<a name="l00195"></a>00195   nom_fich3 += <span class="stringliteral">&quot;.med2&quot;</span>;
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   <a class="code" href="classFormat__Post__Med.html#a72475302d2a424adec3bb413a05d12e8">preparer_post_med</a>(nom_fich1,nom_fich2,nom_fich3,id_du_domaine,est_le_premier_post);
<a name="l00198"></a>00198   <span class="keywordflow">return</span> 1;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 }
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="classFormat__Post__Med.html#a76b38e0362672d2cd0513dd3947758b0">00202</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a76b38e0362672d2cd0513dd3947758b0" title="Ecriture d&#39;un maillage. L&#39;ecriture du domaine a lieu soit au debut, avant le premier appel a ecrire_t...">Format_Post_Med::ecrire_domaine</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; domaine,<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; est_le_premier_post)
<a name="l00203"></a>00203 {
<a name="l00204"></a>00204   <span class="keyword">const</span> <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>) zone_dis_base;
<a name="l00205"></a>00205   <span class="keywordflow">return</span> <a class="code" href="classFormat__Post__Med.html#a163970032f5d528a2d72e1fbeacb9e55" title="voir Format_Post_base::ecrire_domaine">ecrire_domaine_dis</a>(domaine, zone_dis_base, est_le_premier_post);
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">//</span><span class="comment"></span>
<a name="l00209"></a>00209 <span class="comment">//! voir Format_Post_base::ecrire_domaine</span>
<a name="l00210"></a><a class="code" href="classFormat__Post__Med.html#a163970032f5d528a2d72e1fbeacb9e55">00210</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a163970032f5d528a2d72e1fbeacb9e55" title="voir Format_Post_base::ecrire_domaine">Format_Post_Med::ecrire_domaine_dis</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; domaine,<span class="keyword">const</span> <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>)&amp; zone_dis_base,<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; est_le_premier_post)
<a name="l00211"></a>00211 {
<a name="l00212"></a>00212   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00213"></a>00213   nom_fich +=<span class="stringliteral">&quot;.&quot;</span>;
<a name="l00214"></a>00214   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> format=<span class="stringliteral">&quot;med&quot;</span>;
<a name="l00215"></a>00215   nom_fich += format;
<a name="l00216"></a>00216   nom_fich += <span class="stringliteral">&quot;.index&quot;</span>;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fic_base(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00219"></a>00219   nom_fic_base += <span class="stringliteral">&quot;.&quot;</span>;
<a name="l00220"></a>00220   nom_fic_base += format;
<a name="l00221"></a>00221   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fic=nom_fic_base.<a class="code" href="classNom.html#a49a5c6438b6efe73ab314900c60a329c" title="Insere _prefix000n (n=me() ou nproc()) dans un nom de fichier (par ex:toto.titi) pour donner toto_pre...">nom_me</a>(<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00222"></a>00222 
<a name="l00223"></a>00223   <a class="code" href="classFormat__Post__Med.html#ac1797b7dfa99dbb761264a8c9c7ba826">ecrire_domaine_med</a>(domaine,zone_dis_base,nom_fic,est_le_premier_post,nom_fich);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <span class="keywordflow">return</span> 1; <span class="comment">//!&lt; ok tout va bien</span>
<a name="l00226"></a>00226 <span class="comment"></span>}
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 <span class="comment">//</span>
<a name="l00229"></a>00229 <span class="comment">//</span><span class="comment"></span>
<a name="l00230"></a>00230 <span class="comment">//! commence l&#39;ecriture d&#39;un nouveau pas de temps&lt;br&gt;Ouvre le fichier maitre en mode APPEND et ajoute une ligne&lt;br&gt;&quot;TEMPS xxxxx&quot; si ce temps n&#39;a pas encore ete ecrit</span>
<a name="l00231"></a>00231 <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a81805e89380645952bcd48ca5ab1f383" title="commence l&#39;ecriture d&#39;un nouveau pas de temps Ouvre le fichier maitre en mode APPEND et ajoute une li...">Format_Post_Med::ecrire_temps</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> temps)
<a name="l00232"></a>00232 {
<a name="l00233"></a>00233   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00234"></a>00234   nom_fich +=<span class="stringliteral">&quot;.&quot;</span>;
<a name="l00235"></a>00235   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> format=<span class="stringliteral">&quot;med&quot;</span>;
<a name="l00236"></a>00236   nom_fich += format;
<a name="l00237"></a>00237   nom_fich += <span class="stringliteral">&quot;.index&quot;</span>;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <a class="code" href="classFormat__Post__Med.html#a90695bf0bc4bdb26c7f2d63ce28a4a97">ecrire_temps_med</a>(temps,nom_fich);
<a name="l00240"></a>00240 
<a name="l00241"></a>00241   <span class="keywordflow">return</span> 1;
<a name="l00242"></a>00242 }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 <span class="comment">//</span><span class="comment"></span>
<a name="l00245"></a>00245 <span class="comment">//! voir Format_Post_base::ecrire_champ</span>
<a name="l00246"></a>00246 <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a66e61bf366291a34756051f860870323" title="voir Format_Post_base::ecrire_champ">Format_Post_Med::ecrire_champ</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; domaine,<span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; unite_,<span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms_compo,
<a name="l00247"></a>00247                                   <span class="keywordtype">int</span> ncomp,<span class="keywordtype">double</span> temps_,<span class="keywordtype">double</span> temps_courant,
<a name="l00248"></a>00248                                   <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; id_champ,
<a name="l00249"></a>00249                                   <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; id_du_domaine,
<a name="l00250"></a>00250                                   <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; localisation,
<a name="l00251"></a>00251                                   <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;   nature,
<a name="l00252"></a>00252                                   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; valeurs)
<a name="l00253"></a>00253 {
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="comment">// Attention au sens du compteur</span>
<a name="l00256"></a>00256 
<a name="l00257"></a>00257   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich_index(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00258"></a>00258   nom_fich_index +=<span class="stringliteral">&quot;.&quot;</span>;
<a name="l00259"></a>00259   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> format=<span class="stringliteral">&quot;med&quot;</span>;
<a name="l00260"></a>00260   nom_fich_index += format;
<a name="l00261"></a>00261   nom_fich_index += <span class="stringliteral">&quot;.index&quot;</span>;
<a name="l00262"></a>00262 
<a name="l00263"></a>00263   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich_ecrit(<a class="code" href="classFormat__Post__Med.html#a6a9e654f6287321bff87a34c6cba7a72">med_basename_</a>);
<a name="l00264"></a>00264   nom_fich_ecrit += <span class="stringliteral">&quot;.&quot;</span>;
<a name="l00265"></a>00265   nom_fich_ecrit += format;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267   <a class="code" href="classFormat__Post__Med.html#a8768c8f9b8f6ffe49f08cefad2eb7516">ecrire_champ_med</a>(domaine,unite_,noms_compo,ncomp,temps_,nom_fich_ecrit,id_champ,id_du_domaine,localisation,valeurs,nom_fich_index);
<a name="l00268"></a>00268 
<a name="l00269"></a>00269   <span class="keywordflow">return</span> 1;
<a name="l00270"></a>00270 }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 <span class="comment">//</span>
<a name="l00273"></a>00273 
<a name="l00274"></a><a class="code" href="classFormat__Post__Med.html#a06b1fa861c82eb2103e7e3e116355f22">00274</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a06b1fa861c82eb2103e7e3e116355f22" title="Ecriture d&#39;un tableau d&#39;entiers dans le fichier de postraitement Voir aussi ecrire_champ Parametre: r...">Format_Post_Med::ecrire_item_int</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;     id_item,
<a name="l00275"></a>00275                                      <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;     id_du_domaine,
<a name="l00276"></a>00276                                      <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;     id_zone,
<a name="l00277"></a>00277                                      <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;     localisation,
<a name="l00278"></a>00278                                      <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;     reference,
<a name="l00279"></a>00279                                      <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; valeurs,
<a name="l00280"></a>00280                                      <span class="keyword">const</span> <span class="keywordtype">int</span>   reference_size)
<a name="l00281"></a>00281 {
<a name="l00282"></a>00282 
<a name="l00283"></a>00283   <span class="keywordflow">return</span> 1;
<a name="l00284"></a>00284 }
<a name="l00285"></a>00285 
<a name="l00286"></a><a class="code" href="classFormat__Post__Med.html#a212a5082b4c890582202ed268b2ecaa5">00286</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a212a5082b4c890582202ed268b2ecaa5">Format_Post_Med::ecrire_entete_med</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich,<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; est_le_premier_post)
<a name="l00287"></a>00287 {
<a name="l00288"></a>00288 
<a name="l00289"></a>00289   <span class="keywordflow">if</span> (est_le_premier_post &amp;&amp; <a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00290"></a>00290     {
<a name="l00291"></a>00291       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> s(nom_fich);
<a name="l00292"></a>00292       s &lt;&lt; <span class="stringliteral">&quot;Trio_U&quot;</span> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <span class="stringliteral">&quot;Version &quot;</span>  &lt;&lt; <span class="stringliteral">&quot;1&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00293"></a>00293       s &lt;&lt; <a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">nom_du_cas</a>() &lt;&lt; finl;
<a name="l00294"></a>00294       s &lt;&lt; <span class="stringliteral">&quot;Trio_U&quot;</span> &lt;&lt; finl;
<a name="l00295"></a>00295     }
<a name="l00296"></a>00296   <span class="keywordflow">return</span> 1;
<a name="l00297"></a>00297 }
<a name="l00298"></a>00298 
<a name="l00299"></a><a class="code" href="classFormat__Post__Med.html#a77deae77437cc4405e4c2001738a77b7">00299</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a77deae77437cc4405e4c2001738a77b7">Format_Post_Med::finir_med</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich,<span class="keywordtype">int</span>&amp; est_le_dernier_post)
<a name="l00300"></a>00300 {
<a name="l00301"></a>00301 <span class="comment">//</span>
<a name="l00302"></a>00302   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fichier_base = nom_fich;
<a name="l00303"></a>00303   nom_fichier_base.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;.med.index&quot;</span>);
<a name="l00304"></a>00304   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> <a class="code" href="Postraitement_8cpp.html#a2014b0b7ca4c8b7161754648bb234d56">nom_fichier</a>(nom_fichier_base);
<a name="l00305"></a>00305   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> format = <span class="stringliteral">&quot;med&quot;</span>;
<a name="l00306"></a>00306   nom_fichier += <span class="stringliteral">&quot;.&quot;</span>;
<a name="l00307"></a>00307   nom_fichier += format;
<a name="l00308"></a>00308 
<a name="l00309"></a>00309   <span class="keywordflow">if</span> (est_le_dernier_post)
<a name="l00310"></a>00310     {
<a name="l00311"></a>00311       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00312"></a>00312         {
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 <span class="comment">// on veut concatainer les 3 fichiers</span>
<a name="l00315"></a>00315           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file3(nom_fichier+<span class="stringliteral">&quot;.data&quot;</span>);
<a name="l00316"></a>00316           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file(<span class="stringliteral">&quot;postmed.data&quot;</span>);
<a name="l00317"></a>00317           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;3; i++)
<a name="l00318"></a>00318             {
<a name="l00319"></a>00319               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> num(i);
<a name="l00320"></a>00320               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fic2(nom_fichier);
<a name="l00321"></a>00321               fic2+=<span class="stringliteral">&quot;.med&quot;</span>;
<a name="l00322"></a>00322               fic2+=num;
<a name="l00323"></a>00323               {
<a name="l00324"></a>00324                 <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> file2(fic2);
<a name="l00325"></a>00325                 <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> motlu;
<a name="l00326"></a>00326                 file2&gt;&gt;motlu;
<a name="l00327"></a>00327                 <span class="keywordflow">while</span> (!file2.<a class="code" href="classEntree__Fichier__base.html#a5e6b0d743eb5c7986090c615bd7ad584">eof</a>())
<a name="l00328"></a>00328                   {
<a name="l00329"></a>00329                     file&lt;&lt;motlu&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00330"></a>00330                     <span class="keywordflow">if</span> (motlu!=<span class="stringliteral">&quot;#&quot;</span>)
<a name="l00331"></a>00331                       file3&lt;&lt;motlu&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;finl;
<a name="l00332"></a>00332                     file2&gt;&gt;motlu;
<a name="l00333"></a>00333 
<a name="l00334"></a>00334                   }
<a name="l00335"></a>00335               }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337             }
<a name="l00338"></a>00338 
<a name="l00339"></a>00339         }
<a name="l00340"></a>00340 
<a name="l00341"></a>00341       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00342"></a>00342         {
<a name="l00343"></a>00343           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> s;
<a name="l00344"></a>00344           s.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nom_fich,ios::app);
<a name="l00345"></a>00345           s &lt;&lt; <span class="stringliteral">&quot;FIN&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347     }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349   <span class="keywordflow">return</span> 1;
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a><a class="code" href="classFormat__Post__Med.html#a837afacc61806bceb3167be658345e61">00352</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a837afacc61806bceb3167be658345e61">Format_Post_Med::completer_post_med</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich2,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom1,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom2)
<a name="l00353"></a>00353 {
<a name="l00354"></a>00354 
<a name="l00355"></a>00355   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00356"></a>00356     {
<a name="l00357"></a>00357       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file;
<a name="l00358"></a>00358       file.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nom_fich2,ios::app);
<a name="l00359"></a>00359       file &lt;&lt;nom1&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;nom2&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00360"></a>00360     }
<a name="l00361"></a>00361 
<a name="l00362"></a>00362   <span class="keywordflow">return</span> 1;
<a name="l00363"></a>00363 }
<a name="l00364"></a>00364 
<a name="l00365"></a><a class="code" href="classFormat__Post__Med.html#a72475302d2a424adec3bb413a05d12e8">00365</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a72475302d2a424adec3bb413a05d12e8">Format_Post_Med::preparer_post_med</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich1,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich2,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich3,
<a name="l00366"></a>00366                                        <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; id_du_domaine,<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; est_le_premier_post)
<a name="l00367"></a>00367 {
<a name="l00368"></a>00368   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich(nom_fich1);
<a name="l00369"></a>00369   nom_fich.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;.med0&quot;</span>);
<a name="l00370"></a>00370 
<a name="l00371"></a>00371   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00372"></a>00372     {
<a name="l00373"></a>00373 
<a name="l00374"></a>00374       <span class="keywordflow">if</span> (est_le_premier_post)
<a name="l00375"></a>00375         {
<a name="l00376"></a>00376           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file(nom_fich1);
<a name="l00377"></a>00377           file&lt;&lt;<span class="stringliteral">&quot;{ Dimension &quot;</span>&lt;&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>&lt;&lt;<span class="stringliteral">&quot;# export Domaine &quot;</span>&lt;&lt;id_du_domaine&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00378"></a>00378         }
<a name="l00379"></a>00379       <span class="keywordflow">else</span>
<a name="l00380"></a>00380         {
<a name="l00381"></a>00381           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file(nom_fich1,ios::app);
<a name="l00382"></a>00382           file&lt;&lt;<span class="stringliteral">&quot; export Domaine &quot;</span>&lt;&lt;id_du_domaine&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file;
<a name="l00386"></a>00386       <span class="keywordflow">if</span> (est_le_premier_post)
<a name="l00387"></a>00387         {
<a name="l00388"></a>00388           file.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nom_fich2);
<a name="l00389"></a>00389           file&lt;&lt;<span class="stringliteral">&quot;# \n Pbc_MED pbmed\n Lire pbmed { &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00390"></a>00390         }
<a name="l00391"></a>00391       <span class="keywordflow">else</span>
<a name="l00392"></a>00392         {
<a name="l00393"></a>00393           file.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nom_fich2,ios::app);
<a name="l00394"></a>00394           file&lt;&lt;<span class="stringliteral">&quot;} } } , &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00395"></a>00395         }
<a name="l00396"></a>00396       file&lt;&lt;nom_fich&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;id_du_domaine&lt;&lt;<span class="stringliteral">&quot;  { Postraitement { Champs dt_post 1e-9 {&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00397"></a>00397 
<a name="l00398"></a>00398       <span class="keywordflow">if</span> (est_le_premier_post)
<a name="l00399"></a>00399         {
<a name="l00400"></a>00400           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file2(nom_fich3);
<a name="l00401"></a>00401           file2&lt;&lt;<span class="stringliteral">&quot;} } } } }&quot;</span>&lt;&lt;finl;
<a name="l00402"></a>00402         }
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 
<a name="l00406"></a>00406   <span class="keywordflow">return</span> 1;
<a name="l00407"></a>00407 }
<a name="l00408"></a>00408 
<a name="l00409"></a><a class="code" href="classFormat__Post__Med.html#ac1797b7dfa99dbb761264a8c9c7ba826">00409</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#ac1797b7dfa99dbb761264a8c9c7ba826">Format_Post_Med::ecrire_domaine_med</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; domaine,<span class="keyword">const</span> <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>)&amp; zone_dis_base,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fic,<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; est_le_premier_post,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich)
<a name="l00410"></a>00410 {
<a name="l00411"></a>00411   <a class="code" href="classEcrMED.html">EcrMED</a> ecr_med(<a class="code" href="classFormat__Post__Med.html#a8a092cd1924ad06f8652f1c596e7a0a0">getEcrMED</a>());
<a name="l00412"></a>00412   <span class="keywordtype">int</span> dim = domaine.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00413"></a>00413   <span class="keywordtype">int</span> mode=-1;
<a name="l00414"></a>00414   <span class="keywordflow">if</span> (est_le_premier_post==0)  mode=0;
<a name="l00415"></a>00415   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00416"></a>00416     {
<a name="l00417"></a>00417       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> s;
<a name="l00418"></a>00418       s.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nom_fich, ios::app);
<a name="l00419"></a>00419       s &lt;&lt; <span class="stringliteral">&quot;format MED: &quot;</span> &lt;&lt; ecr_med.<a class="code" href="classEcrMED.html#a163bdf95794e717c277a0174a5cd893b">version</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00420"></a>00420       s &lt;&lt; <span class="stringliteral">&quot;dimension: &quot;</span> &lt;&lt; dim &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00421"></a>00421       s &lt;&lt; <span class="stringliteral">&quot;domaine: &quot;</span> &lt;&lt; domaine.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &lt;&lt; finl;
<a name="l00422"></a>00422       s &lt;&lt; <span class="stringliteral">&quot;nb_proc: &quot;</span> &lt;&lt; <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>() &lt;&lt; finl;
<a name="l00423"></a>00423       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Opening MED file &quot;</span> &lt;&lt; nom_fic &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; ecr_med.<a class="code" href="classEcrMED.html#a163bdf95794e717c277a0174a5cd893b">version</a>() &lt;&lt; <span class="stringliteral">&quot; format. &quot;</span>;
<a name="l00424"></a>00424       <span class="keywordflow">if</span> (!ecr_med.<a class="code" href="classEcrMED.html#a6bbde2e63c16d181817293666596b314">getMajorMode</a>()) <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Try using med_major format if you have issue when opening this file with older Salome versions.&quot;</span>;
<a name="l00425"></a>00425       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; finl;
<a name="l00426"></a>00426     }
<a name="l00427"></a>00427   ecr_med.<a class="code" href="classEcrMED.html#a20f4a903057f47b7b572ee038f3bb137">ecrire_domaine_dis</a>(nom_fic,domaine,zone_dis_base,domaine.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>(),mode);
<a name="l00428"></a>00428   <span class="keywordflow">return</span> 1;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 }
<a name="l00431"></a>00431 
<a name="l00432"></a><a class="code" href="classFormat__Post__Med.html#a90695bf0bc4bdb26c7f2d63ce28a4a97">00432</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a90695bf0bc4bdb26c7f2d63ce28a4a97">Format_Post_Med::ecrire_temps_med</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> temps,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich)
<a name="l00433"></a>00433 {
<a name="l00434"></a>00434   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00435"></a>00435     {
<a name="l00436"></a>00436       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> s;
<a name="l00437"></a>00437       s.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nom_fich,ios::app);
<a name="l00438"></a>00438       s &lt;&lt; <span class="stringliteral">&quot;TEMPS &quot;</span> &lt;&lt; temps &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00439"></a>00439     }
<a name="l00440"></a>00440   <span class="keywordflow">return</span> 1;
<a name="l00441"></a>00441 }
<a name="l00442"></a>00442 
<a name="l00443"></a><a class="code" href="classFormat__Post__Med.html#a8768c8f9b8f6ffe49f08cefad2eb7516">00443</a> <span class="keywordtype">int</span> <a class="code" href="classFormat__Post__Med.html#a8768c8f9b8f6ffe49f08cefad2eb7516">Format_Post_Med::ecrire_champ_med</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom,<span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; unite_, <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms_compo,
<a name="l00444"></a>00444                                       <span class="keywordtype">int</span> ncomp, <span class="keywordtype">double</span> temps_,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_pdb,
<a name="l00445"></a>00445                                       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;   id_du_champ,
<a name="l00446"></a>00446                                       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;   id_du_domaine,
<a name="l00447"></a>00447                                       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp;   loc_post,
<a name="l00448"></a>00448                                       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; valeurs,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich)
<a name="l00449"></a>00449 {
<a name="l00450"></a>00450 <span class="comment">// compteur est declare en variable locale car toujours fixe a 1</span>
<a name="l00451"></a>00451   <span class="keywordtype">int</span> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>;
<a name="l00452"></a>00452 
<a name="l00453"></a>00453   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fic = nom_pdb.<a class="code" href="classNom.html#a49a5c6438b6efe73ab314900c60a329c" title="Insere _prefix000n (n=me() ou nproc()) dans un nom de fichier (par ex:toto.titi) pour donner toto_pre...">nom_me</a>(<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">me</a>());
<a name="l00454"></a>00454 
<a name="l00455"></a>00455 <span class="comment">// Ce compteur est en fait anciennement passe sous est_le_premier_post_pour_nom_fich_</span>
<a name="l00456"></a>00456 <span class="comment">// et n est pas reellement utilise</span>
<a name="l00457"></a>00457   compteur = 1;
<a name="l00458"></a>00458   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_post(id_du_champ);
<a name="l00459"></a>00459   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> noms_compo_courts(noms_compo);
<a name="l00460"></a>00460   <span class="keywordflow">if</span> (ncomp != -1)
<a name="l00461"></a>00461     {
<a name="l00462"></a>00462       nom_post = noms_compo[ncomp];
<a name="l00463"></a>00463     }
<a name="l00464"></a>00464   nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>());
<a name="l00465"></a>00465   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00466"></a>00466   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; noms_compo.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); ++i)
<a name="l00467"></a>00467     noms_compo_courts[i] = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(noms_compo_courts[i]).<a class="code" href="classNom.html#aad3086ebfdd912dadd099cd05cc45ee9">getPrefix</a>(dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>());
<a name="l00468"></a>00468   <span class="keywordflow">if</span> (loc_post == <span class="stringliteral">&quot;SOM&quot;</span>)
<a name="l00469"></a>00469     {
<a name="l00470"></a>00470       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_som_&quot;</span>);
<a name="l00471"></a>00471       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_SOM_&quot;</span>);
<a name="l00472"></a>00472       nom_dom = dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00473"></a>00473       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; noms_compo.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); ++i)
<a name="l00474"></a>00474         noms_compo_courts[i] = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(noms_compo_courts[i]).<a class="code" href="classNom.html#aad3086ebfdd912dadd099cd05cc45ee9">getPrefix</a>(<span class="stringliteral">&quot;_SOM_&quot;</span>);
<a name="l00475"></a>00475     }
<a name="l00476"></a>00476   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (loc_post == <span class="stringliteral">&quot;ELEM&quot;</span>)
<a name="l00477"></a>00477     {
<a name="l00478"></a>00478       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_ELEM_&quot;</span>);
<a name="l00479"></a>00479       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_elem_&quot;</span>);
<a name="l00480"></a>00480       nom_dom = dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00481"></a>00481       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; noms_compo.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); ++i)
<a name="l00482"></a>00482         noms_compo_courts[i] = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(noms_compo_courts[i]).<a class="code" href="classNom.html#aad3086ebfdd912dadd099cd05cc45ee9">getPrefix</a>(<span class="stringliteral">&quot;_ELEM_&quot;</span>);
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (loc_post == <span class="stringliteral">&quot;FACES&quot;</span>)
<a name="l00485"></a>00485     {
<a name="l00486"></a>00486 <span class="preprocessor">#ifdef MEDCOUPLING_</span>
<a name="l00487"></a>00487 <span class="preprocessor"></span>      nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_FACES_&quot;</span>);
<a name="l00488"></a>00488       nom_post.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;_faces_&quot;</span>);
<a name="l00489"></a>00489       nom_dom = dom.getUFacesMesh()-&gt;getName().c_str();
<a name="l00490"></a>00490       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; noms_compo.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); ++i)
<a name="l00491"></a>00491         noms_compo_courts[i] = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(noms_compo_courts[i]).<a class="code" href="classNom.html#aad3086ebfdd912dadd099cd05cc45ee9">getPrefix</a>(<span class="stringliteral">&quot;_FACES_&quot;</span>);
<a name="l00492"></a>00492 <span class="preprocessor">#else</span>
<a name="l00493"></a>00493 <span class="preprocessor"></span>      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Post-processing in med format on faces needs MEDCoupling&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00494"></a>00494 <span class="preprocessor">#endif</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span>    }
<a name="l00496"></a>00496   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00497"></a>00497     {
<a name="l00498"></a>00498 <span class="comment">// Ouverture du fichier</span>
<a name="l00499"></a>00499       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> os;
<a name="l00500"></a>00500       os.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nom_fich, ios::app);
<a name="l00501"></a>00501       os &lt;&lt; <span class="stringliteral">&quot;champ: &quot;</span> &lt;&lt; nom_post &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nom_dom &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; loc_post &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00502"></a>00502     }
<a name="l00503"></a>00503 
<a name="l00504"></a>00504   <a class="code" href="classEcrMED.html">EcrMED</a> ecr_med(<a class="code" href="classFormat__Post__Med.html#a8a092cd1924ad06f8652f1c596e7a0a0">getEcrMED</a>());
<a name="l00505"></a>00505   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> <a class="code" href="Raffiner__Simplexes_8cpp.html#a358dc168d8905bbafc12587204bc9fb8">type_elem</a> = dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 <span class="comment">// modif noms compo</span>
<a name="l00508"></a>00508   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; noms_compo.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); ++i)
<a name="l00509"></a>00509     noms_compo_courts[i] = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(noms_compo_courts[i]).<a class="code" href="classNom.html#ac503a087f3b2d8115f1d406646ed3c61">getSuffix</a>(nom_post);
<a name="l00510"></a>00510 
<a name="l00511"></a>00511   <span class="keywordflow">if</span> (loc_post == <span class="stringliteral">&quot;SOM&quot;</span>)
<a name="l00512"></a>00512     ecr_med.<a class="code" href="classEcrMED.html#a5b6ac4eaa96b854f8e47d85395607616">ecrire_champ</a>(<span class="stringliteral">&quot;CHAMPPOINT&quot;</span>, fic, dom, id_du_champ, valeurs, unite_, noms_compo_courts, type_elem, temps_, compteur);
<a name="l00513"></a>00513   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (loc_post == <span class="stringliteral">&quot;ELEM&quot;</span>)
<a name="l00514"></a>00514     ecr_med.<a class="code" href="classEcrMED.html#a5b6ac4eaa96b854f8e47d85395607616">ecrire_champ</a>(<span class="stringliteral">&quot;CHAMPMAILLE&quot;</span>, fic, dom, id_du_champ, valeurs, unite_, noms_compo_courts, type_elem, temps_, compteur);
<a name="l00515"></a>00515   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (loc_post == <span class="stringliteral">&quot;FACES&quot;</span>)
<a name="l00516"></a>00516     ecr_med.<a class="code" href="classEcrMED.html#a5b6ac4eaa96b854f8e47d85395607616">ecrire_champ</a>(<span class="stringliteral">&quot;CHAMPFACES&quot;</span>, fic, dom, id_du_champ, valeurs, unite_, noms_compo_courts, type_elem, temps_, compteur);
<a name="l00517"></a>00517   <span class="keywordflow">else</span>
<a name="l00518"></a>00518     {
<a name="l00519"></a>00519       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We do not know to postprocess &quot;</span> &lt;&lt; id_du_champ
<a name="l00520"></a>00520            &lt;&lt; <span class="stringliteral">&quot; with the keyword &quot;</span> &lt;&lt; loc_post &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00521"></a>00521       <span class="keywordflow">return</span> -1;
<a name="l00522"></a>00522     }
<a name="l00523"></a>00523   <span class="keywordflow">return</span> 1;
<a name="l00524"></a>00524 }
<a name="l00525"></a>00525 
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 
<a name="l00530"></a>00530 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:24 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
