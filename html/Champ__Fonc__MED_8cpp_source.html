<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/MEDimpl/Champ_Fonc_MED.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/MEDimpl/Champ_Fonc_MED.cpp</div>  </div>
</div>
<div class="contents">
<a href="Champ__Fonc__MED_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Champ_Fonc_MED.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/MEDimpl</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/28</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Fonc__MED_8h.html">Champ_Fonc_MED.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="LireMED_8h.html">LireMED.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Char__ptr_8h.html">Char_ptr.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="EFichier_8h.html">EFichier.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;medcoupling++.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#ifdef MEDCOUPLING_</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#include &lt;MEDLoader.hxx&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;MEDCouplingField.hxx&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;MEDCouplingFieldDouble.hxx&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wreorder&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#include &lt;MEDFileField.hxx&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="keyword">using</span> MEDCoupling::MEDCouplingField;
<a name="l00037"></a>00037 <span class="keyword">using</span> MEDCoupling::MEDCouplingFieldDouble;
<a name="l00038"></a>00038 <span class="keyword">using</span> MEDCoupling::MCAuto;
<a name="l00039"></a>00039 <span class="keyword">using</span> MEDCoupling::GetTimeAttachedOnFieldIteration;
<a name="l00040"></a>00040 <span class="keyword">using</span> MEDCoupling::GetAllFieldNamesOnMesh;
<a name="l00041"></a>00041 <span class="keyword">using</span> MEDCoupling::MEDFileFieldMultiTS;
<a name="l00042"></a>00042 <span class="keyword">using</span> MEDCoupling::MEDFileField1TS;
<a name="l00043"></a>00043 <span class="preprocessor">#endif</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a><a class="code" href="Champ__Fonc__MED_8cpp.html#a0b2cf96fdf4c0f9d451c47a05aae5544">00045</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classChamp__Fonc__MED.html" title="classe Champ_Fonc_MED">Champ_Fonc_MED</a>,<span class="stringliteral">&quot;Champ_Fonc_MED&quot;</span>,<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>);
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="classChamp__Fonc__MED.html#af61ad5a95535e4e72071a7c77af5d2d9">00047</a> <a class="code" href="classChamp__Fonc__MED.html#af61ad5a95535e4e72071a7c77af5d2d9">Champ_Fonc_MED::Champ_Fonc_MED</a>():<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>::<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>()
<a name="l00048"></a>00048 {
<a name="l00049"></a>00049   <a class="code" href="classChamp__Fonc__MED.html#a7e764f762f24b8c9bed33a841902c2df">last_time_only_</a>=0;
<a name="l00050"></a>00050 <span class="preprocessor">#ifdef MEDCOUPLING_</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>  <a class="code" href="classChamp__Fonc__MED.html#a45efed570f4cdc07e8a8bfe817a0d9de">use_medcoupling_</a> = <span class="keyword">true</span>;
<a name="l00052"></a>00052   field_type = MEDCoupling::ON_CELLS;
<a name="l00053"></a>00053 <span class="preprocessor">#else</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>  <a class="code" href="classChamp__Fonc__MED.html#a45efed570f4cdc07e8a8bfe817a0d9de">use_medcoupling_</a> = <span class="keyword">false</span>;
<a name="l00055"></a>00055 <span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>}
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="classChamp__Fonc__MED.html#a3b4c82c1f2453da23a50c7a12f71ca30">00058</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classChamp__Fonc__MED.html#a3b4c82c1f2453da23a50c7a12f71ca30" title="NE FAIT RIEN A surcharger dans les classes derivees.">Champ_Fonc_MED::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s)<span class="keyword"> const</span>
<a name="l00059"></a>00059 <span class="keyword"></span>{
<a name="l00060"></a>00060   <span class="keywordflow">return</span> s &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>();
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="comment">// XD champ_fonc_med field_base champ_fonc_med 0 Field to read a data field in a MED-format file .med at a specified time. It is very useful, for example, to resume a calculation with a new or refined geometry. The field post-processed on the new geometry at med format is used as initial condition for the resume.</span>
<a name="l00065"></a>00065 <span class="comment">// XD attr use_existing_domain chaine(into=[&quot;use_existing_domain&quot;]) use_existing_domain 1 not_set</span>
<a name="l00066"></a>00066 <span class="comment">// XD attr last_time chaine(into=[&quot;last_time&quot;]) last_time 1 to use the last time of the MED file instead of the specified time.</span>
<a name="l00067"></a>00067 <span class="comment">// XD attr option decoup option 1 Keyword for a partition file</span>
<a name="l00068"></a>00068 <span class="comment">// XD attr filename chaine filename 0 Name of the .med file.</span>
<a name="l00069"></a>00069 <span class="comment">// XD attr domain_name chaine domain_name 0 Name of the domain.</span>
<a name="l00070"></a>00070 <span class="comment">// XD attr field_name chaine field_name 0 Name of the problem unknown.</span>
<a name="l00071"></a>00071 <span class="comment">// XD attr location chaine(into=[&quot;som&quot;,&quot;elem&quot;]) location 0 To indicate where the field has been post-processed.</span>
<a name="l00072"></a>00072 <span class="comment">// XD attr time floattant time 0 Time of the field in the .med file.</span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">// XD decoup objet_lecture nul 0 Optional keyword</span>
<a name="l00075"></a>00075 <span class="comment">// XD attr key chaine(into=[&quot;decoup&quot;]) key 0 Name of for a partition file</span>
<a name="l00076"></a>00076 <span class="comment">// XD attr nom chaine nom 0 Name of for a partition file</span>
<a name="l00077"></a><a class="code" href="classChamp__Fonc__MED.html#a413c0aa982e3441dfa80d16d5a7becae">00077</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classChamp__Fonc__MED.html#a413c0aa982e3441dfa80d16d5a7becae" title="NE FAIT RIEN A surcharger dans les classes derivees.">Champ_Fonc_MED::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; s)
<a name="l00078"></a>00078 {
<a name="l00079"></a>00079   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> chaine_lue,nom_dom,nom_champ, nom_decoup;
<a name="l00080"></a>00080   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> localisation;
<a name="l00081"></a>00081   <span class="keywordtype">double</span> un_temps;
<a name="l00082"></a>00082   s&gt;&gt;chaine_lue;
<a name="l00083"></a>00083   <span class="keywordtype">int</span> use_existing_domain=0, field_size, nom_decoup_lu = 0;
<a name="l00084"></a>00084   <a class="code" href="classChamp__Fonc__MED.html#a7e764f762f24b8c9bed33a841902c2df">last_time_only_</a>=0;
<a name="l00085"></a>00085   <span class="keywordflow">if</span> (chaine_lue==<span class="stringliteral">&quot;use_existing_domain&quot;</span>)
<a name="l00086"></a>00086     {
<a name="l00087"></a>00087       use_existing_domain=1;
<a name="l00088"></a>00088       s&gt;&gt;chaine_lue;
<a name="l00089"></a>00089     }
<a name="l00090"></a>00090   <span class="keywordflow">if</span> (chaine_lue==<span class="stringliteral">&quot;last_time&quot;</span>)
<a name="l00091"></a>00091     {
<a name="l00092"></a>00092       <a class="code" href="classChamp__Fonc__MED.html#a7e764f762f24b8c9bed33a841902c2df">last_time_only_</a>=1;
<a name="l00093"></a>00093       s&gt;&gt;chaine_lue;
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095   <span class="keywordflow">if</span> (chaine_lue==<span class="stringliteral">&quot;decoup&quot;</span>)
<a name="l00096"></a>00096     {
<a name="l00097"></a>00097       s&gt;&gt;nom_decoup;
<a name="l00098"></a>00098       s&gt;&gt;chaine_lue;
<a name="l00099"></a>00099       <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a45efed570f4cdc07e8a8bfe817a0d9de">use_medcoupling_</a>)
<a name="l00100"></a>00100         {
<a name="l00101"></a>00101           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error: Decoup option is only available for the moment with Champ_Fonc_MEDFile keyword only.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00102"></a>00102           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00103"></a>00103         }
<a name="l00104"></a>00104       <span class="keywordflow">if</span> (!use_existing_domain)
<a name="l00105"></a>00105         {
<a name="l00106"></a>00106           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error: you need to use use_existing_domain option with Decoup option.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00107"></a>00107           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00108"></a>00108         }
<a name="l00109"></a>00109       nom_decoup_lu = 1;
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111   <a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a> = chaine_lue;
<a name="l00112"></a>00112   <a class="code" href="LireMED_8h.html#a8e2e84ca22ef96895c33cf9d259c6812">lire_nom_med</a>(nom_dom,s);
<a name="l00113"></a>00113   <span class="keywordflow">if</span> (!nom_decoup_lu) nom_decoup = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;decoup/&quot;</span>) + nom_dom + <span class="stringliteral">&quot;.txt&quot;</span>; <span class="comment">//valeur par defaut de nom_decoup</span>
<a name="l00114"></a>00114   <a class="code" href="LireMED_8h.html#a8e2e84ca22ef96895c33cf9d259c6812">lire_nom_med</a>(nom_champ,s);
<a name="l00115"></a>00115   s&gt;&gt;localisation;
<a name="l00116"></a>00116   s&gt;&gt;un_temps;
<a name="l00117"></a>00117   <a class="code" href="LireMED_8h.html#a2dec7dece3c136e1db798e80268710d0">traite_nom_fichier_med</a>(<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>);
<a name="l00118"></a>00118 <span class="comment">// #ifdef MED_</span>
<a name="l00119"></a>00119 <span class="comment">// test_version(nom_fichier_med_);</span>
<a name="l00120"></a>00120 <span class="comment">// #endif</span>
<a name="l00121"></a>00121 <span class="comment">// MEDCoupling:</span>
<a name="l00122"></a>00122   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a45efed570f4cdc07e8a8bfe817a0d9de">use_medcoupling_</a>)
<a name="l00123"></a>00123     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Using MEDCoupling API. To switch to the MEDFile API, use Champ_Fonc_MEDfile keyword.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00124"></a>00124 <span class="comment">// La lecture de fichiers multiples .med fonctionne: voir cas test Champ_fonc_MED_Parallele</span>
<a name="l00125"></a>00125 <span class="comment">// Un test est fait plus loin pour bien verifier que les partitionnement se recouvrent pour cela</span>
<a name="l00126"></a>00126   <span class="keywordtype">int</span> multiple_med = 0;
<a name="l00127"></a>00127   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp(<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>);
<a name="l00128"></a>00128   tmp.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;0001.med&quot;</span>);
<a name="l00129"></a>00129   <span class="keywordflow">if</span> (tmp!=<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a> &amp;&amp; <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>()&gt;1)
<a name="l00130"></a>00130     {
<a name="l00131"></a>00131       multiple_med = 1;
<a name="l00132"></a>00132       <span class="comment">/*</span>
<a name="l00133"></a>00133 <span class="comment">      // Ajout d&#39;un test bloquant pour empecher la lecture de fichiers 000n.med</span>
<a name="l00134"></a>00134 <span class="comment">      Cerr &lt;&lt; &quot;Error, Champ_Fonc_MED can&#39;t read, for the moment, partitioned MED files.&quot; &lt;&lt; finl;</span>
<a name="l00135"></a>00135 <span class="comment">      Cerr &lt;&lt; &quot;Try to build a single MED file by:&quot; &lt;&lt; finl;</span>
<a name="l00136"></a>00136 <span class="comment">      Cerr &lt;&lt; &quot;A) Using LATA format for the previous calculation.&quot; &lt;&lt; finl;</span>
<a name="l00137"></a>00137 <span class="comment">      Cerr &lt;&lt; &quot;B) Convert the LATA files into a single MED file with Lata_to_MED keyword.&quot; &lt;&lt; finl;</span>
<a name="l00138"></a>00138 <span class="comment">      Cerr &lt;&lt; &quot;C) Use this single MED file with Champ_Fonc_MED keyword.&quot; &lt;&lt; finl;</span>
<a name="l00139"></a>00139 <span class="comment">      exit(); */</span>
<a name="l00140"></a>00140     }
<a name="l00141"></a>00141   multiple_med = <a class="code" href="classProcess.html#a1e9d9f9899b71927cfafae14c7bd048d" title="Calcule le max de x sur tous les processeurs du groupe courant. Remarques : Cette methode doit etre a...">mp_max</a>(multiple_med);
<a name="l00142"></a>00142   <a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(nom_champ);
<a name="l00143"></a>00143 
<a name="l00144"></a>00144   <span class="keywordtype">bool</span> domain_exist=( <a class="code" href="classObjet__U.html#a9b5c13352a6601b5cec65941575f2e9a">interprete</a>().<a class="code" href="classInterprete.html#ae5b09c3b61cd8b789437a0822a26a573" title="Renvoie 1 si l&#39;objet existe, 0 sinon voir Interprete_bloc::objet_global_existant()">objet_existant</a>(nom_dom) &amp;&amp; <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classObjet__U.html#a9b5c13352a6601b5cec65941575f2e9a">interprete</a>().objet(nom_dom)) );
<a name="l00145"></a>00145   <span class="keywordflow">if</span> (use_existing_domain)
<a name="l00146"></a>00146     {
<a name="l00147"></a>00147       <span class="keywordflow">if</span> (!domain_exist)
<a name="l00148"></a>00148         {
<a name="l00149"></a>00149           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The domain &quot;</span> &lt;&lt; nom_dom &lt;&lt; <span class="stringliteral">&quot; does not exist !!!! In Champ_Fonc_MED &quot;</span> &lt;&lt; <a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nom_dom
<a name="l00150"></a>00150                &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nom_champ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; localisation &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; un_temps &lt;&lt; finl;
<a name="l00151"></a>00151           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00152"></a>00152         }
<a name="l00153"></a>00153       <span class="keywordflow">else</span>
<a name="l00154"></a>00154         {
<a name="l00155"></a>00155 <span class="comment">// use_existing_domain utilisable en parallele uniquement si le process 0 gere tout le domaine ou si decoup specifie:</span>
<a name="l00156"></a>00156           <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; le_domaine=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classObjet__U.html#a9b5c13352a6601b5cec65941575f2e9a">interprete</a>().objet(nom_dom));
<a name="l00157"></a>00157           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>()&gt;1 &amp;&amp; <a class="code" href="classProcess.html#a1e9d9f9899b71927cfafae14c7bd048d" title="Calcule le max de x sur tous les processeurs du groupe courant. Remarques : Cette methode doit etre a...">mp_max</a>(le_domaine.<a class="code" href="classDomaine.html#abc4abc8b8db5bebeb161fae4162a89ce" title="Renvoie le nombre de sommets.">nb_som</a>()&gt;0) != 0 &amp;&amp; <a class="code" href="classChamp__Fonc__MED.html#a45efed570f4cdc07e8a8bfe817a0d9de">use_medcoupling_</a>==1)
<a name="l00158"></a>00158             {
<a name="l00159"></a>00159               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Warning, you can&#39;t use use_existing_domain on a partitionned domain like &quot;</span> &lt;&lt; nom_dom &lt;&lt; finl;
<a name="l00160"></a>00160               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;It is not parallelized yet... So we use MED mesh, which is not optimal.&quot;</span> &lt;&lt; finl;
<a name="l00161"></a>00161               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Try suppress use_existing_domain option.&quot;</span> &lt;&lt; finl;
<a name="l00162"></a>00162 <span class="comment">// Process::exit();</span>
<a name="l00163"></a>00163               use_existing_domain = 0;
<a name="l00164"></a>00164             }
<a name="l00165"></a>00165         }
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167   <span class="keywordflow">if</span> (domain_exist &amp;&amp; use_existing_domain)
<a name="l00168"></a>00168     {
<a name="l00169"></a>00169       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;nom_dom&lt;&lt;<span class="stringliteral">&quot; was not read into the med file because it already exists.&quot;</span> &lt;&lt;finl;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171       <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; le_domaine=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classObjet__U.html#a9b5c13352a6601b5cec65941575f2e9a">interprete</a>().objet(nom_dom));
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00174"></a>00174 <span class="preprocessor"></span><span class="comment">// on va verifier que l&#39;on a le meme domaine en mode debug car lent</span>
<a name="l00175"></a>00175 <span class="comment">// Ce test ne peut etre fait qu&#39;en sequentiel car en parallele, dom=domaine_complet, un_dom=domaine_local</span>
<a name="l00176"></a>00176       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">nproc</a>()==1)
<a name="l00177"></a>00177         {
<a name="l00178"></a>00178           <a class="code" href="classLireMED.html">LireMED</a> liremed;
<a name="l00179"></a>00179           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#ae5d7a1cb2b05368fbb9a7ebec7793911" title="Donne un nom au domaine.">nommer</a>(nom_dom);
<a name="l00180"></a>00180 <span class="comment">// ne pas initialiser le nom du domaine va conduire a ne pas creer les fichiers sous zones</span>
<a name="l00181"></a>00181           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom_trio_non_nomme;
<a name="l00182"></a>00182           liremed.<a class="code" href="classLireMED.html#afc44546342eec9ef106d45050f9ceb92">lire_geom</a>(<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>,<a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>,nom_dom,nom_dom_trio_non_nomme);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> diff_som(<a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>());
<a name="l00185"></a>00185           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> diff_elem(<a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>());
<a name="l00186"></a>00186           diff_som.<a class="code" href="classIntTab.html#a02470d5d5921700f4daee05a5b3d2601" title="associe le md_vector au vecteur (voir IntVect::set_md_vector()) dimension(0) sera initialise a md_vec...">set_md_vector</a>(le_domaine.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>().<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>());
<a name="l00187"></a>00187           diff_elem.set_md_vector(le_domaine.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>().<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>());
<a name="l00188"></a>00188           diff_som-=le_domaine.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>();
<a name="l00189"></a>00189           diff_elem-=le_domaine.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00190"></a>00190           <span class="comment">/*</span>
<a name="l00191"></a>00191 <span class="comment">                    diff_som.set_md_vector(un_dom.les_sommets().get_md_vector());</span>
<a name="l00192"></a>00192 <span class="comment">                    diff_som-=un_dom.les_sommets();</span>
<a name="l00193"></a>00193 <span class="comment">                    diff_som.set_md_vector(MD_Vector());</span>
<a name="l00194"></a>00194 <span class="comment">                    diff_elem.set_md_vector(un_dom.zone(0).les_elems().get_md_vector());</span>
<a name="l00195"></a>00195 <span class="comment">                    diff_elem-=un_dom.zone(0).les_elems();</span>
<a name="l00196"></a>00196 <span class="comment">                    diff_elem.set_md_vector(MD_Vector());</span>
<a name="l00197"></a>00197 <span class="comment">          */</span>
<a name="l00198"></a>00198           <span class="keywordtype">double</span> err_som0 = <a class="code" href="ArrOfDouble_8cpp.html#a22ce24a1e68db94b2e023b6eb200c92b" title="Retourne le max des abs(i)">max_abs_array</a>(diff_som);
<a name="l00199"></a>00199           <span class="keywordtype">int</span> err_elem0 = <a class="code" href="ArrOfDouble_8cpp.html#a22ce24a1e68db94b2e023b6eb200c92b" title="Retourne le max des abs(i)">max_abs_array</a>(diff_elem);
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 
<a name="l00202"></a>00202 <span class="comment">// Le domaine un_dom a peut etre ete reordonne, on refait le test en reordonnant le domaine dom .....</span>
<a name="l00203"></a>00203           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0d407f1671c26ed0f3d3d331135a77e2" title="Reordonne les mailles du domaine suivant les conventions de Trio-U.">reordonner</a>();
<a name="l00204"></a>00204           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>().<a class="code" href="classDoubleTab.html#a2f40241acb678b0dd0dac7ee4f421b1d" title="associe le md_vector au vecteur (voir DoubleVect::set_md_vector()) dimension(0) sera initialise a md_...">set_md_vector</a>(le_domaine.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>().<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>());
<a name="l00205"></a>00205           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>()-=le_domaine.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>();
<a name="l00206"></a>00206           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>().<a class="code" href="classDoubleTab.html#a2f40241acb678b0dd0dac7ee4f421b1d" title="associe le md_vector au vecteur (voir DoubleVect::set_md_vector()) dimension(0) sera initialise a md_...">set_md_vector</a>(<a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>());
<a name="l00207"></a>00207           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>().<a class="code" href="classIntTab.html#a02470d5d5921700f4daee05a5b3d2601" title="associe le md_vector au vecteur (voir IntVect::set_md_vector()) dimension(0) sera initialise a md_vec...">set_md_vector</a>(le_domaine.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>().<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>());
<a name="l00208"></a>00208           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>()-=le_domaine.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00209"></a>00209           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>().<a class="code" href="classIntTab.html#a02470d5d5921700f4daee05a5b3d2601" title="associe le md_vector au vecteur (voir IntVect::set_md_vector()) dimension(0) sera initialise a md_vec...">set_md_vector</a>(<a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>());
<a name="l00210"></a>00210           <span class="keywordtype">double</span> err_som = <a class="code" href="ArrOfDouble_8cpp.html#a22ce24a1e68db94b2e023b6eb200c92b" title="Retourne le max des abs(i)">max_abs_array</a>(<a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>());
<a name="l00211"></a>00211           <span class="keywordtype">int</span> err_elem = <a class="code" href="ArrOfDouble_8cpp.html#a22ce24a1e68db94b2e023b6eb200c92b" title="Retourne le max des abs(i)">max_abs_array</a>(<a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>());
<a name="l00212"></a>00212 
<a name="l00213"></a>00213           <span class="keywordflow">if</span> ((err_som&gt;1e-5 || err_elem&gt;0) &amp;&amp; (err_som0&gt;1e-5 || err_elem0&gt;0))
<a name="l00214"></a>00214             {
<a name="l00215"></a>00215               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Error the domain in the file &quot;</span>&lt;&lt;<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>&lt;&lt;<span class="stringliteral">&quot; and domain &quot;</span>&lt;&lt;nom_dom&lt;&lt;<span class="stringliteral">&quot; are not the same (coords,conn).&quot;</span>&lt;&lt;finl;
<a name="l00216"></a>00216               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00217"></a>00217             }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="comment">// Reset:</span>
<a name="l00220"></a>00220           <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>=<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>();
<a name="l00221"></a>00221         }
<a name="l00222"></a>00222 <span class="preprocessor">#endif</span>
<a name="l00223"></a>00223 <span class="preprocessor"></span>      field_size = <a class="code" href="classChamp__Fonc__MED.html#a8e4e0c74c245bdeca1e27325fcbc7b17">creer</a>(<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>,le_domaine,localisation,<a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>);
<a name="l00224"></a>00224     }
<a name="l00225"></a>00225   <span class="keywordflow">else</span>
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227       <span class="keywordflow">if</span> (domain_exist &amp;&amp; !use_existing_domain)
<a name="l00228"></a>00228         {
<a name="l00229"></a>00229           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;INFO: You can use Champ_fonc_med use_existing_domain &quot;</span>&lt;&lt; <a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;nom_dom&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;nom_champ&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;localisation&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;un_temps&lt;&lt;<span class="stringliteral">&quot; to optimize.&quot;</span>&lt;&lt;finl;
<a name="l00230"></a>00230         }
<a name="l00231"></a>00231       <a class="code" href="classLireMED.html">LireMED</a> liremed;
<a name="l00232"></a>00232       <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#ae5d7a1cb2b05368fbb9a7ebec7793911" title="Donne un nom au domaine.">nommer</a>(nom_dom);
<a name="l00233"></a>00233 <span class="comment">// ne pas initialiser le nom du domaine va conduire a ne pas creer les fichiers sous zones</span>
<a name="l00234"></a>00234       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom_trio_non_nomme;
<a name="l00235"></a>00235 <span class="comment">// Remplit dom:</span>
<a name="l00236"></a>00236       liremed.<a class="code" href="classLireMED.html#afc44546342eec9ef106d45050f9ceb92">lire_geom</a>(<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>,<a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>,nom_dom,nom_dom_trio_non_nomme);
<a name="l00237"></a>00237       <span class="keywordflow">if</span> (multiple_med)
<a name="l00238"></a>00238         {
<a name="l00239"></a>00239 <span class="comment">// On verifie que l&#39;on a bien des recouvrements identiques (verification imparfaite sur les BoundingBox)</span>
<a name="l00240"></a>00240           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> BB1 = <a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>.<a class="code" href="classDomaine.html#aa6a2cc7601835fd81cac4f8cdc24aa35">getBoundingBox</a>();
<a name="l00241"></a>00241           <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom_calcul = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classObjet__U.html#a9b5c13352a6601b5cec65941575f2e9a">interprete</a>().objet(nom_dom));
<a name="l00242"></a>00242           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> BB2 = dom_calcul.<a class="code" href="classDomaine.html#aa6a2cc7601835fd81cac4f8cdc24aa35">getBoundingBox</a>();
<a name="l00243"></a>00243           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00244"></a>00244             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;2; j++)
<a name="l00245"></a>00245               <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#a07be18d5898a837a4a609ddb08e37d50">est_different</a>(BB1(i,j), BB2(i,j)))
<a name="l00246"></a>00246                 {
<a name="l00247"></a>00247                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error, Champ_Fonc_MED can&#39;t read the partitionned MED files.&quot;</span> &lt;&lt; finl;
<a name="l00248"></a>00248                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Cause if seems the MED partition is different than the &quot;</span> &lt;&lt; dom_calcul.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; domain partition.&quot;</span> &lt;&lt; finl;
<a name="l00249"></a>00249                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00250"></a>00250                 }
<a name="l00251"></a>00251           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Ok MED partition matches the domain partition so reading multiple MED files...&quot;</span> &lt;&lt; finl;
<a name="l00252"></a>00252         }
<a name="l00253"></a>00253 <span class="comment">// MODIF ELI LAUCOIN (06/03/2012) :</span>
<a name="l00254"></a>00254 <span class="comment">// j&#39;ajoute l&#39;attribut temps_sauv_</span>
<a name="l00255"></a>00255       field_size = <a class="code" href="classChamp__Fonc__MED.html#a8e4e0c74c245bdeca1e27325fcbc7b17">creer</a>(<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>,<a class="code" href="classChamp__Fonc__MED.html#aaa5a8fb0c32928655fa627ba6c581aa6">dom_med_</a>,localisation,<a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>);
<a name="l00256"></a>00256     }
<a name="l00257"></a>00257   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a7e764f762f24b8c9bed33a841902c2df">last_time_only_</a>)
<a name="l00258"></a>00258     {
<a name="l00259"></a>00259       un_temps=<a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>(<a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>()-1);
<a name="l00260"></a>00260       <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;The resumption time is &quot;</span>&lt;&lt;un_temps&lt;&lt;finl;
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262 <span class="comment">// FIN MODIF ELI LAUCOIN (06/03/2012)</span>
<a name="l00263"></a>00263   <span class="comment">/* si on est en parallele : creation du filtre */</span>
<a name="l00264"></a>00264   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>() &gt; 1 &amp;&amp; field_size != <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0))
<a name="l00265"></a>00265     {
<a name="l00266"></a>00266       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> dec;
<a name="l00267"></a>00267       <a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00268"></a>00268       <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> fdec;
<a name="l00269"></a>00269       fdec.<a class="code" href="classEntree__Fichier__base.html#a8e34b235668e94f335cc9ab18dd4e427">ouvrir</a>(nom_decoup);
<a name="l00270"></a>00270 <span class="comment">// Cas ou le maillage du fichier .med suit la numerotation du maillage initial (necessite le fichier du decoupage pour retrouver la numerotation)</span>
<a name="l00271"></a>00271       <span class="keywordflow">if</span> (fdec.<a class="code" href="classEntree__Fichier__base.html#a0db5378632b186a9ecc72edee7441cea">good</a>())
<a name="l00272"></a>00272         {
<a name="l00273"></a>00273           fdec &gt;&gt; dec;
<a name="l00274"></a>00274           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dec.size_array(); i++)
<a name="l00275"></a>00275             <span class="keywordflow">if</span> (dec(i) == <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()) <a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(i + 1);<span class="comment">//les indices commencent a 1</span>
<a name="l00276"></a>00276           <span class="keywordflow">if</span> (field_size != dec.size_array())
<a name="l00277"></a>00277             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Champ_Fonc_MED on parallel domain : inconsistency between &#39;decoup&#39; file and field!&quot;</span> &lt;&lt; finl, <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00278"></a>00278         }
<a name="l00279"></a>00279       <span class="keywordflow">else</span> <span class="comment">//!&lt; Cas ou le maillage .med suit la numerotation du maillage decoupe</span>
<a name="l00280"></a>00280 <span class="comment"></span>        {
<a name="l00281"></a>00281           <span class="keywordtype">int</span> nb_item = <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00282"></a>00282           <span class="keywordtype">int</span> first_item = <a class="code" href="communications_8cpp.html#a13b5bdc7cfe14771b52a033b1ecbc071" title="Calul de la somme partielle de i sur les processeurs 0 a me()-1 (renvoie 0 sur le processeur 0)...">mppartial_sum</a>(nb_item);
<a name="l00283"></a>00283           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_item; i++)
<a name="l00284"></a>00284             <a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(first_item + i + 1);<span class="comment">//les indices commencent a 1</span>
<a name="l00285"></a>00285         }
<a name="l00286"></a>00286       <a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(0), <a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a15fc7e3958f02cb38d3106eeb919f6fc" title="appel a ArrOfInt::resize_array()">resize</a>(<a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
<a name="l00287"></a>00287       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Creating a filter to access efficiently values in &quot;</span> &lt;&lt; <a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a> &lt;&lt; finl;
<a name="l00288"></a>00288       <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() != <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0))
<a name="l00289"></a>00289         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Champ_Fonc_MED on parallel domain : inconsistency between filter and domain!&quot;</span> &lt;&lt; finl, <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_size != <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0))
<a name="l00292"></a>00292     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Champ_Fonc_MED on existing domain : inconsistency between domain file and field!&quot;</span> &lt;&lt; finl, <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00293"></a>00293 
<a name="l00294"></a>00294   <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(nom_champ);
<a name="l00295"></a>00295   <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__base.html#ad4ce4adc1125f3ff1fe87f405129984a" title="cette methode va fixer les unites et le nom des compos elle n&#39;est pas const en realite !!!...">corriger_unite_nom_compo</a>();
<a name="l00296"></a>00296   <a class="code" href="classChamp__Fonc__MED.html#aa82b8aa65d1b575e7059d097d5664492" title="Mise a jour en temps du champ.">mettre_a_jour</a>(un_temps);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298   <span class="keywordflow">return</span> s ;
<a name="l00299"></a>00299 }
<a name="l00300"></a>00300 
<a name="l00301"></a><a class="code" href="classChamp__Fonc__MED.html#aa82b8aa65d1b575e7059d097d5664492">00301</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Fonc__MED.html#aa82b8aa65d1b575e7059d097d5664492" title="Mise a jour en temps du champ.">Champ_Fonc_MED::mettre_a_jour</a>(<span class="keywordtype">double</span> t)
<a name="l00302"></a>00302 {
<a name="l00303"></a>00303   <span class="keywordflow">if</span> (t&lt;0)
<a name="l00304"></a>00304     {
<a name="l00305"></a>00305 <span class="comment">// Si t negatif convention (non indique dans la doc Trust) pour specifier un numero de pas de temps:</span>
<a name="l00306"></a>00306       <span class="keywordtype">int</span> given_it = -(int) t - 1;
<a name="l00307"></a>00307       <a class="code" href="classChamp__Fonc__MED.html#a51321abac0e6e744b00d2b2481f30d18">lire</a>(-1, given_it);
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309   <span class="keywordflow">else</span>
<a name="l00310"></a>00310     <a class="code" href="classChamp__Fonc__MED.html#a51321abac0e6e744b00d2b2481f30d18">lire</a>(t);
<a name="l00311"></a>00311 }
<a name="l00312"></a>00312 
<a name="l00313"></a><a class="code" href="classChamp__Fonc__MED.html#a51321abac0e6e744b00d2b2481f30d18">00313</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Fonc__MED.html#a51321abac0e6e744b00d2b2481f30d18">Champ_Fonc_MED::lire</a>(<span class="keywordtype">double</span> t, <span class="keywordtype">int</span> given_it)
<a name="l00314"></a>00314 {
<a name="l00315"></a>00315   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#ab06515690d12605729609630f35c87c3">zonebidon_inst</a>.<a class="code" href="classZone__dis__base.html#a790cb2f6bc2928518799e748313d0eb3">nb_elem</a>()==0) <span class="comment">//!&lt; Cas d&#39;une zone vide</span>
<a name="l00316"></a>00316 <span class="comment"></span>    {
<a name="l00317"></a>00317 <span class="comment">// Mise a jour:</span>
<a name="l00318"></a>00318       <a class="code" href="classChamp__Fonc__MED.html#aa82b8aa65d1b575e7059d097d5664492" title="Mise a jour en temps du champ.">Champ_Fonc_base::mettre_a_jour</a>(t);
<a name="l00319"></a>00319       <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().Champ_Fonc_base::mettre_a_jour(t);
<a name="l00320"></a>00320       <span class="keywordflow">return</span>;
<a name="l00321"></a>00321     }
<a name="l00322"></a>00322 <span class="preprocessor">#ifdef MED_</span>
<a name="l00323"></a>00323 <span class="preprocessor"></span><span class="preprocessor">#ifdef MEDCOUPLING_</span>
<a name="l00324"></a>00324 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a45efed570f4cdc07e8a8bfe817a0d9de">use_medcoupling_</a>)
<a name="l00325"></a>00325     {
<a name="l00326"></a>00326 <span class="comment">// Read a field</span>
<a name="l00327"></a>00327       std::string  meshName = <a class="code" href="classChamp__Fonc__MED.html#aab353af94555bc745b93aa2b747c2bce">mon_dom</a>.<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>();
<a name="l00328"></a>00328       std::string fieldName = <a class="code" href="classChamp__Fonc__MED.html#ae3bddf218c5476bcf760bfaa8e2b36a9">nom_champ_dans_fichier_med_</a>.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>();
<a name="l00329"></a>00329       std::string  fileName = <a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>();
<a name="l00330"></a>00330 <span class="comment">// Etude des conditions pour chercher ou nom un champ dans le fichier MED:</span>
<a name="l00331"></a>00331       <span class="keywordtype">bool</span> search_field = <span class="keyword">true</span>;
<a name="l00332"></a>00332       <a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a> = <a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00333"></a>00333       <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a>&gt;0)
<a name="l00334"></a>00334         {
<a name="l00335"></a>00335 <span class="comment">// nb_dt nombre de pas de temps dans le fichier MED</span>
<a name="l00336"></a>00336 <span class="comment">// ndt taille du tableau temps_sauv contenant les pas de temps du champ dans le fichier MED</span>
<a name="l00337"></a>00337 <span class="comment">// tmax dernier temps du tableau temps_sauv ?</span>
<a name="l00338"></a>00338 <span class="comment">// dt ?</span>
<a name="l00339"></a>00339 <span class="comment">// t temps courant pour lequel on veut remplir le champ</span>
<a name="l00340"></a>00340 <span class="comment">// last_time_only_ specifie dans le jeu de donnees ou non</span>
<a name="l00341"></a>00341           <span class="keywordtype">double</span> tmax = <a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>(<a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a> - 1);
<a name="l00342"></a>00342           <span class="keywordtype">double</span> dt = <a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>(<a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a> - 1);
<a name="l00343"></a>00343           <span class="keywordflow">if</span> (((<a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a> == 1) &amp;&amp; (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(dt, t))) || ((<a class="code" href="classChamp__Fonc__MED.html#a7e764f762f24b8c9bed33a841902c2df">last_time_only_</a> == 1) &amp;&amp; (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(tmax, t))))
<a name="l00344"></a>00344             {
<a name="l00345"></a>00345               <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;We assume that the field &quot;</span> &lt;&lt; fieldName.c_str() &lt;&lt; <span class="stringliteral">&quot; is stationary.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00346"></a>00346               search_field = <span class="keyword">false</span>;
<a name="l00347"></a>00347             }
<a name="l00348"></a>00348         }
<a name="l00349"></a>00349       <span class="keywordflow">if</span> (search_field)
<a name="l00350"></a>00350         {
<a name="l00351"></a>00351           <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>()==0)
<a name="l00352"></a>00352             <a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a> = lire_temps_champ(fileName, fieldName);
<a name="l00353"></a>00353           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nn = <a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00354"></a>00354           <span class="keywordflow">if</span> (given_it == -1)
<a name="l00355"></a>00355             {
<a name="l00356"></a>00356               <span class="keywordflow">for</span> (given_it = 0; given_it &lt; (int) nn; given_it++)
<a name="l00357"></a>00357                 <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(<a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>[given_it], t)) <span class="keywordflow">break</span>;
<a name="l00358"></a>00358               <span class="keywordflow">if</span> (given_it == (<span class="keywordtype">int</span>)nn)
<a name="l00359"></a>00359                 {
<a name="l00360"></a>00360                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error. Time &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; not found in the times list of the &quot;</span> &lt;&lt; fileName.c_str() &lt;&lt; <span class="stringliteral">&quot; file&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00361"></a>00361                   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n=0; n&lt;nn; n++)
<a name="l00362"></a>00362                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>[n] &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00363"></a>00363                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00364"></a>00364                 }
<a name="l00365"></a>00365             }
<a name="l00366"></a>00366           <span class="keywordtype">int</span> iteration = time_steps_[given_it].first;
<a name="l00367"></a>00367           <span class="keywordtype">int</span> order = time_steps_[given_it].second;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369 <span class="comment">// Only one MCAuto below to avoid double deletion:</span>
<a name="l00370"></a>00370           MCAuto&lt;MEDCouplingField&gt; ffield = lire_champ(fileName, meshName, fieldName, iteration, order);
<a name="l00371"></a>00371           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; at time &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; ... &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00372"></a>00372           MEDCouplingFieldDouble * field = <span class="keyword">dynamic_cast&lt;</span>MEDCouplingFieldDouble *<span class="keyword">&gt;</span>((MEDCouplingField *)ffield);
<a name="l00373"></a>00373           <span class="keywordflow">if</span> (field == 0)
<a name="l00374"></a>00374             {
<a name="l00375"></a>00375               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;ERROR reading MED field! Not a MEDCouplingFieldDouble!!&quot;</span> &lt;&lt; finl;
<a name="l00376"></a>00376               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(-1);
<a name="l00377"></a>00377             }
<a name="l00378"></a>00378           <span class="keyword">const</span> <span class="keywordtype">double</span> *field_values = field-&gt;getArray()-&gt;begin();
<a name="l00379"></a>00379           assert(field-&gt;getNumberOfTuplesExpected() == <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0));
<a name="l00380"></a>00380           assert((<span class="keywordtype">int</span>) field-&gt;getNumberOfComponents() ==
<a name="l00381"></a>00381                  (<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>() == 1 ? 1 : <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1)));
<a name="l00382"></a>00382           memcpy(<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__MED.html#a1ce1f0647466418fb580663dfdd39e0c" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().addr(), field_values,
<a name="l00383"></a>00383                  <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__MED.html#a1ce1f0647466418fb580663dfdd39e0c" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().size_array() * <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l00384"></a>00384         }
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386   <span class="keywordflow">else</span>
<a name="l00387"></a>00387 <span class="preprocessor">#endif</span>
<a name="l00388"></a>00388 <span class="preprocessor"></span>    {
<a name="l00389"></a>00389       <a class="code" href="med__nul_8h.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> fid = MEDfileOpen(<a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a>, MED_ACC_RDONLY);
<a name="l00390"></a>00390       <span class="keywordflow">if</span> (fid &lt; 0)
<a name="l00391"></a>00391         {
<a name="l00392"></a>00392           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Problem while opening the file &quot;</span> &lt;&lt; <a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00393"></a>00393           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00394"></a>00394         }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396       <a class="code" href="classChar__ptr.html" title="class Char_ptr Une chaine de caractere pour nommer les objets de TRUST NOM_H">Char_ptr</a> pflname;
<a name="l00397"></a>00397       pflname.<a class="code" href="classChar__ptr.html#a99698885f5a6fa6d4b6281649c905b3f">allocate</a>(MED_NAME_SIZE);
<a name="l00398"></a>00398       <span class="keywordflow">if</span> (given_it != -1)
<a name="l00399"></a>00399         {
<a name="l00400"></a>00400           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Searching for the &quot;</span>&lt;&lt;given_it+1&lt;&lt; <span class="stringliteral">&quot; iteration of the field &quot;</span>&lt;&lt;<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>()&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00401"></a>00401         }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403       <a class="code" href="classChar__ptr.html" title="class Char_ptr Une chaine de caractere pour nommer les objets de TRUST NOM_H">Char_ptr</a> dt_unit;
<a name="l00404"></a>00404       dt_unit.<a class="code" href="classChar__ptr.html#a99698885f5a6fa6d4b6281649c905b3f">allocate</a>(MED_SNAME_SIZE);
<a name="l00405"></a>00405 <span class="comment">// on cherche le numero du pas de temps</span>
<a name="l00406"></a>00406       <a class="code" href="med__nul_8h.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> numdt, numo;
<a name="l00407"></a>00407       <span class="keywordtype">double</span> dt = -2;
<a name="l00408"></a>00408       <span class="keywordtype">int</span> ret, size = 0;
<a name="l00409"></a>00409       <a class="code" href="classChar__ptr.html" title="class Char_ptr Une chaine de caractere pour nommer les objets de TRUST NOM_H">Char_ptr</a> maa_ass;
<a name="l00410"></a>00410       maa_ass.<a class="code" href="classChar__ptr.html#a99698885f5a6fa6d4b6281649c905b3f">allocate</a>(MED_NAME_SIZE);
<a name="l00411"></a>00411 <span class="comment">// Cerr&lt;&lt;&quot;nb_dt&quot;&lt;&lt;nb_dt&lt;&lt;finl;</span>
<a name="l00412"></a>00412       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom(<a class="code" href="classChamp__Fonc__MED.html#aab353af94555bc745b93aa2b747c2bce">mon_dom</a>.<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>());
<a name="l00413"></a>00413       <span class="keywordtype">int</span> i2 = 0;
<a name="l00414"></a>00414       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; le_nom_du_champ = <a class="code" href="classChamp__Fonc__MED.html#ae3bddf218c5476bcf760bfaa8e2b36a9">nom_champ_dans_fichier_med_</a>;
<a name="l00415"></a>00415       med_field_type typcha;
<a name="l00416"></a>00416 <span class="comment">// Nom meshname; dimensionne_nom_taille(meshname,MED_NAME_SIZE);</span>
<a name="l00417"></a>00417       <a class="code" href="classChar__ptr.html" title="class Char_ptr Une chaine de caractere pour nommer les objets de TRUST NOM_H">Char_ptr</a> dtunit;
<a name="l00418"></a>00418       dtunit.<a class="code" href="classChar__ptr.html#a99698885f5a6fa6d4b6281649c905b3f">allocate</a>(MED_SNAME_SIZE);
<a name="l00419"></a>00419       med_bool localmesh;
<a name="l00420"></a>00420       <a class="code" href="med__nul_8h.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> nbofcstp;
<a name="l00421"></a>00421       <span class="keywordtype">int</span> ncomp = MEDfieldnComponentByName(fid, le_nom_du_champ);
<a name="l00422"></a>00422       <a class="code" href="classChar__ptr.html" title="class Char_ptr Une chaine de caractere pour nommer les objets de TRUST NOM_H">Char_ptr</a> comp;
<a name="l00423"></a>00423       comp.<a class="code" href="classChar__ptr.html#a99698885f5a6fa6d4b6281649c905b3f">allocate</a>(MED_SNAME_SIZE * ncomp);
<a name="l00424"></a>00424       <a class="code" href="classChar__ptr.html" title="class Char_ptr Une chaine de caractere pour nommer les objets de TRUST NOM_H">Char_ptr</a> unit;
<a name="l00425"></a>00425       unit.<a class="code" href="classChar__ptr.html#a99698885f5a6fa6d4b6281649c905b3f">allocate</a>(MED_SNAME_SIZE * ncomp);
<a name="l00426"></a>00426       ret = MEDfieldInfoByName(fid, le_nom_du_champ, maa_ass, &amp;localmesh, &amp;typcha, comp, unit, dtunit, &amp;nbofcstp);
<a name="l00427"></a>00427       <span class="keywordtype">int</span> nb_dt_tot = nbofcstp;
<a name="l00428"></a>00428       <span class="keywordtype">double</span> tmax = -1;
<a name="l00429"></a>00429       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; nb_dt_tot; j++)
<a name="l00430"></a>00430         {
<a name="l00431"></a>00431           <a class="code" href="med__nul_8h.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshnumdt, meshnumit;
<a name="l00432"></a>00432           MEDfieldComputingStepMeshInfo(fid, le_nom_du_champ, j + 1, &amp;numdt, &amp;numo, &amp;dt, &amp;meshnumdt, &amp;meshnumit);
<a name="l00433"></a>00433           tmax = dt;
<a name="l00434"></a>00434         }
<a name="l00435"></a>00435       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; nb_dt_tot; j++)
<a name="l00436"></a>00436         {
<a name="l00437"></a>00437           <span class="keywordflow">if</span> (i2 &gt;= <a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a>) <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00438"></a>00438 
<a name="l00439"></a>00439           <a class="code" href="med__nul_8h.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshnumdt, meshnumit;
<a name="l00440"></a>00440           MEDfieldComputingStepMeshInfo(fid, le_nom_du_champ, j + 1, &amp;numdt, &amp;numo, &amp;dt, &amp;meshnumdt, &amp;meshnumit);
<a name="l00441"></a>00441           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> Nmaa_ass(maa_ass);
<a name="l00442"></a>00442           <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(dt, t))
<a name="l00443"></a>00443             {
<a name="l00444"></a>00444               size = MEDfieldnValue(fid, le_nom_du_champ, numdt, numo, type_ent, type_geo);
<a name="l00445"></a>00445               <span class="keywordflow">if</span> ((size != 0) &amp;&amp; (nom_dom == Nmaa_ass))
<a name="l00446"></a>00446                 <span class="keywordflow">break</span>;
<a name="l00447"></a>00447             }
<a name="l00448"></a>00448           <span class="keywordflow">if</span> (Nmaa_ass == nom_dom)
<a name="l00449"></a>00449             {
<a name="l00450"></a>00450               <span class="keywordflow">if</span> (given_it == i2)
<a name="l00451"></a>00451                 {
<a name="l00452"></a>00452                   t = dt;
<a name="l00453"></a>00453                   given_it = j;
<a name="l00454"></a>00454                   <span class="keywordflow">break</span>;
<a name="l00455"></a>00455                 }
<a name="l00456"></a>00456               i2++;
<a name="l00457"></a>00457             }
<a name="l00458"></a>00458         }
<a name="l00459"></a>00459 <span class="comment">// dt=t;</span>
<a name="l00460"></a>00460 <span class="comment">// numdt=1;</span>
<a name="l00461"></a>00461 <span class="comment">// numo=MED_NONOR;</span>
<a name="l00462"></a>00462 <span class="comment">// Cerr &lt;&lt; &quot;Provisoire temps=&quot; &lt;&lt; temps_sauv_ &lt;&lt; finl;</span>
<a name="l00463"></a>00463 <span class="comment">// Cerr &lt;&lt; &quot;Provisoire temps= &quot; &lt;&lt; nb_dt &lt;&lt; &quot; &quot; &lt;&lt; dt &lt;&lt; &quot; &quot; &lt;&lt; t &lt;&lt; &quot; &quot; &lt;&lt; tmax &lt;&lt; &quot; &quot; &lt;&lt; last_time_only_ &lt;&lt; finl;</span>
<a name="l00464"></a>00464       <span class="keywordflow">if</span> (((<a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a> == 1) &amp;&amp; (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(dt, t))) || ((<a class="code" href="classChamp__Fonc__MED.html#a7e764f762f24b8c9bed33a841902c2df">last_time_only_</a> == 1) &amp;&amp; (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(tmax, t))))
<a name="l00465"></a>00465         {
<a name="l00466"></a>00466           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;We assume that the field &quot;</span> &lt;&lt; le_nom_du_champ &lt;&lt; <span class="stringliteral">&quot; is stationary.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00467"></a>00467         }
<a name="l00468"></a>00468       <span class="keywordflow">else</span>
<a name="l00469"></a>00469         {
<a name="l00470"></a>00470           <span class="keywordflow">if</span> (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(dt, t))
<a name="l00471"></a>00471             {
<a name="l00472"></a>00472               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>.precision(12);
<a name="l00473"></a>00473               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error: we did not find the time &quot;</span> &lt;&lt; t &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00474"></a>00474               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Available times for &quot;</span> &lt;&lt; le_nom_du_champ &lt;&lt; <span class="stringliteral">&quot; domain &quot;</span> &lt;&lt; nom_dom &lt;&lt; <span class="stringliteral">&quot; are:&quot;</span> &lt;&lt; finl;
<a name="l00475"></a>00475               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a>; j++)
<a name="l00476"></a>00476                 {
<a name="l00477"></a>00477                   <a class="code" href="med__nul_8h.html#a88dc15143f934cc7b771bc89f46372dc">med_int</a> meshnumdt, meshnumit;
<a name="l00478"></a>00478                   MEDfieldComputingStepMeshInfo(fid, le_nom_du_champ, j + 1, &amp;numdt, &amp;numo, &amp;dt, &amp;meshnumdt, &amp;meshnumit);
<a name="l00479"></a>00479                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; dt &lt;&lt; finl;
<a name="l00480"></a>00480                 }
<a name="l00481"></a>00481               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00482"></a>00482             }
<a name="l00483"></a>00483           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Reading the time step &quot;</span> &lt;&lt; (int) numdt &lt;&lt; <span class="stringliteral">&quot; of field &quot;</span> &lt;&lt; le_nom_du_champ &lt;&lt; <span class="stringliteral">&quot; time &quot;</span> &lt;&lt; t
<a name="l00484"></a>00484                &lt;&lt; <span class="stringliteral">&quot; type ent &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>) type_ent &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00485"></a>00485           <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() &gt; 0) <span class="comment">//lecture sur domaine parallele -&gt; avec un filtre</span>
<a name="l00486"></a>00486             {
<a name="l00487"></a>00487               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Read with filter...&quot;</span> &lt;&lt; finl;
<a name="l00488"></a>00488               med_filter flt = MED_FILTER_INIT;
<a name="l00489"></a>00489               <span class="keywordflow">if</span>(MEDfilterEntityCr(fid, size, 1, <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__MED.html#a1ce1f0647466418fb580663dfdd39e0c" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().nb_dim() &gt; 1 ? <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__MED.html#a1ce1f0647466418fb580663dfdd39e0c" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>(1) : 1, MED_ALL_CONSTITUENT,
<a name="l00490"></a>00490                                    <a class="code" href="med__nul_8h.html#a0ac861d71fe5e0be056a86f9212f1c6aa9a1509b3f93e5915a24f555890c73ee1">MED_FULL_INTERLACE</a>, MED_COMPACT_STMODE, MED_ALLENTITIES_PROFILE, <a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(), <a class="code" href="classChamp__Fonc__MED.html#a290481b2608a58f1040d5755556820da">filter</a>.<a class="code" href="classArrOfInt.html#ad0b31250e60cd9040ea60be55db73c3d" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>(), &amp;flt) &lt; 0)
<a name="l00491"></a>00491                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Champ_Fonc_MED on parallel domain : error at filter creation!&quot;</span> &lt;&lt; finl, <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00492"></a>00492               ret = MEDfieldValueAdvancedRd(fid,le_nom_du_champ,numdt,numo,type_ent,type_geo,&amp;flt,(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__MED.html#a1ce1f0647466418fb580663dfdd39e0c" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().addr());
<a name="l00493"></a>00493             }
<a name="l00494"></a>00494           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__MED.html#a1ce1f0647466418fb580663dfdd39e0c" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>(0) &gt; 0)<span class="comment">//lecture complete</span>
<a name="l00495"></a>00495             ret = MEDfieldValueRd(fid, le_nom_du_champ, numdt, numo, type_ent, type_geo, <a class="code" href="med__nul_8h.html#a0ac861d71fe5e0be056a86f9212f1c6aa9a1509b3f93e5915a24f555890c73ee1">MED_FULL_INTERLACE</a>,
<a name="l00496"></a>00496                                   MED_ALL_CONSTITUENT, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__MED.html#a1ce1f0647466418fb580663dfdd39e0c" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>().addr());
<a name="l00497"></a>00497           <span class="keywordflow">if</span> (ret &lt; 0)
<a name="l00498"></a>00498             {
<a name="l00499"></a>00499               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Problem while reading field &quot;</span> &lt;&lt; le_nom_du_champ &lt;&lt; <span class="stringliteral">&quot; name of domain &quot;</span> &lt;&lt; <a class="code" href="classChamp__Fonc__MED.html#aab353af94555bc745b93aa2b747c2bce">mon_dom</a>.<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>() &lt;&lt; finl;
<a name="l00500"></a>00500               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00501"></a>00501             }
<a name="l00502"></a>00502           MEDfileClose(fid);
<a name="l00503"></a>00503         }
<a name="l00504"></a>00504     }
<a name="l00505"></a>00505 <span class="comment">// Mise a jour:</span>
<a name="l00506"></a>00506   <a class="code" href="classChamp__Fonc__MED.html#aa82b8aa65d1b575e7059d097d5664492" title="Mise a jour en temps du champ.">Champ_Fonc_base::mettre_a_jour</a>(t);
<a name="l00507"></a>00507   <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().Champ_Fonc_base::mettre_a_jour(t);
<a name="l00508"></a>00508 <span class="preprocessor">#else</span>
<a name="l00509"></a>00509 <span class="preprocessor"></span>  <a class="code" href="LireMED_8h.html#a4321f757cc3cf10b49c4045de68adaed">med_non_installe</a>();
<a name="l00510"></a>00510 <span class="preprocessor">#endif</span>
<a name="l00511"></a>00511 <span class="preprocessor"></span>}
<a name="l00512"></a>00512 
<a name="l00513"></a>00513 <span class="preprocessor">#ifdef MED_</span>
<a name="l00514"></a>00514 <span class="preprocessor"></span>med_geometry_type type_geo_trio_to_type_med(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type);
<a name="l00515"></a>00515 <span class="preprocessor">#ifdef MEDCOUPLING_</span>
<a name="l00516"></a>00516 <span class="preprocessor"></span>INTERP_KERNEL::NormalizedCellType type_geo_trio_to_type_medcoupling(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type, <span class="keywordtype">int</span>&amp; mesh_dimension);
<a name="l00517"></a>00517 <span class="preprocessor">#endif</span>
<a name="l00518"></a>00518 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00519"></a>00519 <span class="preprocessor"></span>
<a name="l00520"></a><a class="code" href="classChamp__Fonc__MED.html#a8e4e0c74c245bdeca1e27325fcbc7b17">00520</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__Fonc__MED.html#a8e4e0c74c245bdeca1e27325fcbc7b17">Champ_Fonc_MED::creer</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fic, <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; un_dom, <span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; localisation, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; temps_sauv)
<a name="l00521"></a>00521 {
<a name="l00522"></a>00522 <span class="preprocessor">#ifdef MED_</span>
<a name="l00523"></a>00523 <span class="preprocessor"></span>  <a class="code" href="classChamp__Fonc__MED.html#a6d61f6da807f1887fd7e34417b1870c0">nom_fichier_med_</a> = nom_fic;
<a name="l00524"></a>00524   <a class="code" href="classChamp__Fonc__MED.html#aab353af94555bc745b93aa2b747c2bce">mon_dom</a>=un_dom;
<a name="l00525"></a>00525   <span class="keywordtype">int</span> nbcomp,size;
<a name="l00526"></a>00526   <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; <a class="code" href="Raffiner__Simplexes_8cpp.html#a358dc168d8905bbafc12587204bc9fb8">type_elem</a>=un_dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00527"></a>00527   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> type_champ;
<a name="l00528"></a>00528   <a class="code" href="classChamp__Fonc__MED.html#ae3bddf218c5476bcf760bfaa8e2b36a9">nom_champ_dans_fichier_med_</a> = <a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>();
<a name="l00529"></a>00529 <span class="preprocessor">#ifdef MEDCOUPLING_</span>
<a name="l00530"></a>00530 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classChamp__Fonc__MED.html#a45efed570f4cdc07e8a8bfe817a0d9de">use_medcoupling_</a>)
<a name="l00531"></a>00531     {
<a name="l00532"></a>00532 <span class="comment">// MEDCoupling</span>
<a name="l00533"></a>00533       <span class="keywordtype">int</span> mesh_dimension = -1;
<a name="l00534"></a>00534       cell_type = type_geo_trio_to_type_medcoupling(type_elem, mesh_dimension);
<a name="l00535"></a>00535       <span class="keywordflow">if</span> (localisation != <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>())
<a name="l00536"></a>00536         {
<a name="l00537"></a>00537           <span class="keywordflow">if</span> (localisation == <span class="stringliteral">&quot;som&quot;</span>)
<a name="l00538"></a>00538             {
<a name="l00539"></a>00539               field_type = MEDCoupling::ON_NODES;
<a name="l00540"></a>00540               <span class="keywordflow">if</span> ((cell_type == INTERP_KERNEL::NORM_QUAD4) || (cell_type == INTERP_KERNEL::NORM_HEXA8))
<a name="l00541"></a>00541                 type_champ = <span class="stringliteral">&quot;Champ_Fonc_Q1_MED&quot;</span>;
<a name="l00542"></a>00542               <span class="keywordflow">else</span>
<a name="l00543"></a>00543                 type_champ = <span class="stringliteral">&quot;Champ_Fonc_P1_MED&quot;</span>;
<a name="l00544"></a>00544             }
<a name="l00545"></a>00545           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (localisation == <span class="stringliteral">&quot;elem&quot;</span>)
<a name="l00546"></a>00546             {
<a name="l00547"></a>00547               field_type = MEDCoupling::ON_CELLS;
<a name="l00548"></a>00548               type_champ = <span class="stringliteral">&quot;Champ_Fonc_P0_MED&quot;</span>;
<a name="l00549"></a>00549             }
<a name="l00550"></a>00550           <span class="keywordflow">else</span>
<a name="l00551"></a>00551             {
<a name="l00552"></a>00552               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; localisation &lt;&lt; <span class="stringliteral">&quot; localization unknown.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00553"></a>00553               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00554"></a>00554             }
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556       std::string meshName = <a class="code" href="classChamp__Fonc__MED.html#aab353af94555bc745b93aa2b747c2bce">mon_dom</a>.<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>();
<a name="l00557"></a>00557       std::string fileName = nom_fic.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>();
<a name="l00558"></a>00558 <span class="comment">// Try to guess the field name in the MED file:</span>
<a name="l00559"></a>00559       <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> fieldNamesGuess;
<a name="l00560"></a>00560       fieldNamesGuess.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>((<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>)<a class="code" href="classChamp__Fonc__MED.html#ae3bddf218c5476bcf760bfaa8e2b36a9">nom_champ_dans_fichier_med_</a>+<span class="stringliteral">&quot;_&quot;</span>+<a class="code" href="classChamp__Fonc__MED.html#aab353af94555bc745b93aa2b747c2bce">mon_dom</a>.<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>());
<a name="l00561"></a>00561       <span class="keywordflow">if</span> (localisation != <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>())
<a name="l00562"></a>00562         fieldNamesGuess.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>((<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>)<a class="code" href="classChamp__Fonc__MED.html#ae3bddf218c5476bcf760bfaa8e2b36a9">nom_champ_dans_fichier_med_</a>+<span class="stringliteral">&quot;_&quot;</span>+localisation+<span class="stringliteral">&quot;_&quot;</span>+<a class="code" href="classChamp__Fonc__MED.html#aab353af94555bc745b93aa2b747c2bce">mon_dom</a>.<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>());
<a name="l00563"></a>00563       fieldNamesGuess.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>((<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>)<a class="code" href="classChamp__Fonc__MED.html#ae3bddf218c5476bcf760bfaa8e2b36a9">nom_champ_dans_fichier_med_</a>);
<a name="l00564"></a>00564       <span class="keywordflow">if</span> (!fieldNamesGuess.<a class="code" href="classNoms.html#a206f141fd7ee3671233c10d928fa1d99">contient_</a>(nom_champ_dans_fichier_med_))
<a name="l00565"></a>00565         fieldNamesGuess.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(nom_champ_dans_fichier_med_);
<a name="l00566"></a>00566       <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;
<a name="l00567"></a>00567       std::vector&lt;std::string&gt; fieldNames = GetAllFieldNamesOnMesh(fileName, meshName);
<a name="l00568"></a>00568       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;fieldNamesGuess.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); i++)
<a name="l00569"></a>00569         {
<a name="l00570"></a>00570           <span class="keywordflow">if</span> (std::find(fieldNames.begin(), fieldNames.end(), fieldNamesGuess[i].getString()) != fieldNames.end())
<a name="l00571"></a>00571             {
<a name="l00572"></a>00572               nom_champ_dans_fichier_med_ = fieldNamesGuess[i];
<a name="l00573"></a>00573               ok = <span class="keyword">true</span>;
<a name="l00574"></a>00574               <span class="keywordflow">break</span>;
<a name="l00575"></a>00575             }
<a name="l00576"></a>00576         }
<a name="l00577"></a>00577       <span class="keywordflow">if</span> (!ok)
<a name="l00578"></a>00578         {
<a name="l00579"></a>00579           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Unable to find into file &quot;</span> &lt;&lt; fileName.c_str() &lt;&lt; <span class="stringliteral">&quot; a field named like :&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00580"></a>00580           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; fieldNamesGuess &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00581"></a>00581           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;This file contains the field(s) named:&quot;</span> &lt;&lt; finl;
<a name="l00582"></a>00582           <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0; i&lt;fieldNames.size(); i++)
<a name="l00583"></a>00583             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; fieldNames[i].c_str() &lt;&lt; finl;
<a name="l00584"></a>00584           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00585"></a>00585         }
<a name="l00586"></a>00586       <span class="keywordflow">else</span>
<a name="l00587"></a>00587         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Ok, we find into file &quot;</span> &lt;&lt; fileName.c_str() &lt;&lt; <span class="stringliteral">&quot; a field named &quot;</span> &lt;&lt; nom_champ_dans_fichier_med_ &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00588"></a>00588 
<a name="l00589"></a>00589       std::string fieldName = nom_champ_dans_fichier_med_.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>();
<a name="l00590"></a>00590       lire_donnees_champ(fileName,meshName,fieldName,temps_sauv,size,nbcomp,type_champ);
<a name="l00591"></a>00591     }
<a name="l00592"></a>00592   <span class="keywordflow">else</span>
<a name="l00593"></a>00593 <span class="preprocessor">#endif</span>
<a name="l00594"></a>00594 <span class="preprocessor"></span>    {
<a name="l00595"></a>00595 <span class="comment">// MEDFile</span>
<a name="l00596"></a>00596       type_geo = type_geo_trio_to_type_med(type_elem);
<a name="l00597"></a>00597       <span class="keywordtype">int</span> verifie_type = 0;
<a name="l00598"></a>00598       <span class="keywordflow">if</span> (localisation != <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>())
<a name="l00599"></a>00599         {
<a name="l00600"></a>00600           verifie_type = 1;
<a name="l00601"></a>00601           <span class="keywordflow">if</span> (localisation == <span class="stringliteral">&quot;som&quot;</span>)
<a name="l00602"></a>00602             type_ent = MED_NODE;
<a name="l00603"></a>00603           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (localisation == <span class="stringliteral">&quot;elem&quot;</span>)
<a name="l00604"></a>00604             type_ent = MED_CELL;
<a name="l00605"></a>00605           <span class="keywordflow">else</span>
<a name="l00606"></a>00606             {
<a name="l00607"></a>00607               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; localisation &lt;&lt; <span class="stringliteral">&quot; localisation not understood &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00608"></a>00608               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00609"></a>00609             }
<a name="l00610"></a>00610         }
<a name="l00611"></a>00611       <a class="code" href="classChamp__Fonc__MED.html#ae3bddf218c5476bcf760bfaa8e2b36a9">nom_champ_dans_fichier_med_</a> = medinfo1champ(nom_fic, <a class="code" href="classChamp__Fonc__MED.html#ae3bddf218c5476bcf760bfaa8e2b36a9">nom_champ_dans_fichier_med_</a>, <a class="code" href="classChamp__Fonc__MED.html#a8df8f5a40048826d1cf887808a167b9e">numero_ch</a>, nbcomp, <a class="code" href="classChamp__Fonc__MED.html#ae9e99511fb820fb4428ca04f4d92bc8c">nb_dt</a>,
<a name="l00612"></a>00612                                                   type_ent, type_geo, size, un_dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>(), verifie_type, temps_sauv);
<a name="l00613"></a>00613       <span class="keywordflow">if</span> (type_ent == MED_NODE)
<a name="l00614"></a>00614         {
<a name="l00615"></a>00615           <span class="keywordflow">if</span> ((type_geo == <a class="code" href="med__nul_8h.html#ab93ab4475f81e2db98705aca718115a9af3665c92b5329563931c10730fcfa654">MED_QUAD4</a>) || (type_geo == <a class="code" href="med__nul_8h.html#ab93ab4475f81e2db98705aca718115a9af413ef36dde25d6d4f0d526f1f7aeedf">MED_HEXA8</a>))
<a name="l00616"></a>00616             type_champ = <span class="stringliteral">&quot;Champ_Fonc_Q1_MED&quot;</span>;
<a name="l00617"></a>00617           <span class="keywordflow">else</span>
<a name="l00618"></a>00618             type_champ = <span class="stringliteral">&quot;Champ_Fonc_P1_MED&quot;</span>;
<a name="l00619"></a>00619         }
<a name="l00620"></a>00620       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type_ent == MED_CELL)
<a name="l00621"></a>00621         {
<a name="l00622"></a>00622           type_champ = <span class="stringliteral">&quot;Champ_Fonc_P0_MED&quot;</span>;
<a name="l00623"></a>00623         }
<a name="l00624"></a>00624     }
<a name="l00625"></a>00625 <span class="comment">// Definition:</span>
<a name="l00626"></a>00626   <a class="code" href="classChamp__Fonc__MED.html#aa79932e9ba8c78caf0191b9cbfef2d08">vrai_champ_</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(type_champ);
<a name="l00627"></a>00627   <a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(nbcomp);
<a name="l00628"></a>00628   <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(nbcomp);
<a name="l00629"></a>00629   <a class="code" href="classChamp__Fonc__MED.html#ab06515690d12605729609630f35c87c3">zonebidon_inst</a>.<a class="code" href="classZone__dis__base.html#a38a7b9f713523b10c1f090c4fc3480bd" title="Associe une Zone a l&#39;objet.">associer_zone</a>(un_dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0));
<a name="l00630"></a>00630   <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__base.html#a48f13bd5a043bac2927d50b52a4de2fc">associer_zone_dis_base</a>(<a class="code" href="classChamp__Fonc__MED.html#ab06515690d12605729609630f35c87c3">zonebidon_inst</a>);
<a name="l00631"></a>00631   <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classChamp__Fonc__base.html#a4182650c153eb10771ea5c7ffa0d8109" title="Fixe le nombre de degres de liberte par composante.">fixer_nb_valeurs_nodales</a>(type_champ == <span class="stringliteral">&quot;Champ_Fonc_P0_MED&quot;</span> ? un_dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>() : un_dom.<a class="code" href="classDomaine.html#abc4abc8b8db5bebeb161fae4162a89ce" title="Renvoie le nombre de sommets.">nb_som</a>());
<a name="l00632"></a>00632 <span class="comment">// pour forcer la lecture lors du mettre a jour</span>
<a name="l00633"></a>00633   <a class="code" href="classChamp__base.html#ab4fdc6fb46c5e4efe2f931ceadd66979" title="Fixe le temps auquel se situe le champ.">changer_temps</a>(-1e3);
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 <span class="comment">// corriger_unite_nom_compo();</span>
<a name="l00636"></a>00636   <a class="code" href="classChamp__Fonc__MED.html#a91abce22e10491609c5c949eb81501da">le_champ</a>().<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>());
<a name="l00637"></a>00637 <span class="comment">// le_champ().corriger_unite_nom_compo();</span>
<a name="l00638"></a>00638   <span class="keywordflow">return</span> size;
<a name="l00639"></a>00639 <span class="preprocessor">#else</span>
<a name="l00640"></a>00640 <span class="preprocessor"></span>  <a class="code" href="LireMED_8h.html#a4321f757cc3cf10b49c4045de68adaed">med_non_installe</a>();
<a name="l00641"></a>00641   <span class="keywordflow">return</span> 0;
<a name="l00642"></a>00642 <span class="preprocessor">#endif</span>
<a name="l00643"></a>00643 <span class="preprocessor"></span>}
<a name="l00644"></a>00644 
<a name="l00645"></a>00645 <span class="preprocessor">#ifdef MEDCOUPLING_</span>
<a name="l00646"></a>00646 <span class="preprocessor"></span><span class="comment">// Remplissage des temps du champ fieldName depuis le fichier fileName</span>
<a name="l00647"></a>00647 <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> Champ_Fonc_MED::lire_temps_champ(<span class="keyword">const</span> std::string&amp; fileName, <span class="keyword">const</span> std::string&amp; fieldName)
<a name="l00648"></a>00648 {
<a name="l00649"></a>00649   <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> temps_sauv;
<a name="l00650"></a>00650   MCAuto&lt;MEDFileFieldMultiTS&gt; ft1(MEDFileFieldMultiTS::New(fileName, fieldName));
<a name="l00651"></a>00651   std::vector&lt;double&gt; tps;
<a name="l00652"></a>00652   time_steps_ = ft1-&gt;getTimeSteps(tps);
<a name="l00653"></a>00653   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nn = tps.size();
<a name="l00654"></a>00654   temps_sauv.<a class="code" href="classArrOfDouble.html#a610464f4b3dccac6f814915b526783ed">resize_array</a>(nn);
<a name="l00655"></a>00655   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> it = 0; it &lt; nn; it++)
<a name="l00656"></a>00656     temps_sauv[it] = tps[it];
<a name="l00657"></a>00657   <span class="keywordflow">return</span> temps_sauv;
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 
<a name="l00660"></a>00660 MCAuto&lt;MEDCouplingField&gt; Champ_Fonc_MED::lire_champ(<span class="keyword">const</span> std::string&amp; fileName, <span class="keyword">const</span> std::string&amp; meshName, <span class="keyword">const</span> std::string&amp; fieldName, <span class="keyword">const</span> <span class="keywordtype">int</span> iteration, <span class="keyword">const</span> <span class="keywordtype">int</span> order)
<a name="l00661"></a>00661 {
<a name="l00662"></a>00662 <span class="comment">// Flag pour lecture plus rapide du field sans lecture du mesh si le maillage MED est deja disponible:</span>
<a name="l00663"></a>00663   <span class="keywordtype">bool</span> fast = meshName.c_str() == <a class="code" href="classChamp__Fonc__MED.html#a40814676f74696254f10225bec6a381c">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &amp;&amp; <a class="code" href="classChamp__Fonc__MED.html#a40814676f74696254f10225bec6a381c">domaine</a>().getUMesh() != NULL;
<a name="l00664"></a>00664   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Reading&quot;</span> &lt;&lt; (fast ? <span class="stringliteral">&quot; (fast)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; the field &quot;</span> &lt;&lt; fieldName.c_str() &lt;&lt; <span class="stringliteral">&quot; on the &quot;</span> &lt;&lt; meshName.c_str() &lt;&lt; <span class="stringliteral">&quot; mesh into &quot;</span> &lt;&lt; fileName.c_str() &lt;&lt; <span class="stringliteral">&quot; file&quot;</span>;
<a name="l00665"></a>00665   MCAuto&lt;MEDCouplingField&gt; ffield;
<a name="l00666"></a>00666   <span class="keywordflow">if</span> (fast)
<a name="l00667"></a>00667     {
<a name="l00668"></a>00668 <span class="comment">// Lecture plus rapide du field sans lecture du mesh associe</span>
<a name="l00669"></a>00669       MCAuto&lt;MEDFileField1TS&gt; file = MEDCoupling::MEDFileField1TS::New(fileName, fieldName, iteration, order);
<a name="l00670"></a>00670       ffield = file-&gt;getFieldOnMeshAtLevel(field_type, <a class="code" href="classChamp__Fonc__MED.html#a40814676f74696254f10225bec6a381c">domaine</a>().getUMesh(), 0);
<a name="l00671"></a>00671     }
<a name="l00672"></a>00672   <span class="keywordflow">else</span>   <span class="comment">//!&lt; Lecture ~deux fois plus lente du field avec lecture du mesh associe</span>
<a name="l00673"></a>00673 <span class="comment"></span>    ffield = ReadField(field_type, fileName, meshName, 0, fieldName, iteration, order);
<a name="l00674"></a>00674   <span class="keywordflow">return</span> ffield;
<a name="l00675"></a>00675 }
<a name="l00676"></a>00676 
<a name="l00677"></a>00677 <span class="comment">// Lecture du dernier champ dans le fichier juste pour decouvrir et stocker:</span>
<a name="l00678"></a>00678 <span class="comment">// les temps (temps_sauv)</span>
<a name="l00679"></a>00679 <span class="comment">// sa taille (size)</span>
<a name="l00680"></a>00680 <span class="comment">// le nombre de composantes (nbcomp)</span>
<a name="l00681"></a>00681 <span class="comment">// le type (type_champ)</span>
<a name="l00682"></a>00682 <span class="keywordtype">void</span> Champ_Fonc_MED::lire_donnees_champ(<span class="keyword">const</span> std::string&amp; fileName, <span class="keyword">const</span> std::string&amp; meshName, <span class="keyword">const</span> std::string&amp; fieldName,
<a name="l00683"></a>00683                                         <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; temps_sauv, <span class="keywordtype">int</span>&amp; size, <span class="keywordtype">int</span>&amp; nbcomp, <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type_champ)
<a name="l00684"></a>00684 {
<a name="l00685"></a>00685   temps_sauv = lire_temps_champ(fileName, fieldName);
<a name="l00686"></a>00686   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nn = temps_sauv.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00687"></a>00687   <span class="keywordtype">int</span> last_iter  = time_steps_[nn-1].first;
<a name="l00688"></a>00688   <span class="keywordtype">int</span> last_order = time_steps_[nn-1].second;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690 <span class="comment">// Only one MCAuto below to avoid double deletion:</span>
<a name="l00691"></a>00691   MCAuto&lt;MEDCouplingField&gt; ffield = lire_champ(fileName, meshName, fieldName, last_iter, last_order);
<a name="l00692"></a>00692   MEDCouplingFieldDouble * field = <span class="keyword">dynamic_cast&lt;</span>MEDCouplingFieldDouble *<span class="keyword">&gt;</span>((MEDCouplingField *)ffield);
<a name="l00693"></a>00693   <span class="keywordflow">if</span> (field == 0)
<a name="l00694"></a>00694     {
<a name="l00695"></a>00695       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;ERROR reading MED field! Not a MEDCouplingFieldDouble!!&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00696"></a>00696       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(-1);
<a name="l00697"></a>00697     }
<a name="l00698"></a>00698   size = field-&gt;getNumberOfTuplesExpected();
<a name="l00699"></a>00699   nbcomp = (int) field-&gt;getNumberOfComponents();
<a name="l00700"></a>00700 
<a name="l00701"></a>00701   <span class="keywordflow">if</span> (field_type == MEDCoupling::ON_NODES)
<a name="l00702"></a>00702     {
<a name="l00703"></a>00703       <span class="keywordflow">if</span> ((cell_type == INTERP_KERNEL::NORM_QUAD4) || (cell_type == INTERP_KERNEL::NORM_HEXA8))
<a name="l00704"></a>00704         type_champ = <span class="stringliteral">&quot;Champ_Fonc_Q1_MED&quot;</span>;
<a name="l00705"></a>00705       <span class="keywordflow">else</span>
<a name="l00706"></a>00706         type_champ = <span class="stringliteral">&quot;Champ_Fonc_P1_MED&quot;</span>;
<a name="l00707"></a>00707     }
<a name="l00708"></a>00708   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_type == MEDCoupling::ON_CELLS)
<a name="l00709"></a>00709     type_champ = <span class="stringliteral">&quot;Champ_Fonc_P0_MED&quot;</span>;
<a name="l00710"></a>00710 }
<a name="l00711"></a>00711 <span class="preprocessor">#endif</span>
<a name="l00712"></a>00712 <span class="preprocessor"></span>
<a name="l00713"></a><a class="code" href="classChamp__Fonc__MED.html#acb816604f0ff629900f4529d01984565">00713</a> <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; <a class="code" href="classChamp__Fonc__MED.html#acb816604f0ff629900f4529d01984565">Champ_Fonc_MED::zone_dis_base</a>()<span class="keyword"> const</span>
<a name="l00714"></a>00714 <span class="keyword"></span>{
<a name="l00715"></a>00715   <span class="keywordflow">return</span> <a class="code" href="classChamp__Fonc__MED.html#ab06515690d12605729609630f35c87c3">zonebidon_inst</a>;
<a name="l00716"></a>00716 }
<a name="l00717"></a>00717 
<a name="l00718"></a><a class="code" href="classChamp__Fonc__MED.html#a07504edbf43206a34c0b2a8566980a45">00718</a> <span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; <a class="code" href="classChamp__Fonc__MED.html#a07504edbf43206a34c0b2a8566980a45">Champ_Fonc_MED::get_saved_times</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00719"></a>00719 <span class="keyword"></span>{
<a name="l00720"></a>00720   <span class="keywordflow">return</span> <a class="code" href="classChamp__Fonc__MED.html#a6e9ffb17675395c8a48ff6e5f39fb3a1">temps_sauv_</a>;
<a name="l00721"></a>00721 }
<a name="l00722"></a>00722 
<a name="l00723"></a>00723 <span class="comment"></span>
<a name="l00724"></a>00724 <span class="comment">/**</span>
<a name="l00725"></a>00725 <span class="comment"> * Read field with MEDFile API (soon deprecated)</span>
<a name="l00726"></a>00726 <span class="comment"> */</span>
<a name="l00727"></a><a class="code" href="Champ__Fonc__MED_8cpp.html#af771751f805963f62920f931a4e7c88d">00727</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classChamp__Fonc__MEDfile.html">Champ_Fonc_MEDfile</a>, <span class="stringliteral">&quot;Champ_Fonc_MEDfile&quot;</span>, <a class="code" href="classChamp__Fonc__MED.html" title="classe Champ_Fonc_MED">Champ_Fonc_MED</a>);
<a name="l00728"></a>00728 <span class="comment">// XD Champ_Fonc_MEDfile champ_fonc_med Champ_Fonc_MEDfile 0 Obsolete keyword to read a field with MED file API</span>
<a name="l00729"></a><a class="code" href="classChamp__Fonc__MEDfile.html#aed2302f3039480224b4b45ed7259c944">00729</a> <a class="code" href="classChamp__Fonc__MEDfile.html#aed2302f3039480224b4b45ed7259c944">Champ_Fonc_MEDfile::Champ_Fonc_MEDfile</a>()
<a name="l00730"></a>00730 {
<a name="l00731"></a>00731   <a class="code" href="classChamp__Fonc__MED.html#a45efed570f4cdc07e8a8bfe817a0d9de">use_medcoupling_</a> = <span class="keyword">false</span>;
<a name="l00732"></a>00732 }
<a name="l00733"></a>00733 
<a name="l00734"></a><a class="code" href="classChamp__Fonc__MEDfile.html#a4b11c66c5ca547861d3623492aedc477">00734</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classChamp__Fonc__MEDfile.html#a4b11c66c5ca547861d3623492aedc477" title="NE FAIT RIEN A surcharger dans les classes derivees.">Champ_Fonc_MEDfile::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00735"></a>00735 <span class="keyword"></span>{
<a name="l00736"></a>00736   <span class="keywordflow">return</span> <a class="code" href="classChamp__Fonc__MEDfile.html#a4b11c66c5ca547861d3623492aedc477" title="NE FAIT RIEN A surcharger dans les classes derivees.">Champ_Fonc_MED::printOn</a>(os);
<a name="l00737"></a>00737 }
<a name="l00738"></a>00738 
<a name="l00739"></a><a class="code" href="classChamp__Fonc__MEDfile.html#a590fb99fa6a9406bc761502220aad1c4">00739</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classChamp__Fonc__MEDfile.html#a590fb99fa6a9406bc761502220aad1c4" title="NE FAIT RIEN A surcharger dans les classes derivees.">Champ_Fonc_MEDfile::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00740"></a>00740 {
<a name="l00741"></a>00741   <span class="keywordflow">return</span> <a class="code" href="classChamp__Fonc__MEDfile.html#a590fb99fa6a9406bc761502220aad1c4" title="NE FAIT RIEN A surcharger dans les classes derivees.">Champ_Fonc_MED::readOn</a>(is);
<a name="l00742"></a>00742 }
<a name="l00743"></a>00743 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:24 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
