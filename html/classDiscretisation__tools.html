<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: Discretisation_tools Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Discretisation_tools Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Discretisation_tools" -->
<p>: class <a class="el" href="classDiscretisation__tools.html" title=": class Discretisation_tools &lt;Description of class Discretisation_tools&gt;">Discretisation_tools</a><br/>
&lt;Description of class <a class="el" href="classDiscretisation__tools.html" title=": class Discretisation_tools &lt;Description of class Discretisation_tools&gt;">Discretisation_tools</a>&gt;  
 <a href="classDiscretisation__tools.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Discretisation__tools_8h_source.html">Discretisation_tools.h</a>&gt;</code></p>

<p><a href="classDiscretisation__tools-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDiscretisation__tools.html#a9bf815dae233544fdf5cf1b4a40d8d46">nodes_to_cells</a> (const <a class="el" href="classChamp__base.html">Champ_base</a> &amp;Hn, <a class="el" href="classChamp__base.html">Champ_base</a> &amp;He)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDiscretisation__tools.html#ad67586c6df4da667f2fe1d4b95e8e5d2">cells_to_nodes</a> (const <a class="el" href="classChamp__base.html">Champ_base</a> &amp;He, <a class="el" href="classChamp__base.html">Champ_base</a> &amp;Hn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDiscretisation__tools.html#acc8090547cb79adcf1306c07f2974ea2">faces_to_cells</a> (const <a class="el" href="classChamp__base.html">Champ_base</a> &amp;Hf, <a class="el" href="classChamp__base.html">Champ_base</a> &amp;He)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDiscretisation__tools.html#a4913b191a9c41374fd18a7600c759b99">cells_to_faces</a> (const <a class="el" href="classChamp__base.html">Champ_base</a> &amp;He, <a class="el" href="classChamp__base.html">Champ_base</a> &amp;Hf)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>: class <a class="el" href="classDiscretisation__tools.html" title=": class Discretisation_tools &lt;Description of class Discretisation_tools&gt;">Discretisation_tools</a><br/>
&lt;Description of class <a class="el" href="classDiscretisation__tools.html" title=": class Discretisation_tools &lt;Description of class Discretisation_tools&gt;">Discretisation_tools</a>&gt; </p>

<p>Definition at line <a class="el" href="Discretisation__tools_8h_source.html#l00036">36</a> of file <a class="el" href="Discretisation__tools_8h_source.html">Discretisation_tools.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4913b191a9c41374fd18a7600c759b99"></a><!-- doxytag: member="Discretisation_tools::cells_to_faces" ref="a4913b191a9c41374fd18a7600c759b99" args="(const Champ_base &amp;He, Champ_base &amp;Hf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Discretisation_tools::cells_to_faces </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classChamp__base.html">Champ_base</a> &amp;&#160;</td>
          <td class="paramname"><em>He</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classChamp__base.html">Champ_base</a> &amp;&#160;</td>
          <td class="paramname"><em>Hf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Discretisation__tools_8cpp_source.html#l00120">120</a> of file <a class="el" href="Discretisation__tools_8cpp_source.html">Discretisation_tools.cpp</a>.</p>

<p>References <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00118">assert_espace_virtuel_vect()</a>, <a class="el" href="Objet__U_8h_source.html#l00079">Objet_U::dimension</a>, <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="DoubleTab_8h_source.html#l00254">DoubleTab::dimension_tot()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00277">DoubleVect::echange_espace_virtuel()</a>, <a class="el" href="Zone__VF_8h_source.html#l00574">Zone_VF::elem_faces()</a>, <a class="el" href="classZone__VF.html#a547ab50904dc51bee39fed54a20934b2">Zone_VF::face_normales()</a>, <a class="el" href="Zone__VF_8h_source.html#l00054">Zone_VF::face_surfaces()</a>, <a class="el" href="DoubleVect_8h_source.html#l00164">DoubleVect::line_size()</a>, <a class="el" href="DoubleTab_8h_source.html#l00264">DoubleTab::nb_dim()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00144">Zone_dis_base::nb_elem_tot()</a>, <a class="el" href="Zone__VF_8h_source.html#l00519">Zone_VF::nb_faces()</a>, <a class="el" href="Zone__VF_8h_source.html#l00527">Zone_VF::nb_faces_tot()</a>, <a class="el" href="Zone__VF_8h_source.html#l00512">Zone_VF::premiere_face_int()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">Champ_Proto::valeurs()</a>, <a class="el" href="Op__Div__VEFP1B__Elem_8cpp_source.html#l00081">verifier()</a>, <a class="el" href="Zone__VF_8h_source.html#l00419">Zone_VF::volumes()</a>, <a class="el" href="Zone__VF_8h_source.html#l00736">Zone_VF::volumes_entrelaces()</a>, and <a class="el" href="Champ__base_8cpp_source.html#l01145">Champ_base::zone_dis_base()</a>.</p>

<p>Referenced by <a class="el" href="Milieu__base_8cpp_source.html#l00412">Milieu_base::update_rho_cp()</a>.</p>
<div class="fragment"><pre class="fragment">{

  <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tabHf=Hf.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tabHe=He.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;element_face entreee&quot;</span>,tabHe);
  <a class="code" href="Check__espace__virtuel_8cpp.html#a2ea8fcf12c28d0454bdc4126f8c4b186" title="en mode comm_check_enabled(), verifie si l&#39;espace virtuel du vecteur est a jour, si ce n&#39;est pas le c...">assert_espace_virtuel_vect</a>(tabHe);
  <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis_base=He.<a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>();

  <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zone_vf= <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis_base);
<span class="comment">// en realite on fait P1B vers face</span>
<span class="comment">// assert(tabHe.dimension_tot(0)==zone_dis_base.nb_elem_tot());</span>
  assert(tabHf.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0)==zone_vf.<a class="code" href="classZone__VF.html#a50fd21c9535680489015a3c8b88c685a" title="renvoie le nombre total de faces. C&#39;est-a-dire faces reelles + faces virtuelles">nb_faces_tot</a>());

  <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces=zone_vf.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
  <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes=zone_vf.<a class="code" href="classZone__VF.html#aea771c835e561469d2d21dbca5fac1cf" title="renvoie le volume de la maille i.">volumes</a>();
  <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes_entrelaces=zone_vf.<a class="code" href="classZone__VF.html#a64f0b549e5aea1656855113e3510f418">volumes_entrelaces</a>();

  tabHf=0;
  <span class="keywordtype">int</span> nb_face_elem=elem_faces.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <span class="keywordtype">int</span> nb_elem_tot=zone_dis_base.<a class="code" href="classZone__dis__base.html#a4d6aa445f152aa6dc54d66ea7a071147">nb_elem_tot</a>();

  <span class="keywordtype">double</span> coeffb=nb_face_elem;
  <span class="keywordtype">double</span> coeffi=coeffb;
  <span class="keywordflow">if</span> (zone_vf.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()==<span class="stringliteral">&quot;Zone_VDF&quot;</span>)
    {
      coeffb=1;
      coeffi=2;
    }

<span class="comment">// TODO : FIXME</span>
<span class="comment">// XXX : codage pas coherent... à voir : volumes ou volumes_entrelaces ???</span>
  <span class="keywordflow">if</span> (tabHe.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() == 1)
    {
      <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> vol_tot(tabHf);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nb_elem_tot; ele++)
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nb_face_elem; s++)
          {
            tabHf(elem_faces(ele,s))+=tabHe(ele,0)*volumes(ele);
            vol_tot(elem_faces(ele,s)) += volumes(ele);
          }
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f = 0; f &lt; zone_vf.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>(); f++)
        tabHf(f) /= vol_tot(f);
    }
  <span class="keywordflow">else</span>
    {
<span class="comment">// TODO : factorize these cases ...</span>
      <span class="keywordflow">if</span> (tabHf.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>()==1)
        {
          assert(coeffi==2);
          assert(coeffb==1);
<span class="comment">// VDF</span>
<span class="comment">// abort();</span>
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nb_elem_tot; ele++)
            {
              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nb_face_elem; s++)
                {
                  <span class="keywordtype">int</span> face=elem_faces(ele,s);
                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = 0; r &lt; zone_vf.<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; r++)
                    {
<span class="comment">// Change of basis N.K.N, with N the normal of the face, and K the tensorial coefficient to get the value of the diffusivity</span>
<span class="comment">// on the direction of the surface normal.</span>
                      <span class="keywordtype">double</span> normOnSurf = zone_vf.<a class="code" href="classZone__VF.html#a547ab50904dc51bee39fed54a20934b2">face_normales</a>(face, r) / zone_vf.<a class="code" href="classZone__VF.html#a40c3382b189a4fc508cf1c3e37b04b21">face_surfaces</a>(face);
                      tabHf(face) += tabHe(ele, r) * normOnSurf * normOnSurf * volumes(ele);
                    }
                }
            }
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=0; f&lt;zone_vf.<a class="code" href="classZone__VF.html#a12869806fa4834aca8f2964e16509dfd" title="une face est interne ssi elle separe deux elements. renvoie le numero de la premiere face interne...">premiere_face_int</a>(); f++)
            tabHf(f)/=volumes_entrelaces(f)*coeffb;
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=zone_vf.<a class="code" href="classZone__VF.html#a12869806fa4834aca8f2964e16509dfd" title="une face est interne ssi elle separe deux elements. renvoie le numero de la premiere face interne...">premiere_face_int</a>(); f&lt;zone_vf.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>(); f++)
            tabHf(f)/=volumes_entrelaces(f)*coeffi;
        }
      <span class="keywordflow">else</span>
        {
<span class="comment">// abort();</span>
          <span class="keywordtype">int</span> nb_comp=tabHf.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nb_elem_tot; ele++)
            {
              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nb_face_elem; s++)
                {
                  <span class="keywordtype">int</span> face=elem_faces(ele,s);
                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;nb_comp; comp++)
                    tabHf(face,comp)+=tabHe(ele,comp)*volumes(ele);
                }
            }

          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=0; f&lt;zone_vf.<a class="code" href="classZone__VF.html#a12869806fa4834aca8f2964e16509dfd" title="une face est interne ssi elle separe deux elements. renvoie le numero de la premiere face interne...">premiere_face_int</a>(); f++)
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;nb_comp; comp++)
              tabHf(f,comp)/=volumes_entrelaces(f)*coeffb;
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=zone_vf.<a class="code" href="classZone__VF.html#a12869806fa4834aca8f2964e16509dfd" title="une face est interne ssi elle separe deux elements. renvoie le numero de la premiere face interne...">premiere_face_int</a>(); f&lt;zone_vf.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>(); f++)
            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;nb_comp; comp++)
              tabHf(f,comp)/=volumes_entrelaces(f)*coeffi;

        }
    }
  tabHf.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<span class="comment">// Cerr&lt;&lt;min_array(tabHe)&lt;&lt;&quot; elem  &quot;&lt;&lt;max_array(tabHe)&lt;&lt;finl;</span>
<span class="comment">// Cerr&lt;&lt;min_array(tabHf)&lt;&lt;&quot; face  &quot;&lt;&lt;max_array(tabHf)&lt;&lt;finl;</span>

  <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;element_face sortie&quot;</span>,tabHf);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad67586c6df4da667f2fe1d4b95e8e5d2"></a><!-- doxytag: member="Discretisation_tools::cells_to_nodes" ref="ad67586c6df4da667f2fe1d4b95e8e5d2" args="(const Champ_base &amp;He, Champ_base &amp;Hn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Discretisation_tools::cells_to_nodes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classChamp__base.html">Champ_base</a> &amp;&#160;</td>
          <td class="paramname"><em>He</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classChamp__base.html">Champ_base</a> &amp;&#160;</td>
          <td class="paramname"><em>Hn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Discretisation__tools_8cpp_source.html#l00057">57</a> of file <a class="el" href="Discretisation__tools_8cpp_source.html">Discretisation_tools.cpp</a>.</p>

<p>References <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00118">assert_espace_virtuel_vect()</a>, <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="DoubleTab_8h_source.html#l00254">DoubleTab::dimension_tot()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00277">DoubleVect::echange_espace_virtuel()</a>, <a class="el" href="Zone_8h_source.html#l00402">Zone::les_elems()</a>, <a class="el" href="DoubleVect_8h_source.html#l00164">DoubleVect::line_size()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00144">Zone_dis_base::nb_elem_tot()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00148">Zone_dis_base::nb_som()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00152">Zone_dis_base::nb_som_tot()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">Champ_Proto::valeurs()</a>, <a class="el" href="Op__Div__VEFP1B__Elem_8cpp_source.html#l00081">verifier()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00106">Zone_dis_base::zone()</a>, and <a class="el" href="Champ__base_8cpp_source.html#l01145">Champ_base::zone_dis_base()</a>.</p>

<p>Referenced by <a class="el" href="Milieu__base_8cpp_source.html#l00412">Milieu_base::update_rho_cp()</a>.</p>
<div class="fragment"><pre class="fragment">{

  <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tabHn=Hn.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tabHe=He.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;elno entreee&quot;</span>,tabHe);
  <a class="code" href="Check__espace__virtuel_8cpp.html#a2ea8fcf12c28d0454bdc4126f8c4b186" title="en mode comm_check_enabled(), verifie si l&#39;espace virtuel du vecteur est a jour, si ce n&#39;est pas le c...">assert_espace_virtuel_vect</a>(tabHe);
  <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis_base=He.<a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>();

  assert(tabHe.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0)==zone_dis_base.<a class="code" href="classZone__dis__base.html#a4d6aa445f152aa6dc54d66ea7a071147">nb_elem_tot</a>());
  assert(tabHn.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0)==zone_dis_base.<a class="code" href="classZone__dis__base.html#a8f793341b7a41d67561ba563ae0f69a0">nb_som_tot</a>());

  <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems=zone_dis_base.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
  <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis_base).volumes();

  tabHn=0;
  <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> vsom(tabHn.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0));
  <span class="keywordtype">int</span> nb_som_elem=les_elems.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <span class="keywordtype">int</span> nb_elem_tot=zone_dis_base.<a class="code" href="classZone__dis__base.html#a4d6aa445f152aa6dc54d66ea7a071147">nb_elem_tot</a>();
  <span class="keywordtype">int</span> N = tabHn.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> e = 0; e &lt; nb_elem_tot; e++)
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nb_som_elem; s++)
      {
        <span class="keywordtype">int</span> sglob = les_elems(e, s);
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; N; n++)
          tabHn(sglob, n) += tabHe(e, n) * volumes(e);
        vsom(sglob) += volumes(e);
      }

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; zone_dis_base.<a class="code" href="classZone__dis__base.html#acc9921d6a29cb719fd832fd573e47825">nb_som</a>(); s++)
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; N; n++)
      tabHn(s, n) /= vsom(s);

  tabHn.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
  <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;elno sortie&quot;</span>,tabHn);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc8090547cb79adcf1306c07f2974ea2"></a><!-- doxytag: member="Discretisation_tools::faces_to_cells" ref="acc8090547cb79adcf1306c07f2974ea2" args="(const Champ_base &amp;Hf, Champ_base &amp;He)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Discretisation_tools::faces_to_cells </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classChamp__base.html">Champ_base</a> &amp;&#160;</td>
          <td class="paramname"><em>Hf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classChamp__base.html">Champ_base</a> &amp;&#160;</td>
          <td class="paramname"><em>He</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Discretisation__tools_8cpp_source.html#l00094">94</a> of file <a class="el" href="Discretisation__tools_8cpp_source.html">Discretisation_tools.cpp</a>.</p>

<p>References <a class="el" href="DoubleTab_8h_source.html#l00254">DoubleTab::dimension_tot()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00277">DoubleVect::echange_espace_virtuel()</a>, <a class="el" href="Zone__VF_8h_source.html#l00574">Zone_VF::elem_faces()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00140">Zone_dis_base::nb_elem()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00144">Zone_dis_base::nb_elem_tot()</a>, <a class="el" href="Zone__VF_8h_source.html#l00527">Zone_VF::nb_faces_tot()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">Champ_Proto::valeurs()</a>, and <a class="el" href="Champ__base_8cpp_source.html#l01145">Champ_base::zone_dis_base()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tabHf=Hf.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tabHe=He.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis_base=He.<a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>();
  <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zone_vf= <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis_base);
  assert(tabHe.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0)==zone_dis_base.<a class="code" href="classZone__dis__base.html#a4d6aa445f152aa6dc54d66ea7a071147">nb_elem_tot</a>());
  assert(tabHf.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0)==zone_vf.<a class="code" href="classZone__VF.html#a50fd21c9535680489015a3c8b88c685a" title="renvoie le nombre total de faces. C&#39;est-a-dire faces reelles + faces virtuelles">nb_faces_tot</a>());

  <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces=zone_vf.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
  <span class="keywordtype">int</span> nb_face_elem=elem_faces.dimension(1);
  <span class="keywordtype">int</span> nb_elem=zone_dis_base.<a class="code" href="classZone__dis__base.html#a790cb2f6bc2928518799e748313d0eb3">nb_elem</a>();

  tabHe=0;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nb_elem; ele++)
    {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nb_face_elem; s++)
        {

          tabHe(ele)+=tabHf(elem_faces(ele,s));
        }
    }
  <span class="keywordtype">double</span> inv_nb_face_elem=1./(nb_face_elem);
  tabHe*=inv_nb_face_elem;
  tabHe.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9bf815dae233544fdf5cf1b4a40d8d46"></a><!-- doxytag: member="Discretisation_tools::nodes_to_cells" ref="a9bf815dae233544fdf5cf1b4a40d8d46" args="(const Champ_base &amp;Hn, Champ_base &amp;He)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Discretisation_tools::nodes_to_cells </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classChamp__base.html">Champ_base</a> &amp;&#160;</td>
          <td class="paramname"><em>Hn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classChamp__base.html">Champ_base</a> &amp;&#160;</td>
          <td class="paramname"><em>He</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Discretisation__tools_8cpp_source.html#l00031">31</a> of file <a class="el" href="Discretisation__tools_8cpp_source.html">Discretisation_tools.cpp</a>.</p>

<p>References <a class="el" href="IntTab_8h_source.html#l00233">IntTab::dimension()</a>, <a class="el" href="DoubleTab_8h_source.html#l00254">DoubleTab::dimension_tot()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00277">DoubleVect::echange_espace_virtuel()</a>, <a class="el" href="Zone_8h_source.html#l00402">Zone::les_elems()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00140">Zone_dis_base::nb_elem()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00144">Zone_dis_base::nb_elem_tot()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00152">Zone_dis_base::nb_som_tot()</a>, <a class="el" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">Champ_Proto::valeurs()</a>, <a class="el" href="Zone__dis__base_8h_source.html#l00106">Zone_dis_base::zone()</a>, and <a class="el" href="Champ__base_8cpp_source.html#l01145">Champ_base::zone_dis_base()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tabHn=Hn.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tabHe=He.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis_base=He.<a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>();

  assert(tabHe.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0)==zone_dis_base.<a class="code" href="classZone__dis__base.html#a4d6aa445f152aa6dc54d66ea7a071147">nb_elem_tot</a>());
  assert(tabHn.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0)==zone_dis_base.<a class="code" href="classZone__dis__base.html#a8f793341b7a41d67561ba563ae0f69a0">nb_som_tot</a>());

  <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems=zone_dis_base.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
  <span class="keywordtype">int</span> nb_som_elem=les_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <span class="keywordtype">int</span> nb_elem=zone_dis_base.<a class="code" href="classZone__dis__base.html#a790cb2f6bc2928518799e748313d0eb3">nb_elem</a>();

  tabHe=0;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nb_elem; ele++)
    {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nb_som_elem; s++)
        {
          <span class="keywordtype">int</span> sglob=les_elems(ele,s);
          tabHe(ele)+=tabHn(sglob);
        }
    }
  <span class="keywordtype">double</span> inv_nb_som_elem=1./(nb_som_elem);
  tabHe*=inv_nb_som_elem;
  tabHe.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/Kernel/Geometrie/<a class="el" href="Discretisation__tools_8h_source.html">Discretisation_tools.h</a></li>
<li>src/Kernel/Geometrie/<a class="el" href="Discretisation__tools_8cpp_source.html">Discretisation_tools.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:36:35 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
