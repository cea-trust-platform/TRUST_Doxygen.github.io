<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Framework/Champ_base.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Framework/Champ_base.cpp</div>  </div>
</div>
<div class="contents">
<a href="Champ__base_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Champ_base.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Framework</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/89</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Champ__base_8h.html">Champ_base.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Equation__base_8h.html">Equation_base.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Dirichlet_8h.html">Dirichlet.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Dirichlet__homogene_8h.html">Dirichlet_homogene.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Symetrie_8h.html">Symetrie.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;strings.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Format__Post__base_8h.html">Format_Post_base.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Comm_8h.html">Schema_Comm.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTrav_8h.html">DoubleTrav.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="IntVects_8h.html">IntVects.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="Discretisation__base_8h.html">Discretisation_base.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="IntList_8h.html">IntList.h</a>&gt;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="Champ__base_8cpp.html#a4260bd97204ede005305281faf5c6765">00039</a> <a class="code" href="Declare__Base_8h.html#a279604f97959498f17b67e986dfd4486">Implemente_base_sans_constructeur</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>,<span class="stringliteral">&quot;Champ_base&quot;</span>,<a class="code" href="classField__base.html">Field_base</a>);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">// Precondition:</span>
<a name="l00042"></a>00042 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00043"></a>00043 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00044"></a>00044 <span class="comment">// Valeurs par defaut:</span>
<a name="l00045"></a>00045 <span class="comment">// Contraintes:</span>
<a name="l00046"></a>00046 <span class="comment">// Acces: entree/sortie</span>
<a name="l00047"></a>00047 <span class="comment">// Exception:</span>
<a name="l00048"></a>00048 <span class="comment">// Effets de bord:</span>
<a name="l00049"></a>00049 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00050"></a>00050 <span class="comment">//</span>
<a name="l00051"></a>00051 <span class="comment">//</span><span class="comment"></span>
<a name="l00052"></a>00052 <span class="comment">//! Surcharge Objet_U::printOn(Sortie\&amp;)&lt;br&gt;Imprime le nom du champ sur un flot de sortie.</span>
<a name="l00053"></a>00053 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00054"></a>00054 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00055"></a>00055 <span class="comment">Contraintes: */</span>
<a name="l00056"></a><a class="code" href="classChamp__base.html#a6c0aa36a76a7e02cdda4b1ea80e829e1">00056</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classChamp__base.html#a6c0aa36a76a7e02cdda4b1ea80e829e1" title="Surcharge Objet_U::printOn(Sortie&amp;) Imprime le nom du champ sur un flot de sortie.">Champ_base::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00057"></a>00057 <span class="keyword"></span>{
<a name="l00058"></a>00058   <span class="keywordflow">return</span> os &lt;&lt; <a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00059"></a>00059 }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="comment">// Precondition:</span>
<a name="l00063"></a>00063 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00064"></a>00064 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00065"></a>00065 <span class="comment">// Valeurs par defaut:</span>
<a name="l00066"></a>00066 <span class="comment">// Contraintes:</span>
<a name="l00067"></a>00067 <span class="comment">// Acces: entree/sortie</span>
<a name="l00068"></a>00068 <span class="comment">// Exception:</span>
<a name="l00069"></a>00069 <span class="comment">// Effets de bord:</span>
<a name="l00070"></a>00070 <span class="comment">// Postcondition:</span>
<a name="l00071"></a>00071 <span class="comment">//</span>
<a name="l00072"></a>00072 <span class="comment">//</span>
<a name="l00073"></a>00073 <span class="comment">//</span><span class="comment"></span>
<a name="l00074"></a>00074 <span class="comment">//! Lecture du nom d&#39;un champ sur un flot d&#39;entree.&lt;br&gt;Format:&lt;br&gt;nom_du_champ</span>
<a name="l00075"></a>00075 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00076"></a>00076 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00077"></a>00077 <span class="comment">Contraintes: */</span>
<a name="l00078"></a><a class="code" href="classChamp__base.html#aee31c8232c1001c4af5a91d9a74b2b90">00078</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classChamp__base.html#aee31c8232c1001c4af5a91d9a74b2b90" title="Lecture du nom d&#39;un champ sur un flot d&#39;entree. Format: nom_du_champ.">Champ_base::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080   <span class="keywordflow">return</span> is &gt;&gt; <a class="code" href="classField__base.html#a2dc5ce975f94c9cbf066cb49093d856e">nom_</a>;
<a name="l00081"></a>00081 }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">// Precondition:</span>
<a name="l00084"></a>00084 <span class="comment">// Parametre:</span>
<a name="l00085"></a>00085 <span class="comment">// Signification:</span>
<a name="l00086"></a>00086 <span class="comment">// Valeurs par defaut:</span>
<a name="l00087"></a>00087 <span class="comment">// Contraintes:</span>
<a name="l00088"></a>00088 <span class="comment">// Acces:</span>
<a name="l00089"></a>00089 <span class="comment">// </span>
<a name="l00090"></a>00090 <span class="comment">// Signification:</span>
<a name="l00091"></a>00091 <span class="comment">// Contraintes:</span>
<a name="l00092"></a>00092 <span class="comment">// Exception:</span>
<a name="l00093"></a>00093 <span class="comment">// Effets de bord:</span>
<a name="l00094"></a>00094 <span class="comment">// Postcondition: un champ anonyme a ete cree</span>
<a name="l00095"></a>00095 <span class="comment">//</span>
<a name="l00096"></a>00096 <span class="comment">//</span>
<a name="l00097"></a>00097 <span class="comment">//</span>
<a name="l00098"></a>00098 <span class="comment">//</span><span class="comment"></span>
<a name="l00099"></a>00099 <span class="comment">//! Constructeur par defaut d&#39;un Champ_base.&lt;br&gt;Mets le champ au temps 0, specifie une unite vide,&lt;br&gt;donne le nom &quot;anonyme&quot; au champ et lui donne une nature&lt;br&gt;scalaire.</span>
<a name="l00100"></a><a class="code" href="classChamp__base.html#a3113ba131a833505cc801e7cfc355bde">00100</a> <span class="comment"></span><a class="code" href="classChamp__base.html#a3113ba131a833505cc801e7cfc355bde" title="Constructeur par defaut d&#39;un Champ_base. Mets le champ au temps 0, specifie une unite vide...">Champ_base::Champ_base</a>()
<a name="l00101"></a>00101 {
<a name="l00102"></a>00102   <a class="code" href="classChamp__base.html#ab4fdc6fb46c5e4efe2f931ceadd66979" title="Fixe le temps auquel se situe le champ.">changer_temps</a>(0.);
<a name="l00103"></a>00103   <a class="code" href="classField__base.html#a5bcb91a2475ee68412475efc3d9902f1" title="Specifie l&#39;unite d&#39;un champ scalaire ou dont toutes les composantes ont la meme unite.">fixer_unite</a>(<span class="stringliteral">&quot;.&quot;</span>);
<a name="l00104"></a>00104   <a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(<span class="stringliteral">&quot;anonyme&quot;</span>);
<a name="l00105"></a>00105   <a class="code" href="classField__base.html#a740d888da6eb9db6c7b62e65faf2436e" title="Fixer la nature d&#39;un champ: scalaire, multiscalaire, vectoriel. Le type (enumere) Nature_du_champ est...">fixer_nature_du_champ</a>(<a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646ba38e43fd39568540207f625e91bfcb6a3">scalaire</a>);
<a name="l00106"></a>00106   <a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a> = 1; <span class="comment">//!&lt; Par defaut, champ scalaire</span>
<a name="l00107"></a>00107 <span class="comment"></span>}
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="comment">//</span>
<a name="l00110"></a>00110 <span class="comment">//</span>
<a name="l00111"></a>00111 <span class="comment">//</span>
<a name="l00112"></a>00112 <span class="comment">//</span>
<a name="l00113"></a>00113 <span class="comment">//</span>
<a name="l00114"></a>00114 <span class="comment">//</span>
<a name="l00115"></a>00115 <span class="comment">//</span>
<a name="l00116"></a>00116 <span class="comment">//</span><span class="comment"></span>
<a name="l00117"></a>00117 <span class="comment">//! Calcule les &quot;valeurs&quot; du champ au point de coordonnees &quot;pos&quot;.&lt;br&gt;Dans cette classe de base, l&#39;implementation appelle&lt;br&gt;valeur_aux(const DoubleTab \&amp;, DoubleTab \&amp;)&lt;br&gt;Parametre: DoubleVect\&amp;&lt;br&gt;Signification: les coordonnees du point ou evaluer le champ&lt;br&gt;Parametre: DoubleVect\&amp; valeurs&lt;br&gt;Signification: En entree: doit avoir la bonne taille (nb_comp),&lt;br&gt;en sortie contient les composantes du champ.</span>
<a name="l00118"></a>00118 <span class="comment"></span><span class="comment">/** \return reference a &quot;valeurs&quot; */</span>
<a name="l00119"></a><a class="code" href="classChamp__base.html#a6091ded07e07843c52e8fbe7f1a38487">00119</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__base.html#a6091ded07e07843c52e8fbe7f1a38487" title="Calcule les &quot;valeurs&quot; du champ au point de coordonnees &quot;pos&quot;. Dans cette classe de base...">Champ_base::valeur_a</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; pos, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; les_valeurs)<span class="keyword"> const</span>
<a name="l00120"></a>00120 <span class="keyword"></span>{
<a name="l00121"></a>00121 <span class="comment">// assert(les_valeurs.size() == nb_comp());</span>
<a name="l00122"></a>00122   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> values(1,les_valeurs.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>());
<a name="l00123"></a>00123   <span class="keywordtype">int</span> taille=pos.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00124"></a>00124   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> pos2(1,taille);
<a name="l00125"></a>00125   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dir=0; dir&lt;taille; dir++) pos2(0,dir)=pos(dir);
<a name="l00126"></a>00126   <a class="code" href="classChamp__base.html#a662c5acd14339e93e26b638354decad7" title="Provoque une erreur ! Doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux</a>(pos2,values);
<a name="l00127"></a>00127   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;les_valeurs.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); comp++)
<a name="l00128"></a>00128     les_valeurs(comp)=values(0,comp);
<a name="l00129"></a>00129   <span class="keywordflow">return</span> les_valeurs;
<a name="l00130"></a>00130 }
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 <span class="comment">// Precondition:</span>
<a name="l00133"></a>00133 <span class="comment">// Parametre: DoubleVect&amp;</span>
<a name="l00134"></a>00134 <span class="comment">// Signification: les coordonnees du point de calcul</span>
<a name="l00135"></a>00135 <span class="comment">// Valeurs par defaut:</span>
<a name="l00136"></a>00136 <span class="comment">// Contraintes: reference constante</span>
<a name="l00137"></a>00137 <span class="comment">// Acces: entree</span>
<a name="l00138"></a>00138 <span class="comment">// Parametre: DoubleVect&amp; les_valeurs</span>
<a name="l00139"></a>00139 <span class="comment">// Signification: la valeur du champ au point specifie</span>
<a name="l00140"></a>00140 <span class="comment">// Valeurs par defaut:</span>
<a name="l00141"></a>00141 <span class="comment">// Contraintes:</span>
<a name="l00142"></a>00142 <span class="comment">// Acces: entree/sortie</span>
<a name="l00143"></a>00143 <span class="comment">// Parametre: int</span>
<a name="l00144"></a>00144 <span class="comment">// Signification: l&#39;element dans lequel est situe le point de calcul</span>
<a name="l00145"></a>00145 <span class="comment">// Valeurs par defaut:</span>
<a name="l00146"></a>00146 <span class="comment">// Contraintes:</span>
<a name="l00147"></a>00147 <span class="comment">// Acces:</span>
<a name="l00148"></a>00148 <span class="comment">// Exception:</span>
<a name="l00149"></a>00149 <span class="comment">// Effets de bord:</span>
<a name="l00150"></a>00150 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00151"></a>00151 <span class="comment">//</span>
<a name="l00152"></a>00152 <span class="comment">//</span>
<a name="l00153"></a>00153 <span class="comment">//</span>
<a name="l00154"></a>00154 <span class="comment">//</span>
<a name="l00155"></a>00155 <span class="comment">//</span>
<a name="l00156"></a>00156 <span class="comment">//</span><span class="comment"></span>
<a name="l00157"></a>00157 <span class="comment">//! provoque une erreur !&lt;br&gt;doit etre surchargee par les classes derivees&lt;br&gt;non virtuelle pure par commodite de developpement !&lt;br&gt;Renvoie la valeur du champ au point specifie&lt;br&gt;par ses coordonnees, en indiquant que ce point est&lt;br&gt;situe dans un element specifie.</span>
<a name="l00158"></a>00158 <span class="comment"></span><span class="comment">/** \return DoubleVect\&amp;&lt;br&gt;</span>
<a name="l00159"></a>00159 <span class="comment">Signification: la valeur du champ au point specifie&lt;br&gt;</span>
<a name="l00160"></a>00160 <span class="comment">Contraintes: */</span>
<a name="l00161"></a><a class="code" href="classChamp__base.html#a388d0c25c7abe861fc4adb22627a61b1">00161</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__base.html#a388d0c25c7abe861fc4adb22627a61b1" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">Champ_base::valeur_a_elem</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; ,
<a name="l00162"></a>00162                                       <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; les_valeurs,
<a name="l00163"></a>00163                                       <span class="keywordtype">int</span> )<span class="keyword"> const</span>
<a name="l00164"></a>00164 <span class="keyword"></span>{
<a name="l00165"></a>00165   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00166"></a>00166   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::valeur_a_elem(...) is not coded &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00167"></a>00167   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00168"></a>00168   <span class="keywordflow">return</span> les_valeurs;
<a name="l00169"></a>00169 }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="comment">//</span>
<a name="l00172"></a>00172 <span class="comment">//</span>
<a name="l00173"></a>00173 <span class="comment">//</span>
<a name="l00174"></a>00174 <span class="comment">//</span>
<a name="l00175"></a>00175 <span class="comment">//</span>
<a name="l00176"></a>00176 <span class="comment">//</span>
<a name="l00177"></a>00177 <span class="comment">//</span><span class="comment"></span>
<a name="l00178"></a>00178 <span class="comment">//! Calcule la valeur ponctuelle de la composante &quot;compo&quot; du champ&lt;br&gt;au point de coordonnees pos.&lt;br&gt;Dans la classe de base, l&#39;implementation appelle&lt;br&gt;valeur_a(const DoubleVect \&amp;, DoubleVect \&amp;)&lt;br&gt;Parametre: DoubleVect\&amp;&lt;br&gt;Signification: les coordonnees du point de calcul&lt;br&gt;Parametre: int&lt;br&gt;Signification: l&#39;index de la composante du champ a calculer</span>
<a name="l00179"></a>00179 <span class="comment"></span><span class="comment">/** \return double */</span>
<a name="l00180"></a><a class="code" href="classChamp__base.html#a1891b23c8235b76972dc97471be69f40">00180</a> <span class="keywordtype">double</span> <a class="code" href="classChamp__base.html#a1891b23c8235b76972dc97471be69f40" title="Calcule la valeur ponctuelle de la composante &quot;compo&quot; du champ au point de coordonnees pos...">Champ_base::valeur_a_compo</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; pos, <span class="keywordtype">int</span> compo)<span class="keyword"> const</span>
<a name="l00181"></a>00181 <span class="keyword"></span>{
<a name="l00182"></a>00182   <a class="code" href="classDoubleVect.html">DoubleVect</a> values(<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>());
<a name="l00183"></a>00183   <a class="code" href="classChamp__base.html#a6091ded07e07843c52e8fbe7f1a38487" title="Calcule les &quot;valeurs&quot; du champ au point de coordonnees &quot;pos&quot;. Dans cette classe de base...">valeur_a</a>(pos, values);
<a name="l00184"></a>00184   <span class="keyword">const</span> <span class="keywordtype">double</span> x = values[compo];
<a name="l00185"></a>00185   <span class="keywordflow">return</span> x;
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="comment">//</span>
<a name="l00189"></a>00189 <span class="comment">//</span>
<a name="l00190"></a>00190 <span class="comment">//</span><span class="comment"></span>
<a name="l00191"></a>00191 <span class="comment">//! provoque une erreur !&lt;br&gt;doit etre surchargee par les classes derivees&lt;br&gt;non virtuelle pure par commodite de developpement !</span>
<a name="l00192"></a><a class="code" href="classChamp__base.html#aa087d9cd1e21d47d5f54a5148547bafe">00192</a> <span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="classChamp__base.html#aa087d9cd1e21d47d5f54a5148547bafe" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">Champ_base::valeur_a_elem_compo</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp;, <span class="keywordtype">int</span> ,<span class="keywordtype">int</span> )<span class="keyword"> const</span>
<a name="l00193"></a>00193 <span class="keyword"></span>{
<a name="l00194"></a>00194   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00195"></a>00195   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::valeur_a_elem_compo(...) is not coded &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00196"></a>00196   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00197"></a>00197   <span class="keywordflow">return</span> 0;
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">// Precondition:</span>
<a name="l00201"></a>00201 <span class="comment">// Parametre: DoubleTab&amp;</span>
<a name="l00202"></a>00202 <span class="comment">// Signification: le tableau des coordonnees des points de calcul</span>
<a name="l00203"></a>00203 <span class="comment">// Valeurs par defaut:</span>
<a name="l00204"></a>00204 <span class="comment">// Contraintes: reference constante</span>
<a name="l00205"></a>00205 <span class="comment">// Acces: entree</span>
<a name="l00206"></a>00206 <span class="comment">// Parametre: DoubleTab&amp; les_valeurs</span>
<a name="l00207"></a>00207 <span class="comment">// Signification: le tableau des valeurs du champ aux points specifies</span>
<a name="l00208"></a>00208 <span class="comment">// Valeurs par defaut:</span>
<a name="l00209"></a>00209 <span class="comment">// Contraintes:</span>
<a name="l00210"></a>00210 <span class="comment">// Acces: entree/sortie</span>
<a name="l00211"></a>00211 <span class="comment">// Exception:</span>
<a name="l00212"></a>00212 <span class="comment">// Effets de bord:</span>
<a name="l00213"></a>00213 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00214"></a>00214 <span class="comment">//</span>
<a name="l00215"></a>00215 <span class="comment">//</span>
<a name="l00216"></a>00216 <span class="comment">//</span>
<a name="l00217"></a>00217 <span class="comment">//</span>
<a name="l00218"></a>00218 <span class="comment">//</span><span class="comment"></span>
<a name="l00219"></a>00219 <span class="comment">//! Provoque une erreur !&lt;br&gt;Doit etre surchargee par les classes derivees&lt;br&gt;non virtuelle pure par commodite de developpement !&lt;br&gt;Renvoie les valeurs du champ aux points specifies&lt;br&gt;par leurs coordonnees.</span>
<a name="l00220"></a>00220 <span class="comment"></span><span class="comment">/** \return DoubleTab\&amp;&lt;br&gt;</span>
<a name="l00221"></a>00221 <span class="comment">Signification: le tableau des valeurs du champ aux points specifies&lt;br&gt;</span>
<a name="l00222"></a>00222 <span class="comment">Contraintes: */</span>
<a name="l00223"></a><a class="code" href="classChamp__base.html#a662c5acd14339e93e26b638354decad7">00223</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__base.html#a662c5acd14339e93e26b638354decad7" title="Provoque une erreur ! Doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">Champ_base::valeur_aux</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; ,
<a name="l00224"></a>00224                                   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs)<span class="keyword"> const</span>
<a name="l00225"></a>00225 <span class="keyword"></span>{
<a name="l00226"></a>00226   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00227"></a>00227   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::valeur_aux(const DoubleTab&amp; ,DoubleTab&amp; ) is not coded &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00228"></a>00228   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00229"></a>00229   <span class="keywordflow">return</span> les_valeurs;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a><a class="code" href="classChamp__base.html#acf4ef866fbbecc9ef1bb024f41afcba5">00232</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__base.html#acf4ef866fbbecc9ef1bb024f41afcba5">Champ_base::valeur_aux_centres_de_gravite</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; positions,
<a name="l00233"></a>00233                                                      <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs)<span class="keyword"> const</span>
<a name="l00234"></a>00234 <span class="keyword"></span>{
<a name="l00235"></a>00235   <a class="code" href="classIntVect.html">IntVect</a> les_polys(positions.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0));
<a name="l00236"></a>00236   <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = positions.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00237"></a>00237   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a>; i++)
<a name="l00238"></a>00238     les_polys(i) = i;
<a name="l00239"></a>00239 
<a name="l00240"></a>00240   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a43eede56d800b44980b8534a1845c9a5" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux_elems</a>(positions, les_polys, les_valeurs);
<a name="l00241"></a>00241 }
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="comment">//</span>
<a name="l00244"></a>00244 <span class="comment">//</span>
<a name="l00245"></a>00245 <span class="comment">//</span>
<a name="l00246"></a>00246 <span class="comment">//</span>
<a name="l00247"></a>00247 <span class="comment">//</span>
<a name="l00248"></a>00248 <span class="comment">//</span>
<a name="l00249"></a>00249 <span class="comment">//</span>
<a name="l00250"></a>00250 <span class="comment">//</span>
<a name="l00251"></a>00251 <span class="comment">//</span>
<a name="l00252"></a>00252 <span class="comment">//</span>
<a name="l00253"></a>00253 <span class="comment">//</span>
<a name="l00254"></a>00254 <span class="comment">//</span>
<a name="l00255"></a>00255 <span class="comment">//</span><span class="comment"></span>
<a name="l00256"></a>00256 <span class="comment">//! Idem que valeur_aux(const DoubleTab \&amp;, DoubleTab \&amp;), mais calcule&lt;br&gt;uniquement la composante compo du champ.&lt;br&gt;Dans l&#39;implementation de champ_base, on appelle&lt;br&gt;valeur_aux(const DoubleTab \&amp;, DoubleTab \&amp;)&lt;br&gt;Parametre: pos&lt;br&gt;Signification: le tableau des coordonnees des points de calcul&lt;br&gt;(on ne traite pas l&#39;espace virtuel du tableau)&lt;br&gt;Parametre: les_valeurs&lt;br&gt;Signification: tableau destination des valeurs a calculer.&lt;br&gt;Le tableau valeurs doit avoir la bonne taille en entree,&lt;br&gt;soit les_valeurs.size() == pos.dimension(0)&lt;br&gt;Parametre: compo&lt;br&gt;Signification: l&#39;index de la composante du champ a calculer</span>
<a name="l00257"></a>00257 <span class="comment"></span><span class="comment">/** \return reference au tableau les_valeurs */</span>
<a name="l00258"></a><a class="code" href="classChamp__base.html#a19223e49e04226a25264ac573ab390e2">00258</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__base.html#a19223e49e04226a25264ac573ab390e2" title="Idem que valeur_aux(const DoubleTab &amp;, DoubleTab &amp;), mais calcule uniquement la composante compo du c...">Champ_base::valeur_aux_compo</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; pos ,
<a name="l00259"></a>00259                                          <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; les_valeurs,
<a name="l00260"></a>00260                                          <span class="keywordtype">int</span> compo)<span class="keyword"> const</span>
<a name="l00261"></a>00261 <span class="keyword"></span>{
<a name="l00262"></a>00262 <span class="comment">// Pas optimal mais fonctionne</span>
<a name="l00263"></a>00263   <span class="keywordtype">int</span> nb_val=pos.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00264"></a>00264 <span class="comment">// Le tableau les_valeurs doit avoir la bonne taille en entree:</span>
<a name="l00265"></a>00265   assert(les_valeurs.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>() == nb_val);
<a name="l00266"></a>00266   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> prov(nb_val,<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>());
<a name="l00267"></a>00267   <a class="code" href="classChamp__base.html#a662c5acd14339e93e26b638354decad7" title="Provoque une erreur ! Doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux</a>(pos,prov);
<a name="l00268"></a>00268   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_val; i++)
<a name="l00269"></a>00269     les_valeurs(i)=prov(i,compo);
<a name="l00270"></a>00270   <span class="keywordflow">return</span> les_valeurs;
<a name="l00271"></a>00271 }
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 <span class="comment">// Precondition:</span>
<a name="l00274"></a>00274 <span class="comment">// Parametre: DoubleTab&amp;</span>
<a name="l00275"></a>00275 <span class="comment">// Signification: le tableau des coordonnees des points de calcul</span>
<a name="l00276"></a>00276 <span class="comment">// Valeurs par defaut:</span>
<a name="l00277"></a>00277 <span class="comment">// Contraintes: reference constante</span>
<a name="l00278"></a>00278 <span class="comment">// Acces: entree</span>
<a name="l00279"></a>00279 <span class="comment">// Parametre: IntVect&amp;</span>
<a name="l00280"></a>00280 <span class="comment">// Signification: le tableau des elements dans lesquels sont</span>
<a name="l00281"></a>00281 <span class="comment">// situes les points de calcul</span>
<a name="l00282"></a>00282 <span class="comment">// Valeurs par defaut:</span>
<a name="l00283"></a>00283 <span class="comment">// Contraintes: reference constante</span>
<a name="l00284"></a>00284 <span class="comment">// Acces: entree</span>
<a name="l00285"></a>00285 <span class="comment">// Parametre: DoubleTab&amp; les_valeurs</span>
<a name="l00286"></a>00286 <span class="comment">// Signification: le tableau des valeurs du champ aux points specifies</span>
<a name="l00287"></a>00287 <span class="comment">// Valeurs par defaut:</span>
<a name="l00288"></a>00288 <span class="comment">// Contraintes:</span>
<a name="l00289"></a>00289 <span class="comment">// Acces: entree/sortie</span>
<a name="l00290"></a>00290 <span class="comment">// Exception:</span>
<a name="l00291"></a>00291 <span class="comment">// Effets de bord:</span>
<a name="l00292"></a>00292 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00293"></a>00293 <span class="comment">//</span>
<a name="l00294"></a>00294 <span class="comment">//</span>
<a name="l00295"></a>00295 <span class="comment">//</span>
<a name="l00296"></a>00296 <span class="comment">//</span>
<a name="l00297"></a>00297 <span class="comment">//</span>
<a name="l00298"></a>00298 <span class="comment">//</span><span class="comment"></span>
<a name="l00299"></a>00299 <span class="comment">//! provoque une erreur !&lt;br&gt;doit etre surchargee par les classes derivees&lt;br&gt;non virtuelle pure par commodite de developpement !&lt;br&gt;Renvoie les valeurs du champ aux points specifies&lt;br&gt;par leurs coordonnees, en indiquant que les points de&lt;br&gt;calculs sont situes dans les elements indiques.</span>
<a name="l00300"></a>00300 <span class="comment"></span><span class="comment">/** \return DoubleTab\&amp;&lt;br&gt;</span>
<a name="l00301"></a>00301 <span class="comment">Signification: le tableau des valeurs du champ aux points specifies&lt;br&gt;</span>
<a name="l00302"></a>00302 <span class="comment">Contraintes: */</span>
<a name="l00303"></a><a class="code" href="classChamp__base.html#a43eede56d800b44980b8534a1845c9a5">00303</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__base.html#a43eede56d800b44980b8534a1845c9a5" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">Champ_base::valeur_aux_elems</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;,
<a name="l00304"></a>00304                                         <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; ,
<a name="l00305"></a>00305                                         <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs)<span class="keyword"> const</span>
<a name="l00306"></a>00306 <span class="keyword"></span>{
<a name="l00307"></a>00307   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00308"></a>00308   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::valeur_aux_elems(...) is not coded &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00309"></a>00309   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00310"></a>00310   <span class="keywordflow">return</span> les_valeurs;
<a name="l00311"></a>00311 }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313 <span class="comment">// Precondition:</span>
<a name="l00314"></a>00314 <span class="comment">// Parametre: DoubleTab&amp;</span>
<a name="l00315"></a>00315 <span class="comment">// Signification: le tableau des coordonnees des points de calcul</span>
<a name="l00316"></a>00316 <span class="comment">// Valeurs par defaut:</span>
<a name="l00317"></a>00317 <span class="comment">// Contraintes: reference constante</span>
<a name="l00318"></a>00318 <span class="comment">// Acces: entree</span>
<a name="l00319"></a>00319 <span class="comment">// Parametre: IntVect&amp;</span>
<a name="l00320"></a>00320 <span class="comment">// Signification: le tableau des elements dans lesquels sont</span>
<a name="l00321"></a>00321 <span class="comment">// situes les points de calcul</span>
<a name="l00322"></a>00322 <span class="comment">// Valeurs par defaut:</span>
<a name="l00323"></a>00323 <span class="comment">// Contraintes: reference constante</span>
<a name="l00324"></a>00324 <span class="comment">// Acces: entree</span>
<a name="l00325"></a>00325 <span class="comment">// Parametre: DoubleVect&amp; les_valeurs</span>
<a name="l00326"></a>00326 <span class="comment">// Signification: le tableau des valeurs de la composante du champ</span>
<a name="l00327"></a>00327 <span class="comment">// aux points specifies</span>
<a name="l00328"></a>00328 <span class="comment">// Valeurs par defaut:</span>
<a name="l00329"></a>00329 <span class="comment">// Contraintes:</span>
<a name="l00330"></a>00330 <span class="comment">// Acces: entree/sortie</span>
<a name="l00331"></a>00331 <span class="comment">// Parametre: int</span>
<a name="l00332"></a>00332 <span class="comment">// Signification: l&#39;index de la composante du champ a calculer</span>
<a name="l00333"></a>00333 <span class="comment">// Valeurs par defaut:</span>
<a name="l00334"></a>00334 <span class="comment">// Contraintes:</span>
<a name="l00335"></a>00335 <span class="comment">// Acces:</span>
<a name="l00336"></a>00336 <span class="comment">// Exception:</span>
<a name="l00337"></a>00337 <span class="comment">// Effets de bord:</span>
<a name="l00338"></a>00338 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00339"></a>00339 <span class="comment">//</span>
<a name="l00340"></a>00340 <span class="comment">//</span>
<a name="l00341"></a>00341 <span class="comment">//</span>
<a name="l00342"></a>00342 <span class="comment">//</span>
<a name="l00343"></a>00343 <span class="comment">//</span>
<a name="l00344"></a>00344 <span class="comment">//</span><span class="comment"></span>
<a name="l00345"></a>00345 <span class="comment">//! provoque une erreur !&lt;br&gt;doit etre surchargee par les classes derivees&lt;br&gt;non virtuelle pure par commodite de developpement !&lt;br&gt;Renvoie les valeurs d&#39;une composante du champ aux points specifies&lt;br&gt;par leurs coordonnees, en indiquant que les points de&lt;br&gt;calculs sont situes dans les elements indiques.</span>
<a name="l00346"></a>00346 <span class="comment"></span><span class="comment">/** \return DoubleVect\&amp;&lt;br&gt;</span>
<a name="l00347"></a>00347 <span class="comment">Signification: le tableau des valeurs de la composante du champ&lt;br&gt;</span>
<a name="l00348"></a>00348 <span class="comment">aux points specifies&lt;br&gt;</span>
<a name="l00349"></a>00349 <span class="comment">Contraintes: */</span>
<a name="l00350"></a><a class="code" href="classChamp__base.html#a0946c1f9b3c515e2ac2dcbf6d8b16daa">00350</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__base.html#a0946c1f9b3c515e2ac2dcbf6d8b16daa" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">Champ_base::valeur_aux_elems_compo</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;,
<a name="l00351"></a>00351                                                <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp;,
<a name="l00352"></a>00352                                                <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; les_valeurs,
<a name="l00353"></a>00353                                                <span class="keywordtype">int</span> )<span class="keyword"> const</span>
<a name="l00354"></a>00354 <span class="keyword"></span>{
<a name="l00355"></a>00355   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00356"></a>00356   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::valeur_aux_elems_compo(...) is not coded &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00357"></a>00357   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00358"></a>00358   <span class="keywordflow">return</span> les_valeurs;
<a name="l00359"></a>00359 }
<a name="l00360"></a>00360 
<a name="l00361"></a><a class="code" href="classChamp__base.html#a14b1af94ad32af4b9f63df3562fb8853">00361</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__base.html#a14b1af94ad32af4b9f63df3562fb8853">Champ_base::valeur_aux_elems_smooth</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;,
<a name="l00362"></a>00362                                                <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; ,
<a name="l00363"></a>00363                                                <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs)
<a name="l00364"></a>00364 {
<a name="l00365"></a>00365   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00366"></a>00366   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::valeur_aux_elems_smooth(...) is not coded &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00367"></a>00367   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The chsom option of probes does apply for the moment only for the field of type P1NC in VEF &quot;</span> &lt;&lt; finl ;
<a name="l00368"></a>00368   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00369"></a>00369   <span class="keywordflow">return</span> les_valeurs;
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a><a class="code" href="classChamp__base.html#a014a5f23787b71f4479ba6a159c6d1ed">00372</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__base.html#a014a5f23787b71f4479ba6a159c6d1ed">Champ_base::valeur_aux_elems_compo_smooth</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;,
<a name="l00373"></a>00373                                                       <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp;,
<a name="l00374"></a>00374                                                       <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; les_valeurs,
<a name="l00375"></a>00375                                                       <span class="keywordtype">int</span> )
<a name="l00376"></a>00376 {
<a name="l00377"></a>00377   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00378"></a>00378   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::valeur_aux_elems_compo_smooth(...) is not coded &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00379"></a>00379   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The chsom option of probes does apply for the moment only for the field of type P1NC in VEF &quot;</span> &lt;&lt; finl ;
<a name="l00380"></a>00380   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00381"></a>00381   <span class="keywordflow">return</span> les_valeurs;
<a name="l00382"></a>00382 }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 <span class="comment">// Precondition:</span>
<a name="l00385"></a>00385 <span class="comment">// Parametre: double</span>
<a name="l00386"></a>00386 <span class="comment">// Signification: temps de mise a jour</span>
<a name="l00387"></a>00387 <span class="comment">// Valeurs par defaut:</span>
<a name="l00388"></a>00388 <span class="comment">// Contraintes:</span>
<a name="l00389"></a>00389 <span class="comment">// Acces:</span>
<a name="l00390"></a>00390 <span class="comment">// </span>
<a name="l00391"></a>00391 <span class="comment">// Signification:</span>
<a name="l00392"></a>00392 <span class="comment">// Contraintes:</span>
<a name="l00393"></a>00393 <span class="comment">// Exception:</span>
<a name="l00394"></a>00394 <span class="comment">// Effets de bord:</span>
<a name="l00395"></a>00395 <span class="comment">// Postcondition:</span>
<a name="l00396"></a>00396 <span class="comment">// renvoi les valeurs au sommet sommet</span>
<a name="l00397"></a>00397 <span class="comment">//</span>
<a name="l00398"></a>00398 <span class="comment">//</span><span class="comment"></span>
<a name="l00399"></a>00399 <span class="comment">//! Mise a jour en temps.&lt;br&gt;NE FAIT RIEN (dans la classe de base)</span>
<a name="l00400"></a><a class="code" href="classChamp__base.html#a8147696d6cb7faa78d47a970d7474f86">00400</a> <span class="comment"></span><a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__base.html#a8147696d6cb7faa78d47a970d7474f86" title="Mise a jour en temps. NE FAIT RIEN (dans la classe de base)">Champ_base::valeur_a_sommet</a>(<span class="keywordtype">int</span> sommet, <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; val)<span class="keyword"> const</span>
<a name="l00401"></a>00401 <span class="keyword"></span>{
<a name="l00402"></a>00402   <a class="code" href="classDoubleVect.html">DoubleVect</a> position(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00403"></a>00403   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00404"></a>00404     {
<a name="l00405"></a>00405       position(i)=dom.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(sommet,i);
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a6091ded07e07843c52e8fbe7f1a38487" title="Calcule les &quot;valeurs&quot; du champ au point de coordonnees &quot;pos&quot;. Dans cette classe de base...">valeur_a</a>(position, val);
<a name="l00408"></a>00408 }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="comment">//</span><span class="comment"></span>
<a name="l00411"></a>00411 <span class="comment">//! renvoi la compo eme corrdonne des valeurs a l&#39;element le_poly au sommet sommet</span>
<a name="l00412"></a><a class="code" href="classChamp__base.html#ad78f84c898b6fca623a30a9ae665c269">00412</a> <span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="classChamp__base.html#ad78f84c898b6fca623a30a9ae665c269" title="renvoi la compo eme corrdonne des valeurs a l&#39;element le_poly au sommet sommet">Champ_base::valeur_a_sommet_compo</a>(<span class="keywordtype">int</span> sommet, <span class="keywordtype">int</span> le_poly, <span class="keywordtype">int</span> compo)<span class="keyword"> const</span>
<a name="l00413"></a>00413 <span class="keyword"></span>{
<a name="l00414"></a>00414   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00415"></a>00415   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::valeur_a_sommet_compo(...) is not coded &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00416"></a>00416   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00417"></a>00417   <span class="keywordflow">return</span> -1;
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <span class="comment">//</span><span class="comment"></span>
<a name="l00421"></a>00421 <span class="comment">//! renvoie les valeurs aux sommets du Domaine dom</span>
<a name="l00422"></a><a class="code" href="classChamp__base.html#a5987426ce22e4dca7f506b8872ae6eac">00422</a> <span class="comment"></span><a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__base.html#a5987426ce22e4dca7f506b8872ae6eac" title="renvoie les valeurs aux sommets du Domaine dom">Champ_base::valeur_aux_sommets</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val)<span class="keyword"> const</span>
<a name="l00423"></a>00423 <span class="keyword"></span>{
<a name="l00424"></a>00424   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; positions=dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00425"></a>00425   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00426"></a>00426   <a class="code" href="classIntVect.html">IntVect</a> les_polys(positions.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0));
<a name="l00427"></a>00427   zone.<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(positions, les_polys);
<a name="l00428"></a>00428   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a43eede56d800b44980b8534a1845c9a5" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux_elems</a>(positions, les_polys, val);
<a name="l00429"></a>00429 }
<a name="l00430"></a>00430 
<a name="l00431"></a>00431 <span class="comment">//</span><span class="comment"></span>
<a name="l00432"></a>00432 <span class="comment">//! renvoie la compo eme valeur aux sommets de dom.</span>
<a name="l00433"></a><a class="code" href="classChamp__base.html#ac384e7ccce938dc09b166dcc68fe5c14">00433</a> <span class="comment"></span><a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__base.html#ac384e7ccce938dc09b166dcc68fe5c14" title="renvoie la compo eme valeur aux sommets de dom.">Champ_base::valeur_aux_sommets_compo</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom,
<a name="l00434"></a>00434                                                  <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; val, <span class="keywordtype">int</span> compo)<span class="keyword"> const</span>
<a name="l00435"></a>00435 <span class="keyword"></span>{
<a name="l00436"></a>00436   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; positions=dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00437"></a>00437   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00438"></a>00438   <a class="code" href="classIntVect.html">IntVect</a> les_polys(positions.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0));
<a name="l00439"></a>00439   zone.<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(positions, les_polys);
<a name="l00440"></a>00440   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a0946c1f9b3c515e2ac2dcbf6d8b16daa" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux_elems_compo</a>(positions, les_polys, val, compo);
<a name="l00441"></a>00441 }
<a name="l00442"></a>00442 
<a name="l00443"></a>00443 <span class="comment">//</span><span class="comment"></span>
<a name="l00444"></a>00444 <span class="comment">//! renvoie la valeur du champ aux faces</span>
<a name="l00445"></a><a class="code" href="classChamp__base.html#a788f01ac3a2a3b301a7bcc9962de0e6f">00445</a> <span class="comment"></span><a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__base.html#a788f01ac3a2a3b301a7bcc9962de0e6f" title="renvoie la valeur du champ aux faces">Champ_base::valeur_aux_faces</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; result)<span class="keyword"> const</span>
<a name="l00446"></a>00446 <span class="keyword"></span>{
<a name="l00447"></a>00447   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a662c5acd14339e93e26b638354decad7" title="Provoque une erreur ! Doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux</a>(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, <a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>()).xv(), result);
<a name="l00448"></a>00448 }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 <span class="comment">//</span><span class="comment"></span>
<a name="l00451"></a>00451 <span class="comment">//! renvoie la valeur du champ aux faces de bord</span>
<a name="l00452"></a><a class="code" href="classChamp__base.html#a63e4137abc2801a8861b272bcdf961fe">00452</a> <span class="comment"></span><a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> <a class="code" href="classChamp__base.html#a63e4137abc2801a8861b272bcdf961fe" title="renvoie la valeur du champ aux faces de bord">Champ_base::valeur_aux_bords</a>()<span class="keyword"> const</span>
<a name="l00453"></a>00453 <span class="keyword"></span>{
<a name="l00454"></a>00454   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv_bord = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, <a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>()).xv_bord();
<a name="l00455"></a>00455   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> result(xv_bord.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0), <a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>().<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>());
<a name="l00456"></a>00456   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a662c5acd14339e93e26b638354decad7" title="Provoque une erreur ! Doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux</a>(xv_bord, result);
<a name="l00457"></a>00457 }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459 <span class="comment">//</span><span class="comment"></span>
<a name="l00460"></a>00460 <span class="comment">//! mettre_a_jour de la classe de base Champ_base :ne fait rien !</span>
<a name="l00461"></a><a class="code" href="classChamp__base.html#aee24f2cb9e988824988b9f4d793b14a0">00461</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classChamp__base.html#aee24f2cb9e988824988b9f4d793b14a0" title="Par defaut, on ne sait pas si une zone_dis_base sera definie.">Champ_base::mettre_a_jour</a>(<span class="keywordtype">double</span>)
<a name="l00462"></a>00462 {
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 }
<a name="l00465"></a><a class="code" href="classChamp__base.html#ad4295316ed063e2da638f42bb66d51e6">00465</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__base.html#ad4295316ed063e2da638f42bb66d51e6">Champ_base::abortTimeStep</a>()
<a name="l00466"></a>00466 {
<a name="l00467"></a>00467 }
<a name="l00468"></a>00468 <span class="comment">// Precondition:</span>
<a name="l00469"></a>00469 <span class="comment">// Parametre: Champ_base&amp; ch</span>
<a name="l00470"></a>00470 <span class="comment">// Signification: partie droite de l&#39;affectation</span>
<a name="l00471"></a>00471 <span class="comment">// Valeurs par defaut:</span>
<a name="l00472"></a>00472 <span class="comment">// Contraintes: reference constante</span>
<a name="l00473"></a>00473 <span class="comment">// Acces: entree</span>
<a name="l00474"></a>00474 <span class="comment">// Exception:</span>
<a name="l00475"></a>00475 <span class="comment">// Effets de bord:</span>
<a name="l00476"></a>00476 <span class="comment">// Postcondition:</span>
<a name="l00477"></a>00477 <span class="comment">//</span>
<a name="l00478"></a>00478 <span class="comment">//</span><span class="comment"></span>
<a name="l00479"></a>00479 <span class="comment">//! Affecter un champ dans un autre.&lt;br&gt;Rebvoie le resultat de l&#39;affectation.</span>
<a name="l00480"></a>00480 <span class="comment"></span><span class="comment">/** \return Champ_base\&amp;&lt;br&gt;</span>
<a name="l00481"></a>00481 <span class="comment">Signification: le resultat de l&#39;affectation (*this)&lt;br&gt;</span>
<a name="l00482"></a>00482 <span class="comment">Contraintes: */</span>
<a name="l00483"></a><a class="code" href="classChamp__base.html#a336a105699c70cd8c4d9b066a39264a8">00483</a> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classChamp__base.html#a336a105699c70cd8c4d9b066a39264a8" title="Affecter un champ dans un autre. Rebvoie le resultat de l&#39;affectation.">Champ_base::affecter</a>(<span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; ch)
<a name="l00484"></a>00484 {
<a name="l00485"></a>00485   <a class="code" href="classChamp__base.html#a7eb438102492017bc50afa9ddbdbed06">affecter_</a>(ch);
<a name="l00486"></a>00486   <a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>().<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00487"></a>00487   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00488"></a>00488 }
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 <span class="comment">// Factorise le message d erreur pour les champs</span>
<a name="l00491"></a>00491 <span class="comment">// dont la methode affecter n a pas de sens.</span>
<a name="l00492"></a><a class="code" href="classChamp__base.html#a58ad1f287e3880dde233bd94f23721bf">00492</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__base.html#a58ad1f287e3880dde233bd94f23721bf">Champ_base::affecter_erreur</a>()
<a name="l00493"></a>00493 {
<a name="l00494"></a>00494   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> <a class="code" href="Reordonner__faces__periodiques_8cpp.html#a137d78a01e63d3b66d1b2ed0de0f4c4c">message</a>;
<a name="l00495"></a>00495   message =<span class="stringliteral">&quot;The method &quot;</span>;
<a name="l00496"></a>00496   message += <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00497"></a>00497   message += <span class="stringliteral">&quot;::affecter has no sense.\n&quot;</span>;
<a name="l00498"></a>00498   message += <span class="stringliteral">&quot;TRUST has caused an error and will stop.\nUnexpected error during TRUST calculation.&quot;</span>;
<a name="l00499"></a>00499   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(message);
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 <span class="comment">//</span>
<a name="l00503"></a>00503 <span class="comment">//</span><span class="comment"></span>
<a name="l00504"></a>00504 <span class="comment">//! cette methode va fixer les unites et le nom des compos&lt;br&gt;elle n&#39;est pas const en realite !!!</span>
<a name="l00505"></a><a class="code" href="classChamp__base.html#ad4ce4adc1125f3ff1fe87f405129984a">00505</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classChamp__base.html#ad4ce4adc1125f3ff1fe87f405129984a" title="cette methode va fixer les unites et le nom des compos elle n&#39;est pas const en realite !!!...">Champ_base::corriger_unite_nom_compo</a>()
<a name="l00506"></a>00506 {
<a name="l00507"></a>00507   <span class="keywordflow">if</span>(<a class="code" href="classField__base.html#ae881b903733ce25ed11bb36b303ecf0d">unite_</a>.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>() != <a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>)
<a name="l00508"></a>00508     {
<a name="l00509"></a>00509       <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; unit=<a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>,<a class="code" href="classField__base.html#ae881b903733ce25ed11bb36b303ecf0d">unite_</a>);
<a name="l00510"></a>00510       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom=<a class="code" href="classField__base.html#ae881b903733ce25ed11bb36b303ecf0d">unite_</a>[0];
<a name="l00511"></a>00511       unit.<a class="code" href="classvect__impl.html#a9c5bb110081cf3698efa2b32a91209e4">dimensionner_force</a>(<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>);
<a name="l00512"></a>00512       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; compo++)
<a name="l00513"></a>00513         unit[compo] = nom;
<a name="l00514"></a>00514     }
<a name="l00515"></a>00515   <span class="keywordtype">int</span> compo_nommees=(<a class="code" href="classField__base.html#ad97d89ebf85bd9feba9c078bceb87e6a" title="Renvoie le nom d&#39;un champ scalaire.">nom_compo</a>(0) != <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>());
<a name="l00516"></a>00516   <span class="keywordflow">if</span>((!compo_nommees)&amp;&amp;(<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a> != 1))
<a name="l00517"></a>00517     {
<a name="l00518"></a>00518       <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> ext(<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>);
<a name="l00519"></a>00519       <span class="keywordflow">if</span> (<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>&lt;=3)
<a name="l00520"></a>00520         {
<a name="l00521"></a>00521           <span class="keywordflow">if</span>(!<a class="code" href="classObjet__U.html#ad9b82ace9d4c7902ec704b6a78f76991">axi</a>)
<a name="l00522"></a>00522             {
<a name="l00523"></a>00523               ext[0]=<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>()+<span class="stringliteral">&quot;X&quot;</span>;
<a name="l00524"></a>00524               <span class="keywordflow">if</span> (<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>&gt; 1) ext[1]=<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>()+<span class="stringliteral">&quot;Y&quot;</span>;
<a name="l00525"></a>00525               <span class="keywordflow">if</span> (<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>&gt; 2) ext[2]=<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>()+<span class="stringliteral">&quot;Z&quot;</span>;
<a name="l00526"></a>00526             }
<a name="l00527"></a>00527           <span class="keywordflow">else</span>
<a name="l00528"></a>00528             {
<a name="l00529"></a>00529               ext[0]=<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>()+<span class="stringliteral">&quot;R&quot;</span>;
<a name="l00530"></a>00530               <span class="keywordflow">if</span> (<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>&gt; 1) ext[1]=<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>()+<span class="stringliteral">&quot;teta&quot;</span>;
<a name="l00531"></a>00531               <span class="keywordflow">if</span> (<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>&gt; 2) ext[2]=<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>()+<span class="stringliteral">&quot;Z&quot;</span>;
<a name="l00532"></a>00532             }
<a name="l00533"></a>00533         }
<a name="l00534"></a>00534       <span class="keywordflow">else</span> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; c++)
<a name="l00535"></a>00535           ext[c]=<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>()+<span class="stringliteral">&quot;_&quot;</span>+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(c);
<a name="l00536"></a>00536       <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; ch=<a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>,*<span class="keyword">this</span>);
<a name="l00537"></a>00537       ch.<a class="code" href="classField__base.html#a91540f9a5b77e485bc809287e351ca55" title="Fixe le nom des composantes du champ.">fixer_noms_compo</a>(ext);
<a name="l00538"></a>00538     }
<a name="l00539"></a>00539 }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 
<a name="l00542"></a><a class="code" href="classChamp__base.html#a3f3fda30bcccaf34dd37af8ab73cda29">00542</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__base.html#a3f3fda30bcccaf34dd37af8ab73cda29">Champ_base::calculer_valeurs_elem_post</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs,<span class="keywordtype">int</span> nb_elem,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_post,<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom)<span class="keyword"> const</span>
<a name="l00543"></a>00543 <span class="keyword"></span>{
<a name="l00544"></a>00544   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00545"></a>00545 <span class="comment">// nom_post=le_nom();</span>
<a name="l00546"></a>00546   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom=dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00547"></a>00547   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom_inc= dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00548"></a>00548   <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>) )
<a name="l00549"></a>00549     {
<a name="l00550"></a>00550       nom_dom_inc=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>).domaine().le_nom();
<a name="l00551"></a>00551     }
<a name="l00552"></a>00552   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>, *<span class="keyword">this</span>) )
<a name="l00553"></a>00553     {
<a name="l00554"></a>00554       nom_dom_inc=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>, *<span class="keyword">this</span>).domaine().le_nom();
<a name="l00555"></a>00555     }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557   <span class="keywordtype">int</span> nb_elem_PE = <a class="code" href="communications_8cpp.html#a13b5bdc7cfe14771b52a033b1ecbc071" title="Calul de la somme partielle de i sur les processeurs 0 a me()-1 (renvoie 0 sur le processeur 0)...">mppartial_sum</a>(nb_elem);
<a name="l00558"></a>00558 
<a name="l00559"></a>00559   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> centres_de_gravites(nb_elem, <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00560"></a>00560 
<a name="l00561"></a>00561   les_valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_elem, <a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563   <span class="keywordflow">if</span>(nom_dom==nom_dom_inc)
<a name="l00564"></a>00564     {
<a name="l00565"></a>00565 
<a name="l00566"></a>00566       <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>) )
<a name="l00567"></a>00567         {
<a name="l00568"></a>00568           <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>).<a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>());
<a name="l00569"></a>00569 <span class="comment">// Pour eviter un resize par nb_elem_tot par appel a xp()</span>
<a name="l00570"></a>00570           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_elem; i++)
<a name="l00571"></a>00571             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> ; k++)
<a name="l00572"></a>00572               centres_de_gravites(i,k) = zvf.<a class="code" href="classZone__VF.html#a87a29f0223c71256a25ee343c9277599">xp</a>(i,k);
<a name="l00573"></a>00573         }
<a name="l00574"></a>00574       <span class="keywordflow">else</span>
<a name="l00575"></a>00575         zone.<a class="code" href="classZone.html#ad8104f9be27f9c357e345b281a79064e" title="Calcule les centres de gravites des elements de la zone.">calculer_centres_gravite</a>(centres_de_gravites);
<a name="l00576"></a>00576 
<a name="l00577"></a>00577       <a class="code" href="classChamp__base.html#acf4ef866fbbecc9ef1bb024f41afcba5">valeur_aux_centres_de_gravite</a>(centres_de_gravites,les_valeurs);
<a name="l00578"></a>00578     }
<a name="l00579"></a>00579   <span class="keywordflow">else</span>
<a name="l00580"></a>00580     {
<a name="l00581"></a>00581       zone.<a class="code" href="classZone.html#ad8104f9be27f9c357e345b281a79064e" title="Calcule les centres de gravites des elements de la zone.">calculer_centres_gravite</a>(centres_de_gravites);
<a name="l00582"></a>00582       <a class="code" href="classChamp__base.html#a662c5acd14339e93e26b638354decad7" title="Provoque une erreur ! Doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux</a>(centres_de_gravites, les_valeurs);
<a name="l00583"></a>00583     }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585 
<a name="l00586"></a>00586   <span class="keywordflow">if</span>((<a class="code" href="classObjet__U.html#ad9b82ace9d4c7902ec704b6a78f76991">axi</a>) &amp;&amp; (<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>==<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>))
<a name="l00587"></a>00587     {
<a name="l00588"></a>00588       <span class="keywordtype">double</span> teta, vR, vT;
<a name="l00589"></a>00589       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_elem=0; num_elem&lt;nb_elem; num_elem++)
<a name="l00590"></a>00590         {
<a name="l00591"></a>00591           teta = centres_de_gravites(num_elem,1);
<a name="l00592"></a>00592           vR=les_valeurs(num_elem, 0);
<a name="l00593"></a>00593           vT=les_valeurs(num_elem, 1);
<a name="l00594"></a>00594           les_valeurs(num_elem, 0) =vR*cos(teta)-vT*sin(teta);
<a name="l00595"></a>00595           les_valeurs(num_elem, 1) =vR*sin(teta)+vT*cos(teta);
<a name="l00596"></a>00596         }
<a name="l00597"></a>00597     }
<a name="l00598"></a>00598 
<a name="l00599"></a>00599   nom_post+= <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;_elem_&quot;</span>);
<a name="l00600"></a>00600   nom_post+= nom_dom;
<a name="l00601"></a>00601   <span class="keywordflow">return</span> nb_elem_PE;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603 }
<a name="l00604"></a><a class="code" href="classChamp__base.html#adde92dea68bfb503462f616ba525490c">00604</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__base.html#adde92dea68bfb503462f616ba525490c">Champ_base::calculer_valeurs_elem_compo_post</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs,<span class="keywordtype">int</span> ncomp,<span class="keywordtype">int</span> nb_elem,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_post,<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom)<span class="keyword"> const</span>
<a name="l00605"></a>00605 <span class="keyword"></span>{
<a name="l00606"></a>00606   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00607"></a>00607 <span class="comment">// nom_post=nom_compo(ncomp);</span>
<a name="l00608"></a>00608   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom=dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00609"></a>00609   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom_inc= dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00610"></a>00610   <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>) )
<a name="l00611"></a>00611     {
<a name="l00612"></a>00612       nom_dom_inc=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>).domaine().le_nom();
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>, *<span class="keyword">this</span>) )
<a name="l00615"></a>00615     {
<a name="l00616"></a>00616       nom_dom_inc=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>, *<span class="keyword">this</span>).domaine().le_nom();
<a name="l00617"></a>00617     }
<a name="l00618"></a>00618 
<a name="l00619"></a>00619   <span class="keywordtype">int</span> nb_elem_PE = <a class="code" href="communications_8cpp.html#a13b5bdc7cfe14771b52a033b1ecbc071" title="Calul de la somme partielle de i sur les processeurs 0 a me()-1 (renvoie 0 sur le processeur 0)...">mppartial_sum</a>(nb_elem);
<a name="l00620"></a>00620 
<a name="l00621"></a>00621   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> centres_de_gravites(nb_elem, <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00622"></a>00622   les_valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_elem);
<a name="l00623"></a>00623   <span class="keywordflow">if</span>(nom_dom==nom_dom_inc)
<a name="l00624"></a>00624     {
<a name="l00625"></a>00625       <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>) )
<a name="l00626"></a>00626         {
<a name="l00627"></a>00627           <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>).equation().zone_dis().<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>());
<a name="l00628"></a>00628 <span class="comment">// Pour eviter un resize par nb_elem_tot par appel a xp()</span>
<a name="l00629"></a>00629           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_elem; i++)
<a name="l00630"></a>00630             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; k++)
<a name="l00631"></a>00631               centres_de_gravites(i,k) = zvf.<a class="code" href="classZone__VF.html#a87a29f0223c71256a25ee343c9277599">xp</a>(i,k);
<a name="l00632"></a>00632         }
<a name="l00633"></a>00633       <span class="keywordflow">else</span>
<a name="l00634"></a>00634         zone.<a class="code" href="classZone.html#ad8104f9be27f9c357e345b281a79064e" title="Calcule les centres de gravites des elements de la zone.">calculer_centres_gravite</a>(centres_de_gravites);
<a name="l00635"></a>00635 
<a name="l00636"></a>00636       <a class="code" href="classIntVect.html">IntVect</a> les_polys(nb_elem);
<a name="l00637"></a>00637       {
<a name="l00638"></a>00638         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> elem=0; elem&lt;nb_elem; elem++)
<a name="l00639"></a>00639           {
<a name="l00640"></a>00640             les_polys(elem)=elem;
<a name="l00641"></a>00641           }
<a name="l00642"></a>00642       }
<a name="l00643"></a>00643       <a class="code" href="classChamp__base.html#a0946c1f9b3c515e2ac2dcbf6d8b16daa" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux_elems_compo</a>(centres_de_gravites, les_polys, les_valeurs, ncomp);
<a name="l00644"></a>00644     }
<a name="l00645"></a>00645   <span class="keywordflow">else</span>
<a name="l00646"></a>00646     {
<a name="l00647"></a>00647       zone.<a class="code" href="classZone.html#ad8104f9be27f9c357e345b281a79064e" title="Calcule les centres de gravites des elements de la zone.">calculer_centres_gravite</a>(centres_de_gravites);
<a name="l00648"></a>00648       <a class="code" href="classChamp__base.html#a19223e49e04226a25264ac573ab390e2" title="Idem que valeur_aux(const DoubleTab &amp;, DoubleTab &amp;), mais calcule uniquement la composante compo du c...">valeur_aux_compo</a>(centres_de_gravites, les_valeurs, ncomp);
<a name="l00649"></a>00649     }
<a name="l00650"></a>00650   nom_post+= <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;_elem_&quot;</span>);
<a name="l00651"></a>00651   nom_post+= nom_dom;
<a name="l00652"></a>00652 <span class="comment">// </span>
<a name="l00653"></a>00653   <span class="keywordflow">return</span> nb_elem_PE;
<a name="l00654"></a>00654 }
<a name="l00655"></a>00655 
<a name="l00656"></a>00656 <span class="comment">// Ajoute la contribution des autres processeurs a valeurs et compteur</span>
<a name="l00657"></a><a class="code" href="Champ__base_8cpp.html#a3f0f70f201555bc3beeccb190273ed5b">00657</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="Champ__base_8cpp.html#a3f0f70f201555bc3beeccb190273ed5b">add_sommets_communs</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs, <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>)
<a name="l00658"></a>00658 {
<a name="l00659"></a>00659 
<a name="l00660"></a>00660 <span class="comment">// if (Process::nproc()&gt;9) return;</span>
<a name="l00661"></a>00661   <span class="keywordtype">char</span>* theValue = getenv(<span class="stringliteral">&quot;TRUST_POST_SOM_NON_PARA&quot;</span>);
<a name="l00662"></a>00662   <span class="keywordflow">if</span> (theValue != NULL)
<a name="l00663"></a>00663     <span class="keywordflow">return</span>;
<a name="l00664"></a>00664   <span class="keywordtype">int</span> nb_compo_ = les_valeurs.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00665"></a>00665 
<a name="l00666"></a>00666 <span class="comment">// On balaie les joints</span>
<a name="l00667"></a>00667   <span class="keyword">const</span> <a class="code" href="classJoints.html" title="Classe Joints Cette classe represente une liste d&#39;objet de type Joint.">Joints</a>&amp; joints = dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a16f273a76321d31435995cdad664285a" title="Renvoie la liste des joints de la zone. (version const)">faces_joint</a>();
<a name="l00668"></a>00668   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_joints = joints.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00669"></a>00669   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i_joint = 0; i_joint &lt; nb_joints; i_joint++)
<a name="l00670"></a>00670     {
<a name="l00671"></a>00671       <span class="keyword">const</span> <a class="code" href="classJoint.html" title="La classe Joint est une Frontiere qui contient les faces et les sommets de joint avec la zone PEvoisi...">Joint</a>&amp; joint = joints[i_joint];
<a name="l00672"></a>00672       <span class="keyword">const</span> <span class="keywordtype">int</span> PEvoisin = joint.<a class="code" href="classJoint.html#a0952bc5c7805434ccd8cd5c9b01e3747" title="Renvoie PEvoisin (numero de la zone voisine)">PEvoisin</a>();
<a name="l00673"></a>00673       <span class="keyword">const</span> <a class="code" href="classJoint__Items.html" title="Joint_Items contient les informations de distribution parallele d&#39;un item geometrique particulier ave...">Joint_Items</a>&amp; joint_item = joint.<a class="code" href="classJoint.html#a3f49fb1150967b436a115a7373ab27a0" title="Renvoie les informations de joint pour le type demande.">joint_item</a>(<a class="code" href="classJoint.html#a1e2d15d088c27c9b7b11c02bf4d2c926a050aa4faf237e25faef6fff15ffc20f8">Joint::SOMMET</a>);
<a name="l00674"></a>00674       <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; sommets_communs = joint_item.<a class="code" href="classJoint__Items.html#a435fb1629f6dafb089605913517e73c4" title="Voir items_communs_.">items_communs</a>();
<a name="l00675"></a>00675 
<a name="l00676"></a>00676 <span class="comment">// Tableaux temporaires</span>
<a name="l00677"></a>00677       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> envoie_sommets;
<a name="l00678"></a>00678       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> envoie_valeurs;
<a name="l00679"></a>00679       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> envoie_compteur;
<a name="l00680"></a>00680       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> recoit_sommets;
<a name="l00681"></a>00681       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> recoit_valeurs;
<a name="l00682"></a>00682       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> recoit_compteur;
<a name="l00683"></a>00683       <span class="keywordtype">int</span> size=0;
<a name="l00684"></a>00684 <span class="comment">// On balaie les sommets communs</span>
<a name="l00685"></a>00685       <span class="keywordtype">int</span> size_sommets_communs = sommets_communs.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00686"></a>00686       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;size_sommets_communs; j++)
<a name="l00687"></a>00687         {
<a name="l00688"></a>00688           <span class="keywordtype">int</span> sommet = sommets_communs(j);
<a name="l00689"></a>00689 <span class="comment">// Si ce sommet commun appartient a la liste des sommets Dirichlet:</span>
<a name="l00690"></a>00690           <span class="keywordflow">if</span> ( <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet)&gt;0)
<a name="l00691"></a>00691             {
<a name="l00692"></a>00692 <span class="comment">// Le numero du sommet voisin distant est:</span>
<a name="l00693"></a>00693               <span class="keywordtype">int</span> sommet_voisin = joint_item.<a class="code" href="classJoint__Items.html#a11b6064b7fd16c1366c4c1e3a88ac2a5" title="Voir renum_items_communs_.">renum_items_communs</a>()(j,0);
<a name="l00694"></a>00694 <span class="comment">// On verifie que le sommet local est bien sommet:</span>
<a name="l00695"></a>00695               assert(joint_item.<a class="code" href="classJoint__Items.html#a11b6064b7fd16c1366c4c1e3a88ac2a5" title="Voir renum_items_communs_.">renum_items_communs</a>()(j,1)==sommet);
<a name="l00696"></a>00696 <span class="comment">// On redimensionne les tableaux d&#39;envoi et on les remplit</span>
<a name="l00697"></a>00697               size++;
<a name="l00698"></a>00698               envoie_sommets.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(size);
<a name="l00699"></a>00699               envoie_sommets(size-1) = sommet_voisin;
<a name="l00700"></a>00700               envoie_compteur.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(size);
<a name="l00701"></a>00701               envoie_compteur(size-1) = <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet);
<a name="l00702"></a>00702               envoie_valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(size, nb_compo_);
<a name="l00703"></a>00703               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;nb_compo_; compo++)
<a name="l00704"></a>00704                 envoie_valeurs(size-1,compo) = les_valeurs(sommet,compo);
<a name="l00705"></a>00705             }
<a name="l00706"></a>00706         }
<a name="l00707"></a>00707       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()&lt;PEvoisin)
<a name="l00708"></a>00708         {
<a name="l00709"></a>00709 <span class="comment">// On envoie les tableaux a PEvoisin</span>
<a name="l00710"></a>00710           <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(envoie_sommets,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()+1000);
<a name="l00711"></a>00711           <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(envoie_valeurs,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()+2000);
<a name="l00712"></a>00712           <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(envoie_compteur,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()+3000);
<a name="l00713"></a>00713 <span class="comment">// On recoit les tableaux de PEvoisin</span>
<a name="l00714"></a>00714           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(recoit_sommets,PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin+1000);
<a name="l00715"></a>00715           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(recoit_valeurs,PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin+2000);
<a name="l00716"></a>00716           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(recoit_compteur,PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin+3000);
<a name="l00717"></a>00717         }
<a name="l00718"></a>00718       <span class="keywordflow">else</span>
<a name="l00719"></a>00719         {
<a name="l00720"></a>00720 <span class="comment">// On recoit les tableaux de PEvoisin</span>
<a name="l00721"></a>00721           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(recoit_sommets,PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin+1000);
<a name="l00722"></a>00722           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(recoit_valeurs,PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin+2000);
<a name="l00723"></a>00723           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(recoit_compteur,PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin+3000);
<a name="l00724"></a>00724 <span class="comment">// On envoie les tableaux a PEvoisin</span>
<a name="l00725"></a>00725           <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(envoie_sommets,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()+1000);
<a name="l00726"></a>00726           <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(envoie_valeurs,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()+2000);
<a name="l00727"></a>00727           <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(envoie_compteur,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),PEvoisin,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()+3000);
<a name="l00728"></a>00728 
<a name="l00729"></a>00729         }
<a name="l00730"></a>00730 <span class="comment">// On ajoute la contribution de PEvoisin aux tableaux valeurs et compteur</span>
<a name="l00731"></a>00731 <span class="comment">// si les compteurs de part et d&#39;autre ne sont pas nuls</span>
<a name="l00732"></a>00732       <span class="keywordtype">int</span> recoit_size = recoit_sommets.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00733"></a>00733       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;recoit_size; i++)
<a name="l00734"></a>00734         {
<a name="l00735"></a>00735           <span class="keywordtype">int</span> sommet = recoit_sommets(i);
<a name="l00736"></a>00736 
<a name="l00737"></a>00737 <span class="comment">// Contribution recu d&#39;un sommet Dirichlet</span>
<a name="l00738"></a>00738           <span class="keywordflow">if</span> (recoit_compteur(i))
<a name="l00739"></a>00739             {
<a name="l00740"></a>00740 <span class="comment">// Si le sommet local n&#39;est pas Dirichlet, on annulle valeurs</span>
<a name="l00741"></a>00741               <span class="keywordflow">if</span> (<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet)==0)
<a name="l00742"></a>00742                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;nb_compo_; compo++)
<a name="l00743"></a>00743                   les_valeurs(sommet,compo)=0;
<a name="l00744"></a>00744 
<a name="l00745"></a>00745               <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet)+=recoit_compteur(i);
<a name="l00746"></a>00746               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;nb_compo_; compo++)
<a name="l00747"></a>00747                 les_valeurs(sommet,compo)+=recoit_valeurs(i,compo);
<a name="l00748"></a>00748             }
<a name="l00749"></a>00749         }
<a name="l00750"></a>00750     }
<a name="l00751"></a>00751 }
<a name="l00752"></a>00752 
<a name="l00753"></a><a class="code" href="classChamp__base.html#ad36516accabe5cdaa2c9defda94a09c0">00753</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__base.html#ad36516accabe5cdaa2c9defda94a09c0">Champ_base::calculer_valeurs_som_post</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs,<span class="keywordtype">int</span> nb_som,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_post,<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom)<span class="keyword"> const</span>
<a name="l00754"></a>00754 <span class="keyword"></span>{
<a name="l00755"></a>00755   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom=dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00756"></a>00756   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom_inc= dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00757"></a>00757   <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>) )
<a name="l00758"></a>00758     {
<a name="l00759"></a>00759       nom_dom_inc=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>).domaine().le_nom();
<a name="l00760"></a>00760     }
<a name="l00761"></a>00761   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>, *<span class="keyword">this</span>) )
<a name="l00762"></a>00762     {
<a name="l00763"></a>00763       nom_dom_inc=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>, *<span class="keyword">this</span>).domaine().le_nom();
<a name="l00764"></a>00764     }
<a name="l00765"></a>00765   <span class="keywordtype">int</span> nb_som_PE = <a class="code" href="communications_8cpp.html#a13b5bdc7cfe14771b52a033b1ecbc071" title="Calul de la somme partielle de i sur les processeurs 0 a me()-1 (renvoie 0 sur le processeur 0)...">mppartial_sum</a>(nb_som);
<a name="l00766"></a>00766 
<a name="l00767"></a>00767   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_sommets=dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>() ;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769   les_valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_som, <a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>);
<a name="l00770"></a>00770 
<a name="l00771"></a>00771   <span class="keywordflow">if</span>(nom_dom==nom_dom_inc)
<a name="l00772"></a>00772     {
<a name="l00773"></a>00773       <a class="code" href="classChamp__base.html#a5987426ce22e4dca7f506b8872ae6eac" title="renvoie les valeurs aux sommets du Domaine dom">valeur_aux_sommets</a>(dom,les_valeurs);
<a name="l00774"></a>00774     }
<a name="l00775"></a>00775   <span class="keywordflow">else</span>
<a name="l00776"></a>00776     {
<a name="l00777"></a>00777       <a class="code" href="classChamp__base.html#a662c5acd14339e93e26b638354decad7" title="Provoque une erreur ! Doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux</a>(coord_sommets, les_valeurs);
<a name="l00778"></a>00778     }
<a name="l00779"></a>00779   <span class="keywordtype">int</span> old_traitement_symetrie=0;
<a name="l00780"></a>00780   {
<a name="l00781"></a>00781     <span class="keywordtype">char</span>* theValue = getenv(<span class="stringliteral">&quot;TRUST_POST_SOM_SYMETRIE_ERREUR&quot;</span>);
<a name="l00782"></a>00782     <span class="keywordflow">if</span> (theValue != NULL)
<a name="l00783"></a>00783       {
<a name="l00784"></a>00784         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;results depend on order of bc or faces in bc ...&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00785"></a>00785         old_traitement_symetrie=1;
<a name="l00786"></a>00786       }
<a name="l00787"></a>00787   }
<a name="l00788"></a>00788   <span class="keywordtype">int</span> impose_cl_diri=1;
<a name="l00789"></a>00789 
<a name="l00790"></a>00790   {
<a name="l00791"></a>00791     <span class="keywordtype">char</span>* theValue = getenv(<span class="stringliteral">&quot;TRUST_POST_SOM_NO_DIRICHLET&quot;</span>);
<a name="l00792"></a>00792     <span class="keywordflow">if</span> (theValue != NULL)
<a name="l00793"></a>00793       {
<a name="l00794"></a>00794         impose_cl_diri=0;
<a name="l00795"></a>00795       }
<a name="l00796"></a>00796   }
<a name="l00797"></a>00797 
<a name="l00798"></a>00798 <span class="comment">// Prise en compte des conditions aux limites :</span>
<a name="l00799"></a>00799   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>)&amp;&amp;impose_cl_diri)
<a name="l00800"></a>00800     {
<a name="l00801"></a>00801       <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; chi=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>);
<a name="l00802"></a>00802       <span class="keywordflow">if</span> (!chi.<a class="code" href="classMorEqn.html#a6661ee5e21787d7a2326359961f74d22">mon_equation_non_nul</a>())
<a name="l00803"></a>00803         {
<a name="l00804"></a>00804           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;no equation assocuate to &quot;</span>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00805"></a>00805           impose_cl_diri=0;
<a name="l00806"></a>00806         }
<a name="l00807"></a>00807     }
<a name="l00808"></a>00808   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>)&amp;&amp;impose_cl_diri)
<a name="l00809"></a>00809     {
<a name="l00810"></a>00810       <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; chi=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>);
<a name="l00811"></a>00811 
<a name="l00812"></a>00812       <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn=chi.<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00813"></a>00813 <span class="comment">// GF on ne veut pas prendre en compte les CL en EF</span>
<a name="l00814"></a>00814       <span class="keywordflow">if</span> (eqn.<a class="code" href="classEquation__base.html#a324a761eaad25eb00d18e14764a1362e" title="Renvoie la discretisation associee a l&#39;equation.">discretisation</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()!=<span class="stringliteral">&quot;EF&quot;</span>)
<a name="l00815"></a>00815         <span class="keywordflow">if</span>((eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>() == <a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>())
<a name="l00816"></a>00816             &amp;&amp; (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>))
<a name="l00817"></a>00817             &amp;&amp; (dom==(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>).equation().probleme().domaine() ) ) )
<a name="l00818"></a>00818           {
<a name="l00819"></a>00819             <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(dom.<a class="code" href="classDomaine.html#abc4abc8b8db5bebeb161fae4162a89ce" title="Renvoie le nombre de sommets.">nb_som</a>());
<a name="l00820"></a>00820             <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a> = 0;
<a name="l00821"></a>00821 
<a name="l00822"></a>00822             <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp; zcl=eqn.<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>();
<a name="l00823"></a>00823             <span class="keywordtype">int</span> nb_cond_lim=zcl.<a class="code" href="classZone__Cl__dis.html#a7e0c9938057e7d427eea4954dd7bad58" title="Appel a l&#39;objet sous-jacent Renvoie le nombre de conditions aux limites.">nb_cond_lim</a>(),num_cl;
<a name="l00824"></a>00824             <span class="keywordflow">for</span> (num_cl=0; num_cl&lt;nb_cond_lim; num_cl++)
<a name="l00825"></a>00825               {
<a name="l00826"></a>00826                 <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl=zcl.<a class="code" href="classZone__Cl__dis.html#aafbd0525703e23200e31796bcd4fcac6" title="Appel a l&#39;objet sous-jacent Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>(num_cl);
<a name="l00827"></a>00827                 <span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; frontiere_dis=la_cl-&gt;<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>();
<a name="l00828"></a>00828                 <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; frontiere=frontiere_dis.<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>();
<a name="l00829"></a>00829                 <span class="keyword">const</span> <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces=frontiere.<a class="code" href="classFrontiere.html#ac64479069f0c43a17cb5766a39ce5ba8" title="Renvoie les faces de la frontiere&lt;br&gt;(version const)">faces</a>();
<a name="l00830"></a>00830 <span class="comment">// modif bm: les faces frontieres ont maintenant des faces virtuelles,</span>
<a name="l00831"></a>00831 <span class="comment">// il ne faut pas boucler sur les faces virtuelles (ancien code: nb_faces_tot())</span>
<a name="l00832"></a>00832                 <span class="keywordtype">int</span> nb_faces=faces.<a class="code" href="classFaces.html#a64d898edb20c3687d357018f1821c50a" title="Renvoie le nombre de Faces.">nb_faces</a>();
<a name="l00833"></a>00833                 <span class="keywordtype">int</span> nb_som_faces=faces.<a class="code" href="classFaces.html#a1361d27e4c8b239c48de671fad23428c" title="Renvoie le nombre de sommet par face.">nb_som_faces</a>();
<a name="l00834"></a>00834                 <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDirichlet.html" title="classe Dirichlet Cette classe est la classe de base de la hierarchie des conditions aux limites de ty...">Dirichlet</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l00835"></a>00835                   {
<a name="l00836"></a>00836                     <span class="keyword">const</span> <a class="code" href="classDirichlet.html" title="classe Dirichlet Cette classe est la classe de base de la hierarchie des conditions aux limites de ty...">Dirichlet</a>&amp; diri=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDirichlet.html" title="classe Dirichlet Cette classe est la classe de base de la hierarchie des conditions aux limites de ty...">Dirichlet</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>());
<a name="l00837"></a>00837                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face=0; num_face&lt;nb_faces ; num_face++)
<a name="l00838"></a>00838                       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_som=0; num_som&lt;nb_som_faces; num_som++)
<a name="l00839"></a>00839                         {
<a name="l00840"></a>00840                           <span class="keywordtype">int</span> sommet=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(num_face, num_som);
<a name="l00841"></a>00841                           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; compo++)
<a name="l00842"></a>00842                             {
<a name="l00843"></a>00843                               <span class="keywordflow">if</span> (<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) == 0)
<a name="l00844"></a>00844                                 les_valeurs(sommet, compo) = 0;
<a name="l00845"></a>00845 
<a name="l00846"></a>00846                               les_valeurs(sommet, compo) += diri.<a class="code" href="classDirichlet.html#ab59a2214e3208ac45048a2232c132803" title="Renvoie la valeur imposee sur la i-eme composante du champ a la frontiere au temps par defaut du cham...">val_imp</a>(num_face, compo);
<a name="l00847"></a>00847 
<a name="l00848"></a>00848                             }
<a name="l00849"></a>00849                           <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) += 1;
<a name="l00850"></a>00850                         }
<a name="l00851"></a>00851                   }
<a name="l00852"></a>00852                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDirichlet__homogene.html" title="Classe Dirichlet_homogene Cette classe est la classe de base de la hierarchie des conditions aux limi...">Dirichlet_homogene</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l00853"></a>00853                   {
<a name="l00854"></a>00854                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face=0; num_face&lt;nb_faces ; num_face++)
<a name="l00855"></a>00855                       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_som=0; num_som&lt;nb_som_faces; num_som++)
<a name="l00856"></a>00856                         {
<a name="l00857"></a>00857                           <span class="keywordtype">int</span> sommet=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(num_face, num_som);
<a name="l00858"></a>00858                           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; compo++)
<a name="l00859"></a>00859                             {
<a name="l00860"></a>00860                               <span class="keywordflow">if</span> (<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) == 0)
<a name="l00861"></a>00861                                 les_valeurs(sommet, compo) = 0;
<a name="l00862"></a>00862 
<a name="l00863"></a>00863                               les_valeurs(sommet, compo) += 0;
<a name="l00864"></a>00864 
<a name="l00865"></a>00865                             }
<a name="l00866"></a>00866                           <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) += 1;
<a name="l00867"></a>00867                         }
<a name="l00868"></a>00868                   }
<a name="l00869"></a>00869                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classSymetrie.html" title="classe Symetrie Sur les faces de symetrie on a les proprietes suivantes: - composante normale de la v...">Symetrie</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))&amp;&amp;old_traitement_symetrie)
<a name="l00870"></a>00870                   {
<a name="l00871"></a>00871                     <span class="keywordflow">if</span>(<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>==<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>)
<a name="l00872"></a>00872                       {
<a name="l00873"></a>00873                         <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> normale(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00874"></a>00874                         <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> delta(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>-1,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00875"></a>00875                         <span class="keywordtype">int</span> nb_faces_tot=faces.<a class="code" href="classFaces.html#a6fa5bebeaf7f9e8de2fc68759168bf7d" title="Renvoie le nombre total de Faces i.e. Le nombre de faces reelles et virtuelles sur le processeur cour...">nb_faces_tot</a>();
<a name="l00876"></a>00876                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face=0; num_face&lt;nb_faces_tot ; num_face++)
<a name="l00877"></a>00877                           {
<a name="l00878"></a>00878 <span class="comment">// calcul de la normale :</span>
<a name="l00879"></a>00879                             <span class="keywordtype">int</span> sommet0=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(num_face, 0);
<a name="l00880"></a>00880                             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=1; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; k++)
<a name="l00881"></a>00881                               {
<a name="l00882"></a>00882                                 <span class="keywordtype">int</span> sommet=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(num_face, k);
<a name="l00883"></a>00883                                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; compo++)
<a name="l00884"></a>00884                                   delta(k-1,compo)=coord_sommets(sommet,compo)-coord_sommets(sommet0,compo);
<a name="l00885"></a>00885                               }
<a name="l00886"></a>00886                             <span class="keywordflow">if</span>(dimension==2)
<a name="l00887"></a>00887                               {
<a name="l00888"></a>00888                                 normale(0)=-delta(0,1);
<a name="l00889"></a>00889                                 normale(1)=delta(0,0);
<a name="l00890"></a>00890                               }
<a name="l00891"></a>00891                             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(dimension==3)
<a name="l00892"></a>00892                               {
<a name="l00893"></a>00893                                 normale(0)=delta(0,1)*delta(1,2) - delta(0,2)*delta(1,1);
<a name="l00894"></a>00894                                 normale(1)=delta(0,2)*delta(1,0) - delta(0,0)*delta(1,2);
<a name="l00895"></a>00895                                 normale(2)=delta(0,0)*delta(1,1) - delta(0,1)*delta(1,0);
<a name="l00896"></a>00896                               }
<a name="l00897"></a>00897                             <span class="keywordflow">else</span>
<a name="l00898"></a>00898                               {
<a name="l00899"></a>00899                                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We do not know treating the dimension : &quot;</span> &lt;&lt; dimension &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00900"></a>00900                                 <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00901"></a>00901                               }
<a name="l00902"></a>00902                             normale *= 1. / <a class="code" href="ArrOfDouble_8cpp.html#af3b2ac08cde80e3eadd7a83f5fd06ab7" title="Calcul de la norme du vecteur dx (fonction blas DNRM2, soit racine carree(somme des dx[i]*dx[i])...">norme_array</a>(normale);
<a name="l00903"></a>00903                             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_som=0; num_som&lt;nb_som_faces; num_som++)
<a name="l00904"></a>00904                               {
<a name="l00905"></a>00905                                 <span class="keywordtype">int</span> sommet=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(num_face, num_som);
<a name="l00906"></a>00906                                 <span class="keywordflow">if</span> (sommet&lt;dom.<a class="code" href="classDomaine.html#abc4abc8b8db5bebeb161fae4162a89ce" title="Renvoie le nombre de sommets.">nb_som</a>()) <span class="comment">//!&lt; Sommet reel</span>
<a name="l00907"></a>00907 <span class="comment"></span>                                  {
<a name="l00908"></a>00908                                     <span class="keywordtype">double</span> psc=0;
<a name="l00909"></a>00909                                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt; <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; k++)
<a name="l00910"></a>00910                                       psc+=normale(k)*les_valeurs(sommet,k);
<a name="l00911"></a>00911                                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; compo++)
<a name="l00912"></a>00912                                       les_valeurs(sommet, compo) -= psc*normale(compo);
<a name="l00913"></a>00913                                   }
<a name="l00914"></a>00914                               }
<a name="l00915"></a>00915                           }
<a name="l00916"></a>00916                       }
<a name="l00917"></a>00917                   }
<a name="l00918"></a>00918               }
<a name="l00919"></a>00919 <span class="comment">// Ajoute la contribution des autres processeurs a valeurs et compteur</span>
<a name="l00920"></a>00920             <a class="code" href="Champ__base_8cpp.html#a3f0f70f201555bc3beeccb190273ed5b">add_sommets_communs</a>(dom, les_valeurs, compteur);
<a name="l00921"></a>00921 
<a name="l00922"></a>00922 <span class="comment">// On termine le calcul de la moyenne pour les cas qui ont ete modifies</span>
<a name="l00923"></a>00923 <span class="comment">// par une condition de type Dirichlet</span>
<a name="l00924"></a>00924             <span class="keywordtype">int</span> nb_som_l = dom.<a class="code" href="classDomaine.html#abc4abc8b8db5bebeb161fae4162a89ce" title="Renvoie le nombre de sommets.">nb_som</a>();
<a name="l00925"></a>00925 <span class="comment">// assert (nb_som_l==nb_som_l); // GF je ne suis pas sur de l&#39;assert c&#39;est pour voir</span>
<a name="l00926"></a>00926             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> sommet = 0; sommet&lt;nb_som_l; sommet++)
<a name="l00927"></a>00927               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> compo=0; compo&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; compo++)
<a name="l00928"></a>00928                 <span class="keywordflow">if</span> (<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) != 0)
<a name="l00929"></a>00929                   les_valeurs(sommet,compo) /= <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet);
<a name="l00930"></a>00930 
<a name="l00931"></a>00931           }
<a name="l00932"></a>00932     }
<a name="l00933"></a>00933 
<a name="l00934"></a>00934 <span class="comment">// Prise en compte de l&#39;axi:</span>
<a name="l00935"></a>00935   <span class="keywordflow">if</span>((<a class="code" href="classObjet__U.html#ad9b82ace9d4c7902ec704b6a78f76991">axi</a>) &amp;&amp; (<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>==<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>))
<a name="l00936"></a>00936     {
<a name="l00937"></a>00937       <span class="keywordtype">double</span> teta, vR, vT;
<a name="l00938"></a>00938       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> sommet=0; sommet&lt;nb_som; sommet++)
<a name="l00939"></a>00939         {
<a name="l00940"></a>00940           teta = coord_sommets(sommet,1);
<a name="l00941"></a>00941           vR=les_valeurs(sommet, 0);
<a name="l00942"></a>00942           vT=les_valeurs(sommet, 1);
<a name="l00943"></a>00943           les_valeurs(sommet, 0) =vR*cos(teta)-vT*sin(teta);
<a name="l00944"></a>00944           les_valeurs(sommet, 1) =vR*sin(teta)+vT*cos(teta);
<a name="l00945"></a>00945         }
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947 
<a name="l00948"></a>00948   nom_post+= <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;_som_&quot;</span>);
<a name="l00949"></a>00949   nom_post+= nom_dom;
<a name="l00950"></a>00950   <span class="keywordflow">return</span> nb_som_PE;
<a name="l00951"></a>00951 }
<a name="l00952"></a><a class="code" href="classChamp__base.html#a7ec01e19a24f288dccc15a5ff9a03927">00952</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__base.html#a7ec01e19a24f288dccc15a5ff9a03927">Champ_base::calculer_valeurs_som_compo_post</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; les_valeurs,<span class="keywordtype">int</span> ncomp,<span class="keywordtype">int</span> nb_som,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_post,<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom,<span class="keywordtype">int</span> appliquer_cl)<span class="keyword"> const</span>
<a name="l00953"></a>00953 <span class="keyword"></span>{
<a name="l00954"></a>00954   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom=dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00955"></a>00955   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom_inc= dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00956"></a>00956   <span class="keywordtype">int</span> nb_som_PE = <a class="code" href="communications_8cpp.html#a13b5bdc7cfe14771b52a033b1ecbc071" title="Calul de la somme partielle de i sur les processeurs 0 a me()-1 (renvoie 0 sur le processeur 0)...">mppartial_sum</a>(nb_som);
<a name="l00957"></a>00957   <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>) )
<a name="l00958"></a>00958     {
<a name="l00959"></a>00959       nom_dom_inc=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>).domaine().le_nom();
<a name="l00960"></a>00960     }
<a name="l00961"></a>00961   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>, *<span class="keyword">this</span>) )
<a name="l00962"></a>00962     {
<a name="l00963"></a>00963       nom_dom_inc=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Fonc__base.html" title="classe Champ_Fonc_base Classe de base des champs qui sont fonction d&#39;une grandeur calculee au cours d...">Champ_Fonc_base</a>, *<span class="keyword">this</span>).domaine().le_nom();
<a name="l00964"></a>00964     }
<a name="l00965"></a>00965   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_sommets=dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>() ;
<a name="l00966"></a>00966   les_valeurs.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_som);
<a name="l00967"></a>00967   <span class="keywordflow">if</span>(nom_dom==nom_dom_inc)
<a name="l00968"></a>00968     {
<a name="l00969"></a>00969       <a class="code" href="classChamp__base.html#ac384e7ccce938dc09b166dcc68fe5c14" title="renvoie la compo eme valeur aux sommets de dom.">valeur_aux_sommets_compo</a>(dom,les_valeurs, ncomp);
<a name="l00970"></a>00970     }
<a name="l00971"></a>00971   <span class="keywordflow">else</span>
<a name="l00972"></a>00972     {
<a name="l00973"></a>00973       <a class="code" href="classChamp__base.html#a19223e49e04226a25264ac573ab390e2" title="Idem que valeur_aux(const DoubleTab &amp;, DoubleTab &amp;), mais calcule uniquement la composante compo du c...">valeur_aux_compo</a>(coord_sommets, les_valeurs, ncomp);
<a name="l00974"></a>00974     }
<a name="l00975"></a>00975 
<a name="l00976"></a>00976 <span class="comment">// int impose_cl_diri=1;</span>
<a name="l00977"></a>00977 
<a name="l00978"></a>00978   {
<a name="l00979"></a>00979     <span class="keywordtype">char</span>* theValue = getenv(<span class="stringliteral">&quot;TRUST_POST_SOM_NO_DIRICHLET&quot;</span>);
<a name="l00980"></a>00980     <span class="keywordflow">if</span> (theValue != NULL)
<a name="l00981"></a>00981       {
<a name="l00982"></a>00982         appliquer_cl=0;
<a name="l00983"></a>00983       }
<a name="l00984"></a>00984   }
<a name="l00985"></a>00985 
<a name="l00986"></a>00986   <span class="keywordflow">if</span> (appliquer_cl)
<a name="l00987"></a>00987     {
<a name="l00988"></a>00988 <span class="comment">// Liste des sommets de bord au contact d&#39;une face de Dirichlet:</span>
<a name="l00989"></a>00989 <span class="comment">// Prise en compte des conditions aux limites :</span>
<a name="l00990"></a>00990       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>))
<a name="l00991"></a>00991         {
<a name="l00992"></a>00992           <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; chi=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>);
<a name="l00993"></a>00993           <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn=chi.<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00994"></a>00994           <span class="keywordflow">if</span>((eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>() == <a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>())
<a name="l00995"></a>00995               &amp;&amp; (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>))
<a name="l00996"></a>00996               &amp;&amp; (dom==(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, *<span class="keyword">this</span>).equation().probleme().domaine() ) ) )
<a name="l00997"></a>00997             {
<a name="l00998"></a>00998 
<a name="l00999"></a>00999               <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(dom.<a class="code" href="classDomaine.html#abc4abc8b8db5bebeb161fae4162a89ce" title="Renvoie le nombre de sommets.">nb_som</a>());
<a name="l01000"></a>01000               <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a> = 0;
<a name="l01001"></a>01001               <span class="keywordtype">int</span> num_cl;
<a name="l01002"></a>01002               <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp; zcl=eqn.<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>();
<a name="l01003"></a>01003               <span class="keywordtype">int</span> nb_cond_lim=zcl.<a class="code" href="classZone__Cl__dis.html#a7e0c9938057e7d427eea4954dd7bad58" title="Appel a l&#39;objet sous-jacent Renvoie le nombre de conditions aux limites.">nb_cond_lim</a>();
<a name="l01004"></a>01004               <span class="keywordflow">for</span> (num_cl=0; num_cl&lt;nb_cond_lim; num_cl++)
<a name="l01005"></a>01005                 {
<a name="l01006"></a>01006                   <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl=zcl.<a class="code" href="classZone__Cl__dis.html#aafbd0525703e23200e31796bcd4fcac6" title="Appel a l&#39;objet sous-jacent Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>(num_cl);
<a name="l01007"></a>01007                   <span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; frontiere_dis=la_cl-&gt;<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>();
<a name="l01008"></a>01008                   <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; frontiere=frontiere_dis.<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>();
<a name="l01009"></a>01009                   <span class="keyword">const</span> <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces=frontiere.<a class="code" href="classFrontiere.html#ac64479069f0c43a17cb5766a39ce5ba8" title="Renvoie les faces de la frontiere&lt;br&gt;(version const)">faces</a>();
<a name="l01010"></a>01010                   <span class="keywordtype">int</span> nb_faces=faces.<a class="code" href="classFaces.html#a6fa5bebeaf7f9e8de2fc68759168bf7d" title="Renvoie le nombre total de Faces i.e. Le nombre de faces reelles et virtuelles sur le processeur cour...">nb_faces_tot</a>();
<a name="l01011"></a>01011                   <span class="keywordtype">int</span> nb_som_faces=faces.<a class="code" href="classFaces.html#a1361d27e4c8b239c48de671fad23428c" title="Renvoie le nombre de sommet par face.">nb_som_faces</a>();
<a name="l01012"></a>01012 
<a name="l01013"></a>01013                   <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDirichlet.html" title="classe Dirichlet Cette classe est la classe de base de la hierarchie des conditions aux limites de ty...">Dirichlet</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l01014"></a>01014                     {
<a name="l01015"></a>01015                       <span class="keyword">const</span> <a class="code" href="classDirichlet.html" title="classe Dirichlet Cette classe est la classe de base de la hierarchie des conditions aux limites de ty...">Dirichlet</a>&amp; diri=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDirichlet.html" title="classe Dirichlet Cette classe est la classe de base de la hierarchie des conditions aux limites de ty...">Dirichlet</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>());
<a name="l01016"></a>01016                       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face=0; num_face&lt;nb_faces ; num_face++)
<a name="l01017"></a>01017                         {
<a name="l01018"></a>01018                           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_som=0; num_som&lt;nb_som_faces; num_som++)
<a name="l01019"></a>01019                             {
<a name="l01020"></a>01020                               <span class="keywordtype">int</span> sommet=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(num_face, num_som);
<a name="l01021"></a>01021                               <span class="keywordflow">if</span> (<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) == 0)
<a name="l01022"></a>01022                                 les_valeurs(sommet) = 0;
<a name="l01023"></a>01023 
<a name="l01024"></a>01024                               les_valeurs(sommet) += diri.<a class="code" href="classDirichlet.html#ab59a2214e3208ac45048a2232c132803" title="Renvoie la valeur imposee sur la i-eme composante du champ a la frontiere au temps par defaut du cham...">val_imp</a>(num_face,ncomp);
<a name="l01025"></a>01025                               <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) += 1;
<a name="l01026"></a>01026                             }
<a name="l01027"></a>01027                         }
<a name="l01028"></a>01028                     }
<a name="l01029"></a>01029                   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDirichlet__homogene.html" title="Classe Dirichlet_homogene Cette classe est la classe de base de la hierarchie des conditions aux limi...">Dirichlet_homogene</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l01030"></a>01030                     {
<a name="l01031"></a>01031                       <span class="keyword">const</span> <a class="code" href="classDirichlet__homogene.html" title="Classe Dirichlet_homogene Cette classe est la classe de base de la hierarchie des conditions aux limi...">Dirichlet_homogene</a>&amp; diri=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDirichlet__homogene.html" title="Classe Dirichlet_homogene Cette classe est la classe de base de la hierarchie des conditions aux limi...">Dirichlet_homogene</a>, la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>());
<a name="l01032"></a>01032                       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face=0; num_face&lt;nb_faces ; num_face++)
<a name="l01033"></a>01033                         {
<a name="l01034"></a>01034                           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_som=0; num_som&lt;nb_som_faces; num_som++)
<a name="l01035"></a>01035                             {
<a name="l01036"></a>01036                               <span class="keywordtype">int</span> sommet=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(num_face, num_som);
<a name="l01037"></a>01037 
<a name="l01038"></a>01038                               les_valeurs(sommet) = diri.<a class="code" href="classDirichlet__homogene.html#a79fd7fbac0243313b42a2c6b79eb546a" title="Renvoie la valeur imposee sur la i-eme composante du champ a la frontiere. Toujours 0 pour Dirichlet ...">val_imp</a>(num_face,ncomp);
<a name="l01039"></a>01039                               <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) += 1;
<a name="l01040"></a>01040 
<a name="l01041"></a>01041                             }
<a name="l01042"></a>01042                         }
<a name="l01043"></a>01043                     }
<a name="l01044"></a>01044                 }
<a name="l01045"></a>01045 <span class="comment">// Ajoute la contribution des autres processeurs a les_valeurs et compteur</span>
<a name="l01046"></a>01046               <a class="code" href="Champ__base_8cpp.html#a3f0f70f201555bc3beeccb190273ed5b">add_sommets_communs</a>(dom, les_valeurs, compteur);
<a name="l01047"></a>01047 
<a name="l01048"></a>01048 <span class="comment">// On termine le calcul de la moyenne pour les cas qui ont ete modifies</span>
<a name="l01049"></a>01049 <span class="comment">// par une condition de type Dirichlet</span>
<a name="l01050"></a>01050               <span class="keywordtype">int</span> nb_som_l = dom.<a class="code" href="classDomaine.html#abc4abc8b8db5bebeb161fae4162a89ce" title="Renvoie le nombre de sommets.">nb_som</a>();
<a name="l01051"></a>01051               assert (nb_som==nb_som_l); <span class="comment">//!&lt; GF je ne suis pas sur de l&#39;assert c&#39;est pour voir</span>
<a name="l01052"></a>01052 <span class="comment"></span>              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> sommet = 0; sommet&lt;nb_som_l; sommet++)
<a name="l01053"></a>01053                 <span class="keywordflow">if</span> (<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet) != 0)
<a name="l01054"></a>01054                   les_valeurs(sommet) /= <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>(sommet);
<a name="l01055"></a>01055             }
<a name="l01056"></a>01056         }
<a name="l01057"></a>01057     }
<a name="l01058"></a>01058   nom_post+= <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;_som_&quot;</span>);
<a name="l01059"></a>01059   nom_post+= nom_dom;
<a name="l01060"></a>01060   <span class="keywordflow">return</span>  nb_som_PE;
<a name="l01061"></a>01061 }
<a name="l01062"></a>01062 
<a name="l01063"></a>01063 
<a name="l01064"></a><a class="code" href="classChamp__base.html#a1d59115d8eeb909032e2b99955e60aaa">01064</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__base.html#a1d59115d8eeb909032e2b99955e60aaa">Champ_base::completer_post_champ</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom,<span class="keyword">const</span> <span class="keywordtype">int</span> is_axi,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; loc_post,
<a name="l01065"></a>01065                                      <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; le_nom_champ_post,<a class="code" href="classFormat__Post__base.html" title="Classe de base des formats de postraitements pour les champs&lt;br&gt;(lata, med, lml, meshtv). Utilisation de la classe par l&#39;interface generique: -typer un objet format de postraitement -initialiser l objet format de postraitement -proceder a des operations de complement et verification -ecrire un domaine -ecrire_temps -ecrire_champ (un type de champ supporte: aux elements ou aux sommets, ou encore aux faces si on a ecrit les faces du domaine et si les faces sont supportees par le postraitement)">Format_Post_base</a>&amp; format)<span class="keyword"> const</span>
<a name="l01066"></a>01066 <span class="keyword"></span>{
<a name="l01067"></a>01067 
<a name="l01068"></a>01068   <span class="keyword">const</span> <a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646b" title="This is a base class from which inherit Champ_base and Champ_front_base. It handles all the generic a...">Nature_du_champ</a>&amp; la_nature = <a class="code" href="classField__base.html#a75bf4e0a6258589a83801c0383d049cc" title="Renvoie la nature d&#39;un champ (scalaire, multiscalaire, vectoriel).">nature_du_champ</a>();
<a name="l01069"></a>01069   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_compo = <a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l01070"></a>01070   <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms_composante = <a class="code" href="classField__base.html#a365a59232bd2d53d4869e5103ca558d1" title="Renvoie le tableau des noms des composantes du champ.">noms_compo</a>();
<a name="l01071"></a>01071 
<a name="l01072"></a>01072   format.<a class="code" href="classFormat__Post__base.html#a4b46c3d2c6ec1846d2f3d8510f5096ea">completer_post</a>(dom,is_axi,la_nature,nb_compo,noms_composante,loc_post,le_nom_champ_post);
<a name="l01073"></a>01073 
<a name="l01074"></a>01074   <span class="keywordflow">return</span> 1;
<a name="l01075"></a>01075 }
<a name="l01076"></a>01076 
<a name="l01077"></a>01077 <span class="comment">// Fixe les conditions de prise en compte des conditions limites</span>
<a name="l01078"></a>01078 <span class="comment">// pour les operations de filtrage-postraitement du champ</span>
<a name="l01079"></a><a class="code" href="classChamp__base.html#aab49cce5ad4f9409be33d0b4e4527097">01079</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__base.html#aab49cce5ad4f9409be33d0b4e4527097">Champ_base::completer</a>(<span class="keyword">const</span> <a class="code" href="classZone__Cl__dis__base.html" title="classe Zone_Cl_dis_base Les objets Zone_Cl_dis_base representent les conditions aux limites discretis...">Zone_Cl_dis_base</a>&amp; zcl)
<a name="l01080"></a>01080 {
<a name="l01081"></a>01081 }
<a name="l01082"></a>01082 
<a name="l01083"></a>01083 <span class="comment">// Precondition:</span>
<a name="l01084"></a>01084 <span class="comment">// Parametre: double&amp; t</span>
<a name="l01085"></a>01085 <span class="comment">// Signification:  le nouveau temps auquel se situe le champ</span>
<a name="l01086"></a>01086 <span class="comment">// Valeurs par defaut:</span>
<a name="l01087"></a>01087 <span class="comment">// Contraintes: reference constante</span>
<a name="l01088"></a>01088 <span class="comment">// Acces: entree</span>
<a name="l01089"></a>01089 <span class="comment">// Exception:</span>
<a name="l01090"></a>01090 <span class="comment">// Effets de bord:</span>
<a name="l01091"></a>01091 <span class="comment">// Postcondition: le temps du champ a ete change</span>
<a name="l01092"></a>01092 <span class="comment">//</span><span class="comment"></span>
<a name="l01093"></a>01093 <span class="comment">//! Fixe le temps auquel se situe le champ</span>
<a name="l01094"></a>01094 <span class="comment"></span><span class="comment">/** \return double&lt;br&gt;</span>
<a name="l01095"></a>01095 <span class="comment">Signification: le nouveau temps auquel se situe le champ&lt;br&gt;</span>
<a name="l01096"></a>01096 <span class="comment">Contraintes: */</span>
<a name="l01097"></a><a class="code" href="classChamp__base.html#ab4fdc6fb46c5e4efe2f931ceadd66979">01097</a> <span class="keywordtype">double</span> <a class="code" href="classChamp__base.html#ab4fdc6fb46c5e4efe2f931ceadd66979" title="Fixe le temps auquel se situe le champ.">Champ_base::changer_temps</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>&amp; t)
<a name="l01098"></a>01098 {
<a name="l01099"></a>01099   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a06a74ef2b02796a933b9b0702d073af9">temps_</a> = t ;
<a name="l01100"></a>01100 }
<a name="l01101"></a>01101 
<a name="l01102"></a>01102 <span class="comment">// Precondition:</span>
<a name="l01103"></a>01103 <span class="comment">// Parametre:</span>
<a name="l01104"></a>01104 <span class="comment">// Signification:</span>
<a name="l01105"></a>01105 <span class="comment">// Valeurs par defaut:</span>
<a name="l01106"></a>01106 <span class="comment">// Contraintes:</span>
<a name="l01107"></a>01107 <span class="comment">// Acces:</span>
<a name="l01108"></a>01108 <span class="comment">// Exception:</span>
<a name="l01109"></a>01109 <span class="comment">// Effets de bord:</span>
<a name="l01110"></a>01110 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01111"></a>01111 <span class="comment">//</span><span class="comment"></span>
<a name="l01112"></a>01112 <span class="comment">//! Renvoie le temps du champ</span>
<a name="l01113"></a>01113 <span class="comment"></span><span class="comment">/** \return double&lt;br&gt;</span>
<a name="l01114"></a>01114 <span class="comment">Signification: le temps du champ&lt;br&gt;</span>
<a name="l01115"></a>01115 <span class="comment">Contraintes: */</span>
<a name="l01116"></a><a class="code" href="classChamp__base.html#ada7350aecb7b6f20dcaee2d1106ab1a0">01116</a> <span class="keywordtype">double</span> <a class="code" href="classChamp__base.html#ada7350aecb7b6f20dcaee2d1106ab1a0" title="Renvoie le temps du champ.">Champ_base::temps</a>()<span class="keyword"> const</span>
<a name="l01117"></a>01117 <span class="keyword"></span>{
<a name="l01118"></a>01118   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a06a74ef2b02796a933b9b0702d073af9">temps_</a> ;
<a name="l01119"></a>01119 }
<a name="l01120"></a>01120 
<a name="l01121"></a>01121 
<a name="l01122"></a>01122 
<a name="l01123"></a><a class="code" href="classChamp__base.html#a2d65769ae6c575da09e360ebb22ea706">01123</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__base.html#a2d65769ae6c575da09e360ebb22ea706">Champ_base::fixer_nb_valeurs_nodales</a>(<span class="keywordtype">int</span> n)
<a name="l01124"></a>01124 {
<a name="l01125"></a>01125   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Champ_base::fixer_nb_valeurs_nodales\n &quot;</span>;
<a name="l01126"></a>01126   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; does not have nb_valeurs_nodales&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01127"></a>01127   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01128"></a>01128   <span class="keywordflow">return</span> 0;
<a name="l01129"></a>01129 }
<a name="l01130"></a>01130 
<a name="l01131"></a>01131 <span class="comment">// Tous les champs n&#39;ont pas de zone_dis_base. Pour ceux qui</span>
<a name="l01132"></a>01132 <span class="comment">// n&#39;en ont pas, l&#39;appel est invalide.</span>
<a name="l01133"></a><a class="code" href="classChamp__base.html#aa7eeff006a19043329b9e4a20913345d">01133</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__base.html#aa7eeff006a19043329b9e4a20913345d">Champ_base::associer_zone_dis_base</a>(<span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis)
<a name="l01134"></a>01134 {
<a name="l01135"></a>01135   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_base::associer_zone_dis_base\n&quot;</span>;
<a name="l01136"></a>01136   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; (field name : &quot;</span> &lt;&lt; <a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
<a name="l01137"></a>01137   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; The method &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l01138"></a>01138   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::associer_zone_dis_base is not coded\n&quot;</span>;
<a name="l01139"></a>01139   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; or the field does not possess a zone_dis_base.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01140"></a>01140   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01141"></a>01141 }
<a name="l01142"></a>01142 
<a name="l01143"></a>01143 <span class="comment">// Tous les champs n&#39;ont pas de zone_dis_base. Pour ceux qui</span>
<a name="l01144"></a>01144 <span class="comment">// n&#39;en ont pas, l&#39;appel est invalide.</span>
<a name="l01145"></a><a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">01145</a> <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; <a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">Champ_base::zone_dis_base</a>()<span class="keyword"> const</span>
<a name="l01146"></a>01146 <span class="keyword"></span>{
<a name="l01147"></a>01147   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_base::zone_dis_base\n&quot;</span>;
<a name="l01148"></a>01148   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; (field name : &quot;</span> &lt;&lt; <a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
<a name="l01149"></a>01149   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; The method &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l01150"></a>01150   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;::zone_dis_base is not coded\n&quot;</span>;
<a name="l01151"></a>01151   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; or the field does not possess a zone_dis_base.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01152"></a>01152   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01153"></a>01153   <span class="keywordflow">throw</span>;
<a name="l01154"></a>01154   <span class="keywordflow">return</span> <a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>();
<a name="l01155"></a>01155 }
<a name="l01156"></a>01156 
<a name="l01157"></a>01157 
<a name="l01158"></a>01158 <span class="comment">// Precondition: x doit etre dimensionne</span>
<a name="l01159"></a>01159 <span class="comment">// Parametre: Frontiere_dis_base&amp;</span>
<a name="l01160"></a>01160 <span class="comment">// Signification: frontiere discretisee sur laquelle on veut</span>
<a name="l01161"></a>01161 <span class="comment">// calculer la trace du champ au temps tps</span>
<a name="l01162"></a>01162 <span class="comment">// Valeurs par defaut:</span>
<a name="l01163"></a>01163 <span class="comment">// Contraintes: reference constante</span>
<a name="l01164"></a>01164 <span class="comment">// Acces: entree</span>
<a name="l01165"></a>01165 <span class="comment">// Parametre: DoubleTab&amp; x , double tps</span>
<a name="l01166"></a>01166 <span class="comment">// Signification: les valeurs du champ sur la frontiere au temps tps</span>
<a name="l01167"></a>01167 <span class="comment">// Valeurs par defaut:</span>
<a name="l01168"></a>01168 <span class="comment">// Contraintes:</span>
<a name="l01169"></a>01169 <span class="comment">// Acces: entree/sortie</span>
<a name="l01170"></a>01170 <span class="comment">// Exception:</span>
<a name="l01171"></a>01171 <span class="comment">// Effets de bord:</span>
<a name="l01172"></a>01172 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01173"></a>01173 <span class="comment">//</span>
<a name="l01174"></a>01174 <span class="comment">//</span>
<a name="l01175"></a>01175 <span class="comment">//</span>
<a name="l01176"></a>01176 <span class="comment">//</span>
<a name="l01177"></a>01177 <span class="comment">//</span>
<a name="l01178"></a>01178 <span class="comment">//</span>
<a name="l01179"></a>01179 <span class="comment">//</span>
<a name="l01180"></a>01180 <span class="comment">//</span>
<a name="l01181"></a>01181 <span class="comment">//</span>
<a name="l01182"></a>01182 <span class="comment">//</span>
<a name="l01183"></a>01183 <span class="comment">//</span>
<a name="l01184"></a>01184 <span class="comment">//</span>
<a name="l01185"></a>01185 <span class="comment">//</span>
<a name="l01186"></a>01186 <span class="comment">//</span>
<a name="l01187"></a>01187 <span class="comment">//</span><span class="comment"></span>
<a name="l01188"></a>01188 <span class="comment">//! Calcule la trace d&#39;un champ sur une frontiere au temps tps&lt;br&gt;WEC :&lt;br&gt;La frontiere passee en parametre doit faire partie du domaine&lt;br&gt;sur lequel s&#39;appuie le champ&lt;br&gt;Le resultat est calcule sur cette frontiere et la taille du&lt;br&gt;DoubleTab x correspond au nombre de faces de la frontiere.&lt;br&gt;x peut avoir un espace virtuel, la fonction trace apelle&lt;br&gt;echange_espace_virtuel.&lt;br&gt;Cas particulier (malheureusement) du Champ_P0_VDF :&lt;br&gt;Si la frontiere est un raccord, le resultat est calcule sur le&lt;br&gt;raccord associe. Dans ce cas, le DoubleTab x doit etre&lt;br&gt;dimensionne sur le raccord associe.</span>
<a name="l01189"></a>01189 <span class="comment"></span><span class="comment">/** \return DoubleTab\&amp;&lt;br&gt;</span>
<a name="l01190"></a>01190 <span class="comment">Signification: les valeurs du champ sur la frontiere au temps tps&lt;br&gt;</span>
<a name="l01191"></a>01191 <span class="comment">Contraintes: */</span>
<a name="l01192"></a><a class="code" href="classChamp__base.html#a83df737d90c399a4be9139e665e95e86">01192</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__base.html#a83df737d90c399a4be9139e665e95e86" title="Calcule la trace d&#39;un champ sur une frontiere au temps tps WEC : La frontiere passee en parametre doi...">Champ_base::trace</a>(<span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; , <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; x , <span class="keywordtype">double</span> tps,<span class="keywordtype">int</span> distant)<span class="keyword"> const</span>
<a name="l01193"></a>01193 <span class="keyword"></span>{
<a name="l01194"></a>01194   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot;did not overloaded Champ_base::trace&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01195"></a>01195   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01196"></a>01196   <span class="keywordflow">return</span> x;
<a name="l01197"></a>01197 }
<a name="l01198"></a>01198 
<a name="l01199"></a>01199 
<a name="l01200"></a>01200 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:14 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
