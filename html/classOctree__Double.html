<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: Octree_Double Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Octree_Double Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Octree_Double" -->
<p>: Un octree permettant de chercher dans l'espace des elements ou des points<br/>
decrits par des coordonnees reeles. Cet objet est base sur <a class="el" href="classOctree__Int.html" title=": Un octree permettant de retrouver des objets ponctuels ou parallelipipediques dans un espace 1D...">Octree_Int</a>.<br/>
Astuces:<br/>
Pour chercher des points a epsilon pres on peut faire:<br/>
1) build_nodes(coord, include_virt, 0.)<br/>
suivi de<br/>
search_elements_box(center, epsilon, elements);<br/>
2) build_nodes(coord, include_virt, epsilon)<br/>
suivi de<br/>
search_elements(x,y,z,...)<br/>
La premiere solution prend plus de temps pour construire l'octree mais la recherche est plus rapide<br/>
La deuxieme, c'est inverse... et on peut choisir epsilon pour chaque point.  
 <a href="classOctree__Double.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a>&gt;</code></p>

<p><a href="classOctree__Double-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#aa396509216943165ab667b2505a0d84a">Octree_Double</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a0aad22116fdb1370d145bdebe48cba67">reset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#ab5330557a89008bbd0f9704a6ff53586">build_elements</a> (const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;coords, const <a class="el" href="classIntTab.html">IntTab</a> &amp;elements, const double epsilon, const int include_virtual)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Construit un octree a partir d'elements volumiques decrits par des<br/>
ensembles de sommets. On stocke dans l'octree les parallelipipdes englobant chaque<br/>
element (contenant tous les sommets de l'element) plus une marge de epsilon.<br/>
Si include_virtual=1, on stocke elements.dimension_tot(0) elements, sinon on en<br/>
stocke elements.dimension(0)  <a href="#ab5330557a89008bbd0f9704a6ff53586"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a0b66bd315e7f45a024695b6a2764e7d4">build_nodes</a> (const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;coords, const int include_virtual, const double epsilon=0.)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">construit un octree contenant les points de coordonnees coords.<br/>
Si include_virtual=1, on stocke coords.dimension_tot(0) elements, sinon on en<br/>
stocke coords.dimension(0)<br/>
Si epsilon = 0, on construit un octree de points de taille nulle (chaque point<br/>
se trouve dans un seul octree_floor)<br/>
Sinon, on construit un octree d'elements cubiques centres sur les coords, de demie-largeur epsilon.<br/>
Un point peut alors se trouver dans plusieurs octree_floor.  <a href="#a0b66bd315e7f45a024695b6a2764e7d4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a66fb0c0bc01ad9c24ca23405a31c2aec">search_elements</a> (double x, double y, double z, int &amp;index) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">cherche les elements ou les points contenus dans l'octree_floor qui<br/>
contient le point (x,y,z). Renvoie le nombre n de ces elements.<br/>
Les indices des elements sont dans <a class="el" href="classOctree__Double.html#a54f3f6f6126f1bc9d3761816f6e5f89d">floor_elements()</a>[index+i] pour 0 &lt;= i &lt; n  <a href="#a66fb0c0bc01ad9c24ca23405a31c2aec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a1dffcace51ca06cb52ff6e2330ab4b2e">search_elements_box</a> (double xmin, double ymin, double zmin, double xmax, double ymax, double zmax, <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;elements) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">cherche tous les elements ou points ayant potentiellement une intersection<br/>
non vide avec la boite donnee.  <a href="#a1dffcace51ca06cb52ff6e2330ab4b2e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a6a68f3b564a3bfdc4f00888a791fde5b">search_elements_box</a> (const <a class="el" href="classArrOfDouble.html">ArrOfDouble</a> &amp;center, const double radius, <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;elements) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">cherche tous les elements ou points ayant potentiellement une intersection<br/>
non vide avec la boite donnee (centre + ou - radius dans chaque direction)  <a href="#a6a68f3b564a3bfdc4f00888a791fde5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#ae6da729ef51eee72271f1c8dbd88b69d">dimension</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a54f3f6f6126f1bc9d3761816f6e5f89d">floor_elements</a> () const </td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a8ba1f6ceba5dae2af587d2f9a766aac2">search_nodes_close_to</a> (double x, double y, double z, const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;coords, <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;node_list, double epsilon)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Methode hors classe<br/>
Cherche parmi les sommets de la liste node_list ceux qui sont a une<br/>
distance inferieure a epsilon du point (x,y,z). node_list contient des indices de<br/>
sommets dans le tableau coords. La liste des noeuds verifiant le critere est mise<br/>
dans node_list. On renvoie l'indice dans le tableau coords du sommet le plus proche.  <a href="#a8ba1f6ceba5dae2af587d2f9a766aac2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#ae12d867f921aeecab588bb5ad93a5ea2">search_nodes_close_to</a> (const <a class="el" href="classArrOfDouble.html">ArrOfDouble</a> &amp;point, const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;coords, <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;node_list, double epsilon)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Idem que search_nodes_close_to(double x, double y, double z, ...)  <a href="#ae12d867f921aeecab588bb5ad93a5ea2"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a3089a54a38fa0427b21b88269132b6e7">integer_position</a> (double x, int direction, int &amp;ix) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convertit une coordonnees reele en coordonnee entiere pour l'octree_int<br/>
Valeur de retour: 1 si ok, 0 si coordonnee hors de l'octree.  <a href="#a3089a54a38fa0427b21b88269132b6e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a645a4fc29a5aa58e41d3b499bc01063f">integer_position_clip</a> (double xmin, double xmax, int &amp;x0, int &amp;x1, int direction) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a98ebc150677b4fe512af47e71d755405">compute_origin_factors</a> (const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;coords, const double epsilon, const int include_virtual)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">methode outil pour build_nodes et build_elements<br/>
(calcul des facteurs de conversion entre reels et entiers pour <a class="el" href="classOctree__Int.html" title=": Un octree permettant de retrouver des objets ponctuels ou parallelipipediques dans un espace 1D...">Octree_Int</a><br/>
epsilon est ajoute aux coordonnees min et max pour la bounding box de l'octree.  <a href="#a98ebc150677b4fe512af47e71d755405"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOctree__Int.html">Octree_Int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classArrOfDouble.html">ArrOfDouble</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#a7b41af8dd3c5063e37ab2a8c04e5ce5d">origin_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classArrOfDouble.html">ArrOfDouble</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">factor_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">dim_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>: Un octree permettant de chercher dans l'espace des elements ou des points<br/>
decrits par des coordonnees reeles. Cet objet est base sur <a class="el" href="classOctree__Int.html" title=": Un octree permettant de retrouver des objets ponctuels ou parallelipipediques dans un espace 1D...">Octree_Int</a>.<br/>
Astuces:<br/>
Pour chercher des points a epsilon pres on peut faire:<br/>
1) build_nodes(coord, include_virt, 0.)<br/>
suivi de<br/>
search_elements_box(center, epsilon, elements);<br/>
2) build_nodes(coord, include_virt, epsilon)<br/>
suivi de<br/>
search_elements(x,y,z,...)<br/>
La premiere solution prend plus de temps pour construire l'octree mais la recherche est plus rapide<br/>
La deuxieme, c'est inverse... et on peut choisir epsilon pour chaque point. </p>

<p>Definition at line <a class="el" href="Octree__Double_8h_source.html#l00041">41</a> of file <a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa396509216943165ab667b2505a0d84a"></a><!-- doxytag: member="Octree_Double::Octree_Double" ref="aa396509216943165ab667b2505a0d84a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Octree_Double::Octree_Double </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00025">25</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Double_8h_source.html#l00083">dim_</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">dim_</a> = 0;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab5330557a89008bbd0f9704a6ff53586"></a><!-- doxytag: member="Octree_Double::build_elements" ref="ab5330557a89008bbd0f9704a6ff53586" args="(const DoubleTab &amp;coords, const IntTab &amp;elements, const double epsilon, const int include_virtual)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Octree_Double::build_elements </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIntTab.html">IntTab</a> &amp;&#160;</td>
          <td class="paramname"><em>elements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>include_virtual</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construit un octree a partir d'elements volumiques decrits par des<br/>
ensembles de sommets. On stocke dans l'octree les parallelipipdes englobant chaque<br/>
element (contenant tous les sommets de l'element) plus une marge de epsilon.<br/>
Si include_virtual=1, on stocke elements.dimension_tot(0) elements, sinon on en<br/>
stocke elements.dimension(0) </p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00205">205</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8cpp_source.html#l00088">Octree_Int::build()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00102">compute_origin_factors()</a>, <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="IntTab_8h_source.html#l00233">IntTab::dimension()</a>, <a class="el" href="IntTab_8h_source.html#l00244">IntTab::dimension_tot()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00040">integer_position()</a>, <a class="el" href="Array__base_8h_source.html#l00038">Array_base::NOCOPY_NOINIT</a>, <a class="el" href="Octree__Double_8h_source.html#l00079">octree_int_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00290">Octree_Int::reset()</a>, and <a class="el" href="IntTab_8cpp_source.html#l00353">IntTab::resize()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Zone_8cpp_source.html#l00032">Octree_Zone::build()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a>.<a class="code" href="classOctree__Int.html#aa4816ea0fb496ee0b1b590d49d92bad6">reset</a>();
  <a class="code" href="classOctree__Double.html#a98ebc150677b4fe512af47e71d755405" title="methode outil pour build_nodes et build_elements (calcul des facteurs de conversion entre reels et en...">compute_origin_factors</a>(coords, epsilon, include_virtual);

  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_elems = include_virtual ? elements.<a class="code" href="classIntTab.html#a71e9b9ddc1793094b1b3f109377952b1" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) : elements.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_som_elem = elements.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <span class="keyword">const</span> <span class="keywordtype">int</span> dim = coords.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> elements_boxes;
  elements_boxes.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_elems, dim * 2, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_elems; i++)
    {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; dim; j++)
        {
          <span class="keywordtype">double</span> xmin = 1.e37;
          <span class="keywordtype">double</span> xmax = -1.e37;
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; nb_som_elem; k++)
            {
              <span class="keyword">const</span> <span class="keywordtype">int</span> som = elements(i, k);
              <span class="keyword">const</span> <span class="keywordtype">double</span> x = coords(som, j);
              xmin = (x&lt;xmin) ? x : xmin;
              xmax = (x&gt;xmax) ? x : xmax;
            }
          <span class="keywordtype">int</span> pos1 = 0, pos2 = 0;
          <span class="keywordflow">if</span> (!<a class="code" href="classOctree__Double.html#a3089a54a38fa0427b21b88269132b6e7" title="Convertit une coordonnees reele en coordonnee entiere pour l&#39;octree_int Valeur de retour: 1 si ok...">integer_position</a>(xmin, j, pos1) || !<a class="code" href="classOctree__Double.html#a3089a54a38fa0427b21b88269132b6e7" title="Convertit une coordonnees reele en coordonnee entiere pour l&#39;octree_int Valeur de retour: 1 si ok...">integer_position</a>(xmax, j, pos2))
            {
              <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Fatal error in octree : integer position outside octree&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
              <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
            }
          elements_boxes(i, j) = pos1;
          elements_boxes(i, j+dim) = pos2;
        }
    }
  <a class="code" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a>.<a class="code" href="classOctree__Int.html#a5a0ea54ef0a1e354d35ac53eb4f743b0" title="construction de l&#39;octree. On donne la dimension (1, 2 ou 3) et un tableau d&#39;elements a stocker dans l...">build</a>(dim, elements_boxes);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0b66bd315e7f45a024695b6a2764e7d4"></a><!-- doxytag: member="Octree_Double::build_nodes" ref="a0b66bd315e7f45a024695b6a2764e7d4" args="(const DoubleTab &amp;coords, const int include_virtual, const double epsilon=0.)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Octree_Double::build_nodes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>include_virtual</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>epsilon</em> = <code>0.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>construit un octree contenant les points de coordonnees coords.<br/>
Si include_virtual=1, on stocke coords.dimension_tot(0) elements, sinon on en<br/>
stocke coords.dimension(0)<br/>
Si epsilon = 0, on construit un octree de points de taille nulle (chaque point<br/>
se trouve dans un seul octree_floor)<br/>
Sinon, on construit un octree d'elements cubiques centres sur les coords, de demie-largeur epsilon.<br/>
Un point peut alors se trouver dans plusieurs octree_floor. </p>

<p><p>&lt; octree vide </p>
</p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00154">154</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8cpp_source.html#l00088">Octree_Int::build()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00102">compute_origin_factors()</a>, <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="DoubleTab_8h_source.html#l00254">DoubleTab::dimension_tot()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00040">integer_position()</a>, <a class="el" href="Array__base_8h_source.html#l00038">Array_base::NOCOPY_NOINIT</a>, <a class="el" href="Octree__Double_8h_source.html#l00079">octree_int_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00290">Octree_Int::reset()</a>, and <a class="el" href="IntTab_8cpp_source.html#l00353">IntTab::resize()</a>.</p>

<p>Referenced by <a class="el" href="Debog_8cpp_source.html#l00311">Debog_Pb::add_renum_item()</a>, <a class="el" href="Domaine_8cpp_source.html#l00259">Domaine::ajouter()</a>, <a class="el" href="Moyenne__volumique_8cpp_source.html#l00548">Calcul_integrale_locale::Calcul_integrale_locale()</a>, <a class="el" href="Corriger__frontiere__periodique_8cpp_source.html#l00135">Corriger_frontiere_periodique::corriger_coordonnees_sommets_perio()</a>, <a class="el" href="MaillerParallel_8cpp_source.html#l00232">find_matching_coordinates()</a>, <a class="el" href="Champ__implementation__P1_8cpp_source.html#l00165">Champ_implementation_P1::init_from_file()</a>, <a class="el" href="Redresser__hexaedres__vdf_8cpp_source.html#l00042">Redresser_hexaedres_vdf::interpreter_()</a>, <a class="el" href="Zone__VEF__PreP1b_8cpp_source.html#l00810">Zone_VEF_PreP1b::lecture_ok_arete()</a>, <a class="el" href="EcritureLectureSpecial_8cpp_source.html#l00328">lire_special()</a>, and <a class="el" href="Reordonner__faces__periodiques_8cpp_source.html#l00114">Reordonner_faces_periodiques::reordonner_faces_periodiques()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a>.<a class="code" href="classOctree__Int.html#aa4816ea0fb496ee0b1b590d49d92bad6">reset</a>();
  <a class="code" href="classOctree__Double.html#a98ebc150677b4fe512af47e71d755405" title="methode outil pour build_nodes et build_elements (calcul des facteurs de conversion entre reels et en...">compute_origin_factors</a>(coords, epsilon, include_virtual);
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_som = include_virtual ? coords.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) : coords.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
  <span class="keywordflow">if</span> (nb_som == 0)
    <span class="keywordflow">return</span>; <span class="comment">//!&lt; octree vide</span>
<span class="comment"></span>  <span class="keyword">const</span> <span class="keywordtype">int</span> dim = coords.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <span class="keywordflow">if</span> (epsilon &lt; 0.)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in Octree_Double::build_nodes: negative epsilon&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="keywordtype">int</span> have_epsilon = (epsilon == 0.) ? 0 : 1;
  <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> elements_boxes;
  elements_boxes.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_som, have_epsilon ? (dim*2) : dim, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_som; i++)
    {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; dim; j++)
        {
          <span class="keywordtype">int</span> pos1 = 0;
          <span class="keyword">const</span> <span class="keywordtype">double</span> x0 = coords(i, j);
          <span class="keywordtype">double</span> x = x0 - epsilon;
          <span class="keywordflow">if</span> (!<a class="code" href="classOctree__Double.html#a3089a54a38fa0427b21b88269132b6e7" title="Convertit une coordonnees reele en coordonnee entiere pour l&#39;octree_int Valeur de retour: 1 si ok...">integer_position</a>(x, j, pos1))
            {
              <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Fatal error in octree : integer position outside octree&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
              <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
            }
          elements_boxes(i, j) = pos1;
          <span class="keywordflow">if</span> (have_epsilon)
            {
              pos1 = 0;
              <span class="keywordtype">double</span> xbis = x0 + epsilon;
              <span class="keywordflow">if</span> (!<a class="code" href="classOctree__Double.html#a3089a54a38fa0427b21b88269132b6e7" title="Convertit une coordonnees reele en coordonnee entiere pour l&#39;octree_int Valeur de retour: 1 si ok...">integer_position</a>(xbis, j, pos1))
                {
                  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Fatal error in octree : integer position outside octree&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
                  <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
                }
              elements_boxes(i, dim+j) = pos1;
            }
        }
    }
  <a class="code" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a>.<a class="code" href="classOctree__Int.html#a5a0ea54ef0a1e354d35ac53eb4f743b0" title="construction de l&#39;octree. On donne la dimension (1, 2 ou 3) et un tableau d&#39;elements a stocker dans l...">build</a>(dim, elements_boxes);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98ebc150677b4fe512af47e71d755405"></a><!-- doxytag: member="Octree_Double::compute_origin_factors" ref="a98ebc150677b4fe512af47e71d755405" args="(const DoubleTab &amp;coords, const double epsilon, const int include_virtual)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Octree_Double::compute_origin_factors </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>epsilon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>include_virtual</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>methode outil pour build_nodes et build_elements<br/>
(calcul des facteurs de conversion entre reels et entiers pour <a class="el" href="classOctree__Int.html" title=": Un octree permettant de retrouver des objets ponctuels ou parallelipipediques dans un espace 1D...">Octree_Int</a><br/>
epsilon est ajoute aux coordonnees min et max pour la bounding box de l'octree. </p>

<p><p>&lt; octree vide </p>
</p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00102">102</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00045">Octree_Int::coord_max_</a>, <a class="el" href="Octree__Double_8h_source.html#l00083">dim_</a>, <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="DoubleTab_8h_source.html#l00254">DoubleTab::dimension_tot()</a>, <a class="el" href="Octree__Double_8h_source.html#l00082">factor_</a>, <a class="el" href="Octree__Double_8h_source.html#l00081">origin_</a>, and <a class="el" href="ArrOfDouble_8h_source.html#l00244">ArrOfDouble::resize_array()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00205">build_elements()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00154">build_nodes()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// Recherche des coordonnees min et max du domaine</span>
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_som = include_virtual ? coords.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) : coords.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
  <span class="keywordflow">if</span> (nb_som == 0)
    <span class="keywordflow">return</span>; <span class="comment">//!&lt; octree vide</span>
<span class="comment"></span>
  <span class="keyword">const</span> <span class="keywordtype">int</span> dim = coords.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <a class="code" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">dim_</a> = dim;
  <a class="code" href="classOctree__Double.html#a7b41af8dd3c5063e37ab2a8c04e5ce5d">origin_</a>.<a class="code" href="classArrOfDouble.html#a610464f4b3dccac6f814915b526783ed">resize_array</a>(3);
  <a class="code" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">factor_</a>.<a class="code" href="classArrOfDouble.html#a610464f4b3dccac6f814915b526783ed">resize_array</a>(3);
  <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> xmin(dim);
  xmin= 1.e37;
  <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> xmax(dim);
  xmax= -1.e-37;
  assert(dim &gt;= 1 &amp;&amp; dim &lt;= 3);
  <span class="keywordtype">int</span> i, j;
  <span class="keywordflow">for</span> (i = 0; i &lt; nb_som; i++)
    {
      <span class="keywordflow">for</span> (j = 0; j &lt; dim; j++)
        {
          <span class="keyword">const</span> <span class="keywordtype">double</span> x = coords(i, j);
          <span class="keywordflow">if</span> (x &lt; xmin[j])
            xmin[j] = x;
          <span class="keywordflow">if</span> (x &gt; xmax[j])
            xmax[j] = x;
        }
    }
  <span class="keyword">const</span> <span class="keywordtype">double</span> coord_max = (double) <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">Octree_Int::coord_max_</a>;
  <span class="keywordflow">for</span> (j = 0; j &lt; dim; j++)
    {
      xmin[j] -= epsilon;
      xmax[j] += epsilon;
      <a class="code" href="classOctree__Double.html#a7b41af8dd3c5063e37ab2a8c04e5ce5d">origin_</a>[j] = xmin[j];
      <span class="keywordflow">if</span> (xmax[j] - xmin[j] &gt; 0.)
        {
          <a class="code" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">factor_</a>[j] = coord_max / (xmax[j] - xmin[j]);
        }
      <span class="keywordflow">else</span>
        <a class="code" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">factor_</a>[j] = 0.;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6da729ef51eee72271f1c8dbd88b69d"></a><!-- doxytag: member="Octree_Double::dimension" ref="ae6da729ef51eee72271f1c8dbd88b69d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Double::dimension </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8h_source.html#l00061">61</a> of file <a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a>.</p>

<p>References <a class="el" href="Octree__Double_8h_source.html#l00083">dim_</a>.</p>
<div class="fragment"><pre class="fragment">  {
    assert(<a class="code" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">dim_</a> &gt; 0);
    <span class="keywordflow">return</span> <a class="code" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">dim_</a>;
  }
</pre></div>
</div>
</div>
<a class="anchor" id="a54f3f6f6126f1bc9d3761816f6e5f89d"></a><!-- doxytag: member="Octree_Double::floor_elements" ref="a54f3f6f6126f1bc9d3761816f6e5f89d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classArrOfInt.html">ArrOfInt</a>&amp; Octree_Double::floor_elements </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8h_source.html#l00066">66</a> of file <a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00042">Octree_Int::floor_elements()</a>, and <a class="el" href="Octree__Double_8h_source.html#l00079">octree_int_</a>.</p>

<p>Referenced by <a class="el" href="Octree__Zone_8cpp_source.html#l00055">Octree_Zone::find_elements()</a>, and <a class="el" href="EcritureLectureSpecial_8cpp_source.html#l00328">lire_special()</a>.</p>
<div class="fragment"><pre class="fragment">  {
    <span class="keywordflow">return</span> <a class="code" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a>.<a class="code" href="classOctree__Int.html#a80e72913238e8489d9f90ece56e780d6">floor_elements</a>();
  };
</pre></div>
</div>
</div>
<a class="anchor" id="a3089a54a38fa0427b21b88269132b6e7"></a><!-- doxytag: member="Octree_Double::integer_position" ref="a3089a54a38fa0427b21b88269132b6e7" args="(double x, int direction, int &amp;ix) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Double::integer_position </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>ix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convertit une coordonnees reele en coordonnee entiere pour l'octree_int<br/>
Valeur de retour: 1 si ok, 0 si coordonnee hors de l'octree. </p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00040">40</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00045">Octree_Int::coord_max_</a>, <a class="el" href="Octree__Double_8h_source.html#l00082">factor_</a>, and <a class="el" href="Octree__Double_8h_source.html#l00081">origin_</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00205">build_elements()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00154">build_nodes()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00081">search_elements()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">double</span> coord_max = (double) <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">Octree_Int::coord_max_</a>;
  <span class="keywordtype">double</span> rnd_x = (x - <a class="code" href="classOctree__Double.html#a7b41af8dd3c5063e37ab2a8c04e5ce5d">origin_</a>[direction]) * <a class="code" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">factor_</a>[direction];
<span class="comment">// 0.49 permet d&#39;accepter une coordonnee x egale a xmin ou xmax de l&#39;octree,</span>
<span class="comment">// sinon pour un octree cree a partir de sommets, il y a un risque</span>
<span class="comment">// de ne pas trouver les coordonnees des points qu&#39;on avait mis au bord de l&#39;octree.</span>
  <span class="keywordflow">if</span> (rnd_x &gt;= -0.49 &amp;&amp; rnd_x &lt;= coord_max + 0.49)
    {
      ix = (int) floor(rnd_x + 0.5);
      <span class="keywordflow">return</span> 1;
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a645a4fc29a5aa58e41d3b499bc01063f"></a><!-- doxytag: member="Octree_Double::integer_position_clip" ref="a645a4fc29a5aa58e41d3b499bc01063f" args="(double xmin, double xmax, int &amp;x0, int &amp;x1, int direction) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Double::integer_position_clip </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>x0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>x1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00056">56</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00045">Octree_Int::coord_max_</a>, <a class="el" href="Octree__Double_8h_source.html#l00082">factor_</a>, and <a class="el" href="Octree__Double_8h_source.html#l00081">origin_</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00244">search_elements_box()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">double</span> coord_max = (double) <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">Octree_Int::coord_max_</a>;
  xmin = (xmin - <a class="code" href="classOctree__Double.html#a7b41af8dd3c5063e37ab2a8c04e5ce5d">origin_</a>[direction]) * <a class="code" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">factor_</a>[direction];
  xmax = (xmax - <a class="code" href="classOctree__Double.html#a7b41af8dd3c5063e37ab2a8c04e5ce5d">origin_</a>[direction]) * <a class="code" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">factor_</a>[direction];
<span class="comment">// pas de marge ici comme on cherche avec une boite, l&#39;epsilon est deja</span>
<span class="comment">// dans la dimension de la boite.</span>
  <span class="keywordflow">if</span> (xmin &gt; coord_max || xmax &lt; 0.)
    <span class="keywordflow">return</span> 0;
  <span class="keywordflow">if</span> (xmin &lt; .0)
    x0 = 0;
  <span class="keywordflow">else</span>
    x0 = (int) (floor(xmin+0.5));
  <span class="keywordflow">if</span> (xmax &gt; coord_max)
    x1 = <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">Octree_Int::coord_max_</a>;
  <span class="keywordflow">else</span>
    x1 = (int) (floor(xmax+0.5));
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0aad22116fdb1370d145bdebe48cba67"></a><!-- doxytag: member="Octree_Double::reset" ref="a0aad22116fdb1370d145bdebe48cba67" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Octree_Double::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00030">30</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Double_8h_source.html#l00083">dim_</a>, <a class="el" href="Octree__Double_8h_source.html#l00082">factor_</a>, <a class="el" href="Octree__Double_8h_source.html#l00079">octree_int_</a>, <a class="el" href="Octree__Double_8h_source.html#l00081">origin_</a>, <a class="el" href="ArrOfDouble_8cpp_source.html#l00451">ArrOfDouble::reset()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00290">Octree_Int::reset()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Zone_8cpp_source.html#l00025">Octree_Zone::reset()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">dim_</a> = 0;
  <a class="code" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a>.<a class="code" href="classOctree__Int.html#aa4816ea0fb496ee0b1b590d49d92bad6">reset</a>();
  <a class="code" href="classOctree__Double.html#a7b41af8dd3c5063e37ab2a8c04e5ce5d">origin_</a>.<a class="code" href="classArrOfDouble.html#a8c937710d2664d65500f24ce5f7e0ce0" title="Remet le tableau dans l&#39;etat obtenu avec le constructeur par defaut (libere la memoire mais conserve ...">reset</a>();
  <a class="code" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">factor_</a>.<a class="code" href="classArrOfDouble.html#a8c937710d2664d65500f24ce5f7e0ce0" title="Remet le tableau dans l&#39;etat obtenu avec le constructeur par defaut (libere la memoire mais conserve ...">reset</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a66fb0c0bc01ad9c24ca23405a31c2aec"></a><!-- doxytag: member="Octree_Double::search_elements" ref="a66fb0c0bc01ad9c24ca23405a31c2aec" args="(double x, double y, double z, int &amp;index) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Double::search_elements </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cherche les elements ou les points contenus dans l'octree_floor qui<br/>
contient le point (x,y,z). Renvoie le nombre n de ces elements.<br/>
Les indices des elements sont dans <a class="el" href="classOctree__Double.html#a54f3f6f6126f1bc9d3761816f6e5f89d">floor_elements()</a>[index+i] pour 0 &lt;= i &lt; n </p>

<p><p>&lt; octree vide </p>
</p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00081">81</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Double_8h_source.html#l00083">dim_</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00040">integer_position()</a>, <a class="el" href="Octree__Double_8h_source.html#l00079">octree_int_</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00131">Octree_Int::search_elements()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Zone_8cpp_source.html#l00055">Octree_Zone::find_elements()</a>, and <a class="el" href="EcritureLectureSpecial_8cpp_source.html#l00328">lire_special()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">dim_</a> == 0)
    <span class="keywordflow">return</span> 0; <span class="comment">//!&lt; octree vide</span>
<span class="comment"></span>  <span class="keywordtype">int</span> ix = 0, iy = 0, iz = 0;
  <span class="keywordtype">int</span> ok = <a class="code" href="classOctree__Double.html#a3089a54a38fa0427b21b88269132b6e7" title="Convertit une coordonnees reele en coordonnee entiere pour l&#39;octree_int Valeur de retour: 1 si ok...">integer_position</a>(x, 0, ix)
           &amp;&amp; <a class="code" href="classOctree__Double.html#a3089a54a38fa0427b21b88269132b6e7" title="Convertit une coordonnees reele en coordonnee entiere pour l&#39;octree_int Valeur de retour: 1 si ok...">integer_position</a>(y, 1, iy)
           &amp;&amp; <a class="code" href="classOctree__Double.html#a3089a54a38fa0427b21b88269132b6e7" title="Convertit une coordonnees reele en coordonnee entiere pour l&#39;octree_int Valeur de retour: 1 si ok...">integer_position</a>(z, 2, iz);
  <span class="keywordflow">if</span> (ok)
    {
      <span class="keywordflow">return</span> <a class="code" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a>.<a class="code" href="classOctree__Int.html#ab999fee7a1cd43e79011f0013b499a54" title="renvoie la liste des elements contenant potentiellement le point (x,y,z) On renvoie n=nombre d&#39;elemen...">search_elements</a>(ix, iy, iz, index);
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">return</span> 0;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1dffcace51ca06cb52ff6e2330ab4b2e"></a><!-- doxytag: member="Octree_Double::search_elements_box" ref="a1dffcace51ca06cb52ff6e2330ab4b2e" args="(double xmin, double ymin, double zmin, double xmax, double ymax, double zmax, ArrOfInt &amp;elements) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Double::search_elements_box </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ymin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>zmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ymax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>zmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cherche tous les elements ou points ayant potentiellement une intersection<br/>
non vide avec la boite donnee. </p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00244">244</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Double_8h_source.html#l00083">dim_</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00056">integer_position_clip()</a>, <a class="el" href="Octree__Double_8h_source.html#l00079">octree_int_</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00173">Octree_Int::search_elements_box()</a>, and <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>.</p>

<p>Referenced by <a class="el" href="Debog_8cpp_source.html#l00311">Debog_Pb::add_renum_item()</a>, <a class="el" href="Moyenne__volumique_8cpp_source.html#l00579">Calcul_integrale_locale::calculer()</a>, <a class="el" href="Corriger__frontiere__periodique_8cpp_source.html#l00135">Corriger_frontiere_periodique::corriger_coordonnees_sommets_perio()</a>, <a class="el" href="MaillerParallel_8cpp_source.html#l00232">find_matching_coordinates()</a>, <a class="el" href="Champ__implementation__P1_8cpp_source.html#l00165">Champ_implementation_P1::init_from_file()</a>, <a class="el" href="Redresser__hexaedres__vdf_8cpp_source.html#l00042">Redresser_hexaedres_vdf::interpreter_()</a>, <a class="el" href="Zone__VEF__PreP1b_8cpp_source.html#l00810">Zone_VEF_PreP1b::lecture_ok_arete()</a>, <a class="el" href="Reordonner__faces__periodiques_8cpp_source.html#l00114">Reordonner_faces_periodiques::reordonner_faces_periodiques()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00271">search_elements_box()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">int</span> dim = <a class="code" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">dim_</a>;
  <span class="keywordflow">if</span> (dim == 0)
    {
      elements.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
      <span class="keywordflow">return</span> 0;
    }
  <span class="keywordtype">int</span> x0 = 0, x1 = 0, y0 = 0, y1 = 0, z0 = 0, z1 = 0;
  <span class="keywordtype">int</span> ok = <a class="code" href="classOctree__Double.html#a645a4fc29a5aa58e41d3b499bc01063f">integer_position_clip</a>(xmin, xmax, x0, x1, 0);
  <span class="keywordflow">if</span> ((ok) &amp;&amp; (dim &gt;= 1))
    {
      ok = <a class="code" href="classOctree__Double.html#a645a4fc29a5aa58e41d3b499bc01063f">integer_position_clip</a>(ymin, ymax, y0, y1, 1);
      <span class="keywordflow">if</span> ((ok) &amp;&amp; (dim &gt;= 2))
        ok = <a class="code" href="classOctree__Double.html#a645a4fc29a5aa58e41d3b499bc01063f">integer_position_clip</a>(zmin, zmax, z0, z1, 2);
    }
  <span class="keywordflow">if</span> (ok)
    <a class="code" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">octree_int_</a>.<a class="code" href="classOctree__Int.html#a603544a594cacc8bdb1083e4c9dfbd58" title="cherche les elements ayant potentiellement une intersection non vide avec la boite xmin...">search_elements_box</a>(x0, y0, z0, x1, y1, z1, elements);
  <span class="keywordflow">else</span>
    elements.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
  <span class="keywordflow">return</span> elements.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a68f3b564a3bfdc4f00888a791fde5b"></a><!-- doxytag: member="Octree_Double::search_elements_box" ref="a6a68f3b564a3bfdc4f00888a791fde5b" args="(const ArrOfDouble &amp;center, const double radius, ArrOfInt &amp;elements) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Double::search_elements_box </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArrOfDouble.html">ArrOfDouble</a> &amp;&#160;</td>
          <td class="paramname"><em>center</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cherche tous les elements ou points ayant potentiellement une intersection<br/>
non vide avec la boite donnee (centre + ou - radius dans chaque direction) </p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00271">271</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Double_8cpp_source.html#l00244">search_elements_box()</a>, and <a class="el" href="ArrOfDouble_8h_source.html#l00350">ArrOfDouble::size_array()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> dim = center.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keywordtype">double</span> x = center[0];
  <span class="keywordtype">double</span> y = (dim&gt;=2) ? center[1] : 0.;
  <span class="keywordtype">double</span> z = (dim&gt;2) ? center[2] : 0.;
  <span class="keywordtype">int</span> i = <a class="code" href="classOctree__Double.html#a1dffcace51ca06cb52ff6e2330ab4b2e" title="cherche tous les elements ou points ayant potentiellement une intersection non vide avec la boite don...">search_elements_box</a>(x-radius, y-radius, z-radius,
                              x+radius, y+radius, z+radius,
                              elements);
  <span class="keywordflow">return</span> i;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae12d867f921aeecab588bb5ad93a5ea2"></a><!-- doxytag: member="Octree_Double::search_nodes_close_to" ref="ae12d867f921aeecab588bb5ad93a5ea2" args="(const ArrOfDouble &amp;point, const DoubleTab &amp;coords, ArrOfInt &amp;node_list, double epsilon)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Double::search_nodes_close_to </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArrOfDouble.html">ArrOfDouble</a> &amp;&#160;</td>
          <td class="paramname"><em>point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>node_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>epsilon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Idem que search_nodes_close_to(double x, double y, double z, ...) </p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00322">322</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="Octree__Double_8cpp_source.html#l00289">search_nodes_close_to()</a>, and <a class="el" href="ArrOfDouble_8h_source.html#l00350">ArrOfDouble::size_array()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> dim = point.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keywordtype">double</span> x = point[0];
  <span class="keywordtype">double</span> y = (dim&gt;=2) ? point[1] : 0.;
  <span class="keywordtype">double</span> z = (dim&gt;2) ? point[2] : 0.;
  <span class="keywordtype">int</span> i = <a class="code" href="classOctree__Double.html#a8ba1f6ceba5dae2af587d2f9a766aac2" title="Methode hors classe Cherche parmi les sommets de la liste node_list ceux qui sont a une distance infe...">search_nodes_close_to</a>(x, y, z, coords, node_list, epsilon);
  <span class="keywordflow">return</span> i;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8ba1f6ceba5dae2af587d2f9a766aac2"></a><!-- doxytag: member="Octree_Double::search_nodes_close_to" ref="a8ba1f6ceba5dae2af587d2f9a766aac2" args="(double x, double y, double z, const DoubleTab &amp;coords, ArrOfInt &amp;node_list, double epsilon)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Double::search_nodes_close_to </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>coords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>node_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>epsilon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Methode hors classe<br/>
Cherche parmi les sommets de la liste node_list ceux qui sont a une<br/>
distance inferieure a epsilon du point (x,y,z). node_list contient des indices de<br/>
sommets dans le tableau coords. La liste des noeuds verifiant le critere est mise<br/>
dans node_list. On renvoie l'indice dans le tableau coords du sommet le plus proche. </p>

<p>Definition at line <a class="el" href="Octree__Double_8cpp_source.html#l00289">289</a> of file <a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a>.</p>

<p>References <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="Double_8h_source.html#l00237">dmin()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, and <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>.</p>

<p>Referenced by <a class="el" href="Debog_8cpp_source.html#l00311">Debog_Pb::add_renum_item()</a>, <a class="el" href="Corriger__frontiere__periodique_8cpp_source.html#l00135">Corriger_frontiere_periodique::corriger_coordonnees_sommets_perio()</a>, <a class="el" href="MaillerParallel_8cpp_source.html#l00232">find_matching_coordinates()</a>, <a class="el" href="Champ__implementation__P1_8cpp_source.html#l00165">Champ_implementation_P1::init_from_file()</a>, <a class="el" href="Zone__VEF__PreP1b_8cpp_source.html#l00810">Zone_VEF_PreP1b::lecture_ok_arete()</a>, <a class="el" href="EcritureLectureSpecial_8cpp_source.html#l00328">lire_special()</a>, <a class="el" href="Reordonner__faces__periodiques_8cpp_source.html#l00114">Reordonner_faces_periodiques::reordonner_faces_periodiques()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00322">search_nodes_close_to()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">int</span> n = node_list.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keywordtype">double</span> eps2 = epsilon * epsilon;
  <span class="keywordtype">int</span> count = 0;
  <span class="keyword">const</span> <span class="keywordtype">int</span> dim = coords.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <span class="keywordtype">double</span> <a class="code" href="Double_8h.html#a04e03b7aad55468a8b8eae326087338a">dmin</a> = eps2;
  <span class="keywordtype">int</span> nearest = -1;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
    {
      <span class="keyword">const</span> <span class="keywordtype">int</span> som = node_list[i];
      <span class="keywordtype">double</span> dx = x - coords(som, 0);
      <span class="keywordtype">double</span> dy = (dim &gt;= 2) ? y - coords(som, 1) : 0.;
      <span class="keywordtype">double</span> dz = (dim &gt;= 3) ? z - coords(som, 2) : 0.;
      <span class="keywordtype">double</span> d2 = dx * dx + dy * dy + dz * dz;
      <span class="keywordflow">if</span> (d2 &lt; eps2)
        {
          node_list[count] = som;
          <span class="keywordflow">if</span> (d2 &lt; dmin)
            {
              dmin = d2;
              nearest = som;
            }
          count++;
        }
    }
  node_list.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(count);
  <span class="keywordflow">return</span> nearest;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ad4cc4bbff65274d013fa68520123423e"></a><!-- doxytag: member="Octree_Double::dim_" ref="ad4cc4bbff65274d013fa68520123423e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOctree__Double.html#ad4cc4bbff65274d013fa68520123423e">Octree_Double::dim_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8h_source.html#l00083">83</a> of file <a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00102">compute_origin_factors()</a>, <a class="el" href="Octree__Double_8h_source.html#l00061">dimension()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00025">Octree_Double()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00030">reset()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00081">search_elements()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00244">search_elements_box()</a>.</p>

</div>
</div>
<a class="anchor" id="af79516971cf13fbe9c65ea2c6ffd5c75"></a><!-- doxytag: member="Octree_Double::factor_" ref="af79516971cf13fbe9c65ea2c6ffd5c75" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArrOfDouble.html">ArrOfDouble</a> <a class="el" href="classOctree__Double.html#af79516971cf13fbe9c65ea2c6ffd5c75">Octree_Double::factor_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8h_source.html#l00082">82</a> of file <a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00102">compute_origin_factors()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00040">integer_position()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00056">integer_position_clip()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00030">reset()</a>.</p>

</div>
</div>
<a class="anchor" id="a85cb3a91adb96c5577aaaea875cfaa1a"></a><!-- doxytag: member="Octree_Double::octree_int_" ref="a85cb3a91adb96c5577aaaea875cfaa1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOctree__Int.html">Octree_Int</a> <a class="el" href="classOctree__Double.html#a85cb3a91adb96c5577aaaea875cfaa1a">Octree_Double::octree_int_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8h_source.html#l00079">79</a> of file <a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00205">build_elements()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00154">build_nodes()</a>, <a class="el" href="Octree__Double_8h_source.html#l00066">floor_elements()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00030">reset()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00081">search_elements()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00244">search_elements_box()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b41af8dd3c5063e37ab2a8c04e5ce5d"></a><!-- doxytag: member="Octree_Double::origin_" ref="a7b41af8dd3c5063e37ab2a8c04e5ce5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArrOfDouble.html">ArrOfDouble</a> <a class="el" href="classOctree__Double.html#a7b41af8dd3c5063e37ab2a8c04e5ce5d">Octree_Double::origin_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Double_8h_source.html#l00081">81</a> of file <a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00102">compute_origin_factors()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00040">integer_position()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00056">integer_position_clip()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00030">reset()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/Kernel/Geometrie/<a class="el" href="Octree__Double_8h_source.html">Octree_Double.h</a></li>
<li>src/Kernel/Geometrie/<a class="el" href="Octree__Double_8cpp_source.html">Octree_Double.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:37:12 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
