<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Math/SolvSys/Solv_Optimal.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">src/Kernel/Math/SolvSys/Solv_Optimal.cpp File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="Solv__Optimal_8h_source.html">Solv_Optimal.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="Param_8h_source.html">Param.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="LecFicDistribueBin_8h_source.html">LecFicDistribueBin.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="stat__counters_8h_source.html">stat_counters.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="LecFicDiffuse_8h_source.html">LecFicDiffuse.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="Matrice__Bloc_8h_source.html">Matrice_Bloc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="Matrice__Morse__Sym_8h_source.html">Matrice_Morse_Sym.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="SFichier_8h_source.html">SFichier.h</a>&gt;</code><br/>
<code>#include &lt;petsc_for_kernel.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="MD__Vector__tools_8h_source.html">MD_Vector_tools.h</a>&gt;</code><br/>
</div>
<p><a href="Solv__Optimal_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Solv__Optimal_8cpp.html#ab95480dbc485ef6e60555bb8fdd81cb3">test_un_solveur</a> (<a class="el" href="classSolveurSys.html">SolveurSys</a> &amp;solveur, const <a class="el" href="classMatrice__Base.html">Matrice_Base</a> &amp;matrice, const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;secmem, <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;solution, int nmax, <a class="el" href="classArrOfDouble.html">ArrOfDouble</a> &amp;temps, double seuil_verification=1e+38)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Solv__Optimal_8cpp.html#a58da3467351cd398d3ec16314c28b328">test_solveur</a> (<a class="el" href="classSolveurSys.html">SolveurSys</a> &amp;solveur, const <a class="el" href="classMatrice__Base.html">Matrice_Base</a> &amp;matrice, const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;secmem, <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;solution, int nmax, <a class="el" href="classArrOfDouble.html">ArrOfDouble</a> &amp;temps, <a class="el" href="classEntree.html">Entree</a> &amp;list_solveur, double seuil_verification=1e+38)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Solv__Optimal_8cpp.html#ae0806cff680346d58604ce21b67085b1">generate_defaut</a> (const <a class="el" href="classMatrice__Base.html">Matrice_Base</a> &amp;matrice, const double &amp;seuil, <a class="el" href="classSortie.html">Sortie</a> &amp;sortie, int limpr=0)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classType__info.html">Type_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Solv__Optimal_8cpp.html#ad656dffb7b588b6659e3b680d38209a9">Test_solveurbases</a> [1] = { &amp;( <a class="el" href="classInterprete.html">Interprete</a> ::info_obj)}</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classType__info.html">Type_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Solv__Optimal_8cpp.html#aaca97a2869edea2d1d42d0cffd33b04a">Solv_Optimalbases</a> [1] = { &amp;( <a class="el" href="classsolv__iteratif.html">solv_iteratif</a> ::info_obj)}</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Solv__Optimal_8cpp.html#a82b8c8ebae307acf6c2b609490c8252f">numero_solv_optimal</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">numero du solveur pour avoir des noms de fichiers solveurs par defaut differents pour chaque solveur  <a href="#a82b8c8ebae307acf6c2b609490c8252f"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae0806cff680346d58604ce21b67085b1"></a><!-- doxytag: member="Solv_Optimal.cpp::generate_defaut" ref="ae0806cff680346d58604ce21b67085b1" args="(const Matrice_Base &amp;matrice, const double &amp;seuil, Sortie &amp;sortie, int limpr=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void generate_defaut </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMatrice__Base.html">Matrice_Base</a> &amp;&#160;</td>
          <td class="paramname"><em>matrice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>seuil</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSortie.html">Sortie</a> &amp;&#160;</td>
          <td class="paramname"><em>sortie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>limpr</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Solv__Optimal_8cpp_source.html#l00135">135</a> of file <a class="el" href="Solv__Optimal_8cpp_source.html">Solv_Optimal.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Process_8cpp_source.html#l00095">Process::je_suis_maitre()</a>, <a class="el" href="Process_8cpp_source.html#l00109">Process::nproc()</a>, and <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>.</p>

<p>Referenced by <a class="el" href="Solv__Optimal_8cpp_source.html#l00173">Test_solveur::interpreter()</a>, and <a class="el" href="Solv__Optimal_8cpp_source.html#l00312">Solv_Optimal::prepare_resol()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> impr(<span class="stringliteral">&quot; impr &quot;</span> );
  <span class="keywordflow">if</span> (limpr==0) impr=<span class="stringliteral">&quot; &quot;</span>;
  <span class="keywordflow">if</span> (limpr==-1) impr=<span class="stringliteral">&quot; quiet &quot;</span>;
  <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
    {
      <span class="keywordflow">if</span>((!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMatrice__Morse__Sym.html" title="Classe Matrice_Morse_Sym Represente une matrice M (creuse) symetrique stockee au format Morse Symetri...">Matrice_Morse_Sym</a>,matrice))&amp;&amp;(!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMatrice__Bloc.html">Matrice_Bloc</a>,matrice)))
        {
          sortie &lt;&lt;<span class="stringliteral">&quot; solveur gen { seuil &quot;</span>&lt;&lt;seuil &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;impr&lt;&lt; <span class="stringliteral">&quot; solv_elem bicgstab precond ilu { type 2 filling 10 } }&quot;</span> &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          sortie &lt;&lt;<span class="stringliteral">&quot; solveur gen { seuil &quot;</span>&lt;&lt;seuil &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;impr&lt;&lt; <span class="stringliteral">&quot; solv_elem bicgstab precond ilu { type 2 filling 20 } }&quot;</span> &lt;&lt;finl;
          sortie &lt;&lt;<span class="stringliteral">&quot; solveur gmres { diag seuil &quot;</span>&lt;&lt;seuil &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;impr&lt;&lt;<span class="stringliteral">&quot;}&quot;</span>&lt;&lt;finl;
<span class="preprocessor">#ifdef __PETSCKSP_H</span>
<span class="preprocessor"></span>          sortie &lt;&lt;<span class="stringliteral">&quot; solveur petsc bicgstab { precond diag { }                  seuil &quot;</span>&lt;&lt;seuil &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;impr&lt;&lt;<span class="stringliteral">&quot;}&quot;</span>&lt;&lt;finl;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
      <span class="keywordflow">else</span>
        {
<span class="comment">// on a une matrice de type pression (?)</span>
<span class="comment">// Mise a jour des solveurs testes 24/05/2012</span>
          sortie &lt;&lt;<span class="stringliteral">&quot; solveur gcp       { precond ssor       { omega 1.6 }       seuil &quot;</span>&lt;&lt;seuil &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;impr&lt;&lt;<span class="stringliteral">&quot;}&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<span class="preprocessor">#ifdef __PETSCKSP_H</span>
<span class="preprocessor"></span>          sortie &lt;&lt;<span class="stringliteral">&quot; solveur petsc gcp { precond ssor       { omega 1.6 }       seuil &quot;</span>&lt;&lt;seuil &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;impr&lt;&lt;<span class="stringliteral">&quot;}&quot;</span>&lt;&lt;finl;
          <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>()&lt;512)
            sortie &lt;&lt;<span class="stringliteral">&quot; solveur petsc cholesky { impr }&quot;</span>&lt;&lt; finl;
          <span class="keywordflow">else</span>
            {
<span class="comment">// Pour les tres grands calculs on bascule de Cholesky a BICGSTAB ILU(1) par bloc</span>
              sortie &lt;&lt;<span class="stringliteral">&quot; solveur petsc bicgstab { precond block_jacobi_icc { level 1 } seuil &quot;</span>&lt;&lt;seuil &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;impr&lt;&lt;<span class="stringliteral">&quot;}&quot;</span>&lt;&lt;finl;
<span class="comment">// Voire CG ILU(1) par bloc car BICGSTAB peut avoir du mal a converger lors de la projection initiale...</span>
              sortie &lt;&lt;<span class="stringliteral">&quot; solveur petsc gcp { precond block_jacobi_icc { level 1 } seuil &quot;</span>&lt;&lt;seuil &lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;impr&lt;&lt;<span class="stringliteral">&quot;}&quot;</span>&lt;&lt;finl;
            }
<span class="comment">// SPAI n&#39;a jamais fait ses preuves (comme tous les preconditionnements de Hypre), on l&#39;enleve</span>
<span class="comment">// sortie &lt;&lt;&quot; solveur petsc gcp { precond spai       { level 2 epsilon 0.2 } seuil &quot;&lt;&lt;seuil &lt;&lt;&quot; &quot;&lt;&lt;impr&lt;&lt;&quot;}&quot;&lt;&lt;finl;</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a58da3467351cd398d3ec16314c28b328"></a><!-- doxytag: member="Solv_Optimal.cpp::test_solveur" ref="a58da3467351cd398d3ec16314c28b328" args="(SolveurSys &amp;solveur, const Matrice_Base &amp;matrice, const DoubleVect &amp;secmem, DoubleVect &amp;solution, int nmax, ArrOfDouble &amp;temps, Entree &amp;list_solveur, double seuil_verification=1e+38)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int test_solveur </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSolveurSys.html">SolveurSys</a> &amp;&#160;</td>
          <td class="paramname"><em>solveur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMatrice__Base.html">Matrice_Base</a> &amp;&#160;</td>
          <td class="paramname"><em>matrice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>secmem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>solution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfDouble.html">ArrOfDouble</a> &amp;&#160;</td>
          <td class="paramname"><em>temps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEntree.html">Entree</a> &amp;&#160;</td>
          <td class="paramname"><em>list_solveur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>seuil_verification</em> = <code>1e+38</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Solv__Optimal_8cpp_source.html#l00097">97</a> of file <a class="el" href="Solv__Optimal_8cpp_source.html">Solv_Optimal.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Entree_8cpp_source.html#l00563">Entree::good()</a>, <a class="el" href="ArrOfDouble_8h_source.html#l00350">ArrOfDouble::size_array()</a>, and <a class="el" href="Solv__Optimal_8cpp_source.html#l00050">test_un_solveur()</a>.</p>

<p>Referenced by <a class="el" href="Solv__Optimal_8cpp_source.html#l00173">Test_solveur::interpreter()</a>, and <a class="el" href="Solv__Optimal_8cpp_source.html#l00312">Solv_Optimal::prepare_resol()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classDoubleVect.html">DoubleVect</a> solution_ref(solution);
  <span class="keywordtype">int</span> numero=0,numero_best=-1;
  <span class="keywordtype">double</span> best_time=1e36;
  <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motsolveur(<span class="stringliteral">&quot;solveur&quot;</span>),motlu;
  list_solveur &gt;&gt; motlu;
  <span class="keywordtype">int</span> dernier=temps.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>()-1;
  <span class="keywordflow">while</span> (list_solveur.<a class="code" href="classEntree.html#a031cbbd83a3acd74b6d16496602fd941">good</a>())
    {
      <span class="keywordflow">if</span> (motlu!=motsolveur)
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; One expected &quot;</span>&lt;&lt;motsolveur &lt;&lt;<span class="stringliteral">&quot; and not &quot;</span>&lt;&lt;motlu&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
      numero++;
      <a class="code" href="classSolveurSys.html">SolveurSys</a> newsolveur;
      list_solveur&gt;&gt;newsolveur;
      solution=solution_ref;
      <a class="code" href="Solv__Optimal_8cpp.html#ab95480dbc485ef6e60555bb8fdd81cb3">test_un_solveur</a>(newsolveur, matrice, secmem ,solution, nmax, temps, seuil_verification);
      <span class="keywordflow">if</span> (temps(dernier)&lt;best_time)
        {
          solveur=newsolveur;
          best_time=temps(dernier);
          numero_best=numero;
        }
      list_solveur&gt;&gt;motlu;
    }
  <span class="keywordflow">if</span> (numero_best==-1)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; None of the tested solvers give the expected residue&quot;</span> &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt; <span class="stringliteral">&quot; does the same solver must be kept ? &quot;</span>&lt;&lt;finl;
<span class="comment">// exit();</span>
    }
  temps=best_time;
  <span class="keywordflow">return</span> numero_best;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab95480dbc485ef6e60555bb8fdd81cb3"></a><!-- doxytag: member="Solv_Optimal.cpp::test_un_solveur" ref="ab95480dbc485ef6e60555bb8fdd81cb3" args="(SolveurSys &amp;solveur, const Matrice_Base &amp;matrice, const DoubleVect &amp;secmem, DoubleVect &amp;solution, int nmax, ArrOfDouble &amp;temps, double seuil_verification=1e+38)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_un_solveur </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSolveurSys.html">SolveurSys</a> &amp;&#160;</td>
          <td class="paramname"><em>solveur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classMatrice__Base.html">Matrice_Base</a> &amp;&#160;</td>
          <td class="paramname"><em>matrice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>secmem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>solution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfDouble.html">ArrOfDouble</a> &amp;&#160;</td>
          <td class="paramname"><em>temps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>seuil_verification</em> = <code>1e+38</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Solv__Optimal_8cpp_source.html#l00050">50</a> of file <a class="el" href="Solv__Optimal_8cpp_source.html">Solv_Optimal.cpp</a>.</p>

<p>References <a class="el" href="Matrice__Base_8h_source.html#l00230">Matrice_Base::ajouter_multvect()</a>, <a class="el" href="Statistiques_8h_source.html#l00219">Statistiques::begin_count()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="EntreeSortie_8h_source.html#l00033">Cout</a>, <a class="el" href="Statistiques_8h_source.html#l00237">Statistiques::end_count()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Statistiques_8cpp_source.html#l00927">Statistiques::get_stats()</a>, <a class="el" href="Process_8cpp_source.html#l00374">Process::imprimer_ram_totale()</a>, <a class="el" href="Process_8cpp_source.html#l00156">Process::mp_max()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l02353">mp_norme_vect()</a>, <a class="el" href="Statistiques_8cpp_source.html#l00404">Statistiques::new_counter()</a>, <a class="el" href="SolveurSys_8h_source.html#l00064">SolveurSys::nommer()</a>, <a class="el" href="Double_8h_source.html#l00159">norme()</a>, <a class="el" href="SolveurSys_8cpp_source.html#l00052">SolveurSys::resoudre_systeme()</a>, <a class="el" href="ArrOfDouble_8h_source.html#l00350">ArrOfDouble::size_array()</a>, <a class="el" href="Statistiques_8h_source.html#l00190">statistiques()</a>, <a class="el" href="Op__Grad__EF_8cpp_source.html#l00099">test()</a>, and <a class="el" href="Statistiques_8h_source.html#l00205">Stat_Results::time</a>.</p>

<p>Referenced by <a class="el" href="Solv__Optimal_8cpp_source.html#l00173">Test_solveur::interpreter()</a>, and <a class="el" href="Solv__Optimal_8cpp_source.html#l00097">test_solveur()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classDoubleVect.html">DoubleVect</a> solution_ref(solution);
  <span class="keywordtype">int</span> n=temps.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <a class="code" href="classStat__Counter__Id.html">Stat_Counter_Id</a>  solv_sys_counter_l= <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#ae1d5ab3d7354d4f748173dde67f9912d">new_counter</a>(1, <span class="stringliteral">&quot;SolveurSys::resoudre_systeme&quot;</span>, 0);

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n; i++)
    {
      solution=solution_ref;

<span class="comment">// etape de resolution</span>
      <a class="code" href="classStat__Results.html">Stat_Results</a> stat_resol_0;

      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#ab17d748f8771fe4ce1f9194348751ea6">get_stats</a>(solv_sys_counter_l, stat_resol_0);
      <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt;<span class="stringliteral">&quot;------------------------------------&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt;<span class="stringliteral">&quot;Try &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot; of solver &quot;</span> &lt;&lt; solveur &lt;&lt;finl;
<span class="comment">// solveur.valeur().fixer_limpr(0);</span>
      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(solv_sys_counter_l);
      solveur.<a class="code" href="classSolveurSys.html#a17fa90c93f514a6d2a898e682e724d3b" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(<span class="stringliteral">&quot;test_solver&quot;</span>);

      solveur.<a class="code" href="classSolveurSys.html#a62ca198f0c5dc599e53b0535761e5138">resoudre_systeme</a>(matrice,secmem,solution);
      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(solv_sys_counter_l);

      <a class="code" href="classStat__Results.html">Stat_Results</a> stat_resol;
      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#ab17d748f8771fe4ce1f9194348751ea6">get_stats</a>(solv_sys_counter_l, stat_resol);
<span class="comment">// on recupere un delta time et non un time absolu !!</span>
      <span class="keywordtype">double</span> time_resol=stat_resol.<a class="code" href="classStat__Results.html#a9ac46c2ac7225154b6893ac453e214ef">time</a>-stat_resol_0.<a class="code" href="classStat__Results.html#a9ac46c2ac7225154b6893ac453e214ef">time</a>;
      <a class="code" href="classDoubleVect.html">DoubleVect</a> <a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>(secmem);
      <a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>*=-1;
      matrice.<a class="code" href="classMatrice__Base.html#a6ccb4d20d3877cf09f5178ff72af5406" title="Operation de multiplication-accumulation (saxpy) matrice vecteur. Operation: r = r + A*x...">ajouter_multvect</a>(solution,<a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>);
<span class="comment">// test-=secmem;</span>
      <span class="keywordtype">double</span> <a class="code" href="Double_8h.html#ac842198e9490fae75825cab2a03eed2d">norme</a>=<a class="code" href="DoubleVect_8cpp.html#afaa33f0032aa927d8d54ff9fb002b749">mp_norme_vect</a>(<a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>);
<span class="comment">// statistiques().dump(&quot;Statistiques de resolution du probleme&quot;);</span>
<span class="comment">// print_statistics_analyse(&quot;Statistiques de resolution du probleme&quot;, 1);</span>

      <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt;<span class="stringliteral">&quot;CPU= &quot;</span> &lt;&lt;time_resol&lt;&lt;<span class="stringliteral">&quot; s , ||Ax -b||= &quot;</span> &lt;&lt; norme &lt;&lt; finl;
      <a class="code" href="classProcess.html#aa1142e848c81a78c28a061a6f45b4042">Process::imprimer_ram_totale</a>();
      temps[i]=<a class="code" href="classProcess.html#a1e9d9f9899b71927cfafae14c7bd048d" title="Calcule le max de x sur tous les processeurs du groupe courant. Remarques : Cette methode doit etre a...">Process::mp_max</a>(time_resol);

      <span class="keywordflow">if</span> (norme&gt;seuil_verification)
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;residue calculated greater than the threshold value indicated (&quot;</span>&lt;&lt;seuil_verification&lt;&lt;<span class="stringliteral">&quot;)&quot;</span>&lt;&lt;finl;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; one will not use the solver &quot;</span>&lt;&lt;solveur&lt;&lt;finl;
          temps=1.e37;
        }
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a82b8c8ebae307acf6c2b609490c8252f"></a><!-- doxytag: member="Solv_Optimal.cpp::numero_solv_optimal" ref="a82b8c8ebae307acf6c2b609490c8252f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="Solv__Optimal_8cpp.html#a82b8c8ebae307acf6c2b609490c8252f">numero_solv_optimal</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>numero du solveur pour avoir des noms de fichiers solveurs par defaut differents pour chaque solveur </p>

<p>Definition at line <a class="el" href="Solv__Optimal_8cpp_source.html#l00267">267</a> of file <a class="el" href="Solv__Optimal_8cpp_source.html">Solv_Optimal.cpp</a>.</p>

<p>Referenced by <a class="el" href="Solv__Optimal_8cpp_source.html#l00268">Solv_Optimal::Solv_Optimal()</a>.</p>

</div>
</div>
<a class="anchor" id="aaca97a2869edea2d1d42d0cffd33b04a"></a><!-- doxytag: member="Solv_Optimal.cpp::Solv_Optimalbases" ref="aaca97a2869edea2d1d42d0cffd33b04a" args="[1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classType__info.html">Type_info</a>* <a class="el" href="Solv__Optimal_8cpp.html#aaca97a2869edea2d1d42d0cffd33b04a">Solv_Optimalbases</a>[1] = { &amp;( <a class="el" href="classsolv__iteratif.html">solv_iteratif</a> ::info_obj)}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Solv__Optimal_8cpp_source.html#l00036">36</a> of file <a class="el" href="Solv__Optimal_8cpp_source.html">Solv_Optimal.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad656dffb7b588b6659e3b680d38209a9"></a><!-- doxytag: member="Solv_Optimal.cpp::Test_solveurbases" ref="ad656dffb7b588b6659e3b680d38209a9" args="[1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classType__info.html">Type_info</a>* <a class="el" href="Solv__Optimal_8cpp.html#ad656dffb7b588b6659e3b680d38209a9">Test_solveurbases</a>[1] = { &amp;( <a class="el" href="classInterprete.html">Interprete</a> ::info_obj)}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Solv__Optimal_8cpp_source.html#l00034">34</a> of file <a class="el" href="Solv__Optimal_8cpp_source.html">Solv_Optimal.cpp</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:53 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
