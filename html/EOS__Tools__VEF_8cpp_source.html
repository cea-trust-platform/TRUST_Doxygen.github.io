<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Dilatable/Common/VEF/EOS_Tools_VEF.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Dilatable/Common/VEF/EOS_Tools_VEF.cpp</div>  </div>
</div>
<div class="contents">
<a href="EOS__Tools__VEF_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        EOS_Tools_VEF.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Dilatable/Common/VEF</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/36</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="EOS__Tools__VEF_8h.html">EOS_Tools_VEF.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VEF__PreP1b_8h.html">Zone_VEF_PreP1b.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Debog_8h.html">Debog.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Navier__Stokes__std_8h.html">Navier_Stokes_std.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Temps__base_8h.html">Schema_Temps_base.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Fluide__Dilatable__base_8h.html">Fluide_Dilatable_base.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Loi__Etat__Melange__GP__base_8h.html">Loi_Etat_Melange_GP_base.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Porosites__champ_8h.html">Porosites_champ.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Champ__P1NC_8h.html">Champ_P1NC.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Check__espace__virtuel_8h.html">Check_espace_virtuel.h</a>&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="EOS__Tools__VEF_8cpp.html#ac7f484d2e4ad14becc6929dc7cd18893">00035</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classEOS__Tools__VEF.html" title="classe EOS_Tools_VEF Cette classe et specifique a discretisation de type VEF.">EOS_Tools_VEF</a>,<span class="stringliteral">&quot;EOS_Tools_VEF&quot;</span>,<a class="code" href="classEOS__Tools__base.html" title="classe Abstraite EOS_Tools_base">EOS_Tools_base</a>);
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="classEOS__Tools__VEF.html#a66b45d9753569a556ea4bf046a794ec4">00037</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classEOS__Tools__VEF.html#a66b45d9753569a556ea4bf046a794ec4" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">EOS_Tools_VEF::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00038"></a>00038 <span class="keyword"></span>{
<a name="l00039"></a>00039   os &lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00040"></a>00040   <span class="keywordflow">return</span> os;
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="classEOS__Tools__VEF.html#a02480be81757001cee10ae994582acf0">00043</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classEOS__Tools__VEF.html#a02480be81757001cee10ae994582acf0" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">EOS_Tools_VEF::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045   <span class="keywordflow">return</span> is;
<a name="l00046"></a>00046 }
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="comment">// Precondition:</span>
<a name="l00049"></a>00049 <span class="comment">// Parametre: Zone_dis&amp; zone</span>
<a name="l00050"></a>00050 <span class="comment">// Signification: zone</span>
<a name="l00051"></a>00051 <span class="comment">// Valeurs par defaut:</span>
<a name="l00052"></a>00052 <span class="comment">// Contraintes: reference constante</span>
<a name="l00053"></a>00053 <span class="comment">// Acces: entree</span>
<a name="l00054"></a>00054 <span class="comment">// Parametre: Zone_Cl_dis&amp; zone_cl</span>
<a name="l00055"></a>00055 <span class="comment">// Signification: zone cl</span>
<a name="l00056"></a>00056 <span class="comment">// Valeurs par defaut:</span>
<a name="l00057"></a>00057 <span class="comment">// Contraintes: reference constante</span>
<a name="l00058"></a>00058 <span class="comment">// Acces: entree</span>
<a name="l00059"></a>00059 <span class="comment">// Exception:</span>
<a name="l00060"></a>00060 <span class="comment">// Effets de bord:</span>
<a name="l00061"></a>00061 <span class="comment">// Postcondition:</span>
<a name="l00062"></a>00062 <span class="comment">//</span><span class="comment"></span>
<a name="l00063"></a>00063 <span class="comment">//! Associe les zones a l&#39;EDO</span>
<a name="l00064"></a>00064 <span class="comment"></span><span class="comment">/** \return double&lt;br&gt;</span>
<a name="l00065"></a>00065 <span class="comment">Signification:&lt;br&gt;</span>
<a name="l00066"></a>00066 <span class="comment">Contraintes: */</span>
<a name="l00067"></a><a class="code" href="classEOS__Tools__VEF.html#a6059a370fe581d7742e38c2bb32e13ef">00067</a> <span class="keywordtype">void</span>  <a class="code" href="classEOS__Tools__VEF.html#a6059a370fe581d7742e38c2bb32e13ef" title="Associe les zones a l&#39;EDO.">EOS_Tools_VEF::associer_zones</a>(<span class="keyword">const</span> <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; zone, <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp; zone_cl)
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069   <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a> = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>,zone.<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>());
<a name="l00070"></a>00070   <a class="code" href="classEOS__Tools__VEF.html#a9dabf548ef5167db3b331a0eee87873d">la_zone_Cl</a> = zone_cl;
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="comment">// Precondition:</span>
<a name="l00074"></a>00074 <span class="comment">// Parametre:</span>
<a name="l00075"></a>00075 <span class="comment">// Signification:</span>
<a name="l00076"></a>00076 <span class="comment">// Valeurs par defaut:</span>
<a name="l00077"></a>00077 <span class="comment">// Contraintes:</span>
<a name="l00078"></a>00078 <span class="comment">// Acces:</span>
<a name="l00079"></a>00079 <span class="comment">// Exception:</span>
<a name="l00080"></a>00080 <span class="comment">// Effets de bord:</span>
<a name="l00081"></a>00081 <span class="comment">// Postcondition:</span>
<a name="l00082"></a>00082 <span class="comment">//</span>
<a name="l00083"></a>00083 <span class="comment">//</span><span class="comment"></span>
<a name="l00084"></a>00084 <span class="comment">//! Renvoie rho avec la meme discretisation que la vitesse :&lt;br&gt;une valeur par face en VEF</span>
<a name="l00085"></a>00085 <span class="comment"></span><span class="comment">/** \return DoubleTab\&amp;&lt;br&gt;</span>
<a name="l00086"></a>00086 <span class="comment">Signification: rho discretise par face&lt;br&gt;</span>
<a name="l00087"></a>00087 <span class="comment">Contraintes: */</span>
<a name="l00088"></a><a class="code" href="classEOS__Tools__VEF.html#a92cf6f2161ad0bdbe55e1d5f9c2c224d">00088</a> <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classEOS__Tools__VEF.html#a92cf6f2161ad0bdbe55e1d5f9c2c224d" title="Renvoie rho avec la meme discretisation que la vitesse : une valeur par face en VEF.">EOS_Tools_VEF::rho_discvit</a>()<span class="keyword"> const</span>
<a name="l00089"></a>00089 <span class="keyword"></span>{
<a name="l00090"></a>00090   <span class="keywordflow">return</span> <a class="code" href="classEOS__Tools__base.html#a3579af31a8a953a9f4a0c29a7d25e3b2">le_fluide_</a>-&gt;masse_volumique().valeurs();
<a name="l00091"></a>00091 }
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="classEOS__Tools__VEF.html#aa801d71ca82e58550828f81864dc1979">00093</a> <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classEOS__Tools__VEF.html#aa801d71ca82e58550828f81864dc1979">EOS_Tools_VEF::rho_face_n</a>()<span class="keyword"> const</span>
<a name="l00094"></a>00094 <span class="keyword"></span>{
<a name="l00095"></a>00095   <span class="keywordflow">return</span> <a class="code" href="classEOS__Tools__base.html#a3579af31a8a953a9f4a0c29a7d25e3b2">le_fluide_</a>-&gt;rho_n();
<a name="l00096"></a>00096 }
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="classEOS__Tools__VEF.html#a18cba1c8b737628778c115f9bcea35c8">00098</a> <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classEOS__Tools__VEF.html#a18cba1c8b737628778c115f9bcea35c8">EOS_Tools_VEF::rho_face_np1</a>()<span class="keyword"> const</span>
<a name="l00099"></a>00099 <span class="keyword"></span>{
<a name="l00100"></a>00100   <span class="keywordflow">return</span> <a class="code" href="classEOS__Tools__base.html#a3579af31a8a953a9f4a0c29a7d25e3b2">le_fluide_</a>-&gt;rho_np1();
<a name="l00101"></a>00101 }
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="comment">// Precondition:</span>
<a name="l00104"></a>00104 <span class="comment">// Parametre:</span>
<a name="l00105"></a>00105 <span class="comment">// Signification:</span>
<a name="l00106"></a>00106 <span class="comment">// Valeurs par defaut:</span>
<a name="l00107"></a>00107 <span class="comment">// Contraintes:</span>
<a name="l00108"></a>00108 <span class="comment">// Acces:</span>
<a name="l00109"></a>00109 <span class="comment">// Exception:</span>
<a name="l00110"></a>00110 <span class="comment">// Effets de bord:</span>
<a name="l00111"></a>00111 <span class="comment">// Postcondition:</span>
<a name="l00112"></a>00112 <span class="comment">//</span><span class="comment"></span>
<a name="l00113"></a>00113 <span class="comment">//! Calcule la moyenne volumique de la grandeur P1NC donnee</span>
<a name="l00114"></a>00114 <span class="comment"></span><span class="comment">/** \return DoubleTab\&amp;&lt;br&gt;</span>
<a name="l00115"></a>00115 <span class="comment">Signification: rho discretise par face&lt;br&gt;</span>
<a name="l00116"></a>00116 <span class="comment">Contraintes: */</span>
<a name="l00117"></a><a class="code" href="classEOS__Tools__VEF.html#a61456faabf48e7374319a83e9683b006">00117</a> <span class="keywordtype">double</span> <a class="code" href="classEOS__Tools__VEF.html#a61456faabf48e7374319a83e9683b006" title="Calcule la moyenne volumique de la grandeur P1NC donnee.">EOS_Tools_VEF::moyenne_vol</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab)<span class="keyword"> const</span>
<a name="l00118"></a>00118 <span class="keyword"></span>{
<a name="l00119"></a>00119   assert(tab.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() == 1);
<a name="l00120"></a>00120   <span class="keywordtype">double</span> x = <a class="code" href="classChamp__P1NC.html#aba71af97e775f8955a6c7e047f32dfe6">Champ_P1NC::calculer_integrale_volumique</a>(<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>.<a class="code" href="classRef__Zone__VEF.html#aafd9a5ee1a76f290c9c6b5447b0c8d30">valeur</a>(), tab, <a class="code" href="Ok__Perio_8h.html#a9bf45a58409fafbbb3238c96a2461723a7652932bc8025223e37f2c8031843bff">FAUX_EN_PERIO</a>);
<a name="l00121"></a>00121 <span class="comment">// La facon simple de faire serait celle-ci, mais c&#39;est faux a cause de FAUX_EN_PERIO</span>
<a name="l00122"></a>00122 <span class="comment">// qui compte deux fois les volumes entrelaces des faces periodiques:</span>
<a name="l00123"></a>00123   <a class="code" href="classDoubleVect.html">DoubleVect</a> un;
<a name="l00124"></a>00124   <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>.<a class="code" href="classRef__Zone__VEF.html#aafd9a5ee1a76f290c9c6b5447b0c8d30">valeur</a>().<a class="code" href="classZone__VF.html#a8e02e68f236356f72728b82536538ac5">creer_tableau_faces</a>(un, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00125"></a>00125   un = 1.;
<a name="l00126"></a>00126   <span class="keywordtype">double</span> y = <a class="code" href="classChamp__P1NC.html#aba71af97e775f8955a6c7e047f32dfe6">Champ_P1NC::calculer_integrale_volumique</a>(<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>.<a class="code" href="classRef__Zone__VEF.html#aafd9a5ee1a76f290c9c6b5447b0c8d30">valeur</a>(), un, <a class="code" href="Ok__Perio_8h.html#a9bf45a58409fafbbb3238c96a2461723a7652932bc8025223e37f2c8031843bff">FAUX_EN_PERIO</a>);
<a name="l00127"></a>00127   <span class="keywordflow">return</span> x / y;
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="comment">//</span><span class="comment"></span>
<a name="l00131"></a>00131 <span class="comment">//! Div(u) is computed on faces from Div(u) on elements</span>
<a name="l00132"></a><a class="code" href="classEOS__Tools__VEF.html#a47fc2b458f90686a3331e1d253b441b6">00132</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classEOS__Tools__VEF.html#a47fc2b458f90686a3331e1d253b441b6" title="Div(u) is computed on faces from Div(u) on elements.">EOS_Tools_VEF::divu_discvit</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; DivVelocityElements, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; DivVelocityFaces)
<a name="l00133"></a>00133 {
<a name="l00134"></a>00134   <a class="code" href="Check__espace__virtuel_8cpp.html#a2ea8fcf12c28d0454bdc4126f8c4b186" title="en mode comm_check_enabled(), verifie si l&#39;espace virtuel du vecteur est a jour, si ce n&#39;est pas le c...">assert_espace_virtuel_vect</a>(DivVelocityElements);
<a name="l00135"></a>00135 <span class="comment">// Corrections pour moyenner div(u) sur les faces</span>
<a name="l00136"></a>00136   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;volumes();
<a name="l00137"></a>00137   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes_entrelaces = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;volumes_entrelaces();
<a name="l00138"></a>00138   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes_entrelaces_Cl = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>,<a class="code" href="classEOS__Tools__VEF.html#a9dabf548ef5167db3b331a0eee87873d">la_zone_Cl</a>-&gt;<a class="code" href="classRef__Zone__Cl__dis.html#a8f0066283a89a05229209f62323fe7d0">valeur</a>()).volumes_entrelaces_Cl();
<a name="l00139"></a>00139 
<a name="l00140"></a>00140   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;face_voisins();
<a name="l00141"></a>00141   <span class="keywordtype">int</span> premiere_fac_std=<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;premiere_face_std();
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 <span class="comment">// remplissage de div(u) sur les faces</span>
<a name="l00144"></a>00144   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face=0; face&lt;premiere_fac_std; face++)
<a name="l00145"></a>00145     {
<a name="l00146"></a>00146       <span class="keywordtype">int</span> nb_comp=0;
<a name="l00147"></a>00147       DivVelocityFaces(face)=0;
<a name="l00148"></a>00148       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0 ; i&lt;2 ; i++)
<a name="l00149"></a>00149         {
<a name="l00150"></a>00150           <span class="keywordtype">int</span> elem= face_voisins(face,i);
<a name="l00151"></a>00151           <span class="keywordflow">if</span> (elem!=-1)
<a name="l00152"></a>00152             {
<a name="l00153"></a>00153               nb_comp++;
<a name="l00154"></a>00154               DivVelocityFaces(face) += DivVelocityElements(elem)*(volumes_entrelaces_Cl(face)/volumes(elem));
<a name="l00155"></a>00155             }
<a name="l00156"></a>00156         }
<a name="l00157"></a>00157       DivVelocityFaces(face) /= nb_comp;
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160   <span class="keywordtype">int</span> size = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;nb_faces();
<a name="l00161"></a>00161   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face=premiere_fac_std; face&lt;size; face++)
<a name="l00162"></a>00162     {
<a name="l00163"></a>00163       <span class="keywordtype">int</span> nb_comp=0;
<a name="l00164"></a>00164       DivVelocityFaces(face)=0;
<a name="l00165"></a>00165       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0 ; i&lt;2 ; i++)
<a name="l00166"></a>00166         {
<a name="l00167"></a>00167           <span class="keywordtype">int</span> elem= face_voisins(face,i);
<a name="l00168"></a>00168           <span class="keywordflow">if</span> (elem!=-1)
<a name="l00169"></a>00169             {
<a name="l00170"></a>00170               nb_comp++;
<a name="l00171"></a>00171               DivVelocityFaces(face) += DivVelocityElements(elem)*(volumes_entrelaces(face)/volumes(elem));
<a name="l00172"></a>00172             }
<a name="l00173"></a>00173         }
<a name="l00174"></a>00174       DivVelocityFaces(face) /= nb_comp;
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 <span class="comment">// Precondition:</span>
<a name="l00179"></a>00179 <span class="comment">// Parametre:</span>
<a name="l00180"></a>00180 <span class="comment">// Signification:</span>
<a name="l00181"></a>00181 <span class="comment">// Valeurs par defaut:</span>
<a name="l00182"></a>00182 <span class="comment">// Contraintes:</span>
<a name="l00183"></a>00183 <span class="comment">// Acces:</span>
<a name="l00184"></a>00184 <span class="comment">// Exception:</span>
<a name="l00185"></a>00185 <span class="comment">// Effets de bord:</span>
<a name="l00186"></a>00186 <span class="comment">// Postcondition:</span>
<a name="l00187"></a>00187 <span class="comment">//</span>
<a name="l00188"></a>00188 <span class="comment">//</span><span class="comment"></span>
<a name="l00189"></a>00189 <span class="comment">//! Calcule le second membre de l&#39;equation de continuite pour une discretisation VEF_P1B:&lt;br&gt;div(U) = W = dZ/dT + U.grad(Z)    avec Z=ln(rho)</span>
<a name="l00190"></a>00190 <span class="comment"></span><span class="comment">/** \return DoubleTab\&amp;&lt;br&gt;</span>
<a name="l00191"></a>00191 <span class="comment">Signification: rho discretise par face&lt;br&gt;</span>
<a name="l00192"></a>00192 <span class="comment">Contraintes: */</span>
<a name="l00193"></a><a class="code" href="classEOS__Tools__VEF.html#a7c5209bc1c13e4b5d01783369e3de67a">00193</a> <span class="keywordtype">void</span> <a class="code" href="classEOS__Tools__VEF.html#a7c5209bc1c13e4b5d01783369e3de67a" title="Calcule le second membre de l&#39;equation de continuite pour une discretisation VEF_P1B: div(U) = W = dZ...">EOS_Tools_VEF::secmembre_divU_Z</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_W)<span class="keyword"> const</span>
<a name="l00194"></a>00194 <span class="keyword"></span>{
<a name="l00195"></a>00195   <span class="keywordtype">double</span> dt = <a class="code" href="classEOS__Tools__VEF.html#a03d7fde27a936047bcea1de61013332e">le_fluide</a>().<a class="code" href="classFluide__Dilatable__base.html#a81a6a2a05b803a649755014b493c13be">vitesse</a>()-&gt;equation().schema_temps().pas_de_temps();
<a name="l00196"></a>00196   <span class="keywordtype">int</span> face, elem, som,som_glob;
<a name="l00197"></a>00197   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_sommets = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;face_sommets();
<a name="l00198"></a>00198   <span class="keywordtype">int</span> nb_elem_tot=<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;nb_elem_tot();
<a name="l00199"></a>00199   <span class="keywordtype">int</span> nb_som_tot=<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;zone().nb_som_tot();
<a name="l00200"></a>00200   <span class="keywordtype">int</span> nb_faces_tot=<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;nb_faces_tot();
<a name="l00201"></a>00201   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eq=<a class="code" href="classEOS__Tools__VEF.html#a03d7fde27a936047bcea1de61013332e">le_fluide</a>().<a class="code" href="classFluide__Dilatable__base.html#a81a6a2a05b803a649755014b493c13be">vitesse</a>()-&gt;equation();
<a name="l00202"></a>00202   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> tab_dZ;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 <span class="comment">// Dimensionnement de tab_dZ</span>
<a name="l00205"></a>00205   <span class="keyword">const</span> <a class="code" href="classNavier__Stokes__std.html" title="classe Navier_Stokes_std Cette classe porte les termes de l&#39;equation de la dynamique pour un fluide s...">Navier_Stokes_std</a>&amp; eqns = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classNavier__Stokes__std.html" title="classe Navier_Stokes_std Cette classe porte les termes de l&#39;equation de la dynamique pour un fluide s...">Navier_Stokes_std</a>,eq);
<a name="l00206"></a>00206   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; pression = eqns.<a class="code" href="classNavier__Stokes__std.html#afbb8f39bdfd70328dfad21bf2b9dd45a" title="Renvoie le champ de pression.">pression</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>();
<a name="l00207"></a>00207   tab_dZ = pression;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209   <a class="code" href="classDoubleVect.html">DoubleVect</a> tab_rhon_som(nb_som_tot);
<a name="l00210"></a>00210   <a class="code" href="classDoubleVect.html">DoubleVect</a> volume_int_som(nb_som_tot);
<a name="l00211"></a>00211   <a class="code" href="classDoubleVect.html">DoubleVect</a> tab_rhonp1_som(nb_som_tot);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_rhon = <a class="code" href="classEOS__Tools__VEF.html#a03d7fde27a936047bcea1de61013332e">le_fluide</a>().<a class="code" href="classFluide__Dilatable__base.html#a3225165b2a79168fd28eaafa1b879165">loi_etat</a>()-&gt;rho_n();
<a name="l00214"></a>00214   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_rhonp1 = <a class="code" href="classEOS__Tools__VEF.html#a03d7fde27a936047bcea1de61013332e">le_fluide</a>().<a class="code" href="classFluide__Dilatable__base.html#a3225165b2a79168fd28eaafa1b879165">loi_etat</a>()-&gt;rho_np1();
<a name="l00215"></a>00215   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> tab_rhonP1_,tab_rhonp1P1_;
<a name="l00216"></a>00216   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; porosite_face = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;porosite_face();
<a name="l00217"></a>00217   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_rhonP1=<a class="code" href="Porosites__champ_8cpp.html#a2340e7d73d0f9d34926d012fe1b1d884" title="renvoit le tableau res, res=org si flag=0, res= porosite*org sinon attention ne pas modifier res car ...">modif_par_porosite_si_flag</a>(tab_rhon,tab_rhonP1_,1,porosite_face);
<a name="l00218"></a>00218   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_rhonp1P1=<a class="code" href="Porosites__champ_8cpp.html#a2340e7d73d0f9d34926d012fe1b1d884" title="renvoit le tableau res, res=org si flag=0, res= porosite*org sinon attention ne pas modifier res car ...">modif_par_porosite_si_flag</a>(tab_rhonp1,tab_rhonp1P1_,1,porosite_face);
<a name="l00219"></a>00219   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;elem_faces();
<a name="l00220"></a>00220   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;volumes();
<a name="l00221"></a>00221   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes_entrelaces = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;volumes_entrelaces();
<a name="l00222"></a>00222   <span class="keyword">const</span> <a class="code" href="classZone__VEF__PreP1b.html">Zone_VEF_PreP1b</a>&amp; zp1b=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF__PreP1b.html">Zone_VEF_PreP1b</a>,<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>.<a class="code" href="classRef__Zone__VEF.html#aafd9a5ee1a76f290c9c6b5447b0c8d30">valeur</a>());
<a name="l00223"></a>00223   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes_controle=zp1b.<a class="code" href="classZone__VEF__PreP1b.html#ac8282d378ae480144d75129df4a8c55c">volume_aux_sommets</a>();
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <span class="keywordtype">double</span> rn,rnp1;
<a name="l00226"></a>00226   <span class="keywordtype">int</span> nfe = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;zone().nb_faces_elem();
<a name="l00227"></a>00227   <span class="keywordtype">int</span> nsf = <a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;nb_som_face();
<a name="l00228"></a>00228   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;zone().domaine();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 <span class="comment">// calcul de la somme des volumes entrelacees autour d&#39;un sommet</span>
<a name="l00231"></a>00231   volume_int_som=0.;
<a name="l00232"></a>00232   <span class="keywordflow">for</span> (face=0 ; face&lt;nb_faces_tot ; face++)
<a name="l00233"></a>00233     <span class="keywordflow">for</span> (som=0 ; som&lt;nsf ; som++)
<a name="l00234"></a>00234       {
<a name="l00235"></a>00235         som_glob=dom.<a class="code" href="classDomaine.html#a37cc657f1907d53b0d5a573da862af80">get_renum_som_perio</a>(face_sommets(face,som));
<a name="l00236"></a>00236         volume_int_som(som_glob)+=volumes_entrelaces(face);
<a name="l00237"></a>00237       }
<a name="l00238"></a>00238 <span class="comment">// discretisation de rho sur les sommets</span>
<a name="l00239"></a>00239   tab_rhon_som=0;
<a name="l00240"></a>00240   tab_rhonp1_som=0;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <span class="keywordtype">double</span> pond;
<a name="l00243"></a>00243   pond=1./nsf; <span class="comment">//!&lt; version_originale</span>
<a name="l00244"></a>00244 <span class="comment"></span>  <span class="keywordflow">for</span> (face=0 ; face&lt;nb_faces_tot ; face++)
<a name="l00245"></a>00245     {
<a name="l00246"></a>00246       <span class="keywordflow">for</span> (som=0 ; som&lt;nsf ; som++)
<a name="l00247"></a>00247         {
<a name="l00248"></a>00248           som_glob=dom.<a class="code" href="classDomaine.html#a37cc657f1907d53b0d5a573da862af80">get_renum_som_perio</a>(face_sommets(face,som));
<a name="l00249"></a>00249           pond=volumes_entrelaces(face)/volume_int_som(som_glob);
<a name="l00250"></a>00250           tab_rhon_som(som_glob) += tab_rhonP1(face)*pond;
<a name="l00251"></a>00251           tab_rhonp1_som(som_glob) += tab_rhonp1P1(face)*pond;
<a name="l00252"></a>00252         }
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="comment">// Corrections pour test de la moyenne de la derivee de la masse volumique</span>
<a name="l00256"></a>00256   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;EOS_Tools_VEF::secmembre_divU_Z tab_dZ=&quot;</span>,tab_dZ);
<a name="l00257"></a>00257   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;EOS_Tools_VEF::secmembre_divU_Z tab_rhonP1=&quot;</span>,tab_rhonP1);
<a name="l00258"></a>00258   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;EOS_Tools_VEF::secmembre_divU_Z tab_rhonp1P1=&quot;</span>,tab_rhonp1P1);
<a name="l00259"></a>00259   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;EOS_Tools_VEF::secmembre_divU_Z dt=&quot;</span>,dt);
<a name="l00260"></a>00260 
<a name="l00261"></a>00261   <span class="keywordtype">int</span> decal=0;
<a name="l00262"></a>00262   <span class="keywordtype">int</span> p_has_elem=zp1b.<a class="code" href="classZone__VEF__PreP1b.html#aee2def53aa92584d7945e7c3d0d98963">get_alphaE</a>();
<a name="l00263"></a>00263   <span class="keywordtype">int</span> nb_case=nb_elem_tot*p_has_elem;
<a name="l00264"></a>00264   <span class="keywordflow">for</span> (elem=0 ; elem&lt;nb_case ; elem++)
<a name="l00265"></a>00265     {
<a name="l00266"></a>00266       rn=0;
<a name="l00267"></a>00267       rnp1=0;
<a name="l00268"></a>00268       <span class="keywordflow">for</span> (face=0 ; face&lt;nfe ; face++)
<a name="l00269"></a>00269         {
<a name="l00270"></a>00270           rn += tab_rhonP1(elem_faces(elem,face));
<a name="l00271"></a>00271           rnp1 += tab_rhonp1P1(elem_faces(elem,face));
<a name="l00272"></a>00272         }
<a name="l00273"></a>00273       tab_dZ(elem) = (rnp1-rn)/(nfe*dt);
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   decal+=nb_case;
<a name="l00277"></a>00277   tab_dZ.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00278"></a>00278 
<a name="l00279"></a>00279   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;EOS_Tools_VEF::secmembre_divU_Z tab_dZ=&quot;</span>,tab_dZ);
<a name="l00280"></a>00280   <span class="keywordtype">int</span> p_has_som=zp1b.<a class="code" href="classZone__VEF__PreP1b.html#ad7fbcb5567dcc2e6f0a0ed85ce90a4fa">get_alphaS</a>();
<a name="l00281"></a>00281   nb_case=nb_som_tot*p_has_som;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283   <span class="keywordflow">for</span> (som=0 ; som&lt;nb_case ; som++)
<a name="l00284"></a>00284     tab_dZ(decal+som) = ((tab_rhonp1_som(som))-(tab_rhon_som(som)))/dt;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286   decal+=nb_case;
<a name="l00287"></a>00287   <span class="keywordtype">int</span> p_has_arrete=zp1b.<a class="code" href="classZone__VEF__PreP1b.html#a9d02e2431efb6e75c3d733ff06f89549">get_alphaA</a>();
<a name="l00288"></a>00288   <span class="keywordtype">int</span> nb_ar_tot=<a class="code" href="classEOS__Tools__VEF.html#ab82887d551b5c7e2f8248c66fdff9d1c">la_zone</a>-&gt;zone().nb_aretes_tot();
<a name="l00289"></a>00289   nb_case=nb_ar_tot*p_has_arrete;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ar=0 ; ar&lt;nb_case ; ar++)
<a name="l00292"></a>00292     tab_dZ(decal+ar) =0;
<a name="l00293"></a>00293 
<a name="l00294"></a>00294   assert(decal+nb_case==tab_W.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>());
<a name="l00295"></a>00295   tab_dZ.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00296"></a>00296   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;EOS_Tools_VEF::secmembre_divU_Z tab_dZ=&quot;</span>,tab_dZ);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298   <span class="keywordtype">double</span> coefdivelem=1,coefdivsom=1;
<a name="l00299"></a>00299   decal=0;
<a name="l00300"></a>00300   nb_case=nb_elem_tot*p_has_elem;
<a name="l00301"></a>00301 
<a name="l00302"></a>00302   <span class="keywordflow">for</span> (elem=0 ; elem&lt;nb_case ; elem++)
<a name="l00303"></a>00303     tab_W(elem) = -coefdivelem*tab_dZ(elem) * volumes(elem);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;EOS_Tools_VEF::secmembre_divU_Z tabW elem&quot;</span>,tab_W);
<a name="l00306"></a>00306   decal+=nb_case;
<a name="l00307"></a>00307   nb_case=nb_som_tot*p_has_som;
<a name="l00308"></a>00308 
<a name="l00309"></a>00309   <span class="keywordflow">for</span> (som=0 ; som&lt;nb_case ; som++)
<a name="l00310"></a>00310     tab_W(decal+som) = -coefdivsom*tab_dZ(decal+som)*volumes_controle(som)*1;
<a name="l00311"></a>00311 
<a name="l00312"></a>00312   decal+=nb_case;
<a name="l00313"></a>00313   nb_case=nb_ar_tot*p_has_arrete;
<a name="l00314"></a>00314   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ar=0 ; ar&lt;nb_case ; ar++)
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316 <span class="comment">// pour l&#39;instant on n&#39;a pas calcule tab_dZ aux aretes</span>
<a name="l00317"></a>00317       assert(tab_dZ(decal+ar)==0);
<a name="l00318"></a>00318       tab_W(decal+ar) =0;
<a name="l00319"></a>00319     }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321   assert(decal+nb_case==tab_W.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>());
<a name="l00322"></a>00322   tab_W.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00323"></a>00323   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;EOS_Tools_VEF::secmembre_divU_Z tab_W=&quot;</span>,tab_W);
<a name="l00324"></a>00324 }
<a name="l00325"></a>00325 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:32 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
