<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Framework/Operateur_base.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Framework/Operateur_base.cpp</div>  </div>
</div>
<div class="contents">
<a href="Operateur__base_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Operateur_base.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Framework</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/44</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Operateur__base_8h.html">Operateur_base.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Temps__base_8h.html">Schema_Temps_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="EcrFicPartage_8h.html">EcrFicPartage.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Periodique_8h.html">Periodique.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Champ_8h.html">Champ.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Front__VF_8h.html">Front_VF.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Matrice__Morse_8h.html">Matrice_Morse.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTrav_8h.html">DoubleTrav.h</a>&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="Operateur__base_8cpp.html#a9c63ac619604395885e05c62d2fb6505">00035</a> <a class="code" href="Declare__Base_8h.html#a279604f97959498f17b67e986dfd4486">Implemente_base_sans_constructeur</a>(<a class="code" href="classOperateur__base.html" title="classe Operateur_base Classe est la base de la hierarchie des objets representant un operateur utilis...">Operateur_base</a>,<span class="stringliteral">&quot;Operateur_base&quot;</span>,<a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>);
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="classOperateur__base.html#a4a87ad5cb1a9521846d68f0f7043cb7f">00037</a> <a class="code" href="classOperateur__base.html#a4a87ad5cb1a9521846d68f0f7043cb7f">Operateur_base::Operateur_base</a>()
<a name="l00038"></a>00038 {
<a name="l00039"></a>00039   <a class="code" href="classOperateur__base.html#aa800ac60ec1afa615386d816a2bc1095">decal_temps</a>=0;
<a name="l00040"></a>00040   <a class="code" href="classOperateur__base.html#a656cefa4eb2adfc957e9e4c1fd651749">nb_ss_pas_de_temps</a>=1;
<a name="l00041"></a>00041   <a class="code" href="classOperateur__base.html#a0ffe040617353804459652b00e98d414" title="minimal size of a column for .out files (based on cl name length)">col_width_</a> = -1;
<a name="l00042"></a>00042 }
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="comment">// Precondition:</span>
<a name="l00045"></a>00045 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00046"></a>00046 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00047"></a>00047 <span class="comment">// Valeurs par defaut:</span>
<a name="l00048"></a>00048 <span class="comment">// Contraintes:</span>
<a name="l00049"></a>00049 <span class="comment">// Acces:</span>
<a name="l00050"></a>00050 <span class="comment">// Exception:</span>
<a name="l00051"></a>00051 <span class="comment">// Effets de bord:</span>
<a name="l00052"></a>00052 <span class="comment">// Postcondition:</span>
<a name="l00053"></a>00053 <span class="comment">//</span>
<a name="l00054"></a>00054 <span class="comment">//</span>
<a name="l00055"></a>00055 <span class="comment">//</span><span class="comment"></span>
<a name="l00056"></a>00056 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.&lt;br&gt;Imprime l&#39;operateur sur un flot de sortie.</span>
<a name="l00057"></a>00057 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00058"></a>00058 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00059"></a>00059 <span class="comment">Contraintes: */</span>
<a name="l00060"></a><a class="code" href="classOperateur__base.html#ae9a97fa03afc541175d5b4ed9289fa69">00060</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classOperateur__base.html#ae9a97fa03afc541175d5b4ed9289fa69" title="NE FAIT RIEN A surcharger dans les classes derivees. Imprime l&#39;operateur sur un flot de sortie...">Operateur_base::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00061"></a>00061 <span class="keyword"></span>{
<a name="l00062"></a>00062   <span class="keywordflow">return</span> os ;
<a name="l00063"></a>00063 }
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="comment">// Precondition:</span>
<a name="l00067"></a>00067 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00068"></a>00068 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00069"></a>00069 <span class="comment">// Valeurs par defaut:</span>
<a name="l00070"></a>00070 <span class="comment">// Contraintes:</span>
<a name="l00071"></a>00071 <span class="comment">// Acces:</span>
<a name="l00072"></a>00072 <span class="comment">// Exception:</span>
<a name="l00073"></a>00073 <span class="comment">// Effets de bord:</span>
<a name="l00074"></a>00074 <span class="comment">// Postcondition:</span>
<a name="l00075"></a>00075 <span class="comment">//</span>
<a name="l00076"></a>00076 <span class="comment">//</span>
<a name="l00077"></a>00077 <span class="comment">//</span><span class="comment"></span>
<a name="l00078"></a>00078 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.&lt;br&gt;Lit un operateur sur un flot d&#39;entree.</span>
<a name="l00079"></a>00079 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00080"></a>00080 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00081"></a>00081 <span class="comment">Contraintes: */</span>
<a name="l00082"></a><a class="code" href="classOperateur__base.html#a8c4e8e5fe594645d0440f3856904fb3e">00082</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classOperateur__base.html#a8c4e8e5fe594645d0440f3856904fb3e" title="NE FAIT RIEN A surcharger dans les classes derivees. Lit un operateur sur un flot d&#39;entree...">Operateur_base::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00083"></a>00083 {
<a name="l00084"></a>00084   <span class="keywordflow">return</span> is ;
<a name="l00085"></a>00085 }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 <span class="comment">// Precondition:</span>
<a name="l00089"></a>00089 <span class="comment">// Parametre: double</span>
<a name="l00090"></a>00090 <span class="comment">// Signification: un pas de temps</span>
<a name="l00091"></a>00091 <span class="comment">// Valeurs par defaut:</span>
<a name="l00092"></a>00092 <span class="comment">// Contraintes:</span>
<a name="l00093"></a>00093 <span class="comment">// Acces:</span>
<a name="l00094"></a>00094 <span class="comment">// </span>
<a name="l00095"></a>00095 <span class="comment">// Signification:</span>
<a name="l00096"></a>00096 <span class="comment">// Contraintes:</span>
<a name="l00097"></a>00097 <span class="comment">// Exception:</span>
<a name="l00098"></a>00098 <span class="comment">// Effets de bord:</span>
<a name="l00099"></a>00099 <span class="comment">// Postcondition:</span>
<a name="l00100"></a>00100 <span class="comment">//</span>
<a name="l00101"></a>00101 <span class="comment">//</span>
<a name="l00102"></a>00102 <span class="comment">//</span><span class="comment"></span>
<a name="l00103"></a>00103 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.&lt;br&gt;Mise a jour de l&#39;operateur</span>
<a name="l00104"></a><a class="code" href="classOperateur__base.html#a55ee9300d78cf0d8bdf7f48c56feb7ce">00104</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a55ee9300d78cf0d8bdf7f48c56feb7ce" title="NE FAIT RIEN A surcharger dans les classes derivees. Mise a jour de l&#39;operateur.">Operateur_base::mettre_a_jour</a>(<span class="keywordtype">double</span> )
<a name="l00105"></a>00105 {
<a name="l00106"></a>00106 }
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 
<a name="l00109"></a><a class="code" href="classOperateur__base.html#ad4c4e376365aa056c1a9bb9093ee7878">00109</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#ad4c4e376365aa056c1a9bb9093ee7878">Operateur_base::abortTimeStep</a>()
<a name="l00110"></a>00110 {
<a name="l00111"></a>00111 }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="comment">// Precondition: l&#39;equation associee ne doit pas etre nulle (non associee)</span>
<a name="l00115"></a>00115 <span class="comment">// Parametre:</span>
<a name="l00116"></a>00116 <span class="comment">// Signification:</span>
<a name="l00117"></a>00117 <span class="comment">// Valeurs par defaut:</span>
<a name="l00118"></a>00118 <span class="comment">// Contraintes:</span>
<a name="l00119"></a>00119 <span class="comment">// Acces:</span>
<a name="l00120"></a>00120 <span class="comment">// </span>
<a name="l00121"></a>00121 <span class="comment">// Signification:</span>
<a name="l00122"></a>00122 <span class="comment">// Contraintes:</span>
<a name="l00123"></a>00123 <span class="comment">// Exception: pas d&#39;equation associee</span>
<a name="l00124"></a>00124 <span class="comment">// Effets de bord:</span>
<a name="l00125"></a>00125 <span class="comment">// Postcondition: l&#39;operateur est pret a etre utilise</span>
<a name="l00126"></a>00126 <span class="comment">//</span>
<a name="l00127"></a>00127 <span class="comment">//</span><span class="comment"></span>
<a name="l00128"></a>00128 <span class="comment">//! Associe l&#39;operateur a la zone_dis, la zone_Cl_dis,&lt;br&gt;et a l&#39;inconnue de son equation.</span>
<a name="l00129"></a><a class="code" href="classOperateur__base.html#a9560967884361b918b12a67813476608">00129</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a9560967884361b918b12a67813476608" title="Associe l&#39;operateur a la zone_dis, la zone_Cl_dis, et a l&#39;inconnue de son equation.">Operateur_base::completer</a>()
<a name="l00130"></a>00130 {
<a name="l00131"></a>00131   assert(<a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>());
<a name="l00132"></a>00132   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00133"></a>00133   <span class="keyword">const</span> <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; zdis= eqn.zone_dis();
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp; zcl = <a class="code" href="classOperateur__base.html#ac384ca25d512dbf7426a1fd3453b51d6">le_champ_inco</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>() ? <a class="code" href="classOperateur__base.html#ac384ca25d512dbf7426a1fd3453b51d6">le_champ_inco</a>.<a class="code" href="classRef__Champ__Inc.html#ab3e71cb33ab54f3aa25a30a23d76b494">valeur</a>()-&gt;zone_Cl_dis() : eqn.zone_Cl_dis();
<a name="l00136"></a>00136   <span class="keyword">const</span> <a class="code" href="classChamp__Inc.html">Champ_Inc</a>&amp; inco = <a class="code" href="classOperateur__base.html#ac384ca25d512dbf7426a1fd3453b51d6">le_champ_inco</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>() ? <a class="code" href="classOperateur__base.html#ac384ca25d512dbf7426a1fd3453b51d6">le_champ_inco</a>.<a class="code" href="classRef__Champ__Inc.html#ab3e71cb33ab54f3aa25a30a23d76b494">valeur</a>() : eqn.inconnue();
<a name="l00137"></a>00137   <a class="code" href="classOperateur__base.html#a4b1b8d9a5ba7872418da9cd67acf723f">associer</a>(zdis, zcl, inco);
<a name="l00138"></a>00138   <span class="keyword">const</span> <a class="code" href="classConds__lim.html">Conds_lim</a>&amp; les_cl = zcl-&gt;<a class="code" href="classZone__Cl__dis.html#aafbd0525703e23200e31796bcd4fcac6" title="Appel a l&#39;objet sous-jacent Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>();
<a name="l00139"></a>00139   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; les_cl.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); i++)
<a name="l00140"></a>00140     {
<a name="l00141"></a>00141       <span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; la_fr = les_cl[i].frontiere_dis();
<a name="l00142"></a>00142       <a class="code" href="classOperateur__base.html#a0ffe040617353804459652b00e98d414" title="minimal size of a column for .out files (based on cl name length)">col_width_</a> = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(<a class="code" href="classOperateur__base.html#a0ffe040617353804459652b00e98d414" title="minimal size of a column for .out files (based on cl name length)">col_width_</a>, la_fr.<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>().<a class="code" href="classNom.html#ae63e1d728a7586acac3935b15759eadc" title="Renvoie le nombre de caracteres de la chaine du Nom y compris le caractere zero de fin de chaine...">longueur</a>());
<a name="l00143"></a>00143     }
<a name="l00144"></a>00144   <span class="keywordtype">int</span> w_suffix = 3; <span class="comment">//!&lt; pour ajout _Mx (moment)</span>
<a name="l00145"></a>00145 <span class="comment"></span>
<a name="l00146"></a>00146 <span class="comment">// pour les champs a plusieurs composantes, le header des colonnes des fichiers .out prend la forme</span>
<a name="l00147"></a>00147 <span class="comment">// Time cl1_compo1  cl1_compo2 ...</span>
<a name="l00148"></a>00148 <span class="comment">// on prend en compte la longueur de compo1, compo2, etc...</span>
<a name="l00149"></a>00149   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> noms_compo_courts(inco-&gt;noms_compo());
<a name="l00150"></a>00150   <span class="keywordflow">if</span> (noms_compo_courts.size() &gt; 1) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; noms_compo_courts.size(); ++i)
<a name="l00151"></a>00151       {
<a name="l00152"></a>00152         noms_compo_courts[i] = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(noms_compo_courts[i]).<a class="code" href="classNom.html#ac503a087f3b2d8115f1d406646ed3c61">getSuffix</a>(eqn.inconnue().le_nom());
<a name="l00153"></a>00153         w_suffix = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(w_suffix, noms_compo_courts[i].longueur());
<a name="l00154"></a>00154       }
<a name="l00155"></a>00155   <a class="code" href="classOperateur__base.html#a0ffe040617353804459652b00e98d414" title="minimal size of a column for .out files (based on cl name length)">col_width_</a> += w_suffix;
<a name="l00156"></a>00156 }
<a name="l00157"></a>00157 
<a name="l00158"></a><a class="code" href="classOperateur__base.html#abe84c60eda12c33f3a65a1044669977a">00158</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#abe84c60eda12c33f3a65a1044669977a">Operateur_base::associer_champ</a>(<span class="keyword">const</span> <a class="code" href="classChamp__Inc.html">Champ_Inc</a>&amp; ch)
<a name="l00159"></a>00159 {
<a name="l00160"></a>00160   <a class="code" href="classOperateur__base.html#ac384ca25d512dbf7426a1fd3453b51d6">le_champ_inco</a> = ch;
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 <span class="comment">// Precondition:</span>
<a name="l00164"></a>00164 <span class="comment">// Parametre:</span>
<a name="l00165"></a>00165 <span class="comment">// Signification:</span>
<a name="l00166"></a>00166 <span class="comment">// Valeurs par defaut:</span>
<a name="l00167"></a>00167 <span class="comment">// Contraintes:</span>
<a name="l00168"></a>00168 <span class="comment">// Acces:</span>
<a name="l00169"></a>00169 <span class="comment">// Exception:</span>
<a name="l00170"></a>00170 <span class="comment">// Effets de bord:</span>
<a name="l00171"></a>00171 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00172"></a>00172 <span class="comment">//</span><span class="comment"></span>
<a name="l00173"></a>00173 <span class="comment">//! Calcul dt_stab</span>
<a name="l00174"></a>00174 <span class="comment"></span><span class="comment">/** \return double&lt;br&gt;</span>
<a name="l00175"></a>00175 <span class="comment">Signification: renvoie toujours  1.e30&lt;br&gt;</span>
<a name="l00176"></a>00176 <span class="comment">Contraintes: */</span>
<a name="l00177"></a><a class="code" href="classOperateur__base.html#a2fb4ae5fd71c7a25dd2eff752dd23716">00177</a> <span class="keywordtype">double</span> <a class="code" href="classOperateur__base.html#a2fb4ae5fd71c7a25dd2eff752dd23716" title="Calcul dt_stab.">Operateur_base::calculer_dt_stab</a>()<span class="keyword"> const</span>
<a name="l00178"></a>00178 <span class="keyword"></span>{
<a name="l00179"></a>00179   <span class="keywordflow">return</span> 1.e30;
<a name="l00180"></a>00180 }
<a name="l00181"></a>00181 
<a name="l00182"></a><a class="code" href="classOperateur__base.html#a684b237c35dac8e1b98f9f5187297887">00182</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a684b237c35dac8e1b98f9f5187297887">Operateur_base::calculer_dt_local</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; dt)<span class="keyword"> const</span>
<a name="l00183"></a>00183 <span class="keyword"></span>{
<a name="l00184"></a>00184   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You must overload the method &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()
<a name="l00185"></a>00185        &lt;&lt; <span class="stringliteral">&quot;::calculer_dt_local(DoubleVect&amp;)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00186"></a>00186   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00187"></a>00187 }
<a name="l00188"></a>00188 <span class="comment">// Precondition:</span>
<a name="l00189"></a>00189 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00190"></a>00190 <span class="comment">// Signification:</span>
<a name="l00191"></a>00191 <span class="comment">// Valeurs par defaut:</span>
<a name="l00192"></a>00192 <span class="comment">// Contraintes:</span>
<a name="l00193"></a>00193 <span class="comment">// Acces:</span>
<a name="l00194"></a>00194 <span class="comment">// Exception:</span>
<a name="l00195"></a>00195 <span class="comment">// Effets de bord:</span>
<a name="l00196"></a>00196 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00197"></a>00197 <span class="comment">//</span>
<a name="l00198"></a>00198 <span class="comment">//</span>
<a name="l00199"></a>00199 <span class="comment">//</span><span class="comment"></span>
<a name="l00200"></a>00200 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.&lt;br&gt;Imprime l&#39;operateur sur un flot de sortie.</span>
<a name="l00201"></a>00201 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00202"></a>00202 <span class="comment">Signification: renvoie toujours 1&lt;br&gt;</span>
<a name="l00203"></a>00203 <span class="comment">Contraintes: */</span>
<a name="l00204"></a><a class="code" href="classOperateur__base.html#ad4a04e291cd0b38a1efe5eb58b812724">00204</a> <span class="keywordtype">int</span> <a class="code" href="classOperateur__base.html#ad4a04e291cd0b38a1efe5eb58b812724" title="NE FAIT RIEN A surcharger dans les classes derivees. Imprime l&#39;operateur sur un flot de sortie...">Operateur_base::impr</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00205"></a>00205 <span class="keyword"></span>{
<a name="l00206"></a>00206   <span class="keywordflow">return</span> 1;
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="comment">// Precondition:</span>
<a name="l00211"></a>00211 <span class="comment">// Parametre: Matrice_Morse&amp;</span>
<a name="l00212"></a>00212 <span class="comment">// Signification: une matrice au format Morse</span>
<a name="l00213"></a>00213 <span class="comment">// Valeurs par defaut:</span>
<a name="l00214"></a>00214 <span class="comment">// Contraintes:</span>
<a name="l00215"></a>00215 <span class="comment">// Acces:</span>
<a name="l00216"></a>00216 <span class="comment">// </span>
<a name="l00217"></a>00217 <span class="comment">// Signification:</span>
<a name="l00218"></a>00218 <span class="comment">// Contraintes:</span>
<a name="l00219"></a>00219 <span class="comment">// Exception: methode a surcharger</span>
<a name="l00220"></a>00220 <span class="comment">// Effets de bord:</span>
<a name="l00221"></a>00221 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00222"></a>00222 <span class="comment">//</span>
<a name="l00223"></a>00223 <span class="comment">//</span><span class="comment"></span>
<a name="l00224"></a>00224 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.</span>
<a name="l00225"></a><a class="code" href="classOperateur__base.html#a66ef3c42e72d13fce0852ba92e56be6a">00225</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a66ef3c42e72d13fce0852ba92e56be6a" title="NE FAIT RIEN A surcharger dans les classes derivees.">Operateur_base::dimensionner</a>(<a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; mat)<span class="keyword"> const</span>
<a name="l00226"></a>00226 <span class="keyword"></span>{
<a name="l00227"></a>00227   <span class="comment">/* on tente dimensionner_blocs() */</span>
<a name="l00228"></a>00228   <span class="keywordflow">if</span> (<a class="code" href="classOperateur__base.html#add0b573a00ff5807bca488783aeec334">has_interface_blocs</a>()) <a class="code" href="classOperateur__base.html#a1beeeb32ed7ba7f084cf0ff81152d36a">dimensionner_blocs</a>({{ <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(), &amp;mat }});
<a name="l00229"></a>00229   <span class="keywordflow">else</span> <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() + <span class="stringliteral">&quot; : dimensionner() not coded!&quot;</span>);
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a><a class="code" href="classOperateur__base.html#ab14c204efcee803922689ee78757e2e8">00232</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#ab14c204efcee803922689ee78757e2e8">Operateur_base::dimensionner_bloc_vitesse</a>(<a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; mat)<span class="keyword"> const</span>
<a name="l00233"></a>00233 <span class="keyword"></span>{
<a name="l00234"></a>00234   <span class="comment">/* on tente dimensionner_blocs() */</span>
<a name="l00235"></a>00235   <span class="keywordflow">if</span> (<a class="code" href="classOperateur__base.html#add0b573a00ff5807bca488783aeec334">has_interface_blocs</a>()) <a class="code" href="classOperateur__base.html#a1beeeb32ed7ba7f084cf0ff81152d36a">dimensionner_blocs</a>({{ <span class="stringliteral">&quot;vitesse&quot;</span>, &amp;mat }});
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a><a class="code" href="classOperateur__base.html#a2affeabb573841181bdbe7bf0c37179e">00238</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a2affeabb573841181bdbe7bf0c37179e">Operateur_base::dimensionner_termes_croises</a>(<a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; mat, <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; autre_pb, <span class="keywordtype">int</span> nl, <span class="keywordtype">int</span> nc)<span class="keyword"> const</span>
<a name="l00239"></a>00239 <span class="keyword"></span>{
<a name="l00240"></a>00240   <span class="keywordflow">if</span> (!<a class="code" href="classOperateur__base.html#add0b573a00ff5807bca488783aeec334">has_interface_blocs</a>()) <span class="keywordflow">return</span>;
<a name="l00241"></a>00241   std::string nom_inco = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),
<a name="l00242"></a>00242               nom = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() == autre_pb.<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() ? nom_inco : nom_inco + <span class="stringliteral">&quot;_&quot;</span> + autre_pb.<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(); <span class="comment">//nom de bloc croise pour l&#39;interface_blocs</span>
<a name="l00243"></a>00243   <a class="code" href="classOperateur__base.html#a1beeeb32ed7ba7f084cf0ff81152d36a">dimensionner_blocs</a>({{ nom, &amp;mat }}, {});
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="classOperateur__base.html#a414a8b4811a7549fbfc403ae8b84947a">00246</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a414a8b4811a7549fbfc403ae8b84947a">Operateur_base::ajouter_termes_croises</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco, <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; autre_pb, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; autre_inco, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; resu)<span class="keyword"> const</span>
<a name="l00247"></a>00247 <span class="keyword"></span>{
<a name="l00248"></a>00248 <span class="comment">// si on a Interface_blocs, alors ajouter_blocs() est suffisant</span>
<a name="l00249"></a>00249   <span class="keywordflow">return</span>;
<a name="l00250"></a>00250 }
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="classOperateur__base.html#aff19b9cf46e2778cab5d259886219d86">00252</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#aff19b9cf46e2778cab5d259886219d86">Operateur_base::contribuer_termes_croises</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco, <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; autre_pb, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; autre_inco, <a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; matrice)<span class="keyword"> const</span>
<a name="l00253"></a>00253 <span class="keyword"></span>{
<a name="l00254"></a>00254   <span class="keywordflow">if</span> (!<a class="code" href="classOperateur__base.html#add0b573a00ff5807bca488783aeec334">has_interface_blocs</a>()) <span class="keywordflow">return</span>;
<a name="l00255"></a>00255   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> secmem(inco); <span class="comment">//on va le jeter</span>
<a name="l00256"></a>00256   std::string nom_inco = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),
<a name="l00257"></a>00257               nom = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() == autre_pb.<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() ? nom_inco : nom_inco + <span class="stringliteral">&quot;_&quot;</span> + autre_pb.<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(); <span class="comment">//nom de bloc croise pour l&#39;interface_blocs</span>
<a name="l00258"></a>00258   <a class="code" href="classOperateur__base.html#a0044e3ee1822094970ba5a32997fbd2a">ajouter_blocs</a>({{ nom, &amp;matrice}}, secmem, {});
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 
<a name="l00261"></a>00261 <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a1beeeb32ed7ba7f084cf0ff81152d36a">Operateur_base::dimensionner_blocs</a>(<a class="code" href="Interface__blocs_8h.html#a68e4f5c4505f6b31305de844302660bb">matrices_t</a> mats, <span class="keyword">const</span> <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a>&amp; semi_impl)<span class="keyword"> const</span>
<a name="l00262"></a>00262 <span class="keyword"></span>{
<a name="l00263"></a>00263   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() + <span class="stringliteral">&quot; : dimensionner_blocs() not coded!&quot;</span>);
<a name="l00264"></a>00264 }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a0044e3ee1822094970ba5a32997fbd2a">Operateur_base::ajouter_blocs</a>(<a class="code" href="Interface__blocs_8h.html#a68e4f5c4505f6b31305de844302660bb">matrices_t</a> mats, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; secmem, <span class="keyword">const</span> <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a>&amp; semi_impl)<span class="keyword"> const</span>
<a name="l00267"></a>00267 <span class="keyword"></span>{
<a name="l00268"></a>00268   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() + <span class="stringliteral">&quot; : ajouter_blocs() not coded!&quot;</span>);
<a name="l00269"></a>00269 }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="comment">// Precondition:</span>
<a name="l00272"></a>00272 <span class="comment">// Parametre: Matrice_Morse&amp;</span>
<a name="l00273"></a>00273 <span class="comment">// Signification: une matrice au format Morse</span>
<a name="l00274"></a>00274 <span class="comment">// Valeurs par defaut:</span>
<a name="l00275"></a>00275 <span class="comment">// Contraintes:</span>
<a name="l00276"></a>00276 <span class="comment">// Acces:</span>
<a name="l00277"></a>00277 <span class="comment">// Parametre: DoubleTab&amp;</span>
<a name="l00278"></a>00278 <span class="comment">// Signification: un tableau de valeur (double)</span>
<a name="l00279"></a>00279 <span class="comment">// Valeurs par defaut:</span>
<a name="l00280"></a>00280 <span class="comment">// Contraintes:</span>
<a name="l00281"></a>00281 <span class="comment">// Acces:</span>
<a name="l00282"></a>00282 <span class="comment">// </span>
<a name="l00283"></a>00283 <span class="comment">// Signification:</span>
<a name="l00284"></a>00284 <span class="comment">// Contraintes:</span>
<a name="l00285"></a>00285 <span class="comment">// Exception: methode a surcharger</span>
<a name="l00286"></a>00286 <span class="comment">// Effets de bord:</span>
<a name="l00287"></a>00287 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00288"></a>00288 <span class="comment">//</span>
<a name="l00289"></a>00289 <span class="comment">//</span><span class="comment"></span>
<a name="l00290"></a>00290 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.</span>
<a name="l00291"></a><a class="code" href="classOperateur__base.html#a119798b1efa7c62fb28a53c20ccd105c">00291</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a119798b1efa7c62fb28a53c20ccd105c" title="NE FAIT RIEN A surcharger dans les classes derivees.">Operateur_base::modifier_pour_Cl</a>(<a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp;, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;)<span class="keyword"> const</span>
<a name="l00292"></a>00292 <span class="keyword"></span>{
<a name="l00293"></a>00293   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;***********************************************************************************&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00294"></a>00294   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Sorry, implicit scheme is not available yet for the &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; scheme.&quot;</span> &lt;&lt; finl;
<a name="l00295"></a>00295   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Please, change this scheme or use another time scheme than &quot;</span> &lt;&lt; <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; finl;
<a name="l00296"></a>00296   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;***********************************************************************************&quot;</span> &lt;&lt; finl;
<a name="l00297"></a>00297 <span class="comment">// Cerr &lt;&lt; &quot;You must overload the method &quot; &lt;&lt; que_suis_je()</span>
<a name="l00298"></a>00298 <span class="comment">// &lt;&lt; &quot;::modifier_pour_Cl(Matrice_Morse&amp;, DoubleTab&amp; )&quot; &lt;&lt; finl;</span>
<a name="l00299"></a>00299   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00300"></a>00300 }
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="classOperateur__base.html#a883475470b7446b8b2093859494abef4">00302</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;  <a class="code" href="classOperateur__base.html#a883475470b7446b8b2093859494abef4">Operateur_base::ajouter</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; secmem)<span class="keyword"> const</span>
<a name="l00303"></a>00303 <span class="keyword"></span>{
<a name="l00304"></a>00304   <span class="comment">/* on tente ajouter_blocs */</span>
<a name="l00305"></a>00305   <span class="keywordflow">if</span> (<a class="code" href="classOperateur__base.html#add0b573a00ff5807bca488783aeec334">has_interface_blocs</a>()) <a class="code" href="classOperateur__base.html#a0044e3ee1822094970ba5a32997fbd2a">ajouter_blocs</a>({}, secmem);
<a name="l00306"></a>00306   <span class="keywordflow">else</span> <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() + <span class="stringliteral">&quot; : ajouter() not coded!&quot;</span>);
<a name="l00307"></a>00307   <span class="keywordflow">return</span> secmem;
<a name="l00308"></a>00308 }
<a name="l00309"></a>00309 
<a name="l00310"></a><a class="code" href="classOperateur__base.html#a335cb37e27a57dfeb4ce5626ae291548">00310</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;  <a class="code" href="classOperateur__base.html#a335cb37e27a57dfeb4ce5626ae291548">Operateur_base::calculer</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; secmem)<span class="keyword"> const</span>
<a name="l00311"></a>00311 <span class="keyword"></span>{
<a name="l00312"></a>00312   secmem = 0;
<a name="l00313"></a>00313   <span class="keywordflow">return</span> <a class="code" href="classOperateur__base.html#a883475470b7446b8b2093859494abef4">ajouter</a>(inco, secmem);
<a name="l00314"></a>00314 }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="comment">// Precondition:</span>
<a name="l00317"></a>00317 <span class="comment">// Parametre: DoubleTab&amp;</span>
<a name="l00318"></a>00318 <span class="comment">// Signification: un tableau de valeur (double)</span>
<a name="l00319"></a>00319 <span class="comment">// Valeurs par defaut:</span>
<a name="l00320"></a>00320 <span class="comment">// Contraintes: reference constante</span>
<a name="l00321"></a>00321 <span class="comment">// Acces:</span>
<a name="l00322"></a>00322 <span class="comment">// Parametre: Matrice_Morse&amp;</span>
<a name="l00323"></a>00323 <span class="comment">// Signification: une matrice au format Morse</span>
<a name="l00324"></a>00324 <span class="comment">// Valeurs par defaut:</span>
<a name="l00325"></a>00325 <span class="comment">// Contraintes:</span>
<a name="l00326"></a>00326 <span class="comment">// Acces:</span>
<a name="l00327"></a>00327 <span class="comment">// </span>
<a name="l00328"></a>00328 <span class="comment">// Signification:</span>
<a name="l00329"></a>00329 <span class="comment">// Contraintes:</span>
<a name="l00330"></a>00330 <span class="comment">// Exception: methode a surcharger</span>
<a name="l00331"></a>00331 <span class="comment">// Effets de bord:</span>
<a name="l00332"></a>00332 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00333"></a>00333 <span class="comment">//</span>
<a name="l00334"></a>00334 <span class="comment">//</span><span class="comment"></span>
<a name="l00335"></a>00335 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.</span>
<a name="l00336"></a><a class="code" href="classOperateur__base.html#a903e728aad8e2d490580bf264319d65f">00336</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a903e728aad8e2d490580bf264319d65f" title="NE FAIT RIEN A surcharger dans les classes derivees.">Operateur_base::contribuer_a_avec</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco, <a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; matrice)<span class="keyword"> const</span>
<a name="l00337"></a>00337 <span class="keyword"></span>{
<a name="l00338"></a>00338   <span class="comment">/* on tente ajouter_blocs() */</span>
<a name="l00339"></a>00339   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> secmem(inco); <span class="comment">//on va le jeter</span>
<a name="l00340"></a>00340   <span class="keywordflow">if</span> (<a class="code" href="classOperateur__base.html#add0b573a00ff5807bca488783aeec334">has_interface_blocs</a>()) <a class="code" href="classOperateur__base.html#a0044e3ee1822094970ba5a32997fbd2a">ajouter_blocs</a>({{ <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(), &amp;matrice }}, secmem);
<a name="l00341"></a>00341   <span class="keywordflow">else</span> <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() + <span class="stringliteral">&quot; : contribuer_a_avec() not coded!&quot;</span>);
<a name="l00342"></a>00342 }
<a name="l00343"></a>00343 
<a name="l00344"></a><a class="code" href="classOperateur__base.html#aa9070d10cd755fb7ea4d88db6292417e">00344</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#aa9070d10cd755fb7ea4d88db6292417e">Operateur_base::contribuer_bloc_vitesse</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco, <a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; matrice)<span class="keyword"> const</span>
<a name="l00345"></a>00345 <span class="keyword"></span>{
<a name="l00346"></a>00346   <span class="comment">/* on tente ajouter_blocs() */</span>
<a name="l00347"></a>00347   <span class="keywordflow">if</span> (<a class="code" href="classOperateur__base.html#add0b573a00ff5807bca488783aeec334">has_interface_blocs</a>())
<a name="l00348"></a>00348     {
<a name="l00349"></a>00349       <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> secmem(<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().inconnue().valeurs()); <span class="comment">//on va le jeter</span>
<a name="l00350"></a>00350       <a class="code" href="classOperateur__base.html#a0044e3ee1822094970ba5a32997fbd2a">ajouter_blocs</a>({{ <span class="stringliteral">&quot;vitesse&quot;</span>, &amp;matrice }}, secmem);
<a name="l00351"></a>00351     }
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 <span class="comment">// Precondition:</span>
<a name="l00355"></a>00355 <span class="comment">// Parametre: DoubleTab&amp;</span>
<a name="l00356"></a>00356 <span class="comment">// Signification: un tableau de valeur (double)</span>
<a name="l00357"></a>00357 <span class="comment">// Valeurs par defaut:</span>
<a name="l00358"></a>00358 <span class="comment">// Contraintes:</span>
<a name="l00359"></a>00359 <span class="comment">// Acces:</span>
<a name="l00360"></a>00360 <span class="comment">// </span>
<a name="l00361"></a>00361 <span class="comment">// Signification:</span>
<a name="l00362"></a>00362 <span class="comment">// Contraintes:</span>
<a name="l00363"></a>00363 <span class="comment">// Exception: methode a surcharger</span>
<a name="l00364"></a>00364 <span class="comment">// Effets de bord:</span>
<a name="l00365"></a>00365 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00366"></a>00366 <span class="comment">//</span>
<a name="l00367"></a>00367 <span class="comment">//</span><span class="comment"></span>
<a name="l00368"></a>00368 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.</span>
<a name="l00369"></a><a class="code" href="classOperateur__base.html#a1b64f0211a360c124a218be15c80d9c7">00369</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a1b64f0211a360c124a218be15c80d9c7" title="NE FAIT RIEN A surcharger dans les classes derivees.">Operateur_base::contribuer_au_second_membre</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;)<span class="keyword"> const</span>
<a name="l00370"></a>00370 <span class="keyword"></span>{
<a name="l00371"></a>00371   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You must overload the method &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()
<a name="l00372"></a>00372        &lt;&lt; <span class="stringliteral">&quot;::contribuer_au_second_membre(DoubleTab&amp;)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00373"></a>00373   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00374"></a>00374 }
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="classOperateur__base.html#a3af3295e8dd3b34cfc3640f45a47fe76">00376</a> <span class="keywordtype">int</span> <a class="code" href="classOperateur__base.html#a3af3295e8dd3b34cfc3640f45a47fe76">Operateur_base::systeme_invariant</a>()<span class="keyword"> const</span>
<a name="l00377"></a>00377 <span class="keyword"></span>{
<a name="l00378"></a>00378   <span class="keywordflow">return</span> 1;
<a name="l00379"></a>00379 }
<a name="l00380"></a><a class="code" href="classOperateur__base.html#abeae344e1c003e50fe421afdffa50d4e">00380</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#abeae344e1c003e50fe421afdffa50d4e">Operateur_base::associer_zone_cl_dis</a>(<span class="keyword">const</span> <a class="code" href="classZone__Cl__dis__base.html" title="classe Zone_Cl_dis_base Les objets Zone_Cl_dis_base representent les conditions aux limites discretis...">Zone_Cl_dis_base</a>&amp;)
<a name="l00381"></a>00381 {
<a name="l00382"></a>00382   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Operateur_base::associer_zone_cl_dis must be overloaded &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00383"></a>00383   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00384"></a>00384 }
<a name="l00385"></a>00385 
<a name="l00386"></a><a class="code" href="classOperateur__base.html#a1079052c44f7db7615ecc24448676093">00386</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a1079052c44f7db7615ecc24448676093">Operateur_base::set_fichier</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom)
<a name="l00387"></a>00387 {
<a name="l00388"></a>00388   <a class="code" href="classOperateur__base.html#a0f48883db4ca2a57a4d83f344f427723" title="Nom du fichier .out pour l&#39;impression.">out_</a>=<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>();
<a name="l00389"></a>00389   <a class="code" href="classOperateur__base.html#a0f48883db4ca2a57a4d83f344f427723" title="Nom du fichier .out pour l&#39;impression.">out_</a>+=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l00390"></a>00390   <a class="code" href="classOperateur__base.html#a0f48883db4ca2a57a4d83f344f427723" title="Nom du fichier .out pour l&#39;impression.">out_</a>+=<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>()+<span class="stringliteral">&quot;_&quot;</span>+nom;
<a name="l00391"></a>00391   <span class="keywordflow">if</span> (nom==<span class="stringliteral">&quot;&quot;</span>) <a class="code" href="classOperateur__base.html#a0f48883db4ca2a57a4d83f344f427723" title="Nom du fichier .out pour l&#39;impression.">out_</a>+=<span class="stringliteral">&quot;unknown_operator&quot;</span>;
<a name="l00392"></a>00392 }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 <span class="comment">// Precondition:</span>
<a name="l00395"></a>00395 <span class="comment">// Parametre:</span>
<a name="l00396"></a>00396 <span class="comment">// Signification:</span>
<a name="l00397"></a>00397 <span class="comment">// Valeurs par defaut:</span>
<a name="l00398"></a>00398 <span class="comment">// Contraintes:</span>
<a name="l00399"></a>00399 <span class="comment">// Acces:</span>
<a name="l00400"></a>00400 <span class="comment">// </span>
<a name="l00401"></a>00401 <span class="comment">// Signification:</span>
<a name="l00402"></a>00402 <span class="comment">// Contraintes:</span>
<a name="l00403"></a>00403 <span class="comment">// Exception: methode a surcharger</span>
<a name="l00404"></a>00404 <span class="comment">// Effets de bord:</span>
<a name="l00405"></a>00405 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00406"></a>00406 <span class="comment">//</span>
<a name="l00407"></a>00407 <span class="comment">//</span><span class="comment"></span>
<a name="l00408"></a>00408 <span class="comment">//! Ouverture/creation d&#39;un fichier d&#39;impression d&#39;un operateur&lt;br&gt;A surcharger dans les classes derivees.</span>
<a name="l00409"></a><a class="code" href="classOperateur__base.html#a163b8e77d9ad86d8c0cdd28d29903538">00409</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a163b8e77d9ad86d8c0cdd28d29903538" title="Ouverture/creation d&#39;un fichier d&#39;impression d&#39;un operateur A surcharger dans les classes derivees...">Operateur_base::ouvrir_fichier</a>(<a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a>&amp; os,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; flag)<span class="keyword"> const</span>
<a name="l00410"></a>00410 <span class="keyword"></span>{
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 <span class="comment">// flag nul on n&#39;ouvre pas le fichier</span>
<a name="l00413"></a>00413   <span class="keywordflow">if</span> (flag==0)
<a name="l00414"></a>00414     return ;
<a name="l00415"></a>00415 
<a name="l00416"></a>00416   <span class="keywordflow">if</span> (!<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00417"></a>00417     {
<a name="l00418"></a>00418       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Only master process can open &quot;</span>&lt;&lt;type&lt;&lt;<span class="stringliteral">&quot; file. See Operateur_base::ouvrir_fichier()&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00419"></a>00419       <a class="code" href="classProcess.html#a6a4b64571b10f150a70db229b839e881" title="Routine de sortie de Trio-U sur une erreur abort()">Process::abort</a>();
<a name="l00420"></a>00420     }
<a name="l00421"></a>00421   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00422"></a>00422   <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb=eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>();
<a name="l00423"></a>00423   <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch=pb.<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>();
<a name="l00424"></a>00424   <span class="keyword">const</span> <span class="keywordtype">int</span> precision = sch.<a class="code" href="classSchema__Temps__base.html#a340db779c9f9a2645534a79341fdd68b">precision_impr</a>(), wcol = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(<a class="code" href="classOperateur__base.html#a0ffe040617353804459652b00e98d414" title="minimal size of a column for .out files (based on cl name length)">col_width_</a>, sch.<a class="code" href="classSchema__Temps__base.html#a42e834b69662e506a1a33c24353d9e4a">wcol</a>()), gnuplot_header = sch.<a class="code" href="classSchema__Temps__base.html#a82bb81e8be6b45526ee0153aad87d95d">gnuplot_header</a>();
<a name="l00425"></a>00425   os.<a class="code" href="classSortie.html#abe94d93b9b47ea0dda9a961a6eff45c5">set_col_width</a>(wcol);
<a name="l00426"></a>00426   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nomfichier(<a class="code" href="classOperateur__base.html#a0f48883db4ca2a57a4d83f344f427723" title="Nom du fichier .out pour l&#39;impression.">out_</a>);
<a name="l00427"></a>00427   <span class="keywordflow">if</span> (type!=<span class="stringliteral">&quot;&quot;</span>) nomfichier+=(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>)<span class="stringliteral">&quot;_&quot;</span>+type;
<a name="l00428"></a>00428   nomfichier+=<span class="stringliteral">&quot;.out&quot;</span>;
<a name="l00429"></a>00429   <span class="keyword">struct </span>stat f;
<a name="l00430"></a>00430 <span class="comment">// On cree le fichier a la premiere impression avec l&#39;en tete ou si le fichier n&#39;existe pas</span>
<a name="l00431"></a>00431   <span class="keywordflow">if</span> (stat(nomfichier,&amp;f) || (sch.<a class="code" href="classSchema__Temps__base.html#a84c5b1a3eb859cd76e245ae0b2d0a9ef" title="Renvoie le nombre d&#39;impressions effectuees.">nb_impr</a>()==1 &amp;&amp; !pb.<a class="code" href="classProbleme__base.html#acafc48b3c050d6c292bb8395a7904a33">reprise_effectuee</a>()))
<a name="l00432"></a>00432     {
<a name="l00433"></a>00433       os.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nomfichier);
<a name="l00434"></a>00434 
<a name="l00435"></a>00435       std::vector&lt;std::string&gt; comp_m = {<span class="stringliteral">&quot;_Mx&quot;</span>, <span class="stringliteral">&quot;_My&quot;</span>, <span class="stringliteral">&quot;_Mz&quot;</span>};
<a name="l00436"></a>00436       os &lt;&lt; (<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>)<span class="stringliteral">&quot;# Printing on the boundaries of the equation &quot;</span>+eqn.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()+<span class="stringliteral">&quot; of the problem &quot;</span>+eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00437"></a>00437       os &lt;&lt; <span class="stringliteral">&quot;# &quot;</span> &lt;&lt; (type==<span class="stringliteral">&quot;moment&quot;</span> ? <span class="stringliteral">&quot;Moment of &quot;</span> : <span class="stringliteral">&quot;&quot;</span>) &lt;&lt; <a class="code" href="classOperateur__base.html#ac00607c65da4171ae83f3a9bcb3eaaa2">description</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439       <span class="keywordflow">if</span> (!gnuplot_header) os &lt;&lt; <span class="stringliteral">&quot;#&quot;</span>;
<a name="l00440"></a>00440       os.<a class="code" href="classSortie.html#abe94d93b9b47ea0dda9a961a6eff45c5">set_col_width</a>(wcol - !gnuplot_header);
<a name="l00441"></a>00441       os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>(<span class="stringliteral">&quot;Time&quot;</span>);
<a name="l00442"></a>00442       os.<a class="code" href="classSortie.html#abe94d93b9b47ea0dda9a961a6eff45c5">set_col_width</a>(wcol);
<a name="l00443"></a>00443       <span class="keyword">const</span> <a class="code" href="classConds__lim.html">Conds_lim</a>&amp; les_cls=eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>()-&gt;zone_Cl_dis().les_conditions_limites();
<a name="l00444"></a>00444 
<a name="l00445"></a>00445       <span class="keywordflow">if</span> (<a class="code" href="classOperateur__base.html#a451f51b41518ddbc0d3f586a8177d319" title="Tableau contenant les flux sur les bords de l&#39;operateur.">flux_bords_</a>.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>()!=2)
<a name="l00446"></a>00446         {
<a name="l00447"></a>00447           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;flux_bords_ not dimensioned for the operator &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00448"></a>00448           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00449"></a>00449         }
<a name="l00450"></a>00450 
<a name="l00451"></a>00451 <span class="comment">// s&#39;il y a plusieurs composantes par CL, on se sert des noms de composante de l&#39;inconnue</span>
<a name="l00452"></a>00452       <span class="keywordtype">int</span> nb_compo = <a class="code" href="classOperateur__base.html#a451f51b41518ddbc0d3f586a8177d319" title="Tableau contenant les flux sur les bords de l&#39;operateur.">flux_bords_</a>.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00453"></a>00453       <span class="keywordflow">if</span> (type==<span class="stringliteral">&quot;moment&quot;</span> &amp;&amp; <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> == 2) nb_compo=1;
<a name="l00454"></a>00454       <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> noms_compo_courts(eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>()-&gt;noms_compo());
<a name="l00455"></a>00455       <span class="keywordflow">if</span> (nb_compo &gt; 1) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; noms_compo_courts.size(); ++i)
<a name="l00456"></a>00456           noms_compo_courts[i] = <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(noms_compo_courts[i]).<a class="code" href="classNom.html#ac503a087f3b2d8115f1d406646ed3c61">getSuffix</a>(eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>());
<a name="l00457"></a>00457 
<a name="l00458"></a>00458 <span class="comment">// ecriture de l&#39;entete des colonnes de la forme</span>
<a name="l00459"></a>00459 <span class="comment">// Time cl1  cl2  cl3  ...</span>
<a name="l00460"></a>00460 <span class="comment">// ou s&#39;il y a plusieurs composantes :</span>
<a name="l00461"></a>00461 <span class="comment">// Time cl1_compo1  cl1_compo2 cl2 compo1 cl2_compo2 ...</span>
<a name="l00462"></a>00462       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_cl=0; num_cl&lt;les_cls.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); num_cl++)
<a name="l00463"></a>00463         {
<a name="l00464"></a>00464           <span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; la_fr = les_cls[num_cl].frontiere_dis();
<a name="l00465"></a>00465           <span class="keywordflow">if</span> (type!=<span class="stringliteral">&quot;sum&quot;</span> || eqn.<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classZone__dis.html#a544a4bbef7158ed91f3dc33970340889" title="Appel a l&#39;objet sous-jacent. Renvoie la zone associee. (version const)">zone</a>().<a class="code" href="classZone.html#aa5780fa644b13f8172c4805336846dec">Bords_a_imprimer_sum</a>().<a class="code" href="classList__Nom.html#aafe66fe06c0dd82cb2641fcaf774db07">contient</a>(la_fr.<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>()))
<a name="l00466"></a>00466             {
<a name="l00467"></a>00467               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> ch = la_fr.<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>();
<a name="l00468"></a>00468               <span class="keywordflow">if</span> (type==<span class="stringliteral">&quot;moment&quot;</span>)
<a name="l00469"></a>00469                 {
<a name="l00470"></a>00470                   <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==2)
<a name="l00471"></a>00471                     os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>((ch + comp_m[2].c_str()).getChar());
<a name="l00472"></a>00472                   <span class="keywordflow">else</span>
<a name="l00473"></a>00473                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; ++d)
<a name="l00474"></a>00474                       os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>((ch + comp_m[d].c_str()).getChar());
<a name="l00475"></a>00475                 }
<a name="l00476"></a>00476               <span class="keywordflow">else</span>
<a name="l00477"></a>00477                 {
<a name="l00478"></a>00478                   <span class="keywordflow">if</span> (nb_compo &gt; 1) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; nb_compo; ++d)
<a name="l00479"></a>00479                       {
<a name="l00480"></a>00480                         os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>((ch + <span class="stringliteral">&quot;_&quot;</span> + noms_compo_courts[d]).getChar());
<a name="l00481"></a>00481                       }
<a name="l00482"></a>00482                   <span class="keywordflow">else</span> os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>(ch.<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>());
<a name="l00483"></a>00483 <span class="comment">// if periodic BC, we write the boundary name twice on the header of .out files</span>
<a name="l00484"></a>00484                   <span class="keywordflow">if</span> ((<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>,les_cls[num_cl].<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>())) &amp;&amp; (<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>()+<span class="stringliteral">&quot;_&quot;</span>+eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>()+<span class="stringliteral">&quot;_Force_pression&quot;</span>!=<a class="code" href="classOperateur__base.html#a0f48883db4ca2a57a4d83f344f427723" title="Nom du fichier .out pour l&#39;impression.">out_</a>))
<a name="l00485"></a>00485                     {
<a name="l00486"></a>00486                       <span class="keywordflow">if</span> (nb_compo &gt; 1) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; nb_compo; ++d)
<a name="l00487"></a>00487                           {
<a name="l00488"></a>00488                             os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>((ch + <span class="stringliteral">&quot;_&quot;</span> + noms_compo_courts[d]).getChar());
<a name="l00489"></a>00489                           }
<a name="l00490"></a>00490                       <span class="keywordflow">else</span> os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>(ch.<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>());
<a name="l00491"></a>00491                     }
<a name="l00492"></a>00492                 }
<a name="l00493"></a>00493             }
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495       <span class="keywordflow">if</span> (type!=<span class="stringliteral">&quot;sum&quot;</span> &amp;&amp; type!=<span class="stringliteral">&quot;moment&quot;</span>) <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>()+<span class="stringliteral">&quot;_&quot;</span>+eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>()+<span class="stringliteral">&quot;_Force_pression&quot;</span>!=<a class="code" href="classOperateur__base.html#a0f48883db4ca2a57a4d83f344f427723" title="Nom du fichier .out pour l&#39;impression.">out_</a>)
<a name="l00496"></a>00496           {
<a name="l00497"></a>00497             <span class="keywordflow">if</span> (nb_compo &gt; 1) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; nb_compo; ++d)
<a name="l00498"></a>00498                 os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>((<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;Total_&quot;</span>) + noms_compo_courts[d]).getChar());
<a name="l00499"></a>00499             <span class="keywordflow">else</span> os.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>(<span class="stringliteral">&quot;Total&quot;</span>);
<a name="l00500"></a>00500           }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502       os &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504 <span class="comment">// Sinon on l&#39;ouvre</span>
<a name="l00505"></a>00505   <span class="keywordflow">else</span>
<a name="l00506"></a>00506     {
<a name="l00507"></a>00507       os.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nomfichier,ios::app);
<a name="l00508"></a>00508     }
<a name="l00509"></a>00509   os.<a class="code" href="classSortie__Fichier__base.html#a489ca01946f4e2a7a9aa8f3a3d949b08">precision</a>(precision);
<a name="l00510"></a>00510   os.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l00511"></a>00511 }
<a name="l00512"></a>00512 
<a name="l00513"></a>00513 <span class="comment">// Precondition:</span>
<a name="l00514"></a>00514 <span class="comment">// Parametre:</span>
<a name="l00515"></a>00515 <span class="comment">// Signification:</span>
<a name="l00516"></a>00516 <span class="comment">// Valeurs par defaut:</span>
<a name="l00517"></a>00517 <span class="comment">// Contraintes:</span>
<a name="l00518"></a>00518 <span class="comment">// Acces:</span>
<a name="l00519"></a>00519 <span class="comment">// </span>
<a name="l00520"></a>00520 <span class="comment">// Signification:</span>
<a name="l00521"></a>00521 <span class="comment">// Contraintes:</span>
<a name="l00522"></a>00522 <span class="comment">// Exception: methode a surcharger</span>
<a name="l00523"></a>00523 <span class="comment">// Effets de bord:</span>
<a name="l00524"></a>00524 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00525"></a>00525 <span class="comment">//</span>
<a name="l00526"></a>00526 <span class="comment">//</span><span class="comment"></span>
<a name="l00527"></a>00527 <span class="comment">//! Ouverture/creation d&#39;un fichier d&#39;impression d&#39;un operateur&lt;br&gt;A surcharger dans les classes derivees.</span>
<a name="l00528"></a><a class="code" href="classOperateur__base.html#a75f3b320ba6d2b58ab1a43a10f317de4">00528</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a75f3b320ba6d2b58ab1a43a10f317de4" title="Ouverture/creation d&#39;un fichier d&#39;impression d&#39;un operateur A surcharger dans les classes derivees...">Operateur_base::ouvrir_fichier_partage</a>(<a class="code" href="classEcrFicPartage.html">EcrFicPartage</a>&amp; os,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; flag)<span class="keyword"> const</span>
<a name="l00529"></a>00529 <span class="keyword"></span>{
<a name="l00530"></a>00530 
<a name="l00531"></a>00531 <span class="comment">// flag nul on n&#39;ouvre pas le fichier</span>
<a name="l00532"></a>00532   <span class="keywordflow">if</span> (flag==0)
<a name="l00533"></a>00533     return ;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535   <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb=<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>();
<a name="l00536"></a>00536   <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch=pb.<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>();
<a name="l00537"></a>00537   <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; precision=sch.<a class="code" href="classSchema__Temps__base.html#a340db779c9f9a2645534a79341fdd68b">precision_impr</a>();
<a name="l00538"></a>00538   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nomfichier(<a class="code" href="classOperateur__base.html#a0f48883db4ca2a57a4d83f344f427723" title="Nom du fichier .out pour l&#39;impression.">out_</a>);
<a name="l00539"></a>00539   <span class="keywordflow">if</span> (type!=<span class="stringliteral">&quot;&quot;</span>) nomfichier+=(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>)<span class="stringliteral">&quot;_&quot;</span>+type;
<a name="l00540"></a>00540   nomfichier+=<span class="stringliteral">&quot;.face&quot;</span>;
<a name="l00541"></a>00541 <span class="comment">// On cree le fichier a la premiere impression avec l&#39;en tete</span>
<a name="l00542"></a>00542   <span class="keywordflow">if</span> (sch.<a class="code" href="classSchema__Temps__base.html#a84c5b1a3eb859cd76e245ae0b2d0a9ef" title="Renvoie le nombre d&#39;impressions effectuees.">nb_impr</a>()==1 &amp;&amp; !pb.<a class="code" href="classProbleme__base.html#acafc48b3c050d6c292bb8395a7904a33">reprise_effectuee</a>())
<a name="l00543"></a>00543     {
<a name="l00544"></a>00544       os.<a class="code" href="classEcrFicPartage.html#aae9fd9a7163d0edcb12e0235a2eabdfa" title="Ouvre le fichier avec les parametres mode et prot donnes Ces parametres sont les parametres de la met...">ouvrir</a>(nomfichier);
<a name="l00545"></a>00545     }
<a name="l00546"></a>00546 <span class="comment">// Sinon on l&#39;ouvre</span>
<a name="l00547"></a>00547   <span class="keywordflow">else</span>
<a name="l00548"></a>00548     {
<a name="l00549"></a>00549       os.<a class="code" href="classEcrFicPartage.html#aae9fd9a7163d0edcb12e0235a2eabdfa" title="Ouvre le fichier avec les parametres mode et prot donnes Ces parametres sont les parametres de la met...">ouvrir</a>(nomfichier,ios::app);
<a name="l00550"></a>00550     }
<a name="l00551"></a>00551   os.<a class="code" href="classEcrFicPartage.html#a8c1c382e3081ddf0ea26cf119d370e59">precision</a>(precision);
<a name="l00552"></a>00552   os.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l00553"></a>00553 }
<a name="l00554"></a>00554 
<a name="l00555"></a><a class="code" href="classOperateur__base.html#a947f86d0339046249848fdc46c0adc21">00555</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a947f86d0339046249848fdc46c0adc21">Operateur_base::ajouter_contribution_explicite_au_second_membre</a>(<span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; inconnue, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; derivee)<span class="keyword"> const</span>
<a name="l00556"></a>00556 <span class="keyword"></span>{
<a name="l00557"></a>00557 <span class="comment">// Methode par defaut pour les operateurs de TRUST:</span>
<a name="l00558"></a>00558   <a class="code" href="classOperateur__base.html#a883475470b7446b8b2093859494abef4">ajouter</a>(inconnue.<a class="code" href="classChamp__Inc__base.html#adb537f43f1649e103a8980314c7ed175" title="Renvoie le tableau des valeurs du champ au temps courant.">valeurs</a>(), derivee);
<a name="l00559"></a>00559 }
<a name="l00560"></a>00560 
<a name="l00561"></a>00561 
<a name="l00562"></a><a class="code" href="classOperateur__base.html#aadca812a67d59cc4fa48b20a19ae2c47">00562</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#aadca812a67d59cc4fa48b20a19ae2c47">Operateur_base::creer_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; motlu)
<a name="l00563"></a>00563 {
<a name="l00564"></a>00564 }
<a name="l00565"></a>00565 
<a name="l00566"></a><a class="code" href="classOperateur__base.html#a067527f1aa6a36bbbf7e0d821f9d7d79">00566</a> <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classOperateur__base.html#a067527f1aa6a36bbbf7e0d821f9d7d79">Operateur_base::get_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; nom)<span class="keyword"> const</span>
<a name="l00567"></a>00567 <span class="keyword"></span>{
<a name="l00568"></a>00568   <span class="keywordflow">return</span> <a class="code" href="classOperateur__base.html#a1d42ead0b3d473aecac335a46e7cdb6c">champs_compris_</a>.<a class="code" href="classChamps__compris.html#af38aefe53d102cb5ea2d328df769f85f">get_champ</a>(nom);
<a name="l00569"></a>00569 }
<a name="l00570"></a><a class="code" href="classOperateur__base.html#a38b371b85932deda8aa175320f588a10">00570</a> <span class="keywordtype">bool</span> <a class="code" href="classOperateur__base.html#a38b371b85932deda8aa175320f588a10">Operateur_base::has_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; nom, <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>)&amp; ref_champ)<span class="keyword"> const</span>
<a name="l00571"></a>00571 <span class="keyword"></span>{
<a name="l00572"></a>00572   <span class="keywordflow">return</span> <a class="code" href="classOperateur__base.html#a1d42ead0b3d473aecac335a46e7cdb6c">champs_compris_</a>.<a class="code" href="classChamps__compris.html#a87773f9fe4d5e2b3901f9587be7fd9ca">has_champ</a>(nom, ref_champ);
<a name="l00573"></a>00573 }
<a name="l00574"></a>00574 
<a name="l00575"></a><a class="code" href="classOperateur__base.html#a94f7a98b46073fefd084fa15553d58b7">00575</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a94f7a98b46073fefd084fa15553d58b7">Operateur_base::get_noms_champs_postraitables</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; nom,<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35f">Option</a> opt)<span class="keyword"> const</span>
<a name="l00576"></a>00576 <span class="keyword"></span>{
<a name="l00577"></a>00577   <span class="keywordflow">if</span> (opt==<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35fab6018339139b51a498dc44bd760766fc">DESCRIPTION</a>)
<a name="l00578"></a>00578     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<span class="stringliteral">&quot; : &quot;</span>&lt;&lt;<a class="code" href="classOperateur__base.html#a1d42ead0b3d473aecac335a46e7cdb6c">champs_compris_</a>.<a class="code" href="classChamps__compris.html#a6c706a60f39a30318d2a0dd2a582e50e">liste_noms_compris</a>()&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00579"></a>00579   <span class="keywordflow">else</span>
<a name="l00580"></a>00580     nom.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(<a class="code" href="classOperateur__base.html#a1d42ead0b3d473aecac335a46e7cdb6c">champs_compris_</a>.<a class="code" href="classChamps__compris.html#a6c706a60f39a30318d2a0dd2a582e50e">liste_noms_compris</a>());
<a name="l00581"></a>00581 }
<a name="l00582"></a>00582 
<a name="l00583"></a>00583 <span class="comment">// Calcul du tableau de valeurs d une quantite lie a un operateur pour postraitement</span>
<a name="l00584"></a>00584 <span class="comment">// Options reconnues : &quot;stabilite&quot; pour dt_stab</span>
<a name="l00585"></a>00585 <span class="comment">// &quot;flux_bords&quot; ou &quot;flux_surfacique_bords&quot; pour flux_bords_</span>
<a name="l00586"></a>00586 <span class="comment">// </span>
<a name="l00587"></a><a class="code" href="classOperateur__base.html#ac996b2b0c0a8ae22cf98de2c3924ec02">00587</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#ac996b2b0c0a8ae22cf98de2c3924ec02">Operateur_base::calculer_pour_post</a>(<a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a>&amp; espace_stockage,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; <a class="code" href="classoption.html">option</a>, <span class="keywordtype">int</span> comp)<span class="keyword"> const</span>
<a name="l00588"></a>00588 <span class="keyword"></span>{
<a name="l00589"></a>00589   <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(option)==<span class="stringliteral">&quot;flux_bords&quot;</span> || <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(option)==<span class="stringliteral">&quot;flux_surfacique_bords&quot;</span>)
<a name="l00590"></a>00590     {
<a name="l00591"></a>00591       <span class="keywordtype">bool</span> surfacique = (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(option)==<span class="stringliteral">&quot;flux_surfacique_bords&quot;</span>);
<a name="l00592"></a>00592       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; es_valeurs = espace_stockage-&gt;<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>();
<a name="l00593"></a>00593       es_valeurs = 0.;
<a name="l00594"></a>00594       <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis__base.html" title="classe Zone_Cl_dis_base Les objets Zone_Cl_dis_base representent les conditions aux limites discretis...">Zone_Cl_dis_base</a>&amp; zcl_dis = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>();
<a name="l00595"></a>00595       <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdis = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>();
<a name="l00596"></a>00596       <span class="keywordtype">int</span> nb_front = zdis.<a class="code" href="classZone__dis__base.html#af22167d614644f55591a29c77eb1c009">nb_front_Cl</a>();
<a name="l00597"></a>00597 
<a name="l00598"></a>00598       <span class="keywordflow">if</span> (<a class="code" href="classOperateur__base.html#a451f51b41518ddbc0d3f586a8177d319" title="Tableau contenant les flux sur les bords de l&#39;operateur.">flux_bords_</a>.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>()==2)
<a name="l00599"></a>00599         {
<a name="l00600"></a>00600           <a class="code" href="classDoubleVect.html">DoubleVect</a> aire;
<a name="l00601"></a>00601           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n_bord=0; n_bord&lt;nb_front; n_bord++)
<a name="l00602"></a>00602             {
<a name="l00603"></a>00603               <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = zcl_dis.<a class="code" href="classZone__Cl__dis__base.html#af75e0ed7786863e4d333bfb29d67c323" title="Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>(n_bord);
<a name="l00604"></a>00604               <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; le_bord = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>());
<a name="l00605"></a>00605               <span class="keywordflow">if</span> (surfacique) la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>().<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#ac64479069f0c43a17cb5766a39ce5ba8" title="Renvoie les faces de la frontiere&lt;br&gt;(version const)">faces</a>().<a class="code" href="classFaces.html#a8143c6ab93f3350b3f1370d6616953c9" title="Calcule la surface des faces.">calculer_surfaces</a>(aire);
<a name="l00606"></a>00606               <span class="keywordtype">int</span> ndeb = le_bord.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00607"></a>00607               <span class="keywordtype">int</span> nfin = ndeb + le_bord.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00608"></a>00608 
<a name="l00609"></a>00609               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face=ndeb; face&lt;nfin; face++)
<a name="l00610"></a>00610                 es_valeurs(face) = <a class="code" href="classOperateur__base.html#a451f51b41518ddbc0d3f586a8177d319" title="Tableau contenant les flux sur les bords de l&#39;operateur.">flux_bords_</a>(face,comp) / (surfacique ? aire(face-ndeb) : 1.);
<a name="l00611"></a>00611             }
<a name="l00612"></a>00612         }
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614   <span class="keywordflow">else</span>
<a name="l00615"></a>00615     {
<a name="l00616"></a>00616       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The method calculer_pour_post is not recognized for the option &quot;</span>&lt;&lt;option&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00617"></a>00617       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00618"></a>00618     }
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00621"></a><a class="code" href="classOperateur__base.html#a30b29f583308ab680cfdde6e8d263686">00621</a> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> <a class="code" href="classOperateur__base.html#a30b29f583308ab680cfdde6e8d263686">Operateur_base::get_localisation_pour_post</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; <a class="code" href="classoption.html">option</a>)<span class="keyword"> const</span>
<a name="l00622"></a>00622 <span class="keyword"></span>{
<a name="l00623"></a>00623   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> loc;
<a name="l00624"></a>00624   <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(option)==<span class="stringliteral">&quot;flux_bords&quot;</span> || <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(option)==<span class="stringliteral">&quot;flux_surfacique_bords&quot;</span>)
<a name="l00625"></a>00625     {
<a name="l00626"></a>00626       <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdis = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>();
<a name="l00627"></a>00627       <span class="keywordflow">if</span> (!zdis.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>().<a class="code" href="classNom.html#a41b0ba18fb90d481c0828ed4372de8ee">debute_par</a>(<span class="stringliteral">&quot;Zone_VDF&quot;</span>))
<a name="l00628"></a>00628         loc = <span class="stringliteral">&quot;face&quot;</span>;
<a name="l00629"></a>00629       <span class="keywordflow">else</span>
<a name="l00630"></a>00630         loc = <span class="stringliteral">&quot;elem&quot;</span>;
<a name="l00631"></a>00631     }
<a name="l00632"></a>00632   <span class="keywordflow">else</span>
<a name="l00633"></a>00633     {
<a name="l00634"></a>00634       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The method get_localisation_pour_post is not actually coded &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00635"></a>00635       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;for the operator &quot;</span>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<span class="stringliteral">&quot; and for the option &quot;</span>&lt;&lt;option&lt;&lt;finl;
<a name="l00636"></a>00636       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00637"></a>00637     }
<a name="l00638"></a>00638   <span class="keywordflow">return</span> loc;
<a name="l00639"></a>00639 }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641 <span class="comment">// MODIF ELI LAUCOIN : 6/08/2008</span>
<a name="l00642"></a>00642 <span class="comment">// Je rajoute deux methodes pour le calcul du flux</span>
<a name="l00643"></a><a class="code" href="classOperateur__base.html#a1589619c7974d4bb6e54e2f9ca07b201">00643</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a1589619c7974d4bb6e54e2f9ca07b201">Operateur_base::ajouter_flux</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inconnue, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; contribution)<span class="keyword"> const</span>
<a name="l00644"></a>00644 <span class="keyword"></span>{
<a name="l00645"></a>00645   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Warning : &#39;Operateur_base::ajouter_flux()&#39; must be overloaded&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00646"></a>00646   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00647"></a>00647 }
<a name="l00648"></a>00648 
<a name="l00649"></a><a class="code" href="classOperateur__base.html#ac6c7980acce74b2ab14284d115834e84">00649</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#ac6c7980acce74b2ab14284d115834e84">Operateur_base::calculer_flux</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inconnue, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; flux)<span class="keyword"> const</span>
<a name="l00650"></a>00650 <span class="keyword"></span>{
<a name="l00651"></a>00651   flux = 0.;
<a name="l00652"></a>00652   <a class="code" href="classOperateur__base.html#a1589619c7974d4bb6e54e2f9ca07b201">ajouter_flux</a>(inconnue,flux);
<a name="l00653"></a>00653 }
<a name="l00654"></a>00654 <span class="comment">// FIN MODIF ELI LAUCOIN : 6/08/2008</span>
<a name="l00655"></a>00655 
<a name="l00656"></a>00656 
<a name="l00657"></a>00657 <span class="comment">// Je rajoute une methode preparer_calcul()</span>
<a name="l00658"></a>00658 <span class="comment">// Ca me permet de coder plus facilement les operateurs de diffusion selon</span>
<a name="l00659"></a>00659 <span class="comment">// que la diffusivite varie ou non.</span>
<a name="l00660"></a>00660 <span class="comment">// </span>
<a name="l00661"></a>00661 <span class="comment">// Par defaut : ne fait rien</span>
<a name="l00662"></a><a class="code" href="classOperateur__base.html#a60180a15772ff5df6fe5fba248186b30">00662</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a60180a15772ff5df6fe5fba248186b30">Operateur_base::preparer_calcul</a>(<span class="keywordtype">void</span>) { }
<a name="l00663"></a>00663 
<a name="l00664"></a>00664 <span class="comment">// Methode pour tester la methode contribuer_a_avec</span>
<a name="l00665"></a>00665 <span class="comment">// Test activ par une variable d&#39;environnement</span>
<a name="l00666"></a><a class="code" href="classOperateur__base.html#a3640f8feaeac1bf4d8ff3777c233753c">00666</a> <span class="keywordtype">void</span> <a class="code" href="classOperateur__base.html#a3640f8feaeac1bf4d8ff3777c233753c">Operateur_base::tester_contribuer_a_avec</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco, <span class="keyword">const</span> <a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; matrice)
<a name="l00667"></a>00667 {
<a name="l00668"></a>00668   <span class="keywordtype">int</span> test_op=0;
<a name="l00669"></a>00669   {
<a name="l00670"></a>00670     <span class="keywordtype">char</span>* theValue = getenv(<span class="stringliteral">&quot;TRUST_TEST_OPERATEUR_IMPLICITE&quot;</span>);
<a name="l00671"></a>00671     <span class="keywordflow">if</span> (theValue != NULL) test_op=2;
<a name="l00672"></a>00672   }
<a name="l00673"></a>00673   {
<a name="l00674"></a>00674     <span class="keywordtype">char</span>* theValue = getenv(<span class="stringliteral">&quot;TRUST_TEST_OPERATEUR_IMPLICITE_BLOQUANT&quot;</span>);
<a name="l00675"></a>00675     <span class="keywordflow">if</span> (theValue != NULL) test_op=1;
<a name="l00676"></a>00676   }
<a name="l00677"></a>00677   <span class="keywordflow">if</span> (test_op==0) <span class="keywordflow">return</span>;
<a name="l00678"></a>00678 
<a name="l00679"></a>00679   <a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a> mat(matrice);
<a name="l00680"></a>00680   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> resu(inco);
<a name="l00681"></a>00681   <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="Champ__P1iP1B__implementation_8cpp.html#aa8c8f49390c3cf7c702d71a71bc977e3">coeff</a> = mat.<a class="code" href="classMatrice__Morse.html#acd067e8514e5741f52b18a1d99746d11">get_set_coeff</a>();
<a name="l00682"></a>00682 <span class="comment">// A*Inc(n)=Op(Inc(n))+</span>
<a name="l00683"></a>00683   coeff=0;
<a name="l00684"></a>00684   <a class="code" href="classOperateur__base.html#a335cb37e27a57dfeb4ce5626ae291548">calculer</a>(inco, resu); <span class="comment">//!&lt; Calcule l&#39;operateur Op(Inc(n)) avec methode ajouter dans resu</span>
<a name="l00685"></a>00685 <span class="comment"></span>  <a class="code" href="classOperateur__base.html#a903e728aad8e2d490580bf264319d65f" title="NE FAIT RIEN A surcharger dans les classes derivees.">contribuer_a_avec</a>(inco, mat); <span class="comment">//!&lt; Construit la matrice de l&#39;operateur (mat=-A)</span>
<a name="l00686"></a>00686 <span class="comment"></span>  mat.<a class="code" href="classMatrice__Base.html#a6ccb4d20d3877cf09f5178ff72af5406" title="Operation de multiplication-accumulation (saxpy) matrice vecteur. Operation: r = r + A*x...">ajouter_multvect</a>(inco, resu); <span class="comment">//!&lt; Calcule le flux avec la matrice et l&#39;ajoute a resu (resu=Op(Inc(n))-A*Inc(n))</span>
<a name="l00687"></a>00687 <span class="comment"></span>  resu*=-1;
<a name="l00688"></a>00688   <a class="code" href="classOperateur__base.html#a1b64f0211a360c124a218be15c80d9c7" title="NE FAIT RIEN A surcharger dans les classes derivees.">contribuer_au_second_membre</a>(resu); <span class="comment">//!&lt; Ajoute flux impose</span>
<a name="l00689"></a>00689 <span class="comment"></span>  <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>.<a class="code" href="classRef__Equation__base.html#a7bb6fb60cb55bef0eef1b0e8718300a4">valeur</a>().<a class="code" href="classEquation__base.html#adfedf474c07a92f6b2261ca2f1cee80e" title="Renvoie le solveur de masse associe a l&#39;equation.">solv_masse</a>().<a class="code" href="classSolveur__Masse.html#af7afe8c2d4d5764f7428f2cd4ef43ddb" title="Appel a l&#39;objet sous-jacent. Resoud le systeme lineaire, dont la matrice est la matrice de masse...">appliquer</a>(resu); <span class="comment">//!&lt; M-1*(Op(Inc(n))-A*Inc(n)) On multiplie par le volume car les coefficients sont divises par le volume et on ne veut pas qu&#39;un calcul sur des petites mailles semblent disfonctionner;</span>
<a name="l00690"></a>00690 <span class="comment"></span><span class="comment">//</span>
<a name="l00691"></a>00691 <span class="comment">//</span>
<a name="l00692"></a>00692   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> un(inco);
<a name="l00693"></a>00693   un=1;
<a name="l00694"></a>00694   <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>.<a class="code" href="classRef__Equation__base.html#a7bb6fb60cb55bef0eef1b0e8718300a4">valeur</a>().<a class="code" href="classEquation__base.html#adfedf474c07a92f6b2261ca2f1cee80e" title="Renvoie le solveur de masse associe a l&#39;equation.">solv_masse</a>().<a class="code" href="classSolveur__Masse.html#af7afe8c2d4d5764f7428f2cd4ef43ddb" title="Appel a l&#39;objet sous-jacent. Resoud le systeme lineaire, dont la matrice est la matrice de masse...">appliquer</a>(un);
<a name="l00695"></a>00695   resu/=<a class="code" href="DoubleVect_8cpp.html#adcc29a107bd1ad77828da317da293203">mp_max_vect</a>(un);
<a name="l00696"></a>00696   <span class="keywordtype">double</span> err=<a class="code" href="DoubleVect_8cpp.html#acb21ec8c0b3909c26b20e3f3455e0289">mp_max_abs_vect</a>(resu);
<a name="l00697"></a>00697   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Test contribuer_a_avec on &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt;<span class="stringliteral">&quot; error: &quot;</span>&lt;&lt;err&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;;
<a name="l00698"></a>00698   <span class="keywordflow">if</span> (err&gt;1e-6)
<a name="l00699"></a>00699     {
<a name="l00700"></a>00700       {
<a name="l00701"></a>00701         <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="Op__Conv__EF_8cpp.html#ac589eb9e4844464bac4aea735bc8d1fd">resu_</a>=resu;
<a name="l00702"></a>00702         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; size &quot;</span>&lt;&lt; resu_.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()&lt;&lt;finl;
<a name="l00703"></a>00703         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;resu_.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
<a name="l00704"></a>00704           <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(resu_(i))&gt;1e-10)
<a name="l00705"></a>00705             {
<a name="l00706"></a>00706               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;i &lt;&lt; <span class="stringliteral">&quot; &quot;</span>&lt;&lt; resu_(i)&lt;&lt; <span class="stringliteral">&quot; &quot;</span>&lt;&lt;finl;
<a name="l00707"></a>00707             }
<a name="l00708"></a>00708       }
<a name="l00709"></a>00709       <span class="keywordflow">if</span> (test_op==1)
<a name="l00710"></a>00710         <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00711"></a>00711     }
<a name="l00712"></a>00712 }
<a name="l00713"></a>00713 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:16 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
