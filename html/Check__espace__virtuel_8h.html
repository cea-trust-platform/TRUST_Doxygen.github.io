<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Math/Check_espace_virtuel.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">src/Kernel/Math/Check_espace_virtuel.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="arch_8h_source.html">arch.h</a>&gt;</code><br/>
</div>
<p><a href="Check__espace__virtuel_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Check__espace__virtuel_8h.html#ab72bd6ba208050e04da28b8365e95b94">check_espace_virtuel_vect</a> (const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;v)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifie si le vecteur v a son espace virtuel a jour.<br/>
Cette fonction doit etre appelee simultanement par tous<br/>
les processeurs qui partagent le vecteur.<br/>
(pour cela, on cree une copie qu'on echange, puis on<br/>
compare a l'original).  <a href="#ab72bd6ba208050e04da28b8365e95b94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Check__espace__virtuel_8h.html#a0e4ae8ef8eff6e41360dca6555f2e912">check_espace_virtuel_vect</a> (const <a class="el" href="classIntVect.html">IntVect</a> &amp;v)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Idem que check_espace_virtuel_vect(const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp; v)  <a href="#a0e4ae8ef8eff6e41360dca6555f2e912"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Check__espace__virtuel_8h.html#ab68950c95c6abb342b515a2af1d29b26">remplir_items_non_calcules</a> (<a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;v, double valeur=0.)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remplit les "items non calcules" du tableau avec une valeur<br/>
invalide. Ce sont tous les items qui ne sont pas repertories<br/>
dans v.get_md_vector().valeurs().get_items_to_compute().<br/>
(items non calcules par les operations par defaut sur les vecteurs,<br/>
en general ce sont les items virtuels)<br/>
Il est conseille d'appliquer cette methode<br/>
a la fin des fonctions qui ne renvoient pas un espace<br/>
virtuel a jour avec declare_espace_virtuel_invalide(...))<br/>
de sorte a provoquer une erreur si l'espace virtuel est utilise.  <a href="#ab68950c95c6abb342b515a2af1d29b26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Check__espace__virtuel_8h.html#adbab2c3f6ee616c545ea23bcab29ce4d">assert_invalide_items_non_calcules</a> (<a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;v, double valeur=0.)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Appelle <a class="el" href="Check__espace__virtuel_8cpp.html#a70a2587802040b42bf6dcd04495b5587" title="Remplit les &quot;items non calcules&quot; du tableau avec une valeur invalide. Ce sont tous les items qui ne...">remplir_items_non_calcules()</a> si on est en<br/>
mode <a class="el" href="communications_8cpp.html#a40943dd8a0e3ea77b7f2e7d404d9cd53" title="renvoie le drapeau Comm_Group::check_enabled(). Ce drapeau indique si le code tourne en mode DEBUG du...">comm_check_enabled()</a> ou en mode debug (NDEBUG non defini)<br/>
La "valeur" par defaut est censee provoquer une erreur si on<br/>
essaye de l'utiliser.  <a href="#adbab2c3f6ee616c545ea23bcab29ce4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Check__espace__virtuel_8h.html#a28bc0eb4d806fef932b464106c9f9c7c">declare_espace_virtuel_invalide</a> (<a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;v)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">When compiled without NDEBUG or when running with check_enabled flag,<br/>
fills all "not computed" items with an invalid value (ie, items that are not VECT_REAL_ITEMS,<br/>
usually, these are the virtual items).<br/>
You should call this method whenever you compute some field values but you don't compute<br/>
or update the virtual space.  <a href="#a28bc0eb4d806fef932b464106c9f9c7c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Check__espace__virtuel_8h.html#ac94c341b13796e9c0aed6327a3e08645">declare_espace_virtuel_invalide</a> (<a class="el" href="classIntVect.html">IntVect</a> &amp;v)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Check__espace__virtuel_8h.html#a2ea8fcf12c28d0454bdc4126f8c4b186">assert_espace_virtuel_vect</a> (const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;v)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">en mode <a class="el" href="communications_8cpp.html#a40943dd8a0e3ea77b7f2e7d404d9cd53" title="renvoie le drapeau Comm_Group::check_enabled(). Ce drapeau indique si le code tourne en mode DEBUG du...">comm_check_enabled()</a>, verifie si l'espace virtuel<br/>
du vecteur est a jour, si ce n'est pas le cas, exit().<br/>
Ce test n'est fait qu'en mode <a class="el" href="communications_8cpp.html#a40943dd8a0e3ea77b7f2e7d404d9cd53" title="renvoie le drapeau Comm_Group::check_enabled(). Ce drapeau indique si le code tourne en mode DEBUG du...">comm_check_enabled()</a> car il necessite des communications.  <a href="#a2ea8fcf12c28d0454bdc4126f8c4b186"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Check__espace__virtuel_8h.html#aa517c6e8c49232abcbb642e10221df16">assert_espace_virtuel_vect</a> (const <a class="el" href="classIntVect.html">IntVect</a> &amp;v)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2ea8fcf12c28d0454bdc4126f8c4b186"></a><!-- doxytag: member="Check_espace_virtuel.h::assert_espace_virtuel_vect" ref="a2ea8fcf12c28d0454bdc4126f8c4b186" args="(const DoubleVect &amp;v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assert_espace_virtuel_vect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>en mode <a class="el" href="communications_8cpp.html#a40943dd8a0e3ea77b7f2e7d404d9cd53" title="renvoie le drapeau Comm_Group::check_enabled(). Ce drapeau indique si le code tourne en mode DEBUG du...">comm_check_enabled()</a>, verifie si l'espace virtuel<br/>
du vecteur est a jour, si ce n'est pas le cas, exit().<br/>
Ce test n'est fait qu'en mode <a class="el" href="communications_8cpp.html#a40943dd8a0e3ea77b7f2e7d404d9cd53" title="renvoie le drapeau Comm_Group::check_enabled(). Ce drapeau indique si le code tourne en mode DEBUG du...">comm_check_enabled()</a> car il necessite des communications. </p>

<p>Definition at line <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00118">118</a> of file <a class="el" href="Check__espace__virtuel_8cpp_source.html">Check_espace_virtuel.cpp</a>.</p>

<p>References <a class="el" href="Process_8cpp_source.html#l00127">Process::barrier()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Comm__Group_8h_source.html#l00143">Comm_Group::check_enabled()</a>, <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00033">check_espace_virtuel_vect()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, and <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>.</p>

<p>Referenced by <a class="el" href="Op__Dift__VEF__Face_8cpp_source.html#l00951">Op_Dift_VEF_Face::ajouter()</a>, <a class="el" href="Op__Dift__Stab__VEF__Face_8cpp_source.html#l00170">Op_Dift_Stab_VEF_Face::ajouter()</a>, <a class="el" href="Op__Grad__VDF__Face_8cpp_source.html#l00094">Op_Grad_VDF_Face::ajouter()</a>, <a class="el" href="Op__Grad__P0__to__Face_8cpp_source.html#l00073">Op_Grad_P0_to_Face::ajouter()</a>, <a class="el" href="Op__Grad__PolyMAC__Face_8cpp_source.html#l00090">Op_Grad_PolyMAC_Face::ajouter()</a>, <a class="el" href="Op__Grad__VEF__P1B__Face_8cpp_source.html#l00616">Op_Grad_VEF_P1B_Face::ajouter()</a>, <a class="el" href="Op__Div__VEFP1B__Elem_8cpp_source.html#l00573">Op_Div_VEFP1B_Elem::ajouter()</a>, <a class="el" href="Op__Grad__EF_8cpp_source.html#l00240">Op_Grad_EF::ajouter()</a>, <a class="el" href="Discretisation__tools_8cpp_source.html#l00120">Discretisation_tools::cells_to_faces()</a>, <a class="el" href="Discretisation__tools_8cpp_source.html#l00057">Discretisation_tools::cells_to_nodes()</a>, <a class="el" href="Perte__Charge__VEF_8cpp_source.html#l00137">Perte_Charge_VEF::contribuer_a_avec()</a>, <a class="el" href="Op__Grad__VDF__Face_8cpp_source.html#l00186">Op_Grad_VDF_Face::contribuer_a_avec()</a>, <a class="el" href="Op__Grad__PolyMAC__Face_8cpp_source.html#l00156">Op_Grad_PolyMAC_Face::contribuer_a_avec()</a>, <a class="el" href="Zone__VEF__PreP1b_8cpp_source.html#l00061">Zone_VEF_PreP1b::discretiser()</a>, <a class="el" href="EOS__Tools__VEF_8cpp_source.html#l00132">EOS_Tools_VEF::divu_discvit()</a>, <a class="el" href="EOS__Tools__VDF_8cpp_source.html#l00153">EOS_Tools_VDF::divu_discvit()</a>, <a class="el" href="Matrice__Morse_8cpp_source.html#l01184">Matrice_Morse::inverse()</a>, <a class="el" href="Zone__VEF__PreP1b_8cpp_source.html#l00810">Zone_VEF_PreP1b::lecture_ok_arete()</a>, <a class="el" href="PrecondSolv_8cpp_source.html#l00056">PrecondSolv::preconditionner_()</a>, <a class="el" href="Op__Diff__VEF__base_8cpp_source.html#l00268">Op_Diff_VEF_base::remplir_nu()</a>, <a class="el" href="Op__Diff__VEFP1NCP1B__Face_8cpp_source.html#l02229">Op_Diff_VEFP1NCP1B_Face::remplir_nu_p1()</a>, and <a class="el" href="Op__Diff__PolyMAC__base_8cpp_source.html#l00324">Op_Diff_PolyMAC_base::update_nu()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="classComm__Group.html#a0f230fe65c9f52fd2a168a1ea70e7b15">Comm_Group::check_enabled</a>())
    {
      <span class="keywordflow">if</span> (! <a class="code" href="Check__espace__virtuel_8cpp.html#ab72bd6ba208050e04da28b8365e95b94" title="Verifie si le vecteur v a son espace virtuel a jour. Cette fonction doit etre appelee simultanement p...">check_espace_virtuel_vect</a>(v))
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Fatal error in assert_espace_virtuel_vect: virtual space of this vector is not up to date.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1" title="Synchronise tous les processeurs du groupe courant&lt;br&gt;(attend que tous les processeurs soient arrives...">Process::barrier</a>();
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa517c6e8c49232abcbb642e10221df16"></a><!-- doxytag: member="Check_espace_virtuel.h::assert_espace_virtuel_vect" ref="aa517c6e8c49232abcbb642e10221df16" args="(const IntVect &amp;v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assert_espace_virtuel_vect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00131">131</a> of file <a class="el" href="Check__espace__virtuel_8cpp_source.html">Check_espace_virtuel.cpp</a>.</p>

<p>References <a class="el" href="Process_8cpp_source.html#l00127">Process::barrier()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Comm__Group_8h_source.html#l00143">Comm_Group::check_enabled()</a>, <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00033">check_espace_virtuel_vect()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, and <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="classComm__Group.html#a0f230fe65c9f52fd2a168a1ea70e7b15">Comm_Group::check_enabled</a>())
    {
      <span class="keywordflow">if</span> (! <a class="code" href="Check__espace__virtuel_8cpp.html#ab72bd6ba208050e04da28b8365e95b94" title="Verifie si le vecteur v a son espace virtuel a jour. Cette fonction doit etre appelee simultanement p...">check_espace_virtuel_vect</a>(v))
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Fatal error in assert_espace_virtuel_vect: virtual space of this vector is not up to date.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1" title="Synchronise tous les processeurs du groupe courant&lt;br&gt;(attend que tous les processeurs soient arrives...">Process::barrier</a>();
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="adbab2c3f6ee616c545ea23bcab29ce4d"></a><!-- doxytag: member="Check_espace_virtuel.h::assert_invalide_items_non_calcules" ref="adbab2c3f6ee616c545ea23bcab29ce4d" args="(DoubleVect &amp;v, double valeur=0.)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void assert_invalide_items_non_calcules </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>valeur</em> = <code>0.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Appelle <a class="el" href="Check__espace__virtuel_8cpp.html#a70a2587802040b42bf6dcd04495b5587" title="Remplit les &quot;items non calcules&quot; du tableau avec une valeur invalide. Ce sont tous les items qui ne...">remplir_items_non_calcules()</a> si on est en<br/>
mode <a class="el" href="communications_8cpp.html#a40943dd8a0e3ea77b7f2e7d404d9cd53" title="renvoie le drapeau Comm_Group::check_enabled(). Ce drapeau indique si le code tourne en mode DEBUG du...">comm_check_enabled()</a> ou en mode debug (NDEBUG non defini)<br/>
La "valeur" par defaut est censee provoquer une erreur si on<br/>
essaye de l'utiliser. </p>

<p>Definition at line <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00148">148</a> of file <a class="el" href="Check__espace__virtuel_8cpp_source.html">Check_espace_virtuel.cpp</a>.</p>

<p>References <a class="el" href="Comm__Group_8h_source.html#l00143">Comm_Group::check_enabled()</a>, and <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00105">remplir_items_non_calcules()</a>.</p>

<p>Referenced by <a class="el" href="Op__Diff__VDF__base_8cpp_source.html#l00074">Op_Diff_VDF_base::ajouter()</a>, <a class="el" href="Op__Grad__VEF__P1B__Face_8cpp_source.html#l00616">Op_Grad_VEF_P1B_Face::ajouter()</a>, <a class="el" href="Op__Div__VEFP1B__Elem_8cpp_source.html#l00573">Op_Div_VEFP1B_Elem::ajouter()</a>, and <a class="el" href="Op__Div__VEFP1B__Elem_8cpp_source.html#l00108">Op_Div_VEFP1B_Elem::ajouter_elem()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef NDEBUG</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classComm__Group.html#a0f230fe65c9f52fd2a168a1ea70e7b15">Comm_Group::check_enabled</a>())
    <a class="code" href="Check__espace__virtuel_8cpp.html#a70a2587802040b42bf6dcd04495b5587" title="Remplit les &quot;items non calcules&quot; du tableau avec une valeur invalide. Ce sont tous les items qui ne...">remplir_items_non_calcules</a>(v, <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>  <a class="code" href="Check__espace__virtuel_8cpp.html#a70a2587802040b42bf6dcd04495b5587" title="Remplit les &quot;items non calcules&quot; du tableau avec une valeur invalide. Ce sont tous les items qui ne...">remplir_items_non_calcules</a>(v, <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a0e4ae8ef8eff6e41360dca6555f2e912"></a><!-- doxytag: member="Check_espace_virtuel.h::check_espace_virtuel_vect" ref="a0e4ae8ef8eff6e41360dca6555f2e912" args="(const IntVect &amp;v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_espace_virtuel_vect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Idem que check_espace_virtuel_vect(const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp; v) </p>

<p>Definition at line <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00052">52</a> of file <a class="el" href="Check__espace__virtuel_8cpp_source.html">Check_espace_virtuel.cpp</a>.</p>

<p>References <a class="el" href="IntVect_8cpp_source.html#l00276">IntVect::echange_espace_virtuel()</a>, and <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// On fait une copie:</span>
  <a class="code" href="classIntVect.html">IntVect</a> w(v);
<span class="comment">// On echange</span>
  w.echange_espace_virtuel();
<span class="comment">// On compare:</span>
  <span class="keyword">const</span> <span class="keywordtype">int</span> n = v.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
    <span class="keywordflow">if</span> (v[i] != w[i])
      <span class="keywordflow">return</span> 0;
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab72bd6ba208050e04da28b8365e95b94"></a><!-- doxytag: member="Check_espace_virtuel.h::check_espace_virtuel_vect" ref="ab72bd6ba208050e04da28b8365e95b94" args="(const DoubleVect &amp;v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_espace_virtuel_vect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Verifie si le vecteur v a son espace virtuel a jour.<br/>
Cette fonction doit etre appelee simultanement par tous<br/>
les processeurs qui partagent le vecteur.<br/>
(pour cela, on cree une copie qu'on echange, puis on<br/>
compare a l'original). </p>

<p>Definition at line <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00033">33</a> of file <a class="el" href="Check__espace__virtuel_8cpp_source.html">Check_espace_virtuel.cpp</a>.</p>

<p>References <a class="el" href="DoubleVect_8cpp_source.html#l00277">DoubleVect::echange_espace_virtuel()</a>, and <a class="el" href="ArrOfDouble_8cpp_source.html#l01294">norme_array()</a>.</p>

<p>Referenced by <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00118">assert_espace_virtuel_vect()</a>, <a class="el" href="Assembleur__P__VEFPreP1B_8cpp_source.html#l01239">Assembleur_P_VEFPreP1B::changer_base_pression()</a>, and <a class="el" href="Assembleur__P__VEFPreP1B_8cpp_source.html#l01217">Assembleur_P_VEFPreP1B::changer_base_pression_inverse()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// On fait une copie:</span>
  <a class="code" href="classDoubleVect.html">DoubleVect</a> w(v);
<span class="comment">// On echange</span>
  w.echange_espace_virtuel();
<span class="comment">// Norme de w :</span>
  <span class="keyword">const</span> <span class="keywordtype">double</span> norme_w = <a class="code" href="ArrOfDouble_8cpp.html#af3b2ac08cde80e3eadd7a83f5fd06ab7" title="Calcul de la norme du vecteur dx (fonction blas DNRM2, soit racine carree(somme des dx[i]*dx[i])...">norme_array</a>(w);
<span class="comment">// On compare : difference entre les deux vecteurs au sens</span>
<span class="comment">// ArrOfDouble (pas d&#39;echange espace virtuel)</span>
  w.ArrOfDouble::operator-=(v);
  <span class="keyword">const</span> <span class="keywordtype">double</span> ecart = <a class="code" href="ArrOfDouble_8cpp.html#af3b2ac08cde80e3eadd7a83f5fd06ab7" title="Calcul de la norme du vecteur dx (fonction blas DNRM2, soit racine carree(somme des dx[i]*dx[i])...">norme_array</a>(w);
  <span class="keywordflow">if</span> (ecart &gt; (norme_w + 1e-30) * 1e-12)
    <span class="keywordflow">return</span> 0;
  <span class="keywordflow">else</span>
    <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a28bc0eb4d806fef932b464106c9f9c7c"></a><!-- doxytag: member="Check_espace_virtuel.h::declare_espace_virtuel_invalide" ref="a28bc0eb4d806fef932b464106c9f9c7c" args="(DoubleVect &amp;v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void declare_espace_virtuel_invalide </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>When compiled without NDEBUG or when running with check_enabled flag,<br/>
fills all "not computed" items with an invalid value (ie, items that are not VECT_REAL_ITEMS,<br/>
usually, these are the virtual items).<br/>
You should call this method whenever you compute some field values but you don't compute<br/>
or update the virtual space. </p>

<p>Definition at line <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00163">163</a> of file <a class="el" href="Check__espace__virtuel_8cpp_source.html">Check_espace_virtuel.cpp</a>.</p>

<p>References <a class="el" href="Comm__Group_8h_source.html#l00143">Comm_Group::check_enabled()</a>, <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00105">remplir_items_non_calcules()</a>, and <a class="el" href="Source__Generique__Face__PolyMAC_8cpp_source.html#l00045">valeur()</a>.</p>

<p>Referenced by <a class="el" href="Op__Div__PolyMAC_8cpp_source.html#l00069">Op_Div_PolyMAC::ajouter()</a>, and <a class="el" href="Op__Div__EF_8cpp_source.html#l00064">Op_Div_EF::ajouter()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// La valeur choisie doit provoquer une erreur si on verifie les espaces virtuels</span>
<span class="comment">// (donc prendre quelque chose de non trivial)</span>
<span class="comment">// mais ne doit pas empecher de faire un calcul avec cette valeur</span>
<span class="comment">// (ne pas prendre DMAXFLOAT ou quelque chose de trop grand qui produirait une erreur)</span>
  <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a> = -98765.4321;
<span class="preprocessor">#ifdef NDEBUG</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classComm__Group.html#a0f230fe65c9f52fd2a168a1ea70e7b15">Comm_Group::check_enabled</a>())
    <a class="code" href="Check__espace__virtuel_8cpp.html#a70a2587802040b42bf6dcd04495b5587" title="Remplit les &quot;items non calcules&quot; du tableau avec une valeur invalide. Ce sont tous les items qui ne...">remplir_items_non_calcules</a>(v, valeur);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>  <a class="code" href="Check__espace__virtuel_8cpp.html#a70a2587802040b42bf6dcd04495b5587" title="Remplit les &quot;items non calcules&quot; du tableau avec une valeur invalide. Ce sont tous les items qui ne...">remplir_items_non_calcules</a>(v, valeur);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ac94c341b13796e9c0aed6327a3e08645"></a><!-- doxytag: member="Check_espace_virtuel.h::declare_espace_virtuel_invalide" ref="ac94c341b13796e9c0aed6327a3e08645" args="(IntVect &amp;v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void declare_espace_virtuel_invalide </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00178">178</a> of file <a class="el" href="Check__espace__virtuel_8cpp_source.html">Check_espace_virtuel.cpp</a>.</p>

<p>References <a class="el" href="Comm__Group_8h_source.html#l00143">Comm_Group::check_enabled()</a>, <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00105">remplir_items_non_calcules()</a>, and <a class="el" href="Source__Generique__Face__PolyMAC_8cpp_source.html#l00045">valeur()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a> = -1999999999;
<span class="preprocessor">#ifdef NDEBUG</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classComm__Group.html#a0f230fe65c9f52fd2a168a1ea70e7b15">Comm_Group::check_enabled</a>())
    <a class="code" href="Check__espace__virtuel_8cpp.html#a70a2587802040b42bf6dcd04495b5587" title="Remplit les &quot;items non calcules&quot; du tableau avec une valeur invalide. Ce sont tous les items qui ne...">remplir_items_non_calcules</a>(v, valeur);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>  <a class="code" href="Check__espace__virtuel_8cpp.html#a70a2587802040b42bf6dcd04495b5587" title="Remplit les &quot;items non calcules&quot; du tableau avec une valeur invalide. Ce sont tous les items qui ne...">remplir_items_non_calcules</a>(v, valeur);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="ab68950c95c6abb342b515a2af1d29b26"></a><!-- doxytag: member="Check_espace_virtuel.h::remplir_items_non_calcules" ref="ab68950c95c6abb342b515a2af1d29b26" args="(DoubleVect &amp;v, double valeur=0.)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void remplir_items_non_calcules </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>valeur</em> = <code>0.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remplit les "items non calcules" du tableau avec une valeur<br/>
invalide. Ce sont tous les items qui ne sont pas repertories<br/>
dans v.get_md_vector().valeurs().get_items_to_compute().<br/>
(items non calcules par les operations par defaut sur les vecteurs,<br/>
en general ce sont les items virtuels)<br/>
Il est conseille d'appliquer cette methode<br/>
a la fin des fonctions qui ne renvoient pas un espace<br/>
virtuel a jour avec declare_espace_virtuel_invalide(...))<br/>
de sorte a provoquer une erreur si l'espace virtuel est utilise. </p>

<p>Definition at line <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00105">105</a> of file <a class="el" href="Check__espace__virtuel_8cpp_source.html">Check_espace_virtuel.cpp</a>.</p>

<p>References <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00067">remplir_items_non_calcules_()</a>.</p>

<p>Referenced by <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00148">assert_invalide_items_non_calcules()</a>, and <a class="el" href="Check__espace__virtuel_8cpp_source.html#l00163">declare_espace_virtuel_invalide()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="Check__espace__virtuel_8cpp.html#a787032b2539ed4d5879961d2a3588649">remplir_items_non_calcules_</a>(v, <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>);
}
</pre></div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:51 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
