<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Framework/Probleme_U.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Framework/Probleme_U.cpp</div>  </div>
</div>
<div class="contents">
<a href="Probleme__U_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Probleme_U.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Framework</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     1</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__U_8h.html">Probleme_U.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="stat__counters_8h.html">stat_counters.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;ICoCoExceptions.h&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Ch__front__input__uniforme_8h.html">Ch_front_input_uniforme.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Ch__front__input_8h.html">Ch_front_input.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Ch__input__uniforme_8h.html">Ch_input_uniforme.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Champ__input__P0_8h.html">Champ_input_P0.h</a>&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#ifdef VTRACE</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#include &lt;vt_user.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#endif</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="Zone_8h.html">Zone.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Generique__base_8h.html">Champ_Generique_base.h</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="Convert__ICoCoTrioField_8h.html">Convert_ICoCoTrioField.h</a>&gt;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="Probleme__U_8cpp.html#a9618a84493c871869ecf83af02718b05">00042</a> <a class="code" href="Declare__Base_8h.html#ad0be56e3a9cdd8f6dafc3864627fea86">Implemente_base</a>(<a class="code" href="classProbleme__U.html" title="classe Probleme_U Cette classe ajoute des specificites TRUST a l&#39;interface generale definie dans la c...">Probleme_U</a>,<span class="stringliteral">&quot;Probleme_U&quot;</span>,<a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>);
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">using</span> ICoCo::WrongArgument;
<a name="l00045"></a>00045 <span class="keyword">using</span> ICoCo::TrioField;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">//</span><span class="comment"></span>
<a name="l00048"></a>00048 <span class="comment">//! A surcharger...</span>
<a name="l00049"></a><a class="code" href="classProbleme__U.html#a1b0ced89ee3ecdd9ce1a63effe3dc0a8">00049</a> <span class="comment"></span><a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classProbleme__U.html#a1b0ced89ee3ecdd9ce1a63effe3dc0a8" title="A surcharger...">Probleme_U::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00050"></a>00050 <span class="keyword"></span>{
<a name="l00051"></a>00051   <span class="keywordflow">return</span> os;
<a name="l00052"></a>00052 }
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">//</span><span class="comment"></span>
<a name="l00055"></a>00055 <span class="comment">//! A surcharger...</span>
<a name="l00056"></a><a class="code" href="classProbleme__U.html#a1c5d6cefa8bd276e5389d7404cd9fdb6">00056</a> <span class="comment"></span><a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classProbleme__U.html#a1c5d6cefa8bd276e5389d7404cd9fdb6" title="A surcharger...">Probleme_U::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00057"></a>00057 {
<a name="l00058"></a>00058   <span class="keywordflow">return</span> is ;
<a name="l00059"></a>00059 }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">// Precondition: Problem is instantiated, not initialized</span>
<a name="l00062"></a>00062 <span class="comment">// Parametre:</span>
<a name="l00063"></a>00063 <span class="comment">// Signification:</span>
<a name="l00064"></a>00064 <span class="comment">// Valeurs par defaut:</span>
<a name="l00065"></a>00065 <span class="comment">// Contraintes:</span>
<a name="l00066"></a>00066 <span class="comment">// Acces:</span>
<a name="l00067"></a>00067 <span class="comment">// </span>
<a name="l00068"></a>00068 <span class="comment">// Signification:</span>
<a name="l00069"></a>00069 <span class="comment">// Contraintes:</span>
<a name="l00070"></a>00070 <span class="comment">// Exception: WrongContext</span>
<a name="l00071"></a>00071 <span class="comment">// Effets de bord:</span>
<a name="l00072"></a>00072 <span class="comment">// Postcondition:</span>
<a name="l00073"></a>00073 <span class="comment">// Problem initialized.</span>
<a name="l00074"></a>00074 <span class="comment">// Unknown and given fields are initialized at initial time</span>
<a name="l00075"></a>00075 <span class="comment">//</span>
<a name="l00076"></a>00076 <span class="comment">//</span><span class="comment"></span>
<a name="l00077"></a>00077 <span class="comment">//! This method is called once at the beginning, before any other one of&lt;br&gt;the interface Problem.</span>
<a name="l00078"></a><a class="code" href="classProbleme__U.html#afcce9d4fdb484e4fd8029370f7345672">00078</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#afcce9d4fdb484e4fd8029370f7345672" title="This method is called once at the beginning, before any other one of the interface Problem...">Probleme_U::initialize</a>()
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080 }
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="comment">// Precondition: initialize, but not yet terminate</span>
<a name="l00083"></a>00083 <span class="comment">// Parametre:</span>
<a name="l00084"></a>00084 <span class="comment">// Signification:</span>
<a name="l00085"></a>00085 <span class="comment">// Valeurs par defaut:</span>
<a name="l00086"></a>00086 <span class="comment">// Contraintes:</span>
<a name="l00087"></a>00087 <span class="comment">// Acces:</span>
<a name="l00088"></a>00088 <span class="comment">// </span>
<a name="l00089"></a>00089 <span class="comment">// Signification:</span>
<a name="l00090"></a>00090 <span class="comment">// Contraintes:</span>
<a name="l00091"></a>00091 <span class="comment">// Exception: WrongContext</span>
<a name="l00092"></a>00092 <span class="comment">// Effets de bord:</span>
<a name="l00093"></a>00093 <span class="comment">// Postcondition:</span>
<a name="l00094"></a>00094 <span class="comment">// The object is ready to be destroyed.</span>
<a name="l00095"></a>00095 <span class="comment">//</span>
<a name="l00096"></a>00096 <span class="comment">//</span><span class="comment"></span>
<a name="l00097"></a>00097 <span class="comment">//! This method is called once at the end, after any other one.&lt;br&gt;It frees the memory and saves anything that needs to be saved.</span>
<a name="l00098"></a><a class="code" href="classProbleme__U.html#a78a691ce63c9890db69db96ac7b81c22">00098</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#a78a691ce63c9890db69db96ac7b81c22" title="This method is called once at the end, after any other one. It frees the memory and saves anything th...">Probleme_U::terminate</a>()
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">// Precondition: initialize, not yet terminate</span>
<a name="l00103"></a>00103 <span class="comment">// Parametre:</span>
<a name="l00104"></a>00104 <span class="comment">// Signification:</span>
<a name="l00105"></a>00105 <span class="comment">// Valeurs par defaut:</span>
<a name="l00106"></a>00106 <span class="comment">// Contraintes:</span>
<a name="l00107"></a>00107 <span class="comment">// Acces:</span>
<a name="l00108"></a>00108 <span class="comment">// Exception: WrongContext</span>
<a name="l00109"></a>00109 <span class="comment">// Effets de bord:</span>
<a name="l00110"></a>00110 <span class="comment">// Postcondition:</span>
<a name="l00111"></a>00111 <span class="comment">// Problem unchanged</span>
<a name="l00112"></a>00112 <span class="comment">//</span>
<a name="l00113"></a>00113 <span class="comment">//</span>
<a name="l00114"></a>00114 <span class="comment">//</span><span class="comment"></span>
<a name="l00115"></a>00115 <span class="comment">//! Returns the present time.&lt;br&gt;This value may change only at the call of validateTimeStep.&lt;br&gt;A surcharger</span>
<a name="l00116"></a>00116 <span class="comment"></span><span class="comment">/** \return double&lt;br&gt;</span>
<a name="l00117"></a>00117 <span class="comment">Signification: present time&lt;br&gt;</span>
<a name="l00118"></a>00118 <span class="comment">Contraintes: */</span>
<a name="l00119"></a><a class="code" href="classProbleme__U.html#ab737ef19f58b4420582ed239205af296">00119</a> <span class="keywordtype">double</span> <a class="code" href="classProbleme__U.html#ab737ef19f58b4420582ed239205af296" title="Returns the present time. This value may change only at the call of validateTimeStep. A surcharger.">Probleme_U::presentTime</a>()<span class="keyword"> const</span>
<a name="l00120"></a>00120 <span class="keyword"></span>{
<a name="l00121"></a>00121   <span class="keywordflow">return</span> 0;
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="comment">// Precondition: initialize, not yet terminate</span>
<a name="l00125"></a>00125 <span class="comment">// Parametre: stop</span>
<a name="l00126"></a>00126 <span class="comment">// Signification: Does the Problem want to stop ?</span>
<a name="l00127"></a>00127 <span class="comment">// Valeurs par defaut:</span>
<a name="l00128"></a>00128 <span class="comment">// Contraintes:</span>
<a name="l00129"></a>00129 <span class="comment">// Acces:</span>
<a name="l00130"></a>00130 <span class="comment">// Exception: WrongContext</span>
<a name="l00131"></a>00131 <span class="comment">// Effets de bord:</span>
<a name="l00132"></a>00132 <span class="comment">// Postcondition:</span>
<a name="l00133"></a>00133 <span class="comment">// Problem unchanged</span>
<a name="l00134"></a>00134 <span class="comment">//</span>
<a name="l00135"></a>00135 <span class="comment">//</span>
<a name="l00136"></a>00136 <span class="comment">//</span>
<a name="l00137"></a>00137 <span class="comment">//</span><span class="comment"></span>
<a name="l00138"></a>00138 <span class="comment">//! Compute the value the Problem would like for the next time step.&lt;br&gt;This value will not necessarily be used at the call of initTimeStep,&lt;br&gt;but it is a hint.&lt;br&gt;This method may use all the internal state of the Problem.</span>
<a name="l00139"></a>00139 <span class="comment"></span><span class="comment">/** \return double&lt;br&gt;</span>
<a name="l00140"></a>00140 <span class="comment">Signification: The desired time step&lt;br&gt;</span>
<a name="l00141"></a>00141 <span class="comment">Contraintes: */</span>
<a name="l00142"></a><a class="code" href="classProbleme__U.html#a93b3a00e48f1d4e985614c56bf704127">00142</a> <span class="keywordtype">double</span> <a class="code" href="classProbleme__U.html#a93b3a00e48f1d4e985614c56bf704127" title="Compute the value the Problem would like for the next time step. This value will not necessarily be u...">Probleme_U::computeTimeStep</a>(<span class="keywordtype">bool</span>&amp; stop)<span class="keyword"> const</span>
<a name="l00143"></a>00143 <span class="keyword"></span>{
<a name="l00144"></a>00144   stop=<span class="keyword">true</span>;
<a name="l00145"></a>00145   <span class="keywordflow">return</span> 0;
<a name="l00146"></a>00146 }
<a name="l00147"></a>00147 
<a name="l00148"></a>00148 <span class="comment">// Precondition: initialize, not yet terminate, timestep not yet initialized, dt&gt;0</span>
<a name="l00149"></a>00149 <span class="comment">// Parametre: double dt</span>
<a name="l00150"></a>00150 <span class="comment">// Signification: the time interval to allocate</span>
<a name="l00151"></a>00151 <span class="comment">// Valeurs par defaut:</span>
<a name="l00152"></a>00152 <span class="comment">// Contraintes:</span>
<a name="l00153"></a>00153 <span class="comment">// Acces:</span>
<a name="l00154"></a>00154 <span class="comment">// Exception: WrongContext, WrongArgument</span>
<a name="l00155"></a>00155 <span class="comment">// Effets de bord:</span>
<a name="l00156"></a>00156 <span class="comment">// Postcondition:</span>
<a name="l00157"></a>00157 <span class="comment">// Enables the call to several methods for the next time step</span>
<a name="l00158"></a>00158 <span class="comment">//</span>
<a name="l00159"></a>00159 <span class="comment">//</span>
<a name="l00160"></a>00160 <span class="comment">//</span>
<a name="l00161"></a>00161 <span class="comment">//</span><span class="comment"></span>
<a name="l00162"></a>00162 <span class="comment">//! This method allocates and initializes the unknown and given fields&lt;br&gt;for the future time step.&lt;br&gt;The value of the interval is imposed through the parameter dt.&lt;br&gt;In case of error, returns false.</span>
<a name="l00163"></a>00163 <span class="comment"></span><span class="comment">/** \return bool&lt;br&gt;</span>
<a name="l00164"></a>00164 <span class="comment">Signification: true=OK, false=error, not able to tackle this dt&lt;br&gt;</span>
<a name="l00165"></a>00165 <span class="comment">Contraintes: */</span>
<a name="l00166"></a><a class="code" href="classProbleme__U.html#a1610f1493ed8b1790291cc72d4ab1417">00166</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__U.html#a1610f1493ed8b1790291cc72d4ab1417" title="This method allocates and initializes the unknown and given fields for the future time step...">Probleme_U::initTimeStep</a>(<span class="keywordtype">double</span> dt)
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00169"></a>00169 }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="comment">// Precondition: initTimeStep</span>
<a name="l00172"></a>00172 <span class="comment">// Parametre:</span>
<a name="l00173"></a>00173 <span class="comment">// Signification:</span>
<a name="l00174"></a>00174 <span class="comment">// Valeurs par defaut:</span>
<a name="l00175"></a>00175 <span class="comment">// Contraintes:</span>
<a name="l00176"></a>00176 <span class="comment">// Acces:</span>
<a name="l00177"></a>00177 <span class="comment">// </span>
<a name="l00178"></a>00178 <span class="comment">// Signification:</span>
<a name="l00179"></a>00179 <span class="comment">// Contraintes:</span>
<a name="l00180"></a>00180 <span class="comment">// Exception: WrongContext</span>
<a name="l00181"></a>00181 <span class="comment">// Effets de bord:</span>
<a name="l00182"></a>00182 <span class="comment">// Postcondition:</span>
<a name="l00183"></a>00183 <span class="comment">// The present time has moved forward.</span>
<a name="l00184"></a>00184 <span class="comment">//</span>
<a name="l00185"></a>00185 <span class="comment">//</span>
<a name="l00186"></a>00186 <span class="comment">//</span>
<a name="l00187"></a>00187 <span class="comment">//</span><span class="comment"></span>
<a name="l00188"></a>00188 <span class="comment">//! Validates the calculated unknown by moving the present time&lt;br&gt;at the end of the time step.&lt;br&gt;This method is allowed to free past values of the unknown and given&lt;br&gt;fields.</span>
<a name="l00189"></a><a class="code" href="classProbleme__U.html#a3f0e664844e882578e4804975cef70c5">00189</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#a3f0e664844e882578e4804975cef70c5" title="Validates the calculated unknown by moving the present time at the end of the time step...">Probleme_U::validateTimeStep</a>()
<a name="l00190"></a>00190 {
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <span class="comment">// Precondition: validateTimeStep</span>
<a name="l00194"></a>00194 <span class="comment">// Parametre:</span>
<a name="l00195"></a>00195 <span class="comment">// Signification:</span>
<a name="l00196"></a>00196 <span class="comment">// Valeurs par defaut:</span>
<a name="l00197"></a>00197 <span class="comment">// Contraintes:</span>
<a name="l00198"></a>00198 <span class="comment">// Acces:</span>
<a name="l00199"></a>00199 <span class="comment">// Exception: WrongContext</span>
<a name="l00200"></a>00200 <span class="comment">// Effets de bord:</span>
<a name="l00201"></a>00201 <span class="comment">// Postcondition:</span>
<a name="l00202"></a>00202 <span class="comment">// Problem unchanged</span>
<a name="l00203"></a>00203 <span class="comment">//</span><span class="comment"></span>
<a name="l00204"></a>00204 <span class="comment">//! Tells if the Problem unknowns have changed during the last time step.</span>
<a name="l00205"></a>00205 <span class="comment"></span><span class="comment">/** \return bool&lt;br&gt;</span>
<a name="l00206"></a>00206 <span class="comment">Signification: true=stationary, false=not stationary&lt;br&gt;</span>
<a name="l00207"></a>00207 <span class="comment">Contraintes: */</span>
<a name="l00208"></a><a class="code" href="classProbleme__U.html#ae59db0c138800c85d9802c976b922837">00208</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__U.html#ae59db0c138800c85d9802c976b922837" title="Tells if the Problem unknowns have changed during the last time step.">Probleme_U::isStationary</a>()<span class="keyword"> const</span>
<a name="l00209"></a>00209 <span class="keyword"></span>{
<a name="l00210"></a>00210   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00211"></a>00211 }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 <span class="comment">//</span><span class="comment"></span>
<a name="l00214"></a>00214 <span class="comment">//! Tells to the Problem that stationary is reached or not</span>
<a name="l00215"></a><a class="code" href="classProbleme__U.html#ac2dc4d3d39edb5a6f88250322e5a5816">00215</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#ac2dc4d3d39edb5a6f88250322e5a5816" title="Tells to the Problem that stationary is reached or not.">Probleme_U::setStationary</a>(<span class="keywordtype">bool</span>)
<a name="l00216"></a>00216 {
<a name="l00217"></a>00217 }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219 <span class="comment">// Precondition: initTimeStep</span>
<a name="l00220"></a>00220 <span class="comment">// Parametre:</span>
<a name="l00221"></a>00221 <span class="comment">// Signification:</span>
<a name="l00222"></a>00222 <span class="comment">// Valeurs par defaut:</span>
<a name="l00223"></a>00223 <span class="comment">// Contraintes:</span>
<a name="l00224"></a>00224 <span class="comment">// Acces:</span>
<a name="l00225"></a>00225 <span class="comment">// </span>
<a name="l00226"></a>00226 <span class="comment">// Signification:</span>
<a name="l00227"></a>00227 <span class="comment">// Contraintes:</span>
<a name="l00228"></a>00228 <span class="comment">// Exception: WrongContext</span>
<a name="l00229"></a>00229 <span class="comment">// Effets de bord:</span>
<a name="l00230"></a>00230 <span class="comment">// Postcondition:</span>
<a name="l00231"></a>00231 <span class="comment">// Can call again initTimeStep with a new dt.</span>
<a name="l00232"></a>00232 <span class="comment">//</span><span class="comment"></span>
<a name="l00233"></a>00233 <span class="comment">//! Aborts the resolution of the current time step.</span>
<a name="l00234"></a><a class="code" href="classProbleme__U.html#a828073ad5403524aaea5d615aad76408">00234</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#a828073ad5403524aaea5d615aad76408" title="Aborts the resolution of the current time step.">Probleme_U::abortTimeStep</a>()
<a name="l00235"></a>00235 {
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 <span class="comment">// Precondition: initTimeStep</span>
<a name="l00239"></a>00239 <span class="comment">// Parametre: bool&amp; converged</span>
<a name="l00240"></a>00240 <span class="comment">// Signification: It is a return value :</span>
<a name="l00241"></a>00241 <span class="comment">// true if the process has converged, false otherwise.</span>
<a name="l00242"></a>00242 <span class="comment">// Valeurs par defaut:</span>
<a name="l00243"></a>00243 <span class="comment">// Contraintes:</span>
<a name="l00244"></a>00244 <span class="comment">// Acces:</span>
<a name="l00245"></a>00245 <span class="comment">// Exception: WrongContext</span>
<a name="l00246"></a>00246 <span class="comment">// Effets de bord:</span>
<a name="l00247"></a>00247 <span class="comment">// Postcondition:</span>
<a name="l00248"></a>00248 <span class="comment">// The unknowns are updated over the next time step.</span>
<a name="l00249"></a>00249 <span class="comment">//</span>
<a name="l00250"></a>00250 <span class="comment">//</span>
<a name="l00251"></a>00251 <span class="comment">//</span>
<a name="l00252"></a>00252 <span class="comment">//</span>
<a name="l00253"></a>00253 <span class="comment">//</span>
<a name="l00254"></a>00254 <span class="comment">//</span>
<a name="l00255"></a>00255 <span class="comment">//</span>
<a name="l00256"></a>00256 <span class="comment">//</span><span class="comment"></span>
<a name="l00257"></a>00257 <span class="comment">//! In the case solveTimeStep uses an iterative process,&lt;br&gt;this method executes a single iteration.&lt;br&gt;It is thus possible to modify the given fields between iterations.&lt;br&gt;converged is set to true if the process has converged, ie if the&lt;br&gt;unknown fields are solution to the problem on the next time step.&lt;br&gt;Otherwise converged is set to false.&lt;br&gt;The return value indicates if the convergence process behaves normally.&lt;br&gt;If false, the Problem wishes to abort the time step resolution.</span>
<a name="l00258"></a>00258 <span class="comment"></span><span class="comment">/** \return bool&lt;br&gt;</span>
<a name="l00259"></a>00259 <span class="comment">Signification: true=OK, false=unable to converge&lt;br&gt;</span>
<a name="l00260"></a>00260 <span class="comment">Contraintes: */</span>
<a name="l00261"></a><a class="code" href="classProbleme__U.html#a4aebc703b79c2fef3a321c83d29c7ffb">00261</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__U.html#a4aebc703b79c2fef3a321c83d29c7ffb" title="In the case solveTimeStep uses an iterative process, this method executes a single iteration...">Probleme_U::iterateTimeStep</a>(<span class="keywordtype">bool</span>&amp; converged)
<a name="l00262"></a>00262 {
<a name="l00263"></a>00263   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00264"></a>00264 }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 <span class="comment">// Precondition: appel a initialize()</span>
<a name="l00267"></a>00267 <span class="comment">// Parametre: force</span>
<a name="l00268"></a>00268 <span class="comment">// Signification: 1=postraiter absolument, 0=postraiter si c&#39;est necessaire.</span>
<a name="l00269"></a>00269 <span class="comment">// Valeurs par defaut:</span>
<a name="l00270"></a>00270 <span class="comment">// Contraintes:</span>
<a name="l00271"></a>00271 <span class="comment">// Acces:</span>
<a name="l00272"></a>00272 <span class="comment">// Exception:</span>
<a name="l00273"></a>00273 <span class="comment">// Effets de bord:</span>
<a name="l00274"></a>00274 <span class="comment">// Postcondition:</span>
<a name="l00275"></a>00275 <span class="comment">// Des champs dependant de l&#39;inconnue sont calcules.</span>
<a name="l00276"></a>00276 <span class="comment">//</span>
<a name="l00277"></a>00277 <span class="comment">//</span>
<a name="l00278"></a>00278 <span class="comment">//</span>
<a name="l00279"></a>00279 <span class="comment">//</span><span class="comment"></span>
<a name="l00280"></a>00280 <span class="comment">//! Demande au probleme de postraiter ses champs, sondes,...&lt;br&gt;Dans Probleme_U::run(), postraiter() est appele a chaque pas de&lt;br&gt;temps avec force=0 et au debut et a la fin du calcul avec force=1.&lt;br&gt;WEC : il serait bon que, un jour, postraiter soit const</span>
<a name="l00281"></a>00281 <span class="comment"></span><span class="comment">/** \return 0 en cas d&#39;erreur, 1 sinon.&lt;br&gt;</span>
<a name="l00282"></a>00282 <span class="comment">Signification:&lt;br&gt;</span>
<a name="l00283"></a>00283 <span class="comment">Contraintes: */</span>
<a name="l00284"></a><a class="code" href="classProbleme__U.html#a0c1f33b0a0236dbacff0ccd83abd033a">00284</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__U.html#a0c1f33b0a0236dbacff0ccd83abd033a" title="Demande au probleme de postraiter ses champs, sondes,... Dans Probleme_U::run(), postraiter() est app...">Probleme_U::postraiter</a>(<span class="keywordtype">int</span> force)
<a name="l00285"></a>00285 {
<a name="l00286"></a>00286   <span class="keywordflow">return</span> 0;
<a name="l00287"></a>00287 }
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 <span class="comment">//</span><span class="comment"></span>
<a name="l00290"></a>00290 <span class="comment">//! Doit-on imprimer les statistiques d&#39;execution maintenant ?</span>
<a name="l00291"></a><a class="code" href="classProbleme__U.html#a6335d8d7b0a67723acfae080b22a6fdb">00291</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classProbleme__U.html#a6335d8d7b0a67723acfae080b22a6fdb" title="Doit-on imprimer les statistiques d&#39;execution maintenant ?">Probleme_U::limpr</a>()<span class="keyword"> const</span>
<a name="l00292"></a>00292 <span class="keyword"></span>{
<a name="l00293"></a>00293   <span class="keywordflow">return</span> 0;
<a name="l00294"></a>00294 }
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <span class="comment">//</span><span class="comment"></span>
<a name="l00297"></a>00297 <span class="comment">//! Doit-on sauvegarder l&#39;etat du probleme sur disque maintenant ?</span>
<a name="l00298"></a><a class="code" href="classProbleme__U.html#afa11951a2d0c437623549fa231ca66e7">00298</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classProbleme__U.html#afa11951a2d0c437623549fa231ca66e7" title="Doit-on sauvegarder l&#39;etat du probleme sur disque maintenant ?">Probleme_U::lsauv</a>()<span class="keyword"> const</span>
<a name="l00299"></a>00299 <span class="keyword"></span>{
<a name="l00300"></a>00300   <span class="keywordflow">return</span> 0;
<a name="l00301"></a>00301 }
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 <span class="comment">//</span><span class="comment"></span>
<a name="l00304"></a>00304 <span class="comment">//! Sauvegarder l&#39;etat du probleme sur disque</span>
<a name="l00305"></a><a class="code" href="classProbleme__U.html#ad9f11e8ca69b2599708f0e286a43ff35">00305</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#ad9f11e8ca69b2599708f0e286a43ff35" title="Sauvegarder l&#39;etat du probleme sur disque.">Probleme_U::sauver</a>()<span class="keyword"> const</span>
<a name="l00306"></a>00306 <span class="keyword"></span>{
<a name="l00307"></a>00307   return ;
<a name="l00308"></a>00308 }
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 <span class="comment">// Precondition: initTimeStep</span>
<a name="l00312"></a>00312 <span class="comment">// Parametre:</span>
<a name="l00313"></a>00313 <span class="comment">// Signification:</span>
<a name="l00314"></a>00314 <span class="comment">// Valeurs par defaut:</span>
<a name="l00315"></a>00315 <span class="comment">// Contraintes:</span>
<a name="l00316"></a>00316 <span class="comment">// Acces:</span>
<a name="l00317"></a>00317 <span class="comment">// Exception:</span>
<a name="l00318"></a>00318 <span class="comment">// Effets de bord:</span>
<a name="l00319"></a>00319 <span class="comment">// Postcondition:</span>
<a name="l00320"></a>00320 <span class="comment">// Rien n&#39;est maitrise...</span>
<a name="l00321"></a>00321 <span class="comment">//</span>
<a name="l00322"></a>00322 <span class="comment">//</span>
<a name="l00323"></a>00323 <span class="comment">//</span>
<a name="l00324"></a>00324 <span class="comment">//</span>
<a name="l00325"></a>00325 <span class="comment">//</span>
<a name="l00326"></a>00326 <span class="comment">//</span>
<a name="l00327"></a>00327 <span class="comment">//</span>
<a name="l00328"></a>00328 <span class="comment">//</span>
<a name="l00329"></a>00329 <span class="comment">//</span>
<a name="l00330"></a>00330 <span class="comment">//</span>
<a name="l00331"></a>00331 <span class="comment">//</span>
<a name="l00332"></a>00332 <span class="comment">//</span>
<a name="l00333"></a>00333 <span class="comment">//</span>
<a name="l00334"></a>00334 <span class="comment">//</span><span class="comment"></span>
<a name="l00335"></a>00335 <span class="comment">//! ATTENTION :&lt;br&gt;Rentre ici tout ce qui ne correspond pas a l&#39;API normale de Problem.&lt;br&gt;Actuellement on y met a jour les CLs et les termes sources, sachant&lt;br&gt;que certains vont chercher eux-memes des informations dans les&lt;br&gt;problemes voisins...&lt;br&gt;Programme de travail : tout ce qui est dans cette methode doit etre&lt;br&gt;rendu independant de l&#39;exterieur, et peut du coup rejoindre&lt;br&gt;initTimeStep.&lt;br&gt;Le reste passe dans l&#39;interface d&#39;echange de champs.&lt;br&gt;Ce travail sera fini quand updateGivenFields sera vide et supprime !</span>
<a name="l00336"></a>00336 <span class="comment"></span><span class="comment">/** \return true=OK, false=error&lt;br&gt;</span>
<a name="l00337"></a>00337 <span class="comment">Signification:&lt;br&gt;</span>
<a name="l00338"></a>00338 <span class="comment">Contraintes: */</span>
<a name="l00339"></a><a class="code" href="classProbleme__U.html#adfd9be01607a32ffde929d1d20700d81">00339</a> <span class="keywordtype">bool</span>  <a class="code" href="classProbleme__U.html#adfd9be01607a32ffde929d1d20700d81" title="ATTENTION : Rentre ici tout ce qui ne correspond pas a l&#39;API normale de Problem. Actuellement on y me...">Probleme_U::updateGivenFields</a>()
<a name="l00340"></a>00340 {
<a name="l00341"></a>00341   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00342"></a>00342 }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 <span class="comment">// Precondition: initialize</span>
<a name="l00346"></a>00346 <span class="comment">// Parametre:</span>
<a name="l00347"></a>00347 <span class="comment">// Signification:</span>
<a name="l00348"></a>00348 <span class="comment">// Valeurs par defaut:</span>
<a name="l00349"></a>00349 <span class="comment">// Contraintes:</span>
<a name="l00350"></a>00350 <span class="comment">// Acces:</span>
<a name="l00351"></a>00351 <span class="comment">// Exception:</span>
<a name="l00352"></a>00352 <span class="comment">// Effets de bord:</span>
<a name="l00353"></a>00353 <span class="comment">// Postcondition:</span>
<a name="l00354"></a>00354 <span class="comment">// Seule la methode terminate peut etre appelee apres</span>
<a name="l00355"></a>00355 <span class="comment">//</span>
<a name="l00356"></a>00356 <span class="comment">//</span>
<a name="l00357"></a>00357 <span class="comment">//</span><span class="comment"></span>
<a name="l00358"></a>00358 <span class="comment">//! Cette methode est une sorte de main() du Problem&lt;br&gt;Elle peut etre utilisee si le probleme n&#39;est couple a aucun autre.&lt;br&gt;(s&#39;il n&#39;a besoin d&#39;aucun champ d&#39;entree).</span>
<a name="l00359"></a>00359 <span class="comment"></span><span class="comment">/** \return bool&lt;br&gt;</span>
<a name="l00360"></a>00360 <span class="comment">Signification: true=OK, false=error&lt;br&gt;</span>
<a name="l00361"></a>00361 <span class="comment">Contraintes: */</span>
<a name="l00362"></a><a class="code" href="classProbleme__U.html#a9a0ff5932e144524566b9812ccb0f514">00362</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__U.html#a9a0ff5932e144524566b9812ccb0f514" title="Cette methode est une sorte de main() du Problem Elle peut etre utilisee si le probleme n&#39;est couple ...">Probleme_U::run</a>()
<a name="l00363"></a>00363 {
<a name="l00364"></a>00364 <span class="comment">// Force the post process task at the beginning of the run</span>
<a name="l00365"></a>00365   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;First postprocessing, this can take some minutes&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00366"></a>00366   <a class="code" href="classProbleme__U.html#a0c1f33b0a0236dbacff0ccd83abd033a" title="Demande au probleme de postraiter ses champs, sondes,... Dans Probleme_U::run(), postraiter() est app...">postraiter</a>(1);
<a name="l00367"></a>00367   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;First postprocessing OK&quot;</span>&lt;&lt;finl;
<a name="l00368"></a>00368 
<a name="l00369"></a>00369   <span class="keywordtype">bool</span> stop=<span class="keyword">false</span>; <span class="comment">//!&lt; Does the Problem want to stop ?</span>
<a name="l00370"></a>00370 <span class="comment"></span>  <span class="keywordtype">bool</span> ok=<span class="keyword">true</span>; <span class="comment">//!&lt; Is the time interval successfully solved ?</span>
<a name="l00371"></a>00371 <span class="comment"></span>
<a name="l00372"></a>00372 <span class="comment">// Compute the first time step</span>
<a name="l00373"></a>00373   <span class="keywordtype">double</span> dt=<a class="code" href="classProbleme__U.html#a93b3a00e48f1d4e985614c56bf704127" title="Compute the value the Problem would like for the next time step. This value will not necessarily be u...">computeTimeStep</a>(stop);
<a name="l00374"></a>00374 
<a name="l00375"></a>00375   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#a54292d516b078553c900dac14d31d813">initialisation_calcul_counter_</a>);
<a name="l00376"></a>00376 <span class="comment">// Print the initialization CPU statistics</span>
<a name="l00377"></a>00377   <span class="keywordflow">if</span> (!<a class="code" href="classObjet__U.html#a622f9039952e1be36aee2ac0c48955fc" title="Flag to disable the writing of the .TU files.">disable_TU</a>)
<a name="l00378"></a>00378     {
<a name="l00379"></a>00379       <span class="keywordflow">if</span>(<a class="code" href="Statistiques_8h.html#a7f6c434cd21697d3bafbdc2433f06c37">GET_COMM_DETAILS</a>)
<a name="l00380"></a>00380         <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a54c730ed76d3e1ce710392295369acaa">print_communciation_tracking_details</a>(<span class="stringliteral">&quot;Statistiques d&#39;initialisation du calcul&quot;</span>, 0);               <span class="comment">//!&lt; Into _comm.TU file</span>
<a name="l00381"></a>00381 <span class="comment"></span>
<a name="l00382"></a>00382       <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a53b4c3f5e2690ed40586dc62e086c5a8">dump</a>(<span class="stringliteral">&quot;Statistiques d&#39;initialisation du calcul&quot;</span>, 0);
<a name="l00383"></a>00383       <a class="code" href="stat__counters_8cpp.html#a15c34a54aac7b9ec82c9107f5c1c24fa">print_statistics_analyse</a>(<span class="stringliteral">&quot;Statistiques d&#39;initialisation du calcul&quot;</span>, 0);
<a name="l00384"></a>00384     }
<a name="l00385"></a>00385   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#ae51f47e953e4e439d0929e2f0283bdef">reset_counters</a>();
<a name="l00386"></a>00386   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#a2cd262d038049f900ea193c706c476c3">temps_total_execution_counter_</a>);
<a name="l00387"></a>00387 
<a name="l00388"></a>00388 <span class="preprocessor">#ifdef VTRACE</span>
<a name="l00389"></a>00389 <span class="preprocessor"></span><span class="comment">// VT_USER_END(&quot;Initialization&quot;);</span>
<a name="l00390"></a>00390   VT_BUFFER_FLUSH();
<a name="l00391"></a>00391   VT_ON();
<a name="l00392"></a>00392   VT_USER_START(<span class="stringliteral">&quot;Resolution&quot;</span>);
<a name="l00393"></a>00393 <span class="preprocessor">#endif</span>
<a name="l00394"></a>00394 <span class="preprocessor"></span><span class="comment">// Time step loop</span>
<a name="l00395"></a>00395   <span class="keywordtype">int</span> tstep = 0;
<a name="l00396"></a>00396   <span class="keywordflow">while</span>(!stop)
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398 <span class="comment">// Begin the CPU measure of the time step</span>
<a name="l00399"></a>00399       <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#ad7610207bfa4bda2fcba41d00f16fcf0">timestep_counter_</a>);
<a name="l00400"></a>00400 
<a name="l00401"></a>00401       ok=<span class="keyword">false</span>; <span class="comment">//!&lt; Is the time interval successfully solved ?</span>
<a name="l00402"></a>00402 <span class="comment"></span>
<a name="l00403"></a>00403 <span class="comment">// Loop on the time interval tries</span>
<a name="l00404"></a>00404       <span class="keywordflow">while</span> (!ok &amp;&amp; !stop)
<a name="l00405"></a>00405         {
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="comment">// Prepare the next time step</span>
<a name="l00408"></a>00408           <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__U.html#a1610f1493ed8b1790291cc72d4ab1417" title="This method allocates and initializes the unknown and given fields for the future time step...">initTimeStep</a>(dt))
<a name="l00409"></a>00409             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="comment">// Backup unknown fields if necessary</span>
<a name="l00412"></a>00412           <span class="keywordflow">if</span> (<a class="code" href="classProbleme__U.html#afa11951a2d0c437623549fa231ca66e7" title="Doit-on sauvegarder l&#39;etat du probleme sur disque maintenant ?">lsauv</a>())
<a name="l00413"></a>00413             <a class="code" href="classProbleme__U.html#ad9f11e8ca69b2599708f0e286a43ff35" title="Sauvegarder l&#39;etat du probleme sur disque.">sauver</a>();
<a name="l00414"></a>00414 
<a name="l00415"></a>00415 <span class="comment">// Solve the next time step</span>
<a name="l00416"></a>00416           ok=<a class="code" href="classProbleme__U.html#aa62105c3ed432b7b8ce2e459f39752d8" title="pour recodage eventuel et appel unifie en python">solveTimeStep</a>();
<a name="l00417"></a>00417 
<a name="l00418"></a>00418           <span class="keywordflow">if</span> (!ok)   <span class="comment">//!&lt; The resolution failed, try with a new time interval.</span>
<a name="l00419"></a>00419 <span class="comment"></span>            {
<a name="l00420"></a>00420               <a class="code" href="classProbleme__U.html#a828073ad5403524aaea5d615aad76408" title="Aborts the resolution of the current time step.">abortTimeStep</a>();
<a name="l00421"></a>00421               dt=<a class="code" href="classProbleme__U.html#a93b3a00e48f1d4e985614c56bf704127" title="Compute the value the Problem would like for the next time step. This value will not necessarily be u...">computeTimeStep</a>(stop);
<a name="l00422"></a>00422             }
<a name="l00423"></a>00423           <span class="keywordflow">else</span> <span class="comment">//!&lt; The resolution was successful, validate and go to the next time step.</span>
<a name="l00424"></a>00424 <span class="comment"></span>            <a class="code" href="classProbleme__U.html#a3f0e664844e882578e4804975cef70c5" title="Validates the calculated unknown by moving the present time at the end of the time step...">validateTimeStep</a>();
<a name="l00425"></a>00425         }
<a name="l00426"></a>00426       <span class="keywordflow">if</span> (!ok) <span class="comment">//!&lt; Impossible to solve the next time step, the Problem has given up</span>
<a name="l00427"></a>00427 <span class="comment"></span>        <span class="keywordflow">break</span>;
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 <span class="comment">// Compute the next time step length</span>
<a name="l00430"></a>00430       dt=<a class="code" href="classProbleme__U.html#a93b3a00e48f1d4e985614c56bf704127" title="Compute the value the Problem would like for the next time step. This value will not necessarily be u...">computeTimeStep</a>(stop);
<a name="l00431"></a>00431 
<a name="l00432"></a>00432 <span class="comment">// Stop the resolution if the Problem is stationnary</span>
<a name="l00433"></a>00433       <span class="keywordflow">if</span> (<a class="code" href="classProbleme__U.html#ae59db0c138800c85d9802c976b922837" title="Tells if the Problem unknowns have changed during the last time step.">isStationary</a>())
<a name="l00434"></a>00434         {
<a name="l00435"></a>00435           stop=<span class="keyword">true</span>;
<a name="l00436"></a>00436           <a class="code" href="classProbleme__U.html#ac2dc4d3d39edb5a6f88250322e5a5816" title="Tells to the Problem that stationary is reached or not.">setStationary</a>(stop);
<a name="l00437"></a>00437         }
<a name="l00438"></a>00438 <span class="comment">// Post process task (Force the post processing/prints at the end of the run (stop=1))</span>
<a name="l00439"></a>00439       <a class="code" href="classProbleme__U.html#a0c1f33b0a0236dbacff0ccd83abd033a" title="Demande au probleme de postraiter ses champs, sondes,... Dans Probleme_U::run(), postraiter() est app...">postraiter</a>(stop);
<a name="l00440"></a>00440 
<a name="l00441"></a>00441 <span class="comment">// Stop the CPU measure of the time step and print:</span>
<a name="l00442"></a>00442       <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#ad7610207bfa4bda2fcba41d00f16fcf0">timestep_counter_</a>);
<a name="l00443"></a>00443       <span class="keywordflow">if</span> (<a class="code" href="classProbleme__U.html#a6335d8d7b0a67723acfae080b22a6fdb" title="Doit-on imprimer les statistiques d&#39;execution maintenant ?">limpr</a>())
<a name="l00444"></a>00444         {
<a name="l00445"></a>00445           <span class="keywordtype">double</span> temps = <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a21c24113a2042f33ce1134b473ebc1ac">last_time</a>(<a class="code" href="stat__counters_8cpp.html#ad7610207bfa4bda2fcba41d00f16fcf0">timestep_counter_</a>);
<a name="l00446"></a>00446           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; finl &lt;&lt; <span class="stringliteral">&quot;clock: Total time step: &quot;</span> &lt;&lt; temps &lt;&lt; <span class="stringliteral">&quot; s&quot;</span> &lt;&lt; finl &lt;&lt; finl;
<a name="l00447"></a>00447         }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449       <span class="keywordflow">if</span>(<a class="code" href="Statistiques_8h.html#a1bcfabda5482a837da0f52c13f997a92">JUMP_3_FIRST_STEPS</a> &amp;&amp; tstep &lt; 3)
<a name="l00450"></a>00450         {
<a name="l00451"></a>00451 <span class="comment">// demarrage des compteurs CPU</span>
<a name="l00452"></a>00452           <span class="keywordflow">if</span>(tstep == 2)
<a name="l00453"></a>00453             {
<a name="l00454"></a>00454               <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a158c544a2f113b60345e389a2130ba02">set_three_first_steps_elapsed</a>(<span class="keyword">true</span>);
<a name="l00455"></a>00455             }
<a name="l00456"></a>00456         }
<a name="l00457"></a>00457       <span class="keywordflow">else</span>
<a name="l00458"></a>00458         {
<a name="l00459"></a>00459           <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a79fc47f625b87bec7ebaa39d8e52b8e6">compute_avg_min_max_var_per_step</a>(tstep);
<a name="l00460"></a>00460         }
<a name="l00461"></a>00461 
<a name="l00462"></a>00462       tstep++;
<a name="l00463"></a>00463 <span class="preprocessor">#ifdef VTRACE</span>
<a name="l00464"></a>00464 <span class="preprocessor"></span><span class="comment">// Flush the buffer regulary to avoid setting VT_MAX_FLUSHES=0 variable...</span>
<a name="l00465"></a>00465       VT_BUFFER_FLUSH();
<a name="l00466"></a>00466 <span class="preprocessor">#endif</span>
<a name="l00467"></a>00467 <span class="preprocessor"></span>    }
<a name="l00468"></a>00468 <span class="preprocessor">#ifdef VTRACE</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span>  VT_USER_END(<span class="stringliteral">&quot;Resolution&quot;</span>);
<a name="l00470"></a>00470   VT_OFF();
<a name="l00471"></a>00471 <span class="preprocessor">#endif</span>
<a name="l00472"></a>00472 <span class="preprocessor"></span>
<a name="l00473"></a>00473 <span class="comment">// Print the resolution CPU statistics</span>
<a name="l00474"></a>00474   <span class="keywordflow">if</span> (!<a class="code" href="classObjet__U.html#a622f9039952e1be36aee2ac0c48955fc" title="Flag to disable the writing of the .TU files.">disable_TU</a>)
<a name="l00475"></a>00475     {
<a name="l00476"></a>00476       <span class="keywordflow">if</span>(<a class="code" href="Statistiques_8h.html#a7f6c434cd21697d3bafbdc2433f06c37">GET_COMM_DETAILS</a>)
<a name="l00477"></a>00477         <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a54c730ed76d3e1ce710392295369acaa">print_communciation_tracking_details</a>(<span class="stringliteral">&quot;Statistiques de resolution du probleme&quot;</span>, 1);               <span class="comment">//!&lt; Into _comm.TU file</span>
<a name="l00478"></a>00478 <span class="comment"></span>
<a name="l00479"></a>00479       <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a53b4c3f5e2690ed40586dc62e086c5a8">dump</a>(<span class="stringliteral">&quot;Statistiques de resolution du probleme&quot;</span>, 1);      <span class="comment">//!&lt; Into _detail.TU file</span>
<a name="l00480"></a>00480 <span class="comment"></span>      <a class="code" href="stat__counters_8cpp.html#a15c34a54aac7b9ec82c9107f5c1c24fa">print_statistics_analyse</a>(<span class="stringliteral">&quot;Statistiques de resolution du probleme&quot;</span>, 1); <span class="comment">//!&lt; Into        .TU file</span>
<a name="l00481"></a>00481 <span class="comment"></span>    }
<a name="l00482"></a>00482 
<a name="l00483"></a>00483 <span class="comment">// Reset the CPU counters</span>
<a name="l00484"></a>00484   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#ae51f47e953e4e439d0929e2f0283bdef">reset_counters</a>();
<a name="l00485"></a>00485   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#a2cd262d038049f900ea193c706c476c3">temps_total_execution_counter_</a>);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487   <span class="keywordflow">return</span> ok;
<a name="l00488"></a>00488 }
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 <span class="comment">// Precondition: initialize</span>
<a name="l00491"></a>00491 <span class="comment">// Parametre: double time</span>
<a name="l00492"></a>00492 <span class="comment">// Signification: time to reach</span>
<a name="l00493"></a>00493 <span class="comment">// Valeurs par defaut:</span>
<a name="l00494"></a>00494 <span class="comment">// Contraintes:</span>
<a name="l00495"></a>00495 <span class="comment">// Acces:</span>
<a name="l00496"></a>00496 <span class="comment">// Exception:</span>
<a name="l00497"></a>00497 <span class="comment">// Effets de bord:</span>
<a name="l00498"></a>00498 <span class="comment">// Postcondition:</span>
<a name="l00499"></a>00499 <span class="comment">// If the method succeeds, the present time is time.</span>
<a name="l00500"></a>00500 <span class="comment">//</span>
<a name="l00501"></a>00501 <span class="comment">//</span>
<a name="l00502"></a>00502 <span class="comment">//</span><span class="comment"></span>
<a name="l00503"></a>00503 <span class="comment">//! This method has the same role as the method run, but it stops&lt;br&gt;when reaching the time given in parameter.&lt;br&gt;If this time cannot be reached, the method returns false.</span>
<a name="l00504"></a>00504 <span class="comment"></span><span class="comment">/** \return true=OK, false=error&lt;br&gt;</span>
<a name="l00505"></a>00505 <span class="comment">Signification:&lt;br&gt;</span>
<a name="l00506"></a>00506 <span class="comment">Contraintes: */</span>
<a name="l00507"></a><a class="code" href="classProbleme__U.html#a9562cf3f4f455447e0530dee332f49ae">00507</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__U.html#a9562cf3f4f455447e0530dee332f49ae" title="This method has the same role as the method run, but it stops when reaching the time given in paramet...">Probleme_U::runUntil</a>(<span class="keywordtype">double</span> time)
<a name="l00508"></a>00508 {
<a name="l00509"></a>00509 
<a name="l00510"></a>00510 <span class="comment">// Error if time is already past</span>
<a name="l00511"></a>00511   <span class="keywordflow">if</span> (time&lt;<a class="code" href="classProbleme__U.html#ab737ef19f58b4420582ed239205af296" title="Returns the present time. This value may change only at the call of validateTimeStep. A surcharger.">presentTime</a>())
<a name="l00512"></a>00512     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514   <span class="keywordtype">bool</span> stop=<span class="keyword">false</span>; <span class="comment">//!&lt; Does the Problem want to stop ?</span>
<a name="l00515"></a>00515 <span class="comment"></span>  <span class="keywordtype">bool</span> ok=<span class="keyword">true</span>; <span class="comment">//!&lt; Is the time interval successfully solved ?</span>
<a name="l00516"></a>00516 <span class="comment"></span>
<a name="l00517"></a>00517 <span class="comment">// Compute the first time step length</span>
<a name="l00518"></a>00518   <span class="keywordtype">double</span> dt=<a class="code" href="classProbleme__U.html#a93b3a00e48f1d4e985614c56bf704127" title="Compute the value the Problem would like for the next time step. This value will not necessarily be u...">computeTimeStep</a>(stop);
<a name="l00519"></a>00519 
<a name="l00520"></a>00520 <span class="comment">// Boucle sur les pas de temps</span>
<a name="l00521"></a>00521   <span class="keywordflow">while</span>(!stop)
<a name="l00522"></a>00522     {
<a name="l00523"></a>00523 
<a name="l00524"></a>00524       <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#ad7610207bfa4bda2fcba41d00f16fcf0">timestep_counter_</a>);
<a name="l00525"></a>00525 
<a name="l00526"></a>00526       ok=<span class="keyword">false</span>;
<a name="l00527"></a>00527 
<a name="l00528"></a>00528 <span class="comment">// Loop on the time interval tries</span>
<a name="l00529"></a>00529       <span class="keywordflow">while</span> (!ok &amp;&amp; !stop)
<a name="l00530"></a>00530         {
<a name="l00531"></a>00531 
<a name="l00532"></a>00532 <span class="comment">// Do not go past time</span>
<a name="l00533"></a>00533           <span class="keywordflow">if</span> (<a class="code" href="classProbleme__U.html#ab737ef19f58b4420582ed239205af296" title="Returns the present time. This value may change only at the call of validateTimeStep. A surcharger.">presentTime</a>()+dt&gt;time)
<a name="l00534"></a>00534             dt=time-<a class="code" href="classProbleme__U.html#ab737ef19f58b4420582ed239205af296" title="Returns the present time. This value may change only at the call of validateTimeStep. A surcharger.">presentTime</a>();
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 <span class="comment">// Prepare the next time step</span>
<a name="l00537"></a>00537           <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__U.html#a1610f1493ed8b1790291cc72d4ab1417" title="This method allocates and initializes the unknown and given fields for the future time step...">initTimeStep</a>(dt))
<a name="l00538"></a>00538             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 <span class="comment">// Solve the next time step</span>
<a name="l00541"></a>00541           ok=<a class="code" href="classProbleme__U.html#aa62105c3ed432b7b8ce2e459f39752d8" title="pour recodage eventuel et appel unifie en python">solveTimeStep</a>();
<a name="l00542"></a>00542 
<a name="l00543"></a>00543           <span class="keywordflow">if</span> (!ok)   <span class="comment">//!&lt; The resolution failed, try with a new time interval.</span>
<a name="l00544"></a>00544 <span class="comment"></span>            {
<a name="l00545"></a>00545               <a class="code" href="classProbleme__U.html#a828073ad5403524aaea5d615aad76408" title="Aborts the resolution of the current time step.">abortTimeStep</a>();
<a name="l00546"></a>00546               dt=<a class="code" href="classProbleme__U.html#a93b3a00e48f1d4e985614c56bf704127" title="Compute the value the Problem would like for the next time step. This value will not necessarily be u...">computeTimeStep</a>(stop);
<a name="l00547"></a>00547             }
<a name="l00548"></a>00548 
<a name="l00549"></a>00549           <span class="keywordflow">else</span> <span class="comment">//!&lt; The resolution was successful, validate and go to the next time step.</span>
<a name="l00550"></a>00550 <span class="comment"></span><span class="comment">//</span>
<a name="l00551"></a>00551             <a class="code" href="classProbleme__U.html#a3f0e664844e882578e4804975cef70c5" title="Validates the calculated unknown by moving the present time at the end of the time step...">validateTimeStep</a>();
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553       <span class="keywordflow">if</span> (!ok) <span class="comment">//!&lt; Impossible to solve the next time step, the Problem has given up</span>
<a name="l00554"></a>00554 <span class="comment"></span>        <span class="keywordflow">break</span>;
<a name="l00555"></a>00555 
<a name="l00556"></a>00556 <span class="comment">// time was reached</span>
<a name="l00557"></a>00557       <span class="keywordflow">if</span> (<a class="code" href="classProbleme__U.html#ab737ef19f58b4420582ed239205af296" title="Returns the present time. This value may change only at the call of validateTimeStep. A surcharger.">presentTime</a>()==time)
<a name="l00558"></a>00558         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00559"></a>00559 
<a name="l00560"></a>00560 <span class="comment">// Compute the next time step length</span>
<a name="l00561"></a>00561       dt=<a class="code" href="classProbleme__U.html#a93b3a00e48f1d4e985614c56bf704127" title="Compute the value the Problem would like for the next time step. This value will not necessarily be u...">computeTimeStep</a>(stop);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563       <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#ad7610207bfa4bda2fcba41d00f16fcf0">timestep_counter_</a>);
<a name="l00564"></a>00564       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>() &amp;&amp; <a class="code" href="classProbleme__U.html#a6335d8d7b0a67723acfae080b22a6fdb" title="Doit-on imprimer les statistiques d&#39;execution maintenant ?">limpr</a>())
<a name="l00565"></a>00565         {
<a name="l00566"></a>00566           <span class="keywordtype">double</span> temps = <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a21c24113a2042f33ce1134b473ebc1ac">last_time</a>(<a class="code" href="stat__counters_8cpp.html#ad7610207bfa4bda2fcba41d00f16fcf0">timestep_counter_</a>);
<a name="l00567"></a>00567           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;clock: Total time step: &quot;</span> &lt;&lt; temps &lt;&lt; <span class="stringliteral">&quot; s&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00568"></a>00568         }
<a name="l00569"></a>00569 
<a name="l00570"></a>00570       <a class="code" href="classProbleme__U.html#a0c1f33b0a0236dbacff0ccd83abd033a" title="Demande au probleme de postraiter ses champs, sondes,... Dans Probleme_U::run(), postraiter() est app...">postraiter</a>(0);
<a name="l00571"></a>00571     }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573   <span class="keywordflow">return</span> ok;
<a name="l00574"></a>00574 }
<a name="l00575"></a>00575 <span class="comment"></span>
<a name="l00576"></a>00576 <span class="comment">//! pour recodage eventuel et appel unifie en python</span>
<a name="l00577"></a><a class="code" href="classProbleme__U.html#aa62105c3ed432b7b8ce2e459f39752d8">00577</a> <span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classProbleme__U.html#aa62105c3ed432b7b8ce2e459f39752d8" title="pour recodage eventuel et appel unifie en python">Probleme_U::solveTimeStep</a>(<span class="keywordtype">void</span>)
<a name="l00578"></a>00578 {
<a name="l00579"></a>00579   <span class="keywordtype">bool</span> converged = <span class="keyword">false</span>;
<a name="l00580"></a>00580   <span class="keywordtype">bool</span> ok        = <span class="keyword">true</span>;
<a name="l00581"></a>00581 
<a name="l00582"></a>00582   <span class="keywordflow">while</span> (!converged &amp;&amp; ok)
<a name="l00583"></a>00583     {
<a name="l00584"></a>00584       ok= ok &amp;&amp; <a class="code" href="classProbleme__U.html#adfd9be01607a32ffde929d1d20700d81" title="ATTENTION : Rentre ici tout ce qui ne correspond pas a l&#39;API normale de Problem. Actuellement on y me...">updateGivenFields</a>();
<a name="l00585"></a>00585       ok = ok &amp;&amp; <a class="code" href="classProbleme__U.html#a4aebc703b79c2fef3a321c83d29c7ffb" title="In the case solveTimeStep uses an iterative process, this method executes a single iteration...">iterateTimeStep</a>(converged);
<a name="l00586"></a>00586     }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588   <span class="keywordflow">return</span> ok;
<a name="l00589"></a>00589 }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 <span class="comment">// Precondition: initTimeStep, not yet validateTimeStep neither abortTimeStep</span>
<a name="l00592"></a>00592 <span class="comment">// Parametre:</span>
<a name="l00593"></a>00593 <span class="comment">// Signification:</span>
<a name="l00594"></a>00594 <span class="comment">// Valeurs par defaut:</span>
<a name="l00595"></a>00595 <span class="comment">// Contraintes:</span>
<a name="l00596"></a>00596 <span class="comment">// Acces:</span>
<a name="l00597"></a>00597 <span class="comment">// Exception: WrongContext</span>
<a name="l00598"></a>00598 <span class="comment">// Effets de bord:</span>
<a name="l00599"></a>00599 <span class="comment">// Postcondition:</span>
<a name="l00600"></a>00600 <span class="comment">// Problem unchanged</span>
<a name="l00601"></a>00601 <span class="comment">//</span>
<a name="l00602"></a>00602 <span class="comment">//</span>
<a name="l00603"></a>00603 <span class="comment">//</span>
<a name="l00604"></a>00604 <span class="comment">//</span><span class="comment"></span>
<a name="l00605"></a>00605 <span class="comment">//! Returns the future time (end of current computing interval)&lt;br&gt;This value is valid between initTimeStep and either&lt;br&gt;validateTimeStep or abortTimeStep.&lt;br&gt;A surcharger</span>
<a name="l00606"></a>00606 <span class="comment"></span><span class="comment">/** \return double&lt;br&gt;</span>
<a name="l00607"></a>00607 <span class="comment">Signification: future time&lt;br&gt;</span>
<a name="l00608"></a>00608 <span class="comment">Contraintes: */</span>
<a name="l00609"></a><a class="code" href="classProbleme__U.html#a9a748a23378f79c29463e47da8644c41">00609</a> <span class="keywordtype">double</span> <a class="code" href="classProbleme__U.html#a9a748a23378f79c29463e47da8644c41" title="Returns the future time (end of current computing interval) This value is valid between initTimeStep ...">Probleme_U::futureTime</a>()<span class="keyword"> const</span>
<a name="l00610"></a>00610 <span class="keyword"></span>{
<a name="l00611"></a>00611   <span class="keywordflow">return</span> 0;
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 <span class="comment">// Precondition: initTimeStep</span>
<a name="l00615"></a>00615 <span class="comment">// Parametre: Noms</span>
<a name="l00616"></a>00616 <span class="comment">// Signification: list of names where the Problem appends its input field names.</span>
<a name="l00617"></a>00617 <span class="comment">// Valeurs par defaut:</span>
<a name="l00618"></a>00618 <span class="comment">// Contraintes:</span>
<a name="l00619"></a>00619 <span class="comment">// Acces:</span>
<a name="l00620"></a>00620 <span class="comment">// </span>
<a name="l00621"></a>00621 <span class="comment">// Signification:</span>
<a name="l00622"></a>00622 <span class="comment">// Contraintes:</span>
<a name="l00623"></a>00623 <span class="comment">// Exception:</span>
<a name="l00624"></a>00624 <span class="comment">// Effets de bord:</span>
<a name="l00625"></a>00625 <span class="comment">// Postcondition:</span>
<a name="l00626"></a>00626 <span class="comment">// Problem unchanged</span>
<a name="l00627"></a>00627 <span class="comment">//</span><span class="comment"></span>
<a name="l00628"></a>00628 <span class="comment">//! This method is used to find the names of input fields understood by the Problem</span>
<a name="l00629"></a><a class="code" href="classProbleme__U.html#a7e0b7af2808a85d969da7b5709b3c07a">00629</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#a7e0b7af2808a85d969da7b5709b3c07a" title="This method is used to find the names of input fields understood by the Problem.">Probleme_U::getInputFieldsNames</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms)<span class="keyword"> const</span>
<a name="l00630"></a>00630 <span class="keyword"></span>{
<a name="l00631"></a>00631 }
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 <span class="comment">// Precondition: initialize</span>
<a name="l00634"></a>00634 <span class="comment">// Parametre: string name</span>
<a name="l00635"></a>00635 <span class="comment">// Signification: name of the input field we are looking for</span>
<a name="l00636"></a>00636 <span class="comment">// Valeurs par defaut:</span>
<a name="l00637"></a>00637 <span class="comment">// Contraintes:</span>
<a name="l00638"></a>00638 <span class="comment">// Acces:</span>
<a name="l00639"></a>00639 <span class="comment">// Exception:</span>
<a name="l00640"></a>00640 <span class="comment">// Effets de bord:</span>
<a name="l00641"></a>00641 <span class="comment">// Postcondition:</span>
<a name="l00642"></a>00642 <span class="comment">// If the method succeeds, the present time is time.</span>
<a name="l00643"></a>00643 <span class="comment">//</span>
<a name="l00644"></a>00644 <span class="comment">//</span>
<a name="l00645"></a>00645 <span class="comment">//</span>
<a name="l00646"></a>00646 <span class="comment">//</span>
<a name="l00647"></a>00647 <span class="comment">//</span><span class="comment"></span>
<a name="l00648"></a>00648 <span class="comment">//! This method is used to find in a hierarchy of problems the&lt;br&gt;Champ_Input_Proto of a given name.&lt;br&gt;Implementation is not optimal in 2 ways :&lt;br&gt;- no error if two input fields have the same name.&lt;br&gt;- no optimisation of the number of REF objects created and destroyed.</span>
<a name="l00649"></a>00649 <span class="comment"></span><span class="comment">/** \return REF(Field_base)&lt;br&gt;</span>
<a name="l00650"></a>00650 <span class="comment">Signification: found &lt;=&gt; non_nul(), then points to a Champ_Input_Proto of that name.&lt;br&gt;</span>
<a name="l00651"></a>00651 <span class="comment">Contraintes: */</span>
<a name="l00652"></a><a class="code" href="classProbleme__U.html#a260812af1330442b90a1edf173f6daa5">00652</a> <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classField__base.html">Field_base</a>) <a class="code" href="classProbleme__U.html" title="classe Probleme_U Cette classe ajoute des specificites TRUST a l&#39;interface generale definie dans la c...">Probleme_U</a>::findInputField(const <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name)<span class="keyword"> const</span>
<a name="l00653"></a>00653 <span class="keyword"></span>{
<a name="l00654"></a>00654   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classField__base.html">Field_base</a>) ch;
<a name="l00655"></a>00655   <span class="keywordflow">return</span> ch;
<a name="l00656"></a>00656 }
<a name="l00657"></a>00657 
<a name="l00658"></a>00658 
<a name="l00659"></a>00659 
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 <span class="comment">// Precondition: initTimeStep</span>
<a name="l00662"></a>00662 <span class="comment">// Parametre: Noms</span>
<a name="l00663"></a>00663 <span class="comment">// Signification: list of names where the Problem appends its output field names.</span>
<a name="l00664"></a>00664 <span class="comment">// Valeurs par defaut:</span>
<a name="l00665"></a>00665 <span class="comment">// Contraintes:</span>
<a name="l00666"></a>00666 <span class="comment">// Acces:</span>
<a name="l00667"></a>00667 <span class="comment">// </span>
<a name="l00668"></a>00668 <span class="comment">// Signification:</span>
<a name="l00669"></a>00669 <span class="comment">// Contraintes:</span>
<a name="l00670"></a>00670 <span class="comment">// Exception:</span>
<a name="l00671"></a>00671 <span class="comment">// Effets de bord:</span>
<a name="l00672"></a>00672 <span class="comment">// Postcondition:</span>
<a name="l00673"></a>00673 <span class="comment">// Problem unchanged</span>
<a name="l00674"></a>00674 <span class="comment">//</span><span class="comment"></span>
<a name="l00675"></a>00675 <span class="comment">//! This method is used to find the names of output fields understood by the Problem</span>
<a name="l00676"></a><a class="code" href="classProbleme__U.html#ae5ca3d88609647bb523ac9b4d871e387">00676</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#ae5ca3d88609647bb523ac9b4d871e387" title="This method is used to find the names of output fields understood by the Problem.">Probleme_U::getOutputFieldsNames</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms)<span class="keyword"> const</span>
<a name="l00677"></a>00677 <span class="keyword"></span>{
<a name="l00678"></a>00678 }
<a name="l00679"></a>00679 
<a name="l00680"></a><a class="code" href="classProbleme__U.html#a89e980bc25b9149a36689879d9b2e727">00680</a> <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Generique__base.html" title="Classe de base des champs generiques pour importation d un champ discret et actions elementaires sur ...">Champ_Generique_base</a>) <a class="code" href="classProbleme__U.html" title="classe Probleme_U Cette classe ajoute des specificites TRUST a l&#39;interface generale definie dans la c...">Probleme_U</a>::findOutputField(const <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name)<span class="keyword"> const</span>
<a name="l00681"></a>00681 <span class="keyword"></span>{
<a name="l00682"></a>00682   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Generique__base.html" title="Classe de base des champs generiques pour importation d un champ discret et actions elementaires sur ...">Champ_Generique_base</a>) ch;
<a name="l00683"></a>00683   <span class="keywordflow">return</span> ch;
<a name="l00684"></a>00684 }
<a name="l00685"></a>00685 
<a name="l00686"></a>00686 
<a name="l00687"></a>00687 
<a name="l00688"></a>00688 <span class="comment">// Precondition: initTimeStep, name is one of getInputFieldsNames</span>
<a name="l00689"></a>00689 <span class="comment">// Parametre:</span>
<a name="l00690"></a>00690 <span class="comment">// Signification:</span>
<a name="l00691"></a>00691 <span class="comment">// Valeurs par defaut:</span>
<a name="l00692"></a>00692 <span class="comment">// Contraintes:</span>
<a name="l00693"></a>00693 <span class="comment">// Acces:</span>
<a name="l00694"></a>00694 <span class="comment">// </span>
<a name="l00695"></a>00695 <span class="comment">// Signification:</span>
<a name="l00696"></a>00696 <span class="comment">// Contraintes:</span>
<a name="l00697"></a>00697 <span class="comment">// Exception:</span>
<a name="l00698"></a>00698 <span class="comment">// Effets de bord:</span>
<a name="l00699"></a>00699 <span class="comment">// Postcondition:</span>
<a name="l00700"></a>00700 <span class="comment">// afield contains a field with vales neither allocated nor filled, describing the</span>
<a name="l00701"></a>00701 <span class="comment">// field expected by setInputField for that name.</span>
<a name="l00702"></a>00702 <span class="comment">// Problem unchanged</span>
<a name="l00703"></a>00703 <span class="comment">//</span><span class="comment"></span>
<a name="l00704"></a>00704 <span class="comment">//! This method is used to get a template of a field expected for the given name.</span>
<a name="l00705"></a><a class="code" href="classICoCo_1_1ProblemTrio.html#ade2266152954e04971eb6d6f4a7683c8">00705</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#acf949dce2dffff5bfd1b9e373d79178e">Probleme_U::getInputFieldTemplate</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name, TrioField&amp; afield)<span class="keyword"> const</span>
<a name="l00706"></a>00706 <span class="keyword"></span>{
<a name="l00707"></a>00707   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classField__base.html">Field_base</a>) ch=<a class="code" href="classProbleme__U.html#a260812af1330442b90a1edf173f6daa5" title="This method is used to find in a hierarchy of problems the Champ_Input_Proto of a given name...">findInputField</a>(name);
<a name="l00708"></a>00708   <span class="keywordflow">if</span> (!ch.non_nul())
<a name="l00709"></a>00709     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),<span class="stringliteral">&quot;getInputFieldTemplate&quot;</span>,name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),<span class="stringliteral">&quot;no input field of that name&quot;</span>);
<a name="l00710"></a>00710 
<a name="l00711"></a>00711 <span class="comment">// Du au fait qu&#39;on ne peut pas faire une ref sur Champ_Input_Proto qui n&#39;est pas un Objet_U...</span>
<a name="l00712"></a>00712   <a class="code" href="classChamp__Input__Proto.html" title="This is the base class for all the Fields which can be written by a call to Problem::setInputField Th...">Champ_Input_Proto</a> * chip = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classChamp__Input__Proto.html" title="This is the base class for all the Fields which can be written by a call to Problem::setInputField Th...">Champ_Input_Proto</a> *<span class="keyword">&gt;</span>(ch.operator-&gt;());
<a name="l00713"></a>00713   <span class="keywordflow">if</span> (!chip)
<a name="l00714"></a>00714     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().getChar(),<span class="stringliteral">&quot;getInputFieldTemplate&quot;</span>,name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),<span class="stringliteral">&quot;field of this name is not an input field&quot;</span>);
<a name="l00715"></a>00715 
<a name="l00716"></a>00716   chip-&gt;<a class="code" href="classChamp__Input__Proto.html#ae7f35a971aa1e496ec70a2338caf19bf">getTemplate</a>(afield);
<a name="l00717"></a>00717 }
<a name="l00718"></a>00718 
<a name="l00719"></a>00719 <span class="comment">// Precondition: initTimeStep, name is one of getInputFieldsNames, afield is like in getInputFieldTemplate</span>
<a name="l00720"></a>00720 <span class="comment">// Parametre:</span>
<a name="l00721"></a>00721 <span class="comment">// Signification:</span>
<a name="l00722"></a>00722 <span class="comment">// Valeurs par defaut:</span>
<a name="l00723"></a>00723 <span class="comment">// Contraintes:</span>
<a name="l00724"></a>00724 <span class="comment">// Acces:</span>
<a name="l00725"></a>00725 <span class="comment">// </span>
<a name="l00726"></a>00726 <span class="comment">// Signification:</span>
<a name="l00727"></a>00727 <span class="comment">// Contraintes:</span>
<a name="l00728"></a>00728 <span class="comment">// Exception:</span>
<a name="l00729"></a>00729 <span class="comment">// Effets de bord:</span>
<a name="l00730"></a>00730 <span class="comment">// Postcondition:</span>
<a name="l00731"></a>00731 <span class="comment">// Values of afield have been used (copied inside the Problem).</span>
<a name="l00732"></a>00732 <span class="comment">//</span><span class="comment"></span>
<a name="l00733"></a>00733 <span class="comment">//! This method is used to provide the Problem with an input field.</span>
<a name="l00734"></a><a class="code" href="classICoCo_1_1ProblemTrio.html#abf4fdc8b228db5e9f349b2c107cca7a6">00734</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#a488b253ea2f2629744ce3a8370b128d0">Probleme_U::setInputField</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name, <span class="keyword">const</span> TrioField&amp; afield)
<a name="l00735"></a>00735 {
<a name="l00736"></a>00736   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classField__base.html">Field_base</a>) ch=<a class="code" href="classProbleme__U.html#a260812af1330442b90a1edf173f6daa5" title="This method is used to find in a hierarchy of problems the Champ_Input_Proto of a given name...">findInputField</a>(name);
<a name="l00737"></a>00737   <span class="keywordflow">if</span> (!ch.non_nul())
<a name="l00738"></a>00738     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),<span class="stringliteral">&quot;setInputField&quot;</span>,name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),<span class="stringliteral">&quot;no input field of that name&quot;</span>);
<a name="l00739"></a>00739   <span class="keywordflow">if</span> (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(afield._time1,<a class="code" href="classProbleme__U.html#ab737ef19f58b4420582ed239205af296" title="Returns the present time. This value may change only at the call of validateTimeStep. A surcharger.">presentTime</a>()))
<a name="l00740"></a>00740     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),<span class="stringliteral">&quot;setInputField&quot;</span>,<span class="stringliteral">&quot;afield&quot;</span>,<span class="stringliteral">&quot;Should be defined on current time interval&quot;</span>);
<a name="l00741"></a>00741   <span class="keywordflow">if</span> (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(afield._time2,<a class="code" href="classProbleme__U.html#a9a748a23378f79c29463e47da8644c41" title="Returns the future time (end of current computing interval) This value is valid between initTimeStep ...">futureTime</a>()))
<a name="l00742"></a>00742     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),<span class="stringliteral">&quot;setInputField&quot;</span>,<span class="stringliteral">&quot;afield&quot;</span>,<span class="stringliteral">&quot;Should be defined on current time interval&quot;</span>);
<a name="l00743"></a>00743   <span class="keywordflow">if</span> (strcmp(name.<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),afield.getCharName()))
<a name="l00744"></a>00744     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().getChar(),<span class="stringliteral">&quot;setInputField&quot;</span>,<span class="stringliteral">&quot;afield&quot;</span>,<span class="stringliteral">&quot;Should have the same name as the argument name &quot;</span>);
<a name="l00745"></a>00745 
<a name="l00746"></a>00746 <span class="comment">// Du au fait qu&#39;on ne peut pas faire une ref sur Champ_Input_Proto qui n&#39;est pas un Objet_U...</span>
<a name="l00747"></a>00747   <a class="code" href="classChamp__Input__Proto.html" title="This is the base class for all the Fields which can be written by a call to Problem::setInputField Th...">Champ_Input_Proto</a> * chip = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classChamp__Input__Proto.html" title="This is the base class for all the Fields which can be written by a call to Problem::setInputField Th...">Champ_Input_Proto</a> *<span class="keyword">&gt;</span>(ch.operator-&gt;());
<a name="l00748"></a>00748   <span class="keywordflow">if</span> (!chip)
<a name="l00749"></a>00749     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().getChar(),<span class="stringliteral">&quot;setInputField&quot;</span>,name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),<span class="stringliteral">&quot;field of this name is not an input field&quot;</span>);
<a name="l00750"></a>00750 
<a name="l00751"></a>00751   chip-&gt;<a class="code" href="classChamp__Input__Proto.html#a9ec473760ceebe7331114404452410b6">setValue</a>(afield);
<a name="l00752"></a>00752 }
<a name="l00753"></a>00753 
<a name="l00754"></a><a class="code" href="classICoCo_1_1ProblemTrio.html#a54b4aad4ce478f44052370e2e3d286e9">00754</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#a10c8413ade491ac3cc4b3c76e5dc7eec">Probleme_U::getOutputField</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name,  TrioField&amp; afield)<span class="keyword"> const</span>
<a name="l00755"></a>00755 <span class="keyword"></span>{
<a name="l00756"></a>00756 
<a name="l00757"></a>00757   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Generique__base.html" title="Classe de base des champs generiques pour importation d un champ discret et actions elementaires sur ...">Champ_Generique_base</a>) ref_ch=<a class="code" href="classProbleme__U.html#a89e980bc25b9149a36689879d9b2e727">findOutputField</a>(name);
<a name="l00758"></a>00758   <span class="keywordflow">if</span> (!ref_ch.non_nul())
<a name="l00759"></a>00759     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),<span class="stringliteral">&quot;getOutputField&quot;</span>,name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),<span class="stringliteral">&quot;no output field of that name&quot;</span>);
<a name="l00760"></a>00760 
<a name="l00761"></a>00761   <span class="keyword">const</span> <a class="code" href="classChamp__Generique__base.html" title="Classe de base des champs generiques pour importation d un champ discret et actions elementaires sur ...">Champ_Generique_base</a>&amp; ch = ref_ch.valeur();
<a name="l00762"></a>00762   <a class="code" href="Convert__ICoCoTrioField_8cpp.html#af50d611167938cbd08d21539b668f6dd">build_triofield</a>(ch, afield);
<a name="l00763"></a>00763   afield.setName(name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>());
<a name="l00764"></a>00764 }
<a name="l00765"></a>00765 
<a name="l00766"></a>00766 <span class="comment">// For now: set a field value provided the field has only one item.</span>
<a name="l00767"></a><a class="code" href="classProbleme__U.html#ac21e21ff0e16cf8da5d03031cddb8977">00767</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__U.html#ac21e21ff0e16cf8da5d03031cddb8977">Probleme_U::setInputDoubleValue</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; val)
<a name="l00768"></a>00768 {
<a name="l00769"></a>00769   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classField__base.html">Field_base</a>) ch = <a class="code" href="classProbleme__U.html#a260812af1330442b90a1edf173f6daa5" title="This method is used to find in a hierarchy of problems the Champ_Input_Proto of a given name...">findInputField</a>(name);
<a name="l00770"></a>00770   <span class="keywordflow">if</span> (!ch.non_nul())
<a name="l00771"></a>00771     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),<span class="stringliteral">&quot;setInputDoubleValue&quot;</span>,name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),<span class="stringliteral">&quot;no input field of that name&quot;</span>);
<a name="l00772"></a>00772   <span class="keywordflow">if</span> (ch-&gt;nb_comp() != 1)
<a name="l00773"></a>00773     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),<span class="stringliteral">&quot;getOutputDoubleValue&quot;</span>,name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),<span class="stringliteral">&quot;invalid field size!!&quot;</span>);
<a name="l00774"></a>00774 
<a name="l00775"></a>00775 <span class="comment">// Wa can not do a REF on Champ_Input_Proto which is not an Objet_U...</span>
<a name="l00776"></a>00776   <a class="code" href="classChamp__Input__Proto.html" title="This is the base class for all the Fields which can be written by a call to Problem::setInputField Th...">Champ_Input_Proto</a> * chip = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classChamp__Input__Proto.html" title="This is the base class for all the Fields which can be written by a call to Problem::setInputField Th...">Champ_Input_Proto</a> *<span class="keyword">&gt;</span>(ch.operator -&gt;());
<a name="l00777"></a>00777   <span class="keywordflow">if</span> (!chip)
<a name="l00778"></a>00778     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__U.html#af8a87e3d3e56126116071b75d9db19af" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>().getChar(),<span class="stringliteral">&quot;setInputField&quot;</span>,name.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(),<span class="stringliteral">&quot;field of this name is not an input field&quot;</span>);
<a name="l00779"></a>00779   chip-&gt;<a class="code" href="classChamp__Input__Proto.html#a27b17474f5016e5eb5fcecfd343d9b3a">setDoubleValue</a>(val);
<a name="l00780"></a>00780 }
<a name="l00781"></a>00781 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:16 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
