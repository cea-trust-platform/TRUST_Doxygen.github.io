<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: mon_main Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">mon_main Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="mon_main" -->
<p>Classe creee et executee par <a class="el" href="the__main_8cpp.html#a251dcb4a3ce2025a48f928402336edce">main()</a> et lors d'une execution TRUST a<br/>
travers Python. Il faut<br/>
- creer une instance <a class="el" href="classmon__main.html" title="Classe creee et executee par main() et lors d&#39;une execution TRUST a travers Python. Il faut - creer une instance mon_main - initialiser le parallele - appeler dowork(nom_du_cas) (lecture et interpretation du jdd) A cet instant on peut jouer avec les objets crees en python (voir Interprete_bloc::objet_global(nom)) - detruire l&#39;instance mon_main L&#39;interprete principal conserve ses objets jusqu&#39;a la destruction de l&#39;instance mon_main.">mon_main</a><br/>
- initialiser le parallele<br/>
- appeler dowork(nom_du_cas) (lecture et interpretation du jdd)<br/>
A cet instant on peut jouer avec les objets crees en python<br/>
(voir Interprete_bloc::objet_global(nom))<br/>
- detruire l'instance <a class="el" href="classmon__main.html" title="Classe creee et executee par main() et lors d&#39;une execution TRUST a travers Python. Il faut - creer une instance mon_main - initialiser le parallele - appeler dowork(nom_du_cas) (lecture et interpretation du jdd) A cet instant on peut jouer avec les objets crees en python (voir Interprete_bloc::objet_global(nom)) - detruire l&#39;instance mon_main L&#39;interprete principal conserve ses objets jusqu&#39;a la destruction de l&#39;instance mon_main.">mon_main</a><br/>
L'interprete principal conserve ses objets jusqu'a la destruction<br/>
de l'instance <a class="el" href="classmon__main.html" title="Classe creee et executee par main() et lors d&#39;une execution TRUST a travers Python. Il faut - creer une instance mon_main - initialiser le parallele - appeler dowork(nom_du_cas) (lecture et interpretation du jdd) A cet instant on peut jouer avec les objets crees en python (voir Interprete_bloc::objet_global(nom)) - detruire l&#39;instance mon_main L&#39;interprete principal conserve ses objets jusqu&#39;a la destruction de l&#39;instance mon_main.">mon_main</a>.  
 <a href="classmon__main.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="mon__main_8h_source.html">mon_main.h</a>&gt;</code></p>

<p><a href="classmon__main-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#aff89924d7e6788118ff989dc36ac06d0">mon_main</a> (int verbose_level=9, int journal_master=0, int journal_shared=0, bool apply_verification=true, int disable_stop=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#a6a95809188c22c231e854529b7d8c2d8">init_parallel</a> (const int argc, char **argv, int with_mpi, int check_enabled=0, int with_petsc=1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#a48bfa6a7b6495c20c812f549b76ff4ba">finalize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#a4f9df706fe29c9a9bc8086d5b5032216">dowork</a> (const <a class="el" href="classNom.html">Nom</a> &amp;nom_du_cas)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#a19ea6860755cc7a371aeb54d6305963f">~mon_main</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#a5181561aa64197f449b7e877e5912eef">verbose_level_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#a2939ad5e0b81bbc30650b930d11b083d">journal_master_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#ac31b1f5fa2e3614301d4c0fa21b075cd">journal_shared_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#aee2cf8a408d0e3c69ed2462470796e42">trio_began_mpi_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#a567d84d10337c0eb4c5c611285aa86fd">apply_verification_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#a418f58071cc63d5d104a527992a7b48b">disable_stop_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDeriv__Comm__Group.html">Deriv_Comm_Group</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">groupe_trio_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classInterprete__bloc.html">Interprete_bloc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmon__main.html#af3a53401b07a93552cd207ef483337d2">interprete_principal_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Classe creee et executee par <a class="el" href="the__main_8cpp.html#a251dcb4a3ce2025a48f928402336edce">main()</a> et lors d'une execution TRUST a<br/>
travers Python. Il faut<br/>
- creer une instance <a class="el" href="classmon__main.html" title="Classe creee et executee par main() et lors d&#39;une execution TRUST a travers Python. Il faut - creer une instance mon_main - initialiser le parallele - appeler dowork(nom_du_cas) (lecture et interpretation du jdd) A cet instant on peut jouer avec les objets crees en python (voir Interprete_bloc::objet_global(nom)) - detruire l&#39;instance mon_main L&#39;interprete principal conserve ses objets jusqu&#39;a la destruction de l&#39;instance mon_main.">mon_main</a><br/>
- initialiser le parallele<br/>
- appeler dowork(nom_du_cas) (lecture et interpretation du jdd)<br/>
A cet instant on peut jouer avec les objets crees en python<br/>
(voir Interprete_bloc::objet_global(nom))<br/>
- detruire l'instance <a class="el" href="classmon__main.html" title="Classe creee et executee par main() et lors d&#39;une execution TRUST a travers Python. Il faut - creer une instance mon_main - initialiser le parallele - appeler dowork(nom_du_cas) (lecture et interpretation du jdd) A cet instant on peut jouer avec les objets crees en python (voir Interprete_bloc::objet_global(nom)) - detruire l&#39;instance mon_main L&#39;interprete principal conserve ses objets jusqu&#39;a la destruction de l&#39;instance mon_main.">mon_main</a><br/>
L'interprete principal conserve ses objets jusqu'a la destruction<br/>
de l'instance <a class="el" href="classmon__main.html" title="Classe creee et executee par main() et lors d&#39;une execution TRUST a travers Python. Il faut - creer une instance mon_main - initialiser le parallele - appeler dowork(nom_du_cas) (lecture et interpretation du jdd) A cet instant on peut jouer avec les objets crees en python (voir Interprete_bloc::objet_global(nom)) - detruire l&#39;instance mon_main L&#39;interprete principal conserve ses objets jusqu&#39;a la destruction de l&#39;instance mon_main.">mon_main</a>. </p>

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00046">46</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aff89924d7e6788118ff989dc36ac06d0"></a><!-- doxytag: member="mon_main::mon_main" ref="aff89924d7e6788118ff989dc36ac06d0" args="(int verbose_level=9, int journal_master=0, int journal_shared=0, bool apply_verification=true, int disable_stop=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mon_main::mon_main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verbose_level</em> = <code>9</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>journal_master</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>journal_shared</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>apply_verification</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>disable_stop</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8cpp_source.html#l00045">45</a> of file <a class="el" href="mon__main_8cpp_source.html">mon_main.cpp</a>.</p>

<p>References <a class="el" href="mon__main_8h_source.html#l00060">apply_verification_</a>, <a class="el" href="Process_8cpp_source.html#l00543">change_disable_stop()</a>, <a class="el" href="mon__main_8h_source.html#l00061">disable_stop_</a>, <a class="el" href="Process_8cpp_source.html#l00405">init_journal_file()</a>, <a class="el" href="mon__main_8h_source.html#l00057">journal_master_</a>, <a class="el" href="mon__main_8h_source.html#l00058">journal_shared_</a>, <a class="el" href="mon__main_8h_source.html#l00059">trio_began_mpi_</a>, and <a class="el" href="mon__main_8h_source.html#l00056">verbose_level_</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classmon__main.html#a5181561aa64197f449b7e877e5912eef">verbose_level_</a> = verbose_level;
  <a class="code" href="classmon__main.html#a2939ad5e0b81bbc30650b930d11b083d">journal_master_</a> = journal_master;
  <a class="code" href="classmon__main.html#ac31b1f5fa2e3614301d4c0fa21b075cd">journal_shared_</a> = journal_shared;
  <a class="code" href="classmon__main.html#a567d84d10337c0eb4c5c611285aa86fd">apply_verification_</a> = apply_verification;
<span class="comment">// Creation d&#39;un journal temporaire qui ecrit dans Cerr</span>
  <a class="code" href="Journal_8h.html#aafb399e72f0705ffe23becf8da63ed69" title="Initialisation du journal Parametre: verbose_level Signification: les messages de niveau &lt;= verbose_le...">init_journal_file</a>(verbose_level, 0, 0 <span class="comment">/* filename = 0 =&gt; Cerr */</span>, 0 <span class="comment">/* append */</span>);
  <a class="code" href="classmon__main.html#aee2cf8a408d0e3c69ed2462470796e42">trio_began_mpi_</a>=0;
  <a class="code" href="classmon__main.html#a418f58071cc63d5d104a527992a7b48b">disable_stop_</a>=disable_stop;
  <a class="code" href="Process_8cpp.html#aa796bea8b7b2907564c6e84ab2720a56" title="Affects a new value to disable_stop_ flag (Disable or not the writing of the .stop file)...">change_disable_stop</a>(disable_stop);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a19ea6860755cc7a371aeb54d6305963f"></a><!-- doxytag: member="mon_main::~mon_main" ref="a19ea6860755cc7a371aeb54d6305963f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mon_main::~mon_main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8cpp_source.html#l00426">426</a> of file <a class="el" href="mon__main_8cpp_source.html">mon_main.cpp</a>.</p>

<p>References <a class="el" href="Deriv___8cpp_source.html#l00077">Deriv_::detach()</a>, <a class="el" href="Process_8cpp_source.html#l00444">end_journal()</a>, <a class="el" href="stat__counters_8cpp_source.html#l00188">end_stat_counters()</a>, <a class="el" href="mon__main_8cpp_source.html#l00241">finalize()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="mon__main_8h_source.html#l00062">groupe_trio_</a>, <a class="el" href="mon__main_8h_source.html#l00063">interprete_principal_</a>, <a class="el" href="Process_8cpp_source.html#l00345">Process::Journal()</a>, <a class="el" href="mon__main_8h_source.html#l00056">verbose_level_</a>, and <a class="el" href="liste_8cpp_source.html#l00223">liste::vide()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// On peut arreter le journal apres les communications:</span>
<span class="comment">// EDIT 12/02/2020: journal needs communication to be turned on if it&#39;s written in HDF5 format</span>
  <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Process::Journal</a>() &lt;&lt; <span class="stringliteral">&quot;End of Journal logging&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
  <a class="code" href="Journal_8h.html#a4c8cf6e825a1a83f36e5f67741ebe342">end_journal</a>(<a class="code" href="classmon__main.html#a5181561aa64197f449b7e877e5912eef">verbose_level_</a>);
  <a class="code" href="stat__counters_8cpp.html#a3adefe369eee13fb00171a86b31b84ff">end_stat_counters</a>();
<span class="comment">// Destruction de l&#39;interprete principal avant d&#39;arreter le parallele</span>
  <a class="code" href="classmon__main.html#af3a53401b07a93552cd207ef483337d2">interprete_principal_</a>.<a class="code" href="classliste.html#a6cf18c012f5c03fd88aafac2d263883e" title="Vide la liste.">vide</a>();
<span class="comment">// PetscFinalize/MPI_Finalize</span>
  <a class="code" href="classmon__main.html#a48bfa6a7b6495c20c812f549b76ff4ba">finalize</a>();
<span class="comment">// on peut arreter maintenant que l&#39;on a arrete les journaux</span>
  <a class="code" href="classmon__main.html#a48bfa6a7b6495c20c812f549b76ff4ba">PE_Groups::finalize</a>();
  <a class="code" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">groupe_trio_</a>.<a class="code" href="classDeriv__.html#a1792f7b005c558e7412661aeee781bd2">detach</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4f9df706fe29c9a9bc8086d5b5032216"></a><!-- doxytag: member="mon_main::dowork" ref="a4f9df706fe29c9a9bc8086d5b5032216" args="(const Nom &amp;nom_du_cas)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mon_main::dowork </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNom.html">Nom</a> &amp;&#160;</td>
          <td class="paramname"><em>nom_du_cas</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>&lt; Into _comm.TU file </p>
</p>

<p>Definition at line <a class="el" href="mon__main_8cpp_source.html#l00278">278</a> of file <a class="el" href="mon__main_8cpp_source.html">mon_main.cpp</a>.</p>

<p>References <a class="el" href="mon__main_8h_source.html#l00060">apply_verification_</a>, <a class="el" href="Statistiques_8h_source.html#l00219">Statistiques::begin_count()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="EntreeSortie_8h_source.html#l00033">Cout</a>, <a class="el" href="stat__counters_8cpp_source.html#l00094">declare_stat_counters()</a>, <a class="el" href="Objet__U_8h_source.html#l00115">Objet_U::disable_TU</a>, <a class="el" href="Statistiques_8cpp_source.html#l00631">Statistiques::dump()</a>, <a class="el" href="communications_8cpp_source.html#l00200">envoyer()</a>, <a class="el" href="Interprete__bloc_8h_source.html#l00043">Interprete_bloc::FIN</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Process_8cpp_source.html#l00072">Process::force_single_file()</a>, <a class="el" href="Statistiques_8h_source.html#l00035">GET_COMM_DETAILS</a>, <a class="el" href="Process_8cpp_source.html#l00536">get_disable_stop()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00319">Objet_U::get_set_nom_du_cas()</a>, <a class="el" href="Statistiques_8h_source.html#l00095">Statistiques::get_total_time()</a>, <a class="el" href="Process_8cpp_source.html#l00374">Process::imprimer_ram_totale()</a>, <a class="el" href="info__atelier_8cpp_source.html#l00025">info_atelier()</a>, <a class="el" href="Process_8cpp_source.html#l00405">init_journal_file()</a>, <a class="el" href="mon__main_8h_source.html#l00063">interprete_principal_</a>, <a class="el" href="Interprete__bloc_8cpp_source.html#l00077">Interprete_bloc::interpreter_bloc()</a>, <a class="el" href="Process_8cpp_source.html#l00095">Process::je_suis_maitre()</a>, <a class="el" href="Process_8cpp_source.html#l00345">Process::Journal()</a>, <a class="el" href="mon__main_8h_source.html#l00057">journal_master_</a>, <a class="el" href="mon__main_8h_source.html#l00058">journal_shared_</a>, <a class="el" href="Statistiques_8cpp_source.html#l00077">les_statistiques_trio_U_nom_long_pour_decourager_l_utilisation_directe</a>, <a class="el" href="Process_8cpp_source.html#l00117">Process::me()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00310">Objet_U::nom_du_cas()</a>, <a class="el" href="Process_8cpp_source.html#l00109">Process::nproc()</a>, <a class="el" href="Statistiques_8cpp_source.html#l01088">Statistiques::print_communciation_tracking_details()</a>, <a class="el" href="stat__counters_8cpp_source.html#l00242">print_statistics_analyse()</a>, <a class="el" href="communications_8cpp_source.html#l00246">recevoir()</a>, <a class="el" href="Lec__Diffuse__base_8cpp_source.html#l00327">Lec_Diffuse_base::set_check_types()</a>, <a class="el" href="Statistiques_8h_source.html#l00190">statistiques()</a>, and <a class="el" href="mon__main_8h_source.html#l00056">verbose_level_</a>.</p>

<p>Referenced by <a class="el" href="MAIN_8cpp_source.html#l00069">main_TRUST()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// Initialisation des compteurs pour les statistiques</span>
<span class="comment">// avant tout appel a envoyer, recevoir, ...</span>
  <span class="keywordflow">if</span> (!<a class="code" href="Statistiques_8cpp.html#a512a2b3ab1289af1ee1131d49e7a0d4b">les_statistiques_trio_U_nom_long_pour_decourager_l_utilisation_directe</a>)
    {
      <a class="code" href="stat__counters_8cpp.html#a8ff095bf8d9a9961935a7c2d8531cd48" title="&lt; chdir pour PGI et AIX">declare_stat_counters</a>();
    }
  <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#a2cd262d038049f900ea193c706c476c3">temps_total_execution_counter_</a>);
<span class="comment">// Ce compteur est arrete dans Resoudre*</span>
  <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#a54292d516b078553c900dac14d31d813">initialisation_calcul_counter_</a>);

<span class="comment">// Le processeur maitre envoie le nom du cas a tous les processeurs</span>
<span class="comment">// car avec une distribution MPICH 1.2.7 (Debian)</span>
<span class="comment">// la ligne de commande recuperee avec argv ne contient</span>
<span class="comment">// pas le nom du jeu de donnees pour les processeurs autres</span>
<span class="comment">// que le processeur maitre</span>
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp = nom_du_cas;
  <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(tmp, 0, -1, 0);
  <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(tmp, 0, -1, 0);
  <a class="code" href="classObjet__U.html#ac52fbf7227e3d087c7c79caae6643409" title="Renvoie une reference non constante vers le nom du cas&lt;br&gt;(pour pouvoir le modifier). Cette methode est statique.">Objet_U::get_set_nom_du_cas</a>() = tmp;

<span class="comment">// ******************* Journal ***************************</span>
<span class="comment">// Initialisation du journal parallele (maintenant qu&#39;on connait le rang</span>
<span class="comment">// du processeur et le nom du cas)</span>
  {
    <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> filename(nom_du_cas);
    <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>() &gt; 1 &amp;&amp; !<a class="code" href="classmon__main.html#ac31b1f5fa2e3614301d4c0fa21b075cd">journal_shared_</a>)
      {
        filename += <span class="stringliteral">&quot;_&quot;</span>;
        <span class="keywordtype">char</span> s[20];
        sprintf(s, <span class="stringliteral">&quot;%05d&quot;</span>, (<a class="code" href="arch_8h.html#a1caaf369d9c5f0817dbaa76b43b8d87b">True_int</a>)<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
        filename += s;
      }
    filename += <span class="stringliteral">&quot;.log&quot;</span>;
<span class="comment">// Si journal_master_, seul le process maitre ecrit dans le journal:</span>
    <span class="keywordflow">if</span> (<a class="code" href="classmon__main.html#a2939ad5e0b81bbc30650b930d11b083d">journal_master_</a> &amp;&amp; !<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
      <a class="code" href="classmon__main.html#a5181561aa64197f449b7e877e5912eef">verbose_level_</a> = 0;

<span class="comment">// Si un journal unique n&#39;est pas active, alors desactive les journaux logs au dela d&#39;un certain nombre de rangs MPI:</span>
    <span class="keywordflow">if</span> (!<a class="code" href="classmon__main.html#ac31b1f5fa2e3614301d4c0fa21b075cd">journal_shared_</a> &amp;&amp; !<a class="code" href="classmon__main.html#a2939ad5e0b81bbc30650b930d11b083d">journal_master_</a> &amp;&amp; <a class="code" href="classProcess.html#a0028ba29b8998170a85d2e0c00293b78">Process::force_single_file</a>(<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(), nom_du_cas+<span class="stringliteral">&quot;.log&quot;</span>))
      <a class="code" href="classmon__main.html#a5181561aa64197f449b7e877e5912eef">verbose_level_</a> = 0;

    <a class="code" href="Journal_8h.html#aafb399e72f0705ffe23becf8da63ed69" title="Initialisation du journal Parametre: verbose_level Signification: les messages de niveau &lt;= verbose_le...">init_journal_file</a>(<a class="code" href="classmon__main.html#a5181561aa64197f449b7e877e5912eef">verbose_level_</a>, <a class="code" href="classmon__main.html#ac31b1f5fa2e3614301d4c0fa21b075cd">journal_shared_</a>,filename, 0 <span class="comment">/* append=0 */</span>);
    <span class="keywordflow">if</span>(<a class="code" href="classmon__main.html#ac31b1f5fa2e3614301d4c0fa21b075cd">journal_shared_</a>) <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Process::Journal</a>() &lt;&lt; <span class="stringliteral">&quot;\n[Proc &quot;</span> &lt;&lt; <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>() &lt;&lt; <span class="stringliteral">&quot;] : &quot;</span>;
    <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Process::Journal</a>() &lt;&lt; <span class="stringliteral">&quot;Journal logging started&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
  }

  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nomfic( nom_du_cas );
  nomfic += <span class="stringliteral">&quot;.stop&quot;</span>;
  <span class="keywordflow">if</span> (!<a class="code" href="Process_8cpp.html#a793f0cea0b470888001917e7bc49d680" title="Returns the disable_stop_ flag (Disable or not the writing of the .stop file)">get_disable_stop</a>() &amp;&amp; <a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
    {
      <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> ficstop( nomfic );
      ficstop &lt;&lt; <span class="stringliteral">&quot;Running...&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
    }

<span class="comment">// ---------------------------------------------//</span>
<span class="comment">// Chargement des modules : //</span>
<span class="comment">// on ne les charges que pour le cas nul, pour verifier avec valgrind</span>
  <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>()==<span class="stringliteral">&quot;nul&quot;</span>)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Chargement des modules:&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<span class="preprocessor">#include &lt;<a class="code" href="instancie__appel__c_8h.html">instancie_appel_c.h</a>&gt;</span>
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Fin chargement des modules &quot;</span>&lt;&lt;finl;
    }

  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; * * * * * * * * * * * * * * * * * * * * * * * * * * * *     &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *  _________  _______             _______  _________  *     &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *  \\__   __/ (  ____ ) |\\     /| (  ____ \\ \\__   __/  * &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *     ) (    | (    )| | )   ( | | (    \\/    ) (     *    &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *     | |    | (____)| | |   | | | (_____     | |     *     &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *     | |    |     __) | |   | | (_____  )    | |     *     &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *     | |    | (\\ (    | |   | |       ) |    | |     *    &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *     | |    | ) \\ \\__ | (___) | /\\____) |    | |     *  &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *     )_(    |/   \\__/ (_______) \\_______)    )_(     *   &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *                                                     *     &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *                  version : 1.8.4               *     &quot;</span>  &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *                       CEA - DES                     *     &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; *                                                     *     &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; * * * * * * * * * * * * * * * * * * * * * * * * * * * * &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;

  <a class="code" href="info__atelier_8cpp.html#a3d9be51d1dcc4ba16ccd646c1ddb7467" title="donne le nombre et le nom des fichiers modifies">info_atelier</a>(<a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>);
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt;<span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt;<span class="stringliteral">&quot;  Vous traitez le cas &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt;<span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;

<span class="comment">// GF on ecrit la hierarchie que si on a un erreur</span>
<span class="comment">// ---------------------------------------------//</span>
  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Debut de l&#39;execution &quot;</span> &lt;&lt; finl;
  {
    <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nomentree = nom_du_cas;
    nomentree+=<span class="stringliteral">&quot;.data&quot;</span>;
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
      {
        <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> es(<span class="stringliteral">&quot;convert_jdd&quot;</span>);
      }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="comment">// La verfication est faite maintenant dans LecFicDiffuse_JDD</span>
<span class="comment">// mias je garde les lignes au cas ou</span>
    <span class="keywordflow">if</span> (0)
      {
        <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;MAIN: Checking data file for matching { and }&quot;</span> &lt;&lt; finl;
        {
          <a class="code" href="classLecFicDiffuse__JDD.html" title="Cette classe implemente les operateurs et les methodes virtuelles de la classe EFichier de la facon s...">LecFicDiffuse_JDD</a> verifie_entree(nomentree, ios::in, <a class="code" href="classmon__main.html#a567d84d10337c0eb4c5c611285aa86fd">apply_verification_</a>);
          <a class="code" href="classmon__main.html#af3a53401b07a93552cd207ef483337d2">interprete_principal_</a>.<a class="code" href="classInterprete__bloc.html#a30e3dd349fa1745d8024cdd7399a014e" title="Interpretation d&#39;un bloc d&#39;instructions prises dans l&#39;entree is. Si le bloc commence par {...">interpreter_bloc</a>(verifie_entree,
                                                 <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997a01c17b193a2b086f608a633bd4927eb4">Interprete_bloc::FIN</a> <span class="comment">/* on attend FIN a la fin */</span>,
                                                 1 <span class="comment">/* verifie_sans_interpreter */</span>);
        }
      }
    <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;MAIN: Reading and executing data file&quot;</span> &lt;&lt; finl;
    {
      <a class="code" href="classLecFicDiffuse__JDD.html" title="Cette classe implemente les operateurs et les methodes virtuelles de la classe EFichier de la facon s...">LecFicDiffuse_JDD</a> lit_entree(nomentree, ios::in, <a class="code" href="classmon__main.html#a567d84d10337c0eb4c5c611285aa86fd">apply_verification_</a>);
      lit_entree.set_check_types(1);
      <a class="code" href="classmon__main.html#af3a53401b07a93552cd207ef483337d2">interprete_principal_</a>.<a class="code" href="classInterprete__bloc.html#a30e3dd349fa1745d8024cdd7399a014e" title="Interpretation d&#39;un bloc d&#39;instructions prises dans l&#39;entree is. Si le bloc commence par {...">interpreter_bloc</a>(lit_entree,
                                             <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997a01c17b193a2b086f608a633bd4927eb4">Interprete_bloc::FIN</a> <span class="comment">/* on attend FIN a la fin */</span>,
                                             0 <span class="comment">/* interprete pour de vrai */</span>);
    }
  }

  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;MAIN: End of data file&quot;</span> &lt;&lt; finl;
  <a class="code" href="classProcess.html#aa1142e848c81a78c28a061a6f45b4042">Process::imprimer_ram_totale</a>(1);

<span class="comment">// pour les cas ou on ne fait pas de resolution</span>
  <span class="keywordtype">int</span> mode_append=1;
  <span class="keywordflow">if</span> (!<a class="code" href="classObjet__U.html#a622f9039952e1be36aee2ac0c48955fc" title="Flag to disable the writing of the .TU files.">Objet_U::disable_TU</a>)
    {
      <span class="keywordflow">if</span>(<a class="code" href="Statistiques_8h.html#a7f6c434cd21697d3bafbdc2433f06c37">GET_COMM_DETAILS</a>)
        <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a54c730ed76d3e1ce710392295369acaa">print_communciation_tracking_details</a>(<span class="stringliteral">&quot;Statistiques de post resolution&quot;</span>, 1);               <span class="comment">//!&lt; Into _comm.TU file</span>
<span class="comment"></span>
      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a53b4c3f5e2690ed40586dc62e086c5a8">dump</a>(<span class="stringliteral">&quot;Statistiques de post resolution&quot;</span>, mode_append);
      <a class="code" href="stat__counters_8cpp.html#a15c34a54aac7b9ec82c9107f5c1c24fa">print_statistics_analyse</a>(<span class="stringliteral">&quot;Statistiques de post resolution&quot;</span>, 1);
    }

  <span class="keywordtype">double</span> temps = <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a80ee370e419ba628a5248030ca889935">get_total_time</a>();
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;--------------------------------------------&quot;</span> &lt;&lt; finl;
  <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;clock: Total execution: &quot;</span> &lt;&lt; temps &lt;&lt; <span class="stringliteral">&quot; s&quot;</span> &lt;&lt; finl;
  <span class="keywordflow">if</span> (!<a class="code" href="Process_8cpp.html#a793f0cea0b470888001917e7bc49d680" title="Returns the disable_stop_ flag (Disable or not the writing of the .stop file)">get_disable_stop</a>() &amp;&amp; <a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
    {
      <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> ficstop ( nomfic);
      ficstop  &lt;&lt; <span class="stringliteral">&quot;Finished correctly&quot;</span>&lt;&lt;finl;
    }
<span class="comment">// end_stat_counters();</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48bfa6a7b6495c20c812f549b76ff4ba"></a><!-- doxytag: member="mon_main::finalize" ref="a48bfa6a7b6495c20c812f549b76ff4ba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mon_main::finalize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8cpp_source.html#l00241">241</a> of file <a class="el" href="mon__main_8cpp_source.html">mon_main.cpp</a>.</p>

<p>References <a class="el" href="PE__Groups_8h_source.html#l00054">PE_Groups::current_group()</a>, <a class="el" href="mon__main_8h_source.html#l00062">groupe_trio_</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, <a class="el" href="mon__main_8h_source.html#l00059">trio_began_mpi_</a>, and <a class="el" href="Deriv__Comm__Group_8h_source.html#l00026">Deriv_Comm_Group::valeur()</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00426">~mon_main()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef MPI_</span>
<span class="preprocessor"></span><span class="comment">// MPI_Group_free before MPI_Finalize</span>
  <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classComm__Group__MPI.html" title=": Classe Comm_Group_MPI, derivee de la classe abstraite Comm_Group. Cette classe represente un groupe...">Comm_Group_MPI</a>,<a class="code" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">groupe_trio_</a>.<a class="code" href="classDeriv__Comm__Group.html#a5e72ace93b65cd47119ade73f8ee91dc">valeur</a>()))
    <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classComm__Group__MPI.html" title=": Classe Comm_Group_MPI, derivee de la classe abstraite Comm_Group. Cette classe represente un groupe...">Comm_Group_MPI</a>,<a class="code" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">groupe_trio_</a>.<a class="code" href="classDeriv__Comm__Group.html#a5e72ace93b65cd47119ade73f8ee91dc">valeur</a>()).free();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="preprocessor">#ifdef PETSCKSP_H</span>
<span class="preprocessor"></span><span class="comment">// On PetscFinalize que si c&#39;est necessaire</span>
  PetscBool isInitialized;
  PetscInitialized(&amp;isInitialized);
  <span class="keywordflow">if</span> (isInitialized==PETSC_TRUE)
    {
      PetscPopErrorHandler(); <span class="comment">//!&lt; Removes the latest error handler that was pushed with PetscPushErrorHandler in init_petsc</span>
<span class="comment"></span><span class="preprocessor">#ifdef MPI_</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classComm__Group__MPI.html" title=": Classe Comm_Group_MPI, derivee de la classe abstraite Comm_Group. Cette classe represente un groupe...">Comm_Group_MPI</a>,<a class="code" href="classPE__Groups.html#ae6ca0277a58f2ab34ebfb3216578fa75" title="renvoie une reference au groupe de processeurs actif courant">PE_Groups::current_group</a>()))
        PETSC_COMM_WORLD = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classComm__Group__MPI.html" title=": Classe Comm_Group_MPI, derivee de la classe abstraite Comm_Group. Cette classe represente un groupe...">Comm_Group_MPI</a>,<a class="code" href="classPE__Groups.html#ae6ca0277a58f2ab34ebfb3216578fa75" title="renvoie une reference au groupe de processeurs actif courant">PE_Groups::current_group</a>()).get_mpi_comm();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>      PetscFinalize();
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="preprocessor">#ifdef MPI_</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classmon__main.html#aee2cf8a408d0e3c69ed2462470796e42">trio_began_mpi_</a>)
    {
<span class="comment">// On MPI_Finalize si MPI_Initialized and not MPI_Finalized</span>
      <a class="code" href="arch_8h.html#a1caaf369d9c5f0817dbaa76b43b8d87b">True_int</a> flag;
      MPI_Initialized(&amp;flag);
      <span class="keywordflow">if</span> (flag)
        {
          MPI_Finalized(&amp;flag);
          <span class="keywordflow">if</span> (!flag)
            MPI_Finalize();
        }
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a95809188c22c231e854529b7d8c2d8"></a><!-- doxytag: member="mon_main::init_parallel" ref="a6a95809188c22c231e854529b7d8c2d8" args="(const int argc, char **argv, int with_mpi, int check_enabled=0, int with_petsc=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mon_main::init_parallel </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>with_mpi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>check_enabled</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>with_petsc</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>&lt; Deja fait par Petsc </p>
</p>

<p>Definition at line <a class="el" href="mon__main_8cpp_source.html#l00178">178</a> of file <a class="el" href="mon__main_8cpp_source.html">mon_main.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="mon__main_8h_source.html#l00062">groupe_trio_</a>, <a class="el" href="mon__main_8cpp_source.html#l00123">init_parallel_mpi()</a>, <a class="el" href="mon__main_8cpp_source.html#l00058">init_petsc()</a>, <a class="el" href="PE__Groups_8cpp_source.html#l00168">PE_Groups::initialize()</a>, <a class="el" href="Process_8cpp_source.html#l00095">Process::je_suis_maitre()</a>, <a class="el" href="Process_8cpp_source.html#l00109">Process::nproc()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="Comm__Group_8cpp_source.html#l00160">Comm_Group::set_check_enabled()</a>, <a class="el" href="Comm__Group__MPI_8cpp_source.html#l00592">Comm_Group_MPI::set_must_mpi_initialize()</a>, <a class="el" href="mon__main_8h_source.html#l00059">trio_began_mpi_</a>, <a class="el" href="Deriv___8cpp_source.html#l00091">Deriv_::typer()</a>, and <a class="el" href="Deriv__Comm__Group_8h_source.html#l00026">Deriv_Comm_Group::valeur()</a>.</p>

<p>Referenced by <a class="el" href="MAIN_8cpp_source.html#l00069">main_TRUST()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#ifdef PETSC_HAVE_CUDA</span>
<span class="preprocessor"></span><span class="comment">// Necessaire sur JeanZay pour utiliser GPU Direct (http://www.idris.fr/jean-zay/gpu/jean-zay-gpu-mpi-cuda-aware-gpudirect.html)</span>
<span class="comment">// mais performances moins bonnes (trust PAR_gpu_3D 2) donc desactive en attendant d&#39;autres tests:</span>
<span class="comment">// Absolument necessaire sur JeanZay (si OpenMPU-Cuda car sinon plantages lors des IO)</span>
<span class="comment">// Voir: https://www.open-mpi.org/faq/?category=runcuda#mpi-cuda-aware-support pour activer ou non a la compilation !</span>
<span class="preprocessor">#if defined(MPIX_CUDA_AWARE_SUPPORT) &amp;&amp; MPIX_CUDA_AWARE_SUPPORT</span>
<span class="preprocessor"></span>  init_cuda();
<span class="preprocessor">#endif </span><span class="comment">/* MPIX_CUDA_AWARE_SUPPORT */</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> arguments_info=<span class="stringliteral">&quot;&quot;</span>;
  <span class="keywordtype">int</span> must_mpi_initialize = 1;
  <span class="keywordflow">if</span> (with_petsc != 0)
    {
      <span class="keywordflow">if</span> (<a class="code" href="mon__main_8cpp.html#ada50721819169cb89b63a69496ca91da">init_petsc</a>(argc, argv, with_mpi,<a class="code" href="classmon__main.html#aee2cf8a408d0e3c69ed2462470796e42">trio_began_mpi_</a>))
        {
          must_mpi_initialize = 0; <span class="comment">//!&lt; Deja fait par Petsc</span>
<span class="comment"></span>          arguments_info += <span class="stringliteral">&quot;Petsc initialization succeeded.\n&quot;</span>;
        }
      <span class="keywordflow">else</span>
        {
          arguments_info += <span class="stringliteral">&quot;Petsc initialization failed (not compiled ?). Not fatal...\n&quot;</span>;
        }
    }
  <span class="keywordflow">else</span>
    {
      arguments_info += <span class="stringliteral">&quot;Petsc initialization skipped (-petsc=0).\n&quot;</span>;
    }
<span class="preprocessor">#ifdef MPI_</span>
<span class="preprocessor"></span>  <a class="code" href="classComm__Group__MPI.html#ad10415ea6dbdbfa7603622362d78016a">Comm_Group_MPI::set_must_mpi_initialize</a>(must_mpi_initialize);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span><span class="comment">// GF pour eviter warning</span>
  <span class="keywordflow">if</span> (must_mpi_initialize&gt;10) abort();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="comment">// ***************** Initialisation du parallele *************************</span>
  <a class="code" href="classComm__Group.html#a427088d5f9f00310c9bcc35c12ecc9fe">Comm_Group::set_check_enabled</a>(check_enabled);

  <span class="keywordflow">if</span> (with_mpi)
    {
      <span class="keywordflow">if</span> (!<a class="code" href="mon__main_8cpp.html#ab0854aa324f32bf87ca786647f994d5e">init_parallel_mpi</a>(<a class="code" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">groupe_trio_</a>))
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;MPI initialization failed (not compiled ?). Fatal.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">groupe_trio_</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;Comm_Group_NoParallel&quot;</span>);
    }

<span class="comment">// Initialisation des groupes de communication.</span>
  <a class="code" href="classPE__Groups.html#a96163527a12b74c0caf330ac7349d634" title="Methode a appeler au debut de l&#39;execution (MAIN.cpp) Elle initialise current_group() avec groupe_trio...">PE_Groups::initialize</a>(<a class="code" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">groupe_trio_</a>);
  arguments_info += <span class="stringliteral">&quot;Parallel engine initialized : &quot;</span>;
  arguments_info += <a class="code" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">groupe_trio_</a>.<a class="code" href="classDeriv__Comm__Group.html#a5e72ace93b65cd47119ade73f8ee91dc">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
  arguments_info += <span class="stringliteral">&quot; with &quot;</span>;
  arguments_info += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>());
  arguments_info += <span class="stringliteral">&quot; processors\n&quot;</span>;

  <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
    <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; arguments_info;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a567d84d10337c0eb4c5c611285aa86fd"></a><!-- doxytag: member="mon_main::apply_verification_" ref="a567d84d10337c0eb4c5c611285aa86fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmon__main.html#a567d84d10337c0eb4c5c611285aa86fd">mon_main::apply_verification_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00060">60</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00278">dowork()</a>, and <a class="el" href="mon__main_8cpp_source.html#l00045">mon_main()</a>.</p>

</div>
</div>
<a class="anchor" id="a418f58071cc63d5d104a527992a7b48b"></a><!-- doxytag: member="mon_main::disable_stop_" ref="a418f58071cc63d5d104a527992a7b48b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmon__main.html#a418f58071cc63d5d104a527992a7b48b">mon_main::disable_stop_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00061">61</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00045">mon_main()</a>.</p>

</div>
</div>
<a class="anchor" id="adfb0a91251071acc0d6c77036f1d7404"></a><!-- doxytag: member="mon_main::groupe_trio_" ref="adfb0a91251071acc0d6c77036f1d7404" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDeriv__Comm__Group.html">Deriv_Comm_Group</a> <a class="el" href="classmon__main.html#adfb0a91251071acc0d6c77036f1d7404">mon_main::groupe_trio_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00062">62</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00241">finalize()</a>, <a class="el" href="mon__main_8cpp_source.html#l00178">init_parallel()</a>, and <a class="el" href="mon__main_8cpp_source.html#l00426">~mon_main()</a>.</p>

</div>
</div>
<a class="anchor" id="af3a53401b07a93552cd207ef483337d2"></a><!-- doxytag: member="mon_main::interprete_principal_" ref="af3a53401b07a93552cd207ef483337d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classInterprete__bloc.html">Interprete_bloc</a> <a class="el" href="classmon__main.html#af3a53401b07a93552cd207ef483337d2">mon_main::interprete_principal_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00063">63</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00278">dowork()</a>, and <a class="el" href="mon__main_8cpp_source.html#l00426">~mon_main()</a>.</p>

</div>
</div>
<a class="anchor" id="a2939ad5e0b81bbc30650b930d11b083d"></a><!-- doxytag: member="mon_main::journal_master_" ref="a2939ad5e0b81bbc30650b930d11b083d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmon__main.html#a2939ad5e0b81bbc30650b930d11b083d">mon_main::journal_master_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00057">57</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00278">dowork()</a>, and <a class="el" href="mon__main_8cpp_source.html#l00045">mon_main()</a>.</p>

</div>
</div>
<a class="anchor" id="ac31b1f5fa2e3614301d4c0fa21b075cd"></a><!-- doxytag: member="mon_main::journal_shared_" ref="ac31b1f5fa2e3614301d4c0fa21b075cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmon__main.html#ac31b1f5fa2e3614301d4c0fa21b075cd">mon_main::journal_shared_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00058">58</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00278">dowork()</a>, and <a class="el" href="mon__main_8cpp_source.html#l00045">mon_main()</a>.</p>

</div>
</div>
<a class="anchor" id="aee2cf8a408d0e3c69ed2462470796e42"></a><!-- doxytag: member="mon_main::trio_began_mpi_" ref="aee2cf8a408d0e3c69ed2462470796e42" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmon__main.html#aee2cf8a408d0e3c69ed2462470796e42">mon_main::trio_began_mpi_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00059">59</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00241">finalize()</a>, <a class="el" href="mon__main_8cpp_source.html#l00178">init_parallel()</a>, and <a class="el" href="mon__main_8cpp_source.html#l00045">mon_main()</a>.</p>

</div>
</div>
<a class="anchor" id="a5181561aa64197f449b7e877e5912eef"></a><!-- doxytag: member="mon_main::verbose_level_" ref="a5181561aa64197f449b7e877e5912eef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classmon__main.html#a5181561aa64197f449b7e877e5912eef">mon_main::verbose_level_</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mon__main_8h_source.html#l00056">56</a> of file <a class="el" href="mon__main_8h_source.html">mon_main.h</a>.</p>

<p>Referenced by <a class="el" href="mon__main_8cpp_source.html#l00278">dowork()</a>, <a class="el" href="mon__main_8cpp_source.html#l00045">mon_main()</a>, and <a class="el" href="mon__main_8cpp_source.html#l00426">~mon_main()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/MAIN/<a class="el" href="mon__main_8h_source.html">mon_main.h</a></li>
<li>src/MAIN/<a class="el" href="mon__main_8cpp_source.html">mon_main.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:37:05 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
