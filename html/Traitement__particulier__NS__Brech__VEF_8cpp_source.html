<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/VEF/Traitement_particulier_NS_Brech_VEF.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/VEF/Traitement_particulier_NS_Brech_VEF.cpp</div>  </div>
</div>
<div class="contents">
<a href="Traitement__particulier__NS__Brech__VEF_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Traitement_particulier_NS_Brech_VEF.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/VEF</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/29</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Traitement__particulier__NS__Brech__VEF_8h.html">Traitement_particulier_NS_Brech_VEF.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Navier__Stokes__std_8h.html">Navier_Stokes_std.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Fluide__Incompressible_8h.html">Fluide_Incompressible.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTrav_8h.html">DoubleTrav.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Periodique_8h.html">Periodique.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Champ__P1NC_8h.html">Champ_P1NC.h</a>&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="Traitement__particulier__NS__Brech__VEF_8cpp.html#a363805ca3d0d1f972c19a76025fd1918">00031</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html" title="classe Traitement_particulier_Brech_VEF Cette classe permet de faire les traitements particuliers pou...">Traitement_particulier_NS_Brech_VEF</a>,<span class="stringliteral">&quot;Traitement_particulier_NS_Brech_VEF&quot;</span>,<a class="code" href="classTraitement__particulier__NS__VEF.html" title="classe Traitement_particulier_VEF Cette classe permet de ne faire aucyun traitement particulier (comm...">Traitement_particulier_NS_VEF</a>);
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a4b9cae4e2efaa53b8360baf120099043">00033</a> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a4b9cae4e2efaa53b8360baf120099043">Traitement_particulier_NS_Brech_VEF::Traitement_particulier_NS_Brech_VEF</a>()
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035   <span class="comment">/*</span>
<a name="l00036"></a>00036 <span class="comment">    Noms&amp; nom=champs_compris_.liste_noms_compris();</span>
<a name="l00037"></a>00037 <span class="comment">    nom.dimensionner(2);</span>
<a name="l00038"></a>00038 <span class="comment">    nom[0]=&quot;Pression_porosite&quot;;</span>
<a name="l00039"></a>00039 <span class="comment">    nom[1]=&quot;Richardson&quot;;</span>
<a name="l00040"></a>00040 <span class="comment">  */</span>
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 <span class="comment">// Precondition:</span>
<a name="l00043"></a>00043 <span class="comment">// Parametre: Sortie&amp; is</span>
<a name="l00044"></a>00044 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00045"></a>00045 <span class="comment">// Valeurs par defaut:</span>
<a name="l00046"></a>00046 <span class="comment">// Contraintes:</span>
<a name="l00047"></a>00047 <span class="comment">// Acces: entree/sortie</span>
<a name="l00048"></a>00048 <span class="comment">// Exception:</span>
<a name="l00049"></a>00049 <span class="comment">// Effets de bord:</span>
<a name="l00050"></a>00050 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00051"></a>00051 <span class="comment">//</span>
<a name="l00052"></a>00052 <span class="comment">//</span><span class="comment"></span>
<a name="l00053"></a>00053 <span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00054"></a>00054 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00055"></a>00055 <span class="comment">Contraintes: */</span>
<a name="l00056"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a3edbbca8c6e32d2e99cc84970f59ed19">00056</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a3edbbca8c6e32d2e99cc84970f59ed19">Traitement_particulier_NS_Brech_VEF::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; is)<span class="keyword"> const</span>
<a name="l00057"></a>00057 <span class="keyword"></span>{
<a name="l00058"></a>00058   <span class="keywordflow">return</span> is;
<a name="l00059"></a>00059 }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="comment">// Precondition:</span>
<a name="l00063"></a>00063 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00064"></a>00064 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00065"></a>00065 <span class="comment">// Valeurs par defaut:</span>
<a name="l00066"></a>00066 <span class="comment">// Contraintes:</span>
<a name="l00067"></a>00067 <span class="comment">// Acces: entree/sortie</span>
<a name="l00068"></a>00068 <span class="comment">// Exception:</span>
<a name="l00069"></a>00069 <span class="comment">// Effets de bord:</span>
<a name="l00070"></a>00070 <span class="comment">// Postcondition:</span>
<a name="l00071"></a>00071 <span class="comment">//</span>
<a name="l00072"></a>00072 <span class="comment">//</span><span class="comment"></span>
<a name="l00073"></a>00073 <span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00074"></a>00074 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00075"></a>00075 <span class="comment">Contraintes: */</span>
<a name="l00076"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a64865b168d99dec77d80f7f7308c5534">00076</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a64865b168d99dec77d80f7f7308c5534">Traitement_particulier_NS_Brech_VEF::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078   <span class="keywordflow">return</span> is;
<a name="l00079"></a>00079 }
<a name="l00080"></a>00080 <span class="comment">/*</span>
<a name="l00081"></a>00081 <span class="comment">  inline int Traitement_particulier_NS_Brech_VEF::comprend_champ(const Motcle&amp; mot) const</span>
<a name="l00082"></a>00082 <span class="comment">  {</span>
<a name="l00083"></a>00083 <span class="comment">  if ( (mot == &quot;Richardson&quot;) || (mot == &quot;Pression_porosite&quot;) ) return 1 ;</span>
<a name="l00084"></a>00084 <span class="comment">  return 0 ;</span>
<a name="l00085"></a>00085 <span class="comment">  }</span>
<a name="l00086"></a>00086 <span class="comment"></span>
<a name="l00087"></a>00087 <span class="comment">  int Traitement_particulier_NS_Brech_VEF::a_pour_Champ_Fonc(const Motcle&amp; mot,</span>
<a name="l00088"></a>00088 <span class="comment">  REF(Champ_base)&amp; ch_ref) const</span>
<a name="l00089"></a>00089 <span class="comment">  {</span>
<a name="l00090"></a>00090 <span class="comment">  if (mot == &quot;Richardson&quot;)</span>
<a name="l00091"></a>00091 <span class="comment">  {</span>
<a name="l00092"></a>00092 <span class="comment">  ch_ref = ch_ri;</span>
<a name="l00093"></a>00093 <span class="comment">  return 1 ;</span>
<a name="l00094"></a>00094 <span class="comment">  } else if (mot == &quot;Pression_porosite&quot;)</span>
<a name="l00095"></a>00095 <span class="comment">  {</span>
<a name="l00096"></a>00096 <span class="comment">  ch_ref = ch_p;</span>
<a name="l00097"></a>00097 <span class="comment">  return 1 ;</span>
<a name="l00098"></a>00098 <span class="comment">  }</span>
<a name="l00099"></a>00099 <span class="comment">  return 0 ;</span>
<a name="l00100"></a>00100 <span class="comment">  }</span>
<a name="l00101"></a>00101 <span class="comment">*/</span>
<a name="l00102"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a239deb68dd3459cafad179efed3a20f9">00102</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a239deb68dd3459cafad179efed3a20f9">Traitement_particulier_NS_Brech_VEF::lire</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00103"></a>00103 {
<a name="l00104"></a>00104   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> accouverte = <span class="stringliteral">&quot;{&quot;</span> , accfermee = <span class="stringliteral">&quot;}&quot;</span> ;
<a name="l00105"></a>00105   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motbidon, motlu;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107   <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a8840f89376fb4246f649f7d3947b880f">c_flux</a> = 0 ;
<a name="l00108"></a>00108   <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a94ddac5710dd94525141ff74b6fd9350">c_Richardson</a> = 0 ;
<a name="l00109"></a>00109   <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a4a2216a9c45fa74d98c844c93dd8d941">c_pression</a> = 0 ;
<a name="l00110"></a>00110 
<a name="l00111"></a>00111   is &gt;&gt; motbidon ;
<a name="l00112"></a>00112 
<a name="l00113"></a>00113   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_mots(3);
<a name="l00114"></a>00114   {
<a name="l00115"></a>00115     les_mots[0] = <span class="stringliteral">&quot;calcul_flux&quot;</span>;
<a name="l00116"></a>00116     les_mots[1] = <span class="stringliteral">&quot;Richardson&quot;</span>;
<a name="l00117"></a>00117     les_mots[2] = <span class="stringliteral">&quot;Pression_porosite&quot;</span>;
<a name="l00118"></a>00118   }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 
<a name="l00121"></a>00121   <span class="keywordflow">if</span> (motbidon == accouverte)
<a name="l00122"></a>00122     {
<a name="l00123"></a>00123 <span class="comment">// is &gt;&gt; motlu;</span>
<a name="l00124"></a>00124 
<a name="l00125"></a>00125       <span class="keywordflow">while</span>(motlu != accfermee)
<a name="l00126"></a>00126         {
<a name="l00127"></a>00127           is &gt;&gt; motlu;
<a name="l00128"></a>00128           <span class="keywordtype">int</span> rang=les_mots.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(motlu);
<a name="l00129"></a>00129           <span class="keywordflow">switch</span>(rang)
<a name="l00130"></a>00130             {
<a name="l00131"></a>00131             <span class="keywordflow">case</span> 0 :
<a name="l00132"></a>00132               {
<a name="l00133"></a>00133                 is &gt;&gt; motbidon ;
<a name="l00134"></a>00134                 <span class="keywordflow">if</span> (motbidon != accouverte)
<a name="l00135"></a>00135                   {
<a name="l00136"></a>00136                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; on attent { et pas &quot;</span> &lt;&lt; motbidon &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00137"></a>00137                   }
<a name="l00138"></a>00138 
<a name="l00139"></a>00139                 is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#afabec8a708b4cfb32fd8316374bc6154">nb</a> ;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb,3) ;
<a name="l00142"></a>00142                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb,3) ;
<a name="l00143"></a>00143                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a67035403c7cdc18131a51fe74e699666">r_int</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb) ;
<a name="l00144"></a>00144                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aa3a7fe1b2ce5a5584d7ac4994e106c7c">r_out</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb) ;
<a name="l00145"></a>00145                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a93ff5a651bfe7f744c355eac20051a4d">delta_r</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb) ;
<a name="l00146"></a>00146                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#ac73387d3dab7089844ab52796ff9f9a0">delta_teta</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb);
<a name="l00147"></a>00147 
<a name="l00148"></a>00148                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#afabec8a708b4cfb32fd8316374bc6154">nb</a>; i++)
<a name="l00149"></a>00149                   {
<a name="l00150"></a>00150 
<a name="l00151"></a>00151                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Lire plan de coupe en x &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(i,0) ;
<a name="l00154"></a>00154 
<a name="l00155"></a>00155                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(i,1) ;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(i,2) ;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(i,0) ;
<a name="l00160"></a>00160 
<a name="l00161"></a>00161                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(i,1) ;
<a name="l00162"></a>00162 
<a name="l00163"></a>00163                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(i,2) ;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a67035403c7cdc18131a51fe74e699666">r_int</a>(i);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aa3a7fe1b2ce5a5584d7ac4994e106c7c">r_out</a>(i);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a93ff5a651bfe7f744c355eac20051a4d">delta_r</a>(i);
<a name="l00170"></a>00170 
<a name="l00171"></a>00171                     is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#ac73387d3dab7089844ab52796ff9f9a0">delta_teta</a>(i) ;
<a name="l00172"></a>00172                   }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a8840f89376fb4246f649f7d3947b880f">c_flux</a> = 1 ;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176                 is &gt;&gt; motbidon ;
<a name="l00177"></a>00177                 <span class="keywordflow">if</span> (motbidon != accfermee)
<a name="l00178"></a>00178                   {
<a name="l00179"></a>00179                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; on attent } et pas &quot;</span> &lt;&lt; motbidon &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00180"></a>00180                   }
<a name="l00181"></a>00181                 break ;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183               }
<a name="l00184"></a>00184             <span class="keywordflow">case</span> 1 :
<a name="l00185"></a>00185               {
<a name="l00186"></a>00186                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Lire Richardson &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00187"></a>00187                 <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdis=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00188"></a>00188                 <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zone_VEF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, zdis);
<a name="l00189"></a>00189 <span class="comment">// const Probleme_base&amp; pb = mon_equation-&gt;probleme();</span>
<a name="l00190"></a>00190                 <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces = zone_VEF.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>() ;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aeec58980c18e72f98f0d86a3f407cb71">ch_ri</a>.<a class="code" href="classChamp__Fonc__P1NC.html#a9863cdcf07d68515115d33d4b776afcd">associer_zone_dis_base</a>(zdis);
<a name="l00193"></a>00193                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aeec58980c18e72f98f0d86a3f407cb71">ch_ri</a>.<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(<span class="stringliteral">&quot;Richardson&quot;</span>);
<a name="l00194"></a>00194                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aeec58980c18e72f98f0d86a3f407cb71">ch_ri</a>.<a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(1);
<a name="l00195"></a>00195                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aeec58980c18e72f98f0d86a3f407cb71">ch_ri</a>.<a class="code" href="classChamp__Fonc__P1NC.html#a67dd9a12043c34fc30e6370b97f0f024" title="Fixe le nombre de degres de liberte par composante.">fixer_nb_valeurs_nodales</a>(nb_faces);
<a name="l00196"></a>00196                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aeec58980c18e72f98f0d86a3f407cb71">ch_ri</a>.<a class="code" href="classField__base.html#a5bcb91a2475ee68412475efc3d9902f1" title="Specifie l&#39;unite d&#39;un champ scalaire ou dont toutes les composantes ont la meme unite.">fixer_unite</a>(<span class="stringliteral">&quot;-&quot;</span>);
<a name="l00197"></a>00197                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a94ddac5710dd94525141ff74b6fd9350">c_Richardson</a> = 1 ;
<a name="l00198"></a>00198                 <a class="code" href="classTraitement__particulier__NS__base.html#a90cd542ce0876aaa00b32d413abea077">champs_compris_</a>.<a class="code" href="classChamps__compris.html#aae00ca562b7d89ff638fae94d6973fcf">ajoute_champ</a>(<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aeec58980c18e72f98f0d86a3f407cb71">ch_ri</a>);
<a name="l00199"></a>00199                 break ;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201               }
<a name="l00202"></a>00202             <span class="keywordflow">case</span> 2 :
<a name="l00203"></a>00203               {
<a name="l00204"></a>00204                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Lire Pression_porosite &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00205"></a>00205                 <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdis=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00206"></a>00206                 <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zone_VEF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, zdis);
<a name="l00207"></a>00207 <span class="comment">// const Probleme_base&amp; pb = mon_equation-&gt;probleme();</span>
<a name="l00208"></a>00208                 <span class="keyword">const</span> <span class="keywordtype">int</span> nb_elem = zone_VEF.<a class="code" href="classZone__dis__base.html#a790cb2f6bc2928518799e748313d0eb3">nb_elem</a>() ;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a6ac98456e7799ba46f75aa4001be3436">ch_p</a>.<a class="code" href="classChamp__Fonc__P1NC.html#a9863cdcf07d68515115d33d4b776afcd">associer_zone_dis_base</a>(zdis);
<a name="l00211"></a>00211                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a6ac98456e7799ba46f75aa4001be3436">ch_p</a>.<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(<span class="stringliteral">&quot;Pression_porosite&quot;</span>);
<a name="l00212"></a>00212                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a6ac98456e7799ba46f75aa4001be3436">ch_p</a>.<a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(1);
<a name="l00213"></a>00213                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a6ac98456e7799ba46f75aa4001be3436">ch_p</a>.<a class="code" href="classChamp__Fonc__P1NC.html#a67dd9a12043c34fc30e6370b97f0f024" title="Fixe le nombre de degres de liberte par composante.">fixer_nb_valeurs_nodales</a>(nb_elem);
<a name="l00214"></a>00214                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a6ac98456e7799ba46f75aa4001be3436">ch_p</a>.<a class="code" href="classField__base.html#a5bcb91a2475ee68412475efc3d9902f1" title="Specifie l&#39;unite d&#39;un champ scalaire ou dont toutes les composantes ont la meme unite.">fixer_unite</a>(<span class="stringliteral">&quot;Pa.m3/kg&quot;</span>);
<a name="l00215"></a>00215                 <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a4a2216a9c45fa74d98c844c93dd8d941">c_pression</a> = 1 ;
<a name="l00216"></a>00216                 <a class="code" href="classTraitement__particulier__NS__base.html#a90cd542ce0876aaa00b32d413abea077">champs_compris_</a>.<a class="code" href="classChamps__compris.html#aae00ca562b7d89ff638fae94d6973fcf">ajoute_champ</a>(<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a6ac98456e7799ba46f75aa4001be3436">ch_p</a>);
<a name="l00217"></a>00217                 break ;
<a name="l00218"></a>00218               }
<a name="l00219"></a>00219             <span class="keywordflow">default</span> :
<a name="l00220"></a>00220               {
<a name="l00221"></a>00221                 <span class="keywordflow">if</span> (motlu == accfermee)
<a name="l00222"></a>00222                   {
<a name="l00223"></a>00223                     break ;
<a name="l00224"></a>00224                   }
<a name="l00225"></a>00225                 <span class="keywordflow">else</span>
<a name="l00226"></a>00226                   {
<a name="l00227"></a>00227                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Erreur dans la lecture de Traitement_particulier_Brech_VEF&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00228"></a>00228                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Les mots cles possibles sont : calcul_flux ou Richardson &quot;</span> &lt;&lt; finl;
<a name="l00229"></a>00229                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Vous avez lu :&quot;</span> &lt;&lt; motlu &lt;&lt; finl;
<a name="l00230"></a>00230                     <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00231"></a>00231                     <span class="keywordflow">break</span>;
<a name="l00232"></a>00232                   }
<a name="l00233"></a>00233               }
<a name="l00234"></a>00234             }
<a name="l00235"></a>00235         }
<a name="l00236"></a>00236       is &gt;&gt; motlu;
<a name="l00237"></a>00237       <span class="keywordflow">if</span> (motlu != accfermee)
<a name="l00238"></a>00238         {
<a name="l00239"></a>00239           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Erreur dans la lecture de Traitement_particulier_NS_Brech_VEF 1 &quot;</span>;
<a name="l00240"></a>00240           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait une } et pas &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00241"></a>00241           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00242"></a>00242         }
<a name="l00243"></a>00243 <span class="comment">// is &gt;&gt; motlu;</span>
<a name="l00244"></a>00244 <span class="comment">// if (motlu != accfermee)</span>
<a name="l00245"></a>00245 <span class="comment">// {</span>
<a name="l00246"></a>00246 <span class="comment">// Cerr &lt;&lt; &quot;Erreur dans la lecture de Traitement_particulier_NS_Brech_VEF 2 &quot;;</span>
<a name="l00247"></a>00247 <span class="comment">// Cerr &lt;&lt; &quot;On attendait une } et pas &quot; &lt;&lt; motlu &lt;&lt; finl;</span>
<a name="l00248"></a>00248 <span class="comment">// exit();</span>
<a name="l00249"></a>00249 <span class="comment">// }</span>
<a name="l00250"></a>00250 <span class="comment">// is &gt;&gt; motlu;</span>
<a name="l00251"></a>00251 <span class="comment">// if (motlu != accfermee)</span>
<a name="l00252"></a>00252 <span class="comment">// {</span>
<a name="l00253"></a>00253 <span class="comment">// Cerr &lt;&lt; &quot;Erreur dans la lecture de Traitement_particulier_NS_Brech_VEF 3 &quot;;</span>
<a name="l00254"></a>00254 <span class="comment">// Cerr &lt;&lt; &quot;On attendait une } et pas &quot; &lt;&lt; motlu &lt;&lt; finl;</span>
<a name="l00255"></a>00255 <span class="comment">// exit();</span>
<a name="l00256"></a>00256 <span class="comment">// }</span>
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259   <span class="keywordflow">return</span> is;
<a name="l00260"></a>00260 }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 
<a name="l00263"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a9339c853513a71f83546282ba58844a2">00263</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a9339c853513a71f83546282ba58844a2">Traitement_particulier_NS_Brech_VEF::post_traitement_particulier</a>()
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265 
<a name="l00266"></a>00266   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a8840f89376fb4246f649f7d3947b880f">c_flux</a> == 1 ) <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aca2466cfe129e753e477a01d999df6c6">post_traitement_particulier_calcul_flux</a>() ;
<a name="l00267"></a>00267   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a94ddac5710dd94525141ff74b6fd9350">c_Richardson</a> == 1 ) <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a2413a0eb939a67215693860e08c4af1a">post_traitement_particulier_Richardson</a>() ;
<a name="l00268"></a>00268   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a4a2216a9c45fa74d98c844c93dd8d941">c_pression</a> == 1 ) <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a2b7399dd9c64a33a9c79af1941c08973">post_traitement_particulier_calcul_pression</a>() ;
<a name="l00269"></a>00269 }
<a name="l00270"></a>00270 
<a name="l00271"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aca2466cfe129e753e477a01d999df6c6">00271</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aca2466cfe129e753e477a01d999df6c6">Traitement_particulier_NS_Brech_VEF::post_traitement_particulier_calcul_flux</a>()
<a name="l00272"></a>00272 {
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii =0; ii&lt;<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#afabec8a708b4cfb32fd8316374bc6154">nb</a>; ii++)
<a name="l00275"></a>00275     {
<a name="l00276"></a>00276       <span class="keywordtype">int</span> taille = 1 ;
<a name="l00277"></a>00277       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> coord_trace (taille,3) ;
<a name="l00278"></a>00278       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> Surf_trace(taille,3) ;
<a name="l00279"></a>00279       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> valeurs_(taille,3) ;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 <span class="comment">// Modifs VB pour prise en compte rho et calcul du flux enthalpique + Tmoy</span>
<a name="l00282"></a>00282       <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) rch1 ;
<a name="l00283"></a>00283       <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>) l_inco ;
<a name="l00284"></a>00284       <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;probleme();
<a name="l00285"></a>00285       <span class="comment">/*</span>
<a name="l00286"></a>00286 <span class="comment">        pb.a_pour_Champ_Inc(&quot;Temperature&quot;, rch1 ) ;</span>
<a name="l00287"></a>00287 <span class="comment">        l_inco = ref_cast(Champ_Inc_base, rch1.valeur()) ;</span>
<a name="l00288"></a>00288 <span class="comment">        const Champ_Inc_base&amp; temp = l_inco.valeur();</span>
<a name="l00289"></a>00289 <span class="comment">      */</span>
<a name="l00290"></a>00290       rch1 = pb.<a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">get_champ</a>(<span class="stringliteral">&quot;Temperature&quot;</span>);
<a name="l00291"></a>00291       l_inco = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, rch1.valeur()) ;
<a name="l00292"></a>00292       <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; temp = l_inco.valeur();
<a name="l00293"></a>00293 
<a name="l00294"></a>00294       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> temper_(taille);
<a name="l00295"></a>00295       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> rho_(taille) ;
<a name="l00296"></a>00296       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> cp_(taille) ;
<a name="l00297"></a>00297 <span class="comment">// Fin Modifs VB</span>
<a name="l00298"></a>00298 <span class="comment">// </span>
<a name="l00299"></a>00299       <span class="keywordtype">double</span> rad, teta ;
<a name="l00300"></a>00300       <span class="keywordtype">double</span> dr    = ( <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aa3a7fe1b2ce5a5584d7ac4994e106c7c">r_out</a>(ii) - <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a67035403c7cdc18131a51fe74e699666">r_int</a>(ii) ) /<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a93ff5a651bfe7f744c355eac20051a4d">delta_r</a>(ii) ;
<a name="l00301"></a>00301       <span class="keywordtype">double</span> dteta = 2.*3.14159/<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#ac73387d3dab7089844ab52796ff9f9a0">delta_teta</a>(ii) ;
<a name="l00302"></a>00302 
<a name="l00303"></a>00303       taille = (int)(<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a93ff5a651bfe7f744c355eac20051a4d">delta_r</a>(ii)) * (<span class="keywordtype">int</span>)(<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#ac73387d3dab7089844ab52796ff9f9a0">delta_teta</a>(ii)) ;
<a name="l00304"></a>00304       coord_trace.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(taille,3) ;
<a name="l00305"></a>00305       Surf_trace.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(taille,3) ;
<a name="l00306"></a>00306       valeurs_.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(taille,3);
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="comment">// Modifs VB pour prise en compte rho et calcul du flux enthalpique + Tmoy</span>
<a name="l00309"></a>00309       rho_.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(taille) ;
<a name="l00310"></a>00310       temper_.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(taille);
<a name="l00311"></a>00311       cp_.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(taille);
<a name="l00312"></a>00312 <span class="comment">// Fin Modifs VB</span>
<a name="l00313"></a>00313 
<a name="l00314"></a>00314       <span class="keywordtype">double</span> a,b,c ;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="comment">// Modifs VB pour calculer le flux sur une face inclinee</span>
<a name="l00317"></a>00317 <span class="comment">// anglex est l&#39;angle que fait la normale a la face par rapport a l&#39;axe des x (angle aigu)</span>
<a name="l00318"></a>00318       <span class="keywordtype">double</span> anglex = acos(<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(ii,0)/sqrt( <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(ii,0) * <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(ii,0)
<a name="l00319"></a>00319                                                + <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(ii,1) * <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(ii,1)
<a name="l00320"></a>00320                                                + <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(ii,2) * <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#acfb2463a93668a4f36bb12b5ec837a83">C_trans</a>(ii,2) )) ;
<a name="l00321"></a>00321 <span class="comment">// Fin Modifs VB</span>
<a name="l00322"></a>00322 
<a name="l00323"></a>00323       <span class="keywordtype">int</span> i =-1 ;
<a name="l00324"></a>00324 
<a name="l00325"></a>00325       <span class="keywordflow">for</span> ( rad = (<a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a67035403c7cdc18131a51fe74e699666">r_int</a>(ii)+(dr/2.)) ; rad &lt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aa3a7fe1b2ce5a5584d7ac4994e106c7c">r_out</a>(ii) ; rad += dr )
<a name="l00326"></a>00326         <span class="keywordflow">for</span> (teta = dteta/2. ; teta &lt; 2.*3.14159 ; teta += dteta )
<a name="l00327"></a>00327           {
<a name="l00328"></a>00328             i++ ;
<a name="l00329"></a>00329 <span class="comment">// Modifs VB pour calculer le flux sur une face inclinee</span>
<a name="l00330"></a>00330 <span class="comment">// a = 0. ;</span>
<a name="l00331"></a>00331 <span class="comment">// b = rad * cos(teta) ;</span>
<a name="l00332"></a>00332             a = - rad * cos(teta) * sin(anglex) ;
<a name="l00333"></a>00333             b =   rad * cos(teta) * cos(anglex) ;
<a name="l00334"></a>00334 <span class="comment">// Fin Modifs VB</span>
<a name="l00335"></a>00335             c = rad * sin(teta) ;
<a name="l00336"></a>00336             coord_trace(i,0) = a + <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(ii,0) ;
<a name="l00337"></a>00337             coord_trace(i,1) = b + <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(ii,1) ;
<a name="l00338"></a>00338             coord_trace(i,2) = c + <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(ii,2) ;
<a name="l00339"></a>00339             <span class="keywordtype">double</span> ra = (dr/2.+rad) * (dr/2.+rad) ;
<a name="l00340"></a>00340             <span class="keywordtype">double</span> ri = (rad - (dr/2.))* (rad - (dr/2.)) ;
<a name="l00341"></a>00341             Surf_trace(i,0) = 3.14159 * (ra -ri) / <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#ac73387d3dab7089844ab52796ff9f9a0">delta_teta</a>(ii) ;
<a name="l00342"></a>00342           }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344       <span class="keywordtype">double</span> flux_pos = 0. ;
<a name="l00345"></a>00345       <span class="keywordtype">double</span> flux_neg = 0. ;
<a name="l00346"></a>00346       <span class="keywordtype">double</span> flux ;
<a name="l00347"></a>00347 <span class="comment">// Modifs VB pour prise en compte rho et calcul du flux enthalpique + Tmoy</span>
<a name="l00348"></a>00348       <span class="keywordtype">double</span> tempmoy = 0. ;
<a name="l00349"></a>00349       <span class="keywordtype">double</span> massvol = 0. ;
<a name="l00350"></a>00350       <span class="keywordtype">double</span> fluxE_pos = 0. ;
<a name="l00351"></a>00351       <span class="keywordtype">double</span> fluxE_neg = 0. ;
<a name="l00352"></a>00352       <span class="keywordtype">double</span> fluxE ;
<a name="l00353"></a>00353 <span class="comment">// fin modifs VB</span>
<a name="l00354"></a>00354 
<a name="l00355"></a>00355       <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdis=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00356"></a>00356       <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=zdis.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>();
<a name="l00357"></a>00357       <a class="code" href="classIntVect.html">IntVect</a> les_polys(coord_trace.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0));
<a name="l00358"></a>00358       zone.<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(coord_trace, les_polys);
<a name="l00359"></a>00359       <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue()-&gt;valeur_aux_elems(coord_trace, les_polys, valeurs_);
<a name="l00360"></a>00360 
<a name="l00361"></a>00361 <span class="comment">// Modifs VB pour prise en compte rho et calcul du flux enthalpique + Tmoy</span>
<a name="l00362"></a>00362       <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;fluide().masse_volumique().valeur_aux_elems(coord_trace, les_polys, rho_);
<a name="l00363"></a>00363       <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;fluide().capacite_calorifique()-&gt;valeur_aux_elems(coord_trace, les_polys, cp_);
<a name="l00364"></a>00364       temp.valeur_aux_elems(coord_trace, les_polys, temper_);
<a name="l00365"></a>00365 <span class="comment">// Fin Modifs VB</span>
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 <span class="comment">// On annulle la partie virtuelle</span>
<a name="l00368"></a>00368       <span class="keywordflow">for</span> (i=0 ; i&lt;taille; i++)
<a name="l00369"></a>00369         <span class="keywordflow">if</span> (les_polys(i)&gt;=zone.<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>())
<a name="l00370"></a>00370           {
<a name="l00371"></a>00371             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; k++)
<a name="l00372"></a>00372               valeurs_(i,k)=0;
<a name="l00373"></a>00373 <span class="comment">// Modifs VB pour prise en compte rho et calcul du flux enthalpique + Tmoy</span>
<a name="l00374"></a>00374             rho_(i)=0.;
<a name="l00375"></a>00375             temper_(i)=0.;
<a name="l00376"></a>00376             cp_(i)=0.;
<a name="l00377"></a>00377           }
<a name="l00378"></a>00378 <span class="comment">// Fin Modifs VB</span>
<a name="l00379"></a>00379 
<a name="l00380"></a>00380       <span class="keywordflow">for</span> (i=0 ; i&lt;taille; i++ )
<a name="l00381"></a>00381         {
<a name="l00382"></a>00382 <span class="comment">// Modifs VB pour prise en compte rho et calcul du flux enthalpique + Tmoy</span>
<a name="l00383"></a>00383 <span class="comment">// flux = valeurs_(i,0)*Surf_trace(i,0) ;</span>
<a name="l00384"></a>00384           massvol += rho_(i) ;
<a name="l00385"></a>00385           tempmoy += temper_(i) ;
<a name="l00386"></a>00386           flux  = ( valeurs_(i,0)*cos(anglex) + valeurs_(i,1)*sin(anglex) )
<a name="l00387"></a>00387                   *   Surf_trace(i,0)*rho_(i) ;
<a name="l00388"></a>00388           fluxE = ( valeurs_(i,0)*cos(anglex) + valeurs_(i,1)*sin(anglex) )
<a name="l00389"></a>00389                   *   Surf_trace(i,0)*rho_(i)*cp_(i)*temper_(i) ;
<a name="l00390"></a>00390           flux=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">Process::mp_sum</a>(flux);
<a name="l00391"></a>00391           fluxE=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">Process::mp_sum</a>(fluxE);
<a name="l00392"></a>00392           <span class="keywordflow">if</span> ( flux &gt; 0. ) flux_pos += flux ;
<a name="l00393"></a>00393           <span class="keywordflow">if</span> ( flux &lt; 0. ) flux_neg += flux ;
<a name="l00394"></a>00394           <span class="keywordflow">if</span> ( fluxE &gt; 0. ) fluxE_pos += fluxE ;
<a name="l00395"></a>00395           <span class="keywordflow">if</span> ( fluxE &lt; 0. ) fluxE_neg += fluxE ;
<a name="l00396"></a>00396         }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398       tempmoy=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">Process::mp_sum</a>(tempmoy);
<a name="l00399"></a>00399       massvol=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">Process::mp_sum</a>(massvol);
<a name="l00400"></a>00400       tempmoy /= taille ;
<a name="l00401"></a>00401       massvol /= taille ;
<a name="l00402"></a>00402 
<a name="l00403"></a>00403       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00404"></a>00404         {
<a name="l00405"></a>00405           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00406"></a>00406           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; ----------------------- &quot;</span> &lt;&lt; finl ;
<a name="l00407"></a>00407           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; Traitement_particulier flux en x (Plan Oyz) a: &quot;</span>&lt;&lt;  <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(ii,0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>
<a name="l00408"></a>00408                &lt;&lt;  <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(ii,1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>
<a name="l00409"></a>00409                &lt;&lt;  <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a50ac7c0315af1e6b8d9764f9bf9f292e">R_loc</a>(ii,2) &lt;&lt; finl ;
<a name="l00410"></a>00410           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; angle de la normale du plan par rapport a x = &quot;</span> &lt;&lt; anglex/3.1415*180. &lt;&lt; <span class="stringliteral">&quot; (deg) &quot;</span> &lt;&lt; finl ;
<a name="l00411"></a>00411           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; flux_pos = &quot;</span> &lt;&lt; flux_pos &lt;&lt; <span class="stringliteral">&quot; flux_neg = &quot;</span> &lt;&lt; flux_neg &lt;&lt; <span class="stringliteral">&quot; (kg/s) &quot;</span> &lt;&lt; finl ;
<a name="l00412"></a>00412           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; fluxEnthalpique_pos = &quot;</span> &lt;&lt; fluxE_pos &lt;&lt; <span class="stringliteral">&quot; fluxEnthalpique_neg = &quot;</span> &lt;&lt; fluxE_neg &lt;&lt; <span class="stringliteral">&quot; (Watts) &quot;</span> &lt;&lt; finl ;
<a name="l00413"></a>00413           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; masse volumique moyenne sur le plan de coupe : &quot;</span> &lt;&lt; massvol &lt;&lt; finl ;
<a name="l00414"></a>00414           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot; temperature moyenne     sur le plan de coupe : &quot;</span> &lt;&lt; tempmoy &lt;&lt; finl ;
<a name="l00415"></a>00415         }
<a name="l00416"></a>00416 <span class="comment">// Fin Modifs VB</span>
<a name="l00417"></a>00417     }
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a2413a0eb939a67215693860e08c4af1a">00420</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a2413a0eb939a67215693860e08c4af1a">Traitement_particulier_NS_Brech_VEF::post_traitement_particulier_Richardson</a>()
<a name="l00421"></a>00421 {
<a name="l00422"></a>00422   <span class="keyword">const</span> <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; zdis=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;zone_dis();
<a name="l00423"></a>00423   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zone_VEF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, zdis.<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>());
<a name="l00424"></a>00424   <span class="keyword">const</span> <a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>&amp; zone_Cl_VEF = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>,<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;zone_Cl_dis().<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>() );
<a name="l00425"></a>00425 
<a name="l00426"></a>00426   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) rch1 ;
<a name="l00427"></a>00427   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>) l_inco ;
<a name="l00428"></a>00428 
<a name="l00429"></a>00429   <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;probleme();
<a name="l00430"></a>00430   <span class="comment">/*</span>
<a name="l00431"></a>00431 <span class="comment">    pb.a_pour_Champ_Inc(&quot;Temperature&quot;, rch1 ) ;</span>
<a name="l00432"></a>00432 <span class="comment"></span>
<a name="l00433"></a>00433 <span class="comment">    l_inco = ref_cast(Champ_Inc_base, rch1.valeur()) ;</span>
<a name="l00434"></a>00434 <span class="comment">  */</span>
<a name="l00435"></a>00435   rch1 = pb.<a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">get_champ</a>(<span class="stringliteral">&quot;Temperature&quot;</span>);
<a name="l00436"></a>00436   l_inco = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, rch1.valeur()) ;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438   <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; temp = l_inco.valeur();
<a name="l00439"></a>00439   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; temperature = temp.valeurs();
<a name="l00440"></a>00440 
<a name="l00441"></a>00441   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;  vitesse = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().valeurs();
<a name="l00442"></a>00442   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; gravite = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;fluide().gravite().valeurs();
<a name="l00443"></a>00443   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; beta     = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;fluide().beta_t().valeurs();
<a name="l00444"></a>00444 
<a name="l00445"></a>00445   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces = zone_VEF.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
<a name="l00446"></a>00446 
<a name="l00447"></a>00447   <a class="code" href="classDoubleVect.html">DoubleVect</a> P(nb_faces) ;
<a name="l00448"></a>00448   <a class="code" href="classDoubleVect.html">DoubleVect</a> G(nb_faces) ;
<a name="l00449"></a>00449 
<a name="l00450"></a>00450   <a class="code" href="classDoubleVect.html">DoubleVect</a> beta_i(nb_faces) ;
<a name="l00451"></a>00451   beta_i = beta(0) ;
<a name="l00452"></a>00452 
<a name="l00453"></a>00453   <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a3890afa7544de972e773b3ecaf4fba8e">calculer_terme_production_K</a>( zone_VEF, zone_Cl_VEF,
<a name="l00454"></a>00454                                P, vitesse);
<a name="l00455"></a>00455 
<a name="l00456"></a>00456   <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a282a22d914306f2b6aa2b14fb28a0487">calculer_terme_destruction_K</a>( zone_VEF, zone_Cl_VEF,
<a name="l00457"></a>00457                                 G, temperature,
<a name="l00458"></a>00458                                 beta_i, gravite) ;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460   <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp;  richard_loc = <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aeec58980c18e72f98f0d86a3f407cb71">ch_ri</a>.<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>();
<a name="l00461"></a>00461   richard_loc = 0. ;
<a name="l00462"></a>00462 
<a name="l00463"></a>00463   <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0; i&lt;nb_faces; i++ )
<a name="l00464"></a>00464     {
<a name="l00465"></a>00465       <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a> (P[i]) &gt; 1.e-9 )richard_loc [i] = -G[i]/P[i] ;
<a name="l00466"></a>00466       <span class="keywordflow">else</span> richard_loc [i] = 0. ;
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469   <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#aeec58980c18e72f98f0d86a3f407cb71">ch_ri</a>.<a class="code" href="classChamp__base.html#ab4fdc6fb46c5e4efe2f931ceadd66979" title="Fixe le temps auquel se situe le champ.">changer_temps</a>(<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps());
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 }
<a name="l00472"></a>00472 
<a name="l00473"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a2b7399dd9c64a33a9c79af1941c08973">00473</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a2b7399dd9c64a33a9c79af1941c08973">Traitement_particulier_NS_Brech_VEF::post_traitement_particulier_calcul_pression</a>()
<a name="l00474"></a>00474 {
<a name="l00475"></a>00475   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zvef=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;zone_dis().<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>());
<a name="l00476"></a>00476   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; porosite_face = zvef.<a class="code" href="classZone__VF.html#ad9d74d1d9da9f50ab26768dbbca7711b">porosite_face</a>();
<a name="l00477"></a>00477   <span class="keywordtype">int</span> i,comp;
<a name="l00478"></a>00478   <span class="keywordtype">int</span> nb_face = zvef.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
<a name="l00479"></a>00479 <span class="comment">// Champ_Inc la_pression = mon_equation-&gt;pression();</span>
<a name="l00480"></a>00480 <span class="comment">// Champ_Inc la_vitesse =  mon_equation-&gt;vitesse();</span>
<a name="l00481"></a>00481   <a class="code" href="classOperateur__Div.html" title="classe Operateur_Div Classe generique de la hierarchie des operateurs calculant la divergence d&#39;un ch...">Operateur_Div</a> divergence = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;operateur_divergence();
<a name="l00482"></a>00482   <a class="code" href="classOperateur__Grad.html" title="Classe Operateur_Grad Classe generique de la hierarchie des operateurs calculant le gradient d&#39;un cha...">Operateur_Grad</a> gradient = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;operateur_gradient();
<a name="l00483"></a>00483   <a class="code" href="classSolveurSys.html">SolveurSys</a> solveur_pression_ = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;solveur_pression();
<a name="l00484"></a>00484 
<a name="l00485"></a>00485   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; pression=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;pression().valeurs();
<a name="l00486"></a>00486   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vitesse=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;vitesse().valeurs();
<a name="l00487"></a>00487 <span class="comment">// DoubleTrav gradP(la_vitesse.valeurs());</span>
<a name="l00488"></a>00488 <span class="comment">// DoubleTrav gradP(vitesse);</span>
<a name="l00489"></a>00489 <span class="comment">// DoubleTrav inc_pre(pression);</span>
<a name="l00490"></a>00490   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> gradP(vitesse);
<a name="l00491"></a>00491   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> inc_pre(pression);
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 <span class="comment">// DoubleVect&amp; inc_pre = ch_p.valeurs();</span>
<a name="l00494"></a>00494   inc_pre  = 0. ;
<a name="l00495"></a>00495 <span class="comment">// DoubleTrav secmem(pression);</span>
<a name="l00496"></a>00496   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> secmem(pression);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498   gradient.<a class="code" href="classOperateur__Grad.html#a179b2f08f6907e9b69fa715cfb98fa81" title="Initialise le tableau passe en parametre avec la contribution de l&#39;operateur.">calculer</a>(<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;pression().valeurs(),gradP);
<a name="l00499"></a>00499 <span class="comment">// gradient.calculer(la_pression,gradP);</span>
<a name="l00500"></a>00500 <span class="comment">// Cerr &lt;&lt; &quot;gradP &quot; &lt;&lt; gradP &lt;&lt; finl;</span>
<a name="l00501"></a>00501 <span class="comment">// on veut BM-1Bt(psi*Pression)</span>
<a name="l00502"></a>00502   <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;solv_masse().appliquer(gradP);
<a name="l00503"></a>00503 
<a name="l00504"></a>00504 <span class="comment">// DoubleTrav grad_temp(la_vitesse.valeurs());</span>
<a name="l00505"></a>00505 <span class="comment">// DoubleTrav grad_temp(vitesse);</span>
<a name="l00506"></a>00506   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> grad_temp(vitesse);
<a name="l00507"></a>00507   <span class="keywordflow">for</span>(i=0; i&lt;nb_face; i++)
<a name="l00508"></a>00508     {
<a name="l00509"></a>00509       <span class="keywordflow">for</span> (comp=0; comp&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; comp++)
<a name="l00510"></a>00510         grad_temp(i,comp) = gradP(i,comp)/porosite_face(i);
<a name="l00511"></a>00511     }
<a name="l00512"></a>00512 
<a name="l00513"></a>00513   divergence.<a class="code" href="classOperateur__Div.html#ad3dbe52ca9c4899797444afeb0fe4ef4" title="Initialise le tableau passe en parametre avec la contribution de l&#39;operateur.">calculer</a>(grad_temp, secmem);
<a name="l00514"></a>00514   secmem *= -1; <span class="comment">//!&lt; car div =-B</span>
<a name="l00515"></a>00515 <span class="comment"></span>  solveur_pression_.<a class="code" href="classSolveurSys.html#a62ca198f0c5dc599e53b0535761e5138">resoudre_systeme</a>(<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;matrice_pression().<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>(),secmem, inc_pre);
<a name="l00516"></a>00516 <span class="comment">// solveur_pression_.resoudre_systeme(mon_equation-&gt;matrice_pression().valeur(),secmem, inc_pre, la_pression.valeur());</span>
<a name="l00517"></a>00517 <span class="comment">// Cerr &lt;&lt; &quot;la pression &quot; &lt;&lt; pression &lt;&lt; finl;</span>
<a name="l00518"></a>00518 <span class="comment">// Cerr &lt;&lt; &quot;inc_pre &quot; &lt;&lt; inc_pre &lt;&lt; finl;</span>
<a name="l00519"></a>00519 
<a name="l00520"></a>00520   <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; la_pression_porosite = <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a6ac98456e7799ba46f75aa4001be3436">ch_p</a>.<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>();
<a name="l00521"></a>00521   la_pression_porosite = inc_pre ;
<a name="l00522"></a>00522   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;la_pression &quot;</span> &lt;&lt; <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;pression().valeurs() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00523"></a>00523   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;ch_p.valeurs() &quot;</span> &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a6ac98456e7799ba46f75aa4001be3436">ch_p</a>.<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00524"></a>00524 }
<a name="l00525"></a>00525 
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 <span class="comment">//</span>
<a name="l00528"></a>00528 <span class="comment">// </span>
<a name="l00529"></a>00529 <span class="comment">// Implementation des fonctions de la classe Calcul_Production_K_VEF</span>
<a name="l00530"></a>00530 <span class="comment">// </span>
<a name="l00531"></a>00531 <span class="comment">//</span>
<a name="l00532"></a>00532 
<a name="l00533"></a>00533 
<a name="l00534"></a>00534 <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a3890afa7544de972e773b3ecaf4fba8e">Traitement_particulier_NS_Brech_VEF::</a>
<a name="l00535"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a3890afa7544de972e773b3ecaf4fba8e">00535</a> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a3890afa7544de972e773b3ecaf4fba8e">calculer_terme_production_K</a>(<span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zone_VEF,<span class="keyword">const</span> <a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>&amp; zcl_VEF,
<a name="l00536"></a>00536                             <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; P,
<a name="l00537"></a>00537                             <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vit)<span class="keyword"> const</span>
<a name="l00538"></a>00538 <span class="keyword"></span>{
<a name="l00539"></a>00539 <span class="comment">// P est discretise comme K et Eps i.e au centre des elements</span>
<a name="l00540"></a>00540 <span class="comment">// </span>
<a name="l00541"></a>00541 <span class="comment">// P(elem) = -(2/3)*k(i)*div_U(i) + nu_t(i) * F(u,v,w)</span>
<a name="l00542"></a>00542 <span class="comment">// </span>
<a name="l00543"></a>00543 <span class="comment">// 2          2          2</span>
<a name="l00544"></a>00544 <span class="comment">// avec F(u,v,w) = 2[(du/dx)  + (dv/dy)  + (dw/dz) ] +</span>
<a name="l00545"></a>00545 <span class="comment">// </span>
<a name="l00546"></a>00546 <span class="comment">// 2               2               2</span>
<a name="l00547"></a>00547 <span class="comment">// (du/dy+dv/dx) + (du/dz+dw/dx) + (dw/dy+dv/dz)</span>
<a name="l00548"></a>00548 <span class="comment">// </span>
<a name="l00549"></a>00549 <span class="comment">// Rqs: On se place dans le cadre incompressible donc on neglige</span>
<a name="l00550"></a>00550 <span class="comment">// le terme (2/3)*k(i)*div_U(i)</span>
<a name="l00551"></a>00551 
<a name="l00552"></a>00552   P= 0;
<a name="l00553"></a>00553 
<a name="l00554"></a>00554 <span class="comment">// Calcul de F(u,v,w):</span>
<a name="l00555"></a>00555 
<a name="l00556"></a>00556 <span class="comment">// const Zone&amp; zone = zone_VEF.zone();</span>
<a name="l00557"></a>00557   <span class="keywordtype">int</span> nb_elem = zone_VEF.<a class="code" href="classZone__dis__base.html#a790cb2f6bc2928518799e748313d0eb3">nb_elem</a>();
<a name="l00558"></a>00558 <span class="comment">// const IntTab&amp; elem_faces = zone_VEF.elem_faces();</span>
<a name="l00559"></a>00559   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = zone_VEF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00560"></a>00560 <span class="comment">// const int nb_faces = zone_VEF.nb_faces();</span>
<a name="l00561"></a>00561   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes = zone_VEF.<a class="code" href="classZone__VF.html#aea771c835e561469d2d21dbca5fac1cf" title="renvoie le volume de la maille i.">volumes</a>();
<a name="l00562"></a>00562 <span class="comment">// int premiere_face_entier = zone_VEF.premiere_face_int();</span>
<a name="l00563"></a>00563 <span class="comment">// const IntTab&amp; les_Polys = zone.les_elems();</span>
<a name="l00564"></a>00564 
<a name="l00565"></a>00565   <span class="keywordtype">int</span> fac=0, poly1, poly2;
<a name="l00566"></a>00566   <span class="keywordtype">int</span> nb_faces_ = zone_VEF.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
<a name="l00567"></a>00567 
<a name="l00568"></a>00568 <span class="comment">// (du/dx du/dy dv/dx dv/dy ...) pour un poly</span>
<a name="l00569"></a>00569 
<a name="l00570"></a>00570 <span class="comment">//</span>
<a name="l00571"></a>00571 <span class="comment">// &lt;</span>
<a name="l00572"></a>00572 <span class="comment">// calcul des gradients;  &lt; [ Ujp*np/vol(j) ]</span>
<a name="l00573"></a>00573 <span class="comment">// j</span>
<a name="l00574"></a>00574 <span class="comment">//</span>
<a name="l00575"></a>00575   <span class="keywordtype">int</span> n_bord;
<a name="l00576"></a>00576 
<a name="l00577"></a>00577   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> gradient_elem(nb_elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00578"></a>00578   <a class="code" href="classChamp__P1NC.html#a87d96c073d3c127684934610f9a1e407">Champ_P1NC::calcul_gradient</a>(vit,gradient_elem,zcl_VEF);
<a name="l00579"></a>00579 
<a name="l00580"></a>00580 <span class="comment">// On a les gradient_elem par elements</span>
<a name="l00581"></a>00581 <span class="comment">//</span>
<a name="l00582"></a>00582 
<a name="l00583"></a>00583   <span class="keywordtype">double</span> du_dx;
<a name="l00584"></a>00584   <span class="keywordtype">double</span> du_dy;
<a name="l00585"></a>00585   <span class="keywordtype">double</span> du_dz;
<a name="l00586"></a>00586   <span class="keywordtype">double</span> dv_dx;
<a name="l00587"></a>00587   <span class="keywordtype">double</span> dv_dy;
<a name="l00588"></a>00588   <span class="keywordtype">double</span> dv_dz;
<a name="l00589"></a>00589   <span class="keywordtype">double</span> dw_dx;
<a name="l00590"></a>00590   <span class="keywordtype">double</span> dw_dy;
<a name="l00591"></a>00591   <span class="keywordtype">double</span> dw_dz;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 <span class="comment">//</span>
<a name="l00594"></a>00594 <span class="comment">// Calcul des du/dx dv/dy et des derivees croisees sur les faces de chaque elements dans le cas 2D</span>
<a name="l00595"></a>00595 <span class="comment">//</span>
<a name="l00596"></a>00596 
<a name="l00597"></a>00597 <span class="comment">// Boucle sur les bords pour traiter les faces de bord</span>
<a name="l00598"></a>00598 <span class="comment">// en distinguant le cas periodicite</span>
<a name="l00599"></a>00599 
<a name="l00600"></a>00600   <span class="keywordflow">for</span> (n_bord=0; n_bord&lt;zone_VEF.<a class="code" href="classZone__dis__base.html#af22167d614644f55591a29c77eb1c009">nb_front_Cl</a>(); n_bord++)
<a name="l00601"></a>00601     {
<a name="l00602"></a>00602       <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = zcl_VEF.<a class="code" href="classZone__Cl__dis__base.html#af75e0ed7786863e4d333bfb29d67c323" title="Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>(n_bord);
<a name="l00603"></a>00603       <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; le_bord = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>());
<a name="l00604"></a>00604       <span class="keywordtype">int</span> ndeb = le_bord.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00605"></a>00605       <span class="keywordtype">int</span> nfin = ndeb + le_bord.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00606"></a>00606 
<a name="l00607"></a>00607       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l00608"></a>00608         {
<a name="l00609"></a>00609           <span class="keywordflow">for</span> (fac=ndeb; fac&lt;nfin; fac++)
<a name="l00610"></a>00610             {
<a name="l00611"></a>00611               poly1 = face_voisins(fac,0);
<a name="l00612"></a>00612               poly2 = face_voisins(fac,1);
<a name="l00613"></a>00613               <span class="keywordtype">double</span> a=volumes(poly1)/(volumes(poly1)+volumes(poly2));
<a name="l00614"></a>00614               <span class="keywordtype">double</span> b=volumes(poly2)/(volumes(poly1)+volumes(poly2));
<a name="l00615"></a>00615 
<a name="l00616"></a>00616               du_dx =a*gradient_elem(poly1,0,0) + b*gradient_elem(poly2,0,0);
<a name="l00617"></a>00617               du_dy =a*gradient_elem(poly1,0,1) + b*gradient_elem(poly2,0,1);
<a name="l00618"></a>00618               dv_dx =a*gradient_elem(poly1,1,0) + b*gradient_elem(poly2,1,0);
<a name="l00619"></a>00619               dv_dy =a*gradient_elem(poly1,1,1) + b*gradient_elem(poly2,1,1);
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 <span class="comment">// Determination du terme de production</span>
<a name="l00622"></a>00622 
<a name="l00623"></a>00623               P(fac) = ( 2*(du_dx *du_dx  + dv_dy *dv_dy) + ((du_dy+dv_dx)*(du_dy+dv_dx)));
<a name="l00624"></a>00624 
<a name="l00625"></a>00625               <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> == 3)
<a name="l00626"></a>00626                 {
<a name="l00627"></a>00627                   du_dz=a*gradient_elem(poly1,0,2) + b*gradient_elem(poly2,0,2);
<a name="l00628"></a>00628                   dv_dz=a*gradient_elem(poly1,1,2) + b*gradient_elem(poly2,1,2);
<a name="l00629"></a>00629                   dw_dx=a*gradient_elem(poly1,2,0) + b*gradient_elem(poly2,2,0);
<a name="l00630"></a>00630                   dw_dy=a*gradient_elem(poly1,2,1) + b*gradient_elem(poly2,2,1);
<a name="l00631"></a>00631                   dw_dz=a*gradient_elem(poly1,2,2) + b*gradient_elem(poly2,2,2);
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 <span class="comment">// Determination du terme de production</span>
<a name="l00634"></a>00634 
<a name="l00635"></a>00635                   P(fac) = (2*( du_dx*du_dx + dv_dy*dv_dy + dw_dz*dw_dz )
<a name="l00636"></a>00636                             + ( (du_dy+dv_dx)*(du_dy+dv_dx)
<a name="l00637"></a>00637                                 +   (du_dz+dw_dx)*(du_dz+dw_dx)
<a name="l00638"></a>00638                                 +   (dw_dy+dv_dz)*(dw_dy+dv_dz)));
<a name="l00639"></a>00639                 }
<a name="l00640"></a>00640             }
<a name="l00641"></a>00641         }
<a name="l00642"></a>00642       <span class="keywordflow">else</span>
<a name="l00643"></a>00643         {
<a name="l00644"></a>00644           <span class="keywordflow">for</span> (fac=ndeb; fac&lt;nfin; fac++)
<a name="l00645"></a>00645             {
<a name="l00646"></a>00646               poly1 = face_voisins(fac,0);
<a name="l00647"></a>00647 
<a name="l00648"></a>00648               du_dx=gradient_elem(poly1,0,0);
<a name="l00649"></a>00649               du_dy=gradient_elem(poly1,0,1);
<a name="l00650"></a>00650               dv_dx=gradient_elem(poly1,1,0);
<a name="l00651"></a>00651               dv_dy=gradient_elem(poly1,1,1);
<a name="l00652"></a>00652 <span class="comment">// Determination du terme de production</span>
<a name="l00653"></a>00653               P(fac) = ( 2*(du_dx*du_dx + dv_dy*dv_dy) + ((du_dy+dv_dx)*(du_dy+dv_dx)));
<a name="l00654"></a>00654 
<a name="l00655"></a>00655 
<a name="l00656"></a>00656               <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> == 3)
<a name="l00657"></a>00657                 {
<a name="l00658"></a>00658                   du_dz=gradient_elem(poly1,0,2);
<a name="l00659"></a>00659                   dv_dz=gradient_elem(poly1,1,2);
<a name="l00660"></a>00660                   dw_dx=gradient_elem(poly1,2,0);
<a name="l00661"></a>00661                   dw_dy=gradient_elem(poly1,2,1);
<a name="l00662"></a>00662                   dw_dz=gradient_elem(poly1,2,2);
<a name="l00663"></a>00663 
<a name="l00664"></a>00664 <span class="comment">// Determination du terme de production</span>
<a name="l00665"></a>00665 
<a name="l00666"></a>00666                   P(fac) = (2*( du_dx*du_dx + dv_dy*dv_dy + dw_dz*dw_dz )
<a name="l00667"></a>00667                             + ( (du_dy+dv_dx)*(du_dy+dv_dx)
<a name="l00668"></a>00668                                 +   (du_dz+dw_dx)*(du_dz+dw_dx)
<a name="l00669"></a>00669                                 +   (dw_dy+dv_dz)*(dw_dy+dv_dz)));
<a name="l00670"></a>00670                 }
<a name="l00671"></a>00671             }
<a name="l00672"></a>00672         }
<a name="l00673"></a>00673     }
<a name="l00674"></a>00674 
<a name="l00675"></a>00675 
<a name="l00676"></a>00676 <span class="comment">// Traitement des faces internes</span>
<a name="l00677"></a>00677 
<a name="l00678"></a>00678   <span class="keywordflow">for</span> (; fac&lt;nb_faces_; fac++)
<a name="l00679"></a>00679     {
<a name="l00680"></a>00680       poly1 = face_voisins(fac,0);
<a name="l00681"></a>00681       poly2 = face_voisins(fac,1);
<a name="l00682"></a>00682       <span class="keywordtype">double</span> a=volumes(poly1)/(volumes(poly1)+volumes(poly2));
<a name="l00683"></a>00683       <span class="keywordtype">double</span> b=volumes(poly2)/(volumes(poly1)+volumes(poly2));
<a name="l00684"></a>00684 
<a name="l00685"></a>00685       du_dx=a*gradient_elem(poly1,0,0) + b*gradient_elem(poly2,0,0);
<a name="l00686"></a>00686       du_dy=a*gradient_elem(poly1,0,1) + b*gradient_elem(poly2,0,1);
<a name="l00687"></a>00687       dv_dx=a*gradient_elem(poly1,1,0) + b*gradient_elem(poly2,1,0);
<a name="l00688"></a>00688       dv_dy=a*gradient_elem(poly1,1,1) + b*gradient_elem(poly2,1,1);
<a name="l00689"></a>00689 
<a name="l00690"></a>00690 <span class="comment">// Determination du terme de production</span>
<a name="l00691"></a>00691 
<a name="l00692"></a>00692       P(fac) = ( 2*(du_dx*du_dx + dv_dy*dv_dy) + ((du_dy+dv_dx)*(du_dy+dv_dx)));
<a name="l00693"></a>00693 
<a name="l00694"></a>00694       <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> == 3)
<a name="l00695"></a>00695         {
<a name="l00696"></a>00696           du_dz=a*gradient_elem(poly1,0,2) + b*gradient_elem(poly2,0,2);
<a name="l00697"></a>00697           dv_dz=a*gradient_elem(poly1,1,2) + b*gradient_elem(poly2,1,2);
<a name="l00698"></a>00698           dw_dx=a*gradient_elem(poly1,2,0) + b*gradient_elem(poly2,2,0);
<a name="l00699"></a>00699           dw_dy=a*gradient_elem(poly1,2,1) + b*gradient_elem(poly2,2,1);
<a name="l00700"></a>00700           dw_dz=a*gradient_elem(poly1,2,2) + b*gradient_elem(poly2,2,2);
<a name="l00701"></a>00701 
<a name="l00702"></a>00702 <span class="comment">// Determination du terme de production</span>
<a name="l00703"></a>00703 
<a name="l00704"></a>00704           P(fac) = (2*( du_dx*du_dx + dv_dy*dv_dy + dw_dz*dw_dz )
<a name="l00705"></a>00705                     + ( (du_dy+dv_dx)*(du_dy+dv_dx)
<a name="l00706"></a>00706                         +   (du_dz+dw_dx)*(du_dz+dw_dx)
<a name="l00707"></a>00707                         +   (dw_dy+dv_dz)*(dw_dy+dv_dz)));
<a name="l00708"></a>00708         }
<a name="l00709"></a>00709     }
<a name="l00710"></a>00710 }
<a name="l00711"></a>00711 
<a name="l00712"></a>00712 
<a name="l00713"></a>00713 <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a282a22d914306f2b6aa2b14fb28a0487">Traitement_particulier_NS_Brech_VEF::</a>
<a name="l00714"></a><a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a282a22d914306f2b6aa2b14fb28a0487">00714</a> <a class="code" href="classTraitement__particulier__NS__Brech__VEF.html#a282a22d914306f2b6aa2b14fb28a0487">calculer_terme_destruction_K</a>(<span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zone_VEF,
<a name="l00715"></a>00715                              <span class="keyword">const</span> <a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>&amp; zcl_VEF,
<a name="l00716"></a>00716                              <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; G,<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; temper,
<a name="l00717"></a>00717                              <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; beta,<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; gravite)<span class="keyword"> const</span>
<a name="l00718"></a>00718 <span class="keyword"></span>{
<a name="l00719"></a>00719 <span class="comment">// </span>
<a name="l00720"></a>00720 <span class="comment">// G est discretise comme K et Eps i.e au centre des faces</span>
<a name="l00721"></a>00721 <span class="comment">// </span>
<a name="l00722"></a>00722 <span class="comment">// --&gt; -----&gt;</span>
<a name="l00723"></a>00723 <span class="comment">// G(face) = beta alpha_t(face) G . gradT(face)</span>
<a name="l00724"></a>00724 <span class="comment">// </span>
<a name="l00725"></a>00725   <span class="keywordtype">int</span> nb_elem = zone_VEF.<a class="code" href="classZone__dis__base.html#a790cb2f6bc2928518799e748313d0eb3">nb_elem</a>();
<a name="l00726"></a>00726   <span class="keywordtype">int</span> nb_faces= zone_VEF.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
<a name="l00727"></a>00727   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> u_teta(nb_faces,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00728"></a>00728   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> gradient_elem(nb_elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00729"></a>00729   u_teta=0;
<a name="l00730"></a>00730   gradient_elem=0;
<a name="l00731"></a>00731 
<a name="l00732"></a>00732 <span class="comment">// const Zone&amp; la_zone=zone_VEF.zone();</span>
<a name="l00733"></a>00733 <span class="comment">// int nb_faces_elem = la_zone.nb_faces_elem();</span>
<a name="l00734"></a>00734 <span class="comment">// const IntTab&amp; elem_faces = zone_VEF.elem_faces();</span>
<a name="l00735"></a>00735   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = zone_VEF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00736"></a>00736   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; face_normales = zone_VEF.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>();
<a name="l00737"></a>00737   <span class="keywordtype">int</span> premiere_face_entier = zone_VEF.<a class="code" href="classZone__VF.html#a12869806fa4834aca8f2964e16509dfd" title="une face est interne ssi elle separe deux elements. renvoie le numero de la premiere face interne...">premiere_face_int</a>();
<a name="l00738"></a>00738   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes = zone_VEF.<a class="code" href="classZone__VF.html#aea771c835e561469d2d21dbca5fac1cf" title="renvoie le volume de la maille i.">volumes</a>();
<a name="l00739"></a>00739   <span class="keywordtype">int</span> nb_faces_ = zone_VEF.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
<a name="l00740"></a>00740   <span class="keywordtype">int</span> elem1,elem2,fac;
<a name="l00741"></a>00741 
<a name="l00742"></a>00742   <a class="code" href="classDoubleVect.html">DoubleVect</a> coef(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>);
<a name="l00743"></a>00743 <span class="comment">// const IntTab&amp; les_elem_faces = zone_VEF.elem_faces();</span>
<a name="l00744"></a>00744 
<a name="l00745"></a>00745 <span class="comment">// Calcul du gradient de temperature :</span>
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 <span class="comment">// On traite les bords</span>
<a name="l00748"></a>00748   <span class="keywordtype">int</span> n_bord;
<a name="l00749"></a>00749   <span class="keywordflow">for</span> (n_bord=0; n_bord&lt;zone_VEF.<a class="code" href="classZone__dis__base.html#af22167d614644f55591a29c77eb1c009">nb_front_Cl</a>(); n_bord++)
<a name="l00750"></a>00750     {
<a name="l00751"></a>00751       <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = zcl_VEF.<a class="code" href="classZone__Cl__dis__base.html#af75e0ed7786863e4d333bfb29d67c323" title="Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>(n_bord);
<a name="l00752"></a>00752       <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; le_bord = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>());
<a name="l00753"></a>00753       <span class="keywordtype">int</span> ndeb = le_bord.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00754"></a>00754       <span class="keywordtype">int</span> nfin = ndeb + le_bord.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00755"></a>00755 
<a name="l00756"></a>00756       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l00757"></a>00757         {
<a name="l00758"></a>00758           <span class="keywordflow">for</span> (fac=ndeb; fac&lt;nfin; fac++)
<a name="l00759"></a>00759             {
<a name="l00760"></a>00760               elem1=face_voisins(fac,0);
<a name="l00761"></a>00761               elem2=face_voisins(fac,1);
<a name="l00762"></a>00762               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00763"></a>00763                 {
<a name="l00764"></a>00764                   gradient_elem(elem1,i) += 0.5*face_normales(fac,i)*temper(fac);
<a name="l00765"></a>00765                   gradient_elem(elem2,i) -= 0.5*face_normales(fac,i)*temper(fac);
<a name="l00766"></a>00766                 }
<a name="l00767"></a>00767             }
<a name="l00768"></a>00768         }
<a name="l00769"></a>00769       <span class="keywordflow">else</span>
<a name="l00770"></a>00770         {
<a name="l00771"></a>00771           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> fac2=ndeb; fac2&lt;nfin; fac2++)
<a name="l00772"></a>00772             {
<a name="l00773"></a>00773               elem1=face_voisins(fac2,0);
<a name="l00774"></a>00774               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00775"></a>00775                 gradient_elem(elem1,i) += face_normales(fac2,i)*temper(fac2);
<a name="l00776"></a>00776             }
<a name="l00777"></a>00777         }
<a name="l00778"></a>00778     }
<a name="l00779"></a>00779 
<a name="l00780"></a>00780 <span class="comment">// On traite les faces internes</span>
<a name="l00781"></a>00781   <span class="keywordflow">for</span> (fac = premiere_face_entier ; fac&lt;nb_faces_; fac++)
<a name="l00782"></a>00782     {
<a name="l00783"></a>00783       elem1=face_voisins(fac,0);
<a name="l00784"></a>00784       elem2=face_voisins(fac,1);
<a name="l00785"></a>00785       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00786"></a>00786         {
<a name="l00787"></a>00787           gradient_elem(elem1,i) += face_normales(fac,i)*temper(fac);
<a name="l00788"></a>00788           gradient_elem(elem2,i) -= face_normales(fac,i)*temper(fac);
<a name="l00789"></a>00789         }
<a name="l00790"></a>00790     }
<a name="l00791"></a>00791 
<a name="l00792"></a>00792   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> elem=0; elem&lt;nb_elem; elem++)
<a name="l00793"></a>00793     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00794"></a>00794       gradient_elem(elem,i) /= volumes(elem);
<a name="l00795"></a>00795 
<a name="l00796"></a>00796 <span class="comment">// Calcul de u_teta :</span>
<a name="l00797"></a>00797 
<a name="l00798"></a>00798 <span class="comment">// On traite les bords</span>
<a name="l00799"></a>00799 
<a name="l00800"></a>00800   <span class="keywordflow">for</span> (n_bord=0; n_bord&lt;zone_VEF.<a class="code" href="classZone__dis__base.html#af22167d614644f55591a29c77eb1c009">nb_front_Cl</a>(); n_bord++)
<a name="l00801"></a>00801     {
<a name="l00802"></a>00802       <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = zcl_VEF.<a class="code" href="classZone__Cl__dis__base.html#af75e0ed7786863e4d333bfb29d67c323" title="Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>(n_bord);
<a name="l00803"></a>00803       <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; le_bord = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>());
<a name="l00804"></a>00804       <span class="keywordtype">int</span> ndeb = le_bord.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00805"></a>00805       <span class="keywordtype">int</span> nfin = ndeb + le_bord.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00806"></a>00806 
<a name="l00807"></a>00807       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPeriodique.html" title="classe Periodique Cette classe represente une condition aux limites periodique. On peut specifier une...">Periodique</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l00808"></a>00808         {
<a name="l00809"></a>00809           <span class="keywordflow">for</span> (fac=ndeb; fac&lt;nfin; fac++)
<a name="l00810"></a>00810             {
<a name="l00811"></a>00811               elem1 = face_voisins(fac,0);
<a name="l00812"></a>00812               elem2 = face_voisins(fac,1);
<a name="l00813"></a>00813               <span class="keywordtype">double</span> a=volumes(elem1)/(volumes(elem1)+volumes(elem2));
<a name="l00814"></a>00814               <span class="keywordtype">double</span> b=volumes(elem2)/(volumes(elem1)+volumes(elem2));
<a name="l00815"></a>00815               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00816"></a>00816                 u_teta(fac,i)=a*beta(elem1)*gradient_elem(elem1,i)
<a name="l00817"></a>00817                               +b*beta(elem2)*gradient_elem(elem2,i);
<a name="l00818"></a>00818             }
<a name="l00819"></a>00819         }
<a name="l00820"></a>00820       <span class="keywordflow">else</span>
<a name="l00821"></a>00821         {
<a name="l00822"></a>00822           <span class="keywordflow">for</span> (fac=ndeb; fac&lt; nfin; fac++)
<a name="l00823"></a>00823             {
<a name="l00824"></a>00824               elem1 = face_voisins(fac,0);
<a name="l00825"></a>00825               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00826"></a>00826                 u_teta(fac,i)=beta(elem1)*gradient_elem(elem1,i);
<a name="l00827"></a>00827             }
<a name="l00828"></a>00828         }
<a name="l00829"></a>00829     }
<a name="l00830"></a>00830 
<a name="l00831"></a>00831   <span class="keywordflow">for</span> (; fac&lt;nb_faces_; fac++)
<a name="l00832"></a>00832     {
<a name="l00833"></a>00833       elem1 = face_voisins(fac,0);
<a name="l00834"></a>00834       elem2 = face_voisins(fac,1);
<a name="l00835"></a>00835       <span class="keywordtype">double</span> a=volumes(elem1)/(volumes(elem1)+volumes(elem2));
<a name="l00836"></a>00836       <span class="keywordtype">double</span> b=volumes(elem2)/(volumes(elem1)+volumes(elem2));
<a name="l00837"></a>00837       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00838"></a>00838         u_teta(fac,i)=a*beta(elem1)*gradient_elem(elem1,i)+b*beta(elem2)*gradient_elem(elem2,i);
<a name="l00839"></a>00839     }
<a name="l00840"></a>00840 <span class="comment">// -------&gt;  ------&gt;</span>
<a name="l00841"></a>00841 <span class="comment">// Calcul de gravite . u_teta</span>
<a name="l00842"></a>00842 <span class="comment">// </span>
<a name="l00843"></a>00843   G = 0;
<a name="l00844"></a>00844   <span class="keywordflow">for</span> (fac=0; fac&lt; nb_faces_; fac++)
<a name="l00845"></a>00845     {
<a name="l00846"></a>00846       <span class="keywordflow">if</span> (dimension == 2)
<a name="l00847"></a>00847         G[fac] = gravite(0)*u_teta(fac,0) + gravite(1)*u_teta(fac,1);
<a name="l00848"></a>00848       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dimension == 3)
<a name="l00849"></a>00849         G[fac] = gravite(0)*u_teta(fac,0) + gravite(1)*u_teta(fac,1) + gravite(2)*u_teta(fac,2);
<a name="l00850"></a>00850     }
<a name="l00851"></a>00851 }
<a name="l00852"></a>00852 
<a name="l00853"></a>00853 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:44 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
