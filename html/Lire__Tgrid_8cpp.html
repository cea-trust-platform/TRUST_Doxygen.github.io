<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/Lire_Tgrid.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/Lire_Tgrid.cpp File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="Lire__Tgrid_8h_source.html">Lire_Tgrid.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="EFichier_8h_source.html">EFichier.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="Domaine_8h_source.html">Domaine.h</a>&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="RefFrontiere_8h_source.html">RefFrontiere.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="NettoieNoeuds_8h_source.html">NettoieNoeuds.h</a>&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
</div>
<p><a href="Lire__Tgrid_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Lire__Tgrid_8cpp.html#aded89a62fb8d762d9efb90372c05cd1f">decompression</a> (<a class="el" href="classNom.html">Nom</a> &amp;nom_fichier)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Lire__Tgrid_8cpp.html#a03d210a3bae945c0c55286b3fbbcc78b">chartoint</a> (char c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Lire__Tgrid_8cpp.html#a46562c30ff470bb737654cfa0a1b355a">htoi</a> (const char *szChaine)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Lire__Tgrid_8cpp.html#a98b472a19e3a523e6e076e1cf4560a46">va_a_la_parenthese_fermante</a> (<a class="el" href="classEFichier.html">EFichier</a> &amp;fic)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Lire__Tgrid_8cpp.html#acb1f34711c5cae7c199c75a8f356ff09">va_a_la_parenthese_ouvrante</a> (<a class="el" href="classEFichier.html">EFichier</a> &amp;fic)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classType__info.html">Type_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Lire__Tgrid_8cpp.html#af6fbb61eb94aa573f5dc1c7e08c274fe">Lire_Tgridbases</a> [1] = { &amp;( <a class="el" href="classInterprete__geometrique__base.html">Interprete_geometrique_base</a> ::info_obj)}</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a03d210a3bae945c0c55286b3fbbcc78b"></a><!-- doxytag: member="Lire_Tgrid.cpp::chartoint" ref="a03d210a3bae945c0c55286b3fbbcc78b" args="(char c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int chartoint </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Lire__Tgrid_8cpp_source.html#l00085">85</a> of file <a class="el" href="Lire__Tgrid_8cpp_source.html">Lire_Tgrid.cpp</a>.</p>

<p>Referenced by <a class="el" href="Lire__Tgrid_8cpp_source.html#l00094">htoi()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span>( (0&gt;(c-<span class="charliteral">&#39;0&#39;</span>)) || ((c-<span class="charliteral">&#39;0&#39;</span>)&gt;9) )
    <span class="keywordflow">return</span> -1;
  <span class="keywordflow">else</span>
    <span class="keywordflow">return</span> (c-<span class="charliteral">&#39;0&#39;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aded89a62fb8d762d9efb90372c05cd1f"></a><!-- doxytag: member="Lire_Tgrid.cpp::decompression" ref="aded89a62fb8d762d9efb90372c05cd1f" args="(Nom &amp;nom_fichier)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void decompression </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNom.html">Nom</a> &amp;&#160;</td>
          <td class="paramname"><em>nom_fichier</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Lire__Tgrid_8cpp_source.html#l00034">34</a> of file <a class="el" href="Lire__Tgrid_8cpp_source.html">Lire_Tgrid.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Postraitement_8cpp_source.html#l00119">nom_fichier()</a>, and <a class="el" href="Nom_8cpp_source.html#l00484">Nom::prefix()</a>.</p>

<p>Referenced by <a class="el" href="Lire__Tgrid_8cpp_source.html#l00244">Lire_Tgrid::interpreter_()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> tmp(nom_fichier);
  <span class="keywordflow">if</span> (tmp.prefix(<span class="stringliteral">&quot;.gz&quot;</span>)!=<a class="code" href="Postraitement_8cpp.html#a2014b0b7ca4c8b7161754648bb234d56">nom_fichier</a>)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Unzipping file &quot;</span> &lt;&lt; nom_fichier &lt;&lt; <span class="stringliteral">&quot; ...&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> cmd=<span class="stringliteral">&quot;gunzip -c &quot;</span>;
      cmd+=nom_fichier+<span class="stringliteral">&quot; &gt; &quot;</span>+tmp;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; (int)system(cmd) &lt;&lt; finl;
      nom_fichier=tmp;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a46562c30ff470bb737654cfa0a1b355a"></a><!-- doxytag: member="Lire_Tgrid.cpp::htoi" ref="a46562c30ff470bb737654cfa0a1b355a" args="(const char *szChaine)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int htoi </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szChaine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>&lt; Caractere invalide en Hexa.</p>
<p>&lt; Caractere non valide. lResult += iValue * pow(16, iLength - i - 1); </p>
</p>

<p>Definition at line <a class="el" href="Lire__Tgrid_8cpp_source.html#l00094">94</a> of file <a class="el" href="Lire__Tgrid_8cpp_source.html">Lire_Tgrid.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Lire__Tgrid_8cpp_source.html#l00085">chartoint()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, and <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>.</p>

<p>Referenced by <a class="el" href="Lire__Tgrid_8cpp_source.html#l00244">Lire_Tgrid::interpreter_()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> lResult = 0;
  <span class="keywordtype">int</span> iLength = 0;
<span class="comment">// Pointeur null, on renvoi -1</span>
  <span class="keywordflow">if</span> (szChaine == NULL)
    <span class="keywordflow">return</span> -1;
<span class="comment">// On calcule la longueur de la chaine</span>
  iLength = strlen(szChaine);

<span class="comment">// On met la chaine en majuscule dans une nouvelle chaine (allouee par strdup)</span>
  <span class="keywordtype">char</span> * szHexaString = strdup(szChaine);
<span class="comment">// Pour chaque caractere on calcule sa valeur</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = iLength - 1; i &gt;= 0; i--)
    {
      <span class="keywordtype">char</span> cCharacter = szHexaString[i];
      <span class="keywordtype">int</span> iValue = 0;
<span class="comment">// C&#39;est un digit, on le convertit en entier</span>
      <span class="keywordflow">if</span> (isdigit(cCharacter))
        {
<span class="comment">// iValue = atoi(&amp;cCharacter);</span>
<span class="comment">// atoi a l&#39;air mechamment bugge !</span>
<span class="comment">// Je code un chartoint correct !</span>
          iValue = <a class="code" href="Lire__Tgrid_8cpp.html#a03d210a3bae945c0c55286b3fbbcc78b">chartoint</a>(cCharacter);
          <span class="keywordflow">if</span> (iValue&gt;9)
            {
              <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;iValue is worth &quot;</span> &lt;&lt; iValue &lt;&lt; <span class="stringliteral">&quot; ! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
              <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
            }
        }
<span class="comment">// C&#39;est un caractere, on lui associe une valeur entiere</span>
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isalpha(cCharacter))
        {
          <span class="keywordflow">switch</span>(cCharacter)
            {
            <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span> :
            <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span> :
              iValue = 10;
              <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span> :
            <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span> :
              iValue = 11;
              <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span> :
            <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span> :
              iValue = 12;
              <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <span class="charliteral">&#39;D&#39;</span> :
            <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span> :
              iValue = 13;
              <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span> :
            <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span> :
              iValue = 14;
              <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span> :
            <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span> :
              iValue = 15;
              <span class="keywordflow">break</span>;
            <span class="keywordflow">default</span>  :
              <span class="keywordflow">return</span> -3;              <span class="comment">//!&lt; Caractere invalide en Hexa.</span>
<span class="comment"></span>            }
        }
<span class="comment">// Ce n&#39;est ni un caractere ni un digit.</span>
      <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> -4;   <span class="comment">//!&lt; Caractere non valide. lResult += iValue * pow(16, iLength - i - 1);</span>
<span class="comment"></span><span class="comment">//</span>
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> puissance=0; puissance&lt;iLength - i - 1; puissance++)
        iValue *= 16;
      lResult += iValue;
    }
<span class="comment">// Liberation de la chaine allouee</span>
  free (szHexaString);
<span class="comment">// Cerr &lt;&lt; lResult &lt;&lt; finl;</span>
  <span class="keywordflow">return</span> lResult;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98b472a19e3a523e6e076e1cf4560a46"></a><!-- doxytag: member="Lire_Tgrid.cpp::va_a_la_parenthese_fermante" ref="a98b472a19e3a523e6e076e1cf4560a46" args="(EFichier &amp;fic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void va_a_la_parenthese_fermante </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEFichier.html">EFichier</a> &amp;&#160;</td>
          <td class="paramname"><em>fic</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Lire__Tgrid_8cpp_source.html#l00171">171</a> of file <a class="el" href="Lire__Tgrid_8cpp_source.html">Lire_Tgrid.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Nom_8h_source.html#l00088">Nom::getChar()</a>, <a class="el" href="Entree__Fichier__base_8cpp_source.html#l00144">Entree_Fichier_base::good()</a>, and <a class="el" href="Process_8cpp_source.html#l00345">Process::Journal()</a>.</p>

<p>Referenced by <a class="el" href="Lire__Tgrid_8cpp_source.html#l00244">Lire_Tgrid::interpreter_()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> parenthese_ouverte=1;
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> lu;
  <span class="keywordflow">while</span> ((parenthese_ouverte!=0)&amp;&amp;(fic.<a class="code" href="classEntree__Fichier__base.html#a0db5378632b186a9ecc72edee7441cea">good</a>()))
    {
      fic &gt;&gt; lu;
      <span class="keyword">const</span> <span class="keywordtype">char</span>* chaine = lu.<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>();
      <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Process::Journal</a>()&lt;&lt;<span class="stringliteral">&quot;|&quot;</span>&lt;&lt;chaine&lt;&lt;<span class="stringliteral">&quot;|&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <span class="keywordtype">int</span> iLength = strlen(chaine);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;iLength; i++)
        {
          <span class="keywordtype">char</span> c = chaine[i];
          <span class="keywordflow">switch</span>(c)
            {
            <span class="keywordflow">case</span> 40 :
              parenthese_ouverte++;
              <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> 41 :
              parenthese_ouverte--;
              <span class="keywordflow">break</span>;
            }
        }
    }

  <span class="keywordflow">if</span> (parenthese_ouverte!=0)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt; <span class="stringliteral">&quot;Error in file&quot;</span>&lt;&lt;finl;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }

}
</pre></div>
</div>
</div>
<a class="anchor" id="acb1f34711c5cae7c199c75a8f356ff09"></a><!-- doxytag: member="Lire_Tgrid.cpp::va_a_la_parenthese_ouvrante" ref="acb1f34711c5cae7c199c75a8f356ff09" args="(EFichier &amp;fic)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void va_a_la_parenthese_ouvrante </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEFichier.html">EFichier</a> &amp;&#160;</td>
          <td class="paramname"><em>fic</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Lire__Tgrid_8cpp_source.html#l00203">203</a> of file <a class="el" href="Lire__Tgrid_8cpp_source.html">Lire_Tgrid.cpp</a>.</p>

<p>References <a class="el" href="Nom_8h_source.html#l00088">Nom::getChar()</a>.</p>

<p>Referenced by <a class="el" href="Lire__Tgrid_8cpp_source.html#l00244">Lire_Tgrid::interpreter_()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ok=0;
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> lu;
  <span class="keywordflow">while</span> (ok!=1)
    {
      fic &gt;&gt; lu;
      <span class="keyword">const</span> <span class="keywordtype">char</span>* chaine = lu.<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>();
      <span class="keywordtype">int</span> iLength = strlen(chaine);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;iLength; i++)
        {
          <span class="keywordtype">char</span> c = chaine[i];
          <span class="keywordflow">switch</span>(c)
            {
            <span class="keywordflow">case</span> 40 :
              ok=1;
              <span class="keywordflow">break</span>;
            }
        }
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="af6fbb61eb94aa573f5dc1c7e08c274fe"></a><!-- doxytag: member="Lire_Tgrid.cpp::Lire_Tgridbases" ref="af6fbb61eb94aa573f5dc1c7e08c274fe" args="[1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classType__info.html">Type_info</a>* <a class="el" href="Lire__Tgrid_8cpp.html#af6fbb61eb94aa573f5dc1c7e08c274fe">Lire_Tgridbases</a>[1] = { &amp;( <a class="el" href="classInterprete__geometrique__base.html">Interprete_geometrique_base</a> ::info_obj)}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Lire__Tgrid_8cpp_source.html#l00046">46</a> of file <a class="el" href="Lire__Tgrid_8cpp_source.html">Lire_Tgrid.cpp</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:50 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
