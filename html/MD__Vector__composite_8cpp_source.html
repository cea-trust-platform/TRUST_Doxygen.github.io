<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Math/MD_Vector_composite.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Math/MD_Vector_composite.cpp</div>  </div>
</div>
<div class="contents">
<a href="MD__Vector__composite_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        MD_Vector_composite.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Math</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/7</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;<a class="code" href="MD__Vector__composite_8h.html">MD_Vector_composite.h</a>&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Array__tools_8h.html">Array_tools.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00025"></a>00025 
<a name="l00026"></a><a class="code" href="classVect__MD__Vector.html#ae962ba22a1007a006ecbf74077740d97">00026</a> <a class="code" href="VectMD__Vector_8h.html#aa11602653626ff4479c920ea5df922ce">implemente_vect_no_obj</a>(<a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>)
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="MD__Vector__composite_8cpp.html#a0354881430c19d370b7ed248f35a8522">00028</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>,&quot;MD_Vector_composite&quot;,<a class="code" href="classMD__Vector__base2.html">MD_Vector_base2</a>);
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#if 0</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="comment">//</span><span class="comment"></span>
<a name="l00032"></a>00032 <span class="comment">//! Metadata for a distributed vector built as a subset of another vector</span>
<a name="l00033"></a>00033 <span class="comment"></span><span class="keyword">class </span>MD_Vector_subset : <span class="keyword">public</span> <a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035   eeclare_instanciable(MD_Vector_subset)
<a name="l00036"></a>00036 <span class="keyword">public</span>:
<a name="l00037"></a>00037   <span class="keyword">virtual</span> <span class="keywordtype">void</span> build(<span class="keyword">const</span> <a class="code" href="classArrOfBit.html">ArrOfBit</a>&amp; selection, <span class="keyword">const</span> MD_Vector_Ptr&amp; src);
<a name="l00038"></a>00038   <span class="keyword">virtual</span> <span class="keywordtype">void</span> copy_vector_to_subset(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; src, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; dest) <span class="keyword">const</span>;
<a name="l00039"></a>00039   <span class="keyword">virtual</span> <span class="keywordtype">void</span> copy_subset_to_vector(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; src, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; dest) <span class="keyword">const</span>;
<a name="l00040"></a>00040 <span class="comment">// The metadata of the source vector</span>
<a name="l00041"></a>00041   MD_Vector_Ptr src_data_;
<a name="l00042"></a>00042 <span class="comment">// The subset selection (size = src_data_.valeur().get_nb_items_tot())</span>
<a name="l00043"></a>00043   <a class="code" href="classArrOfBit.html">ArrOfBit</a> selection_;
<a name="l00044"></a>00044 };
<a name="l00045"></a>00045 <span class="preprocessor">#endif</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="comment">//</span><span class="comment"></span>
<a name="l00048"></a>00048 <span class="comment">//! method used to dump/restore a descriptor in a file&lt;br&gt;Each process writes a different descriptor. See MD_Vector_tools::dump_vector_with_md()</span>
<a name="l00049"></a><a class="code" href="classMD__Vector__composite.html#adac8ada1466661a59644f0a44d101202">00049</a> <span class="comment"></span><a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classMD__Vector__composite.html#adac8ada1466661a59644f0a44d101202" title="method used to dump/restore a descriptor in a file Each process writes a different descriptor...">MD_Vector_composite::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00050"></a>00050 <span class="keyword"></span>{
<a name="l00051"></a>00051   <a class="code" href="classMD__Vector__composite.html#adac8ada1466661a59644f0a44d101202" title="method used to dump/restore a descriptor in a file Each process writes a different descriptor...">MD_Vector_base2::printOn</a>(os);
<a name="l00052"></a>00052   <span class="keywordtype">int</span> np=<a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>.<a class="code" href="classVect__MD__Vector.html#af5aaad6ccea0d8d0ecb0ff5c6a2f50ee">size</a>();
<a name="l00053"></a>00053   os &lt;&lt; np&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00054"></a>00054   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p=0; p&lt;np; p++)
<a name="l00055"></a>00055     {
<a name="l00056"></a>00056       <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; md = <a class="code" href="classMD__Vector__composite.html#a7f91380228a64040d0707dc485f86435">get_desc_part</a>(p).<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
<a name="l00057"></a>00057       os &lt;&lt; md.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; finl;
<a name="l00058"></a>00058       os &lt;&lt; md &lt;&lt; finl;
<a name="l00059"></a>00059     }
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   os &lt;&lt; <span class="stringliteral">&quot;{&quot;</span> &lt;&lt; finl;
<a name="l00064"></a>00064   os &lt;&lt; <span class="stringliteral">&quot;global_md&quot;</span> &lt;&lt; finl &lt;&lt; <a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a> &lt;&lt; finl;
<a name="l00065"></a>00065   os &lt;&lt; <span class="stringliteral">&quot;parts_offsets&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#ae67efc620265981e3385b5f75837d3ef">space</a> &lt;&lt; <a class="code" href="classMD__Vector__composite.html#a89577c0a030806e9aa6bd7d4095e55e6">parts_offsets_</a> &lt;&lt; finl;
<a name="l00066"></a>00066   os &lt;&lt; <span class="stringliteral">&quot;shapes&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#ae67efc620265981e3385b5f75837d3ef">space</a> &lt;&lt; <a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a> &lt;&lt; finl;
<a name="l00067"></a>00067   os &lt;&lt; <span class="stringliteral">&quot;}&quot;</span> &lt;&lt; finl;
<a name="l00068"></a>00068   <span class="keywordflow">return</span> os;
<a name="l00069"></a>00069 }
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="comment">//</span><span class="comment"></span>
<a name="l00072"></a>00072 <span class="comment">//! method used to dump/restore a descriptor in a file&lt;br&gt;Each process writes a different descriptor. See MD_Vector_tools::restore_vector_with_md()</span>
<a name="l00073"></a><a class="code" href="classMD__Vector__composite.html#a52cd123d457c7de5e77e9093ebff8f9c">00073</a> <span class="comment"></span><a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classMD__Vector__composite.html#a52cd123d457c7de5e77e9093ebff8f9c" title="method used to dump/restore a descriptor in a file Each process writes a different descriptor...">MD_Vector_composite::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00074"></a>00074 {
<a name="l00075"></a>00075   <a class="code" href="classMD__Vector__composite.html#a52cd123d457c7de5e77e9093ebff8f9c" title="method used to dump/restore a descriptor in a file Each process writes a different descriptor...">MD_Vector_base2::readOn</a>(is);
<a name="l00076"></a>00076 
<a name="l00077"></a>00077   <span class="keywordtype">int</span> np;
<a name="l00078"></a>00078   is &gt;&gt; np ;
<a name="l00079"></a>00079   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p=0; p&lt;np; p++)
<a name="l00080"></a>00080     {
<a name="l00081"></a>00081       <a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>) md_ptr;
<a name="l00082"></a>00082       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> md_type;
<a name="l00083"></a>00083       is &gt;&gt; md_type;
<a name="l00084"></a>00084       md_ptr.typer(md_type);
<a name="l00085"></a>00085       is &gt;&gt; md_ptr.valeur();
<a name="l00086"></a>00086       <span class="keywordflow">if</span> (1)
<a name="l00087"></a>00087         {
<a name="l00088"></a>00088 <span class="comment">// Creation du MD_Vector attache au tableau</span>
<a name="l00089"></a>00089           <a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>.<a class="code" href="classVect__MD__Vector.html#a91e4477aed5f6bf0a98b9d1b5c60a23d">add</a>(<a class="code" href="classMD__Vector__base.html#a490725437e4b0963d88d71857a8a591e">MD_Vector</a>());
<a name="l00090"></a>00090           <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; mdV =<a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>[p];
<a name="l00091"></a>00091           mdV.<a class="code" href="classMD__Vector.html#a063644dd8ca62e707a2d059eedeb58a7" title="construction d&#39;un objet MD_Vector par copie d&#39;un objet existant. C&#39;est la methode recommandee pour cr...">copy</a>(md_ptr.valeur());
<a name="l00092"></a>00092         }
<a name="l00093"></a>00093     }
<a name="l00094"></a>00094   <a class="code" href="classParam.html" title="Defined below in this file.">Param</a> p(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00095"></a>00095   p.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;global_md&quot;</span>, &amp;<a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>);
<a name="l00096"></a>00096   p.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;parts_offsets&quot;</span>, &amp;<a class="code" href="classMD__Vector__composite.html#a89577c0a030806e9aa6bd7d4095e55e6">parts_offsets_</a>);
<a name="l00097"></a>00097   p.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;shapes&quot;</span>, &amp;<a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>);
<a name="l00098"></a>00098   p.<a class="code" href="classParam.html#aea52f16d3b74c59c48cb5708ff48f14a">lire_avec_accolades</a>(is);
<a name="l00099"></a>00099   <span class="keywordflow">return</span> is;
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="MD__Vector__composite_8cpp.html#acbdccbb8ee4ac3835a1f8738e3680f40">00102</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MD__Vector__composite_8cpp.html#acbdccbb8ee4ac3835a1f8738e3680f40">append_items</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; dest, <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; src, <span class="keywordtype">int</span> offset = 0, <span class="keywordtype">int</span> multiplier = 1)
<a name="l00103"></a>00103 {
<a name="l00104"></a>00104   <span class="keywordtype">int</span> i = dest.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00105"></a>00105   <span class="keyword">const</span> <span class="keywordtype">int</span> n = src.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00106"></a>00106   dest.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(i + n * multiplier);
<a name="l00107"></a>00107   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; n; j++)
<a name="l00108"></a>00108     {
<a name="l00109"></a>00109       <span class="keywordtype">int</span> x = offset + src[j] * multiplier;
<a name="l00110"></a>00110       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; multiplier; k++)
<a name="l00111"></a>00111         dest[i++] = x++;
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113 }
<a name="l00114"></a>00114 
<a name="l00115"></a><a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">00115</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; dest, <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; src, <span class="keywordtype">int</span> offset = 0, <span class="keywordtype">int</span> multiplier = 1)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117   <span class="keywordtype">int</span> i = dest.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00118"></a>00118   <span class="keyword">const</span> <span class="keywordtype">int</span> n = src.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00119"></a>00119   dest.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(i + n);
<a name="l00120"></a>00120   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; n; j++, i++)
<a name="l00121"></a>00121     dest[i] = offset + src[j] * multiplier;
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 <span class="comment"></span>
<a name="l00124"></a>00124 <span class="comment">//! returns i such that a[i]==x, or -1 if x is not found</span>
<a name="l00125"></a><a class="code" href="MD__Vector__composite_8cpp.html#a73491edb66b362194723171e52f1c71a">00125</a> <span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="MD__Vector__composite_8cpp.html#a73491edb66b362194723171e52f1c71a" title="returns i such that a[i]==x, or -1 if x is not found">find_in_array</a>(<span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; a, <span class="keywordtype">int</span> x)
<a name="l00126"></a>00126 {
<a name="l00127"></a>00127   <span class="keywordtype">int</span> n;
<a name="l00128"></a>00128   <span class="keywordflow">for</span> (n = a.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() - 1; n &gt;= 0; n--)
<a name="l00129"></a>00129     <span class="keywordflow">if</span> (a[n] == x)
<a name="l00130"></a>00130       <span class="keywordflow">break</span>;
<a name="l00131"></a>00131   <span class="keywordflow">return</span> n;
<a name="l00132"></a>00132 }
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 <span class="comment">// Append all items in &quot;src&quot; to the &quot;dest&quot; descriptor, duplicating src items &quot;multiplier&quot; times</span>
<a name="l00135"></a>00135 <span class="comment">// and adding the &quot;offset&quot; to item indexes. Also merge pe_voisins_ lists.</span>
<a name="l00136"></a><a class="code" href="MD__Vector__composite_8cpp.html#a05d172002feef212a242c060bbdf3831">00136</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="MD__Vector__composite_8cpp.html#a05d172002feef212a242c060bbdf3831">append_global_md</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>&amp; dest, <span class="keyword">const</span> <a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>&amp; src, <span class="keywordtype">int</span> offset, <span class="keywordtype">int</span> multiplier)
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138 <span class="comment">// List sizes for items_to_send_, items_to_recv_ and blocs_to_recv_ of new descriptor</span>
<a name="l00139"></a>00139   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> x_sz, y_sz, z_sz;
<a name="l00140"></a>00140 <span class="comment">// Data of these lists:</span>
<a name="l00141"></a>00141   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> x_data, y_data, z_data;
<a name="l00142"></a>00142   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> new_blocs_items_count, new_nb_items_to_items;
<a name="l00143"></a>00143   x_sz.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00144"></a>00144   y_sz.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00145"></a>00145   z_sz.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00146"></a>00146   x_data.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00147"></a>00147   y_data.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00148"></a>00148   z_data.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00149"></a>00149   new_blocs_items_count.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00150"></a>00150   new_nb_items_to_items.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> tmp;
<a name="l00153"></a>00153   tmp.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> pe_list(dest.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>);
<a name="l00156"></a>00156   pe_list.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00157"></a>00157   <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(pe_list, src.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>);
<a name="l00158"></a>00158   <a class="code" href="Scatter_8cpp.html#a23c4d19dc90caae2323f04de90621709" title="Methode outil pour retirer les doublons dans un tableau.">array_trier_retirer_doublons</a>(pe_list);
<a name="l00159"></a>00159   <span class="keyword">const</span> <span class="keywordtype">int</span> np = pe_list.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   new_blocs_items_count.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(np);
<a name="l00162"></a>00162   new_nb_items_to_items.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(np);
<a name="l00163"></a>00163 
<a name="l00164"></a>00164   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; np; i++)
<a name="l00165"></a>00165     {
<a name="l00166"></a>00166 <span class="comment">// Number of items to recv, send and blocs to recv for this processor:</span>
<a name="l00167"></a>00167       <span class="keywordtype">int</span> nx = 0, ny = 0, nz = 0;
<a name="l00168"></a>00168       <span class="keywordtype">int</span> blocs_count = 0;
<a name="l00169"></a>00169 <span class="comment">// Is processor pe_list[i] in initial &quot;dest&quot; descriptor ?</span>
<a name="l00170"></a>00170       <span class="keywordtype">int</span> j;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172       <span class="keywordflow">for</span> (j = dest.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>()-1; j &gt;= 0; j--)
<a name="l00173"></a>00173         <span class="keywordflow">if</span> (dest.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>[j] == pe_list[i])
<a name="l00174"></a>00174           <span class="keywordflow">break</span>;
<a name="l00175"></a>00175       <span class="keyword">const</span> <span class="keywordtype">int</span> pe = pe_list[i];
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <span class="comment">// Insert items to send and items to recv from dest</span>
<a name="l00178"></a>00178       j = <a class="code" href="MD__Vector__composite_8cpp.html#a73491edb66b362194723171e52f1c71a" title="returns i such that a[i]==x, or -1 if x is not found">find_in_array</a>(dest.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>, pe);
<a name="l00179"></a>00179       <span class="keywordflow">if</span> (j &gt;= 0)
<a name="l00180"></a>00180         {
<a name="l00181"></a>00181           <span class="keyword">const</span> <span class="keywordtype">int</span> count_items_single = dest.<a class="code" href="classMD__Vector__std.html#afd0c291718e3bc9846c8a06420efeb69">nb_items_to_items_</a>[j];
<a name="l00182"></a>00182           nx += count_items_single;
<a name="l00183"></a>00183 <span class="comment">// take only single items to send</span>
<a name="l00184"></a>00184           tmp.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
<a name="l00185"></a>00185           tmp.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(count_items_single);
<a name="l00186"></a>00186           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; count_items_single; k++)
<a name="l00187"></a>00187             tmp[k] = dest.<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>(j, k);
<a name="l00188"></a>00188           <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(x_data, tmp);
<a name="l00189"></a>00189 
<a name="l00190"></a>00190           ny += dest.<a class="code" href="classMD__Vector__std.html#a8d6c4c5d6da6fe56e8330253137d412f">items_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(j);
<a name="l00191"></a>00191           dest.<a class="code" href="classMD__Vector__std.html#a8d6c4c5d6da6fe56e8330253137d412f">items_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#ac5f80aca1def83653c95221f391b916d" title="copie la i-ieme liste dans le tableau fourni Le tableau array doit etre resizable.">copy_list_to_array</a>(j, tmp);
<a name="l00192"></a>00192           <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(y_data, tmp);
<a name="l00193"></a>00193         }
<a name="l00194"></a>00194 
<a name="l00195"></a>00195 <span class="comment">// Insert items to send and items to recv from src, with multiplier</span>
<a name="l00196"></a>00196       j = <a class="code" href="MD__Vector__composite_8cpp.html#a73491edb66b362194723171e52f1c71a" title="returns i such that a[i]==x, or -1 if x is not found">find_in_array</a>(src.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>, pe);
<a name="l00197"></a>00197       <span class="keywordflow">if</span> (j &gt;= 0)
<a name="l00198"></a>00198         {
<a name="l00199"></a>00199           <span class="keyword">const</span> <span class="keywordtype">int</span> count_items_single = src.<a class="code" href="classMD__Vector__std.html#afd0c291718e3bc9846c8a06420efeb69">nb_items_to_items_</a>[j];
<a name="l00200"></a>00200           nx += count_items_single * multiplier;
<a name="l00201"></a>00201 <span class="comment">// take only single items to send</span>
<a name="l00202"></a>00202           tmp.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
<a name="l00203"></a>00203           tmp.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(count_items_single);
<a name="l00204"></a>00204           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; count_items_single; k++)
<a name="l00205"></a>00205             tmp[k] = src.<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>(j, k);
<a name="l00206"></a>00206           <a class="code" href="MD__Vector__composite_8cpp.html#acbdccbb8ee4ac3835a1f8738e3680f40">append_items</a>(x_data, tmp, offset, multiplier);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208           ny += src.<a class="code" href="classMD__Vector__std.html#a8d6c4c5d6da6fe56e8330253137d412f">items_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(j) * multiplier;
<a name="l00209"></a>00209           src.<a class="code" href="classMD__Vector__std.html#a8d6c4c5d6da6fe56e8330253137d412f">items_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#ac5f80aca1def83653c95221f391b916d" title="copie la i-ieme liste dans le tableau fourni Le tableau array doit etre resizable.">copy_list_to_array</a>(j, tmp);
<a name="l00210"></a>00210           <a class="code" href="MD__Vector__composite_8cpp.html#acbdccbb8ee4ac3835a1f8738e3680f40">append_items</a>(y_data, tmp, offset, multiplier);
<a name="l00211"></a>00211         }
<a name="l00212"></a>00212       <span class="keyword">const</span> <span class="keywordtype">int</span> single_items_count = nx;
<a name="l00213"></a>00213 <span class="comment">// Insert blocs to send and blocs to recv from dest</span>
<a name="l00214"></a>00214       j = <a class="code" href="MD__Vector__composite_8cpp.html#a73491edb66b362194723171e52f1c71a" title="returns i such that a[i]==x, or -1 if x is not found">find_in_array</a>(dest.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>, pe);
<a name="l00215"></a>00215       <span class="keywordflow">if</span> (j &gt;= 0)
<a name="l00216"></a>00216         {
<a name="l00217"></a>00217           <span class="keyword">const</span> <span class="keywordtype">int</span> count_items_tot = dest.<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(j);
<a name="l00218"></a>00218           <span class="keyword">const</span> <span class="keywordtype">int</span> count_items_single = dest.<a class="code" href="classMD__Vector__std.html#afd0c291718e3bc9846c8a06420efeb69">nb_items_to_items_</a>[j];
<a name="l00219"></a>00219           nx += count_items_tot - count_items_single;
<a name="l00220"></a>00220           tmp.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
<a name="l00221"></a>00221           tmp.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(count_items_tot - count_items_single);
<a name="l00222"></a>00222           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = count_items_single; k &lt; count_items_tot; k++)
<a name="l00223"></a>00223             tmp[k - count_items_single] = dest.<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>(j, k);
<a name="l00224"></a>00224           <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(x_data, tmp);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226           nz += dest.<a class="code" href="classMD__Vector__std.html#ae266bd552dcb9f817c791a1c7342a6b0">blocs_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(j);
<a name="l00227"></a>00227           dest.<a class="code" href="classMD__Vector__std.html#ae266bd552dcb9f817c791a1c7342a6b0">blocs_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#ac5f80aca1def83653c95221f391b916d" title="copie la i-ieme liste dans le tableau fourni Le tableau array doit etre resizable.">copy_list_to_array</a>(j, tmp);
<a name="l00228"></a>00228           <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(z_data, tmp);
<a name="l00229"></a>00229 
<a name="l00230"></a>00230           blocs_count += dest.<a class="code" href="classMD__Vector__std.html#a4aa5e80e0b975026cc201fbdee72956c">blocs_items_count_</a>[j];
<a name="l00231"></a>00231         }
<a name="l00232"></a>00232 <span class="comment">// Insert blocs to send and blocs to recv from src, with multiplier</span>
<a name="l00233"></a>00233       j = <a class="code" href="MD__Vector__composite_8cpp.html#a73491edb66b362194723171e52f1c71a" title="returns i such that a[i]==x, or -1 if x is not found">find_in_array</a>(src.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>, pe);
<a name="l00234"></a>00234       <span class="keywordflow">if</span> (j &gt;= 0)
<a name="l00235"></a>00235         {
<a name="l00236"></a>00236           <span class="keyword">const</span> <span class="keywordtype">int</span> count_items_tot = src.<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(j);
<a name="l00237"></a>00237           <span class="keyword">const</span> <span class="keywordtype">int</span> count_items_single = src.<a class="code" href="classMD__Vector__std.html#afd0c291718e3bc9846c8a06420efeb69">nb_items_to_items_</a>[j];
<a name="l00238"></a>00238           nx += (count_items_tot - count_items_single) * multiplier;
<a name="l00239"></a>00239           tmp.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
<a name="l00240"></a>00240           tmp.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(count_items_tot - count_items_single);
<a name="l00241"></a>00241           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = count_items_single; k &lt; count_items_tot; k++)
<a name="l00242"></a>00242             tmp[k - count_items_single] = src.<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>(j, k);
<a name="l00243"></a>00243           <a class="code" href="MD__Vector__composite_8cpp.html#acbdccbb8ee4ac3835a1f8738e3680f40">append_items</a>(x_data, tmp, offset, multiplier);
<a name="l00244"></a>00244 
<a name="l00245"></a>00245           nz += src.<a class="code" href="classMD__Vector__std.html#ae266bd552dcb9f817c791a1c7342a6b0">blocs_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(j);
<a name="l00246"></a>00246           src.<a class="code" href="classMD__Vector__std.html#ae266bd552dcb9f817c791a1c7342a6b0">blocs_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#ac5f80aca1def83653c95221f391b916d" title="copie la i-ieme liste dans le tableau fourni Le tableau array doit etre resizable.">copy_list_to_array</a>(j, tmp);
<a name="l00247"></a>00247           <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(z_data, tmp, offset, multiplier);
<a name="l00248"></a>00248 
<a name="l00249"></a>00249           blocs_count += src.<a class="code" href="classMD__Vector__std.html#a4aa5e80e0b975026cc201fbdee72956c">blocs_items_count_</a>[j] * multiplier;
<a name="l00250"></a>00250         }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252       x_sz.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(nx);
<a name="l00253"></a>00253       y_sz.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(ny);
<a name="l00254"></a>00254       z_sz.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(nz);
<a name="l00255"></a>00255       new_blocs_items_count[i] = blocs_count;
<a name="l00256"></a>00256       new_nb_items_to_items[i] = single_items_count;
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259   dest.<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>.<a class="code" href="classStatic__Int__Lists.html#a60da63cb1970f5b87d1e1fdf6d65dcb2" title="detruit les listes existantes et en cree de nouvelles. On cree autant de listes que d&#39;elements dans l...">set_list_sizes</a>(x_sz);
<a name="l00260"></a>00260   dest.<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>.<a class="code" href="classStatic__Int__Lists.html#a23ecdbce2325f5493fcc7be9331b67c1" title="remplace les valeurs stockes par toutes les listes par celles du tableau data. data doit avoir pour t...">set_data</a>(x_data);
<a name="l00261"></a>00261   dest.<a class="code" href="classMD__Vector__std.html#a8d6c4c5d6da6fe56e8330253137d412f">items_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#a60da63cb1970f5b87d1e1fdf6d65dcb2" title="detruit les listes existantes et en cree de nouvelles. On cree autant de listes que d&#39;elements dans l...">set_list_sizes</a>(y_sz);
<a name="l00262"></a>00262   dest.<a class="code" href="classMD__Vector__std.html#a8d6c4c5d6da6fe56e8330253137d412f">items_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#a23ecdbce2325f5493fcc7be9331b67c1" title="remplace les valeurs stockes par toutes les listes par celles du tableau data. data doit avoir pour t...">set_data</a>(y_data);
<a name="l00263"></a>00263   dest.<a class="code" href="classMD__Vector__std.html#ae266bd552dcb9f817c791a1c7342a6b0">blocs_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#a60da63cb1970f5b87d1e1fdf6d65dcb2" title="detruit les listes existantes et en cree de nouvelles. On cree autant de listes que d&#39;elements dans l...">set_list_sizes</a>(z_sz);
<a name="l00264"></a>00264   dest.<a class="code" href="classMD__Vector__std.html#ae266bd552dcb9f817c791a1c7342a6b0">blocs_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#a23ecdbce2325f5493fcc7be9331b67c1" title="remplace les valeurs stockes par toutes les listes par celles du tableau data. data doit avoir pour t...">set_data</a>(z_data);
<a name="l00265"></a>00265   dest.<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a> = pe_list;
<a name="l00266"></a>00266   dest.<a class="code" href="classMD__Vector__std.html#a4aa5e80e0b975026cc201fbdee72956c">blocs_items_count_</a> = new_blocs_items_count;
<a name="l00267"></a>00267   dest.<a class="code" href="classMD__Vector__std.html#afd0c291718e3bc9846c8a06420efeb69">nb_items_to_items_</a> = new_nb_items_to_items;
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="comment">//</span>
<a name="l00271"></a>00271 <span class="comment">//</span>
<a name="l00272"></a>00272 <span class="comment">//</span>
<a name="l00273"></a>00273 <span class="comment">//</span>
<a name="l00274"></a>00274 <span class="comment">//</span>
<a name="l00275"></a>00275 <span class="comment">//</span>
<a name="l00276"></a>00276 <span class="comment">//</span>
<a name="l00277"></a>00277 <span class="comment">//</span>
<a name="l00278"></a>00278 <span class="comment">//</span>
<a name="l00279"></a>00279 <span class="comment">//</span>
<a name="l00280"></a>00280 <span class="comment">//</span>
<a name="l00281"></a>00281 <span class="comment">//</span>
<a name="l00282"></a>00282 <span class="comment">//</span>
<a name="l00283"></a>00283 <span class="comment">//</span>
<a name="l00284"></a>00284 <span class="comment">//</span>
<a name="l00285"></a>00285 <span class="comment">//</span>
<a name="l00286"></a>00286 <span class="comment">//</span>
<a name="l00287"></a>00287 <span class="comment">//</span>
<a name="l00288"></a>00288 <span class="comment">//</span>
<a name="l00289"></a>00289 <span class="comment">//</span>
<a name="l00290"></a>00290 <span class="comment">//</span>
<a name="l00291"></a>00291 <span class="comment">//</span>
<a name="l00292"></a>00292 <span class="comment">//</span>
<a name="l00293"></a>00293 <span class="comment">//</span>
<a name="l00294"></a>00294 <span class="comment">//</span>
<a name="l00295"></a>00295 <span class="comment">//</span>
<a name="l00296"></a>00296 <span class="comment">//</span>
<a name="l00297"></a>00297 <span class="comment">//</span>
<a name="l00298"></a>00298 <span class="comment">//</span>
<a name="l00299"></a>00299 <span class="comment">//</span>
<a name="l00300"></a>00300 <span class="comment">//</span>
<a name="l00301"></a>00301 <span class="comment">//</span>
<a name="l00302"></a>00302 <span class="comment">//</span>
<a name="l00303"></a>00303 <span class="comment">//</span>
<a name="l00304"></a>00304 <span class="comment">//</span>
<a name="l00305"></a>00305 <span class="comment">//</span><span class="comment"></span>
<a name="l00306"></a>00306 <span class="comment">//! Append the &quot;part&quot; descriptor to the composite vector.&lt;br&gt;By default, shape=0 says that for each item in &quot;part&quot;, one item will&lt;br&gt;be appended to the composite descriptor.&lt;br&gt;If shape=n, each items in &quot;part&quot; will be duplicated n times in the&lt;br&gt;composite descriptor.&lt;br&gt;The difference between 0 and 1 is when we create parts with DoubleTab_parts&lt;br&gt;(see class DoubleTab_parts)&lt;br&gt;Exemples:&lt;br&gt;1) P1Bubble pressure fields have one, two or three parts with shape=1.&lt;br&gt;(see Zone_VEF_PreP1b::discretiser_suite())&lt;br&gt;2) One can create a composite field containing&lt;br&gt;- velocity degrees of freedom at the faces&lt;br&gt;- pressure d.o.f. at the elements&lt;br&gt;- one multiscalar d.o.f at nodes&lt;br&gt;MD_Vector_composite mdc;&lt;br&gt;mdc.add_part(zonevf.md_vector_faces(), dimension);&lt;br&gt;mdc.add_part(zone.md_vector_elements(), 0 /* scalar */);&lt;br&gt;mdc.add_part(domaine.md_vector_sommets(), 1 /* multiscalar with 1 component */);&lt;br&gt;MD_Vector md;&lt;br&gt;md.copy(mdc);&lt;br&gt;I will create a DoubleVect of this form by attaching this descriptor:&lt;br&gt;DoubleVect v;&lt;br&gt;MD_Vector_tools::creer_tableau_distribue(md, v);&lt;br&gt;DoubleTab_Parts parts(v);&lt;br&gt;// parts[0] has nb_dim()==2, dimensions are [ zonevf.nb_faces_tot, 3 ]&lt;br&gt;// parts[1] has nb_dim()==1, dimension [ zone.nb_elem_tot ] /* speciel case shape==0 */&lt;br&gt;// parts[2] has nb_dim()==2, dimension [ domaine.nb_som_tot, 1 ]&lt;br&gt;I can duplicate items in the descriptor by creating DoubleTab objects:&lt;br&gt;The following code will create an array containing 12 d.o.f for each face&lt;br&gt;followed by 4 d.o.f for each element and 4 d.o.f for each node:&lt;br&gt;DoubleTab tab(0, 4);&lt;br&gt;MD_Vector_tools::creer_tableau_distribue(md, tab);&lt;br&gt;DoubleTab_Parts parts(tab);&lt;br&gt;// parts[0] has nb_dim()==3, dimensions are [ zonevf.nb_faces_tot, 3, 4 ]&lt;br&gt;// parts[1] has nb_dim()==2, dimension [ zone.nb_elem_tot, 4 ] /* speciel case shape==0 */&lt;br&gt;// parts[2] has nb_dim()==3, dimension [ domaine.nb_som_tot, 1, 4 ]</span>
<a name="l00307"></a><a class="code" href="classMD__Vector__composite.html#aef7b99d29af74b1eea8b7b414614e63f">00307</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classMD__Vector__composite.html#aef7b99d29af74b1eea8b7b414614e63f" title="Append the &quot;part&quot; descriptor to the composite vector. By default, shape=0 says that for each item in ...">MD_Vector_composite::add_part</a>(<span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; part, <span class="keywordtype">int</span> shape)
<a name="l00308"></a>00308 {
<a name="l00309"></a>00309   assert(part.<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>());
<a name="l00310"></a>00310   assert(shape &gt;= 0);
<a name="l00311"></a>00311   <span class="keywordflow">if</span> (<a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>.<a class="code" href="classVect__MD__Vector.html#af5aaad6ccea0d8d0ecb0ff5c6a2f50ee">size</a>() == 0)
<a name="l00312"></a>00312     {
<a name="l00313"></a>00313       <a class="code" href="classMD__Vector__base2.html#ae222cd70f0be4da64d0aa7fcd89df0f4">nb_items_tot_</a> = 0;
<a name="l00314"></a>00314       <a class="code" href="classMD__Vector__base2.html#a7cf9dbd94db6c0ba49e87681d207aef0">nb_items_seq_tot_</a> = 0;
<a name="l00315"></a>00315       <a class="code" href="classMD__Vector__base2.html#a2bb5e578b35a03544342e963d2adec35">nb_items_seq_local_</a> = 0;
<a name="l00316"></a>00316     }
<a name="l00317"></a>00317   <span class="keyword">const</span> <span class="keywordtype">int</span> multiplier = (shape == 0) ? 1 : shape;
<a name="l00318"></a>00318   <a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>.<a class="code" href="classVect__MD__Vector.html#a91e4477aed5f6bf0a98b9d1b5c60a23d">add</a>(part);
<a name="l00319"></a>00319   <span class="keyword">const</span> <span class="keywordtype">int</span> offset = <a class="code" href="classMD__Vector__base2.html#ae222cd70f0be4da64d0aa7fcd89df0f4">nb_items_tot_</a>;
<a name="l00320"></a>00320   <a class="code" href="classMD__Vector__composite.html#a89577c0a030806e9aa6bd7d4095e55e6">parts_offsets_</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00321"></a>00321   <a class="code" href="classMD__Vector__composite.html#a89577c0a030806e9aa6bd7d4095e55e6">parts_offsets_</a>.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(offset);
<a name="l00322"></a>00322   <a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00323"></a>00323   <a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(shape);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325   <a class="code" href="classMD__Vector__base2.html#ae222cd70f0be4da64d0aa7fcd89df0f4">nb_items_tot_</a> += part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">get_nb_items_tot</a>() * multiplier;
<a name="l00326"></a>00326   <span class="keywordflow">if</span> (<a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>.<a class="code" href="classVect__MD__Vector.html#af5aaad6ccea0d8d0ecb0ff5c6a2f50ee">size</a>() &gt; 1 || part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#ade0ef13d456f8aa11d02f51fd7912145">get_nb_items_reels</a>() &lt; 0)
<a name="l00327"></a>00327     <a class="code" href="classMD__Vector__base2.html#a87c423fabd116249cb1dab31887193c9">nb_items_reels_</a> = -1; <span class="comment">//!&lt; size() will be invalid for arrays with this descriptor</span>
<a name="l00328"></a>00328 <span class="comment"></span>  <span class="keywordflow">else</span>
<a name="l00329"></a>00329     <a class="code" href="classMD__Vector__base2.html#a87c423fabd116249cb1dab31887193c9">nb_items_reels_</a> = part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#ade0ef13d456f8aa11d02f51fd7912145">get_nb_items_reels</a>() * multiplier;
<a name="l00330"></a>00330   <a class="code" href="classMD__Vector__base2.html#a7cf9dbd94db6c0ba49e87681d207aef0">nb_items_seq_tot_</a> += part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>() * multiplier;
<a name="l00331"></a>00331   <a class="code" href="classMD__Vector__base2.html#a2bb5e578b35a03544342e963d2adec35">nb_items_seq_local_</a> += part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#af69fca22ab9e37e4e2e72ac4a5143b90">nb_items_seq_local</a>() * multiplier;
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(<a class="code" href="classMD__Vector__base2.html#afb3898aebe081ff8c87759822946ece7">blocs_items_to_sum_</a>, part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a7f6b6d0b7babfec0cce590cdea5bca53">get_items_to_sum</a>(), offset, multiplier);
<a name="l00334"></a>00334   <a class="code" href="MD__Vector__composite_8cpp.html#a8cd201daaf90b592db8baa421be9e205">append_blocs</a>(<a class="code" href="classMD__Vector__base2.html#ac19dad1f73b786033a9911cbfe3ae440">blocs_items_to_compute_</a>, part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a99334ac2566d9457c8d4890ba20883ea">get_items_to_compute</a>(), offset, multiplier);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>()))
<a name="l00337"></a>00337     <a class="code" href="MD__Vector__composite_8cpp.html#a05d172002feef212a242c060bbdf3831">append_global_md</a>(<a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>, <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>()), offset, multiplier);
<a name="l00338"></a>00338   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(MD_Vector_composite, part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>()))
<a name="l00339"></a>00339     {
<a name="l00340"></a>00340       <a class="code" href="MD__Vector__composite_8cpp.html#a05d172002feef212a242c060bbdf3831">append_global_md</a>(<a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>, <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(MD_Vector_composite, part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>()).<a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>, offset, multiplier);
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342   <span class="keywordflow">else</span>
<a name="l00343"></a>00343     {
<a name="l00344"></a>00344       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in MD_Vector_composite::add_part: unknown part type &quot;</span> &lt;&lt; part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00345"></a>00345       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00346"></a>00346     }
<a name="l00347"></a>00347 }
<a name="l00348"></a>00348 
<a name="l00349"></a><a class="code" href="classMD__Vector__composite.html#ad4e7f35289c3590181325be2b60c0b54">00349</a> <span class="keywordtype">void</span> <a class="code" href="classMD__Vector__composite.html#ad4e7f35289c3590181325be2b60c0b54">MD_Vector_composite::initialize_comm</a>(<span class="keyword">const</span> <a class="code" href="classEchange__EV__Options.html">Echange_EV_Options</a>&amp; opt, <a class="code" href="classSchema__Comm__Vecteurs.html" title="Classe outil utilisee notamment par les methodes MD_Vector::echange_espace_virtuel() Permet d&#39;echange...">Schema_Comm_Vecteurs</a>&amp; <a class="code" href="MD__Vector__tools_8cpp.html#aff39c4429f5c1b24eb7ac0848f154ffc">comm</a>, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; v)<span class="keyword"> const</span>
<a name="l00350"></a>00350 <span class="keyword"></span>{
<a name="l00351"></a>00351   <a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>.<a class="code" href="classMD__Vector__std.html#a9de1051fcb6626d3578660d2c1ab503a">initialize_comm</a>(opt, comm, v);
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 
<a name="l00354"></a><a class="code" href="classMD__Vector__composite.html#a9a4f39cf20ef8024830d1a705b9b5b1c">00354</a> <span class="keywordtype">void</span> <a class="code" href="classMD__Vector__composite.html#a9a4f39cf20ef8024830d1a705b9b5b1c">MD_Vector_composite::prepare_send_data</a>(<span class="keyword">const</span> <a class="code" href="classEchange__EV__Options.html">Echange_EV_Options</a>&amp; opt, <a class="code" href="classSchema__Comm__Vecteurs.html" title="Classe outil utilisee notamment par les methodes MD_Vector::echange_espace_virtuel() Permet d&#39;echange...">Schema_Comm_Vecteurs</a>&amp; <a class="code" href="MD__Vector__tools_8cpp.html#aff39c4429f5c1b24eb7ac0848f154ffc">comm</a>, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; v)<span class="keyword"> const</span>
<a name="l00355"></a>00355 <span class="keyword"></span>{
<a name="l00356"></a>00356   <a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>.<a class="code" href="classMD__Vector__std.html#ada966d7ecd5433dd05d7d7d4c97ee298" title="This is the first part of the echange_espace_virtuel() process. We take the data that has to be sent ...">prepare_send_data</a>(opt, comm, v);
<a name="l00357"></a>00357 }
<a name="l00358"></a>00358 
<a name="l00359"></a><a class="code" href="classMD__Vector__composite.html#abe7851c6ccea8c56dcc6b10d18194433">00359</a> <span class="keywordtype">void</span> <a class="code" href="classMD__Vector__composite.html#abe7851c6ccea8c56dcc6b10d18194433">MD_Vector_composite::process_recv_data</a>(<span class="keyword">const</span> <a class="code" href="classEchange__EV__Options.html">Echange_EV_Options</a>&amp; opt, <a class="code" href="classSchema__Comm__Vecteurs.html" title="Classe outil utilisee notamment par les methodes MD_Vector::echange_espace_virtuel() Permet d&#39;echange...">Schema_Comm_Vecteurs</a>&amp; <a class="code" href="MD__Vector__tools_8cpp.html#aff39c4429f5c1b24eb7ac0848f154ffc">comm</a>, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; v)<span class="keyword"> const</span>
<a name="l00360"></a>00360 <span class="keyword"></span>{
<a name="l00361"></a>00361   <a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>.<a class="code" href="classMD__Vector__std.html#aac76e0b9c999dde47168e2a1060508d1">process_recv_data</a>(opt, comm, v);
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 
<a name="l00365"></a><a class="code" href="classMD__Vector__composite.html#ad5af42de3d1520a2b80a7567a3db7099">00365</a> <span class="keywordtype">void</span> <a class="code" href="classMD__Vector__composite.html#ad4e7f35289c3590181325be2b60c0b54">MD_Vector_composite::initialize_comm</a>(<span class="keyword">const</span> <a class="code" href="classEchange__EV__Options.html">Echange_EV_Options</a>&amp; opt, <a class="code" href="classSchema__Comm__Vecteurs.html" title="Classe outil utilisee notamment par les methodes MD_Vector::echange_espace_virtuel() Permet d&#39;echange...">Schema_Comm_Vecteurs</a>&amp; <a class="code" href="MD__Vector__tools_8cpp.html#aff39c4429f5c1b24eb7ac0848f154ffc">comm</a>, <a class="code" href="classIntVect.html">IntVect</a>&amp; v)<span class="keyword"> const</span>
<a name="l00366"></a>00366 <span class="keyword"></span>{
<a name="l00367"></a>00367   <a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>.<a class="code" href="classMD__Vector__std.html#a9de1051fcb6626d3578660d2c1ab503a">initialize_comm</a>(opt, comm, v);
<a name="l00368"></a>00368 }
<a name="l00369"></a>00369 
<a name="l00370"></a><a class="code" href="classMD__Vector__composite.html#acea5c6fea6b5dcb307e85bd9602fc328">00370</a> <span class="keywordtype">void</span> <a class="code" href="classMD__Vector__composite.html#a9a4f39cf20ef8024830d1a705b9b5b1c">MD_Vector_composite::prepare_send_data</a>(<span class="keyword">const</span> <a class="code" href="classEchange__EV__Options.html">Echange_EV_Options</a>&amp; opt, <a class="code" href="classSchema__Comm__Vecteurs.html" title="Classe outil utilisee notamment par les methodes MD_Vector::echange_espace_virtuel() Permet d&#39;echange...">Schema_Comm_Vecteurs</a>&amp; <a class="code" href="MD__Vector__tools_8cpp.html#aff39c4429f5c1b24eb7ac0848f154ffc">comm</a>, <a class="code" href="classIntVect.html">IntVect</a>&amp; v)<span class="keyword"> const</span>
<a name="l00371"></a>00371 <span class="keyword"></span>{
<a name="l00372"></a>00372   <a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>.<a class="code" href="classMD__Vector__std.html#ada966d7ecd5433dd05d7d7d4c97ee298" title="This is the first part of the echange_espace_virtuel() process. We take the data that has to be sent ...">prepare_send_data</a>(opt, comm, v);
<a name="l00373"></a>00373 }
<a name="l00374"></a>00374 
<a name="l00375"></a><a class="code" href="classMD__Vector__composite.html#af067e06b14007707ea8451491495aeee">00375</a> <span class="keywordtype">void</span> <a class="code" href="classMD__Vector__composite.html#abe7851c6ccea8c56dcc6b10d18194433">MD_Vector_composite::process_recv_data</a>(<span class="keyword">const</span> <a class="code" href="classEchange__EV__Options.html">Echange_EV_Options</a>&amp; opt, <a class="code" href="classSchema__Comm__Vecteurs.html" title="Classe outil utilisee notamment par les methodes MD_Vector::echange_espace_virtuel() Permet d&#39;echange...">Schema_Comm_Vecteurs</a>&amp; <a class="code" href="MD__Vector__tools_8cpp.html#aff39c4429f5c1b24eb7ac0848f154ffc">comm</a>, <a class="code" href="classIntVect.html">IntVect</a>&amp; v)<span class="keyword"> const</span>
<a name="l00376"></a>00376 <span class="keyword"></span>{
<a name="l00377"></a>00377   <a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>.<a class="code" href="classMD__Vector__std.html#aac76e0b9c999dde47168e2a1060508d1">process_recv_data</a>(opt, comm, v);
<a name="l00378"></a>00378 }
<a name="l00379"></a>00379 
<a name="l00380"></a>00380 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:23 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
