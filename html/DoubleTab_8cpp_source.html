<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Math/DoubleTab.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Math/DoubleTab.cpp</div>  </div>
</div>
<div class="contents">
<a href="DoubleTab_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        DoubleTab.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Math</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/10</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 <span class="comment">// </span>
<a name="l00023"></a>00023 <span class="comment">// WARNING: DO NOT EDIT THIS FILE! Only edit the template file DoubleTab.cpp.P</span>
<a name="l00024"></a>00024 <span class="comment">// </span>
<a name="l00025"></a>00025 <span class="comment">// </span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTab_8h.html">DoubleTab.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="MD__Vector__base_8h.html">MD_Vector_base.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Ref__DoubleTab_8h.html">Ref_DoubleTab.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTabs_8h.html">DoubleTabs.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="DoubleTab_8cpp.html#ac861d75f1be32a806265f9791759367a">00033</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>, <span class="stringliteral">&quot;DoubleTab&quot;</span>,<a class="code" href="classDoubleVect.html">DoubleVect</a>);
<a name="l00034"></a><a class="code" href="DoubleTab_8cpp.html#ab34e3f085dac05061d8b9c33586da8b3">00034</a> <a class="code" href="MacRef_8h.html#a67b571ae2caa2f388a7d532cf57553fe">Implemente_ref</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>);
<a name="l00035"></a><a class="code" href="DoubleTab_8cpp.html#a488bfd273441da7a07e35cb8608c3b06">00035</a> <a class="code" href="MacVect_8h.html#a0c9b693e7e6836489732c32b7a972a03">Implemente_vect</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>);
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="comment">// Verifie la coherence entre size_array(), line_size() et les dimensions du tableau</span>
<a name="l00038"></a>00038 <span class="preprocessor">#if MAXDIM_TAB != 4</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#error Mettre a jour le code pour MAXDIM_TAB pour CHECK_LINE_SIZE</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00041"></a><a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define CHECK_LINE_SIZE                                                        \</span>
<a name="l00042"></a>00042 <span class="preprocessor">  ((line_size() == ((nb_dim_&gt;1)?dimensions_[1]:1)*((nb_dim_&gt;2)?dimensions_[2]:1)*((nb_dim_&gt;3)?dimensions_[3]:1)) \</span>
<a name="l00043"></a>00043 <span class="preprocessor">   &amp;&amp; (line_size() * dimension_tot_0_ == size_array()))</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 <span class="comment">//</span>
<a name="l00046"></a>00046 <span class="comment">//</span><span class="comment"></span>
<a name="l00047"></a>00047 <span class="comment">//! ecriture d&#39;un tableau sequentiel&lt;br&gt;(idem que DoubleVect::printOn() on ne sait pas quoi faire de pertinent&lt;br&gt;pour un tableau distribue).</span>
<a name="l00048"></a><a class="code" href="classDoubleTab.html#a024bd0f6105546e1f4eef2eeae3d19a9">00048</a> <span class="comment"></span><a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classDoubleTab.html#a024bd0f6105546e1f4eef2eeae3d19a9" title="ecriture d&#39;un tableau sequentiel (idem que DoubleVect::printOn() on ne sait pas quoi faire de pertine...">DoubleTab::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00049"></a>00049 <span class="keyword"></span>{
<a name="l00050"></a>00050   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00051"></a>00051   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">nproc</a>() &gt; 1 &amp;&amp; <a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().non_nul())
<a name="l00052"></a>00052     {
<a name="l00053"></a>00053       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in DoubleTab::printOn: try to print a parallel vector&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00054"></a>00054       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00055"></a>00055     }
<a name="l00056"></a>00056   os &lt;&lt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00057"></a>00057   assert(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] == <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a>);
<a name="l00058"></a>00058   <span class="keywordflow">if</span> (<a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> &gt; 0)
<a name="l00059"></a>00059     os.<a class="code" href="classSortie.html#aa3f46aaccaff0f83c018784b50d8ea24" title="Methode de bas niveau pour ecrire un tableau d&#39;ints ou reels dans le stream. Dans l&#39;implementation de...">put</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>, <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>, <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>);
<a name="l00060"></a>00060 
<a name="l00061"></a>00061   <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00062"></a>00062   os &lt;&lt; sz &lt;&lt; finl;
<a name="l00063"></a>00063   <span class="keyword">const</span> <span class="keywordtype">int</span> l_size = <a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00064"></a>00064   <span class="keyword">const</span> <span class="keywordtype">double</span> *data = <a class="code" href="classArrOfDouble.html#a95357a1390c11dbd481d385257f2e983" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>();
<a name="l00065"></a>00065   <span class="keywordflow">if</span> (sz &gt; 0)
<a name="l00066"></a>00066     os.<a class="code" href="classSortie.html#aa3f46aaccaff0f83c018784b50d8ea24" title="Methode de bas niveau pour ecrire un tableau d&#39;ints ou reels dans le stream. Dans l&#39;implementation de...">put</a>(data, sz, l_size);
<a name="l00067"></a>00067   <span class="keywordflow">return</span> os;
<a name="l00068"></a>00068 }
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="comment">// Precondition: le md_vector_ doit etre nul.</span><span class="comment"></span>
<a name="l00071"></a>00071 <span class="comment">//! lecture d&#39;un tableau sequentiel</span>
<a name="l00072"></a><a class="code" href="classDoubleTab.html#a30d8f252c4e82b758e84d4d68a7938c3">00072</a> <span class="comment"></span><a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classDoubleTab.html#a30d8f252c4e82b758e84d4d68a7938c3" title="lecture d&#39;un tableau sequentiel">DoubleTab::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074   <span class="keywordflow">if</span> (<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().non_nul())
<a name="l00075"></a>00075     {
<a name="l00076"></a>00076 <span class="comment">// Que veut-on faire si on lit dans un vecteur ayant deja une structure parallele ?</span>
<a name="l00077"></a>00077       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in DoubleTab::readOn: vector has a parallel structure&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00078"></a>00078       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00079"></a>00079     }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   is &gt;&gt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>;
<a name="l00082"></a>00082   <span class="keywordflow">if</span> (nb_dim_ &lt; 1 || nb_dim_ &gt; <a class="code" href="DoubleTab_8h.html#a33188f2eb375dc4641b3e51d55e65efe">MAXDIM_TAB</a>)
<a name="l00083"></a>00083     {
<a name="l00084"></a>00084       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in DoubleTab::readOn: wrong nb_dim_ = &quot;</span> &lt;&lt; nb_dim_ &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00085"></a>00085       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087   is.<a class="code" href="classEntree.html#aa434f5ceb8169e469613d1f6cd1fd99f" title="methode virtuelle pour lire un tableau d&#39;ints ou reels&lt;br&gt;(le tableau doit avoir la bonne dimension: ...">get</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>, nb_dim_);
<a name="l00088"></a>00088   <span class="keywordflow">if</span> (<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] &lt; 0)
<a name="l00089"></a>00089     {
<a name="l00090"></a>00090       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in DoubleTab::readOn: wrong dimension(0) = &quot;</span> &lt;&lt; <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00091"></a>00091       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093   <span class="keywordtype">int</span> l_size = 1;
<a name="l00094"></a>00094   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>; i++)
<a name="l00095"></a>00095     {
<a name="l00096"></a>00096       <span class="keywordflow">if</span> (<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i] &lt; 0)
<a name="l00097"></a>00097         {
<a name="l00098"></a>00098           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in DoubleTab::readOn: wrong dimension(&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;) = &quot;</span> &lt;&lt; <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i] &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00099"></a>00099           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00100"></a>00100         }
<a name="l00101"></a>00101       l_size *= <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i];
<a name="l00102"></a>00102     }
<a name="l00103"></a>00103   <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0];
<a name="l00104"></a>00104   <a class="code" href="classDoubleTab.html#a30d8f252c4e82b758e84d4d68a7938c3" title="lecture d&#39;un tableau sequentiel">DoubleVect::readOn</a>(is);
<a name="l00105"></a>00105   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(l_size);
<a name="l00106"></a>00106   <span class="keywordflow">if</span> (<a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> * l_size != <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>())
<a name="l00107"></a>00107     {
<a name="l00108"></a>00108       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in DoubleTab::readOn: wrong size_array &quot;</span> &lt;&lt; <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>()
<a name="l00109"></a>00109            &lt;&lt; <span class="stringliteral">&quot;, expected &quot;</span> &lt;&lt; <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> * l_size &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00110"></a>00110       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00111"></a>00111     }
<a name="l00112"></a>00112   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00113"></a>00113   <span class="keywordflow">return</span> is;
<a name="l00114"></a>00114 }
<a name="l00115"></a>00115 
<a name="l00116"></a><a class="code" href="DoubleTab_8cpp.html#a24dbd61e80deb07a91a34f41026bc5a1">00116</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="DoubleTab_8cpp.html#a24dbd61e80deb07a91a34f41026bc5a1">init_dimensions</a>(<span class="keywordtype">int</span> * tab)
<a name="l00117"></a>00117 {
<a name="l00118"></a>00118 <span class="preprocessor">#ifndef NDEBUG</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="DoubleTab_8h.html#a33188f2eb375dc4641b3e51d55e65efe">MAXDIM_TAB</a>; i++)
<a name="l00120"></a>00120     tab[i] = -1;
<a name="l00121"></a>00121 <span class="preprocessor">#endif</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>}
<a name="l00123"></a>00123 
<a name="l00124"></a><a class="code" href="classDoubleTab.html#a69cc38358e18ac22e433b9a1d00f376c">00124</a> <a class="code" href="classDoubleTab.html#a69cc38358e18ac22e433b9a1d00f376c">DoubleTab::DoubleTab</a>() :
<a name="l00125"></a>00125   nb_dim_(1), dimension_tot_0_(0)
<a name="l00126"></a>00126 {
<a name="l00127"></a>00127   <a class="code" href="DoubleTab_8cpp.html#a24dbd61e80deb07a91a34f41026bc5a1">init_dimensions</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>);
<a name="l00128"></a>00128   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = 0;
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="classDoubleTab.html#af5592d4b1f3589d244deef2e13e496d5">00131</a> <a class="code" href="classDoubleTab.html#a69cc38358e18ac22e433b9a1d00f376c">DoubleTab::DoubleTab</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; dbt) :
<a name="l00132"></a>00132   <a class="code" href="classDoubleVect.html">DoubleVect</a>(dbt),
<a name="l00133"></a>00133   nb_dim_(dbt.nb_dim_),
<a name="l00134"></a>00134   dimension_tot_0_(dbt.dimension_tot_0_)
<a name="l00135"></a>00135 {
<a name="l00136"></a>00136   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="DoubleTab_8h.html#a33188f2eb375dc4641b3e51d55e65efe">MAXDIM_TAB</a>; i++)
<a name="l00137"></a>00137     <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i] = dbt.<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i];
<a name="l00138"></a>00138 }
<a name="l00139"></a><a class="code" href="DoubleTab_8cpp.html#a5adc94eddb7b51839bce186f964b0c63">00139</a> <span class="preprocessor">#define PARAM_X</span>
<a name="l00140"></a><a class="code" href="DoubleTab_8cpp.html#a7ac110386e72148c479a2534414ed3e6">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define PARAM_X2</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>
<a name="l00142"></a><a class="code" href="classDoubleTab.html#a5329c8953915991379fe0d12621610f1">00142</a> <a class="code" href="classDoubleTab.html#a69cc38358e18ac22e433b9a1d00f376c">DoubleTab::DoubleTab</a>(<span class="keywordtype">int</span> n <a class="code" href="DoubleTab_8cpp.html#a5adc94eddb7b51839bce186f964b0c63">PARAM_X</a>)
<a name="l00143"></a>00143   : <a class="code" href="classDoubleVect.html">DoubleVect</a>(n <a class="code" href="DoubleTab_8cpp.html#a7ac110386e72148c479a2534414ed3e6">PARAM_X2</a>),
<a name="l00144"></a>00144     nb_dim_(1),
<a name="l00145"></a>00145     dimension_tot_0_(n)
<a name="l00146"></a>00146 {
<a name="l00147"></a>00147   <a class="code" href="DoubleTab_8cpp.html#a24dbd61e80deb07a91a34f41026bc5a1">init_dimensions</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>);
<a name="l00148"></a>00148   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = n;
<a name="l00149"></a>00149 }
<a name="l00150"></a>00150 
<a name="l00151"></a><a class="code" href="classDoubleTab.html#a43184a11da9d420efd9c17f3b0dfc3fe">00151</a> <a class="code" href="classDoubleTab.html#a69cc38358e18ac22e433b9a1d00f376c">DoubleTab::DoubleTab</a>(<span class="keywordtype">int</span> n1, <span class="keywordtype">int</span> n2 <a class="code" href="DoubleTab_8cpp.html#a5adc94eddb7b51839bce186f964b0c63">PARAM_X</a>)
<a name="l00152"></a>00152   : <a class="code" href="classDoubleVect.html">DoubleVect</a>(n1*n2 <a class="code" href="DoubleTab_8cpp.html#a7ac110386e72148c479a2534414ed3e6">PARAM_X2</a>),
<a name="l00153"></a>00153     nb_dim_(2),
<a name="l00154"></a>00154     dimension_tot_0_(n1)
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156   assert(n1 &gt;= 0 &amp;&amp; n2 &gt;= 0);
<a name="l00157"></a>00157   <a class="code" href="DoubleTab_8cpp.html#a24dbd61e80deb07a91a34f41026bc5a1">init_dimensions</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>);
<a name="l00158"></a>00158   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0]=n1;
<a name="l00159"></a>00159   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1]=n2;
<a name="l00160"></a>00160   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(n2);
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 <span class="preprocessor">#ifdef INT_is_64_</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span><a class="code" href="classDoubleTab.html#a69cc38358e18ac22e433b9a1d00f376c">DoubleTab::DoubleTab</a>(<span class="keywordtype">int</span> n1, <a class="code" href="arch_8h.html#a1caaf369d9c5f0817dbaa76b43b8d87b">True_int</a> n2 <a class="code" href="DoubleTab_8cpp.html#a5adc94eddb7b51839bce186f964b0c63">PARAM_X</a>)
<a name="l00164"></a>00164   : <a class="code" href="classDoubleVect.html">DoubleVect</a>(n1*n2 <a class="code" href="DoubleTab_8cpp.html#a7ac110386e72148c479a2534414ed3e6">PARAM_X2</a>),
<a name="l00165"></a>00165     nb_dim_(2),
<a name="l00166"></a>00166     dimension_tot_0_(n1)
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168   assert(n1 &gt;= 0 &amp;&amp; n2 &gt;= 0);
<a name="l00169"></a>00169   <a class="code" href="DoubleTab_8cpp.html#a24dbd61e80deb07a91a34f41026bc5a1">init_dimensions</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>);
<a name="l00170"></a>00170   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0]=n1;
<a name="l00171"></a>00171   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1]=n2;
<a name="l00172"></a>00172   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(n2);
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 <span class="preprocessor">#endif</span>
<a name="l00175"></a>00175 <span class="preprocessor"></span>
<a name="l00176"></a><a class="code" href="classDoubleTab.html#a8a4e9f34f5390fffc4b80cb322be9777">00176</a> <a class="code" href="classDoubleTab.html#a69cc38358e18ac22e433b9a1d00f376c">DoubleTab::DoubleTab</a>(<span class="keywordtype">int</span> n1, <span class="keywordtype">int</span> n2, <span class="keywordtype">int</span> n3 <a class="code" href="DoubleTab_8cpp.html#a5adc94eddb7b51839bce186f964b0c63">PARAM_X</a>)
<a name="l00177"></a>00177   : <a class="code" href="classDoubleVect.html">DoubleVect</a>(n1*n2*n3 <a class="code" href="DoubleTab_8cpp.html#a7ac110386e72148c479a2534414ed3e6">PARAM_X2</a>),
<a name="l00178"></a>00178     nb_dim_(3),
<a name="l00179"></a>00179     dimension_tot_0_(n1)
<a name="l00180"></a>00180 {
<a name="l00181"></a>00181   assert(n1 &gt;= 0 &amp;&amp; n2 &gt;= 0 &amp;&amp; n3 &gt;= 0);
<a name="l00182"></a>00182   <a class="code" href="DoubleTab_8cpp.html#a24dbd61e80deb07a91a34f41026bc5a1">init_dimensions</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>);
<a name="l00183"></a>00183   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0]=n1;
<a name="l00184"></a>00184   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1]=n2;
<a name="l00185"></a>00185   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[2]=n3;
<a name="l00186"></a>00186   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(n2*n3);
<a name="l00187"></a>00187 }
<a name="l00188"></a>00188 
<a name="l00189"></a><a class="code" href="classDoubleTab.html#af53f30c23e94f18ad08f0f52ca3a7b9d">00189</a> <a class="code" href="classDoubleTab.html#a69cc38358e18ac22e433b9a1d00f376c">DoubleTab::DoubleTab</a>(<span class="keywordtype">int</span> n1, <span class="keywordtype">int</span> n2, <span class="keywordtype">int</span> n3, <span class="keywordtype">int</span> n4 <a class="code" href="DoubleTab_8cpp.html#a5adc94eddb7b51839bce186f964b0c63">PARAM_X</a>)
<a name="l00190"></a>00190   : <a class="code" href="classDoubleVect.html">DoubleVect</a>(n1*n2*n3*n4 <a class="code" href="DoubleTab_8cpp.html#a7ac110386e72148c479a2534414ed3e6">PARAM_X2</a>),
<a name="l00191"></a>00191     nb_dim_(4),
<a name="l00192"></a>00192     dimension_tot_0_(n1)
<a name="l00193"></a>00193 {
<a name="l00194"></a>00194   assert(n1 &gt;= 0 &amp;&amp; n2 &gt;= 0 &amp;&amp; n3 &gt;= 0 &amp;&amp; n4 &gt;= 0);
<a name="l00195"></a>00195   <a class="code" href="DoubleTab_8cpp.html#a24dbd61e80deb07a91a34f41026bc5a1">init_dimensions</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>);
<a name="l00196"></a>00196   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0]=n1;
<a name="l00197"></a>00197   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1]=n2;
<a name="l00198"></a>00198   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[2]=n3;
<a name="l00199"></a>00199   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[3]=n4;
<a name="l00200"></a>00200   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(n2*n3*n4);
<a name="l00201"></a>00201 }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="comment">// Precondition: le vecteur v doit vraiment etre de type Vect !</span>
<a name="l00204"></a>00204 <span class="comment">// (sinon utiliser DoubleTab::ref(const DoubleTab &amp;)</span>
<a name="l00205"></a>00205 <span class="comment">//</span>
<a name="l00206"></a>00206 <span class="comment">//</span>
<a name="l00207"></a>00207 <span class="comment">//</span>
<a name="l00208"></a>00208 <span class="comment">//</span>
<a name="l00209"></a>00209 <span class="comment">//</span><span class="comment"></span>
<a name="l00210"></a>00210 <span class="comment">//! fait pointer le tableau sur le vecteur v et en associant&lt;br&gt;la meme structure parallele.&lt;br&gt;Attention, si line_size du vecteur v est different de 1,&lt;br&gt;on cree un tableau bidimensionnel (on peut avoir un vecteur&lt;br&gt;de ce type si on copie un Tab dans un Vect puis on prend&lt;br&gt;une ref sur ce Vect).</span>
<a name="l00211"></a><a class="code" href="classDoubleTab.html#afc7cddeeec2c80636e54eaf330ac41ad">00211</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#afc7cddeeec2c80636e54eaf330ac41ad" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">DoubleTab::ref</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; v)
<a name="l00212"></a>00212 {
<a name="l00213"></a>00213   assert(v.<a class="code" href="classDoubleVect.html#a530ac863a73858ff1254f70de10b6348" title="Donne des informations sur le type de l&#39;Objet_U.">get_info</a>() == <a class="code" href="classDoubleTab.html#a76c632079308b096de27f09a3f56543a" title="Donne des informations sur le type de l&#39;Objet_U.">DoubleVect::info</a>());
<a name="l00214"></a>00214   <a class="code" href="classDoubleTab.html#afc7cddeeec2c80636e54eaf330ac41ad" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">DoubleVect::ref</a>(v);
<a name="l00215"></a>00215   <span class="keyword">const</span> <span class="keywordtype">int</span> l = v.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00216"></a>00216 <span class="comment">// Attention:</span>
<a name="l00217"></a>00217 <span class="comment">// En prenant la ref, on est oblige de conserver l&#39;attribut line_size</span>
<a name="l00218"></a>00218 <span class="comment">// du Vect (sinon echange_espace_virtuel ne fonctionnera pas car</span>
<a name="l00219"></a>00219 <span class="comment">// on n&#39;aura pas le bon facteur multiplicatif des items geometriques)</span>
<a name="l00220"></a>00220 <span class="comment">// Si on voulait creer un tableau monodimensionnel avec line_size &gt; 1,</span>
<a name="l00221"></a>00221 <span class="comment">// le tableau devient invalide car on n&#39;a plus line_size = produit des</span>
<a name="l00222"></a>00222 <span class="comment">// dimensions &gt; 1.</span>
<a name="l00223"></a>00223 <span class="comment">// On peut le faire a condition de laisser tomber le md_vector_ en</span>
<a name="l00224"></a>00224 <span class="comment">// faisant  tab.ref_array(v) au lieu de  tab.ref(v)</span>
<a name="l00225"></a>00225   <span class="keywordflow">if</span> (l == 1)
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227       <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 1;
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229   <span class="keywordflow">else</span>
<a name="l00230"></a>00230     {
<a name="l00231"></a>00231       <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 2;
<a name="l00232"></a>00232       <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1] = l;
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234   <span class="keywordflow">if</span> (v.<a class="code" href="classDoubleVect.html#aafef4b3a96cdc428d62c5cedc9af6112">size_reelle_ok</a>())
<a name="l00235"></a>00235     {
<a name="l00236"></a>00236       <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = v.<a class="code" href="classDoubleVect.html#a4a6987db458541cdcd10495955f25263" title="Taille de l&#39;espace &quot;reel&quot; du vecteur. (si md_vector_ est nul, cette valeur est identique a size_arr...">size_reelle</a>();
<a name="l00237"></a>00237       <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = sz / l;
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239   <span class="keywordflow">else</span>
<a name="l00240"></a>00240     {
<a name="l00241"></a>00241       <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = -1;
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243   <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() / l;
<a name="l00244"></a>00244   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00245"></a>00245 }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="comment">//</span>
<a name="l00248"></a>00248 <span class="comment">//</span><span class="comment"></span>
<a name="l00249"></a>00249 <span class="comment">//! fait pointer le tableau sur le tableau t&lt;br&gt;en recuperant la structure parallele. Attention,&lt;br&gt;on fige le tableau qui ne pourra plus etre resize</span>
<a name="l00250"></a><a class="code" href="classDoubleTab.html#aab93c08077bfe4826ded0ec115da3636">00250</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#afc7cddeeec2c80636e54eaf330ac41ad" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">DoubleTab::ref</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; src)
<a name="l00251"></a>00251 {
<a name="l00252"></a>00252   <a class="code" href="classDoubleTab.html#afc7cddeeec2c80636e54eaf330ac41ad" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">DoubleVect::ref</a>(src);
<a name="l00253"></a>00253   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = src.<a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>;
<a name="l00254"></a>00254   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="DoubleTab_8h.html#a33188f2eb375dc4641b3e51d55e65efe">MAXDIM_TAB</a>; i++)
<a name="l00255"></a>00255     <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i] = src.<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i];
<a name="l00256"></a>00256   <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = src.<a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a>;
<a name="l00257"></a>00257   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 <span class="comment"></span>
<a name="l00260"></a>00260 <span class="comment">//! identique a DoubleVect::ref_data()</span>
<a name="l00261"></a><a class="code" href="classDoubleTab.html#a76e24eeb9502bdae0b4bdfe3d54e5c04">00261</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#a76e24eeb9502bdae0b4bdfe3d54e5c04" title="identique a DoubleVect::ref_data()">DoubleTab::ref_data</a>(<span class="keywordtype">double</span>* ptr, <span class="keywordtype">int</span> new_size)
<a name="l00262"></a>00262 {
<a name="l00263"></a>00263   <a class="code" href="classDoubleTab.html#a76e24eeb9502bdae0b4bdfe3d54e5c04" title="identique a DoubleVect::ref_data()">DoubleVect::ref_data</a>(ptr, new_size);
<a name="l00264"></a>00264   assert(!<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().non_nul() &amp;&amp; <a class="code" href="classDoubleVect.html#a4a6987db458541cdcd10495955f25263" title="Taille de l&#39;espace &quot;reel&quot; du vecteur. (si md_vector_ est nul, cette valeur est identique a size_arr...">size_reelle</a>() == <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
<a name="l00265"></a>00265   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 1;
<a name="l00266"></a>00266   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = new_size;
<a name="l00267"></a>00267   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="comment">//</span>
<a name="l00271"></a>00271 <span class="comment">//</span>
<a name="l00272"></a>00272 <span class="comment">//</span><span class="comment"></span>
<a name="l00273"></a>00273 <span class="comment">//! identique a DoubleVect::ref_array()&lt;br&gt;(cree un tableau monodimensionnel sans structure parallele)&lt;br&gt;Attention, le tableau source et destination sont figes (resize interdit)&lt;br&gt;(voir ArrOfDouble::</span>
<a name="l00274"></a><a class="code" href="classDoubleTab.html#a8eb99ddb58266d6f9d6e149c6f8c6a1f">00274</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#a8eb99ddb58266d6f9d6e149c6f8c6a1f" title="identique a DoubleVect::ref_array() (cree un tableau monodimensionnel sans structure parallele) Atten...">DoubleTab::ref_array</a>(<a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; src, <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a>)
<a name="l00275"></a>00275 {
<a name="l00276"></a>00276   <a class="code" href="classDoubleTab.html#a8eb99ddb58266d6f9d6e149c6f8c6a1f" title="identique a DoubleVect::ref_array() (cree un tableau monodimensionnel sans structure parallele) Atten...">DoubleVect::ref_array</a>(src, start, sz);
<a name="l00277"></a>00277   assert(!<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().non_nul() &amp;&amp; <a class="code" href="classDoubleVect.html#a4a6987db458541cdcd10495955f25263" title="Taille de l&#39;espace &quot;reel&quot; du vecteur. (si md_vector_ est nul, cette valeur est identique a size_arr...">size_reelle</a>() == <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
<a name="l00278"></a>00278   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 1;
<a name="l00279"></a>00279   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(); <span class="comment">//!&lt; pas sz qui peut valoir -1</span>
<a name="l00280"></a>00280 <span class="comment"></span>  assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00281"></a>00281 }
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="comment">//</span>
<a name="l00284"></a>00284 <span class="comment">//</span>
<a name="l00285"></a>00285 <span class="comment">//</span>
<a name="l00286"></a>00286 <span class="comment">//</span><span class="comment"></span>
<a name="l00287"></a>00287 <span class="comment">//! fait pointer le tableau sur une sous-partie du tableau t&lt;br&gt;definie par la valeur du premier indice et ne nombre de &quot;lignes&quot; du tableau&lt;br&gt;a recuperer (une ligne = toutes les valeurs tab(i,j,k,...) pour un i donne).&lt;br&gt;Le nombre de dimensions du tableau est le meme que pour t,&lt;br&gt;les dimension(i) pour i&gt;=1 sont les memes et dimension(0) = nb_lines.</span>
<a name="l00288"></a><a class="code" href="classDoubleTab.html#a536f48755469662c7701aad79a4df6f9">00288</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#a536f48755469662c7701aad79a4df6f9" title="fait pointer le tableau sur une sous-partie du tableau t definie par la valeur du premier indice et n...">DoubleTab::ref_tab</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; t, <span class="keywordtype">int</span> start_line, <span class="keywordtype">int</span> nb_lines)
<a name="l00289"></a>00289 {
<a name="l00290"></a>00290   <span class="keywordflow">if</span> (nb_lines &lt; 0)
<a name="l00291"></a>00291     nb_lines = t.<a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> - start_line;
<a name="l00292"></a>00292   assert(start_line &gt;= 0 &amp;&amp; nb_lines &gt;= 0 &amp;&amp; start_line + nb_lines &lt;= t.<a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a>);
<a name="l00293"></a>00293   <span class="keyword">const</span> <span class="keywordtype">int</span> l_size = t.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00294"></a>00294   <a class="code" href="classDoubleTab.html#a8eb99ddb58266d6f9d6e149c6f8c6a1f" title="identique a DoubleVect::ref_array() (cree un tableau monodimensionnel sans structure parallele) Atten...">DoubleVect::ref_array</a>(t, start_line * l_size, nb_lines * l_size);
<a name="l00295"></a>00295   assert(!<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().non_nul() &amp;&amp; <a class="code" href="classDoubleVect.html#a4a6987db458541cdcd10495955f25263" title="Taille de l&#39;espace &quot;reel&quot; du vecteur. (si md_vector_ est nul, cette valeur est identique a size_arr...">size_reelle</a>() == <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
<a name="l00296"></a>00296   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(l_size);
<a name="l00297"></a>00297   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = t.<a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>;
<a name="l00298"></a>00298   <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = nb_lines;
<a name="l00299"></a>00299   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = nb_lines;
<a name="l00300"></a>00300   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; <a class="code" href="DoubleTab_8h.html#a33188f2eb375dc4641b3e51d55e65efe">MAXDIM_TAB</a>; i++)
<a name="l00301"></a>00301     <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i] = t.<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i];
<a name="l00302"></a>00302   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00303"></a>00303 }
<a name="l00304"></a>00304 
<a name="l00305"></a>00305 <span class="comment">//</span><span class="comment"></span>
<a name="l00306"></a>00306 <span class="comment">//! met le tableau dans l&#39;etat obtenu par le constructeur par defaut&lt;br&gt;voir DoubleVect::reset()</span>
<a name="l00307"></a><a class="code" href="classDoubleTab.html#acb465ae8c9b24990db18002693b42dea">00307</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#acb465ae8c9b24990db18002693b42dea" title="met le tableau dans l&#39;etat obtenu par le constructeur par defaut voir DoubleVect::reset()">DoubleTab::reset</a>()
<a name="l00308"></a>00308 {
<a name="l00309"></a>00309   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 1;
<a name="l00310"></a>00310   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = 0;
<a name="l00311"></a>00311   <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = 0;
<a name="l00312"></a>00312   <a class="code" href="classDoubleTab.html#acb465ae8c9b24990db18002693b42dea" title="met le tableau dans l&#39;etat obtenu par le constructeur par defaut voir DoubleVect::reset()">DoubleVect::reset</a>();
<a name="l00313"></a>00313   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00314"></a>00314 }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="comment">//</span><span class="comment"></span>
<a name="l00317"></a>00317 <span class="comment">//! methode virtuelle qui force le tableau a changer de taille.&lt;br&gt;Change aussi nb_dim_ a 1. Equivalent a DoubleTab::resize(n, opt)</span>
<a name="l00318"></a><a class="code" href="classDoubleTab.html#ae19eb47302f3d2fd69f9cd72090dec7c">00318</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#ae19eb47302f3d2fd69f9cd72090dec7c" title="methode virtuelle qui force le tableau a changer de taille. Change aussi nb_dim_ a 1...">DoubleTab::resize_tab</a>(<span class="keywordtype">int</span> n, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt)
<a name="l00319"></a>00319 {
<a name="l00320"></a>00320   <a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(n, opt);
<a name="l00321"></a>00321   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00322"></a>00322 }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 <span class="comment">// Precondition: le tableau ne doit pas avoir de structure parallele</span><span class="comment"></span>
<a name="l00325"></a>00325 <span class="comment">//! change la dimension[0] du tableau en conservant les autres.</span>
<a name="l00326"></a><a class="code" href="classDoubleTab.html#a1ca69b1feff0be950fa01c9d19fe861b">00326</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#a1ca69b1feff0be950fa01c9d19fe861b" title="change la dimension[0] du tableau en conservant les autres.">DoubleTab::resize_dim0</a>(<span class="keywordtype">int</span> n, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt)
<a name="l00327"></a>00327 {
<a name="l00328"></a>00328   assert(n &gt;= 0);
<a name="l00329"></a>00329   assert(<a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> * <a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() == <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
<a name="l00330"></a>00330   <a class="code" href="classDoubleVect.html#aac98871b9388a96a3f988efa1e0e1eb9" title="Methode interne de resize (appellee par DoubleTab::resize(...)) sans precondition sur le type de l&#39;ob...">DoubleVect::resize_vect_</a>(n * <a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>(), opt);
<a name="l00331"></a>00331   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = n;
<a name="l00332"></a>00332   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00335"></a><a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75">00335</a> <span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">DoubleTab::resize</a>(<span class="keywordtype">int</span> n, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt)
<a name="l00336"></a>00336 {
<a name="l00337"></a>00337   assert(n &gt;= 0);
<a name="l00338"></a>00338   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(1);
<a name="l00339"></a>00339   <a class="code" href="classDoubleVect.html#aac98871b9388a96a3f988efa1e0e1eb9" title="Methode interne de resize (appellee par DoubleTab::resize(...)) sans precondition sur le type de l&#39;ob...">DoubleVect::resize_vect_</a>(n, opt);
<a name="l00340"></a>00340   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 1;
<a name="l00341"></a>00341   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = n;
<a name="l00342"></a>00342   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="classDoubleTab.html#a0ecf4f07b33533e8878b8f9cb84e15dd">00345</a> <span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">DoubleTab::resize</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> n2, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt)
<a name="l00346"></a>00346 {
<a name="l00347"></a>00347   assert(n &gt;= 0 &amp;&amp; n2 &gt;= 0);
<a name="l00348"></a>00348   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(n2);
<a name="l00349"></a>00349   <span class="keywordtype">int</span> new_size = n * n2;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <a class="code" href="classDoubleVect.html#aac98871b9388a96a3f988efa1e0e1eb9" title="Methode interne de resize (appellee par DoubleTab::resize(...)) sans precondition sur le type de l&#39;ob...">DoubleVect::resize_vect_</a>(new_size, opt);
<a name="l00352"></a>00352   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 2;
<a name="l00353"></a>00353   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = n;
<a name="l00354"></a>00354   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1] = n2;
<a name="l00355"></a>00355   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00356"></a>00356 }
<a name="l00357"></a>00357 
<a name="l00358"></a><a class="code" href="classDoubleTab.html#a100b151a28c531aa45e3f10556e70b92">00358</a> <span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">DoubleTab::resize</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> n2, <span class="keywordtype">int</span> n3, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt)
<a name="l00359"></a>00359 {
<a name="l00360"></a>00360   assert(n &gt;= 0 &amp;&amp; n2 &gt;= 0 &amp;&amp; n3 &gt;= 0);
<a name="l00361"></a>00361   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(n2 * n3);
<a name="l00362"></a>00362   <span class="keywordtype">int</span> new_size = n * n2 * n3;
<a name="l00363"></a>00363 
<a name="l00364"></a>00364   <a class="code" href="classDoubleVect.html#aac98871b9388a96a3f988efa1e0e1eb9" title="Methode interne de resize (appellee par DoubleTab::resize(...)) sans precondition sur le type de l&#39;ob...">DoubleVect::resize_vect_</a>(new_size, opt);
<a name="l00365"></a>00365   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 3;
<a name="l00366"></a>00366   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = n;
<a name="l00367"></a>00367   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1] = n2;
<a name="l00368"></a>00368   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[2] = n3;
<a name="l00369"></a>00369   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a><a class="code" href="classDoubleTab.html#a58dfc1edeb2ed203ec468ba0584b1feb">00372</a> <span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">DoubleTab::resize</a>(<span class="keywordtype">int</span> n, <span class="keywordtype">int</span> n2, <span class="keywordtype">int</span> n3, <span class="keywordtype">int</span> n4, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt)
<a name="l00373"></a>00373 {
<a name="l00374"></a>00374   assert(n &gt;= 0 &amp;&amp; n2 &gt;= 0 &amp;&amp; n3 &gt;= 0 &amp;&amp; n4 &gt;= 0);
<a name="l00375"></a>00375   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(n2 * n3 * n4);
<a name="l00376"></a>00376   <span class="keywordtype">int</span> new_size = n * n2 * n3 * n4;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378   <a class="code" href="classDoubleVect.html#aac98871b9388a96a3f988efa1e0e1eb9" title="Methode interne de resize (appellee par DoubleTab::resize(...)) sans precondition sur le type de l&#39;ob...">DoubleVect::resize_vect_</a>(new_size, opt);
<a name="l00379"></a>00379   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 4;
<a name="l00380"></a>00380   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = n;
<a name="l00381"></a>00381   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1] = n2;
<a name="l00382"></a>00382   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[2] = n3;
<a name="l00383"></a>00383   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[3] = n4;
<a name="l00384"></a>00384   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00385"></a>00385 }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387 <span class="comment">// Precondition: identiques a DoubleVect::resize_vect_()</span>
<a name="l00388"></a>00388 <span class="comment">//</span><span class="comment"></span>
<a name="l00389"></a>00389 <span class="comment">//! redimensionne le tableau (nb_dim_ sera egal a tailles.size_array()&lt;br&gt;et dimension(i) a tailles[i].</span>
<a name="l00390"></a><a class="code" href="classDoubleTab.html#a6d458273cfd42789544368fd503ffe46">00390</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">DoubleTab::resize</a>(<span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; tailles, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt)
<a name="l00391"></a>00391 {
<a name="l00392"></a>00392   <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = tailles.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00393"></a>00393   <span class="keywordflow">if</span> (nb_dim_ &lt;= 0 || nb_dim_ &gt; <a class="code" href="DoubleTab_8h.html#a33188f2eb375dc4641b3e51d55e65efe">MAXDIM_TAB</a>)
<a name="l00394"></a>00394     {
<a name="l00395"></a>00395       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in DoubleTab::resize(const ArrOfInt &amp; tailles, ...) \n&quot;</span>
<a name="l00396"></a>00396            &lt;&lt; <span class="stringliteral">&quot; wrong dimensions number &quot;</span> &lt;&lt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00397"></a>00397       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399   <span class="keywordtype">int</span> l_size = 1;
<a name="l00400"></a>00400   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>; i++)
<a name="l00401"></a>00401     {
<a name="l00402"></a>00402       <span class="keyword">const</span> <span class="keywordtype">int</span> n = tailles[i];
<a name="l00403"></a>00403       <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i] = n;
<a name="l00404"></a>00404       <span class="keywordflow">if</span> (i &gt; 0)
<a name="l00405"></a>00405         l_size *= n;
<a name="l00406"></a>00406       <span class="keywordflow">if</span> (n &lt; 0)
<a name="l00407"></a>00407         {
<a name="l00408"></a>00408           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in DoubleTab::resize(const ArrOfInt &amp; tailles, ...) \n&quot;</span>
<a name="l00409"></a>00409                &lt;&lt; <span class="stringliteral">&quot; wrong dimensions: &quot;</span> &lt;&lt; tailles &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00410"></a>00410           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00411"></a>00411         }
<a name="l00412"></a>00412     }
<a name="l00413"></a>00413   <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0];
<a name="l00414"></a>00414   <a class="code" href="classDoubleVect.html#aa7dcb248baf55d3d36b3241ace2c78a5" title="change l&#39;attribut line_size_ du tableau avec n &gt;= 1 n == 0 est autorise uniquement si size_array_ == ...">set_line_size_</a>(l_size);
<a name="l00415"></a>00415   <a class="code" href="classDoubleVect.html#aac98871b9388a96a3f988efa1e0e1eb9" title="Methode interne de resize (appellee par DoubleTab::resize(...)) sans precondition sur le type de l&#39;ob...">resize_vect_</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] * l_size, opt);
<a name="l00416"></a>00416   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00417"></a>00417 }
<a name="l00418"></a>00418 
<a name="l00419"></a>00419 <span class="comment">//</span><span class="comment"></span>
<a name="l00420"></a>00420 <span class="comment">//! copie la structure et les valeurs du tableau src&lt;br&gt;Restrictions et preconditions identiques a DoubleVect::operator=(const DoubleVect \&amp; v)</span>
<a name="l00421"></a><a class="code" href="classDoubleTab.html#afbecd562fcfd2a71fef6b685869b5492">00421</a> <span class="comment"></span><a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classDoubleTab.html#afbecd562fcfd2a71fef6b685869b5492" title="copie la structure et les valeurs du tableau src Restrictions et preconditions identiques a DoubleVec...">DoubleTab::operator=</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; src)
<a name="l00422"></a>00422 {
<a name="l00423"></a>00423   <a class="code" href="classDoubleTab.html#aa4dd124734ab5d6cb7aa93a104c0868e">copy</a>(src);
<a name="l00424"></a>00424   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00425"></a>00425 }
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 <span class="comment">//</span>
<a name="l00428"></a>00428 <span class="comment">//</span><span class="comment"></span>
<a name="l00429"></a>00429 <span class="comment">//! copie la structure et les valeurs de src.&lt;br&gt;Attention: appel invalide si src est un type derive de Vect&lt;br&gt;(sinon quoi faire, un tableau unidimensionnel, ou une copie de la structure ?)</span>
<a name="l00430"></a><a class="code" href="classDoubleTab.html#ab5b862298e8744b72ee5ad4a109148cf">00430</a> <span class="comment"></span><a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classDoubleTab.html#afbecd562fcfd2a71fef6b685869b5492" title="copie la structure et les valeurs du tableau src Restrictions et preconditions identiques a DoubleVec...">DoubleTab::operator=</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; src)
<a name="l00431"></a>00431 {
<a name="l00432"></a>00432   assert(src.<a class="code" href="classDoubleVect.html#a530ac863a73858ff1254f70de10b6348" title="Donne des informations sur le type de l&#39;Objet_U.">get_info</a>() == <a class="code" href="classDoubleTab.html#a76c632079308b096de27f09a3f56543a" title="Donne des informations sur le type de l&#39;Objet_U.">DoubleVect::info</a>());
<a name="l00433"></a>00433   <a class="code" href="classDoubleVect.html#a02d4627cfaf3a58686a5dbfae22ee48b" title="methode protegee appelable depuis une classe derivee&lt;br&gt;(pas de precondition sur le type derive de *t...">DoubleVect::copy_</a>(src);
<a name="l00434"></a>00434 <span class="comment">// Idem que dans ref(DoubleVect) pour le nombre de dimensions du tableau cree</span>
<a name="l00435"></a>00435   <span class="keyword">const</span> <span class="keywordtype">int</span> l = src.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00436"></a>00436   <span class="keywordflow">if</span> (l == 1)
<a name="l00437"></a>00437     {
<a name="l00438"></a>00438       <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 1;
<a name="l00439"></a>00439     }
<a name="l00440"></a>00440   <span class="keywordflow">else</span>
<a name="l00441"></a>00441     {
<a name="l00442"></a>00442       <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = 2;
<a name="l00443"></a>00443       <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[1] = l;
<a name="l00444"></a>00444     }
<a name="l00445"></a>00445   <span class="keywordflow">if</span> (src.<a class="code" href="classDoubleVect.html#aafef4b3a96cdc428d62c5cedc9af6112">size_reelle_ok</a>())
<a name="l00446"></a>00446     {
<a name="l00447"></a>00447       <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = src.<a class="code" href="classDoubleVect.html#a4a6987db458541cdcd10495955f25263" title="Taille de l&#39;espace &quot;reel&quot; du vecteur. (si md_vector_ est nul, cette valeur est identique a size_arr...">size_reelle</a>();
<a name="l00448"></a>00448       <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = sz / l;
<a name="l00449"></a>00449       assert(sz % l == 0);
<a name="l00450"></a>00450     }
<a name="l00451"></a>00451   <span class="keywordflow">else</span>
<a name="l00452"></a>00452     {
<a name="l00453"></a>00453       <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = -1;
<a name="l00454"></a>00454     }
<a name="l00455"></a>00455   <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() / l;
<a name="l00456"></a>00456   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00457"></a>00457   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00460"></a><a class="code" href="classDoubleTab.html#a8f92a9aa9437716dbdd2d26e106e3f9a">00460</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classDoubleTab.html#afbecd562fcfd2a71fef6b685869b5492" title="copie la structure et les valeurs du tableau src Restrictions et preconditions identiques a DoubleVec...">DoubleTab::operator=</a>(<span class="keywordtype">double</span> d)
<a name="l00461"></a>00461 {
<a name="l00462"></a>00462   <a class="code" href="classDoubleTab.html#afbecd562fcfd2a71fef6b685869b5492" title="copie la structure et les valeurs du tableau src Restrictions et preconditions identiques a DoubleVec...">DoubleVect::operator=</a>(d);
<a name="l00463"></a>00463   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a><a class="code" href="classDoubleTab.html#aa4dd124734ab5d6cb7aa93a104c0868e">00466</a> <span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#aa4dd124734ab5d6cb7aa93a104c0868e">DoubleTab::copy</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; src, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt)
<a name="l00467"></a>00467 {
<a name="l00468"></a>00468   <span class="keywordflow">if</span> (&amp;src != <span class="keyword">this</span>)
<a name="l00469"></a>00469     {
<a name="l00470"></a>00470       <a class="code" href="classDoubleVect.html#a02d4627cfaf3a58686a5dbfae22ee48b" title="methode protegee appelable depuis une classe derivee&lt;br&gt;(pas de precondition sur le type derive de *t...">DoubleVect::copy_</a>(src, opt);
<a name="l00471"></a>00471       <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> = src.<a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>;
<a name="l00472"></a>00472       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="DoubleTab_8h.html#a33188f2eb375dc4641b3e51d55e65efe">MAXDIM_TAB</a>; i++)
<a name="l00473"></a>00473         <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i] = src.<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[i];
<a name="l00474"></a>00474       <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a> = src.<a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a>;
<a name="l00475"></a>00475       assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00476"></a>00476     }
<a name="l00477"></a>00477 }
<a name="l00478"></a>00478 
<a name="l00479"></a><a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">00479</a> <span class="keywordtype">double</span>&amp; <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">DoubleTab::operator()</a>(<span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; indice)
<a name="l00480"></a>00480 {
<a name="l00481"></a>00481   assert(indice.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() == <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>);
<a name="l00482"></a>00482 <span class="preprocessor">#if MAXDIM_TAB != 4</span>
<a name="l00483"></a>00483 <span class="preprocessor"></span><span class="preprocessor">#error Mettre a jour le code pour MAXDIM_TAB ici</span>
<a name="l00484"></a>00484 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span>  <span class="keywordflow">switch</span>(<a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>)
<a name="l00486"></a>00486     {
<a name="l00487"></a>00487     <span class="keywordflow">case</span> 1:
<a name="l00488"></a>00488       <span class="keywordflow">return</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">operator()</a>(indice[0]);
<a name="l00489"></a>00489     <span class="keywordflow">case</span> 2:
<a name="l00490"></a>00490       <span class="keywordflow">return</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">operator()</a>(indice[0], indice[1]);
<a name="l00491"></a>00491     <span class="keywordflow">case</span> 3:
<a name="l00492"></a>00492       <span class="keywordflow">return</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">operator()</a>(indice[0], indice[1], indice[2]);
<a name="l00493"></a>00493     <span class="keywordflow">default</span>:
<a name="l00494"></a>00494       <span class="keywordflow">return</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">operator()</a>(indice[0], indice[1], indice[2], indice[3]);
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496 }
<a name="l00497"></a><a class="code" href="classDoubleTab.html#a23fedf5c624eabb072dd838b8ae5f618">00497</a> <span class="keywordtype">double</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">DoubleTab::operator()</a>(<span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; indice)<span class="keyword"> const</span>
<a name="l00498"></a>00498 <span class="keyword"></span>{
<a name="l00499"></a>00499   assert(indice.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() == <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>);
<a name="l00500"></a>00500 <span class="preprocessor">#if MAXDIM_TAB != 4</span>
<a name="l00501"></a>00501 <span class="preprocessor"></span><span class="preprocessor">#error Mettre a jour le code pour MAXDIM_TAB ici</span>
<a name="l00502"></a>00502 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00503"></a>00503 <span class="preprocessor"></span>  <span class="keywordflow">switch</span>(<a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>)
<a name="l00504"></a>00504     {
<a name="l00505"></a>00505     <span class="keywordflow">case</span> 1:
<a name="l00506"></a>00506       <span class="keywordflow">return</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">operator()</a>(indice[0]);
<a name="l00507"></a>00507     <span class="keywordflow">case</span> 2:
<a name="l00508"></a>00508       <span class="keywordflow">return</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">operator()</a>(indice[0], indice[1]);
<a name="l00509"></a>00509     <span class="keywordflow">case</span> 3:
<a name="l00510"></a>00510       <span class="keywordflow">return</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">operator()</a>(indice[0], indice[1], indice[2]);
<a name="l00511"></a>00511     <span class="keywordflow">default</span>:
<a name="l00512"></a>00512       <span class="keywordflow">return</span> <a class="code" href="classDoubleTab.html#a7fc6e6c0d4474888a0cf2a1f292a86c1">operator()</a>(indice[0], indice[1], indice[2], indice[3]);
<a name="l00513"></a>00513     }
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516 <span class="comment">// Precondition: en plus des preconditions de DoubleVect::set_md_vector(),</span>
<a name="l00517"></a>00517 <span class="comment">// dimension_tot(0) doit etre egal a get_nb_items_tot() du md_vector.</span>
<a name="l00518"></a>00518 <span class="comment">//</span><span class="comment"></span>
<a name="l00519"></a>00519 <span class="comment">//! associe le md_vector au vecteur (voir DoubleVect::set_md_vector())&lt;br&gt;dimension(0) sera initialise a md_vector...get_nb_items_reels().</span>
<a name="l00520"></a><a class="code" href="classDoubleTab.html#a2f40241acb678b0dd0dac7ee4f421b1d">00520</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#a2f40241acb678b0dd0dac7ee4f421b1d" title="associe le md_vector au vecteur (voir DoubleVect::set_md_vector()) dimension(0) sera initialise a md_...">DoubleTab::set_md_vector</a>(<span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_vector)
<a name="l00521"></a>00521 {
<a name="l00522"></a>00522   <span class="keywordtype">int</span> dim0 = <a class="code" href="classDoubleTab.html#acfd7b3ebdbf6198fb9860c69390d40a6">dimension_tot_0_</a>;
<a name="l00523"></a>00523   <span class="keywordflow">if</span> (md_vector.<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
<a name="l00524"></a>00524     {
<a name="l00525"></a>00525 <span class="comment">// renvoie -1 si l&#39;appel et invalide:</span>
<a name="l00526"></a>00526       dim0 = md_vector.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#ade0ef13d456f8aa11d02f51fd7912145">get_nb_items_reels</a>();
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528   <a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>[0] = dim0;
<a name="l00529"></a>00529   assert(<a class="code" href="DoubleTab_8cpp.html#ab30be89988524fdb77a416a7754ea49d">CHECK_LINE_SIZE</a>);
<a name="l00530"></a>00530 <span class="comment">// a appeler meme pour un md_vector nul (pour remettre size_reelle_):</span>
<a name="l00531"></a>00531   <a class="code" href="classDoubleTab.html#a2f40241acb678b0dd0dac7ee4f421b1d" title="associe le md_vector au vecteur (voir DoubleVect::set_md_vector()) dimension(0) sera initialise a md_...">DoubleVect::set_md_vector</a>(md_vector);
<a name="l00532"></a>00532 }
<a name="l00533"></a>00533 
<a name="l00534"></a><a class="code" href="classDoubleTab.html#ab7588e94792cc0be3a3288573c44ca18">00534</a> <span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#ab7588e94792cc0be3a3288573c44ca18" title="ecriture des valeurs du tableau &quot;raw&quot; sans structure parallele">DoubleTab::ecrit</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00535"></a>00535 <span class="keyword"></span>{
<a name="l00536"></a>00536   os &lt;&lt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00537"></a>00537   <span class="keywordflow">if</span> (<a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a> &gt; 0)
<a name="l00538"></a>00538     os.<a class="code" href="classSortie.html#aa3f46aaccaff0f83c018784b50d8ea24" title="Methode de bas niveau pour ecrire un tableau d&#39;ints ou reels dans le stream. Dans l&#39;implementation de...">put</a>(<a class="code" href="classDoubleTab.html#a62caca75aea5bfa40b0083b1474f89a3">dimensions_</a>, <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>, <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>);
<a name="l00539"></a>00539   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> tmp(<a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>);
<a name="l00540"></a>00540   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>; i++)
<a name="l00541"></a>00541     tmp[i] = <a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(i);
<a name="l00542"></a>00542   os &lt;&lt; tmp;
<a name="l00543"></a>00543   <a class="code" href="classDoubleTab.html#ab7588e94792cc0be3a3288573c44ca18" title="ecriture des valeurs du tableau &quot;raw&quot; sans structure parallele">DoubleVect::ecrit</a>(os);
<a name="l00544"></a>00544 }
<a name="l00545"></a>00545 
<a name="l00546"></a><a class="code" href="classDoubleTab.html#a42e8df3c79572d0c8de4cbec08751e49">00546</a> <span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#a42e8df3c79572d0c8de4cbec08751e49">DoubleTab::jump</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00547"></a>00547 {
<a name="l00548"></a>00548   <a class="code" href="classDoubleTab.html#a1681f8fe1ff7b26219ab19c4315eb25c" title="lecture d&#39;un tableau pour reprise de calcul. On lit les valeurs &quot;raw&quot;. Attention, si le tableau n&#39;est pas vide, il doit deja avoir la bonne taille et la bonne structure, sinon erreur ! Parameter resize_and_read if the array is sized AND read (by default, yes)">DoubleTab::lit</a>(is, 0 <span class="comment">/* Do not resize&amp;read the array */</span>);
<a name="l00549"></a>00549 }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551 <span class="comment">//</span>
<a name="l00552"></a>00552 <span class="comment">//</span>
<a name="l00553"></a>00553 <span class="comment">//</span><span class="comment"></span>
<a name="l00554"></a>00554 <span class="comment">//! lecture d&#39;un tableau pour reprise de calcul. On lit les valeurs &quot;raw&quot;.&lt;br&gt;Attention, si le tableau n&#39;est pas vide, il doit deja avoir la bonne&lt;br&gt;taille et la bonne structure, sinon erreur !&lt;br&gt;Parameter resize_and_read if the array is sized AND read (by default, yes)</span>
<a name="l00555"></a><a class="code" href="classDoubleTab.html#a1681f8fe1ff7b26219ab19c4315eb25c">00555</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#a1681f8fe1ff7b26219ab19c4315eb25c" title="lecture d&#39;un tableau pour reprise de calcul. On lit les valeurs &quot;raw&quot;. Attention, si le tableau n&#39;est pas vide, il doit deja avoir la bonne taille et la bonne structure, sinon erreur ! Parameter resize_and_read if the array is sized AND read (by default, yes)">DoubleTab::lit</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is, <span class="keywordtype">int</span> resize_and_read)
<a name="l00556"></a>00556 {
<a name="l00557"></a>00557   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> tmp;
<a name="l00558"></a>00558   is &gt;&gt; tmp;
<a name="l00559"></a>00559   <span class="keywordtype">int</span> ok = 1;
<a name="l00560"></a>00560   <span class="keywordflow">if</span> (tmp.size_array() != <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>)
<a name="l00561"></a>00561     ok = 0;
<a name="l00562"></a>00562   <span class="keywordflow">if</span> (ok)
<a name="l00563"></a>00563     {
<a name="l00564"></a>00564       <span class="keywordflow">if</span> (<a class="code" href="classDoubleVect.html#aafef4b3a96cdc428d62c5cedc9af6112">size_reelle_ok</a>() &amp;&amp; <a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0) != tmp[0])
<a name="l00565"></a>00565         ok = 0;
<a name="l00566"></a>00566       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>; i++)
<a name="l00567"></a>00567         <span class="keywordflow">if</span> (<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(i) != tmp[i])
<a name="l00568"></a>00568           ok = 0;
<a name="l00569"></a>00569     }
<a name="l00570"></a>00570   is &gt;&gt; tmp;
<a name="l00571"></a>00571   <span class="keywordflow">if</span> (ok &amp;&amp; tmp.size_array() != <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>)
<a name="l00572"></a>00572     ok = 0;
<a name="l00573"></a>00573   <span class="keywordflow">if</span> (ok)
<a name="l00574"></a>00574     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classDoubleTab.html#a6cd04e447a0f2419d8c9c986ec53ae15">nb_dim_</a>; i++)
<a name="l00575"></a>00575       <span class="keywordflow">if</span> (<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(i) != tmp[i])
<a name="l00576"></a>00576         ok = 0;
<a name="l00577"></a>00577 <span class="comment">// Autorisation ancien format des champs scalaire 183:</span>
<a name="l00578"></a>00578   <span class="keywordflow">if</span> (tmp.size_array()==1 &amp;&amp; nb_dim_==2 &amp;&amp; <a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1)==1 &amp;&amp; <a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) == tmp[0])
<a name="l00579"></a>00579     ok = 1;
<a name="l00580"></a>00580   <span class="keywordflow">if</span> (resize_and_read)
<a name="l00581"></a>00581     {
<a name="l00582"></a>00582       <span class="keywordflow">if</span> (<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() == 0 &amp;&amp; (!<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>()))
<a name="l00583"></a>00583         {
<a name="l00584"></a>00584           <a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(tmp, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">NOCOPY_NOINIT</a>);
<a name="l00585"></a>00585         }
<a name="l00586"></a>00586       <span class="keywordflow">else</span>
<a name="l00587"></a>00587         {
<a name="l00588"></a>00588           <span class="keywordflow">if</span> (!ok)
<a name="l00589"></a>00589             {
<a name="l00590"></a>00590 <span class="comment">// Si on cherche a relire un tableau de taille inconnue, le tableau doit</span>
<a name="l00591"></a>00591 <span class="comment">// etre reset() a l&#39;entree. On n&#39;aura pas la structure parallele du tableau !</span>
<a name="l00592"></a>00592               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in DoubleTab::lit: array has wrong dimensions&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00593"></a>00593               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00594"></a>00594             }
<a name="l00595"></a>00595         }
<a name="l00596"></a>00596     }
<a name="l00597"></a>00597   <a class="code" href="classDoubleTab.html#a1681f8fe1ff7b26219ab19c4315eb25c" title="lecture d&#39;un tableau pour reprise de calcul. On lit les valeurs &quot;raw&quot;. Attention, si le tableau n&#39;est pas vide, il doit deja avoir la bonne taille et la bonne structure, sinon erreur ! Parameter resize_and_read if the array is sized AND read (by default, yes)">DoubleVect::lit</a>(is,resize_and_read);
<a name="l00598"></a>00598 }
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="DoubleTab_8h.html#aeb667025484dee77b81a055de8bcc1b0">00600</a> <span class="keywordtype">void</span> <a class="code" href="DoubleTab_8cpp.html#aeb667025484dee77b81a055de8bcc1b0">mp_norme_tab</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tableau, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; norme_colonne)
<a name="l00601"></a>00601 {
<a name="l00602"></a>00602   <a class="code" href="DoubleTab_8cpp.html#a48f7eccc9b3cb700cd66c32923035eef">mp_carre_norme_tab</a>(tableau,norme_colonne);
<a name="l00603"></a>00603   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c&lt;norme_colonne.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(); c++)
<a name="l00604"></a>00604     norme_colonne(c)=sqrt(norme_colonne(c));
<a name="l00605"></a>00605 }
<a name="l00606"></a>00606 
<a name="l00607"></a><a class="code" href="DoubleTab_8h.html#a7279b10c0235b8db2e7b4f5799634adb">00607</a> <span class="keywordtype">void</span> <a class="code" href="DoubleTab_8cpp.html#a7279b10c0235b8db2e7b4f5799634adb">local_carre_norme_tab</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tableau, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; norme_colonne)
<a name="l00608"></a>00608 {
<a name="l00609"></a>00609   <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; blocs = tableau.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a7f6b6d0b7babfec0cce590cdea5bca53">get_items_to_sum</a>();
<a name="l00610"></a>00610   <span class="keyword">const</span> <span class="keywordtype">int</span> nblocs = blocs.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() &gt;&gt; 1;
<a name="l00611"></a>00611   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vect = tableau;
<a name="l00612"></a>00612   <span class="keyword">const</span> <span class="keywordtype">int</span> lsize = vect.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00613"></a>00613   assert(lsize == norme_colonne.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
<a name="l00614"></a>00614   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ibloc = 0; ibloc &lt; nblocs; ibloc++)
<a name="l00615"></a>00615     {
<a name="l00616"></a>00616       <span class="keyword">const</span> <span class="keywordtype">int</span> begin_bloc = blocs[ibloc];
<a name="l00617"></a>00617       <span class="keyword">const</span> <span class="keywordtype">int</span> end_bloc = blocs[ibloc+1];
<a name="l00618"></a>00618       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = begin_bloc; i &lt; end_bloc; i++)
<a name="l00619"></a>00619         {
<a name="l00620"></a>00620           <span class="keywordtype">int</span> k = i * lsize;
<a name="l00621"></a>00621           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; lsize; j++)
<a name="l00622"></a>00622             {
<a name="l00623"></a>00623               <span class="keyword">const</span> <span class="keywordtype">double</span> x = vect[k++];
<a name="l00624"></a>00624               norme_colonne[j] += x*x;
<a name="l00625"></a>00625             }
<a name="l00626"></a>00626         }
<a name="l00627"></a>00627     }
<a name="l00628"></a>00628 }
<a name="l00629"></a>00629 
<a name="l00630"></a><a class="code" href="DoubleTab_8h.html#a48f7eccc9b3cb700cd66c32923035eef">00630</a> <span class="keywordtype">void</span> <a class="code" href="DoubleTab_8cpp.html#a48f7eccc9b3cb700cd66c32923035eef">mp_carre_norme_tab</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tableau, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; norme_colonne)
<a name="l00631"></a>00631 {
<a name="l00632"></a>00632   <a class="code" href="DoubleTab_8cpp.html#a7279b10c0235b8db2e7b4f5799634adb">local_carre_norme_tab</a>(tableau, norme_colonne);
<a name="l00633"></a>00633   <a class="code" href="communications_8cpp.html#a5f15b8a5c15449d3277ff3cde06fa68a">mp_sum_for_each_item</a>(norme_colonne);
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00636"></a><a class="code" href="DoubleTab_8h.html#ad007aa8d89fd95ca18a7667c3e24ef6b">00636</a> <span class="keywordtype">void</span> <a class="code" href="DoubleTab_8cpp.html#ad007aa8d89fd95ca18a7667c3e24ef6b">local_max_abs_tab</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tableau, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; max_colonne)
<a name="l00637"></a>00637 {
<a name="l00638"></a>00638   <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; blocs = tableau.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a99334ac2566d9457c8d4890ba20883ea">get_items_to_compute</a>();
<a name="l00639"></a>00639   <span class="keyword">const</span> <span class="keywordtype">int</span> nblocs = blocs.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() &gt;&gt; 1;
<a name="l00640"></a>00640   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vect = tableau;
<a name="l00641"></a>00641   <span class="keyword">const</span> <span class="keywordtype">int</span> lsize = vect.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00642"></a>00642   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; lsize; j++)
<a name="l00643"></a>00643     max_colonne[j] = 0;
<a name="l00644"></a>00644   assert(lsize == max_colonne.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
<a name="l00645"></a>00645   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ibloc = 0; ibloc &lt; nblocs; ibloc++)
<a name="l00646"></a>00646     {
<a name="l00647"></a>00647       <span class="keyword">const</span> <span class="keywordtype">int</span> begin_bloc = blocs[ibloc];
<a name="l00648"></a>00648       <span class="keyword">const</span> <span class="keywordtype">int</span> end_bloc = blocs[ibloc+1];
<a name="l00649"></a>00649       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = begin_bloc; i &lt; end_bloc; i++)
<a name="l00650"></a>00650         {
<a name="l00651"></a>00651           <span class="keywordtype">int</span> k = i * lsize;
<a name="l00652"></a>00652           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; lsize; j++)
<a name="l00653"></a>00653             {
<a name="l00654"></a>00654               <span class="keyword">const</span> <span class="keywordtype">double</span> x = <a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(vect[k++]);
<a name="l00655"></a>00655               max_colonne[j] = (x &gt; max_colonne[j]) ? x : max_colonne[j];
<a name="l00656"></a>00656             }
<a name="l00657"></a>00657         }
<a name="l00658"></a>00658     }
<a name="l00659"></a>00659 }
<a name="l00660"></a>00660 
<a name="l00661"></a><a class="code" href="DoubleTab_8h.html#a45f3ed78ddbbca7ed00d97e33be19a22">00661</a> <span class="keywordtype">void</span> <a class="code" href="DoubleTab_8cpp.html#a45f3ed78ddbbca7ed00d97e33be19a22">mp_max_abs_tab</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tableau, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; max_colonne)
<a name="l00662"></a>00662 {
<a name="l00663"></a>00663   <a class="code" href="DoubleTab_8cpp.html#ad007aa8d89fd95ca18a7667c3e24ef6b">local_max_abs_tab</a>(tableau, max_colonne);
<a name="l00664"></a>00664   <a class="code" href="communications_8cpp.html#aafa4a4611353c452208f47a6e4381488">mp_max_for_each_item</a>(max_colonne);
<a name="l00665"></a>00665 }
<a name="l00666"></a>00666 <span class="comment"></span>
<a name="l00667"></a>00667 <span class="comment">//! Quelqu&#39;un veut-il expliquer ce que fait cette methode ?</span>
<a name="l00668"></a><a class="code" href="classDoubleTab.html#a510be7004ff5705d2cc80a40d952e4ee">00668</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#a510be7004ff5705d2cc80a40d952e4ee" title="z+=alpha*x*y;">DoubleTab::ajoute_produit_tensoriel</a>(<span class="keywordtype">double</span> alpha, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; x, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; y)
<a name="l00669"></a>00669 {
<a name="l00670"></a>00670 <span class="comment">// Tableaux vus comme des tableaux unidimensionnels (pour ne pas avoir a gerer nb_dim)</span>
<a name="l00671"></a>00671   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vx = x;
<a name="l00672"></a>00672   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vy = y;
<a name="l00673"></a>00673   <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; v = *<span class="keyword">this</span>;
<a name="l00674"></a>00674 
<a name="l00675"></a>00675   <span class="keyword">const</span> <span class="keywordtype">int</span> line_size_x = vx.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00676"></a>00676   <span class="keyword">const</span> <span class="keywordtype">int</span> line_size_y = vy.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00677"></a>00677   <span class="keyword">const</span> <span class="keywordtype">int</span> line_size_xy = v.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00678"></a>00678   assert(line_size_xy == line_size_x * line_size_y);
<a name="l00679"></a>00679 <span class="comment">// Pour ne pas diviser par line_size()</span>
<a name="l00680"></a>00680   assert(vx.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>() * line_size_xy == v.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>() * line_size_x);
<a name="l00681"></a>00681   assert(vy.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>() * line_size_xy == v.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>() * line_size_y);
<a name="l00682"></a>00682 
<a name="l00683"></a>00683 <span class="comment">// blocs d&#39;items a traiter (un bloc par defaut: tout le tableau)</span>
<a name="l00684"></a>00684   <span class="keywordtype">int</span> default_bloc[2];
<a name="l00685"></a>00685   default_bloc[0] = 0;
<a name="l00686"></a>00686   default_bloc[1] = (v.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() &gt; 0) ? (v.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>() / v.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>()) : 0;
<a name="l00687"></a>00687   <span class="keyword">const</span> <span class="keywordtype">int</span> *blocs = default_bloc;
<a name="l00688"></a>00688   <span class="keywordtype">int</span> nb_blocs = 1;
<a name="l00689"></a>00689   <span class="keywordflow">if</span> (v.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
<a name="l00690"></a>00690     {
<a name="l00691"></a>00691       <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; blk = v.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a99334ac2566d9457c8d4890ba20883ea">get_items_to_compute</a>();
<a name="l00692"></a>00692       blocs = blk.<a class="code" href="classArrOfInt.html#ad0b31250e60cd9040ea60be55db73c3d" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>();
<a name="l00693"></a>00693       nb_blocs = blk.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() / 2;
<a name="l00694"></a>00694     }
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i_bloc = 0; i_bloc &lt; nb_blocs; i_bloc++)
<a name="l00697"></a>00697     {
<a name="l00698"></a>00698       <span class="keyword">const</span> <span class="keywordtype">int</span> debut = blocs[i_bloc*2];
<a name="l00699"></a>00699       <span class="keyword">const</span> <span class="keywordtype">int</span> fin = blocs[i_bloc*2+1];
<a name="l00700"></a>00700 
<a name="l00701"></a>00701       <span class="keywordtype">int</span> v_index = debut * line_size_xy;
<a name="l00702"></a>00702       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = debut; i &lt; fin; i++)
<a name="l00703"></a>00703         {
<a name="l00704"></a>00704           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; line_size_x; j++)
<a name="l00705"></a>00705             {
<a name="l00706"></a>00706               <span class="keywordtype">double</span> xval = vx[i * line_size_x + j];
<a name="l00707"></a>00707               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; line_size_y; k++)
<a name="l00708"></a>00708                 {
<a name="l00709"></a>00709                   <span class="keywordtype">double</span> yval = vy[i * line_size_y + k];
<a name="l00710"></a>00710                   v[v_index] += alpha * xval * yval;
<a name="l00711"></a>00711                   v_index++;
<a name="l00712"></a>00712                 }
<a name="l00713"></a>00713             }
<a name="l00714"></a>00714         }
<a name="l00715"></a>00715     }
<a name="l00716"></a>00716 }
<a name="l00717"></a>00717 
<a name="l00718"></a>00718 <span class="comment">//</span><span class="comment"></span>
<a name="l00719"></a>00719 <span class="comment">//! Resolution du systeme Ax=b</span>
<a name="l00720"></a><a class="code" href="classDoubleTab.html#ac8a3ddd047edb07c8f43943a26812a8b">00720</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classDoubleTab.html#ac8a3ddd047edb07c8f43943a26812a8b" title="Resolution du systeme Ax=b.">DoubleTab::inverse_LU</a>(<span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; b, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; solution)
<a name="l00721"></a>00721 {
<a name="l00722"></a>00722   <span class="keywordtype">int</span> n = b.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00723"></a>00723   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> index(n);
<a name="l00724"></a>00724 
<a name="l00725"></a>00725   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> lu_dec(n,n);
<a name="l00726"></a>00726 
<a name="l00727"></a>00727   <span class="keywordtype">int</span> cvg = (*this).decomp_LU(n,index,lu_dec);
<a name="l00728"></a>00728 
<a name="l00729"></a>00729 <span class="comment">// Cout&lt;&lt;&quot;##DecompositionLU : origine&quot;&lt;&lt;finl;</span>
<a name="l00730"></a>00730 <span class="comment">// int i,j;</span>
<a name="l00731"></a>00731 <span class="comment">// for (i=0;i&lt;n;i++)</span>
<a name="l00732"></a>00732 <span class="comment">// {</span>
<a name="l00733"></a>00733 <span class="comment">// for (j=0;j&lt;n;j++)</span>
<a name="l00734"></a>00734 <span class="comment">// {</span>
<a name="l00735"></a>00735 <span class="comment">// Cout&lt;&lt;&quot;  &quot;&lt;&lt;(*this)(i,j);</span>
<a name="l00736"></a>00736 <span class="comment">// }</span>
<a name="l00737"></a>00737 <span class="comment">// Cout&lt;&lt;finl;</span>
<a name="l00738"></a>00738 <span class="comment">// }</span>
<a name="l00739"></a>00739 <span class="comment">// Cout&lt;&lt;&quot;##DecompositionLU : L&quot;&lt;&lt;finl;</span>
<a name="l00740"></a>00740 <span class="comment">// for (i=0;i&lt;n;i++)</span>
<a name="l00741"></a>00741 <span class="comment">// {</span>
<a name="l00742"></a>00742 <span class="comment">// for (j=0;j&lt;i;j++)</span>
<a name="l00743"></a>00743 <span class="comment">// {</span>
<a name="l00744"></a>00744 <span class="comment">// Cout&lt;&lt;&quot;  &quot;&lt;&lt;lu_dec(i,j);</span>
<a name="l00745"></a>00745 <span class="comment">// }</span>
<a name="l00746"></a>00746 <span class="comment">// Cout&lt;&lt;&quot;  1.00000e+00&quot;;</span>
<a name="l00747"></a>00747 <span class="comment">// for (j=i+1;j&lt;n;j++)</span>
<a name="l00748"></a>00748 <span class="comment">// {</span>
<a name="l00749"></a>00749 <span class="comment">// Cout&lt;&lt;&quot;  0.00000e+00&quot;;</span>
<a name="l00750"></a>00750 <span class="comment">// }</span>
<a name="l00751"></a>00751 <span class="comment">// Cout&lt;&lt;finl;</span>
<a name="l00752"></a>00752 <span class="comment">// }</span>
<a name="l00753"></a>00753 <span class="comment">// Cout&lt;&lt;&quot;##DecompositionLU : U&quot;&lt;&lt;finl;</span>
<a name="l00754"></a>00754 <span class="comment">// for (i=0;i&lt;n;i++)</span>
<a name="l00755"></a>00755 <span class="comment">// {</span>
<a name="l00756"></a>00756 <span class="comment">// for (j=0;j&lt;i;j++)</span>
<a name="l00757"></a>00757 <span class="comment">// {</span>
<a name="l00758"></a>00758 <span class="comment">// Cout&lt;&lt;&quot;  0.00000e+00&quot;;</span>
<a name="l00759"></a>00759 <span class="comment">// }</span>
<a name="l00760"></a>00760 <span class="comment">// for (j=i;j&lt;n;j++)</span>
<a name="l00761"></a>00761 <span class="comment">// {</span>
<a name="l00762"></a>00762 <span class="comment">// Cout&lt;&lt;&quot;  &quot;&lt;&lt;lu_dec(i,j);</span>
<a name="l00763"></a>00763 <span class="comment">// }</span>
<a name="l00764"></a>00764 <span class="comment">// Cout&lt;&lt;finl;</span>
<a name="l00765"></a>00765 <span class="comment">// }</span>
<a name="l00766"></a>00766 
<a name="l00767"></a>00767   <span class="keywordflow">if</span>(cvg == 1)
<a name="l00768"></a>00768     {
<a name="l00769"></a>00769       lu_dec.<a class="code" href="classDoubleTab.html#ab4aaa4d0456f32731727b0256829384b" title="Resolution du systeme A_x=b A_ contenant le decompostion LU de A (stockee dans une seule matrice)...">resoud_LU</a>(n,index,b,solution);
<a name="l00770"></a>00770     }
<a name="l00771"></a>00771 <span class="comment">// Cout&lt;&lt;&quot;Convergence decomposition matrice : &quot;&lt;&lt;cvg&lt;&lt;finl;</span>
<a name="l00772"></a>00772 
<a name="l00773"></a>00773   <span class="keywordflow">return</span> cvg;
<a name="l00774"></a>00774 }
<a name="l00775"></a>00775 
<a name="l00776"></a>00776 <span class="comment">//</span>
<a name="l00777"></a>00777 <span class="comment">//</span><span class="comment"></span>
<a name="l00778"></a>00778 <span class="comment">//! Decomposition d&#39;une matrice en L.U&lt;br&gt;methode de Crout (diagonale de L =1)</span>
<a name="l00779"></a>00779 <span class="comment"></span><span class="comment">/** \return matrice A_ = assemblage (L-diagonale)+U */</span>
<a name="l00780"></a><a class="code" href="classDoubleTab.html#a4f625510c15ae71a1661d046ad604778">00780</a> <span class="keywordtype">int</span> <a class="code" href="classDoubleTab.html#a4f625510c15ae71a1661d046ad604778" title="Decomposition d&#39;une matrice en L.U methode de Crout (diagonale de L =1)">DoubleTab::decomp_LU</a>(<span class="keywordtype">int</span> n, <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; index, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; matLU)
<a name="l00781"></a>00781 {
<a name="l00782"></a>00782   <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> vv(n);
<a name="l00783"></a>00783 
<a name="l00784"></a>00784   <span class="keywordtype">int</span> i, imax=-1, j , k;
<a name="l00785"></a>00785   <span class="keywordtype">double</span> big, dum, sum, temp;
<a name="l00786"></a>00786   <span class="keywordtype">int</span> cvg = 1;
<a name="l00787"></a>00787 
<a name="l00788"></a>00788   matLU = (*this);
<a name="l00789"></a>00789 
<a name="l00790"></a>00790 <span class="comment">// Recupere le coeff max d&#39;une ligne, stocke dans vv</span>
<a name="l00791"></a>00791   <span class="keywordflow">for</span> (i=0 ; i&lt;n ; i++)
<a name="l00792"></a>00792     {
<a name="l00793"></a>00793       big = 0;
<a name="l00794"></a>00794       <span class="keywordflow">for</span> (j=0 ; j&lt;n ; j++)
<a name="l00795"></a>00795         {
<a name="l00796"></a>00796           <span class="keywordflow">if</span> ((temp = fabs(matLU(i,j))) &gt; big)
<a name="l00797"></a>00797             {
<a name="l00798"></a>00798               big = temp;
<a name="l00799"></a>00799             }
<a name="l00800"></a>00800         }
<a name="l00801"></a>00801 <span class="comment">// Cout&lt;&lt;&quot;decomp_LU big &quot;&lt;&lt;big&lt;&lt;finl;</span>
<a name="l00802"></a>00802       <span class="keywordflow">if</span> (big == 0)
<a name="l00803"></a>00803         {
<a name="l00804"></a>00804           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt;<span class="stringliteral">&quot;Singular matrix in LU decomposition&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00805"></a>00805           cvg = 0;
<a name="l00806"></a>00806           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00807"></a>00807         }
<a name="l00808"></a>00808       vv[i] = 1./big;
<a name="l00809"></a>00809     }
<a name="l00810"></a>00810 
<a name="l00811"></a>00811 <span class="comment">// calcul de la matrice matLU</span>
<a name="l00812"></a>00812   <span class="keywordflow">for</span> (j=0 ; j&lt;n ; j++)
<a name="l00813"></a>00813     {
<a name="l00814"></a>00814       <span class="keywordflow">for</span> (i=0 ; i&lt;j ; i++)
<a name="l00815"></a>00815         {
<a name="l00816"></a>00816           sum = matLU(i,j);
<a name="l00817"></a>00817           <span class="keywordflow">for</span> (k=0 ; k&lt;i ; k++)
<a name="l00818"></a>00818             {
<a name="l00819"></a>00819               sum -= matLU(i,k) * matLU(k,j);
<a name="l00820"></a>00820             }
<a name="l00821"></a>00821           matLU(i,j) = sum;
<a name="l00822"></a>00822         }
<a name="l00823"></a>00823 
<a name="l00824"></a>00824       big = 0;
<a name="l00825"></a>00825       <span class="keywordflow">for</span> (i=j ; i&lt;n ; i++)
<a name="l00826"></a>00826         {
<a name="l00827"></a>00827           sum = matLU(i,j);
<a name="l00828"></a>00828           <span class="keywordflow">for</span> (k=0 ; k&lt;j ; k++)
<a name="l00829"></a>00829             {
<a name="l00830"></a>00830               sum -= matLU(i,k) * matLU(k,j);
<a name="l00831"></a>00831             }
<a name="l00832"></a>00832           matLU(i,j) = sum;
<a name="l00833"></a>00833           <span class="keywordflow">if</span> ((dum = vv(i)*fabs(sum)) &gt;= big)
<a name="l00834"></a>00834             {
<a name="l00835"></a>00835               big = dum;
<a name="l00836"></a>00836               imax = i;
<a name="l00837"></a>00837             }
<a name="l00838"></a>00838         }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840       <span class="keywordflow">if</span> (j != imax)
<a name="l00841"></a>00841         {
<a name="l00842"></a>00842           <span class="keywordflow">for</span> (k=0 ; k&lt;n ; k++)
<a name="l00843"></a>00843             {
<a name="l00844"></a>00844               dum = matLU(imax,k);
<a name="l00845"></a>00845               matLU(imax,k) = matLU(j,k);
<a name="l00846"></a>00846               matLU(j,k) = dum;
<a name="l00847"></a>00847             }
<a name="l00848"></a>00848           vv(imax) = vv(j);
<a name="l00849"></a>00849         }
<a name="l00850"></a>00850 
<a name="l00851"></a>00851       index(j) = imax;
<a name="l00852"></a>00852       dum = 1./matLU(j,j);
<a name="l00853"></a>00853       <span class="keywordflow">for</span> (i=j+1 ; i&lt;n ; i++)
<a name="l00854"></a>00854         {
<a name="l00855"></a>00855           matLU(i,j) *= dum;
<a name="l00856"></a>00856         }
<a name="l00857"></a>00857     }
<a name="l00858"></a>00858 
<a name="l00859"></a>00859   <span class="keywordflow">return</span> cvg;
<a name="l00860"></a>00860 }
<a name="l00861"></a>00861 
<a name="l00862"></a>00862 <span class="comment">//</span>
<a name="l00863"></a>00863 <span class="comment">//</span><span class="comment"></span>
<a name="l00864"></a>00864 <span class="comment">//! Resolution du systeme A_x=b&lt;br&gt;A_ contenant le decompostion LU de A (stockee dans une seule matrice)</span>
<a name="l00865"></a><a class="code" href="classDoubleTab.html#ab4aaa4d0456f32731727b0256829384b">00865</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDoubleTab.html#ab4aaa4d0456f32731727b0256829384b" title="Resolution du systeme A_x=b A_ contenant le decompostion LU de A (stockee dans une seule matrice)...">DoubleTab::resoud_LU</a>(<span class="keywordtype">int</span> n, <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; index, <span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; b, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; solution)
<a name="l00866"></a>00866 {
<a name="l00867"></a>00867   <span class="keywordtype">int</span> i,ii=-1,ip,j;
<a name="l00868"></a>00868   <span class="keywordtype">double</span> sum;
<a name="l00869"></a>00869 
<a name="l00870"></a>00870   solution = b;
<a name="l00871"></a>00871 
<a name="l00872"></a>00872   <span class="keywordflow">for</span> (i=0 ; i&lt;n ; i++)
<a name="l00873"></a>00873     {
<a name="l00874"></a>00874       ip = index(i);
<a name="l00875"></a>00875       sum = solution(ip);
<a name="l00876"></a>00876       solution(ip) = solution(i);
<a name="l00877"></a>00877       <span class="keywordflow">if</span> (ii!=-1)
<a name="l00878"></a>00878         {
<a name="l00879"></a>00879           <span class="keywordflow">for</span> (j=ii ; j&lt;i ; j++)
<a name="l00880"></a>00880             {
<a name="l00881"></a>00881               sum -= (*this)(i,j)*solution(j);
<a name="l00882"></a>00882             }
<a name="l00883"></a>00883         }
<a name="l00884"></a>00884       <span class="keywordflow">else</span>
<a name="l00885"></a>00885         {
<a name="l00886"></a>00886           <span class="keywordflow">if</span> (sum)
<a name="l00887"></a>00887             {
<a name="l00888"></a>00888               ii =i;
<a name="l00889"></a>00889             }
<a name="l00890"></a>00890         }
<a name="l00891"></a>00891       solution(i) = sum;
<a name="l00892"></a>00892     }
<a name="l00893"></a>00893 
<a name="l00894"></a>00894   <span class="keywordflow">for</span> (i=n-1 ; i&gt;=0 ; i--)
<a name="l00895"></a>00895     {
<a name="l00896"></a>00896       sum = solution(i);
<a name="l00897"></a>00897       <span class="keywordflow">for</span> (j=i+1 ; j&lt;n ; j++)
<a name="l00898"></a>00898         {
<a name="l00899"></a>00899           sum -= (*this)(i,j)*solution(j);
<a name="l00900"></a>00900         }
<a name="l00901"></a>00901       solution(i) = sum/(*this)(i,i);
<a name="l00902"></a>00902     }
<a name="l00903"></a>00903 }
<a name="l00904"></a>00904 
<a name="l00905"></a>00905 <span class="comment">//</span>
<a name="l00906"></a>00906 <span class="comment">//</span>
<a name="l00907"></a>00907 <span class="comment">//</span><span class="comment"></span>
<a name="l00908"></a>00908 <span class="comment">//! Fonction utilisee pour le calcul du du/u (pour convergence implicite)&lt;br&gt;renvoie le max de abs(du(i)/u(i))&lt;br&gt;utilisation    max_ = (u(n+1)-u(n)).max_du_u(u(n))</span>
<a name="l00909"></a><a class="code" href="classDoubleTab.html#aff42da7befa95ed12094cb8b7bbfa4e9">00909</a> <span class="comment"></span><span class="keywordtype">double</span> <a class="code" href="classDoubleTab.html#aff42da7befa95ed12094cb8b7bbfa4e9" title="Fonction utilisee pour le calcul du du/u (pour convergence implicite) renvoie le max de abs(du(i)/u(i...">DoubleTab::max_du_u</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; u)
<a name="l00910"></a>00910 {
<a name="l00911"></a>00911   assert(<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() == u.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>());
<a name="l00912"></a>00912   <span class="keyword">const</span> <span class="keywordtype">double</span> *du_ptr = <a class="code" href="classArrOfDouble.html#a95357a1390c11dbd481d385257f2e983" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>();
<a name="l00913"></a>00913   <span class="keyword">const</span> <span class="keywordtype">double</span> *u_ptr = u.<a class="code" href="classArrOfDouble.html#a95357a1390c11dbd481d385257f2e983" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>();
<a name="l00914"></a>00914   <span class="keyword">const</span> <span class="keywordtype">double</span> epsilon = 1.e-8;
<a name="l00915"></a>00915   <span class="keywordtype">double</span> res = 0.;
<a name="l00916"></a>00916   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = <a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(); n; n--)
<a name="l00917"></a>00917     {
<a name="l00918"></a>00918       <span class="keywordtype">double</span> a = fabs(*du_ptr);
<a name="l00919"></a>00919       <span class="keywordtype">double</span> b = fabs(*u_ptr);
<a name="l00920"></a>00920       <span class="keywordtype">double</span> c = a / (b + epsilon);
<a name="l00921"></a>00921       <span class="keywordflow">if</span> (b &gt; 1.e-2 &amp;&amp; c &gt; res)
<a name="l00922"></a>00922         res = c;
<a name="l00923"></a>00923       du_ptr++;
<a name="l00924"></a>00924       u_ptr++;
<a name="l00925"></a>00925     }
<a name="l00926"></a>00926   <span class="keywordflow">return</span> res;
<a name="l00927"></a>00927 }
<a name="l00928"></a>00928 
<a name="l00929"></a>00929 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:21 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
