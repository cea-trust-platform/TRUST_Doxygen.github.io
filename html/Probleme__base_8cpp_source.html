<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Framework/Probleme_base.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Framework/Probleme_base.cpp</div>  </div>
</div>
<div class="contents">
<a href="Probleme__base_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Probleme_base.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Framework</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/110</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Equation_8h.html">Equation.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Periodique_8h.html">Periodique.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Euler__Implicite_8h.html">Schema_Euler_Implicite.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Milieu__base_8h.html">Milieu_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="LecFicDistribueBin_8h.html">LecFicDistribueBin.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="EcrFicCollecteBin_8h.html">EcrFicCollecteBin.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="LecFicDiffuseBin_8h.html">LecFicDiffuseBin.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="EcritureLectureSpecial_8h.html">EcritureLectureSpecial.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Postraitement_8h.html">Postraitement.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Discretisation__base_8h.html">Discretisation_base.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;ICoCoExceptions.h&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="stat__counters_8h.html">stat_counters.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="Debog_8h.html">Debog.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="List__Ref__Postraitement_8h.html">List_Ref_Postraitement.h</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Gen__de__Champs__Gen_8h.html">Champ_Gen_de_Champs_Gen.h</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="Avanc_8h.html">Avanc.h</a>&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="Deriv__Entree__Fichier__base_8h.html">Deriv_Entree_Fichier_base.h</a>&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;<a class="code" href="Loi__Fermeture__base_8h.html">Loi_Fermeture_base.h</a>&gt;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;<a class="code" href="FichierHDFPar_8h.html">FichierHDFPar.h</a>&gt;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="Probleme__base_8cpp.html#ad258a6194015065f3e60e6ceb6585d5a">00047</a> <span class="preprocessor">#define CHECK_ALLOCATE 0</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#ifdef CHECK_ALLOCATE</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#include &lt;unistd.h&gt;</span> <span class="comment">//!&lt; Pour acces a int close(int fd); avec PGI</span>
<a name="l00050"></a>00050 <span class="comment"></span><span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#endif</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00054"></a>00054 <span class="keyword">using</span> ICoCo::WrongArgument;
<a name="l00055"></a>00055 <span class="keyword">using</span> ICoCo::WrongContext;
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="Probleme__base_8cpp.html#a502ae6f1f342a34c70caf6ad890601c2">00057</a> <a class="code" href="Declare__Base_8h.html#a4860a967d304a80bd1e155f90e2362b7">Implemente_base_sans_constructeur_ni_destructeur</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>,<span class="stringliteral">&quot;Probleme_base&quot;</span>,<a class="code" href="classProbleme__U.html" title="classe Probleme_U Cette classe ajoute des specificites TRUST a l&#39;interface generale definie dans la c...">Probleme_U</a>);
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="comment">// XD Pb_base pb_gen_base Pb_base -3 Resolution of equations on a domain. A problem is defined by creating an object and assigning the problem type that the user wishes to resolve. To enter values for the problem objects created, the Lire (Read) interpretor is used with a data block.</span>
<a name="l00061"></a>00061 <span class="comment">// XD  attr postraitement|Post_processing corps_postraitement postraitement 1 One post-processing (without name).</span>
<a name="l00062"></a>00062 <span class="comment">// XD  attr postraitements|Post_processings postraitements postraitements 1 List of Postraitement objects (with name).</span>
<a name="l00063"></a>00063 <span class="comment">// XD  attr liste_de_postraitements liste_post_ok liste_de_postraitements 1 This</span>
<a name="l00064"></a>00064 <span class="comment">// XD  attr liste_postraitements liste_post liste_postraitements 1 This block defines the output files to be written during the computation. The output format is lata in order to use OpenDX to draw the results. This block can be divided in one or several sub-blocks that can be written at different frequencies and in different directories. Attention. The directory lata used in this example should be created before running the computation or the lata files will be lost.</span>
<a name="l00065"></a>00065 <span class="comment">// XD  attr sauvegarde format_file sauvegarde 1 Keyword used when calculation results are to be backed up. When a coupling is performed, the backup-recovery file name must be well specified for each problem. In this case, you must save to different files and correctly specify these files when resuming the calculation.</span>
<a name="l00066"></a>00066 <span class="comment">// XD  attr sauvegarde_simple format_file sauvegarde_simple 1 The same keyword than Sauvegarde except, the last time step only is saved.</span>
<a name="l00067"></a>00067 <span class="comment">// XD  attr reprise format_file reprise 1 Keyword to resume a calculation based on the name_file file (see the class format_file). If format_reprise is xyz, the name_file file should be the .xyz file created by the previous calculation. With this file, it is possible to resume a parallel calculation on P processors, whereas the previous calculation has been run on N (N&lt;&gt;P) processors. Should the calculation be resumed, values for the tinit (see schema_temps_base) time fields are taken from the name_file file. If there is no backup corresponding to this time in the name_file, TRUST exits in error.</span>
<a name="l00068"></a>00068 <span class="comment">// XD  attr resume_last_time format_file resume_last_time 1 Keyword to resume a calculation based on the name_file file, resume the calculation at the last time found in the file (tinit is set to last time of saved files).</span>
<a name="l00069"></a>00069 <span class="comment">// XD ref domaine domaine</span>
<a name="l00070"></a>00070 <span class="comment">// XD ref scheme schema_temps_base</span>
<a name="l00071"></a>00071 <span class="comment">// XD ref milieu milieu_base</span>
<a name="l00072"></a>00072 <span class="comment">// XD ref loi1 loi_fermeture_base</span>
<a name="l00073"></a>00073 <span class="comment">// XD ref loi2 loi_fermeture_base</span>
<a name="l00074"></a>00074 <span class="comment">// XD ref loi3 loi_fermeture_base</span>
<a name="l00075"></a>00075 <span class="comment">// XD ref loi4 loi_fermeture_base</span>
<a name="l00076"></a>00076 <span class="comment">// XD ref loi5 loi_fermeture_base</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">// Variables globales pour initialiser est_le_premier_postraitement_pour_nom_fic</span>
<a name="l00079"></a>00079 <span class="comment">// et est_le_dernier_postraitement_pour_nom_fic en une seule passe.</span>
<a name="l00080"></a>00080 <a class="code" href="List_8h.html#a3149526fb499ddb08728c87daa32c5ad">LIST</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>) <a class="code" href="Probleme__base_8cpp.html#a5fb8a1e544c0fcfd3957a758f60cebac">glob_noms_fichiers</a>;
<a name="l00081"></a><a class="code" href="Probleme__base_8cpp.html#a67c26b9d9c728a10024918e4dc9ba15b">00081</a> <a class="code" href="List_8h.html#a3149526fb499ddb08728c87daa32c5ad">LIST</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>)) <a class="code" href="Probleme__base_8cpp.html#a67c26b9d9c728a10024918e4dc9ba15b">glob_derniers_posts</a>;
<a name="l00082"></a>00082 
<a name="l00083"></a><a class="code" href="classProbleme__base.html#ae8146f52837ae917567043a07a53e651">00083</a> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>::~<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>()
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085   glob_noms_fichiers.vide();
<a name="l00086"></a>00086   glob_derniers_posts.vide();
<a name="l00087"></a>00087 }
<a name="l00088"></a>00088 <span class="comment">//</span>
<a name="l00089"></a>00089 <span class="comment">// //</span>
<a name="l00090"></a>00090 <span class="comment">// Implementation de l&#39;interface de Probleme_U  //</span>
<a name="l00091"></a>00091 <span class="comment">// //</span>
<a name="l00092"></a>00092 <span class="comment">//</span>
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 
<a name="l00095"></a><a class="code" href="classProbleme__base.html#afa3d0a5b219ab0460226fde9cac4bbd2">00095</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#afa3d0a5b219ab0460226fde9cac4bbd2" title="This method is called once at the beginning, before any other one of the interface Problem...">Probleme_base::initialize</a>()
<a name="l00096"></a>00096 {
<a name="l00097"></a>00097   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a7f91a0cc48016699ccaf3ebb9ece926d" title="true if initialize was called">initialized</a>)
<a name="l00098"></a>00098     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;initialize&quot;</span>,<span class="stringliteral">&quot;initialize should not have been called&quot;</span>);
<a name="l00099"></a>00099 
<a name="l00100"></a>00100   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00101"></a>00101   <a class="code" href="classProbleme__base.html#a66839a7f7af4105a0b6e1301a60d5cfa" title="Prepare le calcul: initialise les parametres du milieu et prepare le calcul de chacune des equations...">preparer_calcul</a>();
<a name="l00102"></a>00102   <a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#acd765e586115bf0abbe2eda0729f167e">initialiser</a>(0,<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>(),*<span class="keyword">this</span>); <span class="comment">//!&lt; Pour le cas de geometries variables (ex. ALE) on initialise le schema en temps avant le postraitement ainsi les sources qui dependent du pas de temps fonctionnent</span>
<a name="l00103"></a>00103 <span class="comment"></span><span class="comment">//</span>
<a name="l00104"></a>00104 <span class="comment">//</span>
<a name="l00105"></a>00105   <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a9786b3dc68f3eb4ed7d5973f5f27affc">initialize</a>();
<a name="l00106"></a>00106   <a class="code" href="classProbleme__base.html#a6d88b0185198c92d6ea119e0d6ca0a62">init_postraitements</a>();
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   <a class="code" href="classProbleme__base.html#a7f91a0cc48016699ccaf3ebb9ece926d" title="true if initialize was called">initialized</a>=<span class="keyword">true</span>;
<a name="l00109"></a>00109 }
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="classProbleme__base.html#a87bd601fc530d8cb3b4904f161febc12">00111</a> <span class="keywordtype">double</span> <a class="code" href="classProbleme__base.html#a87bd601fc530d8cb3b4904f161febc12" title="Returns the present time. This value may change only at the call of validateTimeStep. A surcharger.">Probleme_base::presentTime</a>()<span class="keyword"> const</span>
<a name="l00112"></a>00112 <span class="keyword"></span>{
<a name="l00113"></a>00113   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a7f91a0cc48016699ccaf3ebb9ece926d" title="true if initialize was called">initialized</a>)
<a name="l00114"></a>00114     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;presentTime&quot;</span>,<span class="stringliteral">&quot;initialize should have been called&quot;</span>);
<a name="l00115"></a>00115   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#ae090aa9be770fefc4d026ad68eaa945d" title="true if terminate was called">terminated</a>)
<a name="l00116"></a>00116     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;presentTime&quot;</span>,<span class="stringliteral">&quot;terminate should not have been called&quot;</span>);
<a name="l00117"></a>00117 
<a name="l00118"></a>00118   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00119"></a>00119   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>();
<a name="l00120"></a>00120 }
<a name="l00121"></a>00121 
<a name="l00122"></a><a class="code" href="classProbleme__base.html#a165c557986360282eba78ebac000b89c">00122</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__base.html#a165c557986360282eba78ebac000b89c" title="This method allocates and initializes the unknown and given fields for the future time step...">Probleme_base::initTimeStep</a>(<span class="keywordtype">double</span> dt)
<a name="l00123"></a>00123 {
<a name="l00124"></a>00124   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a7f91a0cc48016699ccaf3ebb9ece926d" title="true if initialize was called">initialized</a>)
<a name="l00125"></a>00125     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;initTimeStep&quot;</span>,<span class="stringliteral">&quot;initialize should have been called&quot;</span>);
<a name="l00126"></a>00126   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#ae090aa9be770fefc4d026ad68eaa945d" title="true if terminate was called">terminated</a>)
<a name="l00127"></a>00127     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;initTimeStep&quot;</span>,<span class="stringliteral">&quot;terminate should not have been called&quot;</span>);
<a name="l00128"></a>00128   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>)
<a name="l00129"></a>00129     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;initTimeStep&quot;</span>,<span class="stringliteral">&quot;initTimeStep should not have been called&quot;</span>);
<a name="l00130"></a>00130   <span class="keywordflow">if</span> (dt&lt;=0)
<a name="l00131"></a>00131     <span class="keywordflow">throw</span> WrongArgument(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;initTimeStep&quot;</span>,<span class="stringliteral">&quot;dt&quot;</span>,<span class="stringliteral">&quot;dt should be a positive real number&quot;</span>);
<a name="l00132"></a>00132 
<a name="l00133"></a>00133   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   <span class="keywordtype">bool</span> ok=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a9917c2c7e04733506b1c46d0a463701a">initTimeStep</a>(dt);
<a name="l00136"></a>00136   <a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#aa48e90fc3fbf38c91c4372f047b3634a">set_dt</a>(dt);
<a name="l00137"></a>00137   <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classMilieu__base.html#a277fbed9de8934458106b2ce9066d3bf">initTimeStep</a>(dt);
<a name="l00138"></a>00138   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00139"></a>00139     ok = ok &amp;&amp; <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#abe73d22669a839178f90e5afa713e616" title="Allocation et initialisation de l&#39;inconnue et des CLs jusqu&#39;a present+dt. + autres initialisations po...">initTimeStep</a>(dt);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 <span class="comment">// Calculs coeffs echange sur l&#39;instant sur lequel doivent agir les operateurs.</span>
<a name="l00142"></a>00142   <span class="keywordtype">double</span> tps=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#ade057f30f3f9cf15a3e1feb74dd36058">temps_defaut</a>();
<a name="l00143"></a>00143   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00144"></a>00144     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>()-&gt;calculer_coeffs_echange(tps);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146   <a class="code" href="classProbleme__base.html#aa8ae6a159c60c6aa7c84ce3355cc09d5" title="true if last computation was validated set to true by validateTimeStep, to false by initTimeStep...">dt_validated</a>=<span class="keyword">false</span>;
<a name="l00147"></a>00147   <a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>=<span class="keyword">true</span>;
<a name="l00148"></a>00148   <span class="keywordflow">return</span> ok;
<a name="l00149"></a>00149 }
<a name="l00150"></a>00150 
<a name="l00151"></a><a class="code" href="classProbleme__base.html#a3ccc01c39fa458b32a7379ae010c8ba0">00151</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__base.html#a3ccc01c39fa458b32a7379ae010c8ba0" title="pour recodage eventuel et appel unifie en python">Probleme_base::solveTimeStep</a>()
<a name="l00152"></a>00152 {
<a name="l00153"></a>00153   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>)
<a name="l00154"></a>00154     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;solveTimeStep&quot;</span>,<span class="stringliteral">&quot;initTimeStep should have been called&quot;</span>);
<a name="l00155"></a>00155 
<a name="l00156"></a>00156   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00157"></a>00157 
<a name="l00158"></a>00158   <span class="keywordtype">bool</span> ok=<a class="code" href="classProbleme__base.html#a3ccc01c39fa458b32a7379ae010c8ba0" title="pour recodage eventuel et appel unifie en python">Probleme_U::solveTimeStep</a>();
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">// Calculs coeffs echange sur l&#39;instant sur lequel doivent agir les operateurs.</span>
<a name="l00161"></a>00161   <span class="keywordtype">double</span> tps=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#ade057f30f3f9cf15a3e1feb74dd36058">temps_defaut</a>();
<a name="l00162"></a>00162   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00163"></a>00163     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>()-&gt;calculer_coeffs_echange(tps);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165   <span class="keywordflow">return</span> ok;
<a name="l00166"></a>00166 }
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="classProbleme__base.html#ac842b7d7fefe1155fffb69e4bac481b5">00168</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__base.html#ac842b7d7fefe1155fffb69e4bac481b5" title="In the case solveTimeStep uses an iterative process, this method executes a single iteration...">Probleme_base::iterateTimeStep</a>(<span class="keywordtype">bool</span>&amp; converged)
<a name="l00169"></a>00169 {
<a name="l00170"></a>00170   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>)
<a name="l00171"></a>00171     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;iterateTimeStep&quot;</span>,<span class="stringliteral">&quot;initTimeStep should have been called&quot;</span>);
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00174"></a>00174   <span class="keywordtype">bool</span> ok=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#ac2664c716af1b7d2526580fae4cd9362" title="Calculate the U(n+1) unknown for each equation (if solved) of the problem with the selected time sche...">iterateTimeStep</a>(converged);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="comment">// Calculs coeffs echange sur l&#39;instant sur lequel doivent agir les operateurs.</span>
<a name="l00177"></a>00177   <span class="keywordtype">double</span> tps=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#ade057f30f3f9cf15a3e1feb74dd36058">temps_defaut</a>();
<a name="l00178"></a>00178   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00179"></a>00179     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>()-&gt;calculer_coeffs_echange(tps);
<a name="l00180"></a>00180 
<a name="l00181"></a>00181   <span class="keywordflow">return</span> ok;
<a name="l00182"></a>00182 }
<a name="l00183"></a>00183 
<a name="l00184"></a><a class="code" href="classProbleme__base.html#a9671bf3444fe91303e454ff61d64c79c">00184</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__base.html#a9671bf3444fe91303e454ff61d64c79c" title="ATTENTION : Rentre ici tout ce qui ne correspond pas a l&#39;API normale de Problem. Actuellement on y me...">Probleme_base::updateGivenFields</a>()
<a name="l00185"></a>00185 {
<a name="l00186"></a>00186   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00187"></a>00187   <span class="keywordtype">bool</span> ok=<span class="keyword">true</span>;
<a name="l00188"></a>00188   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00189"></a>00189     ok = ok &amp;&amp; <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a769801bc7ebb7a6be88e34d02cabc26b">updateGivenFields</a>();
<a name="l00190"></a>00190   <span class="keywordflow">return</span> ok;
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00193"></a><a class="code" href="classProbleme__base.html#ade98c0ff07dca066bc317d2ec66de875">00193</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#ade98c0ff07dca066bc317d2ec66de875" title="Validates the calculated unknown by moving the present time at the end of the time step...">Probleme_base::validateTimeStep</a>()
<a name="l00194"></a>00194 {
<a name="l00195"></a>00195   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>)
<a name="l00196"></a>00196     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;validateTimeStep&quot;</span>,<span class="stringliteral">&quot;initTimeStep should have been called&quot;</span>);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00199"></a>00199   <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a706a4d4501977124dd5f6cdb719ab2ee">validateTimeStep</a>();
<a name="l00200"></a>00200   <a class="code" href="classProbleme__base.html#aa52f4cf664ab2e51384b283b3a14b9db" title="Verifie que la place necessaire existe sur le disque dur.">allocation</a>();
<a name="l00201"></a>00201 
<a name="l00202"></a>00202   <a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>=<span class="keyword">false</span>;
<a name="l00203"></a>00203   <a class="code" href="classProbleme__base.html#aa8ae6a159c60c6aa7c84ce3355cc09d5" title="true if last computation was validated set to true by validateTimeStep, to false by initTimeStep...">dt_validated</a>=<span class="keyword">true</span>;
<a name="l00204"></a>00204 }
<a name="l00205"></a>00205 
<a name="l00206"></a><a class="code" href="classProbleme__base.html#a5670dd7f9e29f8af91969cf55b25dc3a">00206</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a5670dd7f9e29f8af91969cf55b25dc3a" title="This method is called once at the end, after any other one. It frees the memory and saves anything th...">Probleme_base::terminate</a>()
<a name="l00207"></a>00207 {
<a name="l00208"></a>00208   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a7f91a0cc48016699ccaf3ebb9ece926d" title="true if initialize was called">initialized</a>)
<a name="l00209"></a>00209     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;terminate&quot;</span>,<span class="stringliteral">&quot;initialize should have been called&quot;</span>);
<a name="l00210"></a>00210   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#ae090aa9be770fefc4d026ad68eaa945d" title="true if terminate was called">terminated</a>)
<a name="l00211"></a>00211     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;terminate&quot;</span>,<span class="stringliteral">&quot;terminate should not have been called&quot;</span>);
<a name="l00212"></a>00212   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>)
<a name="l00213"></a>00213     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;terminate&quot;</span>,<span class="stringliteral">&quot;time step should be validated or aborted first&quot;</span>);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00216"></a>00216   <a class="code" href="classProbleme__base.html#a948dcfd838e16c3d9e428c7752ea7123" title="Finit le postraitement et sauve le probleme dans un fichier. Fermeture du fichier associe au postrait...">finir</a>();
<a name="l00217"></a>00217   <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#ab106fd1df4dd6adb1b050693a06eaff5">terminate</a>();
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   <a class="code" href="classProbleme__base.html#ae090aa9be770fefc4d026ad68eaa945d" title="true if terminate was called">terminated</a>=<span class="keyword">true</span>;
<a name="l00220"></a>00220 }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="comment">// Adds the input fields names this pb understands to noms</span>
<a name="l00223"></a><a class="code" href="classProbleme__base.html#aac77b3b9ceed7cba8adadda9623a5a7e">00223</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#aac77b3b9ceed7cba8adadda9623a5a7e" title="This method is used to find the names of input fields understood by the Problem.">Probleme_base::getInputFieldsNames</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms)<span class="keyword"> const</span>
<a name="l00224"></a>00224 <span class="keyword"></span>{
<a name="l00225"></a>00225   <span class="keywordtype">int</span> n=<a class="code" href="classProbleme__base.html#a0b6b00852e9d03a3aa87f7bb0d0704e9" title="List of input fields inside this problem.">input_fields</a>.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00226"></a>00226   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> nouveaux_noms(n);
<a name="l00227"></a>00227   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n; i++)
<a name="l00228"></a>00228     nouveaux_noms[i]=<a class="code" href="classProbleme__base.html#a0b6b00852e9d03a3aa87f7bb0d0704e9" title="List of input fields inside this problem.">input_fields</a>[i]-&gt;<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>();
<a name="l00229"></a>00229 <span class="comment">// GF pour contourner un bug dans add() si vecteur null</span>
<a name="l00230"></a>00230   <span class="keywordflow">if</span> (n)
<a name="l00231"></a>00231     noms.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(nouveaux_noms);
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 <span class="comment">// Adds the input fields names this pb understands to noms</span>
<a name="l00235"></a><a class="code" href="classProbleme__base.html#ac45d56813e7c23dc7a7861a35acf1dba">00235</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#ac45d56813e7c23dc7a7861a35acf1dba" title="This method is used to find the names of output fields understood by the Problem.">Probleme_base::getOutputFieldsNames</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms)<span class="keyword"> const</span>
<a name="l00236"></a>00236 <span class="keyword"></span>{
<a name="l00237"></a>00237   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#a6e1ac01728ed55a4fac04cbcbeb69169">postraitements</a>().<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>(); i++)
<a name="l00238"></a>00238     {
<a name="l00239"></a>00239       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>,<a class="code" href="classProbleme__base.html#a6e1ac01728ed55a4fac04cbcbeb69169">postraitements</a>()(i).<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>()))
<a name="l00240"></a>00240         {
<a name="l00241"></a>00241 <span class="comment">// LIST(Nom) suite;</span>
<a name="l00242"></a>00242           <span class="keyword">const</span> <a class="code" href="classListe__Champ__Generique.html">Liste_Champ_Generique</a>&amp; liste_champ= <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>,<a class="code" href="classProbleme__base.html#a6e1ac01728ed55a4fac04cbcbeb69169">postraitements</a>()(i).<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>()).champs_post_complet();
<a name="l00243"></a>00243           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0; ii&lt;liste_champ.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>(); ii++)
<a name="l00244"></a>00244             noms.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(liste_champ(ii).<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>().get_nom_post() );
<a name="l00245"></a>00245 
<a name="l00246"></a>00246         }
<a name="l00247"></a>00247     }
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 
<a name="l00251"></a>00251 <span class="comment">//</span>
<a name="l00252"></a>00252 <span class="comment">//</span>
<a name="l00253"></a>00253 <span class="comment">//</span>
<a name="l00254"></a>00254 <span class="comment">//</span>
<a name="l00255"></a>00255 <span class="comment">//</span><span class="comment"></span>
<a name="l00256"></a>00256 <span class="comment">//! Si force=1, effectue le postraitement sans tenir compte des&lt;br&gt;frequences de postraitement.&lt;br&gt;Le postraitement est mis a jour et les traitements eventuels sur&lt;br&gt;les sondes, champs et statistiques sont effectues.&lt;br&gt;Si force=0, tient compte des frequences d&#39;impression demandees.</span>
<a name="l00257"></a><a class="code" href="classProbleme__base.html#a92b16c8d3d7d0209476e77700afb0aad">00257</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a92b16c8d3d7d0209476e77700afb0aad" title="Si force=1, effectue le postraitement sans tenir compte des frequences de postraitement. Le postraitement est mis a jour et les traitements eventuels sur les sondes, champs et statistiques sont effectues. Si force=0, tient compte des frequences d&#39;impression demandees.">Probleme_base::postraiter</a>(<span class="keywordtype">int</span> force)
<a name="l00258"></a>00258 {
<a name="l00259"></a>00259   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#a62a4ba40c40d7fc279c826e09f6e242a">postraitement_counter_</a>);
<a name="l00260"></a>00260   <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch = <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>();
<a name="l00261"></a>00261   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00262"></a>00262   <span class="keywordflow">if</span> (sch.<a class="code" href="classSchema__Temps__base.html#a247769eddf9c0bfcaabc50b8dd90d401" title="Renvoie le nombre de pas de temps effectues.">nb_pas_dt</a>()!=0)
<a name="l00263"></a>00263     <a class="code" href="classProbleme__base.html#ade62bfdea67e711ee9e7d8f64efcfa9b" title="Appelle imprimer sur chaque equation.">imprimer</a>(<a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>);
<a name="l00264"></a>00264   <span class="keywordflow">if</span> (force)
<a name="l00265"></a>00265     {
<a name="l00266"></a>00266 <span class="comment">// Les sources postraitables (Terme_Source_Acceleration) ne sont pas mis a jour</span>
<a name="l00267"></a>00267 <span class="comment">// pour le temps final et ne font pas partie des champs_crees_ du postraitement</span>
<a name="l00268"></a>00268 <span class="comment">// qui eux sont mis a jour par les_postraitements.mettre_a_jour.</span>
<a name="l00269"></a>00269 <span class="comment">// On les met donc a jour ici</span>
<a name="l00270"></a>00270 
<a name="l00271"></a>00271       <span class="keyword">const</span> <span class="keywordtype">int</span> nb_pas_dt_max = sch.<a class="code" href="classSchema__Temps__base.html#a27bf9c5a67bf4a1ddd036640ebcb26bc" title="Renvoie une reference sur le nombre de pas maxi.">nb_pas_dt_max</a>();
<a name="l00272"></a>00272       <span class="keywordtype">int</span>&amp; indice_nb_pas_dt = sch.<a class="code" href="classSchema__Temps__base.html#a39c3649372a02603421fb145af406d0c">set_indice_nb_pas_dt_max_atteint</a>();
<a name="l00273"></a>00273       <span class="keywordtype">int</span>&amp; indice_tps_final = sch.<a class="code" href="classSchema__Temps__base.html#aa47e9e411eda2625104721fe302a9141">set_indice_tps_final_atteint</a>();
<a name="l00274"></a>00274       <span class="keyword">const</span> <span class="keywordtype">double</span> t_init = sch.<a class="code" href="classSchema__Temps__base.html#a2389e67de1603768ab6b1bd396e0adba" title="Renvoie le temps initial.">temps_init</a>();
<a name="l00275"></a>00275       <span class="keyword">const</span> <span class="keywordtype">double</span> t_max = sch.<a class="code" href="classSchema__Temps__base.html#a1c3b1eb35bf0fc0da015c27ec33b710a" title="Renvoie une reference sur le temps maximum.">temps_max</a>();
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 <span class="comment">// Test pour eviter de repeter le postraitement a l instant initial</span>
<a name="l00278"></a>00278 <span class="comment">// Cela evite un plantage dans le cas d un postraitement au format meshtv</span>
<a name="l00279"></a>00279 
<a name="l00280"></a>00280       <span class="keywordflow">if</span> (!((indice_nb_pas_dt) &amp;&amp; (nb_pas_dt_max==0))
<a name="l00281"></a>00281           &amp;&amp; (!((indice_tps_final) &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(t_init,t_max)))))
<a name="l00282"></a>00282         {
<a name="l00283"></a>00283           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00284"></a>00284             <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a3c8ac50e3e7b6ed29024a43e828a5396" title="Renvoie les termes sources asssocies a l&#39;equation.">sources</a>().<a class="code" href="classSources.html#aa993ae270b7536a4d1a321899b905bf8" title="Mise a jour en temps, de toute les sources de la liste.">mettre_a_jour</a>(<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().temps_courant());
<a name="l00285"></a>00285 
<a name="l00286"></a>00286           <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#af73afcb31f834ac13a2912b5b1a5b78e">mettre_a_jour</a>(<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().temps_courant());
<a name="l00287"></a>00287           <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#ac49d716c8bbc7d93d4c0e6a1f44d55d4">postraiter</a>();
<a name="l00288"></a>00288           <span class="keywordflow">if</span> (nb_pas_dt_max==0) indice_nb_pas_dt=1;
<a name="l00289"></a>00289           <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(t_init,t_max)) indice_tps_final = 1;
<a name="l00290"></a>00290         }
<a name="l00291"></a>00291     }
<a name="l00292"></a>00292   <span class="keywordflow">else</span>
<a name="l00293"></a>00293     {
<a name="l00294"></a>00294       <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#abdbc93cbc82df638b9f1b639cb9c11d5">traiter_postraitement</a>();
<a name="l00295"></a>00295     }
<a name="l00296"></a>00296   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#a62a4ba40c40d7fc279c826e09f6e242a">postraitement_counter_</a>);
<a name="l00297"></a>00297   <span class="keywordflow">return</span> 1;
<a name="l00298"></a>00298 }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300 <span class="comment">//</span>
<a name="l00301"></a>00301 <span class="comment">//</span>
<a name="l00302"></a><a class="code" href="classProbleme__base.html#ae8a03170ff60969b1b69f3af6036fb0d">00302</a> <span class="keywordtype">double</span> <a class="code" href="classProbleme__base.html#ae8a03170ff60969b1b69f3af6036fb0d" title="Compute the value the Problem would like for the next time step. This value will not necessarily be u...">Probleme_base::computeTimeStep</a>(<span class="keywordtype">bool</span>&amp; stop)<span class="keyword"> const</span>
<a name="l00303"></a>00303 <span class="keyword"></span>{
<a name="l00304"></a>00304   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a7f91a0cc48016699ccaf3ebb9ece926d" title="true if initialize was called">initialized</a>)
<a name="l00305"></a>00305     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;computeTimeStep&quot;</span>,<span class="stringliteral">&quot;initialize should have been called&quot;</span>);
<a name="l00306"></a>00306   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#ae090aa9be770fefc4d026ad68eaa945d" title="true if terminate was called">terminated</a>)
<a name="l00307"></a>00307     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;computeTimeStep&quot;</span>,<span class="stringliteral">&quot;terminate should not have been called&quot;</span>);
<a name="l00308"></a>00308 
<a name="l00309"></a>00309   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00310"></a>00310   <span class="keywordtype">double</span> dt=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a7ecf5cca7b00dc0f4d457dd240d620cc">computeTimeStep</a>(stop);
<a name="l00311"></a>00311   <span class="keywordflow">return</span> dt;
<a name="l00312"></a>00312 }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 
<a name="l00315"></a><a class="code" href="classProbleme__base.html#a5d20c9f5f233e9b9da9e80e5be3b9505">00315</a> <span class="keywordtype">bool</span> <a class="code" href="classProbleme__base.html#a5d20c9f5f233e9b9da9e80e5be3b9505" title="Tells if the Problem unknowns have changed during the last time step.">Probleme_base::isStationary</a>()<span class="keyword"> const</span>
<a name="l00316"></a>00316 <span class="keyword"></span>{
<a name="l00317"></a>00317   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#aa8ae6a159c60c6aa7c84ce3355cc09d5" title="true if last computation was validated set to true by validateTimeStep, to false by initTimeStep...">dt_validated</a>)
<a name="l00318"></a>00318     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;isStationary&quot;</span>,<span class="stringliteral">&quot;validateTimeStep should have been called&quot;</span>);
<a name="l00319"></a>00319   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#ae090aa9be770fefc4d026ad68eaa945d" title="true if terminate was called">terminated</a>)
<a name="l00320"></a>00320     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;isStationary&quot;</span>,<span class="stringliteral">&quot;terminate should not have been called&quot;</span>);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5db611d7eb92f49bbc0562e547c5131c" title="Retourne 1 si lors du dernier pas de temps, le probleme n&#39;a pas evolue.">isStationary</a>();
<a name="l00323"></a>00323 }
<a name="l00324"></a>00324 
<a name="l00325"></a><a class="code" href="classProbleme__base.html#a6e263de3f0bfecf2de291490dea1aec8">00325</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a6e263de3f0bfecf2de291490dea1aec8" title="Tells to the Problem that stationary is reached or not.">Probleme_base::setStationary</a>(<span class="keywordtype">bool</span> flag)
<a name="l00326"></a>00326 {
<a name="l00327"></a>00327   <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#afb9abf7143037e8215cdf57e663e7599">set_stationnaires_atteints</a>(flag);
<a name="l00328"></a>00328 }
<a name="l00329"></a>00329 
<a name="l00330"></a><a class="code" href="classProbleme__base.html#aea05204e5a5bc8ee97dd8d0a50627ea6">00330</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#aea05204e5a5bc8ee97dd8d0a50627ea6" title="Aborts the resolution of the current time step.">Probleme_base::abortTimeStep</a>()
<a name="l00331"></a>00331 {
<a name="l00332"></a>00332   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>)
<a name="l00333"></a>00333     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;abortTimeStep&quot;</span>,<span class="stringliteral">&quot;initTimeStep should have been called&quot;</span>);
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5fa2d6fdaa5e161a4c28e579372dbd2f">abortTimeStep</a>();
<a name="l00336"></a>00336   <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classMilieu__base.html#a634b1a124c9b87082f3c01fc8334f770">abortTimeStep</a>();
<a name="l00337"></a>00337   <a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>=<span class="keyword">false</span>;
<a name="l00338"></a>00338 }
<a name="l00339"></a>00339 
<a name="l00340"></a><a class="code" href="classProbleme__base.html#ab5471284bed7f5d95b3487232747014a">00340</a> <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classField__base.html">Field_base</a>) <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>::findInputField(const <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name)<span class="keyword"> const</span>
<a name="l00341"></a>00341 <span class="keyword"></span>{
<a name="l00342"></a>00342 <span class="comment">// WEC : there should be a better way to scan the list</span>
<a name="l00343"></a>00343   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;input_fields.size(); i++)
<a name="l00344"></a>00344     {
<a name="l00345"></a>00345       <span class="keywordflow">if</span> (input_fields[i]-&gt;le_nom()==name)
<a name="l00346"></a>00346         <span class="keywordflow">return</span> input_fields[i];
<a name="l00347"></a>00347     }
<a name="l00348"></a>00348   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classField__base.html">Field_base</a>) ch;
<a name="l00349"></a>00349   <span class="keywordflow">return</span> ch;
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a><a class="code" href="classProbleme__base.html#a6ceca0e730b539581eeeea3b72ac8963">00352</a> <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Generique__base.html" title="Classe de base des champs generiques pour importation d un champ discret et actions elementaires sur ...">Champ_Generique_base</a>) <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>::findOutputField(const <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name)<span class="keyword"> const</span>
<a name="l00353"></a>00353 <span class="keyword"></span>{
<a name="l00354"></a>00354   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Generique__base.html" title="Classe de base des champs generiques pour importation d un champ discret et actions elementaires sur ...">Champ_Generique_base</a>) ch;
<a name="l00355"></a>00355   <span class="keywordflow">if</span> (comprend_champ_post(name))
<a name="l00356"></a>00356     {
<a name="l00357"></a>00357       ch=get_champ_post(name);
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359   <span class="keywordflow">return</span> ch;
<a name="l00360"></a>00360 }
<a name="l00361"></a>00361 <span class="comment">//</span>
<a name="l00362"></a>00362 <span class="comment">// //</span>
<a name="l00363"></a>00363 <span class="comment">// Fin de l&#39;implementation de l&#39;interface de Probleme_U  //</span>
<a name="l00364"></a>00364 <span class="comment">// //</span>
<a name="l00365"></a>00365 <span class="comment">//</span>
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 <span class="comment">// B.Math. 21/09/2004: quelques initialisations, ca fait pas de mal...</span>
<a name="l00368"></a><a class="code" href="classProbleme__base.html#a0277aca40648979e9ebad22bb1424a67">00368</a> <a class="code" href="classProbleme__base.html#a0277aca40648979e9ebad22bb1424a67">Probleme_base::Probleme_base</a>() :
<a name="l00369"></a>00369 <span class="comment">// ficsauv(0),</span>
<a name="l00370"></a>00370   osauv_hdf_(0),
<a name="l00371"></a>00371   reprise_effectuee_(0),
<a name="l00372"></a>00372   reprise_version_(155),
<a name="l00373"></a>00373   restart_file(0),
<a name="l00374"></a>00374   initialized(false),
<a name="l00375"></a>00375   terminated(false),
<a name="l00376"></a>00376   dt_defined(false),
<a name="l00377"></a>00377   dt_validated(false),
<a name="l00378"></a>00378   coupled_(0)
<a name="l00379"></a>00379 {
<a name="l00380"></a>00380   <a class="code" href="classProbleme__base.html#a772bbf68d79a233fecfecf8bfc929ea8">tstat_deb_</a>=<a class="code" href="classProbleme__base.html#a86a8701f188e36f9cf8f5e399c926d6e">tstat_fin_</a>=-1;
<a name="l00381"></a>00381 }
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 <span class="comment">// Precondition:</span>
<a name="l00384"></a>00384 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00385"></a>00385 <span class="comment">// Signification: flot de sortie</span>
<a name="l00386"></a>00386 <span class="comment">// Valeurs par defaut:</span>
<a name="l00387"></a>00387 <span class="comment">// Contraintes:</span>
<a name="l00388"></a>00388 <span class="comment">// Acces: entree/sortie</span>
<a name="l00389"></a>00389 <span class="comment">// Exception:</span>
<a name="l00390"></a>00390 <span class="comment">// Effets de bord:</span>
<a name="l00391"></a>00391 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00392"></a>00392 <span class="comment">//</span>
<a name="l00393"></a>00393 <span class="comment">//</span>
<a name="l00394"></a>00394 <span class="comment">//</span>
<a name="l00395"></a>00395 <span class="comment">//</span>
<a name="l00396"></a>00396 <span class="comment">//</span><span class="comment"></span>
<a name="l00397"></a>00397 <span class="comment">//! Surcharge Objet_U::printOn(Sortie\&amp;)&lt;br&gt;Ecriture d&#39;un probleme sur un flot de sortie.&lt;br&gt;!! Attention n&#39;est pas symetrique de la lecture !!&lt;br&gt;On ecrit les equations, le postraitement et le domaine&lt;br&gt;discretise.</span>
<a name="l00398"></a>00398 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00399"></a>00399 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00400"></a>00400 <span class="comment">Contraintes: */</span>
<a name="l00401"></a><a class="code" href="classProbleme__base.html#a1e7b6d16524c10c4ae245f6f38ac87f4">00401</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classProbleme__base.html#a1e7b6d16524c10c4ae245f6f38ac87f4" title="Surcharge Objet_U::printOn(Sortie&amp;) Ecriture d&#39;un probleme sur un flot de sortie. !! Attention n&#39;est ...">Probleme_base::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00402"></a>00402 <span class="keyword"></span>{
<a name="l00403"></a>00403   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00404"></a>00404     os &lt;&lt; <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i) &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00405"></a>00405   os &lt;&lt; <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>;
<a name="l00406"></a>00406   os &lt;&lt; <a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>;
<a name="l00407"></a>00407   <span class="keywordflow">return</span> os;
<a name="l00408"></a>00408 }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="comment">// Retourne la version du format de sauvegarde</span>
<a name="l00411"></a>00411 <span class="comment">// 151 pour dire que c&#39;est la version initiee a la version 1.5.1 de TRUST</span>
<a name="l00412"></a><a class="code" href="Probleme__base_8cpp.html#a2dd9feec1537f5f3d3ac1ab13c394940">00412</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="Probleme__base_8cpp.html#a2dd9feec1537f5f3d3ac1ab13c394940">version_format_sauvegarde</a>()
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414   <span class="keywordflow">return</span> 184;
<a name="l00415"></a>00415 }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417 <span class="comment">// Precondition:</span>
<a name="l00418"></a>00418 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00419"></a>00419 <span class="comment">// Signification: flot d&#39;entree</span>
<a name="l00420"></a>00420 <span class="comment">// Valeurs par defaut:</span>
<a name="l00421"></a>00421 <span class="comment">// Contraintes:</span>
<a name="l00422"></a>00422 <span class="comment">// Acces: entree/sortie</span>
<a name="l00423"></a>00423 <span class="comment">// Exception: pas d&#39;accolade ouvrante en debut de format</span>
<a name="l00424"></a>00424 <span class="comment">// Exception: mot clef &quot;Postraitement&quot; n&#39;est pas la</span>
<a name="l00425"></a>00425 <span class="comment">// Exception: format de sauvegarde doit etre &quot;binaire&quot; ou &quot;formatte&quot;</span>
<a name="l00426"></a>00426 <span class="comment">// Exception: pas d&#39;accolade fermante en fin de jeu de donnee</span>
<a name="l00427"></a>00427 <span class="comment">// Effets de bord:</span>
<a name="l00428"></a>00428 <span class="comment">// Postcondition: Le pb est associe au postraitement.</span>
<a name="l00429"></a>00429 <span class="comment">//</span>
<a name="l00430"></a>00430 <span class="comment">//</span>
<a name="l00431"></a>00431 <span class="comment">//</span>
<a name="l00432"></a>00432 <span class="comment">//</span>
<a name="l00433"></a>00433 <span class="comment">//</span>
<a name="l00434"></a>00434 <span class="comment">//</span>
<a name="l00435"></a>00435 <span class="comment">//</span>
<a name="l00436"></a>00436 <span class="comment">//</span>
<a name="l00437"></a>00437 <span class="comment">//</span>
<a name="l00438"></a>00438 <span class="comment">//</span>
<a name="l00439"></a>00439 <span class="comment">//</span>
<a name="l00440"></a>00440 <span class="comment">//</span><span class="comment"></span>
<a name="l00441"></a>00441 <span class="comment">//! Lecture d&#39;un probleme dans un flot d&#39;entree, et ouverture du&lt;br&gt;flot de sauvegarde.&lt;br&gt;Format:&lt;br&gt;{&lt;br&gt;nom_equation bloc de lecture d&#39;une equation&lt;br&gt;Postraitement bloc de lecture postraitement&lt;br&gt;reprise | sauvegarde | sauvegarde_simple&lt;br&gt;formatte | binaire&lt;br&gt;nom_de_fichier&lt;br&gt;}&lt;br&gt;L&#39;option sauvegarde_simple permet de sauver le probleme dans le fichier choisi&lt;br&gt;en ecrasant a chaque fois les sauvegardes precedentes : cela permet d&#39;economiser de la place disque.</span>
<a name="l00442"></a>00442 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00443"></a>00443 <span class="comment">Signification: le flot d&#39;entre modifie&lt;br&gt;</span>
<a name="l00444"></a>00444 <span class="comment">Contraintes: */</span>
<a name="l00445"></a><a class="code" href="classProbleme__base.html#a1357aa4e118327b21ecbf939fb980b26">00445</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classProbleme__base.html#a1357aa4e118327b21ecbf939fb980b26" title="Lecture d&#39;un probleme dans un flot d&#39;entree, et ouverture du flot de sauvegarde. Format: { nom_equati...">Probleme_base::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00446"></a>00446 {
<a name="l00447"></a>00447   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Reading of the problem &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00448"></a>00448   <a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>=<span class="stringliteral">&quot;binaire&quot;</span>;
<a name="l00449"></a>00449   <a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>=<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>();
<a name="l00450"></a>00450 <span class="comment">// Desormais les fichiers de sauvegarde sont nommes par defaut nomducas_nomdupb.sauv</span>
<a name="l00451"></a>00451   <a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>+=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l00452"></a>00452   <a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>+=<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>();
<a name="l00453"></a>00453   <a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>+= <span class="stringliteral">&quot;.sauv&quot;</span>;
<a name="l00454"></a>00454   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> accolade_ouverte(<span class="stringliteral">&quot;{&quot;</span>);
<a name="l00455"></a>00455   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> accolade_fermee(<span class="stringliteral">&quot;}&quot;</span>);
<a name="l00456"></a>00456   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458   is &gt;&gt; motlu;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460   <span class="keywordflow">if</span> (motlu != accolade_ouverte)
<a name="l00461"></a>00461     {
<a name="l00462"></a>00462       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We expected { to start to read the problem&quot;</span> &lt;&lt; finl;
<a name="l00463"></a>00463       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00464"></a>00464     }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466   <a class="code" href="classProbleme__base.html#aae09b92d0d77c7be0a10bee0d4b05809" title="Lecture des equations du probleme.">lire_equations</a>(is);
<a name="l00467"></a>00467 
<a name="l00468"></a>00468   is &gt;&gt; motlu;
<a name="l00469"></a>00469 <span class="comment">// Si le postraitement comprend le mot, on en lit un autre...</span>
<a name="l00470"></a>00470   <span class="keywordflow">while</span> (<a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#ae404476a38604567bd154654a0bed23d">lire_postraitements</a>(is, motlu, *<span class="keyword">this</span>))
<a name="l00471"></a>00471     {
<a name="l00472"></a>00472       is &gt;&gt; motlu;
<a name="l00473"></a>00473     }
<a name="l00474"></a>00474 
<a name="l00475"></a>00475   <a class="code" href="classProbleme__base.html#ad0e1472b628450d9748a712ab5f55a2e" title="Complete les equations associees au probleme. Remplissage des references, deleguee aux equations...">completer</a>();
<a name="l00476"></a>00476   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Step verification of data being read in progress...&quot;</span> &lt;&lt; finl;
<a name="l00477"></a>00477   <a class="code" href="classProbleme__base.html#ad0dcfaf599fe0d2e04ef1daf275eb541" title="Verifie que l&#39;objet est complet, coherent, ... NON DEVELOPPE RENVOIE TOUJOURS 1.">verifier</a>();
<a name="l00478"></a>00478   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The read data are coherent&quot;</span> &lt;&lt; finl;
<a name="l00479"></a>00479   <span class="keywordtype">int</span> resume_last_time = 0;
<a name="l00480"></a>00480   <span class="keywordflow">while</span>(1)
<a name="l00481"></a>00481     {
<a name="l00482"></a>00482 <span class="comment">//</span>
<a name="l00483"></a>00483 <span class="comment">// Lecture des options de reprise d&#39;un calcul</span>
<a name="l00484"></a>00484 <span class="comment">//</span>
<a name="l00485"></a>00485       <span class="keywordflow">if</span> ((motlu == <span class="stringliteral">&quot;reprise&quot;</span>) || (motlu == <span class="stringliteral">&quot;resume_last_time&quot;</span>))
<a name="l00486"></a>00486         {
<a name="l00487"></a>00487           resume_last_time = (motlu == <span class="stringliteral">&quot;resume_last_time&quot;</span> ? 1 : 0 );
<a name="l00488"></a>00488 <span class="comment">// remise a defaut a zero pour pouvoir faire une reprise std apres une reprise xyz</span>
<a name="l00489"></a>00489           <a class="code" href="classEcritureLectureSpecial.html#a6dd032429a52f1ea4b48eb913958f456">EcritureLectureSpecial::mode_lec</a>=0;
<a name="l00490"></a>00490           <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> format_rep;
<a name="l00491"></a>00491           is &gt;&gt; format_rep;
<a name="l00492"></a>00492           <span class="keywordflow">if</span> ((format_rep != <span class="stringliteral">&quot;formatte&quot;</span>) &amp;&amp; (format_rep != <span class="stringliteral">&quot;binaire&quot;</span>)
<a name="l00493"></a>00493               &amp;&amp; (format_rep!=<span class="stringliteral">&quot;xyz&quot;</span>) &amp;&amp; (format_rep!=<span class="stringliteral">&quot;single_hdf&quot;</span>) )
<a name="l00494"></a>00494             {
<a name="l00495"></a>00495               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Restarting calculation... : keyword &quot;</span> &lt;&lt; format_rep &lt;&lt; <span class="stringliteral">&quot; not understood. Waiting for:&quot;</span> &lt;&lt; finl
<a name="l00496"></a>00496                    &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot; formatte|binaire|xyz|single_hdf Filename&quot;</span> &lt;&lt; finl;
<a name="l00497"></a>00497               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00498"></a>00498             }
<a name="l00499"></a>00499 <span class="comment">// Read the filename:</span>
<a name="l00500"></a>00500           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nomfic;
<a name="l00501"></a>00501           is &gt;&gt; nomfic;
<a name="l00502"></a>00502 <span class="comment">// Force reprise hdf au dela d&#39;un certain nombre de rangs MPI:</span>
<a name="l00503"></a>00503           <span class="keywordflow">if</span> (format_rep!=<span class="stringliteral">&quot;xyz&quot;</span> &amp;&amp; <a class="code" href="classProcess.html#a0028ba29b8998170a85d2e0c00293b78">Process::force_single_file</a>(<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(), nomfic)) format_rep = <span class="stringliteral">&quot;single_hdf&quot;</span>;
<a name="l00504"></a>00504 <span class="comment">// Open the file:</span>
<a name="l00505"></a>00505           <a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classEntree__Fichier__base.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">Entree_Fichier_base</a>) fic;
<a name="l00506"></a>00506 <span class="preprocessor">#ifdef MPI_</span>
<a name="l00507"></a>00507 <span class="preprocessor"></span>          <a class="code" href="classEntree__Brute.html" title="An Entree whose main source of data is an arbitrary binary buffer set using the set_data() method...">Entree_Brute</a> input_data;
<a name="l00508"></a>00508           <a class="code" href="classFichierHDFPar.html" title="Parallel collective version of FichierHDF, to be used for all concurrent reading/writing on HDF files...">FichierHDFPar</a> fic_hdf; <span class="comment">//FichierHDF fic_hdf;</span>
<a name="l00509"></a>00509 <span class="preprocessor">#endif</span>
<a name="l00510"></a>00510 <span class="preprocessor"></span>
<a name="l00511"></a>00511           <span class="keywordflow">if</span> (format_rep == <span class="stringliteral">&quot;formatte&quot;</span>)
<a name="l00512"></a>00512             fic.typer(<span class="stringliteral">&quot;LecFicDistribue&quot;</span>);
<a name="l00513"></a>00513           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (format_rep == <span class="stringliteral">&quot;binaire&quot;</span>)
<a name="l00514"></a>00514             fic.typer(<span class="stringliteral">&quot;LecFicDistribueBin&quot;</span>);
<a name="l00515"></a>00515           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (format_rep == <span class="stringliteral">&quot;xyz&quot;</span>)
<a name="l00516"></a>00516             {
<a name="l00517"></a>00517               <a class="code" href="classEcritureLectureSpecial.html#a6dd032429a52f1ea4b48eb913958f456">EcritureLectureSpecial::mode_lec</a>=1;
<a name="l00518"></a>00518               fic.typer(<a class="code" href="classEcritureLectureSpecial.html#ad789976780f62f37c8b544ad70cc9658" title="&quot;EFichierBin&quot; was the past (&lt;=1.6.9) and &quot;LecFicPartageMPIIO&quot; is may be the future">EcritureLectureSpecial::Input</a>);
<a name="l00519"></a>00519             }
<a name="l00520"></a>00520 
<a name="l00521"></a>00521           <span class="keywordflow">if</span>( format_rep == <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l00522"></a>00522             {
<a name="l00523"></a>00523 <span class="preprocessor">#ifdef MPI_</span>
<a name="l00524"></a>00524 <span class="preprocessor"></span>              <a class="code" href="classLecFicDiffuse.html" title="Cette classe implemente les operateurs et les methodes virtuelles de la classe EFichier de la facon s...">LecFicDiffuse</a> <a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>;
<a name="l00525"></a>00525               <span class="keywordflow">if</span> (!test.<a class="code" href="classLecFicDiffuse.html#a2e4f3199de5e1b47edcffc68952c7be8" title="Ouverture du fichier. Cette methode doit etre appelee par tous les processeurs du groupe...">ouvrir</a>(nomfic))
<a name="l00526"></a>00526                 {
<a name="l00527"></a>00527                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error! &quot;</span> &lt;&lt; nomfic &lt;&lt; <span class="stringliteral">&quot; file not found ! &quot;</span> &lt;&lt; finl;
<a name="l00528"></a>00528                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00529"></a>00529                 }
<a name="l00530"></a>00530               fic_hdf.<a class="code" href="classFichierHDF.html#a55803f961da3af25680be6cec26e85ec">open</a>(nomfic, <span class="keyword">true</span>);
<a name="l00531"></a>00531               fic_hdf.<a class="code" href="classFichierHDF.html#a4b1e63bb02aebe3cd085af22cdd870af">read_dataset</a>(<span class="stringliteral">&quot;/sauv&quot;</span>, <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),input_data);
<a name="l00532"></a>00532 <span class="preprocessor">#endif</span>
<a name="l00533"></a>00533 <span class="preprocessor"></span>            }
<a name="l00534"></a>00534           <span class="keywordflow">else</span>
<a name="l00535"></a>00535             {
<a name="l00536"></a>00536               fic-&gt;ouvrir(nomfic);
<a name="l00537"></a>00537               <span class="keywordflow">if</span>(fic-&gt;fail())
<a name="l00538"></a>00538                 {
<a name="l00539"></a>00539                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Error during the opening of the restart file : &quot;</span> &lt;&lt;nomfic&lt;&lt;finl;
<a name="l00540"></a>00540                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00541"></a>00541                 }
<a name="l00542"></a>00542             }
<a name="l00543"></a>00543 
<a name="l00544"></a>00544 <span class="comment">// Restart from the last time</span>
<a name="l00545"></a>00545           <span class="keywordflow">if</span> (resume_last_time)
<a name="l00546"></a>00546             {
<a name="l00547"></a>00547 <span class="comment">// Resume_last_time is supported with xyz format</span>
<a name="l00548"></a>00548 <span class="comment">// if (format_rep == &quot;xyz&quot;)</span>
<a name="l00549"></a>00549 <span class="comment">// {</span>
<a name="l00550"></a>00550 <span class="comment">// Cerr &lt;&lt; &quot;Resume_last_time is not supported with xyz format yet.&quot; &lt;&lt; finl;</span>
<a name="l00551"></a>00551 <span class="comment">// exit();</span>
<a name="l00552"></a>00552 <span class="comment">// }</span>
<a name="l00553"></a>00553 <span class="comment">// Look for the last time and set it to tinit if tinit not set</span>
<a name="l00554"></a>00554               <span class="keywordtype">double</span> last_time;
<a name="l00555"></a>00555               <span class="keywordflow">if</span>(format_rep == <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l00556"></a>00556                 {
<a name="l00557"></a>00557 <span class="preprocessor">#ifdef MPI_</span>
<a name="l00558"></a>00558 <span class="preprocessor"></span>                  last_time = <a class="code" href="Avanc_8cpp.html#a11ada9dd26279df70ef5674143bfea75">get_last_time</a>(input_data);
<a name="l00559"></a>00559 <span class="preprocessor">#endif</span>
<a name="l00560"></a>00560 <span class="preprocessor"></span>                }
<a name="l00561"></a>00561               <span class="keywordflow">else</span>
<a name="l00562"></a>00562                 last_time = <a class="code" href="Avanc_8cpp.html#a11ada9dd26279df70ef5674143bfea75">get_last_time</a>(fic);
<a name="l00563"></a>00563 <span class="comment">// Set the time to restart the calculation</span>
<a name="l00564"></a>00564               <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a7e1f0b8f407c25e07abb8524948e3132">set_temps_courant</a>()=last_time;
<a name="l00565"></a>00565 <span class="comment">// Initialize tinit and current time according last_time</span>
<a name="l00566"></a>00566               <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().temps_init()&gt;-<a class="code" href="Double_8h.html#ae0ee0cebfad5968da0ad6cc7a49e16b6">DMAXFLOAT</a>)
<a name="l00567"></a>00567                 {
<a name="l00568"></a>00568                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;tinit was defined in .data file to &quot;</span>&lt;&lt; <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a2389e67de1603768ab6b1bd396e0adba" title="Renvoie le temps initial.">temps_init</a>()&lt;&lt; <span class="stringliteral">&quot;. The value is fixed to &quot;</span>&lt;&lt;last_time&lt;&lt;<span class="stringliteral">&quot; accroding to resume_last_time_option&quot;</span> &lt;&lt;finl;
<a name="l00569"></a>00569                 }
<a name="l00570"></a>00570               <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a80ab163a9f2bfd0234f39480d89d3599">set_temps_init</a>()=last_time;
<a name="l00571"></a>00571               <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#aaa876cd589523914ae2f75a825be8d36">set_temps_precedent</a>()=last_time;
<a name="l00572"></a>00572               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;==================================================================================================&quot;</span> &lt;&lt; finl;
<a name="l00573"></a>00573               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;In the &quot;</span> &lt;&lt; nomfic &lt;&lt; <span class="stringliteral">&quot; file, we find the last time: &quot;</span> &lt;&lt; last_time &lt;&lt; <span class="stringliteral">&quot; and read the fields.&quot;</span> &lt;&lt; finl;
<a name="l00574"></a>00574               <span class="keywordflow">if</span>( format_rep != <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l00575"></a>00575                 {
<a name="l00576"></a>00576                   fic-&gt;close();
<a name="l00577"></a>00577                   fic-&gt;ouvrir(nomfic);
<a name="l00578"></a>00578                 }
<a name="l00579"></a>00579               <span class="keywordflow">else</span>
<a name="l00580"></a>00580                 {
<a name="l00581"></a>00581 <span class="preprocessor">#ifdef MPI_</span>
<a name="l00582"></a>00582 <span class="preprocessor"></span>                  fic_hdf.<a class="code" href="classFichierHDF.html#a4b1e63bb02aebe3cd085af22cdd870af">read_dataset</a>(<span class="stringliteral">&quot;/sauv&quot;</span>, <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(), input_data);
<a name="l00583"></a>00583 <span class="preprocessor">#endif</span>
<a name="l00584"></a>00584 <span class="preprocessor"></span>                }
<a name="l00585"></a>00585             }
<a name="l00586"></a>00586 <span class="comment">// Lecture de la version du format de sauvegarde si c&#39;est une reprise classique</span>
<a name="l00587"></a>00587 <span class="comment">// Depuis la 1.5.1, on marque le format de sauvegarde en tete des fichiers de sauvegarde</span>
<a name="l00588"></a>00588 <span class="comment">// afin de pouvoir faire evoluer plus facilement ce format dans le futur</span>
<a name="l00589"></a>00589 <span class="comment">// En outre avec la 1.5.1, les faces etant numerotees differemment, il est faux</span>
<a name="l00590"></a>00590 <span class="comment">// de faire une reprise d&#39;un fichier de sauvegarde anterieur et c&#39;est donc un moyen</span>
<a name="l00591"></a>00591 <span class="comment">// de prevenir les utilisateurs: il leur faudra faire une reprise xyz pour poursuivre</span>
<a name="l00592"></a>00592 <span class="comment">// avec la 1.5.1 un calcul lance avec une version anterieure</span>
<a name="l00593"></a>00593 <span class="comment">// Depuis la 1.5.5, Il y a pas une version de format pour le xyz</span>
<a name="l00594"></a>00594           <span class="keywordflow">if</span>(format_rep != <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l00595"></a>00595             fic.valeur() &gt;&gt; motlu;
<a name="l00596"></a>00596           <span class="keywordflow">else</span>
<a name="l00597"></a>00597             {
<a name="l00598"></a>00598 <span class="preprocessor">#ifdef MPI_</span>
<a name="l00599"></a>00599 <span class="preprocessor"></span>              input_data &gt;&gt; motlu;
<a name="l00600"></a>00600 <span class="preprocessor">#endif</span>
<a name="l00601"></a>00601 <span class="preprocessor"></span>            }
<a name="l00602"></a>00602 
<a name="l00603"></a>00603           <span class="keywordflow">if</span> (motlu!=<span class="stringliteral">&quot;FORMAT_SAUVEGARDE:&quot;</span>)
<a name="l00604"></a>00604             {
<a name="l00605"></a>00605               <span class="keywordflow">if</span> (format_rep == <span class="stringliteral">&quot;xyz&quot;</span>)
<a name="l00606"></a>00606                 {
<a name="l00607"></a>00607 <span class="comment">// We close and re-open the file:</span>
<a name="l00608"></a>00608                   fic-&gt;close();
<a name="l00609"></a>00609                   fic-&gt;ouvrir(nomfic);
<a name="l00610"></a>00610                   <a class="code" href="classProbleme__base.html#a4339ceb5f3dbac84a40a8817592e3417">reprise_version_</a> = 151;
<a name="l00611"></a>00611                 }
<a name="l00612"></a>00612               <span class="keywordflow">else</span>
<a name="l00613"></a>00613                 {
<a name="l00614"></a>00614                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;-------------------------------------------------------------------------------------&quot;</span> &lt;&lt; finl;
<a name="l00615"></a>00615                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The resumption file &quot;</span> &lt;&lt; nomfic &lt;&lt; <span class="stringliteral">&quot; can not be read by this version of TRUST&quot;</span> &lt;&lt; finl;
<a name="l00616"></a>00616                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;which is a later version than 1.5. Indeed, the numbering of the faces have changed&quot;</span> &lt;&lt; finl;
<a name="l00617"></a>00617                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;and it would produce an erroneous resumption. If you want to use this version,&quot;</span> &lt;&lt; finl;
<a name="l00618"></a>00618                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;you must do a resumption of the file .xyz saved during the previous calculation&quot;</span> &lt;&lt; finl;
<a name="l00619"></a>00619                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;because this file is independent of the numbering of the faces.&quot;</span> &lt;&lt; finl;
<a name="l00620"></a>00620                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The next backup will be made in a format compatible with the new&quot;</span> &lt;&lt; finl;
<a name="l00621"></a>00621                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;numbering of the faces and you can then redo classical resumptions.&quot;</span> &lt;&lt; finl;
<a name="l00622"></a>00622                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;-------------------------------------------------------------------------------------&quot;</span> &lt;&lt; finl;
<a name="l00623"></a>00623                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00624"></a>00624                 }
<a name="l00625"></a>00625             }
<a name="l00626"></a>00626           <span class="keywordflow">else</span>
<a name="l00627"></a>00627             {
<a name="l00628"></a>00628 <span class="comment">// Lecture du format de Lsauvegarde</span>
<a name="l00629"></a>00629               <span class="keywordflow">if</span>(format_rep != <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l00630"></a>00630                 fic.valeur() &gt;&gt; <a class="code" href="classProbleme__base.html#a4339ceb5f3dbac84a40a8817592e3417">reprise_version_</a>;
<a name="l00631"></a>00631               <span class="keywordflow">else</span>
<a name="l00632"></a>00632                 {
<a name="l00633"></a>00633 <span class="preprocessor">#ifdef MPI_</span>
<a name="l00634"></a>00634 <span class="preprocessor"></span>                  input_data &gt;&gt; <a class="code" href="classProbleme__base.html#a4339ceb5f3dbac84a40a8817592e3417">reprise_version_</a>;
<a name="l00635"></a>00635 <span class="preprocessor">#endif</span>
<a name="l00636"></a>00636 <span class="preprocessor"></span>                }
<a name="l00637"></a>00637               <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a05de57db7288d95f9e67046af585d5ff" title="Calcule le min de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_min</a>(<a class="code" href="classProbleme__base.html#a4339ceb5f3dbac84a40a8817592e3417">reprise_version_</a>)!=<a class="code" href="classProcess.html#a1e9d9f9899b71927cfafae14c7bd048d" title="Calcule le max de x sur tous les processeurs du groupe courant. Remarques : Cette methode doit etre a...">mp_max</a>(<a class="code" href="classProbleme__base.html#a4339ceb5f3dbac84a40a8817592e3417">reprise_version_</a>))
<a name="l00638"></a>00638                 {
<a name="l00639"></a>00639                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The version of the format backup/resumption is not the same in the resumption files &quot;</span> &lt;&lt; nomfic &lt;&lt; finl;
<a name="l00640"></a>00640                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00641"></a>00641                 }
<a name="l00642"></a>00642               <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a4339ceb5f3dbac84a40a8817592e3417">reprise_version_</a>&gt;<a class="code" href="Probleme__base_8cpp.html#a2dd9feec1537f5f3d3ac1ab13c394940">version_format_sauvegarde</a>())
<a name="l00643"></a>00643                 {
<a name="l00644"></a>00644                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The format &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#a4339ceb5f3dbac84a40a8817592e3417">reprise_version_</a> &lt;&lt; <span class="stringliteral">&quot; of the resumption file &quot;</span> &lt;&lt; nomfic &lt;&lt; <span class="stringliteral">&quot; is posterior&quot;</span> &lt;&lt; finl;
<a name="l00645"></a>00645                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;to the format &quot;</span>&lt;&lt;<a class="code" href="Probleme__base_8cpp.html#a2dd9feec1537f5f3d3ac1ab13c394940">version_format_sauvegarde</a>()&lt;&lt;<span class="stringliteral">&quot; recognized by this version of TRUST.&quot;</span> &lt;&lt; finl;
<a name="l00646"></a>00646                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Please use a more recent version.&quot;</span> &lt;&lt; finl;
<a name="l00647"></a>00647                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00648"></a>00648                 }
<a name="l00649"></a>00649             }
<a name="l00650"></a>00650 <span class="comment">// Ecriture du format de reprise</span>
<a name="l00651"></a>00651           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The version of the resumption format of file &quot;</span> &lt;&lt; nomfic &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#a4339ceb5f3dbac84a40a8817592e3417">reprise_version_</a> &lt;&lt; finl;
<a name="l00652"></a>00652           <span class="keywordflow">if</span>(format_rep != <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l00653"></a>00653             <a class="code" href="classProbleme__base.html#a17fab5984df76f24b54aac1238631460" title="Lecture d&#39;un flot d&#39;entree (fichier) pour reprise apres une sauvegarde avec Probleme_base::sauvegarde...">reprendre</a>(fic.valeur());
<a name="l00654"></a>00654           <span class="keywordflow">else</span>
<a name="l00655"></a>00655             {
<a name="l00656"></a>00656 <span class="preprocessor">#ifdef MPI_</span>
<a name="l00657"></a>00657 <span class="preprocessor"></span>              <a class="code" href="classProbleme__base.html#a17fab5984df76f24b54aac1238631460" title="Lecture d&#39;un flot d&#39;entree (fichier) pour reprise apres une sauvegarde avec Probleme_base::sauvegarde...">reprendre</a>(input_data);
<a name="l00658"></a>00658               fic_hdf.<a class="code" href="classFichierHDF.html#ac5d8eb389ee60109c2d60029f442487f">close</a>();
<a name="l00659"></a>00659 <span class="preprocessor">#endif</span>
<a name="l00660"></a>00660 <span class="preprocessor"></span>            }
<a name="l00661"></a>00661           <a class="code" href="classProbleme__base.html#ab6319db0f6ed0bde6db30526d92c3aad">reprise_effectuee_</a>=1;
<a name="l00662"></a>00662         }
<a name="l00663"></a>00663 <span class="comment">//</span>
<a name="l00664"></a>00664 <span class="comment">// Lecture des options de sauvegarde d&#39;un calcul</span>
<a name="l00665"></a>00665 <span class="comment">//</span>
<a name="l00666"></a>00666       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;sauvegarde&quot;</span> || motlu == <span class="stringliteral">&quot;sauvegarde_simple&quot;</span>)
<a name="l00667"></a>00667         {
<a name="l00668"></a>00668 <span class="comment">// restart_file=1: le fichier est ecrasee a chaque sauvegarde (et ne donc contient qu&#39;un seul instant)</span>
<a name="l00669"></a>00669           <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;sauvegarde_simple&quot;</span>) <a class="code" href="classProbleme__base.html#a3757ccb6a335d800d3c9c9d2f9a1427b">restart_file</a>=1;
<a name="l00670"></a>00670           is &gt;&gt; <a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>;
<a name="l00671"></a>00671           <span class="keywordflow">if</span>( (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(format_sauv) != <span class="stringliteral">&quot;binaire&quot;</span>)
<a name="l00672"></a>00672               &amp;&amp; (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(format_sauv) != <span class="stringliteral">&quot;formatte&quot;</span>)
<a name="l00673"></a>00673               &amp;&amp; (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(format_sauv) != <span class="stringliteral">&quot;xyz&quot;</span>)
<a name="l00674"></a>00674               &amp;&amp; (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(format_sauv) != <span class="stringliteral">&quot;single_hdf&quot;</span>) )
<a name="l00675"></a>00675             {
<a name="l00676"></a>00676               <a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>=<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>;
<a name="l00677"></a>00677               format_sauv=<span class="stringliteral">&quot;binaire&quot;</span>;
<a name="l00678"></a>00678             }
<a name="l00679"></a>00679           <span class="keywordflow">else</span>
<a name="l00680"></a>00680             is &gt;&gt; <a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>;
<a name="l00681"></a>00681         }
<a name="l00682"></a>00682       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motlu == accolade_fermee)
<a name="l00683"></a>00683         <span class="keywordflow">break</span>;
<a name="l00684"></a>00684       <span class="keywordflow">else</span>
<a name="l00685"></a>00685         {
<a name="l00686"></a>00686           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Probleme_base::lire_donnees&quot;</span> &lt;&lt; finl;
<a name="l00687"></a>00687           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We expected } instead of &quot;</span> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot; to mark the end of the data set&quot;</span> &lt;&lt; finl;
<a name="l00688"></a>00688           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00689"></a>00689         }
<a name="l00690"></a>00690       is &gt;&gt; motlu;
<a name="l00691"></a>00691     }
<a name="l00692"></a>00692   <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__.html#a1792f7b005c558e7412661aeee781bd2">detach</a>();
<a name="l00693"></a>00693 <span class="comment">// Force sauvegarde hdf au dela d&#39;un certain nombre de rangs MPI:</span>
<a name="l00694"></a>00694   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>!=<span class="stringliteral">&quot;xyz&quot;</span> &amp;&amp; <a class="code" href="classProcess.html#a0028ba29b8998170a85d2e0c00293b78">Process::force_single_file</a>(<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(), <a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>))
<a name="l00695"></a>00695     <a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a> = <span class="stringliteral">&quot;single_hdf&quot;</span>;
<a name="l00696"></a>00696 
<a name="l00697"></a>00697   <span class="keywordflow">if</span> ( (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) != <span class="stringliteral">&quot;binaire&quot;</span>)
<a name="l00698"></a>00698        &amp;&amp; (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) != <span class="stringliteral">&quot;formatte&quot;</span>)
<a name="l00699"></a>00699        &amp;&amp; (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) != <span class="stringliteral">&quot;xyz&quot;</span>)
<a name="l00700"></a>00700        &amp;&amp; (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) != <span class="stringliteral">&quot;single_hdf&quot;</span>) )
<a name="l00701"></a>00701     {
<a name="l00702"></a>00702       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error of backup format&quot;</span> &lt;&lt; finl;
<a name="l00703"></a>00703       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We expected formatte, binaire, xyz, or single_hdf.&quot;</span> &lt;&lt; finl;
<a name="l00704"></a>00704       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00705"></a>00705     }
<a name="l00706"></a>00706   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().temps_init()&lt;=-<a class="code" href="Double_8h.html#ae0ee0cebfad5968da0ad6cc7a49e16b6">DMAXFLOAT</a>)
<a name="l00707"></a>00707     {
<a name="l00708"></a>00708       <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a80ab163a9f2bfd0234f39480d89d3599">set_temps_init</a>()=0;
<a name="l00709"></a>00709       <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a7e1f0b8f407c25e07abb8524948e3132">set_temps_courant</a>()=0;
<a name="l00710"></a>00710     }
<a name="l00711"></a>00711 
<a name="l00712"></a>00712   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#acafc48b3c050d6c292bb8395a7904a33">reprise_effectuee</a>())
<a name="l00713"></a>00713     {
<a name="l00714"></a>00714 <span class="comment">// on teste si dt_ev existe sinon on met reprise a 2</span>
<a name="l00715"></a>00715 <span class="comment">// on recrera l&#39;entete dans dt_ev sinon l&#39;entete est fausse en reprise de pb_couple</span>
<a name="l00716"></a>00716       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier(<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">nom_du_cas</a>());
<a name="l00717"></a>00717       fichier+=<span class="stringliteral">&quot;.dt_ev&quot;</span>;
<a name="l00718"></a>00718       <span class="keyword">struct </span>stat f;
<a name="l00719"></a>00719       <span class="keywordflow">if</span> (stat(fichier,&amp;f))
<a name="l00720"></a>00720         <a class="code" href="classProbleme__base.html#acafc48b3c050d6c292bb8395a7904a33">reprise_effectuee</a>()=2;
<a name="l00721"></a>00721     }
<a name="l00722"></a>00722 
<a name="l00723"></a>00723   <span class="keywordflow">return</span> is ;
<a name="l00724"></a>00724 }
<a name="l00725"></a>00725 
<a name="l00726"></a>00726 <span class="comment">// Precondition:</span>
<a name="l00727"></a>00727 <span class="comment">// Parametre:</span>
<a name="l00728"></a>00728 <span class="comment">// Signification:</span>
<a name="l00729"></a>00729 <span class="comment">// Valeurs par defaut:</span>
<a name="l00730"></a>00730 <span class="comment">// Contraintes:</span>
<a name="l00731"></a>00731 <span class="comment">// Acces:</span>
<a name="l00732"></a>00732 <span class="comment">// </span>
<a name="l00733"></a>00733 <span class="comment">// Signification:</span>
<a name="l00734"></a>00734 <span class="comment">// Contraintes:</span>
<a name="l00735"></a>00735 <span class="comment">// Exception:</span>
<a name="l00736"></a>00736 <span class="comment">// Effets de bord:</span>
<a name="l00737"></a>00737 <span class="comment">// Postcondition: les equations ont ete lues</span>
<a name="l00738"></a>00738 <span class="comment">//</span><span class="comment"></span>
<a name="l00739"></a>00739 <span class="comment">//! Lecture des equations du probleme.</span>
<a name="l00740"></a><a class="code" href="classProbleme__base.html#aae09b92d0d77c7be0a10bee0d4b05809">00740</a> <span class="comment"></span><a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classProbleme__base.html#aae09b92d0d77c7be0a10bee0d4b05809" title="Lecture des equations du probleme.">Probleme_base::lire_equations</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00741"></a>00741 {
<a name="l00742"></a>00742   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> un_nom;
<a name="l00743"></a>00743   <span class="keywordtype">int</span> nb_eq= <a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>();
<a name="l00744"></a>00744   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Reading of the equations&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00745"></a>00745 
<a name="l00746"></a>00746   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_eq; i++)
<a name="l00747"></a>00747     {
<a name="l00748"></a>00748       is &gt;&gt; un_nom ;
<a name="l00749"></a>00749       is &gt;&gt; <a class="code" href="classProbleme__base.html#af24921237a504055a138204849ef1ea4">getset_equation_by_name</a>(un_nom);
<a name="l00750"></a>00750     }
<a name="l00751"></a>00751 
<a name="l00752"></a>00752   <span class="keywordflow">return</span> is;
<a name="l00753"></a>00753 }
<a name="l00754"></a>00754 
<a name="l00755"></a>00755 <span class="comment">// Precondition:</span>
<a name="l00756"></a>00756 <span class="comment">// Parametre:</span>
<a name="l00757"></a>00757 <span class="comment">// Signification:</span>
<a name="l00758"></a>00758 <span class="comment">// Valeurs par defaut:</span>
<a name="l00759"></a>00759 <span class="comment">// Contraintes:</span>
<a name="l00760"></a>00760 <span class="comment">// Acces:</span>
<a name="l00761"></a>00761 <span class="comment">// </span>
<a name="l00762"></a>00762 <span class="comment">// Signification:</span>
<a name="l00763"></a>00763 <span class="comment">// Contraintes:</span>
<a name="l00764"></a>00764 <span class="comment">// Exception:</span>
<a name="l00765"></a>00765 <span class="comment">// Effets de bord: modification des objets equations associees, ces</span>
<a name="l00766"></a>00766 <span class="comment">// objets contiennent alors une reference sur le probleme.</span>
<a name="l00767"></a>00767 <span class="comment">// Postcondition: les equations ont ete associees au probleme</span>
<a name="l00768"></a>00768 <span class="comment">//</span><span class="comment"></span>
<a name="l00769"></a>00769 <span class="comment">//! Associe le probleme a toutes ses equations.</span>
<a name="l00770"></a><a class="code" href="classProbleme__base.html#aefeb10cb75970889e96d912699d65d48">00770</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#aefeb10cb75970889e96d912699d65d48" title="Associe le probleme a toutes ses equations.">Probleme_base::associer</a>()
<a name="l00771"></a>00771 {
<a name="l00772"></a>00772   <span class="keywordtype">int</span> nb_eqn=<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>();
<a name="l00773"></a>00773   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_eqn; i++)
<a name="l00774"></a>00774     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a3b6b408360358fb75bfe61e9c65f771c" title="S&#39;associe au Probleme passe en parametre. Associe egalement les sources, les operateurs et le solveur...">associer_pb_base</a>(*<span class="keyword">this</span>);
<a name="l00775"></a>00775 }
<a name="l00776"></a>00776 
<a name="l00777"></a>00777 <span class="comment">// Precondition:</span>
<a name="l00778"></a>00778 <span class="comment">// Parametre: Objet_U&amp; ob</span>
<a name="l00779"></a>00779 <span class="comment">// Signification: l&#39;objet a associer</span>
<a name="l00780"></a>00780 <span class="comment">// Valeurs par defaut:</span>
<a name="l00781"></a>00781 <span class="comment">// Contraintes: le type de l&#39;objet peut etre Schema_Temps_base</span>
<a name="l00782"></a>00782 <span class="comment">// Domaine</span>
<a name="l00783"></a>00783 <span class="comment">// Milieu_base</span>
<a name="l00784"></a>00784 <span class="comment">// Acces: entree</span>
<a name="l00785"></a>00785 <span class="comment">// Exception: Objet_U de type inconnu (non prevu)</span>
<a name="l00786"></a>00786 <span class="comment">// Effets de bord:</span>
<a name="l00787"></a>00787 <span class="comment">// Postcondition:</span>
<a name="l00788"></a>00788 <span class="comment">//</span>
<a name="l00789"></a>00789 <span class="comment">//</span>
<a name="l00790"></a>00790 <span class="comment">//</span>
<a name="l00791"></a>00791 <span class="comment">//</span>
<a name="l00792"></a>00792 <span class="comment">//</span>
<a name="l00793"></a>00793 <span class="comment">//</span><span class="comment"></span>
<a name="l00794"></a>00794 <span class="comment">//! surcharge Objet_U::associer_(Objet_U\&amp; ob)&lt;br&gt;Associe differents objets au probleme en controlant&lt;br&gt;le type de l&#39;objet a associer a l&#39;execution.&lt;br&gt;On peut ainsi associer: un schema en temps, un domaine de calcul ou&lt;br&gt;un milieu physique.&lt;br&gt;Utilise les routine de la classe Type_Info (Utilitaires)</span>
<a name="l00795"></a>00795 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00796"></a>00796 <span class="comment">Signification: 1 si association reussie 0 sinon&lt;br&gt;</span>
<a name="l00797"></a>00797 <span class="comment">2 si le milieu est deja associe a un autre probleme&lt;br&gt;</span>
<a name="l00798"></a>00798 <span class="comment">Contraintes: */</span>
<a name="l00799"></a><a class="code" href="classProbleme__base.html#a30028f1e3cb2e2f633f1cb702d772be4">00799</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a30028f1e3cb2e2f633f1cb702d772be4" title="surcharge Objet_U::associer_(Objet_U&amp; ob) Associe differents objets au probleme en controlant le type...">Probleme_base::associer_</a>(<a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; ob)
<a name="l00800"></a>00800 {
<a name="l00801"></a>00801 <span class="comment">// Schema_Temps_base Domaine Milieu_base</span>
<a name="l00802"></a>00802   <span class="keywordflow">if</span>( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>, ob))
<a name="l00803"></a>00803     {
<a name="l00804"></a>00804       <a class="code" href="classProbleme__base.html#a90bef636c0d4a05f4487238053c0f027" title="Associe un schema en temps au probleme. Associe ensuite le schema en temps a toutes les equations du ...">associer_sch_tps_base</a>(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>, ob));
<a name="l00805"></a>00805       <span class="keywordflow">return</span> 1;
<a name="l00806"></a>00806     }
<a name="l00807"></a>00807   <span class="keywordflow">if</span>( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, ob))
<a name="l00808"></a>00808     {
<a name="l00809"></a>00809       <a class="code" href="classProbleme__base.html#a2b2cf5efc1ede3bbd2f978b8921d0f70" title="Associe un domaine au probleme. Prend un_domaine comme support. apelle Domaine_dis::associer_dom(cons...">associer_domaine</a>(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, ob));
<a name="l00810"></a>00810       <span class="keywordflow">return</span> 1;
<a name="l00811"></a>00811     }
<a name="l00812"></a>00812   <span class="keywordflow">if</span>( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>, ob))
<a name="l00813"></a>00813     {
<a name="l00814"></a>00814       <span class="keywordflow">if</span> (!<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>, ob).est_deja_associe())
<a name="l00815"></a>00815         <span class="keywordflow">return</span> 2;
<a name="l00816"></a>00816       <a class="code" href="classProbleme__base.html#a07cf3e1956c293b2129c105369f2d19f" title="Associe un milieu physique aux equations du probleme. Choix du milieu physique.">associer_milieu_base</a>(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>, ob));
<a name="l00817"></a>00817       <span class="keywordflow">return</span> 1;
<a name="l00818"></a>00818     }
<a name="l00819"></a>00819   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>,ob))
<a name="l00820"></a>00820     {
<a name="l00821"></a>00821       <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>,ob);
<a name="l00822"></a>00822       <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>.<a class="code" href="classList__Ref__Loi__Fermeture__base.html#abed46096973b35b18f31cb7484c6e380">add</a>(loi);
<a name="l00823"></a>00823       loi.<a class="code" href="classLoi__Fermeture__base.html#a5550cedcd4fdabbec88d62502a995d53" title="Cette methode est la premiere appelee par le probleme pour construire l&#39;objet au moment ou on l&#39;assoc...">associer_pb_base</a>(*<span class="keyword">this</span>);
<a name="l00824"></a>00824 
<a name="l00825"></a>00825       <span class="keywordflow">return</span> 1;
<a name="l00826"></a>00826     }
<a name="l00827"></a>00827   <span class="keywordflow">return</span> 0;
<a name="l00828"></a>00828 }
<a name="l00829"></a>00829 
<a name="l00830"></a>00830 <span class="comment">// Precondition:</span>
<a name="l00831"></a>00831 <span class="comment">// Parametre:</span>
<a name="l00832"></a>00832 <span class="comment">// Signification:</span>
<a name="l00833"></a>00833 <span class="comment">// Valeurs par defaut:</span>
<a name="l00834"></a>00834 <span class="comment">// Contraintes:</span>
<a name="l00835"></a>00835 <span class="comment">// Acces:</span>
<a name="l00836"></a>00836 <span class="comment">// </span>
<a name="l00837"></a>00837 <span class="comment">// Signification:</span>
<a name="l00838"></a>00838 <span class="comment">// Contraintes:</span>
<a name="l00839"></a>00839 <span class="comment">// Exception:</span>
<a name="l00840"></a>00840 <span class="comment">// Effets de bord: modification des objets equations associees</span>
<a name="l00841"></a>00841 <span class="comment">// Postcondition:</span>
<a name="l00842"></a>00842 <span class="comment">//</span>
<a name="l00843"></a>00843 <span class="comment">//</span><span class="comment"></span>
<a name="l00844"></a>00844 <span class="comment">//! Complete les equations associees au probleme.&lt;br&gt;Remplissage des references, deleguee aux equations.</span>
<a name="l00845"></a><a class="code" href="classProbleme__base.html#ad0e1472b628450d9748a712ab5f55a2e">00845</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#ad0e1472b628450d9748a712ab5f55a2e" title="Complete les equations associees au probleme. Remplissage des references, deleguee aux equations...">Probleme_base::completer</a>()
<a name="l00846"></a>00846 {
<a name="l00847"></a>00847 <span class="comment">// Cerr &lt;&lt; &quot;Probleme_base::completer()&quot; &lt;&lt; finl;</span>
<a name="l00848"></a>00848   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00849"></a>00849     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a68c77bfc9fb39474ddc481495710c40e" title="Complete la construction (initialisation) des objets associes a l&#39;equation. Complete les sources...">completer</a>();
<a name="l00850"></a>00850 
<a name="l00851"></a>00851   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>;
<a name="l00852"></a>00852   <span class="keywordflow">while</span> (curseur)
<a name="l00853"></a>00853     {
<a name="l00854"></a>00854       <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=curseur.valeur().valeur();
<a name="l00855"></a>00855       loi.<a class="code" href="classLoi__Fermeture__base.html#ad9b9d931984fbc54ba30e2b3cf6b934f" title="Cette methode est appelee apres avoir lu toutes les equations et les lois de fermeture (tous les cham...">completer</a>();
<a name="l00856"></a>00856       ++curseur;
<a name="l00857"></a>00857     }
<a name="l00858"></a>00858 
<a name="l00859"></a>00859   <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#ae3e4a1e9eb91338b2622f49e89a955cf">completer</a>();
<a name="l00860"></a>00860 }
<a name="l00861"></a>00861 
<a name="l00862"></a>00862 <span class="comment">// Precondition:</span>
<a name="l00863"></a>00863 <span class="comment">// Parametre:</span>
<a name="l00864"></a>00864 <span class="comment">// Signification:</span>
<a name="l00865"></a>00865 <span class="comment">// Valeurs par defaut:</span>
<a name="l00866"></a>00866 <span class="comment">// Contraintes:</span>
<a name="l00867"></a>00867 <span class="comment">// Acces:</span>
<a name="l00868"></a>00868 <span class="comment">// Exception:</span>
<a name="l00869"></a>00869 <span class="comment">// Effets de bord:</span>
<a name="l00870"></a>00870 <span class="comment">// Postcondition:</span>
<a name="l00871"></a>00871 <span class="comment">//</span>
<a name="l00872"></a>00872 <span class="comment">//</span><span class="comment"></span>
<a name="l00873"></a>00873 <span class="comment">//! Verifie que l&#39;objet est complet, coherent, ...&lt;br&gt;NON DEVELOPPE RENVOIE TOUJOURS 1</span>
<a name="l00874"></a>00874 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00875"></a>00875 <span class="comment">Signification: 1 si l&#39;objet est correct&lt;br&gt;</span>
<a name="l00876"></a>00876 <span class="comment">Contraintes: */</span>
<a name="l00877"></a><a class="code" href="classProbleme__base.html#ad0dcfaf599fe0d2e04ef1daf275eb541">00877</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#ad0dcfaf599fe0d2e04ef1daf275eb541" title="Verifie que l&#39;objet est complet, coherent, ... NON DEVELOPPE RENVOIE TOUJOURS 1.">Probleme_base::verifier</a>()
<a name="l00878"></a>00878 {
<a name="l00879"></a>00879   <span class="keywordflow">return</span> 1;
<a name="l00880"></a>00880 }
<a name="l00881"></a>00881 
<a name="l00882"></a>00882 <span class="comment">// Precondition:</span>
<a name="l00883"></a>00883 <span class="comment">// Parametre: Domaine&amp; un_domaine</span>
<a name="l00884"></a>00884 <span class="comment">// Signification: le domaine</span>
<a name="l00885"></a>00885 <span class="comment">// Valeurs par defaut:</span>
<a name="l00886"></a>00886 <span class="comment">// Contraintes: reference constante</span>
<a name="l00887"></a>00887 <span class="comment">// Acces: entree</span>
<a name="l00888"></a>00888 <span class="comment">// </span>
<a name="l00889"></a>00889 <span class="comment">// Signification:</span>
<a name="l00890"></a>00890 <span class="comment">// Contraintes:</span>
<a name="l00891"></a>00891 <span class="comment">// Exception:</span>
<a name="l00892"></a>00892 <span class="comment">// Effets de bord:</span>
<a name="l00893"></a>00893 <span class="comment">// Postcondition: les equations sont associees si elles ne l&#39;etaient pas</span>
<a name="l00894"></a>00894 <span class="comment">//</span>
<a name="l00895"></a>00895 <span class="comment">//</span>
<a name="l00896"></a>00896 <span class="comment">//</span><span class="comment"></span>
<a name="l00897"></a>00897 <span class="comment">//! Associe un domaine au probleme.&lt;br&gt;Prend un_domaine comme support.&lt;br&gt;apelle Domaine_dis::associer_dom(const Domaine\&amp; )</span>
<a name="l00898"></a><a class="code" href="classProbleme__base.html#a2b2cf5efc1ede3bbd2f978b8921d0f70">00898</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a2b2cf5efc1ede3bbd2f978b8921d0f70" title="Associe un domaine au probleme. Prend un_domaine comme support. apelle Domaine_dis::associer_dom(cons...">Probleme_base::associer_domaine</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; un_domaine)
<a name="l00899"></a>00899 {
<a name="l00900"></a>00900   <a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>.<a class="code" href="classDomaine__dis.html#add03fcde5334b832f83d7aec6425fa4a" title="Associe un Domaine (non discretise) a l&#39;objet. Dimensionne le tableau des zones discretisees associee...">associer_domaine</a>(un_domaine);
<a name="l00901"></a>00901 
<a name="l00902"></a>00902 }
<a name="l00903"></a>00903 
<a name="l00904"></a>00904 <span class="comment">// Precondition:</span>
<a name="l00905"></a>00905 <span class="comment">// Parametre: Discretisation_base&amp; discretisation</span>
<a name="l00906"></a>00906 <span class="comment">// Signification: une discretisation pour le probleme</span>
<a name="l00907"></a>00907 <span class="comment">// Valeurs par defaut:</span>
<a name="l00908"></a>00908 <span class="comment">// Contraintes: reference constante</span>
<a name="l00909"></a>00909 <span class="comment">// Acces: entree</span>
<a name="l00910"></a>00910 <span class="comment">// </span>
<a name="l00911"></a>00911 <span class="comment">// Signification:</span>
<a name="l00912"></a>00912 <span class="comment">// Contraintes:</span>
<a name="l00913"></a>00913 <span class="comment">// Exception:</span>
<a name="l00914"></a>00914 <span class="comment">// Effets de bord: les equations associees au probleme sont discretisees</span>
<a name="l00915"></a>00915 <span class="comment">//</span>
<a name="l00916"></a>00916 <span class="comment">//</span>
<a name="l00917"></a>00917 <span class="comment">//</span>
<a name="l00918"></a>00918 <span class="comment">//</span>
<a name="l00919"></a>00919 <span class="comment">//</span><span class="comment"></span>
<a name="l00920"></a>00920 <span class="comment">//! Affecte une discretisation au probleme&lt;br&gt;Discretise le Domaine associe au probleme avec la discretisation&lt;br&gt;Associe la premiere zone du Domaine aux equations du probleme&lt;br&gt;Discretise les equations associees au probleme&lt;br&gt;NOTE: TRUST V1 une seule Zone_dis pas Domaine_dis est traitee</span>
<a name="l00921"></a><a class="code" href="classProbleme__base.html#afcc5837a46f2f5b7d2fb3b3ef1e80bcf">00921</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#afcc5837a46f2f5b7d2fb3b3ef1e80bcf" title="Affecte une discretisation au probleme Discretise le Domaine associe au probleme avec la discretisati...">Probleme_base::discretiser</a>(<span class="keyword">const</span> <a class="code" href="classDiscretisation__base.html" title="classe Discretisation_base Cette classe represente un schema de discretisation en espace...">Discretisation_base</a>&amp; une_discretisation)
<a name="l00922"></a>00922 {
<a name="l00923"></a>00923   <a class="code" href="classProbleme__base.html#aefeb10cb75970889e96d912699d65d48" title="Associe le probleme a toutes ses equations.">associer</a>();
<a name="l00924"></a>00924   <a class="code" href="classProbleme__base.html#af670cc3704e9dcaf9a9ce1520cb440fe">la_discretisation</a>=une_discretisation;
<a name="l00925"></a>00925   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Discretization of the domain associated with the problem &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00926"></a>00926   une_discretisation.<a class="code" href="classDiscretisation__base.html#a7a7a5c69a5425ea87bdc6d7cb23acd8d">discretiser</a>(<a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>);
<a name="l00927"></a>00927   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Discretization of equations&quot;</span> &lt;&lt; finl;
<a name="l00928"></a>00928   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00929"></a>00929     {
<a name="l00930"></a>00930       <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a25318ab0a20cd120e4e4671ca156b8df" title="Associe la zone discretisee a l&#39;equation.">associer_zone_dis</a>(<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>().zone_dis(0));
<a name="l00931"></a>00931       <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#ac849b71b99dbe338b049a7728208c965" title="Discretise l&#39;equation. Type la zone_Cl_dis, la formatte, l&#39;associe a l&#39;equation. Type le solveur mass...">discretiser</a>();
<a name="l00932"></a>00932 <span class="comment">// remontee de l&#39;inconnue vers le milieu</span>
<a name="l00933"></a>00933       <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a16b5af9ce66738d4d05d2567e417ff3d">associer_milieu_equation</a>();
<a name="l00934"></a>00934     }
<a name="l00935"></a>00935 <span class="comment">// Discretisation du milieu:</span>
<a name="l00936"></a>00936 <span class="comment">// ATTENTION (BM): il faudra faire quelque chose ici car si on associe deux</span>
<a name="l00937"></a>00937 <span class="comment">// milieux au probleme (fluide_incompressible + constituant), seul</span>
<a name="l00938"></a>00938 <span class="comment">// le premier est discretise.</span>
<a name="l00939"></a>00939 <span class="comment">// Cette facon de faire n&#39;est pas propre !</span>
<a name="l00940"></a>00940 <span class="comment">// Solution probable: gros nettoyage et on met le milieu dans le probleme</span>
<a name="l00941"></a>00941   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> milieux_deja_discretises;
<a name="l00942"></a>00942   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00943"></a>00943     {
<a name="l00944"></a>00944       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; le_milieu = <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00945"></a>00945       <span class="keywordflow">if</span> (!milieux_deja_discretises.<a class="code" href="classNoms.html#a206f141fd7ee3671233c10d928fa1d99">contient_</a>(le_milieu))
<a name="l00946"></a>00946         {
<a name="l00947"></a>00947           <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>().<a class="code" href="classMilieu__base.html#a76dffc16168f8e822fde763bfe60fb93">discretiser</a>((*<span class="keyword">this</span>),une_discretisation);
<a name="l00948"></a>00948           milieux_deja_discretises.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(le_milieu);
<a name="l00949"></a>00949         }
<a name="l00950"></a>00950     }
<a name="l00951"></a>00951 
<a name="l00952"></a>00952   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>;
<a name="l00953"></a>00953   <span class="keywordflow">while</span> (curseur)
<a name="l00954"></a>00954     {
<a name="l00955"></a>00955       <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=curseur.valeur().valeur();
<a name="l00956"></a>00956       loi.<a class="code" href="classLoi__Fermeture__base.html#a0ac4b76469fd1759a54fce5a5caca5df" title="Cette methode est appelee par le probleme apres la discretisation des equations et du milieu et avant...">discretiser</a>(une_discretisation);
<a name="l00957"></a>00957       ++curseur;
<a name="l00958"></a>00958     }
<a name="l00959"></a>00959 
<a name="l00960"></a>00960 }
<a name="l00961"></a>00961 
<a name="l00962"></a>00962 <span class="comment">// Description :</span>
<a name="l00963"></a>00963 <span class="comment">// Flag le premier et le dernier postraitement pour chaque fichier</span>
<a name="l00964"></a>00964 <span class="comment">// Et initialise les postraitements</span>
<a name="l00965"></a><a class="code" href="classProbleme__base.html#a6d88b0185198c92d6ea119e0d6ca0a62">00965</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a6d88b0185198c92d6ea119e0d6ca0a62">Probleme_base::init_postraitements</a>()
<a name="l00966"></a>00966 {
<a name="l00967"></a>00967   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classPostraitement__base.html" title="Classe de base pour l&#39;ensemble des postraitements.">Postraitement_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>;
<a name="l00968"></a>00968   <span class="keywordflow">while</span>(curseur)   <span class="comment">//!&lt; Pour chaque postraitement</span>
<a name="l00969"></a>00969 <span class="comment"></span>    {
<a name="l00970"></a>00970 
<a name="l00971"></a>00971       <a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classPostraitement__base.html" title="Classe de base pour l&#39;ensemble des postraitements.">Postraitement_base</a>)&amp; der_post = curseur.valeur();
<a name="l00972"></a>00972 
<a name="l00973"></a>00973 <span class="comment">// S&#39;il est de type Postraitement, initialiser premier/dernier _pour_nom_fich</span>
<a name="l00974"></a>00974 
<a name="l00975"></a>00975       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>,der_post.valeur()))
<a name="l00976"></a>00976         {
<a name="l00977"></a>00977 
<a name="l00978"></a>00978           <a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>&amp; post=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>,der_post.valeur());
<a name="l00979"></a>00979 
<a name="l00980"></a>00980           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> <a class="code" href="Postraitement_8cpp.html#a2014b0b7ca4c8b7161754648bb234d56">nom_fichier</a>=post.<a class="code" href="classPostraitement.html#a7d181126faf0958b691b5fb6de643ab9">nom_fich</a>();
<a name="l00981"></a>00981           <span class="keywordtype">int</span> rg=<a class="code" href="Probleme__base_8cpp.html#a5fb8a1e544c0fcfd3957a758f60cebac">glob_noms_fichiers</a>.<a class="code" href="classList__Nom.html#af99359e87e00e2532e22318771135e4c">rang</a>(nom_fichier);
<a name="l00982"></a>00982           <span class="keywordflow">if</span> (rg==-1)   <span class="comment">//!&lt; C&#39;est la premiere fois qu&#39;on rencontre ce nom</span>
<a name="l00983"></a>00983 <span class="comment"></span>            {
<a name="l00984"></a>00984               <a class="code" href="Probleme__base_8cpp.html#a5fb8a1e544c0fcfd3957a758f60cebac">glob_noms_fichiers</a>.<a class="code" href="classList__Nom.html#a04f3490bcde0edc6b0ce0dcf3509a640">add</a>(nom_fichier);
<a name="l00985"></a>00985               <a class="code" href="Probleme__base_8cpp.html#a67c26b9d9c728a10024918e4dc9ba15b">glob_derniers_posts</a>.<a class="code" href="classList__Ref__Postraitement.html#a2e3a8fe60177a44636b9ed6c8738874c">add</a>(post);
<a name="l00986"></a>00986               post.<a class="code" href="classPostraitement.html#a9c017359de0754221dbd61c5a451a349">est_le_premier_postraitement_pour_nom_fich</a>()=1;
<a name="l00987"></a>00987             }
<a name="l00988"></a>00988           <span class="keywordflow">else</span>   <span class="comment">//!&lt; On a deja vu ce nom</span>
<a name="l00989"></a>00989 <span class="comment"></span>            {
<a name="l00990"></a>00990               post.<a class="code" href="classPostraitement.html#a9c017359de0754221dbd61c5a451a349">est_le_premier_postraitement_pour_nom_fich</a>()=0;
<a name="l00991"></a>00991               <a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>&amp; autre_post=<a class="code" href="Probleme__base_8cpp.html#a67c26b9d9c728a10024918e4dc9ba15b">glob_derniers_posts</a>[rg];
<a name="l00992"></a>00992               autre_post.<a class="code" href="classPostraitement.html#a477e040aeb027a872dc637bfde61c897">est_le_dernier_postraitement_pour_nom_fich</a>()=0;
<a name="l00993"></a>00993               <a class="code" href="Probleme__base_8cpp.html#a67c26b9d9c728a10024918e4dc9ba15b">glob_derniers_posts</a>[rg]=post;
<a name="l00994"></a>00994 
<a name="l00995"></a>00995 <span class="comment">// On verifie au passage que les intervalles de postraitements</span>
<a name="l00996"></a>00996 <span class="comment">// sont bien les memes pour tout ce qui ecrit dans le meme</span>
<a name="l00997"></a>00997 <span class="comment">// fichier  .</span>
<a name="l00998"></a>00998               <span class="keywordflow">if</span> (post.<a class="code" href="classPostraitement.html#ad9bdc7a9fb0e1b25deb298fa594c7ad5">champs_demande</a>() &amp;&amp; autre_post.<a class="code" href="classPostraitement.html#a22756b83ee0e14245ad6ee43bea3ef58">dt_post_ch</a>()!=post.<a class="code" href="classPostraitement.html#a22756b83ee0e14245ad6ee43bea3ef58">dt_post_ch</a>())
<a name="l00999"></a>00999                 {
<a name="l01000"></a>01000                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error, the values of dt_post (&quot;</span> &lt;&lt; autre_post.<a class="code" href="classPostraitement.html#a22756b83ee0e14245ad6ee43bea3ef58">dt_post_ch</a>()
<a name="l01001"></a>01001                        &lt;&lt; <span class="stringliteral">&quot; and &quot;</span> &lt;&lt; post.<a class="code" href="classPostraitement.html#a22756b83ee0e14245ad6ee43bea3ef58">dt_post_ch</a>()
<a name="l01002"></a>01002                        &lt;&lt; <span class="stringliteral">&quot;) of two postprocessing blocks writing in the same file&quot;</span>
<a name="l01003"></a>01003                        &lt;&lt; post.<a class="code" href="classPostraitement.html#a7d181126faf0958b691b5fb6de643ab9">nom_fich</a>() &lt;&lt; <span class="stringliteral">&quot; are different!&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01004"></a>01004                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Specify the same dt_post, or use two different files for postprocessing.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01005"></a>01005                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01006"></a>01006                 }
<a name="l01007"></a>01007             }
<a name="l01008"></a>01008           post.<a class="code" href="classPostraitement.html#a477e040aeb027a872dc637bfde61c897">est_le_dernier_postraitement_pour_nom_fich</a>()=1;
<a name="l01009"></a>01009         }
<a name="l01010"></a>01010       ++curseur;
<a name="l01011"></a>01011     }
<a name="l01012"></a>01012   <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#ad03005b66e09dbdc6d197774b78f3ada">init</a>();
<a name="l01013"></a>01013 }
<a name="l01014"></a>01014 
<a name="l01015"></a><a class="code" href="classProbleme__base.html#adfef6ba538e095ea9b9a89017621da22">01015</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#adfef6ba538e095ea9b9a89017621da22">Probleme_base::expression_predefini</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; motlu, <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; expression)
<a name="l01016"></a>01016 {
<a name="l01017"></a>01017   expression = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01018"></a>01018   <span class="keywordflow">return</span> 0;
<a name="l01019"></a>01019 }
<a name="l01020"></a>01020 
<a name="l01021"></a>01021 <span class="comment">// Precondition: le flot de sauvegarde est ouvert (membre ficsauv)</span>
<a name="l01022"></a>01022 <span class="comment">// Parametre:</span>
<a name="l01023"></a>01023 <span class="comment">// Signification:</span>
<a name="l01024"></a>01024 <span class="comment">// Valeurs par defaut:</span>
<a name="l01025"></a>01025 <span class="comment">// Contraintes:</span>
<a name="l01026"></a>01026 <span class="comment">// Acces:</span>
<a name="l01027"></a>01027 <span class="comment">// </span>
<a name="l01028"></a>01028 <span class="comment">// Signification:</span>
<a name="l01029"></a>01029 <span class="comment">// Contraintes:</span>
<a name="l01030"></a>01030 <span class="comment">// Exception:</span>
<a name="l01031"></a>01031 <span class="comment">// Effets de bord: modifie le flot reference par Probleme_base::ficsauv</span>
<a name="l01032"></a>01032 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01033"></a>01033 <span class="comment">//</span><span class="comment"></span>
<a name="l01034"></a>01034 <span class="comment">//! Ecriture sur fichier en vue d&#39;une reprise (sauvegarde)</span>
<a name="l01035"></a><a class="code" href="classProbleme__base.html#aaea4bf58bdcc7a5bdd931da739a090ea">01035</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#aaea4bf58bdcc7a5bdd931da739a090ea" title="Ecriture sur fichier en vue d&#39;une reprise (sauvegarde)">Probleme_base::sauver</a>()<span class="keyword"> const</span>
<a name="l01036"></a>01036 <span class="keyword"></span>{
<a name="l01037"></a>01037   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#a5e968b838c61de525c8015d35dddeb70">sauvegarde_counter_</a>);
<a name="l01038"></a>01038 
<a name="l01039"></a>01039 <span class="comment">// Si le fichier de sauvegarde n&#39;a pas ete ouvert alors on cree le fichier de sauvegarde:</span>
<a name="l01040"></a>01040   <span class="keywordflow">if</span> ( !<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>() &amp;&amp; !<a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a> )
<a name="l01041"></a>01041     {
<a name="l01042"></a>01042       <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) == <span class="stringliteral">&quot;formatte&quot;</span>)
<a name="l01043"></a>01043         {
<a name="l01044"></a>01044           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;EcrFicCollecte&quot;</span>);
<a name="l01045"></a>01045           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>-&gt;ouvrir(<a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>);
<a name="l01046"></a>01046           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>-&gt;setf(ios::scientific);
<a name="l01047"></a>01047         }
<a name="l01048"></a>01048       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) == <span class="stringliteral">&quot;binaire&quot;</span>)
<a name="l01049"></a>01049         {
<a name="l01050"></a>01050           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;EcrFicCollecteBin&quot;</span>);
<a name="l01051"></a>01051           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>-&gt;ouvrir(<a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>);
<a name="l01052"></a>01052         }
<a name="l01053"></a>01053       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) == <span class="stringliteral">&quot;xyz&quot;</span>)
<a name="l01054"></a>01054         {
<a name="l01055"></a>01055           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<a class="code" href="classEcritureLectureSpecial.html#a31185ccf177a5057cf0bf0dcba608833" title="Renvoie le mode d&#39;ecriture utilise&lt;br&gt;(pour pouvoir le modifier). Cette methode est statique...">EcritureLectureSpecial::get_Output</a>());
<a name="l01056"></a>01056           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>-&gt;ouvrir(<a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>);
<a name="l01057"></a>01057         }
<a name="l01058"></a>01058       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) == <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l01059"></a>01059         <a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a> = <span class="keyword">new</span> <a class="code" href="classSortie__Brute.html" title="This derived class of Sortie stacks whatever it receives in an internal binary buffer. Data can be accessed through get_data().">Sortie_Brute</a>;
<a name="l01060"></a>01060       <span class="keywordflow">else</span>
<a name="l01061"></a>01061         {
<a name="l01062"></a>01062           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Probleme_base::sauver() &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01063"></a>01063           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The format for the backup file must be either binary or formatted&quot;</span> &lt;&lt; finl;
<a name="l01064"></a>01064           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;But it is :&quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a> &lt;&lt; finl;
<a name="l01065"></a>01065           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01066"></a>01066         }
<a name="l01067"></a>01067 <span class="comment">// Si c&#39;est la premiere sauvegarde, on note en en-tete le format de sauvegarde</span>
<a name="l01068"></a>01068       <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) == <span class="stringliteral">&quot;xyz&quot;</span>)
<a name="l01069"></a>01069         {
<a name="l01070"></a>01070           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l01071"></a>01071             <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>() &lt;&lt; <span class="stringliteral">&quot;format_sauvegarde:&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> &lt;&lt; <a class="code" href="Probleme__base_8cpp.html#a2dd9feec1537f5f3d3ac1ab13c394940">version_format_sauvegarde</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01072"></a>01072         }
<a name="l01073"></a>01073       <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) == <span class="stringliteral">&quot;single_hdf&quot;</span>))
<a name="l01074"></a>01074         *<a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a> &lt;&lt; <span class="stringliteral">&quot;format_sauvegarde:&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> &lt;&lt; <a class="code" href="Probleme__base_8cpp.html#a2dd9feec1537f5f3d3ac1ab13c394940">version_format_sauvegarde</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01075"></a>01075       <span class="keywordflow">else</span>
<a name="l01076"></a>01076         <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>() &lt;&lt; <span class="stringliteral">&quot;format_sauvegarde:&quot;</span> &lt;&lt; finl &lt;&lt; <a class="code" href="Probleme__base_8cpp.html#a2dd9feec1537f5f3d3ac1ab13c394940">version_format_sauvegarde</a>() &lt;&lt; finl;
<a name="l01077"></a>01077     }
<a name="l01078"></a>01078 
<a name="l01079"></a>01079 <span class="comment">// On realise l&#39;ecriture de la sauvegarde</span>
<a name="l01080"></a>01080   <span class="keywordtype">int</span> bytes;
<a name="l01081"></a>01081   <a class="code" href="classEcritureLectureSpecial.html#aec19c49549eb6126d60911f028892fef">EcritureLectureSpecial::mode_ecr</a>=(<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>)==<span class="stringliteral">&quot;xyz&quot;</span>);
<a name="l01082"></a>01082   <span class="keywordflow">if</span>(<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) != <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l01083"></a>01083     bytes = <a class="code" href="classProbleme__base.html#a558a2c9ba2cd9620499db4fd9585ec2e" title="Ecriture du probleme sur fichier en vue d&#39;une reprise. Ecrit le nom du probleme et sauvegarde les equ...">sauvegarder</a>(<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>());
<a name="l01084"></a>01084   <span class="keywordflow">else</span>
<a name="l01085"></a>01085     bytes = <a class="code" href="classProbleme__base.html#a558a2c9ba2cd9620499db4fd9585ec2e" title="Ecriture du probleme sur fichier en vue d&#39;une reprise. Ecrit le nom du probleme et sauvegarde les equ...">sauvegarder</a>(*<a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a>);
<a name="l01086"></a>01086 
<a name="l01087"></a>01087   <a class="code" href="classEcritureLectureSpecial.html#aec19c49549eb6126d60911f028892fef">EcritureLectureSpecial::mode_ecr</a>=-1;
<a name="l01088"></a>01088 
<a name="l01089"></a>01089 <span class="comment">// Si c&#39;est une sauvegarde simple, on referme immediatement et proprement le fichier</span>
<a name="l01090"></a>01090   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a3757ccb6a335d800d3c9c9d2f9a1427b">restart_file</a>==1)
<a name="l01091"></a>01091     {
<a name="l01092"></a>01092       <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>)==<span class="stringliteral">&quot;xyz&quot;</span>)
<a name="l01093"></a>01093         {
<a name="l01094"></a>01094           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l01095"></a>01095             <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>() &lt;&lt; <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;fin&quot;</span>);
<a name="l01096"></a>01096           (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>()).flush();
<a name="l01097"></a>01097           (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>()).syncfile();
<a name="l01098"></a>01098         }
<a name="l01099"></a>01099       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>)==<span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l01100"></a>01100         {
<a name="l01101"></a>01101           *<a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a> &lt;&lt; <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;fin&quot;</span>);
<a name="l01102"></a>01102           <a class="code" href="classFichierHDFPar.html" title="Parallel collective version of FichierHDF, to be used for all concurrent reading/writing on HDF files...">FichierHDFPar</a> fic_hdf;
<a name="l01103"></a>01103           fic_hdf.<a class="code" href="classFichierHDF.html#ae8d1c1444d9d7ac5d0bef32feaa050df">create</a>(<a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>);
<a name="l01104"></a>01104           fic_hdf.<a class="code" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">create_and_fill_dataset_MW</a>(<span class="stringliteral">&quot;/sauv&quot;</span>, *<a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a>);
<a name="l01105"></a>01105           fic_hdf.<a class="code" href="classFichierHDF.html#ac5d8eb389ee60109c2d60029f442487f">close</a>();
<a name="l01106"></a>01106           <span class="keyword">delete</span> <a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a>;
<a name="l01107"></a>01107           <a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a> = 0;
<a name="l01108"></a>01108         }
<a name="l01109"></a>01109       <span class="keywordflow">else</span>
<a name="l01110"></a>01110         {
<a name="l01111"></a>01111           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>() &lt;&lt; <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;fin&quot;</span>);
<a name="l01112"></a>01112           (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>()).flush();
<a name="l01113"></a>01113         }
<a name="l01114"></a>01114       <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__.html#a1792f7b005c558e7412661aeee781bd2">detach</a>();
<a name="l01115"></a>01115     }
<a name="l01116"></a>01116   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l01117"></a>01117   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#a5e968b838c61de525c8015d35dddeb70">sauvegarde_counter_</a>, bytes);
<a name="l01118"></a>01118 }
<a name="l01119"></a>01119 
<a name="l01120"></a>01120 <span class="comment">// Precondition: le flot de sauvegarde est ouvert</span>
<a name="l01121"></a>01121 <span class="comment">// Parametre:</span>
<a name="l01122"></a>01122 <span class="comment">// Signification:</span>
<a name="l01123"></a>01123 <span class="comment">// Valeurs par defaut:</span>
<a name="l01124"></a>01124 <span class="comment">// Contraintes:</span>
<a name="l01125"></a>01125 <span class="comment">// Acces:</span>
<a name="l01126"></a>01126 <span class="comment">// </span>
<a name="l01127"></a>01127 <span class="comment">// Signification:</span>
<a name="l01128"></a>01128 <span class="comment">// Contraintes:</span>
<a name="l01129"></a>01129 <span class="comment">// Exception:</span>
<a name="l01130"></a>01130 <span class="comment">// Effets de bord:</span>
<a name="l01131"></a>01131 <span class="comment">// Postcondition: le postraitement est fini.</span>
<a name="l01132"></a>01132 <span class="comment">//</span>
<a name="l01133"></a>01133 <span class="comment">//</span><span class="comment"></span>
<a name="l01134"></a>01134 <span class="comment">//! Finit le postraitement et sauve le probleme dans un fichier.&lt;br&gt;Fermeture du fichier associe au postraitement.(Postraitement::finir())</span>
<a name="l01135"></a><a class="code" href="classProbleme__base.html#a948dcfd838e16c3d9e428c7752ea7123">01135</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a948dcfd838e16c3d9e428c7752ea7123" title="Finit le postraitement et sauve le probleme dans un fichier. Fermeture du fichier associe au postrait...">Probleme_base::finir</a>()
<a name="l01136"></a>01136 {
<a name="l01137"></a>01137   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l01138"></a>01138 
<a name="l01139"></a>01139   <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#a12d1c4c47f51c2531fbd3ba698a76a68">finir</a>();
<a name="l01140"></a>01140   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().temps_sauv() &gt; 0.0)
<a name="l01141"></a>01141     <a class="code" href="classProbleme__base.html#aaea4bf58bdcc7a5bdd931da739a090ea" title="Ecriture sur fichier en vue d&#39;une reprise (sauvegarde)">sauver</a>();
<a name="l01142"></a>01142 
<a name="l01143"></a>01143 <span class="comment">// On ferme proprement le fichier de sauvegarde</span>
<a name="l01144"></a>01144 <span class="comment">// Si c&#39;est une sauvegarde_simple, le fin a ete mis a chaque appel a ::sauver()</span>
<a name="l01145"></a>01145   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a3757ccb6a335d800d3c9c9d2f9a1427b">restart_file</a>!=1 &amp;&amp; (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>() || <a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a>) )
<a name="l01146"></a>01146     {
<a name="l01147"></a>01147       <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>)==<span class="stringliteral">&quot;xyz&quot;</span>)
<a name="l01148"></a>01148         {
<a name="l01149"></a>01149           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l01150"></a>01150             <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>() &lt;&lt; <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;fin&quot;</span>);
<a name="l01151"></a>01151           (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>()).flush();
<a name="l01152"></a>01152           (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>()).syncfile();
<a name="l01153"></a>01153         }
<a name="l01154"></a>01154       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>) == <span class="stringliteral">&quot;single_hdf&quot;</span>)
<a name="l01155"></a>01155         {
<a name="l01156"></a>01156           *<a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a> &lt;&lt; <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;fin&quot;</span>);
<a name="l01157"></a>01157           <a class="code" href="classFichierHDFPar.html" title="Parallel collective version of FichierHDF, to be used for all concurrent reading/writing on HDF files...">FichierHDFPar</a> fic_hdf;
<a name="l01158"></a>01158           fic_hdf.<a class="code" href="classFichierHDF.html#ae8d1c1444d9d7ac5d0bef32feaa050df">create</a>(<a class="code" href="classProbleme__base.html#a96bd4526c1ed0cbf094dd579dd3ab6ce">nom_fich</a>);
<a name="l01159"></a>01159           fic_hdf.<a class="code" href="classFichierHDF.html#a25d4709e6498f901d7624c01306f3def">create_and_fill_dataset_MW</a>(<span class="stringliteral">&quot;/sauv&quot;</span>, *<a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a>);
<a name="l01160"></a>01160           fic_hdf.<a class="code" href="classFichierHDF.html#ac5d8eb389ee60109c2d60029f442487f">close</a>();
<a name="l01161"></a>01161           <span class="keyword">delete</span> <a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a>;
<a name="l01162"></a>01162           <a class="code" href="classProbleme__base.html#a8dedc40d57c20c725a59c9d749d83916">osauv_hdf_</a> = 0;
<a name="l01163"></a>01163         }
<a name="l01164"></a>01164       <span class="keywordflow">else</span>
<a name="l01165"></a>01165         {
<a name="l01166"></a>01166           <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>() &lt;&lt; <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;fin&quot;</span>);
<a name="l01167"></a>01167           (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>()).flush();
<a name="l01168"></a>01168         }
<a name="l01169"></a>01169 
<a name="l01170"></a>01170       <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__.html#a1792f7b005c558e7412661aeee781bd2">detach</a>();
<a name="l01171"></a>01171     }
<a name="l01172"></a>01172 <span class="comment">// Si la sauvegarde est classique et que l&#39;utilisateur n&#39;a pas desactive la sauvegarde finale xyz</span>
<a name="l01173"></a>01173 <span class="comment">// alors on effectue la sauvegarde finale xyz</span>
<a name="l01174"></a>01174   <span class="keywordflow">if</span> (<a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<a class="code" href="classProbleme__base.html#aa2a49449bdc73b2c1fefccd5988d0325">format_sauv</a>)!=<span class="stringliteral">&quot;xyz&quot;</span> &amp;&amp; (<a class="code" href="classEcritureLectureSpecial.html#aa37e4a002db5ec6c3082401194c4c909">EcritureLectureSpecial::Active</a>))
<a name="l01175"></a>01175     <a class="code" href="classProbleme__base.html#af8df195a9dc0c9a111690aa861e9883b">sauver_xyz</a>(1);
<a name="l01176"></a>01176 }
<a name="l01177"></a>01177 
<a name="l01178"></a>01178 <span class="comment">// Precondition:</span>
<a name="l01179"></a>01179 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l01180"></a>01180 <span class="comment">// Signification: flot de sortie pour sauvegarde</span>
<a name="l01181"></a>01181 <span class="comment">// Valeurs par defaut:</span>
<a name="l01182"></a>01182 <span class="comment">// Contraintes: le flot doit etre ouvert</span>
<a name="l01183"></a>01183 <span class="comment">// Acces: sortie</span>
<a name="l01184"></a>01184 <span class="comment">// Exception:</span>
<a name="l01185"></a>01185 <span class="comment">// Effets de bord:</span>
<a name="l01186"></a>01186 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01187"></a>01187 <span class="comment">//</span>
<a name="l01188"></a>01188 <span class="comment">//</span><span class="comment"></span>
<a name="l01189"></a>01189 <span class="comment">//! Ecriture du probleme sur fichier en vue d&#39;une reprise.&lt;br&gt;Ecrit le nom du probleme et sauvegarde les equations.</span>
<a name="l01190"></a>01190 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l01191"></a>01191 <span class="comment">Signification: renvoie toujours 1&lt;br&gt;</span>
<a name="l01192"></a>01192 <span class="comment">Contraintes: */</span>
<a name="l01193"></a><a class="code" href="classProbleme__base.html#a558a2c9ba2cd9620499db4fd9585ec2e">01193</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a558a2c9ba2cd9620499db4fd9585ec2e" title="Ecriture du probleme sur fichier en vue d&#39;une reprise. Ecrit le nom du probleme et sauvegarde les equ...">Probleme_base::sauvegarder</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l01194"></a>01194 <span class="keyword"></span>{
<a name="l01195"></a>01195   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l01196"></a>01196   <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a40fdf5dd371dd6e1b0e970312c05ed38" title="Sauvegarde le temps courant et le nombre de pas de temps sur un flot de sortie.">sauvegarder</a>(os);
<a name="l01197"></a>01197   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Backup of problem &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01198"></a>01198   <span class="keywordtype">int</span> bytes=0;
<a name="l01199"></a>01199   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01200"></a>01200     {
<a name="l01201"></a>01201       bytes += <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#af55e69d226254112762f1bfc68e63fc0" title="On sauvegarde l&#39;inconnue de l&#39;equation sur un flot de sortie.">sauvegarder</a>(os);
<a name="l01202"></a>01202       assert(bytes % 4 == 0);
<a name="l01203"></a>01203     }
<a name="l01204"></a>01204   bytes += <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#aecc5b30b954dfb0d97b2ce5e0e13ead1" title="Sauvegarde d&#39;un Objet_U sur un flot de sortie Methode a surcharger : retourne toujours 1 dans cette i...">sauvegarder</a>(os);
<a name="l01205"></a>01205   assert(bytes % 4 == 0); <span class="comment">//!&lt; To detect a sauvegarder() method which returns 1 instead of the number of bytes saved.</span>
<a name="l01206"></a>01206 <span class="comment"></span>  <span class="keywordflow">return</span> bytes;
<a name="l01207"></a>01207 }
<a name="l01208"></a>01208 
<a name="l01209"></a>01209 <span class="comment">// Precondition: Le flot doit etre ouvert</span>
<a name="l01210"></a>01210 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l01211"></a>01211 <span class="comment">// Signification: le flot d&#39;entree sur lequel on lit la reprise</span>
<a name="l01212"></a>01212 <span class="comment">// Valeurs par defaut:</span>
<a name="l01213"></a>01213 <span class="comment">// Contraintes:</span>
<a name="l01214"></a>01214 <span class="comment">// Acces: entree/sortie</span>
<a name="l01215"></a>01215 <span class="comment">// Exception:</span>
<a name="l01216"></a>01216 <span class="comment">// Effets de bord:</span>
<a name="l01217"></a>01217 <span class="comment">// Postcondition: les equations du problemes sont remises dans l&#39;etat de la sauvegarde</span>
<a name="l01218"></a>01218 <span class="comment">//</span>
<a name="l01219"></a>01219 <span class="comment">//</span><span class="comment"></span>
<a name="l01220"></a>01220 <span class="comment">//! Lecture d&#39;un flot d&#39;entree (fichier) pour reprise apres&lt;br&gt;une sauvegarde avec Probleme_base::sauvegarder(Sortie\&amp; os).</span>
<a name="l01221"></a>01221 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l01222"></a>01222 <span class="comment">Signification: renvoie toujours 1&lt;br&gt;</span>
<a name="l01223"></a>01223 <span class="comment">Contraintes: */</span>
<a name="l01224"></a><a class="code" href="classProbleme__base.html#a17fab5984df76f24b54aac1238631460">01224</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a17fab5984df76f24b54aac1238631460" title="Lecture d&#39;un flot d&#39;entree (fichier) pour reprise apres une sauvegarde avec Probleme_base::sauvegarde...">Probleme_base::reprendre</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l01225"></a>01225 {
<a name="l01226"></a>01226   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#a2ca5bd7d90e68eed7a8acf3c37fd3dfb">temporary_counter_</a>);
<a name="l01227"></a>01227   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l01228"></a>01228   <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a2e0f6debdf1ce5ad1a0bfa045e931e88" title="Reprise (lecture) du temps courant et du nombre de pas de temps effectues a partir d&#39;un flot d&#39;entree...">reprendre</a>(is);
<a name="l01229"></a>01229   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Resuming the problem &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01230"></a>01230   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01231"></a>01231     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a0b31997a74fe7eeef7634fcff096b3f6" title="On reprend l&#39;inconnue a partir d&#39;un flot d&#39;entree. [ON CHERCHE L&#39;INCONNUE PAR SON NOM] [ON LIT L&#39;INCO...">reprendre</a>(is);
<a name="l01232"></a>01232   <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#a009b84076536556356ff56c3b0fc669a" title="Reprise d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger : retourne toujours 1 dans cette imple...">reprendre</a>(is);
<a name="l01233"></a>01233   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#a2ca5bd7d90e68eed7a8acf3c37fd3dfb">temporary_counter_</a>);
<a name="l01234"></a>01234   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;End of resuming the problem &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; after &quot;</span> &lt;&lt; <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a21c24113a2042f33ce1134b473ebc1ac">last_time</a>(<a class="code" href="stat__counters_8cpp.html#a2ca5bd7d90e68eed7a8acf3c37fd3dfb">temporary_counter_</a>) &lt;&lt; <span class="stringliteral">&quot; s&quot;</span> &lt;&lt; finl;
<a name="l01235"></a>01235   <span class="keywordflow">return</span> 1;
<a name="l01236"></a>01236 }
<a name="l01237"></a>01237 
<a name="l01238"></a>01238 <span class="comment">// Precondition: le schema en temps doit etre associe au probleme</span>
<a name="l01239"></a>01239 <span class="comment">// Parametre:</span>
<a name="l01240"></a>01240 <span class="comment">// Signification:</span>
<a name="l01241"></a>01241 <span class="comment">// Valeurs par defaut:</span>
<a name="l01242"></a>01242 <span class="comment">// Contraintes:</span>
<a name="l01243"></a>01243 <span class="comment">// Acces:</span>
<a name="l01244"></a>01244 <span class="comment">// Exception:</span>
<a name="l01245"></a>01245 <span class="comment">// Effets de bord:</span>
<a name="l01246"></a>01246 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01247"></a>01247 <span class="comment">//</span><span class="comment"></span>
<a name="l01248"></a>01248 <span class="comment">//! Demande au schema en temps s&#39;il faut faire une impression</span>
<a name="l01249"></a>01249 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l01250"></a>01250 <span class="comment">Signification: 1 il faut faire une impression, 0 il ne faut pas.&lt;br&gt;</span>
<a name="l01251"></a>01251 <span class="comment">Contraintes: */</span>
<a name="l01252"></a><a class="code" href="classProbleme__base.html#a328577eb19ffe655228dcbf263cc819a">01252</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a328577eb19ffe655228dcbf263cc819a" title="Demande au schema en temps s&#39;il faut faire une impression.">Probleme_base::limpr</a>()<span class="keyword"> const</span>
<a name="l01253"></a>01253 <span class="keyword"></span>{
<a name="l01254"></a>01254   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a7a2bf65aa65d7b2ddb7ccc0bc5fd0668" title="Renvoie 1 s&#39;il y a lieu d&#39;effectuer une impression (cf dt_impr) Renvoie 0 sinon.">limpr</a>();
<a name="l01255"></a>01255 }
<a name="l01256"></a>01256 
<a name="l01257"></a>01257 <span class="comment">// Precondition: le schema en temps doit etre associe au probleme</span>
<a name="l01258"></a>01258 <span class="comment">// Parametre:</span>
<a name="l01259"></a>01259 <span class="comment">// Signification:</span>
<a name="l01260"></a>01260 <span class="comment">// Valeurs par defaut:</span>
<a name="l01261"></a>01261 <span class="comment">// Contraintes:</span>
<a name="l01262"></a>01262 <span class="comment">// Acces:</span>
<a name="l01263"></a>01263 <span class="comment">// Exception:</span>
<a name="l01264"></a>01264 <span class="comment">// Effets de bord:</span>
<a name="l01265"></a>01265 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01266"></a>01266 <span class="comment">//</span><span class="comment"></span>
<a name="l01267"></a>01267 <span class="comment">//! Demande au schema en temps s&#39;il faut faire une sauvegarde</span>
<a name="l01268"></a>01268 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l01269"></a>01269 <span class="comment">Signification: 1 il faut faire une sauvegarde, 0 il ne faut pas.&lt;br&gt;</span>
<a name="l01270"></a>01270 <span class="comment">Contraintes: */</span>
<a name="l01271"></a><a class="code" href="classProbleme__base.html#a9cd9bbb4cb9177ea83bd431ff7708899">01271</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a9cd9bbb4cb9177ea83bd431ff7708899" title="Demande au schema en temps s&#39;il faut faire une sauvegarde.">Probleme_base::lsauv</a>()<span class="keyword"> const</span>
<a name="l01272"></a>01272 <span class="keyword"></span>{
<a name="l01273"></a>01273   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a2992c454d4724b9fe6e9301e3e05c4d0">lsauv</a>();
<a name="l01274"></a>01274 }
<a name="l01275"></a>01275 
<a name="l01276"></a>01276 <span class="comment">// Precondition:</span>
<a name="l01277"></a>01277 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l01278"></a>01278 <span class="comment">// Signification: le flot de sortie</span>
<a name="l01279"></a>01279 <span class="comment">// Valeurs par defaut:</span>
<a name="l01280"></a>01280 <span class="comment">// Contraintes:</span>
<a name="l01281"></a>01281 <span class="comment">// Acces:</span>
<a name="l01282"></a>01282 <span class="comment">// </span>
<a name="l01283"></a>01283 <span class="comment">// Signification:</span>
<a name="l01284"></a>01284 <span class="comment">// Contraintes:</span>
<a name="l01285"></a>01285 <span class="comment">// Exception:</span>
<a name="l01286"></a>01286 <span class="comment">// Effets de bord:</span>
<a name="l01287"></a>01287 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01288"></a>01288 <span class="comment">//</span>
<a name="l01289"></a>01289 <span class="comment">//</span><span class="comment"></span>
<a name="l01290"></a>01290 <span class="comment">//! Imprime les equations associees au probleme si le schema en&lt;br&gt;temps associe indique que c&#39;est necessaire.</span>
<a name="l01291"></a><a class="code" href="classProbleme__base.html#ade62bfdea67e711ee9e7d8f64efcfa9b">01291</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#ade62bfdea67e711ee9e7d8f64efcfa9b" title="Appelle imprimer sur chaque equation.">Probleme_base::imprimer</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l01292"></a>01292 <span class="keyword"></span>{
<a name="l01293"></a>01293   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01294"></a>01294     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#acc8a782c7da089abfedf53b7d920d14e" title="Imprime les operateurs de l&#39;equation si le schema en temps indique que c&#39;est necessaire. [SI limpr() ALORS impr(os)].">imprimer</a>(os);
<a name="l01295"></a>01295 }
<a name="l01296"></a>01296 
<a name="l01297"></a>01297 <span class="comment">// Precondition:</span>
<a name="l01298"></a>01298 <span class="comment">// Parametre: Schema_Temps_base&amp; un_schema_en_temps</span>
<a name="l01299"></a>01299 <span class="comment">// Signification: le schema en temps a associer</span>
<a name="l01300"></a>01300 <span class="comment">// Valeurs par defaut:</span>
<a name="l01301"></a>01301 <span class="comment">// Contraintes: reference constante</span>
<a name="l01302"></a>01302 <span class="comment">// Acces:</span>
<a name="l01303"></a>01303 <span class="comment">// </span>
<a name="l01304"></a>01304 <span class="comment">// Signification:</span>
<a name="l01305"></a>01305 <span class="comment">// Contraintes:</span>
<a name="l01306"></a>01306 <span class="comment">// Exception:</span>
<a name="l01307"></a>01307 <span class="comment">// Effets de bord: les equations associees au probleme sont modifiees</span>
<a name="l01308"></a>01308 <span class="comment">// Postcondition:</span>
<a name="l01309"></a>01309 <span class="comment">//</span>
<a name="l01310"></a>01310 <span class="comment">//</span>
<a name="l01311"></a>01311 <span class="comment">//</span><span class="comment"></span>
<a name="l01312"></a>01312 <span class="comment">//! Associe un schema en temps au probleme.&lt;br&gt;Associe ensuite le schema en temps a toutes&lt;br&gt;les equations du probleme.</span>
<a name="l01313"></a><a class="code" href="classProbleme__base.html#a90bef636c0d4a05f4487238053c0f027">01313</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a90bef636c0d4a05f4487238053c0f027" title="Associe un schema en temps au probleme. Associe ensuite le schema en temps a toutes les equations du ...">Probleme_base::associer_sch_tps_base</a>(<span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; un_schema_en_temps)
<a name="l01314"></a>01314 {
<a name="l01315"></a>01315   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#ae053c359801a62d46cb716d23827127f">le_schema_en_temps</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l01316"></a>01316     {
<a name="l01317"></a>01317       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01318"></a>01318       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Error: Problem &quot;</span>&lt;&lt;<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>()&lt;&lt;<span class="stringliteral">&quot; was already associated with the scheme &quot;</span>&lt;&lt; <a class="code" href="classProbleme__base.html#ae053c359801a62d46cb716d23827127f">le_schema_en_temps</a>.<a class="code" href="classRef__Schema__Temps__base.html#a1cdfccd0f1ad187e0e83d762e69a7834">valeur</a>().<a class="code" href="classSchema__Temps__base.html#a8452efde818bf09d9bc0e3733cf5b98d" title="surcharge Objet_U::le_nom() Renvoie le nom du shema en temps">le_nom</a>()&lt;&lt;<span class="stringliteral">&quot; and we try to associate it with &quot;</span>&lt;&lt;un_schema_en_temps.<a class="code" href="classSchema__Temps__base.html#a8452efde818bf09d9bc0e3733cf5b98d" title="surcharge Objet_U::le_nom() Renvoie le nom du shema en temps">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt;finl;
<a name="l01319"></a>01319       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01320"></a>01320     }
<a name="l01321"></a>01321   <a class="code" href="classProbleme__base.html#ae053c359801a62d46cb716d23827127f">le_schema_en_temps</a>=un_schema_en_temps;
<a name="l01322"></a>01322   <a class="code" href="classProbleme__base.html#ae053c359801a62d46cb716d23827127f">le_schema_en_temps</a>-&gt;associer_pb(*<span class="keyword">this</span>);
<a name="l01323"></a>01323   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01324"></a>01324     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#aabd38edf86fa21fec604553313862bff" title="S&#39;associe au schema_en_temps.">associer_sch_tps_base</a>(un_schema_en_temps);
<a name="l01325"></a>01325 }
<a name="l01326"></a>01326 
<a name="l01327"></a>01327 <span class="comment">// Precondition: le schema en temps doit etre associe au probleme</span>
<a name="l01328"></a>01328 <span class="comment">// Parametre:</span>
<a name="l01329"></a>01329 <span class="comment">// Signification:</span>
<a name="l01330"></a>01330 <span class="comment">// Valeurs par defaut:</span>
<a name="l01331"></a>01331 <span class="comment">// Contraintes:</span>
<a name="l01332"></a>01332 <span class="comment">// Acces:</span>
<a name="l01333"></a>01333 <span class="comment">// Exception: le schema en temps n&#39;est pas associe au probleme, la reference est nulle</span>
<a name="l01334"></a>01334 <span class="comment">// Effets de bord:</span>
<a name="l01335"></a>01335 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01336"></a>01336 <span class="comment">//</span>
<a name="l01337"></a>01337 <span class="comment">//</span><span class="comment"></span>
<a name="l01338"></a>01338 <span class="comment">//! Renvoie le schema en temps associe au probleme. (si il est non nul)&lt;br&gt;(version const)</span>
<a name="l01339"></a>01339 <span class="comment"></span><span class="comment">/** \return Schema_Temps_base\&amp;&lt;br&gt;</span>
<a name="l01340"></a>01340 <span class="comment">Signification: le schema en temps associe au probleme&lt;br&gt;</span>
<a name="l01341"></a>01341 <span class="comment">Contraintes: reference constante */</span>
<a name="l01342"></a><a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b">01342</a> <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">Probleme_base::schema_temps</a>()<span class="keyword"> const</span>
<a name="l01343"></a>01343 <span class="keyword"></span>{
<a name="l01344"></a>01344   <span class="keywordflow">if</span>(!<a class="code" href="classProbleme__base.html#ae053c359801a62d46cb716d23827127f">le_schema_en_temps</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l01345"></a>01345     {
<a name="l01346"></a>01346       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; has not been associated to a time scheme !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01347"></a>01347       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01348"></a>01348     }
<a name="l01349"></a>01349   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae053c359801a62d46cb716d23827127f">le_schema_en_temps</a>.<a class="code" href="classRef__Schema__Temps__base.html#a1cdfccd0f1ad187e0e83d762e69a7834">valeur</a>();
<a name="l01350"></a>01350 }
<a name="l01351"></a>01351 
<a name="l01352"></a>01352 
<a name="l01353"></a>01353 <span class="comment">// Precondition: le schema en temps doit etre associe au probleme</span>
<a name="l01354"></a>01354 <span class="comment">// Parametre:</span>
<a name="l01355"></a>01355 <span class="comment">// Signification:</span>
<a name="l01356"></a>01356 <span class="comment">// Valeurs par defaut:</span>
<a name="l01357"></a>01357 <span class="comment">// Contraintes:</span>
<a name="l01358"></a>01358 <span class="comment">// Acces:</span>
<a name="l01359"></a>01359 <span class="comment">// Exception: le schema en temps n&#39;est pas associe au probleme, la reference est nulle</span>
<a name="l01360"></a>01360 <span class="comment">// Effets de bord:</span>
<a name="l01361"></a>01361 <span class="comment">// Postcondition:</span>
<a name="l01362"></a>01362 <span class="comment">//</span><span class="comment"></span>
<a name="l01363"></a>01363 <span class="comment">//! Renvoie le schema en temps associe au probleme. (si il est non nul)</span>
<a name="l01364"></a>01364 <span class="comment"></span><span class="comment">/** \return Schema_Temps_base\&amp;&lt;br&gt;</span>
<a name="l01365"></a>01365 <span class="comment">Signification: le schema en temps associe au probleme&lt;br&gt;</span>
<a name="l01366"></a>01366 <span class="comment">Contraintes: */</span>
<a name="l01367"></a><a class="code" href="classProbleme__base.html#a842c02ca5cc14632eb20f13c8a070222">01367</a> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">Probleme_base::schema_temps</a>()
<a name="l01368"></a>01368 {
<a name="l01369"></a>01369   <span class="keywordflow">if</span>(!<a class="code" href="classProbleme__base.html#ae053c359801a62d46cb716d23827127f">le_schema_en_temps</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l01370"></a>01370     {
<a name="l01371"></a>01371       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; has not been associated to a time scheme !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01372"></a>01372       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01373"></a>01373     }
<a name="l01374"></a>01374   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae053c359801a62d46cb716d23827127f">le_schema_en_temps</a>.<a class="code" href="classRef__Schema__Temps__base.html#a1cdfccd0f1ad187e0e83d762e69a7834">valeur</a>();
<a name="l01375"></a>01375 }
<a name="l01376"></a>01376 
<a name="l01377"></a>01377 
<a name="l01378"></a>01378 <span class="comment">// Precondition:</span>
<a name="l01379"></a>01379 <span class="comment">// Parametre:</span>
<a name="l01380"></a>01380 <span class="comment">// Signification:</span>
<a name="l01381"></a>01381 <span class="comment">// Valeurs par defaut:</span>
<a name="l01382"></a>01382 <span class="comment">// Contraintes:</span>
<a name="l01383"></a>01383 <span class="comment">// Acces:</span>
<a name="l01384"></a>01384 <span class="comment">// Exception:</span>
<a name="l01385"></a>01385 <span class="comment">// Effets de bord:</span>
<a name="l01386"></a>01386 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01387"></a>01387 <span class="comment">//</span>
<a name="l01388"></a>01388 <span class="comment">//</span><span class="comment"></span>
<a name="l01389"></a>01389 <span class="comment">//! Renvoie le domaine associe au probleme.&lt;br&gt;(version const)</span>
<a name="l01390"></a>01390 <span class="comment"></span><span class="comment">/** \return Domaine\&amp;&lt;br&gt;</span>
<a name="l01391"></a>01391 <span class="comment">Signification: un domaine&lt;br&gt;</span>
<a name="l01392"></a>01392 <span class="comment">Contraintes: reference constante */</span>
<a name="l01393"></a><a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178">01393</a> <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; <a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">Probleme_base::domaine</a>()<span class="keyword"> const</span>
<a name="l01394"></a>01394 <span class="keyword"></span>{
<a name="l01395"></a>01395   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>.<a class="code" href="classDomaine__dis.html#a5537c5abe880a7149de87f00312ddad3" title="Renvoie une reference sur le Domaine associe au domaine discretise.">domaine</a>();
<a name="l01396"></a>01396 }
<a name="l01397"></a>01397 
<a name="l01398"></a>01398 <span class="comment">// Precondition:</span>
<a name="l01399"></a>01399 <span class="comment">// Parametre:</span>
<a name="l01400"></a>01400 <span class="comment">// Signification:</span>
<a name="l01401"></a>01401 <span class="comment">// Valeurs par defaut:</span>
<a name="l01402"></a>01402 <span class="comment">// Contraintes:</span>
<a name="l01403"></a>01403 <span class="comment">// Acces:</span>
<a name="l01404"></a>01404 <span class="comment">// Exception:</span>
<a name="l01405"></a>01405 <span class="comment">// Effets de bord:</span>
<a name="l01406"></a>01406 <span class="comment">// Postcondition:</span>
<a name="l01407"></a>01407 <span class="comment">//</span><span class="comment"></span>
<a name="l01408"></a>01408 <span class="comment">//! Renvoie le domaine associe au probleme.</span>
<a name="l01409"></a>01409 <span class="comment"></span><span class="comment">/** \return Domaine\&amp;&lt;br&gt;</span>
<a name="l01410"></a>01410 <span class="comment">Signification: un domaine&lt;br&gt;</span>
<a name="l01411"></a>01411 <span class="comment">Contraintes: */</span>
<a name="l01412"></a><a class="code" href="classProbleme__base.html#a146dabc92df8516a75654fe7b5c530f6">01412</a> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; <a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">Probleme_base::domaine</a>()
<a name="l01413"></a>01413 {
<a name="l01414"></a>01414   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>.<a class="code" href="classDomaine__dis.html#a5537c5abe880a7149de87f00312ddad3" title="Renvoie une reference sur le Domaine associe au domaine discretise.">domaine</a>();
<a name="l01415"></a>01415 }
<a name="l01416"></a>01416 
<a name="l01417"></a>01417 <span class="comment">// Precondition:</span>
<a name="l01418"></a>01418 <span class="comment">// Parametre:</span>
<a name="l01419"></a>01419 <span class="comment">// Signification:</span>
<a name="l01420"></a>01420 <span class="comment">// Valeurs par defaut:</span>
<a name="l01421"></a>01421 <span class="comment">// Contraintes:</span>
<a name="l01422"></a>01422 <span class="comment">// Acces:</span>
<a name="l01423"></a>01423 <span class="comment">// Exception:</span>
<a name="l01424"></a>01424 <span class="comment">// Effets de bord:</span>
<a name="l01425"></a>01425 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01426"></a>01426 <span class="comment">//</span>
<a name="l01427"></a>01427 <span class="comment">//</span><span class="comment"></span>
<a name="l01428"></a>01428 <span class="comment">//! Renvoie le domaine discretise associe au probleme.&lt;br&gt;(version const)</span>
<a name="l01429"></a>01429 <span class="comment"></span><span class="comment">/** \return Domaine_dis\&amp;&lt;br&gt;</span>
<a name="l01430"></a>01430 <span class="comment">Signification: un domaine discretise&lt;br&gt;</span>
<a name="l01431"></a>01431 <span class="comment">Contraintes: reference constante */</span>
<a name="l01432"></a><a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f">01432</a> <span class="keyword">const</span> <a class="code" href="classDomaine__dis.html">Domaine_dis</a>&amp; <a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">Probleme_base::domaine_dis</a>()<span class="keyword"> const</span>
<a name="l01433"></a>01433 <span class="keyword"></span>{
<a name="l01434"></a>01434   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>;
<a name="l01435"></a>01435 }
<a name="l01436"></a>01436 
<a name="l01437"></a>01437 <span class="comment">// Precondition:</span>
<a name="l01438"></a>01438 <span class="comment">// Parametre:</span>
<a name="l01439"></a>01439 <span class="comment">// Signification:</span>
<a name="l01440"></a>01440 <span class="comment">// Valeurs par defaut:</span>
<a name="l01441"></a>01441 <span class="comment">// Contraintes:</span>
<a name="l01442"></a>01442 <span class="comment">// Acces:</span>
<a name="l01443"></a>01443 <span class="comment">// Exception:</span>
<a name="l01444"></a>01444 <span class="comment">// Effets de bord:</span>
<a name="l01445"></a>01445 <span class="comment">// Postcondition:</span>
<a name="l01446"></a>01446 <span class="comment">//</span><span class="comment"></span>
<a name="l01447"></a>01447 <span class="comment">//! Renvoie le domaine discretise associe au probleme.</span>
<a name="l01448"></a>01448 <span class="comment"></span><span class="comment">/** \return Domaine_dis\&amp;&lt;br&gt;</span>
<a name="l01449"></a>01449 <span class="comment">Signification: un domaine discretise&lt;br&gt;</span>
<a name="l01450"></a>01450 <span class="comment">Contraintes: */</span>
<a name="l01451"></a><a class="code" href="classProbleme__base.html#af3dcfe1d75b8cf7a93ff182770211a88">01451</a> <a class="code" href="classDomaine__dis.html">Domaine_dis</a>&amp; <a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">Probleme_base::domaine_dis</a>()
<a name="l01452"></a>01452 {
<a name="l01453"></a>01453   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a7fa21882b6fddc99c39bb8a530a3909b">le_domaine_dis</a>;
<a name="l01454"></a>01454 }
<a name="l01455"></a>01455 
<a name="l01456"></a>01456 <span class="comment">// Precondition:</span>
<a name="l01457"></a>01457 <span class="comment">// Parametre:  Milieu_base&amp; mil</span>
<a name="l01458"></a>01458 <span class="comment">// Signification: le milieu a associer (Solide, Fluide Incompressible ...)</span>
<a name="l01459"></a>01459 <span class="comment">// Valeurs par defaut:</span>
<a name="l01460"></a>01460 <span class="comment">// Contraintes: reference constante</span>
<a name="l01461"></a>01461 <span class="comment">// Acces:</span>
<a name="l01462"></a>01462 <span class="comment">// </span>
<a name="l01463"></a>01463 <span class="comment">// Signification:</span>
<a name="l01464"></a>01464 <span class="comment">// Contraintes:</span>
<a name="l01465"></a>01465 <span class="comment">// Exception:</span>
<a name="l01466"></a>01466 <span class="comment">// Effets de bord: les equations associees au probleme ont un milieu associe</span>
<a name="l01467"></a>01467 <span class="comment">// Postcondition:</span>
<a name="l01468"></a>01468 <span class="comment">//</span>
<a name="l01469"></a>01469 <span class="comment">//</span><span class="comment"></span>
<a name="l01470"></a>01470 <span class="comment">//! Associe un milieu physique aux equations du probleme.&lt;br&gt;Choix du milieu physique.</span>
<a name="l01471"></a><a class="code" href="classProbleme__base.html#a07cf3e1956c293b2129c105369f2d19f">01471</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a07cf3e1956c293b2129c105369f2d19f" title="Associe un milieu physique aux equations du probleme. Choix du milieu physique.">Probleme_base::associer_milieu_base</a>(<span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; mil)
<a name="l01472"></a>01472 {
<a name="l01473"></a>01473   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01474"></a>01474     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a1886b59d39b7d60afb39aadfb56b971b">associer_milieu_base</a>(mil);
<a name="l01475"></a>01475 }
<a name="l01476"></a>01476 
<a name="l01477"></a>01477 <span class="comment">// Precondition:</span>
<a name="l01478"></a>01478 <span class="comment">// Parametre:</span>
<a name="l01479"></a>01479 <span class="comment">// Signification:</span>
<a name="l01480"></a>01480 <span class="comment">// Valeurs par defaut:</span>
<a name="l01481"></a>01481 <span class="comment">// Contraintes:</span>
<a name="l01482"></a>01482 <span class="comment">// Acces:</span>
<a name="l01483"></a>01483 <span class="comment">// Exception:</span>
<a name="l01484"></a>01484 <span class="comment">// Effets de bord:</span>
<a name="l01485"></a>01485 <span class="comment">// Postcondition:</span>
<a name="l01486"></a>01486 <span class="comment">//</span>
<a name="l01487"></a>01487 <span class="comment">//</span>
<a name="l01488"></a>01488 <span class="comment">//</span><span class="comment"></span>
<a name="l01489"></a>01489 <span class="comment">//! Renvoie le milieu physique associe au probleme.&lt;br&gt;(version const)&lt;br&gt;On renvoie le milieu associe a la premiere equation.</span>
<a name="l01490"></a>01490 <span class="comment"></span><span class="comment">/** \return Milieu_base\&amp;&lt;br&gt;</span>
<a name="l01491"></a>01491 <span class="comment">Signification: un milieu physique&lt;br&gt;</span>
<a name="l01492"></a>01492 <span class="comment">Contraintes: reference constante */</span>
<a name="l01493"></a><a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18">01493</a> <span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">Probleme_base::milieu</a>()<span class="keyword"> const</span>
<a name="l01494"></a>01494 <span class="keyword"></span>{
<a name="l01495"></a>01495   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>();
<a name="l01496"></a>01496 }
<a name="l01497"></a>01497 
<a name="l01498"></a>01498 <span class="comment">// Precondition:</span>
<a name="l01499"></a>01499 <span class="comment">// Parametre:</span>
<a name="l01500"></a>01500 <span class="comment">// Signification:</span>
<a name="l01501"></a>01501 <span class="comment">// Valeurs par defaut:</span>
<a name="l01502"></a>01502 <span class="comment">// Contraintes:</span>
<a name="l01503"></a>01503 <span class="comment">// Acces:</span>
<a name="l01504"></a>01504 <span class="comment">// Exception:</span>
<a name="l01505"></a>01505 <span class="comment">// Effets de bord:</span>
<a name="l01506"></a>01506 <span class="comment">// Postcondition:</span>
<a name="l01507"></a>01507 <span class="comment">//</span>
<a name="l01508"></a>01508 <span class="comment">//</span><span class="comment"></span>
<a name="l01509"></a>01509 <span class="comment">//! Renvoie le milieu physique associe au probleme.&lt;br&gt;On renvoie le milieu associe a la premiere equation.</span>
<a name="l01510"></a>01510 <span class="comment"></span><span class="comment">/** \return Milieu_base\&amp;&lt;br&gt;</span>
<a name="l01511"></a>01511 <span class="comment">Signification: un milieu physique&lt;br&gt;</span>
<a name="l01512"></a>01512 <span class="comment">Contraintes: */</span>
<a name="l01513"></a><a class="code" href="classProbleme__base.html#ae4e3ac1ea410c3904d3af0119b864127">01513</a> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">Probleme_base::milieu</a>()
<a name="l01514"></a>01514 {
<a name="l01515"></a>01515   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>();
<a name="l01516"></a>01516 }
<a name="l01517"></a>01517 
<a name="l01518"></a>01518 <span class="comment">// Precondition: une equation du probleme doit porter le nom specifie</span>
<a name="l01519"></a>01519 <span class="comment">// Parametre: Nom&amp; type</span>
<a name="l01520"></a>01520 <span class="comment">// Signification: le nom de l&#39;equation a renvoyer</span>
<a name="l01521"></a>01521 <span class="comment">// Valeurs par defaut:</span>
<a name="l01522"></a>01522 <span class="comment">// Contraintes: reference constante</span>
<a name="l01523"></a>01523 <span class="comment">// Acces:</span>
<a name="l01524"></a>01524 <span class="comment">// Exception: pas d&#39;equation du nom specifie</span>
<a name="l01525"></a>01525 <span class="comment">// Effets de bord:</span>
<a name="l01526"></a>01526 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01527"></a>01527 <span class="comment">//</span>
<a name="l01528"></a>01528 <span class="comment">//</span>
<a name="l01529"></a>01529 <span class="comment">//</span>
<a name="l01530"></a>01530 <span class="comment">//</span>
<a name="l01531"></a>01531 <span class="comment">//</span><span class="comment"></span>
<a name="l01532"></a>01532 <span class="comment">//! Renvoie l&#39;equation dont le nom est specifie.&lt;br&gt;On indexe les equations avec leur nom associe.&lt;br&gt;On cherche dans toutes les equations du probleme celle&lt;br&gt;qui porte le nom specifie.&lt;br&gt;(version const)</span>
<a name="l01533"></a>01533 <span class="comment"></span><span class="comment">/** \return Equation_base\&amp;&lt;br&gt;</span>
<a name="l01534"></a>01534 <span class="comment">Signification: une equation&lt;br&gt;</span>
<a name="l01535"></a>01535 <span class="comment">Contraintes: reference constante */</span>
<a name="l01536"></a><a class="code" href="classProbleme__base.html#a4cd995256b20ec5bfe0c8463f4d5d0d3">01536</a> <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">Probleme_base::equation</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type)<span class="keyword"> const</span>
<a name="l01537"></a>01537 <span class="keyword"></span>{
<a name="l01538"></a>01538   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> Type(type);
<a name="l01539"></a>01539   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> Type_eqn;
<a name="l01540"></a>01540   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01541"></a>01541     {
<a name="l01542"></a>01542       Type_eqn = <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l01543"></a>01543       <span class="keywordflow">if</span>(Type_eqn==Type)
<a name="l01544"></a>01544         <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i);
<a name="l01545"></a>01545     }
<a name="l01546"></a>01546   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; does not contain any equation of type: &quot;</span> &lt;&lt; type &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01547"></a>01547   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Here is the list of possible equations for a &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; problem: &quot;</span> &lt;&lt; finl;
<a name="l01548"></a>01548   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01549"></a>01549     {
<a name="l01550"></a>01550       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;\t- &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; finl;
<a name="l01551"></a>01551     }
<a name="l01552"></a>01552   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01553"></a>01553 <span class="comment">// Pour les compilos;</span>
<a name="l01554"></a>01554   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0);
<a name="l01555"></a>01555 }
<a name="l01556"></a>01556 
<a name="l01557"></a>01557 <span class="comment">// Description (B.Math):</span>
<a name="l01558"></a>01558 <span class="comment">// Methode virtuelle ajoutee pour les problemes ayant plusieurs equations</span>
<a name="l01559"></a>01559 <span class="comment">// de meme type (Probleme_FT_Disc_gen). Dans ce cas, le nom de l&#39;equation</span>
<a name="l01560"></a>01560 <span class="comment">// n&#39;est pas son type...</span>
<a name="l01561"></a><a class="code" href="classProbleme__base.html#aefc36b7ddeecbda04810424de8cd543f">01561</a> <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; <a class="code" href="classProbleme__base.html#aefc36b7ddeecbda04810424de8cd543f">Probleme_base::get_equation_by_name</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; un_nom)<span class="keyword"> const</span>
<a name="l01562"></a>01562 <span class="keyword"></span>{
<a name="l01563"></a>01563   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(un_nom);
<a name="l01564"></a>01564 }
<a name="l01565"></a>01565 
<a name="l01566"></a>01566 <span class="comment">// Description (B.Math):</span>
<a name="l01567"></a>01567 <span class="comment">// Methode virtuelle ajoutee pour les problemes ayant plusieurs equations</span>
<a name="l01568"></a>01568 <span class="comment">// de meme type (Probleme_FT_Disc_gen). Dans ce cas, le nom de l&#39;equation</span>
<a name="l01569"></a>01569 <span class="comment">// n&#39;est pas son type...</span>
<a name="l01570"></a>01570 <span class="comment">// Version non const. Cette methode est notamment appelee a la lecture du probleme.</span>
<a name="l01571"></a><a class="code" href="classProbleme__base.html#af24921237a504055a138204849ef1ea4">01571</a> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; <a class="code" href="classProbleme__base.html#af24921237a504055a138204849ef1ea4">Probleme_base::getset_equation_by_name</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; un_nom)
<a name="l01572"></a>01572 {
<a name="l01573"></a>01573   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(un_nom);
<a name="l01574"></a>01574 }
<a name="l01575"></a>01575 
<a name="l01576"></a>01576 <span class="comment">// Precondition: une equation du probleme doit porter le nom specifie</span>
<a name="l01577"></a>01577 <span class="comment">// Parametre: Nom&amp; type</span>
<a name="l01578"></a>01578 <span class="comment">// Signification: le nom de l&#39;equation a renvoyer</span>
<a name="l01579"></a>01579 <span class="comment">// Valeurs par defaut:</span>
<a name="l01580"></a>01580 <span class="comment">// Contraintes: reference constante</span>
<a name="l01581"></a>01581 <span class="comment">// Acces:</span>
<a name="l01582"></a>01582 <span class="comment">// Exception: pas d&#39;equation du nom specifie</span>
<a name="l01583"></a>01583 <span class="comment">// Effets de bord:</span>
<a name="l01584"></a>01584 <span class="comment">// Postcondition:</span>
<a name="l01585"></a>01585 <span class="comment">//</span>
<a name="l01586"></a>01586 <span class="comment">//</span>
<a name="l01587"></a>01587 <span class="comment">//</span>
<a name="l01588"></a>01588 <span class="comment">//</span><span class="comment"></span>
<a name="l01589"></a>01589 <span class="comment">//! Renvoie l&#39;equation dont le nom est specifie.&lt;br&gt;On indexe les equations avec leur nom associe.&lt;br&gt;On cherche dans toutes les equations du probleme celle&lt;br&gt;qui porte le nom specifie.</span>
<a name="l01590"></a>01590 <span class="comment"></span><span class="comment">/** \return Equation_base\&amp;&lt;br&gt;</span>
<a name="l01591"></a>01591 <span class="comment">Signification: une equation&lt;br&gt;</span>
<a name="l01592"></a>01592 <span class="comment">Contraintes: reference constante */</span>
<a name="l01593"></a><a class="code" href="classProbleme__base.html#aca5d6829490d9a4e7cd7767a7d440ef2">01593</a> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">Probleme_base::equation</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type)
<a name="l01594"></a>01594 {
<a name="l01595"></a>01595   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> Type(type);
<a name="l01596"></a>01596   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> Type_eqn;
<a name="l01597"></a>01597   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01598"></a>01598     {
<a name="l01599"></a>01599       Type_eqn = <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l01600"></a>01600       <span class="keywordflow">if</span>(Type_eqn==Type)
<a name="l01601"></a>01601         <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i);
<a name="l01602"></a>01602     }
<a name="l01603"></a>01603   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; does not contain any equation of type: &quot;</span> &lt;&lt; type &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01604"></a>01604   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Here is the list of possible equations for a &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; problem: &quot;</span> &lt;&lt; finl;
<a name="l01605"></a>01605   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01606"></a>01606     {
<a name="l01607"></a>01607       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;\t- &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; finl;
<a name="l01608"></a>01608     }
<a name="l01609"></a>01609   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01610"></a>01610 <span class="comment">// Pour les compilos;</span>
<a name="l01611"></a>01611   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0);
<a name="l01612"></a>01612 }
<a name="l01613"></a>01613 
<a name="l01614"></a><a class="code" href="classProbleme__base.html#a0d8d417e3c4e1cabfaea63ca4aeb59c0">01614</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a0d8d417e3c4e1cabfaea63ca4aeb59c0">Probleme_base::creer_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; motlu)
<a name="l01615"></a>01615 {
<a name="l01616"></a>01616   <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classMilieu__base.html#afa29a886c4931a8b42e829495244023b">creer_champ</a>(motlu);
<a name="l01617"></a>01617   <span class="keywordtype">int</span> nb_eq = <a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>();
<a name="l01618"></a>01618   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_eq; i++)
<a name="l01619"></a>01619     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a1e62c4d38b25e577585c5e1d9a8942d9">creer_champ</a>(motlu);
<a name="l01620"></a>01620 
<a name="l01621"></a>01621   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>;
<a name="l01622"></a>01622   <span class="keywordflow">while</span> (curseur)
<a name="l01623"></a>01623     {
<a name="l01624"></a>01624       <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=curseur.valeur().valeur();
<a name="l01625"></a>01625       loi.<a class="code" href="classLoi__Fermeture__base.html#a27ee74969cc5dc37178ef84437289a25" title="La classe de base ne comprend aucun champ supplementaire.">creer_champ</a>(motlu);
<a name="l01626"></a>01626       ++curseur;
<a name="l01627"></a>01627     }
<a name="l01628"></a>01628 }
<a name="l01629"></a>01629 
<a name="l01630"></a><a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">01630</a> <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">Probleme_base::get_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; un_nom)<span class="keyword"> const</span>
<a name="l01631"></a>01631 <span class="keyword"></span>{
<a name="l01632"></a>01632   <span class="keywordtype">int</span> nb_eq = <a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>();
<a name="l01633"></a>01633   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_eq; i++)
<a name="l01634"></a>01634     {
<a name="l01635"></a>01635       <span class="keywordflow">try</span>
<a name="l01636"></a>01636         {
<a name="l01637"></a>01637           <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#ad6bcab0bb6d83b1b563a7aa30f0df721">get_champ</a>(un_nom);
<a name="l01638"></a>01638         }
<a name="l01639"></a>01639       <span class="keywordflow">catch</span> (<a class="code" href="classChamps__compris__erreur.html">Champs_compris_erreur</a>)
<a name="l01640"></a>01640         {
<a name="l01641"></a>01641         }
<a name="l01642"></a>01642       <span class="keywordflow">try</span>
<a name="l01643"></a>01643         {
<a name="l01644"></a>01644           <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>().<a class="code" href="classMilieu__base.html#aa60c5c79f63e87851dba756038d81e47">get_champ</a>(un_nom);
<a name="l01645"></a>01645         }
<a name="l01646"></a>01646       <span class="keywordflow">catch</span> (<a class="code" href="classChamps__compris__erreur.html">Champs_compris_erreur</a>)
<a name="l01647"></a>01647         {
<a name="l01648"></a>01648         }
<a name="l01649"></a>01649     }
<a name="l01650"></a>01650 
<a name="l01651"></a>01651   <a class="code" href="List_8h.html#add189d7375e577842ac891b09afc6d4b">CONST_LIST_CURSEUR</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>;
<a name="l01652"></a>01652   <span class="keywordflow">while</span> (curseur)
<a name="l01653"></a>01653     {
<a name="l01654"></a>01654       <span class="keyword">const</span> <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=curseur.valeur().valeur();
<a name="l01655"></a>01655       <span class="keywordflow">try</span>
<a name="l01656"></a>01656         {
<a name="l01657"></a>01657           <span class="keywordflow">return</span> loi.<a class="code" href="classLoi__Fermeture__base.html#a315c2e9965109a410bd3e5b31d70d4c6" title="Cette methode renvoie le champ de nom &quot;nom&quot; s&#39;il est compris par la classe, sinon appelle la method...">get_champ</a>(un_nom);
<a name="l01658"></a>01658         }
<a name="l01659"></a>01659       <span class="keywordflow">catch</span>(<a class="code" href="classChamps__compris__erreur.html">Champs_compris_erreur</a>)
<a name="l01660"></a>01660         {
<a name="l01661"></a>01661         }
<a name="l01662"></a>01662       ++curseur;
<a name="l01663"></a>01663     }
<a name="l01664"></a>01664 
<a name="l01665"></a>01665   <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#ac2bc635ab5b121c1cab78b6f98c0b203" title="Renvoie la discretisation associee au probleme.">discretisation</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()==<span class="stringliteral">&quot;VDF&quot;</span>)
<a name="l01666"></a>01666     {
<a name="l01667"></a>01667       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; un_nom &lt;&lt; <span class="stringliteral">&quot; is not available for VDF discretization&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01668"></a>01668       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01669"></a>01669     }
<a name="l01670"></a>01670 
<a name="l01671"></a>01671   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The field of name &quot;</span>&lt;&lt;un_nom&lt;&lt;<span class="stringliteral">&quot; do not correspond to a field understood by the problem.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01672"></a>01672   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;It may be a field dedicated only to post-process and defined in the Definition_champs set.&quot;</span>&lt;&lt;finl;
<a name="l01673"></a>01673   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;1) If you have request the post-processing of &quot;</span>&lt;&lt;un_nom&lt;&lt;<span class="stringliteral">&quot; in the Champs set&quot;</span>&lt;&lt;finl;
<a name="l01674"></a>01674   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;please remove the localisation elem or som that you may have specified.&quot;</span>&lt;&lt;finl;
<a name="l01675"></a>01675   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;2) If you have used &quot;</span>&lt;&lt;un_nom&lt;&lt;<span class="stringliteral">&quot; in Definition_champs, please use &#39;sources_reference { &quot;</span>&lt;&lt;un_nom&lt;&lt;<span class="stringliteral">&quot; }&#39;&quot;</span>&lt;&lt;finl;
<a name="l01676"></a>01676   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;instead of &#39;source refchamp { pb_champ &quot;</span>&lt;&lt;<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>()&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;un_nom&lt;&lt;<span class="stringliteral">&quot; }&#39;&quot;</span>&lt;&lt;finl;
<a name="l01677"></a>01677   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;3) Check reference manual.&quot;</span> &lt;&lt; finl;
<a name="l01678"></a>01678   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;4) Contact TRUST support.&quot;</span> &lt;&lt; finl;
<a name="l01679"></a>01679   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01680"></a>01680 
<a name="l01681"></a>01681 <span class="comment">// Pour compilation</span>
<a name="l01682"></a>01682   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) ref_champ;
<a name="l01683"></a>01683   <span class="keywordflow">return</span> ref_champ;
<a name="l01684"></a>01684 }
<a name="l01685"></a>01685 
<a name="l01686"></a><a class="code" href="classProbleme__base.html#a783505be0b9792319ee2f07242cfcd33">01686</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a783505be0b9792319ee2f07242cfcd33">Probleme_base::get_noms_champs_postraitables</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms,<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35f">Option</a> opt)<span class="keyword"> const</span>
<a name="l01687"></a>01687 <span class="keyword"></span>{
<a name="l01688"></a>01688   <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classMilieu__base.html#a2b42ba072ef0223b206c68591ee07218">get_noms_champs_postraitables</a>(noms,opt);
<a name="l01689"></a>01689   <span class="keywordtype">int</span> nb_eq = <a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>();
<a name="l01690"></a>01690   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_eq; i++)
<a name="l01691"></a>01691     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#ab8e18c5cd6c6c9a6279e6397341b6726">get_noms_champs_postraitables</a>(noms,opt);
<a name="l01692"></a>01692 
<a name="l01693"></a>01693   <a class="code" href="List_8h.html#add189d7375e577842ac891b09afc6d4b">CONST_LIST_CURSEUR</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>;
<a name="l01694"></a>01694   <span class="keywordflow">while</span> (curseur)
<a name="l01695"></a>01695     {
<a name="l01696"></a>01696       <span class="keyword">const</span> <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=curseur.valeur().valeur();
<a name="l01697"></a>01697       loi.<a class="code" href="classLoi__Fermeture__base.html#a316ca956c98a9d4bcba2d74818002858">get_noms_champs_postraitables</a>(noms,opt);
<a name="l01698"></a>01698       ++curseur;
<a name="l01699"></a>01699     }
<a name="l01700"></a>01700 
<a name="l01701"></a>01701 }
<a name="l01702"></a>01702 
<a name="l01703"></a><a class="code" href="classProbleme__base.html#adcf054429f236533c4298cab6a026393">01703</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#adcf054429f236533c4298cab6a026393">Probleme_base::comprend_champ_post</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; un_nom)<span class="keyword"> const</span>
<a name="l01704"></a>01704 <span class="keyword"></span>{
<a name="l01705"></a>01705   <span class="keywordflow">if</span> (un_nom==<span class="stringliteral">&quot;TEMPERATURE_PHYSIQUE&quot;</span>)
<a name="l01706"></a>01706     <span class="keywordflow">return</span> 0;
<a name="l01707"></a>01707   <a class="code" href="List_8h.html#add189d7375e577842ac891b09afc6d4b">CONST_LIST_CURSEUR</a>(<a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classPostraitement__base.html" title="Classe de base pour l&#39;ensemble des postraitements.">Postraitement_base</a>)) curseur_post = <a class="code" href="classProbleme__base.html#a6e1ac01728ed55a4fac04cbcbeb69169">postraitements</a>();
<a name="l01708"></a>01708   <span class="keywordflow">while</span> (curseur_post)
<a name="l01709"></a>01709     {
<a name="l01710"></a>01710       <span class="keyword">const</span> <a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>&amp; post = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>,curseur_post.valeur().valeur());
<a name="l01711"></a>01711       <span class="keywordflow">if</span> (post.<a class="code" href="classPostraitement.html#a3aa67f588b4675e5ae7162ea5311acc7">comprend_champ_post</a>(un_nom))
<a name="l01712"></a>01712         <span class="keywordflow">return</span> 1;
<a name="l01713"></a>01713       ++curseur_post;
<a name="l01714"></a>01714     }
<a name="l01715"></a>01715   <span class="keywordflow">return</span> 0;
<a name="l01716"></a>01716 }
<a name="l01717"></a>01717 
<a name="l01718"></a>01718 <span class="comment">//</span><span class="comment"></span>
<a name="l01719"></a>01719 <span class="comment">//! On verifie que le temps de debut et de fin des statistiques est identique sur tous les champsde tous les postraitements</span>
<a name="l01720"></a><a class="code" href="classProbleme__base.html#af756d7979e29b877342ac3d8c8fbfdcc">01720</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#af756d7979e29b877342ac3d8c8fbfdcc" title="On verifie que le temps de debut et de fin des statistiques est identique sur tous les champsde tous ...">Probleme_base::verifie_tdeb_tfin</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; un_nom)<span class="keyword"> const</span>
<a name="l01721"></a>01721 <span class="keyword"></span>{
<a name="l01722"></a>01722   <a class="code" href="List_8h.html#add189d7375e577842ac891b09afc6d4b">CONST_LIST_CURSEUR</a>(<a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classPostraitement__base.html" title="Classe de base pour l&#39;ensemble des postraitements.">Postraitement_base</a>)) curseur_post = <a class="code" href="classProbleme__base.html#a6e1ac01728ed55a4fac04cbcbeb69169">postraitements</a>();
<a name="l01723"></a>01723   <span class="keywordflow">while</span> (curseur_post)
<a name="l01724"></a>01724     {
<a name="l01725"></a>01725       <span class="keyword">const</span> <a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>&amp; post = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>,curseur_post.valeur().valeur());
<a name="l01726"></a>01726       <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a772bbf68d79a233fecfecf8bfc929ea8">tstat_deb_</a>==-1)
<a name="l01727"></a>01727         <a class="code" href="classProbleme__base.html#a772bbf68d79a233fecfecf8bfc929ea8">tstat_deb_</a> = post.<a class="code" href="classPostraitement.html#ae468c82a5b5e247b9355d6ddf33f0f84">tstat_deb</a>();
<a name="l01728"></a>01728       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(<a class="code" href="classProbleme__base.html#a772bbf68d79a233fecfecf8bfc929ea8">tstat_deb_</a>,post.<a class="code" href="classPostraitement.html#ae468c82a5b5e247b9355d6ddf33f0f84">tstat_deb</a>()) &amp;&amp; post.<a class="code" href="classPostraitement.html#ae468c82a5b5e247b9355d6ddf33f0f84">tstat_deb</a>()!=-1)
<a name="l01729"></a>01729         {
<a name="l01730"></a>01730 <span class="comment">// Cerr &lt;&lt; finl;</span>
<a name="l01731"></a>01731 <span class="comment">// Cerr &lt;&lt; &quot;Error in &quot; &lt;&lt; un_nom &lt;&lt; finl;</span>
<a name="l01732"></a>01732 <span class="comment">// Cerr &lt;&lt; &quot;Your beginning time of statistics t_deb=&quot; &lt;&lt; post.tstat_deb() &lt;&lt; &quot; must be equal&quot; &lt;&lt; finl;</span>
<a name="l01733"></a>01733 <span class="comment">// Cerr &lt;&lt; &quot;to the previous beginning time already read t_deb=&quot; &lt;&lt; tstat_deb_ &lt;&lt; finl;</span>
<a name="l01734"></a>01734           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Beginning times of statistics t_deb are differents but the calculation continues&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01735"></a>01735 <span class="comment">// exit();</span>
<a name="l01736"></a>01736         }
<a name="l01737"></a>01737       <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a86a8701f188e36f9cf8f5e399c926d6e">tstat_fin_</a>==-1)
<a name="l01738"></a>01738         <a class="code" href="classProbleme__base.html#a86a8701f188e36f9cf8f5e399c926d6e">tstat_fin_</a> = post.<a class="code" href="classPostraitement.html#ad114b2819914395cc86ea22a93c136c7">tstat_fin</a>();
<a name="l01739"></a>01739       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(<a class="code" href="classProbleme__base.html#a86a8701f188e36f9cf8f5e399c926d6e">tstat_fin_</a>,post.<a class="code" href="classPostraitement.html#ad114b2819914395cc86ea22a93c136c7">tstat_fin</a>()) &amp;&amp; post.<a class="code" href="classPostraitement.html#ad114b2819914395cc86ea22a93c136c7">tstat_fin</a>()!=-1)
<a name="l01740"></a>01740         {
<a name="l01741"></a>01741 <span class="comment">// Cerr &lt;&lt; finl;</span>
<a name="l01742"></a>01742 <span class="comment">// Cerr &lt;&lt; &quot;Error in &quot; &lt;&lt; un_nom &lt;&lt; finl;</span>
<a name="l01743"></a>01743 <span class="comment">// Cerr &lt;&lt; &quot;Your ending time of statistics t_fin=&quot; &lt;&lt; post.tstat_fin() &lt;&lt; &quot; must be equal&quot; &lt;&lt; finl;</span>
<a name="l01744"></a>01744 <span class="comment">// Cerr &lt;&lt; &quot;to the previous ending time already read t_fin=&quot; &lt;&lt; tstat_fin_ &lt;&lt; finl;</span>
<a name="l01745"></a>01745           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Ending times of statistics t_fin are differents but the calculation continues&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01746"></a>01746 <span class="comment">// exit();</span>
<a name="l01747"></a>01747         }
<a name="l01748"></a>01748       ++curseur_post;
<a name="l01749"></a>01749     }
<a name="l01750"></a>01750   <span class="keywordflow">return</span> 1;
<a name="l01751"></a>01751 }
<a name="l01752"></a>01752 
<a name="l01753"></a><a class="code" href="classProbleme__base.html#aba5e170d65d22ea6b3f4c6a053ed7d6f">01753</a> <span class="keyword">const</span> <a class="code" href="classChamp__Generique__base.html" title="Classe de base des champs generiques pour importation d un champ discret et actions elementaires sur ...">Champ_Generique_base</a>&amp; <a class="code" href="classProbleme__base.html#aba5e170d65d22ea6b3f4c6a053ed7d6f">Probleme_base::get_champ_post</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; un_nom)<span class="keyword"> const</span>
<a name="l01754"></a>01754 <span class="keyword"></span>{
<a name="l01755"></a>01755 
<a name="l01756"></a>01756   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Generique__base.html" title="Classe de base des champs generiques pour importation d un champ discret et actions elementaires sur ...">Champ_Generique_base</a>) ref_champ;
<a name="l01757"></a>01757 
<a name="l01758"></a>01758   <a class="code" href="List_8h.html#add189d7375e577842ac891b09afc6d4b">CONST_LIST_CURSEUR</a>(<a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classPostraitement__base.html" title="Classe de base pour l&#39;ensemble des postraitements.">Postraitement_base</a>)) curseur_post = <a class="code" href="classProbleme__base.html#a6e1ac01728ed55a4fac04cbcbeb69169">postraitements</a>();
<a name="l01759"></a>01759   <span class="keywordflow">while</span> (curseur_post)
<a name="l01760"></a>01760     {
<a name="l01761"></a>01761       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>,curseur_post.valeur().valeur()))
<a name="l01762"></a>01762         {
<a name="l01763"></a>01763           <span class="keyword">const</span> <a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>&amp; post = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>,curseur_post.valeur().valeur());
<a name="l01764"></a>01764           <span class="keywordflow">try</span>
<a name="l01765"></a>01765             {
<a name="l01766"></a>01766               <span class="keywordflow">return</span> post.<a class="code" href="classPostraitement.html#a1f864b4d5111a73f7fb6f4f9281a7bc3">get_champ_post</a>(un_nom);
<a name="l01767"></a>01767             }
<a name="l01768"></a>01768           <span class="keywordflow">catch</span> (<a class="code" href="classChamps__compris__erreur.html">Champs_compris_erreur</a>) { }
<a name="l01769"></a>01769         }
<a name="l01770"></a>01770       ++curseur_post;
<a name="l01771"></a>01771     }
<a name="l01772"></a>01772   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01773"></a>01773   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The field named &quot;</span>&lt;&lt;un_nom&lt;&lt;<span class="stringliteral">&quot; do not correspond to a field understood by the problem.&quot;</span>&lt;&lt;finl;
<a name="l01774"></a>01774   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Check the name of the field indicated into the postprocessing block of the data file &quot;</span> &lt;&lt; finl;
<a name="l01775"></a>01775   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;or in the list of post-processed fields above (in the block &#39;Reading of fields to be postprocessed&#39;).&quot;</span>&lt;&lt;finl;
<a name="l01776"></a>01776   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01777"></a>01777 
<a name="l01778"></a>01778 <span class="comment">// Pour compilation</span>
<a name="l01779"></a>01779   <span class="keywordflow">return</span> ref_champ;
<a name="l01780"></a>01780 }
<a name="l01781"></a>01781 
<a name="l01782"></a><a class="code" href="classProbleme__base.html#a749d97a4b29ea22aaef80e09377b1b10">01782</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a749d97a4b29ea22aaef80e09377b1b10">Probleme_base::a_pour_IntVect</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp;, <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classIntVect.html">IntVect</a>)&amp; )<span class="keyword"> const</span>
<a name="l01783"></a>01783 <span class="keyword"></span>{
<a name="l01784"></a>01784   <span class="keywordflow">return</span> 0;
<a name="l01785"></a>01785 }
<a name="l01786"></a>01786 
<a name="l01787"></a>01787 <span class="comment">// Precondition:</span>
<a name="l01788"></a>01788 <span class="comment">// Parametre: double temps</span>
<a name="l01789"></a>01789 <span class="comment">// Signification: le pas de temps de mise a jour</span>
<a name="l01790"></a>01790 <span class="comment">// Valeurs par defaut:</span>
<a name="l01791"></a>01791 <span class="comment">// Contraintes:</span>
<a name="l01792"></a>01792 <span class="comment">// Acces:</span>
<a name="l01793"></a>01793 <span class="comment">// </span>
<a name="l01794"></a>01794 <span class="comment">// Signification:</span>
<a name="l01795"></a>01795 <span class="comment">// Contraintes:</span>
<a name="l01796"></a>01796 <span class="comment">// Exception:</span>
<a name="l01797"></a>01797 <span class="comment">// Effets de bord:</span>
<a name="l01798"></a>01798 <span class="comment">// Postcondition:</span>
<a name="l01799"></a>01799 <span class="comment">//</span>
<a name="l01800"></a>01800 <span class="comment">//</span><span class="comment"></span>
<a name="l01801"></a>01801 <span class="comment">//! Effectue une mise a jour en temps du probleme.&lt;br&gt;Effectue la mise a jour sur toutes les equations du probleme.</span>
<a name="l01802"></a><a class="code" href="classProbleme__base.html#a8644e9f76f6dfdd087eb56938997fc57">01802</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a8644e9f76f6dfdd087eb56938997fc57" title="Effectue une mise a jour en temps du probleme. Effectue la mise a jour sur toutes les equations du pr...">Probleme_base::mettre_a_jour</a>(<span class="keywordtype">double</span> temps)
<a name="l01803"></a>01803 {
<a name="l01804"></a>01804 <span class="comment">// Update the name of the problem being debugged</span>
<a name="l01805"></a>01805   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l01806"></a>01806 
<a name="l01807"></a>01807 <span class="comment">// TODO : overload in Pb_multiphase because for turbulence, le_modele_turbulence.mettre_a_jour(temps)</span>
<a name="l01808"></a>01808 <span class="comment">// should be called before equation(i).mettre_a_jour(temps)</span>
<a name="l01809"></a>01809 
<a name="l01810"></a>01810 <span class="comment">// Update the equations:</span>
<a name="l01811"></a>01811   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01812"></a>01812     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a62757c897af44f346e3a9e65e38aa122" title="La valeur de l&#39;inconnue sur le pas de temps a ete calculee. Cette methode avance le present jusqu&#39;au ...">mettre_a_jour</a>(temps);
<a name="l01813"></a>01813 
<a name="l01814"></a>01814 <span class="comment">// Update the media:</span>
<a name="l01815"></a>01815   <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classMilieu__base.html#a454266f60ba546bb1946c2394d659804">mettre_a_jour</a>(temps);
<a name="l01816"></a>01816 
<a name="l01817"></a>01817 <span class="comment">// Update the post-processing:</span>
<a name="l01818"></a>01818   <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#af73afcb31f834ac13a2912b5b1a5b78e">mettre_a_jour</a>(temps);
<a name="l01819"></a>01819 
<a name="l01820"></a>01820 <span class="comment">// Update the domain:</span>
<a name="l01821"></a>01821   <a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a6ceaaa22c7b9bab643184b4c7ffbb0e1">mettre_a_jour</a>(temps,<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>(),*<span class="keyword">this</span>);
<a name="l01822"></a>01822 
<a name="l01823"></a>01823   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>;
<a name="l01824"></a>01824   <span class="keywordflow">while</span> (curseur)
<a name="l01825"></a>01825     {
<a name="l01826"></a>01826       <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=curseur.valeur().valeur();
<a name="l01827"></a>01827       loi.<a class="code" href="classLoi__Fermeture__base.html#add87a45fab4acf2ae285a203f8e869ee" title="Cette methode est appelee par le probleme apres mettre_a_jour() des equations et du milieu...">mettre_a_jour</a>(temps);
<a name="l01828"></a>01828       ++curseur;
<a name="l01829"></a>01829     }
<a name="l01830"></a>01830 
<a name="l01831"></a>01831 }
<a name="l01832"></a>01832 
<a name="l01833"></a>01833 <span class="comment">// Precondition:</span>
<a name="l01834"></a>01834 <span class="comment">// Parametre:</span>
<a name="l01835"></a>01835 <span class="comment">// Signification:</span>
<a name="l01836"></a>01836 <span class="comment">// Valeurs par defaut:</span>
<a name="l01837"></a>01837 <span class="comment">// Contraintes:</span>
<a name="l01838"></a>01838 <span class="comment">// Acces:</span>
<a name="l01839"></a>01839 <span class="comment">// </span>
<a name="l01840"></a>01840 <span class="comment">// Signification:</span>
<a name="l01841"></a>01841 <span class="comment">// Contraintes:</span>
<a name="l01842"></a>01842 <span class="comment">// Exception:</span>
<a name="l01843"></a>01843 <span class="comment">// Effets de bord: Le milieu associe est initilialise, les equations sont</span>
<a name="l01844"></a>01844 <span class="comment">// preparees au calcul.</span>
<a name="l01845"></a>01845 <span class="comment">// Postcondition:</span>
<a name="l01846"></a>01846 <span class="comment">//</span>
<a name="l01847"></a>01847 <span class="comment">//</span><span class="comment"></span>
<a name="l01848"></a>01848 <span class="comment">//! Prepare le calcul: initialise les parametres du milieu et&lt;br&gt;prepare le calcul de chacune des equations.</span>
<a name="l01849"></a><a class="code" href="classProbleme__base.html#a66839a7f7af4105a0b6e1301a60d5cfa">01849</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a66839a7f7af4105a0b6e1301a60d5cfa" title="Prepare le calcul: initialise les parametres du milieu et prepare le calcul de chacune des equations...">Probleme_base::preparer_calcul</a>()
<a name="l01850"></a>01850 {
<a name="l01851"></a>01851   <span class="keyword">const</span> <span class="keywordtype">double</span> temps = <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>();
<a name="l01852"></a>01852 <span class="comment">// Modification du tableau Qdm porte par la zone_dis() dans le cas</span>
<a name="l01853"></a>01853 <span class="comment">// ou il y a des conditions aux limites periodiques.</span>
<a name="l01854"></a>01854 <span class="comment">// Rq : Si l&#39;une des equations porte la condition a la limite periodique</span>
<a name="l01855"></a>01855 <span class="comment">// alors les autres doivent forcement la porter.</span>
<a name="l01856"></a>01856   <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>()-&gt;modifier_pour_Cl(<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).zone_Cl_dis().les_conditions_limites());
<a name="l01857"></a>01857   <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classMilieu__base.html#ab2bcbc9018d00588f00d3abede9abcdb">initialiser</a>(temps);
<a name="l01858"></a>01858   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01859"></a>01859     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a6ec47139247e984d286c2e13d0a92ff7" title="Tout ce qui ne depend pas des autres problemes eventuels.">preparer_calcul</a>();
<a name="l01860"></a>01860   <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classMilieu__base.html#a4aef5a0403ad338a23760b6fa562e860">preparer_calcul</a>();
<a name="l01861"></a>01861 
<a name="l01862"></a>01862   <span class="keywordflow">if</span>(<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().file_allocation() &amp;&amp; <a class="code" href="classEcritureLectureSpecial.html#aa37e4a002db5ec6c3082401194c4c909">EcritureLectureSpecial::Active</a>)
<a name="l01863"></a>01863     <a class="code" href="classProbleme__base.html#af11ff58621cf4b445a32c7e9c007c986" title="Ecrit le probleme dans un fichier *.calcul_xyz et calcul la place disque prise par ce fichier...">file_size_xyz</a>();
<a name="l01864"></a>01864 
<a name="l01865"></a>01865   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>;
<a name="l01866"></a>01866   <span class="keywordflow">while</span> (curseur)
<a name="l01867"></a>01867     {
<a name="l01868"></a>01868       <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=curseur.valeur().valeur();
<a name="l01869"></a>01869       loi.<a class="code" href="classLoi__Fermeture__base.html#a690ed988c7ceff85aa85795fffbd1363" title="Cette methode est appelee par le probleme apres preparer_calcul() des equations et du milieu...">preparer_calcul</a>();
<a name="l01870"></a>01870       ++curseur;
<a name="l01871"></a>01871     }
<a name="l01872"></a>01872 }
<a name="l01873"></a>01873 
<a name="l01874"></a>01874 
<a name="l01875"></a>01875 <span class="comment">// Precondition:</span>
<a name="l01876"></a>01876 <span class="comment">// Parametre:</span>
<a name="l01877"></a>01877 <span class="comment">// Signification:</span>
<a name="l01878"></a>01878 <span class="comment">// Valeurs par defaut:</span>
<a name="l01879"></a>01879 <span class="comment">// Contraintes:</span>
<a name="l01880"></a>01880 <span class="comment">// Acces:</span>
<a name="l01881"></a>01881 <span class="comment">// Exception:</span>
<a name="l01882"></a>01882 <span class="comment">// Effets de bord:</span>
<a name="l01883"></a>01883 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01884"></a>01884 <span class="comment">//</span>
<a name="l01885"></a>01885 <span class="comment">//</span>
<a name="l01886"></a>01886 <span class="comment">//</span><span class="comment"></span>
<a name="l01887"></a>01887 <span class="comment">//! Calcul la valeur du prochain pas de temps du probleme.&lt;br&gt;On calcule le minimum des pas de temps des equations associees&lt;br&gt;au probleme.</span>
<a name="l01888"></a>01888 <span class="comment"></span><span class="comment">/** \return double&lt;br&gt;</span>
<a name="l01889"></a>01889 <span class="comment">Signification: le pas de temps maximum autorise pour ce probleme&lt;br&gt;</span>
<a name="l01890"></a>01890 <span class="comment">Contraintes: */</span>
<a name="l01891"></a><a class="code" href="classProbleme__base.html#a74469695e1681fcba4ef15614de8c463">01891</a> <span class="keywordtype">double</span> <a class="code" href="classProbleme__base.html#a74469695e1681fcba4ef15614de8c463" title="Calcul la valeur du prochain pas de temps du probleme. On calcule le minimum des pas de temps des equ...">Probleme_base::calculer_pas_de_temps</a>()<span class="keyword"> const</span>
<a name="l01892"></a>01892 <span class="keyword"></span>{
<a name="l01893"></a>01893   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l01894"></a>01894   <span class="keywordtype">double</span> dt=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a7c52d28f5bb86270c2a33bcc20bb9e6f" title="Renvoie le pas de temps maximum. (version const)">pas_temps_max</a>();
<a name="l01895"></a>01895   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l01896"></a>01896     dt=<a class="code" href="Double_8h.html#a2f8edc4561e9744ed4233b205fa7ec32">min</a>(dt,<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a5b0b97f18ca64a6f26e984e25c944ee1" title="Calcul du prochain pas de temps. Renvoie l&#39;inverse de la somme des inverses des pas de temps calcules...">calculer_pas_de_temps</a>());
<a name="l01897"></a>01897   <span class="keywordflow">return</span> dt;
<a name="l01898"></a>01898 }
<a name="l01899"></a>01899 
<a name="l01900"></a><a class="code" href="classProbleme__base.html#a2214fc788fff2f54fd88e3d72d76dcc2">01900</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a2214fc788fff2f54fd88e3d72d76dcc2">Probleme_base::lire_postraitement_interfaces</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l01901"></a>01901 {
<a name="l01902"></a>01902   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The postprocessing of interfaces is only possible for&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01903"></a>01903   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;a problem type Pb_Front_Tracking, not a &quot;</span>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;finl;
<a name="l01904"></a>01904   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01905"></a>01905 
<a name="l01906"></a>01906 }
<a name="l01907"></a><a class="code" href="classProbleme__base.html#a3d5b338a1107e76baabe76d4c88d248e">01907</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a3d5b338a1107e76baabe76d4c88d248e">Probleme_base::postraiter_interfaces</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nomfich, <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; format, <span class="keywordtype">double</span> temps)
<a name="l01908"></a>01908 {
<a name="l01909"></a>01909   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<span class="stringliteral">&quot; must overloaded :postraiter_interfaces&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01910"></a>01910 <span class="comment">// exit();</span>
<a name="l01911"></a>01911 }
<a name="l01912"></a>01912 
<a name="l01913"></a>01913 <span class="comment">// En attendant de mieux poser les equations</span>
<a name="l01914"></a><a class="code" href="classProbleme__base.html#a4ef1cb4c4eed0aab75358ab7a91e29db">01914</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a4ef1cb4c4eed0aab75358ab7a91e29db">Probleme_base::is_dilatable</a>()<span class="keyword"> const</span>
<a name="l01915"></a>01915 <span class="keyword"></span>{
<a name="l01916"></a>01916   <span class="keywordflow">return</span> (<a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()==<span class="stringliteral">&quot;Fluide_Quasi_Compressible&quot;</span> || <a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()==<span class="stringliteral">&quot;Fluide_Weakly_Compressible&quot;</span>);
<a name="l01917"></a>01917 }
<a name="l01918"></a>01918 
<a name="l01919"></a>01919 <span class="comment">//</span><span class="comment"></span>
<a name="l01920"></a>01920 <span class="comment">//! Initialisation de file_size, bad_allocate, nb_pb_total, num_pb</span>
<a name="l01921"></a>01921 <span class="comment"></span><span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a8ff436441507da588ce03dfbd19bcf7a" title="Espace disque pris par les sauvegarde XYZ.">Probleme_base::file_size</a>=0;        <span class="comment">//!&lt; file_size est l&#39;espace disque en octet necessaire pour ecrire les fichiers XYZ</span>
<a name="l01922"></a>01922 <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#aa544b2276f6e813ddecfdebc715e1ee8" title="1 si allocation reussi, 0 sinon">Probleme_base::bad_allocate</a>=1;        <span class="comment">//!&lt; bad_allocate est un int qui permet de savoir si l&#39;allocation a deja eut lieu</span>
<a name="l01923"></a>01923 <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a34efe5a325770fc77a711893245a8d6c" title="Nombre total de probleme.">Probleme_base::nb_pb_total</a>=0;        <span class="comment">//!&lt; nb_pb_total est le nombre total de probleme</span>
<a name="l01924"></a>01924 <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#a0e959b6f59e1e8f5e2d4c37ee292a3f4" title="numero du probleme">Probleme_base::num_pb</a>=1;                <span class="comment">//!&lt; num_pb est le numero du probleme courant</span>
<a name="l01925"></a>01925 <span class="comment"></span>
<a name="l01926"></a>01926 <span class="comment">// Precondition:</span>
<a name="l01927"></a>01927 <span class="comment">// Parametre:</span>
<a name="l01928"></a>01928 <span class="comment">// Signification:</span>
<a name="l01929"></a>01929 <span class="comment">// Valeurs par defaut:</span>
<a name="l01930"></a>01930 <span class="comment">// Contraintes:</span>
<a name="l01931"></a>01931 <span class="comment">// Acces:</span>
<a name="l01932"></a>01932 <span class="comment">// </span>
<a name="l01933"></a>01933 <span class="comment">// Signification:</span>
<a name="l01934"></a>01934 <span class="comment">// Contraintes:</span>
<a name="l01935"></a>01935 <span class="comment">// Exception:</span>
<a name="l01936"></a>01936 <span class="comment">// Effets de bord:</span>
<a name="l01937"></a>01937 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01938"></a>01938 <span class="comment">//</span><span class="comment"></span>
<a name="l01939"></a>01939 <span class="comment">//! Verifie que la place necessaire existe sur le disque dur.</span>
<a name="l01940"></a><a class="code" href="classProbleme__base.html#aa52f4cf664ab2e51384b283b3a14b9db">01940</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#aa52f4cf664ab2e51384b283b3a14b9db" title="Verifie que la place necessaire existe sur le disque dur.">Probleme_base::allocation</a>()<span class="keyword"> const</span>
<a name="l01941"></a>01941 <span class="keyword"></span>{
<a name="l01942"></a>01942   <span class="keywordflow">if</span>(<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().file_allocation() &amp;&amp; <a class="code" href="classEcritureLectureSpecial.html#aa37e4a002db5ec6c3082401194c4c909">EcritureLectureSpecial::Active</a>)        <span class="comment">//!&lt; Permet de tester l&#39;allocation d&#39;espace disque</span>
<a name="l01943"></a>01943 <span class="comment"></span>    {
<a name="l01944"></a>01944       <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#aa544b2276f6e813ddecfdebc715e1ee8" title="1 si allocation reussi, 0 sinon">bad_allocate</a>==1)                                        <span class="comment">//!&lt; Si l&#39;allocation n&#39;a pas eut lieu</span>
<a name="l01945"></a>01945 <span class="comment"></span>        <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())                                <span class="comment">//!&lt; Qu&#39;avec le proc maitre</span>
<a name="l01946"></a>01946 <span class="comment"></span>          {
<a name="l01947"></a>01947             <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a0e959b6f59e1e8f5e2d4c37ee292a3f4" title="numero du probleme">num_pb</a>==1)                                                <span class="comment">//!&lt; Si le probleme est le premier</span>
<a name="l01948"></a>01948 <span class="comment"></span>              <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#acf5a2f051a9c56c803f9e5dfa96dc737" title="Verifie que la place necessaire existe sur le disque dur.">allocate_file_size</a>(<a class="code" href="classProbleme__base.html#a8ff436441507da588ce03dfbd19bcf7a" title="Espace disque pris par les sauvegarde XYZ.">file_size</a>))                        <span class="comment">//!&lt; je tente une allocation d&#39;espace disque de taille 2*file_size</span>
<a name="l01949"></a>01949 <span class="comment"></span>                <a class="code" href="classProbleme__base.html#aa544b2276f6e813ddecfdebc715e1ee8" title="1 si allocation reussi, 0 sinon">bad_allocate</a>=0;                                        <span class="comment">//!&lt; Si cela echoue, j&#39;indique au code que l&#39;allocation a deja eut lieu et n&#39;a pas fonctionner</span>
<a name="l01950"></a>01950 <span class="comment"></span>              <span class="keywordflow">else</span>
<a name="l01951"></a>01951                 <a class="code" href="classProbleme__base.html#a0e959b6f59e1e8f5e2d4c37ee292a3f4" title="numero du probleme">num_pb</a>=<a class="code" href="classProbleme__base.html#a34efe5a325770fc77a711893245a8d6c" title="Nombre total de probleme.">nb_pb_total</a>;                                        <span class="comment">//!&lt; Si OK, je modifie num_pb pour que les autres pb ne tentent pas d&#39;allocation</span>
<a name="l01952"></a>01952 <span class="comment"></span>            <span class="keywordflow">else</span>
<a name="l01953"></a>01953               <a class="code" href="classProbleme__base.html#a0e959b6f59e1e8f5e2d4c37ee292a3f4" title="numero du probleme">num_pb</a>-=1;                                                <span class="comment">//!&lt; Si le probleme n&#39;est pas le premier, je decremente le numero de probleme</span>
<a name="l01954"></a>01954 <span class="comment"></span>          }
<a name="l01955"></a>01955       <span class="keyword">const</span> <span class="keywordtype">int</span> canal = 2007;
<a name="l01956"></a>01956       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())                                <span class="comment">//!&lt; le processeur maitre envoi bad_allocate a tout le monde</span>
<a name="l01957"></a>01957 <span class="comment"></span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p=1; p&lt;<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(); p++)
<a name="l01958"></a>01958           <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classProbleme__base.html#aa544b2276f6e813ddecfdebc715e1ee8" title="1 si allocation reussi, 0 sinon">bad_allocate</a>,p,canal);
<a name="l01959"></a>01959       <span class="keywordflow">else</span>
<a name="l01960"></a>01960         <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(<a class="code" href="classProbleme__base.html#aa544b2276f6e813ddecfdebc715e1ee8" title="1 si allocation reussi, 0 sinon">bad_allocate</a>,0,canal);
<a name="l01961"></a>01961 
<a name="l01962"></a>01962       <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#aa544b2276f6e813ddecfdebc715e1ee8" title="1 si allocation reussi, 0 sinon">bad_allocate</a>==0)                                        <span class="comment">//!&lt; Si l&#39;allocation a echoue</span>
<a name="l01963"></a>01963 <span class="comment"></span>        {
<a name="l01964"></a>01964           <a class="code" href="classProbleme__base.html#af8df195a9dc0c9a111690aa861e9883b">sauver_xyz</a>(1);
<a name="l01965"></a>01965           <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a0e959b6f59e1e8f5e2d4c37ee292a3f4" title="numero du probleme">num_pb</a>==<a class="code" href="classProbleme__base.html#a34efe5a325770fc77a711893245a8d6c" title="Nombre total de probleme.">nb_pb_total</a>)                                        <span class="comment">//!&lt; Si le numero de probleme correspond au nombre total de probleme</span>
<a name="l01966"></a>01966 <span class="comment"></span>            {
<a name="l01967"></a>01967               <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l01968"></a>01968                 {
<a name="l01969"></a>01969                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;                                                <span class="comment">//!&lt; j&#39;arrete le code de facon claire</span>
<a name="l01970"></a>01970 <span class="comment"></span>                  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;***Error*** &quot;</span> &lt;&lt; <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a> &lt;&lt; finl;                <span class="comment">//!&lt; et je sort l&#39;erreur du code</span>
<a name="l01971"></a>01971 <span class="comment"></span>                  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;A xyz backup was made because you do not have enough disk space&quot;</span> &lt;&lt; finl;
<a name="l01972"></a>01972                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;to continue the current calculation. Free up disk space and&quot;</span> &lt;&lt; finl;
<a name="l01973"></a>01973                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;restart the calculation thanks to the backup just made.&quot;</span> &lt;&lt; finl;
<a name="l01974"></a>01974                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; finl;
<a name="l01975"></a>01975                 }
<a name="l01976"></a>01976               <a class="code" href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1" title="Synchronise tous les processeurs du groupe courant&lt;br&gt;(attend que tous les processeurs soient arrives...">barrier</a>();
<a name="l01977"></a>01977               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01978"></a>01978             }
<a name="l01979"></a>01979           <a class="code" href="classProbleme__base.html#a0e959b6f59e1e8f5e2d4c37ee292a3f4" title="numero du probleme">num_pb</a>+=1;                                                <span class="comment">//!&lt; j&#39;incremente le numero de probleme</span>
<a name="l01980"></a>01980 <span class="comment"></span>        }
<a name="l01981"></a>01981     }
<a name="l01982"></a>01982 }
<a name="l01983"></a>01983 
<a name="l01984"></a>01984 <span class="comment">// Precondition:</span>
<a name="l01985"></a>01985 <span class="comment">// Parametre:</span>
<a name="l01986"></a>01986 <span class="comment">// Signification: l&#39;espace disque requis</span>
<a name="l01987"></a>01987 <span class="comment">// Valeurs par defaut:</span>
<a name="l01988"></a>01988 <span class="comment">// Contraintes:</span>
<a name="l01989"></a>01989 <span class="comment">// Acces:</span>
<a name="l01990"></a>01990 <span class="comment">// Exception:</span>
<a name="l01991"></a>01991 <span class="comment">// Effets de bord:</span>
<a name="l01992"></a>01992 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l01993"></a>01993 <span class="comment">//</span><span class="comment"></span>
<a name="l01994"></a>01994 <span class="comment">//! Verifie que la place necessaire existe sur le disque dur.</span>
<a name="l01995"></a>01995 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l01996"></a>01996 <span class="comment">Signification: retourne 1 si l&#39;espace disque est suffisant, 0 sinon&lt;br&gt;</span>
<a name="l01997"></a>01997 <span class="comment">Contraintes: */</span>
<a name="l01998"></a><a class="code" href="classProbleme__base.html#acf5a2f051a9c56c803f9e5dfa96dc737">01998</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#acf5a2f051a9c56c803f9e5dfa96dc737" title="Verifie que la place necessaire existe sur le disque dur.">Probleme_base::allocate_file_size</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span>&amp; size)<span class="keyword"> const</span>
<a name="l01999"></a>01999 <span class="keyword"></span>{
<a name="l02000"></a>02000 <span class="preprocessor">#ifndef MICROSOFT</span>
<a name="l02001"></a>02001 <span class="preprocessor"></span><span class="preprocessor">#ifndef RS6000</span>
<a name="l02002"></a>02002 <span class="preprocessor"></span><span class="preprocessor">#ifdef CHECK_ALLOCATE</span>
<a name="l02003"></a>02003 <span class="preprocessor"></span>  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> Fichier_File_size(<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>());
<a name="l02004"></a>02004   Fichier_File_size+=<span class="stringliteral">&quot;_File_size&quot;</span>;
<a name="l02005"></a>02005   <span class="keyword">const</span> <span class="keywordtype">char</span> *file = Fichier_File_size;                        <span class="comment">//!&lt; Fichier d&#39;allocation  if (size&lt;1048576)                                        // Si size est trop petit on le fixe a 1 Mo     size=1048576;</span>
<a name="l02006"></a>02006 <span class="comment"></span><span class="comment">//</span>
<a name="l02007"></a>02007 <span class="comment">//</span>
<a name="l02008"></a>02008   off_t taille = off_t(size+size);                        <span class="comment">//!&lt; Convertion de la taille du fichier 2*size</span>
<a name="l02009"></a>02009 <span class="comment"></span>
<a name="l02010"></a>02010   <span class="keywordtype">int</span> fichier = open(file, O_WRONLY | O_CREAT, 0666);        <span class="comment">//!&lt; Ouverture du fichier File_size</span>
<a name="l02011"></a>02011 <span class="comment"></span>  <span class="keywordflow">if</span> (fichier == -1)                                        <span class="comment">//!&lt; Erreur d&#39;ouverture</span>
<a name="l02012"></a>02012 <span class="comment"></span>    {
<a name="l02013"></a>02013       <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a>=<span class="stringliteral">&quot;Open of &quot;</span>;
<a name="l02014"></a>02014       <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a>+=file;
<a name="l02015"></a>02015       <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a>+=<span class="stringliteral">&quot; : &quot;</span>;
<a name="l02016"></a>02016       <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a>+=strerror(errno);                                <span class="comment">//!&lt; Erreur sur l&#39;ouverture</span>
<a name="l02017"></a>02017 <span class="comment"></span>      close(fichier);                                        <span class="comment">//!&lt; fermeture du fichier</span>
<a name="l02018"></a>02018 <span class="comment"></span>      <span class="keyword">remove</span>(file);                                        <span class="comment">//!&lt; Destruction du fichier File_size</span>
<a name="l02019"></a>02019 <span class="comment"></span>      <span class="keywordflow">return</span> 0;                                                <span class="comment">//!&lt; Echec d&#39;allocation car fichier pas ouvert</span>
<a name="l02020"></a>02020 <span class="comment"></span>    }
<a name="l02021"></a>02021 
<a name="l02022"></a>02022   <span class="keywordflow">if</span> (posix_fallocate(fichier, 0, taille) != 0)                <span class="comment">//!&lt; Erreur d&#39;allocation de l&#39;espace disque</span>
<a name="l02023"></a>02023 <span class="comment"></span>    {
<a name="l02024"></a>02024       <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a>=<span class="stringliteral">&quot;Allocation of &quot;</span>;
<a name="l02025"></a>02025       <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a>+=file;
<a name="l02026"></a>02026       <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a>+=<span class="stringliteral">&quot; : &quot;</span>;
<a name="l02027"></a>02027       <a class="code" href="classProbleme__base.html#a32e94ecb5e267ac20028a8815e2090ab" title="Erreur d&#39;allocation.">error</a>+=strerror(errno);                                <span class="comment">//!&lt; Erreur sur l&#39;allocation</span>
<a name="l02028"></a>02028 <span class="comment"></span>      close(fichier);                                        <span class="comment">//!&lt; fermeture du fichier</span>
<a name="l02029"></a>02029 <span class="comment"></span>      <span class="keyword">remove</span>(file);                                        <span class="comment">//!&lt; Destruction du fichier File_size</span>
<a name="l02030"></a>02030 <span class="comment"></span>      <span class="keywordflow">return</span> 0;                                                <span class="comment">//!&lt; Echec d&#39;allocation car pas assez de place</span>
<a name="l02031"></a>02031 <span class="comment"></span>    }
<a name="l02032"></a>02032   close(fichier);                                        <span class="comment">//!&lt; fermeture du fichier</span>
<a name="l02033"></a>02033 <span class="comment"></span>  <span class="keyword">remove</span>(file);                                                <span class="comment">//!&lt; Destruction du fichier File_size</span>
<a name="l02034"></a>02034 <span class="comment"></span><span class="preprocessor">#endif</span>
<a name="l02035"></a>02035 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02036"></a>02036 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02037"></a>02037 <span class="preprocessor"></span>  <span class="keywordflow">return</span> 1;
<a name="l02038"></a>02038 }
<a name="l02039"></a>02039 
<a name="l02040"></a>02040 <span class="comment">// Precondition:</span>
<a name="l02041"></a>02041 <span class="comment">// Parametre:</span>
<a name="l02042"></a>02042 <span class="comment">// Signification:</span>
<a name="l02043"></a>02043 <span class="comment">// Valeurs par defaut:</span>
<a name="l02044"></a>02044 <span class="comment">// Contraintes:</span>
<a name="l02045"></a>02045 <span class="comment">// Acces:</span>
<a name="l02046"></a>02046 <span class="comment">// Exception:</span>
<a name="l02047"></a>02047 <span class="comment">// Effets de bord:</span>
<a name="l02048"></a>02048 <span class="comment">// Postcondition:</span>
<a name="l02049"></a>02049 <span class="comment">//</span>
<a name="l02050"></a>02050 <span class="comment">//</span><span class="comment"></span>
<a name="l02051"></a>02051 <span class="comment">//! Ecrit le probleme dans un fichier *.calcul_xyz&lt;br&gt;et calcul la place disque prise par ce fichier</span>
<a name="l02052"></a>02052 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l02053"></a>02053 <span class="comment">Signification: retourne toujours 1&lt;br&gt;</span>
<a name="l02054"></a>02054 <span class="comment">Contraintes: */</span>
<a name="l02055"></a><a class="code" href="classProbleme__base.html#af11ff58621cf4b445a32c7e9c007c986">02055</a> <span class="keywordtype">int</span> <a class="code" href="classProbleme__base.html#af11ff58621cf4b445a32c7e9c007c986" title="Ecrit le probleme dans un fichier *.calcul_xyz et calcul la place disque prise par ce fichier...">Probleme_base::file_size_xyz</a>()<span class="keyword"> const</span>
<a name="l02056"></a>02056 <span class="keyword"></span>{
<a name="l02057"></a>02057 <span class="preprocessor">#ifndef RS6000</span>
<a name="l02058"></a>02058 <span class="preprocessor"></span>  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich_xyz(<span class="stringliteral">&quot;.xyz&quot;</span>);
<a name="l02059"></a>02059   <a class="code" href="classProbleme__base.html#af8df195a9dc0c9a111690aa861e9883b">sauver_xyz</a>(0);
<a name="l02060"></a>02060   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l02061"></a>02061     {
<a name="l02062"></a>02062       ifstream fichier(nom_fich_xyz);                        <span class="comment">//!&lt; Calcul de l&#39;espace disque pris par le fichier XYZ du probleme courant</span>
<a name="l02063"></a>02063 <span class="comment"></span>      fichier.seekg(0,std::ios_base::end);
<a name="l02064"></a>02064       <a class="code" href="classProbleme__base.html#a8ff436441507da588ce03dfbd19bcf7a" title="Espace disque pris par les sauvegarde XYZ.">file_size</a>+=fichier.tellg();                                <span class="comment">//!&lt; Incremente l&#39;espace disque deja necessaire</span>
<a name="l02065"></a>02065 <span class="comment"></span>      fichier.close();
<a name="l02066"></a>02066       <span class="keyword">remove</span>(nom_fich_xyz);
<a name="l02067"></a>02067     }
<a name="l02068"></a>02068   <a class="code" href="classProbleme__base.html#a34efe5a325770fc77a711893245a8d6c" title="Nombre total de probleme.">nb_pb_total</a>+=1;                                        <span class="comment">//!&lt; Permet de connaitre le nombre de probleme total a la fin du preparer_calcul</span>
<a name="l02069"></a>02069 <span class="comment"></span><span class="preprocessor">#endif</span>
<a name="l02070"></a>02070 <span class="preprocessor"></span>  <span class="keywordflow">return</span> 1;
<a name="l02071"></a>02071 }
<a name="l02072"></a>02072 
<a name="l02073"></a><a class="code" href="classProbleme__base.html#a718fe6b4de5cb71c61ed0f9f8064215d">02073</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#a718fe6b4de5cb71c61ed0f9f8064215d">Probleme_base::addInputField</a>(<a class="code" href="classField__base.html">Field_base</a>&amp; f)
<a name="l02074"></a>02074 {
<a name="l02075"></a>02075   <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; name= f.<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>();
<a name="l02076"></a>02076   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#a0b6b00852e9d03a3aa87f7bb0d0704e9" title="List of input fields inside this problem.">input_fields</a>.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>(); i++)
<a name="l02077"></a>02077     {
<a name="l02078"></a>02078       <span class="keywordflow">if</span> (<a class="code" href="classProbleme__base.html#a0b6b00852e9d03a3aa87f7bb0d0704e9" title="List of input fields inside this problem.">input_fields</a>[i]-&gt;<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>()==name)
<a name="l02079"></a>02079         <span class="keywordflow">throw</span> WrongContext(name.<a class="code" href="classNom.html#aa9f24bd3370b5f1c66666e65252eea05">getChar</a>(),<span class="stringliteral">&quot;addInputField&quot;</span>, <span class="stringliteral">&quot;Field with this name is already in list&quot;</span>);
<a name="l02080"></a>02080     }
<a name="l02081"></a>02081   <a class="code" href="classProbleme__base.html#a0b6b00852e9d03a3aa87f7bb0d0704e9" title="List of input fields inside this problem.">input_fields</a>.<a class="code" href="classList__Ref__Field__base.html#a69ed0d5cc4e13b5555e8a9f23c5a83ce">add</a>(f);
<a name="l02082"></a>02082 }
<a name="l02083"></a>02083 
<a name="l02084"></a><a class="code" href="classProbleme__base.html#a821267b48fb1c397b24df1b634fcc4a8">02084</a> <span class="keywordtype">double</span> <a class="code" href="classProbleme__base.html#a821267b48fb1c397b24df1b634fcc4a8" title="Returns the future time (end of current computing interval) This value is valid between initTimeStep ...">Probleme_base::futureTime</a>()<span class="keyword"> const</span>
<a name="l02085"></a>02085 <span class="keyword"></span>{
<a name="l02086"></a>02086   <span class="keywordflow">if</span> (!<a class="code" href="classProbleme__base.html#a26767f8516ec192c93ff9445beb5ea06" title="true if computation interval is defined set to true by initTimeStep, to false by validateTimeStep &amp; a...">dt_defined</a>)
<a name="l02087"></a>02087     <span class="keywordflow">throw</span> WrongContext(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>().getChar(),<span class="stringliteral">&quot;futureTime&quot;</span>,<span class="stringliteral">&quot;initTimeStep should have been called&quot;</span>);
<a name="l02088"></a>02088   <span class="keywordtype">int</span> i=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a9d24dd8112258e09c09a9b58c4b7e335">nb_valeurs_futures</a>();
<a name="l02089"></a>02089   <span class="keywordflow">return</span> <a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a46d916b7db340c822e87edf21ab77c00">temps_futur</a>(i);
<a name="l02090"></a>02090 }
<a name="l02091"></a>02091 
<a name="l02092"></a><a class="code" href="classProbleme__base.html#af8df195a9dc0c9a111690aa861e9883b">02092</a> <span class="keywordtype">void</span> <a class="code" href="classProbleme__base.html#af8df195a9dc0c9a111690aa861e9883b">Probleme_base::sauver_xyz</a>(<span class="keywordtype">int</span> <a class="code" href="Solv__Petsc_8cpp.html#ab3f078684998b83967d507d0f453f454">verbose</a>)<span class="keyword"> const</span>
<a name="l02093"></a>02093 <span class="keyword"></span>{
<a name="l02094"></a>02094   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#a5e968b838c61de525c8015d35dddeb70">sauvegarde_counter_</a>);
<a name="l02095"></a>02095   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich_xyz(<span class="stringliteral">&quot;&quot;</span>);
<a name="l02096"></a>02096   <span class="keywordflow">if</span> (verbose)
<a name="l02097"></a>02097     {
<a name="l02098"></a>02098       nom_fich_xyz+=<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>();
<a name="l02099"></a>02099       nom_fich_xyz+=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l02100"></a>02100       nom_fich_xyz+=<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>();
<a name="l02101"></a>02101       nom_fich_xyz+=<span class="stringliteral">&quot;.xyz&quot;</span>;
<a name="l02102"></a>02102       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l02103"></a>02103         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt;<span class="stringliteral">&quot;Creation of &quot;</span>&lt;&lt;nom_fich_xyz&lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classEcritureLectureSpecial.html#a31185ccf177a5057cf0bf0dcba608833" title="Renvoie le mode d&#39;ecriture utilise&lt;br&gt;(pour pouvoir le modifier). Cette methode est statique...">EcritureLectureSpecial::get_Output</a>() &lt;&lt; <span class="stringliteral">&quot;) for resumption of a calculation with a different number of processors.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l02104"></a>02104     }
<a name="l02105"></a>02105   <span class="keywordflow">else</span>
<a name="l02106"></a>02106     {
<a name="l02107"></a>02107       nom_fich_xyz=<span class="stringliteral">&quot;.xyz&quot;</span>;
<a name="l02108"></a>02108     }
<a name="l02109"></a>02109 <span class="comment">// Creation du fichier XYZ du probleme courant</span>
<a name="l02110"></a>02110   <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<a class="code" href="classEcritureLectureSpecial.html#a31185ccf177a5057cf0bf0dcba608833" title="Renvoie le mode d&#39;ecriture utilise&lt;br&gt;(pour pouvoir le modifier). Cette methode est statique...">EcritureLectureSpecial::get_Output</a>());
<a name="l02111"></a>02111   <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>-&gt;ouvrir(nom_fich_xyz);
<a name="l02112"></a>02112 <span class="comment">// Nouveau pour le xyz depuis la 155: on note en en-tete le format de sauvegarde</span>
<a name="l02113"></a>02113   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l02114"></a>02114     <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>() &lt;&lt; <span class="stringliteral">&quot;format_sauvegarde:&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> &lt;&lt; <a class="code" href="Probleme__base_8cpp.html#a2dd9feec1537f5f3d3ac1ab13c394940">version_format_sauvegarde</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l02115"></a>02115 
<a name="l02116"></a>02116   <a class="code" href="classEcritureLectureSpecial.html#aec19c49549eb6126d60911f028892fef">EcritureLectureSpecial::mode_ecr</a>=1;
<a name="l02117"></a>02117   <span class="keywordtype">int</span> bytes = <a class="code" href="classProbleme__base.html#a558a2c9ba2cd9620499db4fd9585ec2e" title="Ecriture du probleme sur fichier en vue d&#39;une reprise. Ecrit le nom du probleme et sauvegarde les equ...">sauvegarder</a>(<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>());
<a name="l02118"></a>02118   <a class="code" href="classEcritureLectureSpecial.html#aec19c49549eb6126d60911f028892fef">EcritureLectureSpecial::mode_ecr</a>=-1;
<a name="l02119"></a>02119 
<a name="l02120"></a>02120   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l02121"></a>02121     <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>() &lt;&lt; <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;fin&quot;</span>);
<a name="l02122"></a>02122   (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>()).flush();
<a name="l02123"></a>02123   (<a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__Sortie__Fichier__base.html#a1d21fbb5d14cd0e2bc5f384f86adf933">valeur</a>()).syncfile();
<a name="l02124"></a>02124   <a class="code" href="classProbleme__base.html#a742cc3912fe51b91eb23e4c704ea98db">ficsauv_</a>.<a class="code" href="classDeriv__.html#a1792f7b005c558e7412661aeee781bd2">detach</a>();
<a name="l02125"></a>02125   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#a5e968b838c61de525c8015d35dddeb70">sauvegarde_counter_</a>, bytes);
<a name="l02126"></a>02126 }
<a name="l02127"></a>02127 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:16 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
