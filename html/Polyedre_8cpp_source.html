<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/Polyedre.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/Polyedre.cpp</div>  </div>
</div>
<div class="contents">
<a href="Polyedre_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Polyedre.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Geometrie</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/15</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Polyedre_8h.html">Polyedre.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Linear__algebra__tools__impl_8h.html">Linear_algebra_tools_impl.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="IntList_8h.html">IntList.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">using</span> <a class="code" href="AssembleurPP1BUtil_8cpp.html#a3117b050530c46b4a15b6ab9ce6d0b41">std::swap</a>;
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="Polyedre_8cpp.html#a3afd4f9a127f4428d22ea22fc215e476">00031</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classPolyedre.html" title="Classe Polyedre Cette represente l&#39;element geometrique Polyedre. Un polyedre est un element defini pa...">Polyedre</a>,<span class="stringliteral">&quot;Polyedre&quot;</span>,<a class="code" href="classPoly__geom__base.html" title=": class Poly_geom_base &lt;Description of class Poly_geom_base&gt;">Poly_geom_base</a>);
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="classPolyedre.html#a03cdf6d5bd3c00c62d9e174eafe92699">00033</a> <a class="code" href="classPolyedre.html#a03cdf6d5bd3c00c62d9e174eafe92699">Polyedre::Polyedre</a>(): FacesIndex_(1),PolyhedronIndex_(1)
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035   <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>[0]=0;
<a name="l00036"></a>00036   <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>[0]=0;
<a name="l00037"></a>00037   <a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>=-1;
<a name="l00038"></a>00038   <a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>=0;
<a name="l00039"></a>00039   <a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>=0;
<a name="l00040"></a>00040 }
<a name="l00041"></a>00041 
<a name="l00042"></a>00042 <span class="comment">// Precondition:</span>
<a name="l00043"></a>00043 <span class="comment">// Parametre: Sortie&amp; s</span>
<a name="l00044"></a>00044 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00045"></a>00045 <span class="comment">// Valeurs par defaut:</span>
<a name="l00046"></a>00046 <span class="comment">// Contraintes:</span>
<a name="l00047"></a>00047 <span class="comment">// Acces:</span>
<a name="l00048"></a>00048 <span class="comment">// Exception:</span>
<a name="l00049"></a>00049 <span class="comment">// Effets de bord:</span>
<a name="l00050"></a>00050 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00051"></a>00051 <span class="comment">//</span><span class="comment"></span>
<a name="l00052"></a>00052 <span class="comment">//! NE FAIT RIEN</span>
<a name="l00053"></a>00053 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00054"></a>00054 <span class="comment">Signification: le flot de sortie&lt;br&gt;</span>
<a name="l00055"></a>00055 <span class="comment">Contraintes: */</span>
<a name="l00056"></a><a class="code" href="classPolyedre.html#a44ce97c484a7e4b14bac38b718e0c887">00056</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classPolyedre.html#a44ce97c484a7e4b14bac38b718e0c887" title="NE FAIT RIEN.">Polyedre::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s )<span class="keyword"> const</span>
<a name="l00057"></a>00057 <span class="keyword"></span>{
<a name="l00058"></a>00058   s&lt;&lt; <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>        &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00059"></a>00059   s&lt;&lt; <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>     &lt;&lt;finl;
<a name="l00060"></a>00060   s&lt;&lt; <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a> &lt;&lt;finl;
<a name="l00061"></a>00061   s&lt;&lt; <a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a> &lt;&lt;finl;
<a name="l00062"></a>00062   s&lt;&lt; <a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a> &lt;&lt;finl;
<a name="l00063"></a>00063   s&lt;&lt; <a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a> &lt;&lt;finl;;
<a name="l00064"></a>00064   <a class="code" href="Polyedre_8h.html#a271d8f7f52be750e5c744a394ec71344">WARN</a>;
<a name="l00065"></a>00065   <span class="keywordflow">return</span> s;
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="comment">// Precondition:</span>
<a name="l00070"></a>00070 <span class="comment">// Parametre: Entree&amp; s</span>
<a name="l00071"></a>00071 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00072"></a>00072 <span class="comment">// Valeurs par defaut:</span>
<a name="l00073"></a>00073 <span class="comment">// Contraintes:</span>
<a name="l00074"></a>00074 <span class="comment">// Acces:</span>
<a name="l00075"></a>00075 <span class="comment">// Exception:</span>
<a name="l00076"></a>00076 <span class="comment">// Effets de bord:</span>
<a name="l00077"></a>00077 <span class="comment">// Postcondition:</span>
<a name="l00078"></a>00078 <span class="comment">//</span><span class="comment"></span>
<a name="l00079"></a>00079 <span class="comment">//! NE FAIT RIEN</span>
<a name="l00080"></a>00080 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00081"></a>00081 <span class="comment">Signification: le flot d&#39;entree&lt;br&gt;</span>
<a name="l00082"></a>00082 <span class="comment">Contraintes: */</span>
<a name="l00083"></a><a class="code" href="classPolyedre.html#a1a45fb0cf74209741174f21c7352b5b3">00083</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classPolyedre.html#a1a45fb0cf74209741174f21c7352b5b3" title="NE FAIT RIEN.">Polyedre::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; s )
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085   s&gt;&gt; <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>;
<a name="l00086"></a>00086   s&gt;&gt;<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>;
<a name="l00087"></a>00087   s&gt;&gt;<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>;
<a name="l00088"></a>00088   s&gt;&gt;<a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>;
<a name="l00089"></a>00089   s&gt;&gt;<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>;
<a name="l00090"></a>00090   s&gt;&gt;<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>;;
<a name="l00091"></a>00091   <span class="keywordflow">return</span> s;
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="classPolyedre.html#a1b8d1467ea0a75bcca7db2be204326e3">00094</a> <span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#a1b8d1467ea0a75bcca7db2be204326e3" title="Calcule les centres de gravites de tous les elements de la zone associee a l&#39;element goemetrique...">Polyedre::calculer_centres_gravite</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xp)<span class="keyword"> const</span>
<a name="l00095"></a>00095 <span class="keyword"></span>{
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=<a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>.<a class="code" href="classRef__Zone.html#ab4ba0de67809ff502efeb24c1e43bfe1">valeur</a>();
<a name="l00098"></a>00098   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem=zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00099"></a>00099   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord=zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 
<a name="l00102"></a>00102   <span class="keywordtype">int</span> nb_elem;
<a name="l00103"></a>00103   <span class="keywordflow">if</span>(xp.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0)==0)
<a name="l00104"></a>00104     {
<a name="l00105"></a>00105       nb_elem = <a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>-&gt;nb_elem_tot();
<a name="l00106"></a>00106       xp.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00107"></a>00107     }
<a name="l00108"></a>00108   <span class="keywordflow">else</span>
<a name="l00109"></a>00109     nb_elem=xp.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 
<a name="l00112"></a>00112   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_poly=0; num_poly&lt;nb_elem; num_poly++)
<a name="l00113"></a>00113     {
<a name="l00114"></a>00114       <span class="keywordtype">double</span> volume=0;
<a name="l00115"></a>00115       <a class="code" href="classVecteur3.html">Vecteur3</a> xg(0,0,0);
<a name="l00116"></a>00116       <span class="keywordtype">int</span> nb_som_max=elem.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00117"></a>00117       <span class="keywordtype">int</span> nb_som_reel;
<a name="l00118"></a>00118       <span class="keywordflow">for</span> (nb_som_reel=0; nb_som_reel&lt;nb_som_max; nb_som_reel++)
<a name="l00119"></a>00119         {
<a name="l00120"></a>00120           <span class="keywordtype">int</span> n=elem(num_poly,nb_som_reel);
<a name="l00121"></a>00121           <span class="keywordflow">if</span> (n&lt;0)
<a name="l00122"></a>00122             <span class="keywordflow">break</span>;
<a name="l00123"></a>00123           <a class="code" href="classVecteur3.html">Vecteur3</a> S(coord(n,0),coord(n,1),coord(n,2));
<a name="l00124"></a>00124           xg+=S;
<a name="l00125"></a>00125         }
<a name="l00126"></a>00126       xg*=1./nb_som_reel;
<a name="l00127"></a>00127       <a class="code" href="classVecteur3.html">Vecteur3</a> moinsS0(xg);
<a name="l00128"></a>00128       moinsS0*=-1;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130       <a class="code" href="classVecteur3.html">Vecteur3</a> vraixg(0,0,0);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(num_poly); f&lt;<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(num_poly+1); f++)
<a name="l00133"></a>00133         {
<a name="l00134"></a>00134           <span class="keywordtype">int</span> somm_loc3=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f+1)-1);
<a name="l00135"></a>00135           <span class="keywordtype">int</span> n3=elem(num_poly,somm_loc3);
<a name="l00136"></a>00136           <a class="code" href="classVecteur3.html">Vecteur3</a> S3(coord(n3,0),coord(n3,1),coord(n3,2));
<a name="l00137"></a>00137           <a class="code" href="classVecteur3.html">Vecteur3</a> S3sa(S3);
<a name="l00138"></a>00138           S3+=  moinsS0;
<a name="l00139"></a>00139           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f); s&lt;<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f+1)-2; s++)
<a name="l00140"></a>00140             {
<a name="l00141"></a>00141               <span class="keywordtype">int</span> somm_loc1=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s);
<a name="l00142"></a>00142               <span class="keywordtype">int</span> n1=elem(num_poly,somm_loc1);
<a name="l00143"></a>00143               <span class="keywordtype">int</span> somm_loc2=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s+1);
<a name="l00144"></a>00144               <span class="keywordtype">int</span> n2=elem(num_poly,somm_loc2);
<a name="l00145"></a>00145               <a class="code" href="classVecteur3.html">Vecteur3</a> S1(coord(n1,0),coord(n1,1),coord(n1,2));
<a name="l00146"></a>00146               <a class="code" href="classVecteur3.html">Vecteur3</a> S2(coord(n2,0),coord(n2,1),coord(n2,2));
<a name="l00147"></a>00147 
<a name="l00148"></a>00148               <a class="code" href="classVecteur3.html">Vecteur3</a> xgl(xg);
<a name="l00149"></a>00149               xgl+=S3sa;
<a name="l00150"></a>00150               xgl+=S1;
<a name="l00151"></a>00151               xgl+=S2;
<a name="l00152"></a>00152               xgl*=0.25;
<a name="l00153"></a>00153               S1+=  moinsS0;
<a name="l00154"></a>00154               S2+=  moinsS0;
<a name="l00155"></a>00155               <span class="keywordtype">double</span> vol_l= <a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(
<a name="l00156"></a>00156                               S1[0] * ( S2[1] * S3[2] - S3[1] * S2[2] )
<a name="l00157"></a>00157                               + S2[0] * ( S3[1] * S1[2] - S1[1] * S3[2] )
<a name="l00158"></a>00158                               + S3[0] * ( S1[1] * S2[2] - S2[1] * S1[2] ) );
<a name="l00159"></a>00159               volume+=vol_l;
<a name="l00160"></a>00160               xgl*=vol_l;
<a name="l00161"></a>00161               vraixg+=xgl;
<a name="l00162"></a>00162             }
<a name="l00163"></a>00163         }
<a name="l00164"></a>00164       vraixg*=1./volume;
<a name="l00165"></a>00165       xp(num_poly,0)=vraixg[0];
<a name="l00166"></a>00166       xp(num_poly,1)=vraixg[1];
<a name="l00167"></a>00167       xp(num_poly,2)=vraixg[2];
<a name="l00168"></a>00168 
<a name="l00169"></a>00169 <span class="comment">// Vecteur3 test= xg -vraixg;</span>
<a name="l00170"></a>00170 <span class="comment">// Cerr&lt;&lt;num_poly&lt;&lt; &quot;iiii &quot;&lt;&lt;test[0]&lt;&lt; &quot; &quot;&lt;&lt;test[1]&lt;&lt;&quot; &quot;&lt;&lt;test[2]&lt;&lt;finl;</span>
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 <span class="comment">// Cerr&lt;&lt;&quot; xp &quot;&lt;&lt;xp &lt;&lt; finl;</span>
<a name="l00174"></a>00174   return ;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <span class="comment">// on a change la methode dans Polygone mais pas dans Polyedre ?</span>
<a name="l00178"></a>00178   <a class="code" href="Polyedre_8h.html#a271d8f7f52be750e5c744a394ec71344">WARN</a>;
<a name="l00179"></a>00179   <span class="keywordflow">return</span> <a class="code" href="classPolyedre.html#a1b8d1467ea0a75bcca7db2be204326e3" title="Calcule les centres de gravites de tous les elements de la zone associee a l&#39;element goemetrique...">Elem_geom_base::calculer_centres_gravite</a>(xp);
<a name="l00180"></a>00180 }
<a name="l00181"></a>00181 
<a name="l00182"></a><a class="code" href="classPolyedre.html#a7e8088b319ec802027a6861142f480f6">00182</a> <span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#a7e8088b319ec802027a6861142f480f6">Polyedre::calculer_un_centre_gravite</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> num_elem,<a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; xp)<span class="keyword"> const</span>
<a name="l00183"></a>00183 <span class="keyword"></span>{
<a name="l00184"></a>00184   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_Polys = <a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>-&gt;les_elems();
<a name="l00185"></a>00185   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; le_domaine = <a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>-&gt;domaine();
<a name="l00186"></a>00186 
<a name="l00187"></a>00187   xp.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00188"></a>00188   <span class="keywordtype">int</span> nb_som_reel=<a class="code" href="classPolyedre.html#afbd9135ad09189a0440a0a3f104f6c23" title="Renvoie le nombre de sommets d&#39;un Polyedre.">nb_som</a>();
<a name="l00189"></a>00189   <span class="keywordflow">while</span> (les_Polys(num_elem,nb_som_reel-1)==-1)  nb_som_reel--;
<a name="l00190"></a>00190   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> s=0; s&lt;nb_som_reel; s++)
<a name="l00191"></a>00191     {
<a name="l00192"></a>00192       <span class="keywordtype">int</span> num_som = les_Polys(num_elem,s);
<a name="l00193"></a>00193       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00194"></a>00194         xp(i) += le_domaine.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(num_som,i)/nb_som_reel;
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 
<a name="l00198"></a>00198 
<a name="l00199"></a>00199   <a class="code" href="Polyedre_8h.html#a271d8f7f52be750e5c744a394ec71344">WARN</a>;
<a name="l00200"></a>00200 }
<a name="l00201"></a><a class="code" href="classPolyedre.html#a4916c06272e1aced223ef353311b1790">00201</a> <span class="keywordtype">int</span> <a class="code" href="classPolyedre.html#a4916c06272e1aced223ef353311b1790">Polyedre::get_nb_som_elem_max</a>()<span class="keyword"> const</span>
<a name="l00202"></a>00202 <span class="keyword"></span>{
<a name="l00203"></a>00203   <span class="keywordflow">if</span> (<a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>&gt;-1)
<a name="l00204"></a>00204     <span class="keywordflow">return</span> <a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a> ;
<a name="l00205"></a>00205   <span class="keywordflow">else</span>
<a name="l00206"></a>00206     <span class="keywordflow">return</span> <a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>.<a class="code" href="classRef__Zone.html#ab4ba0de67809ff502efeb24c1e43bfe1">valeur</a>().<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>().<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 <span class="comment">// Precondition:</span>
<a name="l00210"></a>00210 <span class="comment">// Parametre:</span>
<a name="l00211"></a>00211 <span class="comment">// Signification:</span>
<a name="l00212"></a>00212 <span class="comment">// Valeurs par defaut:</span>
<a name="l00213"></a>00213 <span class="comment">// Contraintes:</span>
<a name="l00214"></a>00214 <span class="comment">// Acces:</span>
<a name="l00215"></a>00215 <span class="comment">// Exception:</span>
<a name="l00216"></a>00216 <span class="comment">// Effets de bord:</span>
<a name="l00217"></a>00217 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00218"></a>00218 <span class="comment">//</span><span class="comment"></span>
<a name="l00219"></a>00219 <span class="comment">//! Renvoie le nom LML d&#39;un polyedre = &quot;POLYEDRE_&quot;+nb_som_max.</span>
<a name="l00220"></a>00220 <span class="comment"></span><span class="comment">/** \return Nom\&amp;&lt;br&gt;</span>
<a name="l00221"></a>00221 <span class="comment">Signification: toujours egal a &quot;PRISM6&quot;&lt;br&gt;</span>
<a name="l00222"></a>00222 <span class="comment">Contraintes: reference constante */</span>
<a name="l00223"></a><a class="code" href="classPolyedre.html#ae71263b3c728e3c79d6644cc1d37309a">00223</a> <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; <a class="code" href="classPolyedre.html#ae71263b3c728e3c79d6644cc1d37309a" title="Renvoie le nom LML d&#39;un polyedre = &quot;POLYEDRE_&quot;+nb_som_max.">Polyedre::nom_lml</a>()<span class="keyword"> const</span>
<a name="l00224"></a>00224 <span class="keyword"></span>{
<a name="l00225"></a>00225   <span class="keyword">static</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom;
<a name="l00226"></a>00226   nom=<span class="stringliteral">&quot;POLYEDRE_&quot;</span>;
<a name="l00227"></a>00227   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> n(<a class="code" href="classPolyedre.html#a4916c06272e1aced223ef353311b1790">get_nb_som_elem_max</a>());
<a name="l00228"></a>00228   nom+=n;
<a name="l00229"></a>00229   <span class="keywordflow">return</span> nom;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="comment">// Precondition:</span>
<a name="l00234"></a>00234 <span class="comment">// Parametre: DoubleVect&amp; pos</span>
<a name="l00235"></a>00235 <span class="comment">// Signification: coordonnees du point que l&#39;on</span>
<a name="l00236"></a>00236 <span class="comment">// cherche a localiser</span>
<a name="l00237"></a>00237 <span class="comment">// Valeurs par defaut:</span>
<a name="l00238"></a>00238 <span class="comment">// Contraintes: reference constante</span>
<a name="l00239"></a>00239 <span class="comment">// Acces: entree</span>
<a name="l00240"></a>00240 <span class="comment">// Parametre: int element</span>
<a name="l00241"></a>00241 <span class="comment">// Signification: le numero de l&#39;element de la zone</span>
<a name="l00242"></a>00242 <span class="comment">// dans lequel on cherche le point.</span>
<a name="l00243"></a>00243 <span class="comment">// Valeurs par defaut:</span>
<a name="l00244"></a>00244 <span class="comment">// Contraintes:</span>
<a name="l00245"></a>00245 <span class="comment">// Acces:</span>
<a name="l00246"></a>00246 <span class="comment">// Exception:</span>
<a name="l00247"></a>00247 <span class="comment">// Effets de bord:</span>
<a name="l00248"></a>00248 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00249"></a>00249 <span class="comment">//</span>
<a name="l00250"></a>00250 <span class="comment">//</span>
<a name="l00251"></a>00251 <span class="comment">//</span>
<a name="l00252"></a>00252 <span class="comment">//</span>
<a name="l00253"></a>00253 <span class="comment">//</span><span class="comment"></span>
<a name="l00254"></a>00254 <span class="comment">//! NE FAIT RIEN: A CODER, renvoie toujours 0.&lt;br&gt;Renvoie 1 si l&#39;element &quot;element&quot; de la zone associee a&lt;br&gt;l&#39;element geometrique contient le point&lt;br&gt;de coordonnees specifiees par le parametre &quot;pos&quot;.&lt;br&gt;Renvoie 0 sinon.</span>
<a name="l00255"></a>00255 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00256"></a>00256 <span class="comment">Signification: 1 si le point de coordonnees specifiees&lt;br&gt;</span>
<a name="l00257"></a>00257 <span class="comment">appartient a l&#39;element &quot;element&quot;&lt;br&gt;</span>
<a name="l00258"></a>00258 <span class="comment">0 sinon&lt;br&gt;</span>
<a name="l00259"></a>00259 <span class="comment">Contraintes: */</span>
<a name="l00260"></a><a class="code" href="classPolyedre.html#a15a849b7fbddb141602dd3cee140c7cb">00260</a> <span class="keywordtype">int</span> <a class="code" href="classPolyedre.html#a15a849b7fbddb141602dd3cee140c7cb" title="NE FAIT RIEN: A CODER, renvoie toujours 0. Renvoie 1 si l&#39;element &quot;element&quot; de la zone associee a l...">Polyedre::contient</a>(<span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; pos, <span class="keywordtype">int</span> num_poly )<span class="keyword"> const</span>
<a name="l00261"></a>00261 <span class="keyword"></span>{
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 <span class="comment">// on regarde si le point P est du meme cote que xg pour chaque face .</span>
<a name="l00264"></a>00264   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=<a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>.<a class="code" href="classRef__Zone.html#ab4ba0de67809ff502efeb24c1e43bfe1">valeur</a>();
<a name="l00265"></a>00265   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem=zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00266"></a>00266   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord=zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00267"></a>00267   <a class="code" href="classVecteur3.html">Vecteur3</a> P(pos(0),pos(1),pos(2));
<a name="l00268"></a>00268   <a class="code" href="classVecteur3.html">Vecteur3</a> xg(0,0,0);
<a name="l00269"></a>00269   <span class="keywordtype">int</span> nb_som_max=elem.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00270"></a>00270   <span class="keywordtype">int</span> nb_som_reel;
<a name="l00271"></a>00271   <span class="keywordflow">for</span> (nb_som_reel=0; nb_som_reel&lt;nb_som_max; nb_som_reel++)
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273       <span class="keywordtype">int</span> n=elem(num_poly,nb_som_reel);
<a name="l00274"></a>00274       <span class="keywordflow">if</span> (n&lt;0)
<a name="l00275"></a>00275         <span class="keywordflow">break</span>;
<a name="l00276"></a>00276       <a class="code" href="classVecteur3.html">Vecteur3</a> S(coord(n,0),coord(n,1),coord(n,2));
<a name="l00277"></a>00277       xg+=S;
<a name="l00278"></a>00278     }
<a name="l00279"></a>00279   xg*=1./nb_som_reel;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(num_poly); f&lt;<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(num_poly+1); f++)
<a name="l00282"></a>00282     {
<a name="l00283"></a>00283       <a class="code" href="classVecteur3.html">Vecteur3</a> n(0,0,0);
<a name="l00284"></a>00284       <span class="keywordtype">int</span> somm_loc3=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f+1)-1);
<a name="l00285"></a>00285       <span class="keywordtype">int</span> n3=elem(num_poly,somm_loc3);
<a name="l00286"></a>00286       <a class="code" href="classVecteur3.html">Vecteur3</a> moinsS3(-coord(n3,0),-coord(n3,1),-coord(n3,2));
<a name="l00287"></a>00287 
<a name="l00288"></a>00288       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f); s&lt;<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f+1)-2; s++)
<a name="l00289"></a>00289         {
<a name="l00290"></a>00290           <span class="keywordtype">int</span> somm_loc1=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s);
<a name="l00291"></a>00291           <span class="keywordtype">int</span> n1=elem(num_poly,somm_loc1);
<a name="l00292"></a>00292           <span class="keywordtype">int</span> somm_loc2=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s+1);
<a name="l00293"></a>00293           <span class="keywordtype">int</span> n2=elem(num_poly,somm_loc2);
<a name="l00294"></a>00294           <a class="code" href="classVecteur3.html">Vecteur3</a> S1(coord(n1,0),coord(n1,1),coord(n1,2));
<a name="l00295"></a>00295           <a class="code" href="classVecteur3.html">Vecteur3</a> S2(coord(n2,0),coord(n2,1),coord(n2,2));
<a name="l00296"></a>00296           S1+=moinsS3;
<a name="l00297"></a>00297           S2+=moinsS3;
<a name="l00298"></a>00298           <a class="code" href="classVecteur3.html">Vecteur3</a> nTr;
<a name="l00299"></a>00299           <a class="code" href="classVecteur3.html#a5fff26b06fb58ea97cfd2e2e8f9c3d0f">Vecteur3::produit_vectoriel</a>(S1,S2,nTr);
<a name="l00300"></a>00300           n+=nTr;
<a name="l00301"></a>00301 
<a name="l00302"></a>00302         }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304 
<a name="l00305"></a>00305 
<a name="l00306"></a>00306 
<a name="l00307"></a>00307       <a class="code" href="classVecteur3.html">Vecteur3</a> S3G(xg);
<a name="l00308"></a>00308       S3G+=moinsS3;
<a name="l00309"></a>00309       <a class="code" href="classVecteur3.html">Vecteur3</a> S3P(P);
<a name="l00310"></a>00310       S3P+=moinsS3;
<a name="l00311"></a>00311       <span class="keywordtype">double</span> prod_scal1=<a class="code" href="classVecteur3.html#a13d4a2f0fe07e384704d1917942892d0">Vecteur3::produit_scalaire</a>(n,S3G);
<a name="l00312"></a>00312       <span class="keywordtype">double</span> prod_scal2=<a class="code" href="classVecteur3.html#a13d4a2f0fe07e384704d1917942892d0">Vecteur3::produit_scalaire</a>(n,S3P);
<a name="l00313"></a>00313       <span class="keywordflow">if</span> (prod_scal1*prod_scal2&lt;-<a class="code" href="classObjet__U.html#a7447e25c68cc8d3a1c06cf99f0565cff">Objet_U::precision_geom</a>*prod_scal1*prod_scal1)
<a name="l00314"></a>00314         <span class="keywordflow">return</span> 0;
<a name="l00315"></a>00315     }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317   <span class="keywordflow">return</span> 1;
<a name="l00318"></a>00318 }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 <span class="comment">// Precondition:</span>
<a name="l00322"></a>00322 <span class="comment">// Parametre: IntVect&amp; pos</span>
<a name="l00323"></a>00323 <span class="comment">// Signification: les numeros des sommets a comparer</span>
<a name="l00324"></a>00324 <span class="comment">// avec ceux de l&#39;elements &quot;element&quot;</span>
<a name="l00325"></a>00325 <span class="comment">// Valeurs par defaut:</span>
<a name="l00326"></a>00326 <span class="comment">// Contraintes: reference constante</span>
<a name="l00327"></a>00327 <span class="comment">// Acces: entree</span>
<a name="l00328"></a>00328 <span class="comment">// Parametre: int element</span>
<a name="l00329"></a>00329 <span class="comment">// Signification: le numero de l&#39;element de la zone</span>
<a name="l00330"></a>00330 <span class="comment">// dont on veut comparer les sommets</span>
<a name="l00331"></a>00331 <span class="comment">// Valeurs par defaut:</span>
<a name="l00332"></a>00332 <span class="comment">// Contraintes:</span>
<a name="l00333"></a>00333 <span class="comment">// Acces:</span>
<a name="l00334"></a>00334 <span class="comment">// Exception:</span>
<a name="l00335"></a>00335 <span class="comment">// Effets de bord:</span>
<a name="l00336"></a>00336 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00337"></a>00337 <span class="comment">//</span>
<a name="l00338"></a>00338 <span class="comment">//</span>
<a name="l00339"></a>00339 <span class="comment">//</span>
<a name="l00340"></a>00340 <span class="comment">//</span><span class="comment"></span>
<a name="l00341"></a>00341 <span class="comment">//! NE FAIT RIEN: A CODER, renvoie toujours 0&lt;br&gt;Renvoie 1 si les sommets specifies par le parametre &quot;pos&quot;&lt;br&gt;sont les sommets de l&#39;element &quot;element&quot; de la zone associee a&lt;br&gt;l&#39;element geometrique.</span>
<a name="l00342"></a>00342 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00343"></a>00343 <span class="comment">Signification: 1 si les sommets passes en parametre&lt;br&gt;</span>
<a name="l00344"></a>00344 <span class="comment">sont ceux de l&#39;element specifie, 0 sinon&lt;br&gt;</span>
<a name="l00345"></a>00345 <span class="comment">Contraintes: */</span>
<a name="l00346"></a><a class="code" href="classPolyedre.html#aae182ae177dba46c8a6ae0ae3503bec6">00346</a> <span class="keywordtype">int</span> <a class="code" href="classPolyedre.html#a15a849b7fbddb141602dd3cee140c7cb" title="NE FAIT RIEN: A CODER, renvoie toujours 0. Renvoie 1 si l&#39;element &quot;element&quot; de la zone associee a l...">Polyedre::contient</a>(<span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; pos, <span class="keywordtype">int</span> num_poly )<span class="keyword"> const</span>
<a name="l00347"></a>00347 <span class="keyword"></span>{
<a name="l00348"></a>00348   <a class="code" href="Equation__base_8cpp.html#a7603f0308bf3641b5db73c0163d58473">BLOQUE</a>;
<a name="l00349"></a>00349   <span class="keywordflow">return</span> 0;
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 <span class="comment">// Precondition:</span>
<a name="l00354"></a>00354 <span class="comment">// Parametre: DoubleVect&amp; volumes</span>
<a name="l00355"></a>00355 <span class="comment">// Signification: le vecteur contenant les valeurs  des</span>
<a name="l00356"></a>00356 <span class="comment">// des volumes des elements de la zone</span>
<a name="l00357"></a>00357 <span class="comment">// Valeurs par defaut:</span>
<a name="l00358"></a>00358 <span class="comment">// Contraintes:</span>
<a name="l00359"></a>00359 <span class="comment">// Acces: sortie</span>
<a name="l00360"></a>00360 <span class="comment">// </span>
<a name="l00361"></a>00361 <span class="comment">// Signification:</span>
<a name="l00362"></a>00362 <span class="comment">// Contraintes:</span>
<a name="l00363"></a>00363 <span class="comment">// Exception:</span>
<a name="l00364"></a>00364 <span class="comment">// Effets de bord:</span>
<a name="l00365"></a>00365 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00366"></a>00366 <span class="comment">//</span>
<a name="l00367"></a>00367 <span class="comment">//</span><span class="comment"></span>
<a name="l00368"></a>00368 <span class="comment">//! NE FAIT RIEN: A CODER&lt;br&gt;Calcule les volumes des elements de la zone associee.</span>
<a name="l00369"></a><a class="code" href="classPolyedre.html#ac556703ab295b815ad4e9e18bfa88ed1">00369</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#ac556703ab295b815ad4e9e18bfa88ed1" title="NE FAIT RIEN: A CODER Calcule les volumes des elements de la zone associee.">Polyedre::calculer_volumes</a>(<a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes)<span class="keyword"> const</span>
<a name="l00370"></a>00370 <span class="keyword"></span>{
<a name="l00371"></a>00371   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=<a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>.<a class="code" href="classRef__Zone.html#ab4ba0de67809ff502efeb24c1e43bfe1">valeur</a>();
<a name="l00372"></a>00372   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem=zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00373"></a>00373   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord=zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00374"></a>00374 
<a name="l00375"></a>00375   <span class="keywordtype">int</span> size_tot = zone.<a class="code" href="classZone.html#aa3a33e8b723618b9092460007153e42d" title="Renvoie le nombre total d&#39;elements de la zone.">nb_elem_tot</a>();
<a name="l00376"></a>00376   assert(volumes.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>()==size_tot);
<a name="l00377"></a>00377   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_poly=0; num_poly&lt;size_tot; num_poly++)
<a name="l00378"></a>00378     {
<a name="l00379"></a>00379       <span class="keywordtype">double</span> volume=0;
<a name="l00380"></a>00380       <a class="code" href="classVecteur3.html">Vecteur3</a> xg(0,0,0);
<a name="l00381"></a>00381       <span class="keywordtype">int</span> nb_som_max=elem.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00382"></a>00382       <span class="keywordtype">int</span> nb_som_reel;
<a name="l00383"></a>00383       <span class="keywordflow">for</span> (nb_som_reel=0; nb_som_reel&lt;nb_som_max; nb_som_reel++)
<a name="l00384"></a>00384         {
<a name="l00385"></a>00385           <span class="keywordtype">int</span> n=elem(num_poly,nb_som_reel);
<a name="l00386"></a>00386           <span class="keywordflow">if</span> (n&lt;0)
<a name="l00387"></a>00387             <span class="keywordflow">break</span>;
<a name="l00388"></a>00388           <a class="code" href="classVecteur3.html">Vecteur3</a> S(coord(n,0),coord(n,1),coord(n,2));
<a name="l00389"></a>00389           xg+=S;
<a name="l00390"></a>00390         }
<a name="l00391"></a>00391       xg*=1./nb_som_reel;
<a name="l00392"></a>00392       <a class="code" href="classVecteur3.html">Vecteur3</a> moinsS0(xg);
<a name="l00393"></a>00393       moinsS0*=-1;
<a name="l00394"></a>00394       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(num_poly); f&lt;<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(num_poly+1); f++)
<a name="l00395"></a>00395         {
<a name="l00396"></a>00396           <span class="keywordtype">int</span> somm_loc3=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f+1)-1);
<a name="l00397"></a>00397           <span class="keywordtype">int</span> n3=elem(num_poly,somm_loc3);
<a name="l00398"></a>00398           <a class="code" href="classVecteur3.html">Vecteur3</a> S3(coord(n3,0),coord(n3,1),coord(n3,2));
<a name="l00399"></a>00399           S3+=  moinsS0;
<a name="l00400"></a>00400           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f); s&lt;<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f+1)-2; s++)
<a name="l00401"></a>00401             {
<a name="l00402"></a>00402               <span class="keywordtype">int</span> somm_loc1=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s);
<a name="l00403"></a>00403               <span class="keywordtype">int</span> n1=elem(num_poly,somm_loc1);
<a name="l00404"></a>00404               <span class="keywordtype">int</span> somm_loc2=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s+1);
<a name="l00405"></a>00405               <span class="keywordtype">int</span> n2=elem(num_poly,somm_loc2);
<a name="l00406"></a>00406               <a class="code" href="classVecteur3.html">Vecteur3</a> S1(coord(n1,0),coord(n1,1),coord(n1,2));
<a name="l00407"></a>00407               <a class="code" href="classVecteur3.html">Vecteur3</a> S2(coord(n2,0),coord(n2,1),coord(n2,2));
<a name="l00408"></a>00408               S1+=  moinsS0;
<a name="l00409"></a>00409               S2+=  moinsS0;
<a name="l00410"></a>00410               volume += <a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(
<a name="l00411"></a>00411                           S1[0] * ( S2[1] * S3[2] - S3[1] * S2[2] )
<a name="l00412"></a>00412                           + S2[0] * ( S3[1] * S1[2] - S1[1] * S3[2] )
<a name="l00413"></a>00413                           + S3[0] * ( S1[1] * S2[2] - S2[1] * S1[2] ) );
<a name="l00414"></a>00414 
<a name="l00415"></a>00415             }
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417       volumes(num_poly)=volume/6.;
<a name="l00418"></a>00418     }
<a name="l00419"></a>00419 <span class="comment">// Cerr&lt;&lt;&quot; volumes &quot;&lt;&lt;volumes &lt;&lt; finl;</span>
<a name="l00420"></a>00420   return ;
<a name="l00421"></a>00421 }
<a name="l00422"></a><a class="code" href="classPolyedre.html#a479372086e50f06aca016801178a0424">00422</a> <span class="keywordtype">int</span> <a class="code" href="classPolyedre.html#a479372086e50f06aca016801178a0424" title="Renvoie le nombre de type de face de l&#39;element geometrique. Par exemple un prisme (Classe Prisme) a 2...">Polyedre::nb_type_face</a>()<span class="keyword"> const</span>
<a name="l00423"></a>00423 <span class="keyword"></span>{
<a name="l00424"></a>00424   <span class="keywordflow">return</span> 1;
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 }
<a name="l00427"></a>00427 <span class="comment">//</span>
<a name="l00428"></a>00428 <span class="comment">//</span>
<a name="l00429"></a>00429 <span class="comment">//</span>
<a name="l00430"></a>00430 <span class="comment">//</span>
<a name="l00431"></a>00431 <span class="comment">//</span>
<a name="l00432"></a>00432 <span class="comment">//</span>
<a name="l00433"></a>00433 <span class="comment">//</span><span class="comment"></span>
<a name="l00434"></a>00434 <span class="comment">//! remplit le tableau faces_som_local(i,j) qui donne pour&lt;br&gt;0 &lt;= i &lt; nb_faces()  et  0 &lt;= j &lt; nb_som_face(i) le numero local du sommet&lt;br&gt;sur l&#39;element.&lt;br&gt;On a  0 &lt;= faces_sommets_locaux(i,j) &lt; nb_som()&lt;br&gt;Si toutes les faces de l&#39;element n&#39;ont pas le meme nombre de sommets, le nombre&lt;br&gt;de colonnes du tableau est le plus grand nombre de sommets, et les cases inutilisees&lt;br&gt;du tableau sont mises a -1&lt;br&gt;On renvoie 1 si toutes les faces ont le meme nombre d&#39;elements, 0 sinon.</span>
<a name="l00435"></a><a class="code" href="classPolyedre.html#a26e8185463b6740f755457239606c0ee">00435</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classPolyedre.html#a26e8185463b6740f755457239606c0ee" title="remplit le tableau faces_som_local(i,j) qui donne pour 0 &lt;= i &lt; nb_faces() et 0 &lt;= j &lt; nb_som_face(i) le ...">Polyedre::get_tab_faces_sommets_locaux</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; faces_som_local)<span class="keyword"> const</span>
<a name="l00436"></a>00436 <span class="keyword"></span>{
<a name="l00437"></a>00437   <span class="keywordflow">return</span> 0;
<a name="l00438"></a>00438 }
<a name="l00439"></a><a class="code" href="classPolyedre.html#a216369f92f94e93819aee39b846cd80d">00439</a> <span class="keywordtype">int</span> <a class="code" href="classPolyedre.html#a26e8185463b6740f755457239606c0ee" title="remplit le tableau faces_som_local(i,j) qui donne pour 0 &lt;= i &lt; nb_faces() et 0 &lt;= j &lt; nb_som_face(i) le ...">Polyedre::get_tab_faces_sommets_locaux</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; faces_som_local,<span class="keywordtype">int</span> ele)<span class="keyword"> const</span>
<a name="l00440"></a>00440 <span class="keyword"></span>{
<a name="l00441"></a>00441   faces_som_local.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>,<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>);
<a name="l00442"></a>00442   faces_som_local=-1;
<a name="l00443"></a>00443   <span class="keywordflow">if</span> (ele == 0 &amp;&amp; <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() == 1) <span class="keywordflow">return</span> 1; <span class="comment">//pas d&#39;elements!</span>
<a name="l00444"></a>00444 <span class="comment">// on cherche les faces de l&#39;elt</span>
<a name="l00445"></a>00445   <span class="keywordtype">int</span> fl=0;
<a name="l00446"></a>00446   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(ele); f&lt;<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(ele+1); f++)
<a name="l00447"></a>00447     {
<a name="l00448"></a>00448       <span class="keywordtype">int</span> sl=0;
<a name="l00449"></a>00449       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f); s&lt;<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f+1); s++)
<a name="l00450"></a>00450         {
<a name="l00451"></a>00451           <span class="keywordtype">int</span> somm_loc=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s);
<a name="l00452"></a>00452           faces_som_local(fl,sl)=somm_loc;
<a name="l00453"></a>00453           sl++;
<a name="l00454"></a>00454         }
<a name="l00455"></a>00455       fl++;
<a name="l00456"></a>00456     }
<a name="l00457"></a>00457 
<a name="l00458"></a>00458   <span class="keywordflow">return</span> 1;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 }
<a name="l00461"></a>00461 
<a name="l00462"></a>00462 <span class="comment">// Desctiption : a partir des tableaux d&#39;indirection FacesIndex PolyhedronIndex et Nodes</span>
<a name="l00463"></a>00463 <span class="comment">// on calcul les elems, nb_som_face_max_, nb_face_elem_max_ nb_som_elem_max_</span>
<a name="l00464"></a>00464 <span class="comment">// ainsi que Nodes local...</span>
<a name="l00465"></a><a class="code" href="classPolyedre.html#afc1db3819a4063723ff4bc251135bb9e">00465</a> <span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#afc1db3819a4063723ff4bc251135bb9e">Polyedre::affecte_connectivite_numero_global</a>(<span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; Nodes,<span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; FacesIndex,<span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; PolyhedronIndex,<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems)
<a name="l00466"></a>00466 {
<a name="l00467"></a>00467   <a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>=0;
<a name="l00468"></a>00468 <span class="comment">// detremination de nbsom_max</span>
<a name="l00469"></a>00469   <a class="code" href="classIntList.html" title="Classe qui sert a representer une liste de reels int precision. On ne peut pas utiliser la classe con...">IntList</a> prov;
<a name="l00470"></a>00470   <a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>=0;
<a name="l00471"></a>00471   <a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>=0;
<a name="l00472"></a>00472   <span class="keywordtype">int</span> nelem=PolyhedronIndex.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>()-1;
<a name="l00473"></a>00473   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nelem; ele++)
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475       prov.<a class="code" href="classIntList.html#ab659c50477f288e2122b1184e59bae90" title="Vide la liste.">vide</a>();
<a name="l00476"></a>00476       <span class="keywordtype">int</span> nbf=PolyhedronIndex(ele+1)-PolyhedronIndex(ele);
<a name="l00477"></a>00477       <span class="keywordflow">if</span> (nbf&gt;<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>) <a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>=nbf;
<a name="l00478"></a>00478       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=PolyhedronIndex(ele); f&lt;PolyhedronIndex(ele+1); f++)
<a name="l00479"></a>00479         {
<a name="l00480"></a>00480 <span class="comment">// Cerr&lt;&lt;&quot; ici &quot;&lt;&lt;ele &lt;&lt; &quot; &quot; &lt;&lt;f &lt;&lt;&quot; &quot;&lt;&lt;FacesIndex(f+1)-FacesIndex(f)&lt;&lt;finl;</span>
<a name="l00481"></a>00481           <span class="keywordtype">int</span> nbs=FacesIndex(f+1)-FacesIndex(f);
<a name="l00482"></a>00482           <span class="keywordflow">if</span> (nbs&gt;<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>) <a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>=nbs;
<a name="l00483"></a>00483           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=FacesIndex(f); s&lt;FacesIndex(f+1); s++)
<a name="l00484"></a>00484             {
<a name="l00485"></a>00485               prov.<a class="code" href="classIntList.html#a251e57a817484f3c2bb8e9382ebb55b4" title="Ajout d&#39;un element a la liste ssi il n&#39;existe pas deja.">add_if_not</a>(Nodes(s));
<a name="l00486"></a>00486             }
<a name="l00487"></a>00487         }
<a name="l00488"></a>00488       <span class="keywordtype">int</span> nbsom=prov.<a class="code" href="classIntList.html#ae8b23a7b17410d1e0bdcc20da0594f9b" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00489"></a>00489       <span class="keywordflow">if</span> (nbsom&gt;<a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>) <a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>=nbsom;
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; Polyhedron information nb_som_elem_max &quot;</span>&lt;&lt; <a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>&lt;&lt;<span class="stringliteral">&quot; nb_som_face_max &quot;</span>&lt;&lt;<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>&lt;&lt;<span class="stringliteral">&quot; nb_face_elem_max &quot;</span>&lt;&lt;<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00492"></a>00492   les_elems.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nelem,<a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>);
<a name="l00493"></a>00493   les_elems=-1;
<a name="l00494"></a>00494 <span class="comment">// on refait un tour pour determiiner les elems</span>
<a name="l00495"></a>00495   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nelem; ele++)
<a name="l00496"></a>00496     {
<a name="l00497"></a>00497       prov.<a class="code" href="classIntList.html#ab659c50477f288e2122b1184e59bae90" title="Vide la liste.">vide</a>();
<a name="l00498"></a>00498       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=PolyhedronIndex(ele); f&lt;PolyhedronIndex(ele+1); f++)
<a name="l00499"></a>00499         {
<a name="l00500"></a>00500           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=FacesIndex(f); s&lt;FacesIndex(f+1); s++)
<a name="l00501"></a>00501             {
<a name="l00502"></a>00502               prov.<a class="code" href="classIntList.html#a251e57a817484f3c2bb8e9382ebb55b4" title="Ajout d&#39;un element a la liste ssi il n&#39;existe pas deja.">add_if_not</a>(Nodes(s));
<a name="l00503"></a>00503             }
<a name="l00504"></a>00504         }
<a name="l00505"></a>00505       <span class="keywordtype">int</span> nbsom=prov.<a class="code" href="classIntList.html#ae8b23a7b17410d1e0bdcc20da0594f9b" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00506"></a>00506 <span class="comment">// on trie prov dans l&#39;ordre croissant</span>
<a name="l00507"></a>00507 <span class="comment">// pas strictement necessaire mais permet de garder le meme tableau elem meme si on a effectue des permutation pour les faces</span>
<a name="l00508"></a>00508       <span class="keywordtype">int</span> perm=1;
<a name="l00509"></a>00509       <span class="keywordflow">while</span> (perm)
<a name="l00510"></a>00510         {
<a name="l00511"></a>00511           perm=0;
<a name="l00512"></a>00512           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbsom-1; i++)
<a name="l00513"></a>00513             <span class="keywordflow">if</span> (prov[i]&gt;prov[i+1])
<a name="l00514"></a>00514               {
<a name="l00515"></a>00515                 perm=1;
<a name="l00516"></a>00516                 <span class="keywordtype">int</span> sa=prov[i];
<a name="l00517"></a>00517                 prov[i]=prov[i+1];
<a name="l00518"></a>00518                 prov[i+1]=sa;
<a name="l00519"></a>00519               }
<a name="l00520"></a>00520         }
<a name="l00521"></a>00521       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nbsom; s++) les_elems(ele,s)=prov[s];
<a name="l00522"></a>00522     }
<a name="l00523"></a>00523   <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>=FacesIndex;
<a name="l00524"></a>00524   <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>=PolyhedronIndex;
<a name="l00525"></a>00525 <span class="comment">// determination de Nodes_...</span>
<a name="l00526"></a>00526   <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>=Nodes;
<a name="l00527"></a>00527   {
<a name="l00528"></a>00528     <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>=-2;
<a name="l00529"></a>00529     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nelem; ele++)
<a name="l00530"></a>00530       {
<a name="l00531"></a>00531         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=PolyhedronIndex(ele); f&lt;PolyhedronIndex(ele+1); f++)
<a name="l00532"></a>00532           {
<a name="l00533"></a>00533             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=FacesIndex(f); s&lt;FacesIndex(f+1); s++)
<a name="l00534"></a>00534               {
<a name="l00535"></a>00535                 <span class="keywordtype">int</span> somm_glob=Nodes(s);
<a name="l00536"></a>00536                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> sl=0; sl&lt;<a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>; sl++)
<a name="l00537"></a>00537                   <span class="keywordflow">if</span> (les_elems(ele,sl)==somm_glob)
<a name="l00538"></a>00538                     {
<a name="l00539"></a>00539                       <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s)=sl;
<a name="l00540"></a>00540                       <span class="keywordflow">break</span>;
<a name="l00541"></a>00541                     }
<a name="l00542"></a>00542               }
<a name="l00543"></a>00543           }
<a name="l00544"></a>00544       }
<a name="l00545"></a>00545   }
<a name="l00546"></a>00546   assert(<a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>)&gt;-1);
<a name="l00547"></a>00547 }
<a name="l00548"></a>00548 
<a name="l00549"></a><a class="code" href="classPolyedre.html#a90df3cdc5903e33421d30c2cc84dc697">00549</a> <span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#a90df3cdc5903e33421d30c2cc84dc697">Polyedre::remplir_Nodes_glob</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; Nodes_glob,<span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems)<span class="keyword"> const</span>
<a name="l00550"></a>00550 <span class="keyword"></span>{
<a name="l00551"></a>00551   Nodes_glob=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>;
<a name="l00552"></a>00552   <span class="keywordtype">int</span> nelem=les_elems.<a class="code" href="classIntTab.html#a71e9b9ddc1793094b1b3f109377952b1" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0);
<a name="l00553"></a>00553   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nelem; ele++)
<a name="l00554"></a>00554     {
<a name="l00555"></a>00555       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(ele); f&lt;<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(ele+1); f++)
<a name="l00556"></a>00556         {
<a name="l00557"></a>00557           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f); s&lt;<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f+1); s++)
<a name="l00558"></a>00558             {
<a name="l00559"></a>00559               <span class="keywordtype">int</span> somm_loc=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s);
<a name="l00560"></a>00560               Nodes_glob(s)=les_elems(ele,somm_loc);
<a name="l00561"></a>00561             }
<a name="l00562"></a>00562         }
<a name="l00563"></a>00563     }
<a name="l00564"></a>00564 }
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 <span class="comment">// Precondition:</span>
<a name="l00567"></a>00567 <span class="comment">// Parametre:</span>
<a name="l00568"></a>00568 <span class="comment">// Signification:</span>
<a name="l00569"></a>00569 <span class="comment">// Valeurs par defaut:</span>
<a name="l00570"></a>00570 <span class="comment">// Contraintes:</span>
<a name="l00571"></a>00571 <span class="comment">// Acces:</span>
<a name="l00572"></a>00572 <span class="comment">// </span>
<a name="l00573"></a>00573 <span class="comment">// Signification:</span>
<a name="l00574"></a>00574 <span class="comment">// Contraintes:</span>
<a name="l00575"></a>00575 <span class="comment">// Exception:</span>
<a name="l00576"></a>00576 <span class="comment">// Effets de bord:</span>
<a name="l00577"></a>00577 <span class="comment">// Postcondition:</span>
<a name="l00578"></a>00578 <span class="comment">//</span>
<a name="l00579"></a>00579 <span class="comment">//</span><span class="comment"></span>
<a name="l00580"></a>00580 <span class="comment">//! Reordonne les sommets du Polyedre.&lt;br&gt;NE FAIT RIEN: A CODER</span>
<a name="l00581"></a><a class="code" href="classPolyedre.html#a6527d488e0f2741e1462309d32d8084c">00581</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#a6527d488e0f2741e1462309d32d8084c" title="Reordonne les sommets du Polyedre. NE FAIT RIEN: A CODER.">Polyedre::reordonner</a>()
<a name="l00582"></a>00582 {
<a name="l00583"></a>00583 }
<a name="l00584"></a>00584 <span class="comment">// Description on va ajouter les elements de type new_elem aux elements deja presents dans les_elems et dans new_elems</span>
<a name="l00585"></a><a class="code" href="classPolyedre.html#a9c67799c1aa4d1d53917e25806a88d34">00585</a> <span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#a9c67799c1aa4d1d53917e25806a88d34">Polyedre::ajouter_elements</a>(<span class="keyword">const</span> <a class="code" href="classElem__geom__base.html" title="Classe Elem_geom_base Cette classe est la classe de base pour la definition d&#39;elements geometriques c...">Elem_geom_base</a>&amp; <a class="code" href="Raffiner__Simplexes_8cpp.html#a358dc168d8905bbafc12587204bc9fb8">type_elem</a>, <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; new_elems,<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems)
<a name="l00586"></a>00586 {
<a name="l00587"></a>00587 <span class="comment">// On a joute les new_elems a les_elems</span>
<a name="l00588"></a>00588   <span class="keywordtype">int</span> nb_old_elem=les_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00589"></a>00589   <span class="keywordtype">int</span> nb_new_elem=new_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00590"></a>00590   <span class="keywordtype">int</span> nb_som_old_elem=les_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00591"></a>00591   <span class="keywordtype">int</span> nb_som_new_elem=new_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00592"></a>00592   <a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a> = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(nb_som_old_elem,nb_som_new_elem);
<a name="l00593"></a>00593   les_elems.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00594"></a>00594   les_elems.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_old_elem+nb_new_elem,<a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffac85954f9768f1ed2b14e58cea8ddb7c5">ArrOfInt::COPY_NOINIT</a>);
<a name="l00595"></a>00595   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> el=0; el&lt;nb_new_elem; el++)
<a name="l00596"></a>00596     {
<a name="l00597"></a>00597       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nb_som_new_elem; s++)
<a name="l00598"></a>00598         les_elems(nb_old_elem+el,s)=new_elems(el,s);
<a name="l00599"></a>00599 
<a name="l00600"></a>00600       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=nb_som_new_elem; s&lt;nb_som_old_elem; s++)
<a name="l00601"></a>00601         les_elems(nb_old_elem+el,s)=-1;
<a name="l00602"></a>00602     }
<a name="l00603"></a>00603 <span class="comment">// on ajoute les faces pour cela on recupere le tableau de creation des faces</span>
<a name="l00604"></a>00604   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> faces_som_local;
<a name="l00605"></a>00605   type_elem.<a class="code" href="classElem__geom__base.html#a9993267e98ef97472d3a5ef9c3c67882" title="remplit le tableau faces_som_local(i,j) qui donne pour 0 &lt;= i &lt; nb_faces() et 0 &lt;= j &lt; nb_som_face(i) le ...">get_tab_faces_sommets_locaux</a>(faces_som_local);
<a name="l00606"></a>00606   <span class="keywordtype">int</span> nb_face_new_elem=faces_som_local.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00607"></a>00607   <span class="keywordtype">int</span> nb_som_face_new_elem=faces_som_local.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00608"></a>00608   <a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>=<a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>,nb_face_new_elem);
<a name="l00609"></a>00609   <a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>=<a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>,nb_som_face_new_elem);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611   <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00612"></a>00612   <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(1+nb_old_elem+nb_new_elem);
<a name="l00613"></a>00613 
<a name="l00614"></a>00614   <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00615"></a>00615   <span class="keywordtype">int</span> old_faces_index= <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00616"></a>00616   <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(old_faces_index+nb_new_elem*nb_face_new_elem);
<a name="l00617"></a>00617 
<a name="l00618"></a>00618   <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00619"></a>00619   <span class="keywordtype">int</span> old_nodes_index= <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00620"></a>00620   <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(old_nodes_index+nb_new_elem*nb_face_new_elem*nb_som_face_new_elem);
<a name="l00621"></a>00621 
<a name="l00622"></a>00622   <span class="keywordtype">int</span> new_s=0;
<a name="l00623"></a>00623   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> el=0; el&lt;nb_new_elem; el++)
<a name="l00624"></a>00624     {
<a name="l00625"></a>00625       <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(nb_old_elem+el+1)=<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(nb_old_elem+el)+nb_face_new_elem;
<a name="l00626"></a>00626       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=0; f&lt;nb_face_new_elem; f++)
<a name="l00627"></a>00627         {
<a name="l00628"></a>00628           <span class="keywordtype">int</span> nb_som_face_this_elem=0;
<a name="l00629"></a>00629           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nb_som_face_new_elem; s++)
<a name="l00630"></a>00630             <span class="keywordflow">if</span> (faces_som_local(f,s)!=-1)
<a name="l00631"></a>00631               {
<a name="l00632"></a>00632                 <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(old_nodes_index+new_s++)=faces_som_local(f,s);
<a name="l00633"></a>00633                 nb_som_face_this_elem++;
<a name="l00634"></a>00634               }
<a name="l00635"></a>00635           <span class="keywordflow">if</span> (nb_som_face_this_elem==4)
<a name="l00636"></a>00636             {
<a name="l00637"></a>00637 <span class="comment">// on inverse 3 et 4 en cas de quadrangle</span>
<a name="l00638"></a>00638               <span class="keywordtype">int</span> last=old_nodes_index+new_s-1;
<a name="l00639"></a>00639               <a class="code" href="AssembleurPP1BUtil_8cpp.html#a3117b050530c46b4a15b6ab9ce6d0b41">swap</a>(<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(last),<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(last-1));
<a name="l00640"></a>00640             }
<a name="l00641"></a>00641           <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(old_faces_index+(el*nb_face_new_elem)+f)=
<a name="l00642"></a>00642             <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(old_faces_index+(el*nb_face_new_elem)+f-1)+nb_som_face_this_elem;
<a name="l00643"></a>00643 
<a name="l00644"></a>00644         }
<a name="l00645"></a>00645     }
<a name="l00646"></a>00646   <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(old_nodes_index+new_s);
<a name="l00647"></a>00647 }
<a name="l00648"></a>00648 
<a name="l00649"></a><a class="code" href="classPolyedre.html#ae06d9ed723180030ba502e721406c22e">00649</a> <span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#ae06d9ed723180030ba502e721406c22e">Polyedre::build_reduced</a>(<a class="code" href="classElem__geom.html">Elem_geom</a>&amp; <a class="code" href="Raffiner__Simplexes_8cpp.html#a358dc168d8905bbafc12587204bc9fb8">type_elem</a>, <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; elems_sous_part)<span class="keyword"> const</span>
<a name="l00650"></a>00650 <span class="keyword"></span>{
<a name="l00651"></a>00651   type_elem.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;Polyedre&quot;</span>);
<a name="l00652"></a>00652   <a class="code" href="classPolyedre.html" title="Classe Polyedre Cette represente l&#39;element geometrique Polyedre. Un polyedre est un element defini pa...">Polyedre</a>&amp; reduced = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPolyedre.html" title="Classe Polyedre Cette represente l&#39;element geometrique Polyedre. Un polyedre est un element defini pa...">Polyedre</a>, type_elem.<a class="code" href="classDeriv__Elem__geom__base.html#a384b487459a33f9f521fb16539ec81de">valeur</a>());
<a name="l00653"></a>00653   reduced.<a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>  = <a class="code" href="classPolyedre.html#acd832a2a66f1b5c2bfc0da4c63331e73">nb_som_elem_max_</a>;
<a name="l00654"></a>00654   reduced.<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a> = <a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>;
<a name="l00655"></a>00655   reduced.<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>  = <a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>;
<a name="l00656"></a>00656   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; Pi = reduced.<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>, &amp;Fi = reduced.<a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>, &amp;N = reduced.<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>;
<a name="l00657"></a>00657   Pi.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1), Fi.set_smart_resize(1), N.set_smart_resize(1);
<a name="l00658"></a>00658 
<a name="l00659"></a>00659   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; elems_sous_part.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(); i++)
<a name="l00660"></a>00660     {
<a name="l00661"></a>00661       <span class="keywordtype">int</span> e = elems_sous_part(i);
<a name="l00662"></a>00662       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f = <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(e); f &lt; <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(e + 1); f++)
<a name="l00663"></a>00663         {
<a name="l00664"></a>00664           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f); s &lt; <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(f + 1); s++) N.append_array(<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(s));
<a name="l00665"></a>00665           Fi.append_array(N.size_array());
<a name="l00666"></a>00666         }
<a name="l00667"></a>00667       Pi.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(Fi.size_array() - 1);
<a name="l00668"></a>00668     }
<a name="l00669"></a>00669 }
<a name="l00670"></a>00670 
<a name="l00671"></a><a class="code" href="classPolyedre.html#a9ad6840fb829715f0fe20ba95e914ab1">00671</a> <span class="keywordtype">void</span> <a class="code" href="classPolyedre.html#a9ad6840fb829715f0fe20ba95e914ab1">Polyedre::compute_virtual_index</a>()
<a name="l00672"></a>00672 {
<a name="l00673"></a>00673 <span class="comment">// Methode brutal mais il faut bien commencer ....</span>
<a name="l00674"></a>00674 
<a name="l00675"></a>00675   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> faces_som(0,<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>,<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>);
<a name="l00676"></a>00676   <a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>.<a class="code" href="classRef__Zone.html#ab4ba0de67809ff502efeb24c1e43bfe1">valeur</a>().<a class="code" href="classZone.html#a600fa15a19c7e1384564dffd83ecab4d" title="creation d&#39;un tableau parallele de valeurs aux elements. Voir MD_Vector_tools::creer_tableau_distribu...">creer_tableau_elements</a>(faces_som);
<a name="l00677"></a>00677 
<a name="l00678"></a>00678   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> faces_som_local;
<a name="l00679"></a>00679   <span class="keywordtype">int</span> nb_elem=<a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>.<a class="code" href="classRef__Zone.html#ab4ba0de67809ff502efeb24c1e43bfe1">valeur</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00680"></a>00680   <span class="keywordtype">int</span> nb_elem_tot=<a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>.<a class="code" href="classRef__Zone.html#ab4ba0de67809ff502efeb24c1e43bfe1">valeur</a>().<a class="code" href="classZone.html#aa3a33e8b723618b9092460007153e42d" title="Renvoie le nombre total d&#39;elements de la zone.">nb_elem_tot</a>();
<a name="l00681"></a>00681   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=0; ele&lt;nb_elem; ele++)
<a name="l00682"></a>00682     {
<a name="l00683"></a>00683       <a class="code" href="classPolyedre.html#a26e8185463b6740f755457239606c0ee" title="remplit le tableau faces_som_local(i,j) qui donne pour 0 &lt;= i &lt; nb_faces() et 0 &lt;= j &lt; nb_som_face(i) le ...">get_tab_faces_sommets_locaux</a>(faces_som_local,ele);
<a name="l00684"></a>00684       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>; k++)
<a name="l00685"></a>00685         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l=0; l&lt;<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>; l++)
<a name="l00686"></a>00686           faces_som(ele,k,l)=faces_som_local(k,l);
<a name="l00687"></a>00687     }
<a name="l00688"></a>00688   faces_som.<a class="code" href="classIntVect.html#ad12bea67621d1a0ee82b27c9a37ca4ef">echange_espace_virtuel</a>();
<a name="l00689"></a>00689   <span class="keywordtype">int</span> nbs=0;
<a name="l00690"></a>00690 
<a name="l00691"></a>00691   <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>.<a class="code" href="classArrOfInt.html#a15fc7e3958f02cb38d3106eeb919f6fc" title="appel a ArrOfInt::resize_array()">resize</a>(nb_elem_tot+1);
<a name="l00692"></a>00692 <span class="comment">// Cerr&lt;&lt;&quot;uuu &quot;&lt;&lt; PolyhedronIndex_&lt;&lt;finl;</span>
<a name="l00693"></a>00693 
<a name="l00694"></a>00694   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=nb_elem; ele&lt;nb_elem_tot; ele++)
<a name="l00695"></a>00695     {
<a name="l00696"></a>00696       <span class="keywordtype">int</span> nbf=0;
<a name="l00697"></a>00697       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>; k++)
<a name="l00698"></a>00698         {
<a name="l00699"></a>00699           <span class="keywordflow">if</span> (faces_som(ele,k,0)!=-1)
<a name="l00700"></a>00700             nbf++;
<a name="l00701"></a>00701           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l=0; l&lt;<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>; l++)
<a name="l00702"></a>00702             {
<a name="l00703"></a>00703               <span class="keywordflow">if</span> (faces_som(ele,k,l)!=-1)
<a name="l00704"></a>00704                 nbs++;
<a name="l00705"></a>00705 <span class="comment">// Cerr &lt;&lt;&quot; INFO &quot; &lt;&lt; ele&lt;&lt; &quot; k&quot; &lt;&lt;k &lt;&lt; &quot; l &quot;&lt;&lt; l&lt;&lt; &quot; iiii &quot;&lt;&lt;faces_som(ele,k,l)&lt;&lt;finl;</span>
<a name="l00706"></a>00706             }
<a name="l00707"></a>00707         }
<a name="l00708"></a>00708       <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(ele+1)=<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(ele)+nbf;
<a name="l00709"></a>00709     }
<a name="l00710"></a>00710   <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>.<a class="code" href="classArrOfInt.html#a15fc7e3958f02cb38d3106eeb919f6fc" title="appel a ArrOfInt::resize_array()">resize</a>(<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(nb_elem_tot)+1);
<a name="l00711"></a>00711   <span class="keywordtype">int</span> nbs_old=<a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00712"></a>00712   <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>.<a class="code" href="classArrOfInt.html#a15fc7e3958f02cb38d3106eeb919f6fc" title="appel a ArrOfInt::resize_array()">resize</a>(nbs_old+nbs);
<a name="l00713"></a>00713   <span class="keywordtype">int</span> nbft=<a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>(nb_elem);
<a name="l00714"></a>00714   nbs=nbs_old;
<a name="l00715"></a>00715 
<a name="l00716"></a>00716 
<a name="l00717"></a>00717   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=nb_elem; ele&lt;nb_elem_tot; ele++)
<a name="l00718"></a>00718     {
<a name="l00719"></a>00719 
<a name="l00720"></a>00720       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>; k++)
<a name="l00721"></a>00721         {
<a name="l00722"></a>00722           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l=0; l&lt;<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>; l++)
<a name="l00723"></a>00723             {
<a name="l00724"></a>00724               <span class="keywordflow">if</span> (faces_som(ele,k,l)!=-1)
<a name="l00725"></a>00725                 {
<a name="l00726"></a>00726                   <a class="code" href="classPolyedre.html#a7f8bc6b1fc289d16dfa310ce4510fc63">Nodes_</a>(nbs)=faces_som(ele,k,l);
<a name="l00727"></a>00727                   nbs++;
<a name="l00728"></a>00728                 }
<a name="l00729"></a>00729             }
<a name="l00730"></a>00730           <span class="keywordflow">if</span> (faces_som(ele,k,0)!=-1)
<a name="l00731"></a>00731             {
<a name="l00732"></a>00732               <a class="code" href="classPolyedre.html#abaab873a6ef2a28bbd30b8487ad30286">FacesIndex_</a>(nbft+1)=nbs;
<a name="l00733"></a>00733               nbft++;
<a name="l00734"></a>00734             }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736         }
<a name="l00737"></a>00737 
<a name="l00738"></a>00738     }
<a name="l00739"></a>00739 
<a name="l00740"></a>00740   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele=nb_elem; ele&lt;nb_elem_tot; ele++)
<a name="l00741"></a>00741     {
<a name="l00742"></a>00742       <a class="code" href="classPolyedre.html#a26e8185463b6740f755457239606c0ee" title="remplit le tableau faces_som_local(i,j) qui donne pour 0 &lt;= i &lt; nb_faces() et 0 &lt;= j &lt; nb_som_face(i) le ...">get_tab_faces_sommets_locaux</a>(faces_som_local,ele);
<a name="l00743"></a>00743       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classPolyedre.html#a7423a09af6fbd82c7d89ef63c5ee04e9">nb_face_elem_max_</a>; k++)
<a name="l00744"></a>00744         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l=0; l&lt;<a class="code" href="classPolyedre.html#aa2b7152f16960e4e650f695fad1efb8b">nb_som_face_max_</a>; l++)
<a name="l00745"></a>00745           {
<a name="l00746"></a>00746 
<a name="l00747"></a>00747             <span class="keywordtype">int</span> ind1=faces_som(ele,k,l);
<a name="l00748"></a>00748             <span class="keywordtype">int</span> ind2=faces_som_local(k,l);
<a name="l00749"></a>00749             <span class="keywordflow">if</span> (ind1!=ind2)
<a name="l00750"></a>00750               {
<a name="l00751"></a>00751                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;PPPPB &quot;</span>&lt;&lt; ele&lt;&lt; <span class="stringliteral">&quot; k &quot;</span> &lt;&lt;k &lt;&lt; <span class="stringliteral">&quot; l &quot;</span>&lt;&lt; l&lt;&lt; <span class="stringliteral">&quot; iiii &quot;</span>&lt;&lt;ind1&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;ind2&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00752"></a>00752                 <a class="code" href="classProcess.html#a6a4b64571b10f150a70db229b839e881" title="Routine de sortie de Trio-U sur une erreur abort()">abort</a>();
<a name="l00753"></a>00753               }
<a name="l00754"></a>00754           }
<a name="l00755"></a>00755     }
<a name="l00756"></a>00756 <span class="comment">// BLOQUE;</span>
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 }
<a name="l00759"></a>00759 
<a name="l00760"></a>00760 
<a name="l00761"></a><a class="code" href="classPolyedre.html#a7eb8ec497c10a1d6c70afe266ea11f8b">00761</a> <span class="keywordtype">int</span> <a class="code" href="classPolyedre.html#a7eb8ec497c10a1d6c70afe266ea11f8b">Polyedre::get_somme_nb_faces_elem</a>()<span class="keyword"> const</span>
<a name="l00762"></a>00762 <span class="keyword"></span>{
<a name="l00763"></a>00763 
<a name="l00764"></a>00764   <span class="keywordtype">int</span> titi= <a class="code" href="classPolyedre.html#a53acf65248678236c73f54f332e5b3b5" title="PolyhedronIndex_[ele] numero premiere face de l&#39;ele FacesIndex_[f] numero premier indice de sommet de...">PolyhedronIndex_</a>[<a class="code" href="classElem__geom__base.html#a70fcd0baca7afb11d3153b9ac5433ede">ma_zone</a>.<a class="code" href="classRef__Zone.html#ab4ba0de67809ff502efeb24c1e43bfe1">valeur</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>()];
<a name="l00765"></a>00765   <span class="keywordflow">return</span> titi;
<a name="l00766"></a>00766 }
<a name="l00767"></a>00767 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:19 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
