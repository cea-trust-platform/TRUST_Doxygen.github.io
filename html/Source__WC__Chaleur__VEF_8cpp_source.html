<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Dilatable/Weakly_Compressible/VEF/Source_WC_Chaleur_VEF.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Dilatable/Weakly_Compressible/VEF/Source_WC_Chaleur_VEF.cpp</div>  </div>
</div>
<div class="contents">
<a href="Source__WC__Chaleur__VEF_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Source_WC_Chaleur_VEF.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Dilatable/Weakly_Compressible/VEF</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/22</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Convection__Diffusion__Chaleur__WC_8h.html">Convection_Diffusion_Chaleur_WC.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Source__WC__Chaleur__VEF_8h.html">Source_WC_Chaleur_VEF.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Neumann__sortie__libre_8h.html">Neumann_sortie_libre.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Navier__Stokes__WC_8h.html">Navier_Stokes_WC.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Milieu__base_8h.html">Milieu_base.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="Source__WC__Chaleur__VEF_8cpp.html#a42bedb01d51d0a9e75711f824650ac55">00031</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classSource__WC__Chaleur__VEF.html" title="class Source_WC_Chaleur_VEF Cette classe represente un terme source supplementaire a prendre en compt...">Source_WC_Chaleur_VEF</a>,<span class="stringliteral">&quot;Source_WC_Chaleur_VEF&quot;</span>,<a class="code" href="classSource__WC__Chaleur.html" title="class Source_WC_Chaleur Cette classe represente un terme source supplementaire a prendre en compte da...">Source_WC_Chaleur</a>);
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="classSource__WC__Chaleur__VEF.html#a49664e4554f53173d99a35a7e0129a34">00033</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classSource__WC__Chaleur__VEF.html#a49664e4554f53173d99a35a7e0129a34" title="NE FAIT RIEN A surcharger dans les classes derivees. Imprime la source sur un flot de sortie...">Source_WC_Chaleur_VEF::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00034"></a>00034 <span class="keyword"></span>{
<a name="l00035"></a>00035   os &lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00036"></a>00036   <span class="keywordflow">return</span> os;
<a name="l00037"></a>00037 }
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="classSource__WC__Chaleur__VEF.html#a828c0472c58a2f731b6c2d8c3f239373">00039</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classSource__WC__Chaleur__VEF.html#a828c0472c58a2f731b6c2d8c3f239373" title="NE FAIT RIEN A surcharger dans les classes derivees. Lecture d&#39;un terme source sur un flot d&#39;entree...">Source_WC_Chaleur_VEF::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is) { <span class="keywordflow">return</span> is; }
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="classSource__WC__Chaleur__VEF.html#ae11f9d9bb672c9c8e96e3627e0448bb8">00041</a> <span class="keywordtype">void</span> <a class="code" href="classSource__WC__Chaleur__VEF.html#ae11f9d9bb672c9c8e96e3627e0448bb8">Source_WC_Chaleur_VEF::associer_zones</a>(<span class="keyword">const</span> <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; zone,<span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp; )
<a name="l00042"></a>00042 {
<a name="l00043"></a>00043   <a class="code" href="classSource__Fluide__Dilatable__VEF__Proto.html#a079e25627245995c9c659632837d054d">associer_volume_porosite_impl</a>(zone,<a class="code" href="classSource__Chaleur__Fluide__Dilatable__base.html#a8ac44c3561af5586da1a0d839133ceaf">volumes</a>,<a class="code" href="classSource__Chaleur__Fluide__Dilatable__base.html#a609a84be27585f17555e3b9d17371cd3">porosites</a>);
<a name="l00044"></a>00044 }
<a name="l00045"></a>00045 
<a name="l00046"></a><a class="code" href="classSource__WC__Chaleur__VEF.html#a4278167c6d86d0eb04b85ee5ec231913">00046</a> <span class="keywordtype">void</span> <a class="code" href="classSource__WC__Chaleur__VEF.html#a4278167c6d86d0eb04b85ee5ec231913">Source_WC_Chaleur_VEF::compute_interpolate_gradP</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; UgradP_face, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Ptot)<span class="keyword"> const</span>
<a name="l00047"></a>00047 <span class="keyword"></span>{
<a name="l00048"></a>00048   <span class="comment">/*</span>
<a name="l00049"></a>00049 <span class="comment">   * NOTA BENE :</span>
<a name="l00050"></a>00050 <span class="comment">   * On a discretisé P_EOS avec une directive = temperature qui donne en VEF :</span>
<a name="l00051"></a>00051 <span class="comment">   * Ptot =&gt; aux faces</span>
<a name="l00052"></a>00052 <span class="comment">   * la_vitesse =&gt; faces car vef</span>
<a name="l00053"></a>00053 <span class="comment">   * grad_Ptot =&gt; elem</span>
<a name="l00054"></a>00054 <span class="comment">   *</span>
<a name="l00055"></a>00055 <span class="comment">   * L&#39;equation est une equation de scalaire =&gt; aux faces car vef</span>
<a name="l00056"></a>00056 <span class="comment">   * On a d P_tot / d t = del P / del t + u.grad(P_tot)</span>
<a name="l00057"></a>00057 <span class="comment">   *</span>
<a name="l00058"></a>00058 <span class="comment">   * del P / del t =&gt; aux faces</span>
<a name="l00059"></a>00059 <span class="comment">   * u.grad(P_tot) !!! faut interpoler grad(P_tot) aux faces</span>
<a name="l00060"></a>00060 <span class="comment">   */</span>
<a name="l00061"></a>00061 
<a name="l00062"></a>00062   <span class="keyword">const</span> <a class="code" href="classNavier__Stokes__WC.html" title="classe Navier_Stokes_WC Cette classe porte les termes de l&#39;equation de la dynamique pour un fluide sa...">Navier_Stokes_WC</a>&amp; eqHyd = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classNavier__Stokes__WC.html" title="classe Navier_Stokes_WC Cette classe porte les termes de l&#39;equation de la dynamique pour un fluide sa...">Navier_Stokes_WC</a>,<a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;probleme().equation(0));
<a name="l00063"></a>00063   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; la_vitesse = eqHyd.<a class="code" href="classNavier__Stokes__std.html#ab831017616b67792f562fea81f1e5dce">vitesse</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>();
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">// On sait que grad_Ptot est un champ elem =&gt; on pense à la conductivite (elem en vef !! )</span>
<a name="l00066"></a>00066   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> grad_Ptot;
<a name="l00067"></a>00067   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; lambda = eqHyd.<a class="code" href="classNavier__Stokes__std.html#a442d8f1138c18da07aa895728b3e41f2" title="Renvoie le milieu physique de l&#39;equation (le Fluide_base upcaste en Milieu_base)">milieu</a>().<a class="code" href="classMilieu__base.html#a99251c07d04e1f13ec4c300bfe8757db" title="Renvoie la conductivite du milieu. (version const)">conductivite</a>()-&gt;<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>();
<a name="l00068"></a>00068   <span class="keyword">const</span> <span class="keywordtype">int</span> nb = lambda.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>(), nbcomp = la_vitesse.line_size();
<a name="l00069"></a>00069   assert (nb == lambda.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) &amp;&amp; lambda.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() == 1);
<a name="l00070"></a>00070   grad_Ptot.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb,nbcomp);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <span class="keyword">const</span> <a class="code" href="classConvection__Diffusion__Chaleur__WC.html" title="classe Convection_Diffusion_Chaleur_WC Cas particulier de Convection_Diffusion_Chaleur_Fluide_Dilatab...">Convection_Diffusion_Chaleur_WC</a>&amp; eq_chal = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classConvection__Diffusion__Chaleur__WC.html" title="classe Convection_Diffusion_Chaleur_WC Cas particulier de Convection_Diffusion_Chaleur_Fluide_Dilatab...">Convection_Diffusion_Chaleur_WC</a>,<a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>.<a class="code" href="classRef__Equation__base.html#a7bb6fb60cb55bef0eef1b0e8718300a4">valeur</a>());
<a name="l00073"></a>00073   <span class="keyword">const</span> <a class="code" href="classOperateur__Grad.html" title="Classe Operateur_Grad Classe generique de la hierarchie des operateurs calculant le gradient d&#39;un cha...">Operateur_Grad</a>&amp; Op_Grad = eq_chal.<a class="code" href="classConvection__Diffusion__Chaleur__WC.html#a3882e4175fa6242e3b75fbbff4c8418f">operateur_gradient_WC</a>();
<a name="l00074"></a>00074   Op_Grad.<a class="code" href="classOperateur__Grad.html#a179b2f08f6907e9b69fa715cfb98fa81" title="Initialise le tableau passe en parametre avec la contribution de l&#39;operateur.">calculer</a>(Ptot,grad_Ptot); <span class="comment">//!&lt; compute grad(P_tot)</span>
<a name="l00075"></a>00075 <span class="comment"></span>
<a name="l00076"></a>00076   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00077"></a>00077   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zone = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, zone_dis);
<a name="l00078"></a>00078   assert (zone_dis.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Zone_VEFPreP1b&quot;</span> || zone_dis.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Zone_VEF&quot;</span>);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">// grad should be zero at boundary</span>
<a name="l00081"></a>00081   <a class="code" href="classSource__WC__Chaleur.html#a9b316057ed15dc986e1f8243f7c9e021">correct_grad_boundary</a>(zone,grad_Ptot);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">// We compute u*grad(P_tot) on each face</span>
<a name="l00084"></a>00084   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> grad_Ptot_face(la_vitesse); <span class="comment">//!&lt; champs sur les faces</span>
<a name="l00085"></a>00085 <span class="comment"></span>
<a name="l00086"></a>00086 <span class="comment">// get grad_Ptot on faces</span>
<a name="l00087"></a>00087   <a class="code" href="classSource__WC__Chaleur__VEF.html#a4a149af3b9c459d04d24212fa284de3e">elem_to_face</a>(zone,grad_Ptot,grad_Ptot_face);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   <span class="keyword">const</span> <span class="keywordtype">int</span> n = la_vitesse.dimension_tot(0);
<a name="l00090"></a>00090   assert (UgradP_face.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) == n &amp;&amp; grad_Ptot_face.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) == n);
<a name="l00091"></a>00091   assert (UgradP_face.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() == 1 &amp;&amp; n == zone.<a class="code" href="classZone__VF.html#a50fd21c9535680489015a3c8b88c685a" title="renvoie le nombre total de faces. C&#39;est-a-dire faces reelles + faces virtuelles">nb_faces_tot</a>());
<a name="l00092"></a>00092   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0 ; i &lt;n ; i++)
<a name="l00093"></a>00093     {
<a name="l00094"></a>00094       UgradP_face(i,0) = 0.;
<a name="l00095"></a>00095       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0 ; j &lt;nbcomp ; j++) UgradP_face(i,0) += la_vitesse(i,j) * grad_Ptot_face(i,j);
<a name="l00096"></a>00096     }
<a name="l00097"></a>00097 }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="comment">// On peut utiliser les methodes statics de Discretisation_tools... mais faut creer de Champ_base ...</span>
<a name="l00100"></a><a class="code" href="classSource__WC__Chaleur__VEF.html#a4a149af3b9c459d04d24212fa284de3e">00100</a> <span class="keywordtype">void</span> <a class="code" href="classSource__WC__Chaleur__VEF.html#a4a149af3b9c459d04d24212fa284de3e">Source_WC_Chaleur_VEF::elem_to_face</a>(<span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zone, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; grad_Ptot,<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; grad_Ptot_face)<span class="keyword"> const</span>
<a name="l00101"></a>00101 <span class="keyword"></span>{
<a name="l00102"></a>00102   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vol = zone.<a class="code" href="classZone__VF.html#aea771c835e561469d2d21dbca5fac1cf" title="renvoie le volume de la maille i.">volumes</a>();
<a name="l00103"></a>00103   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = zone.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00104"></a>00104   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_face_elem = elem_faces.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>(), nb_elem_tot = zone.<a class="code" href="classZone__dis__base.html#a4d6aa445f152aa6dc54d66ea7a071147">nb_elem_tot</a>(), nb_comp = grad_Ptot_face.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00105"></a>00105   assert (grad_Ptot.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) == nb_elem_tot &amp;&amp; grad_Ptot_face.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0) == zone.<a class="code" href="classZone__VF.html#a50fd21c9535680489015a3c8b88c685a" title="renvoie le nombre total de faces. C&#39;est-a-dire faces reelles + faces virtuelles">nb_faces_tot</a>());
<a name="l00106"></a>00106   assert (grad_Ptot.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() == nb_comp);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108   grad_Ptot_face = 0.;
<a name="l00109"></a>00109   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ele = 0; ele &lt; nb_elem_tot; ele++)
<a name="l00110"></a>00110     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nb_face_elem; s++)
<a name="l00111"></a>00111       {
<a name="l00112"></a>00112         <span class="keyword">const</span> <span class="keywordtype">int</span> face = elem_faces(ele,s);
<a name="l00113"></a>00113         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp = 0; comp &lt; nb_comp; comp++) grad_Ptot_face(face,comp) += grad_Ptot(ele,comp)*vol(ele);
<a name="l00114"></a>00114       }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=0; f&lt;zone.<a class="code" href="classZone__VF.html#a50fd21c9535680489015a3c8b88c685a" title="renvoie le nombre total de faces. C&#39;est-a-dire faces reelles + faces virtuelles">nb_faces_tot</a>(); f++)
<a name="l00117"></a>00117     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;nb_comp; comp++) grad_Ptot_face(f,comp) /= <a class="code" href="classSource__Chaleur__Fluide__Dilatable__base.html#a8ac44c3561af5586da1a0d839133ceaf">volumes</a>(f)*nb_face_elem;
<a name="l00118"></a>00118 }
<a name="l00119"></a>00119 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:33 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
