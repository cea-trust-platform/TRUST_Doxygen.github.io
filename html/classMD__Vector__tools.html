<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: MD_Vector_tools Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">MD_Vector_tools Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="MD_Vector_tools" -->
<p><code>#include &lt;<a class="el" href="MD__Vector__tools_8h_source.html">MD_Vector_tools.h</a>&gt;</code></p>

<p><a href="classMD__Vector__tools-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7c">Operations_echange</a> { <br/>
&#160;&#160;<a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca8294c959011d5ec0b0f2dd21eec75e90">ECHANGE_EV</a>, 
<a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca088a6c7d322ea30cf55fd00932b633ad">EV_SOMME</a>, 
<a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca5bd847265a61ded8631812d6e1f0a559">EV_SOMME_ECHANGE</a>, 
<a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca112b830928dc0e01ea486a8d6d7fce02">EV_MAX</a>, 
<br/>
&#160;&#160;<a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca6321c56b72a41201a79013057dac90e8">EV_MINCOL1</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#aeac48ec589f525bafdfc83244a5d4dea">creer_tableau_distribue</a> (const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;, <a class="el" href="classArray__base.html">Array_base</a> &amp;, <a class="el" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a> opt=Array_base::COPY_INIT)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">transforme v en un tableau parallele ayant la structure md.<br/>
md doit est non nul !<br/>
Les dimension(i&gt;=1) du tableau v (si c'est un <a class="el" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> ou <a class="el" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>) sont conservees,<br/>
les dimension(0) et dimension_tot(0) sont modifiees en fonction du nombre d'items<br/>
specifies dans le <a class="el" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>.<br/>
La dimension initiale du vecteur doit etre soit 0, soit md.get_nb_items_reels(),<br/>
soit md.get_nb_items_tot(). Si besoin, la taille du tableau est modifiee et on<br/>
initialise le tableau selon opt.<br/>
ATTENTION, <a class="el" href="classMD__Vector__tools.html#a529704705758b2c8c9a688a3090011f6">echange_espace_virtuel()</a> n'est PAS appele.<br/>
Les cases virtuelles ne sont pas initialisees...  <a href="#aeac48ec589f525bafdfc83244a5d4dea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#a529704705758b2c8c9a688a3090011f6">echange_espace_virtuel</a> (<a class="el" href="classIntVect.html">IntVect</a> &amp;, <a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7c">Operations_echange</a> opt=ECHANGE_EV)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#a9331c1098c8f7285d9fa75a77f4c41ba">echange_espace_virtuel</a> (<a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;, <a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7c">Operations_echange</a> opt=ECHANGE_EV)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#ad099d2407b0016920bd8c667a56fddd8">get_sequential_items_flags</a> (const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;, <a class="el" href="classArrOfBit.html">ArrOfBit</a> &amp;flags, int line_size=1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#a5e4b6886fe352b47ebc795146bc9e370">get_sequential_items_flags</a> (const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;, <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;flags, int line_size=1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#ae8a15984c4fb4980a983f05ce91e7f05">compute_sequential_items_index</a> (const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;, <a class="el" href="classMD__Vector__renumber.html">MD_Vector_renumber</a> &amp;, int line_size=1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#ae2cb70190653fe8f0263f5c05e74332b">creer_md_vect_renum</a> (const <a class="el" href="classIntVect.html">IntVect</a> &amp;renum, <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;md_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">cree un descripteur pour un sous-ensemble d'un vecteur.<br/>
renum fournit la structure et le descripteur du vecteur source (doit avoir line_size==1)<br/>
renum doit contenir -1 pour les items du vecteur source a ne pas conserver et une<br/>
valeur positive ou nulle pour les items a conserver.<br/>
La valeur renum[i] donne l'indice de cet item dans le nouveau tableau.<br/>
Attention, si un item du vecteur source est recu d'un autre processeur et doit etre conserve,<br/>
ce meme item doit aussi etre conserve sur le processeur qui envoie cet item.  <a href="#ae2cb70190653fe8f0263f5c05e74332b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#a773ef21e5af6331de459189d19cc340b">creer_md_vect_renum_auto</a> (<a class="el" href="classIntVect.html">IntVect</a> &amp;flags_renum, <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;md_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Idem que <a class="el" href="classMD__Vector__tools.html#ae2cb70190653fe8f0263f5c05e74332b" title="cree un descripteur pour un sous-ensemble d&#39;un vecteur. renum fournit la structure et le descripteur ...">creer_md_vect_renum()</a> mais cree une numerotation par defaut.<br/>
Le tableau flags_renum doit contenir en entree une valeur POSITIVE OU NULLE pour les<br/>
valeurs a conserver et une valeur negative pour les autres.<br/>
En sortie, flags_renum contient l'indice de l'item dans le tableau reduit s'il est<br/>
conserve, sinon la valeur d'origine non modifiee.<br/>
Les items sont places dans l'ordre croissant de leur indice local sur dans le descripteur<br/>
d'origine.  <a href="#a773ef21e5af6331de459189d19cc340b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#a300c405bb5f57d2d7e4456ed317adb7c">dump_vector_with_md</a> (const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;, <a class="el" href="classSortie.html">Sortie</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">dumps vector v with its parallel descriptor to os.<br/>
os must be a file type with one file per process (no shared file).  <a href="#a300c405bb5f57d2d7e4456ed317adb7c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#ab7324a93364b401d8c542f399d24a7c5">restore_vector_with_md</a> (<a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;, <a class="el" href="classEntree.html">Entree</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">restores a vector saved by dump_vector_with_md.<br/>
The code must run with the same number of processors.<br/>
"v" will have a newly created copy of the descriptor (not equal to any<br/>
other descriptor previously loaded). If "identical" descriptors are needed<br/>
for several vectors, you might want to call set_md_vector() afterwards to<br/>
attach another descriptor. See save_matrice_conditionnel()  <a href="#ab7324a93364b401d8c542f399d24a7c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classMD__Vector.html">MD_Vector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMD__Vector__tools.html#abbbf6fa01a47a78772f8a4458b7ef45d">extend</a> (const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;src, <a class="el" href="MD__Vector__tools_8h.html#a25b6cd4711cb79584b6c83b3de18f9e0">extra_item_t</a> &amp;items)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="MD__Vector__tools_8h_source.html#l00038">38</a> of file <a class="el" href="MD__Vector__tools_8h_source.html">MD_Vector_tools.h</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="ac0611ff35861322f7e1fe9b98a132b7c"></a><!-- doxytag: member="MD_Vector_tools::Operations_echange" ref="ac0611ff35861322f7e1fe9b98a132b7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7c">MD_Vector_tools::Operations_echange</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ac0611ff35861322f7e1fe9b98a132b7ca8294c959011d5ec0b0f2dd21eec75e90"></a><!-- doxytag: member="ECHANGE_EV" ref="ac0611ff35861322f7e1fe9b98a132b7ca8294c959011d5ec0b0f2dd21eec75e90" args="" -->ECHANGE_EV</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac0611ff35861322f7e1fe9b98a132b7ca088a6c7d322ea30cf55fd00932b633ad"></a><!-- doxytag: member="EV_SOMME" ref="ac0611ff35861322f7e1fe9b98a132b7ca088a6c7d322ea30cf55fd00932b633ad" args="" -->EV_SOMME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac0611ff35861322f7e1fe9b98a132b7ca5bd847265a61ded8631812d6e1f0a559"></a><!-- doxytag: member="EV_SOMME_ECHANGE" ref="ac0611ff35861322f7e1fe9b98a132b7ca5bd847265a61ded8631812d6e1f0a559" args="" -->EV_SOMME_ECHANGE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac0611ff35861322f7e1fe9b98a132b7ca112b830928dc0e01ea486a8d6d7fce02"></a><!-- doxytag: member="EV_MAX" ref="ac0611ff35861322f7e1fe9b98a132b7ca112b830928dc0e01ea486a8d6d7fce02" args="" -->EV_MAX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac0611ff35861322f7e1fe9b98a132b7ca6321c56b72a41201a79013057dac90e8"></a><!-- doxytag: member="EV_MINCOL1" ref="ac0611ff35861322f7e1fe9b98a132b7ca6321c56b72a41201a79013057dac90e8" args="" -->EV_MINCOL1</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="MD__Vector__tools_8h_source.html#l00047">47</a> of file <a class="el" href="MD__Vector__tools_8h_source.html">MD_Vector_tools.h</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca8294c959011d5ec0b0f2dd21eec75e90">ECHANGE_EV</a>, <a class="code" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca088a6c7d322ea30cf55fd00932b633ad">EV_SOMME</a>, <a class="code" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca5bd847265a61ded8631812d6e1f0a559">EV_SOMME_ECHANGE</a>, <a class="code" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca112b830928dc0e01ea486a8d6d7fce02">EV_MAX</a>, <a class="code" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7ca6321c56b72a41201a79013057dac90e8">EV_MINCOL1</a> };
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae8a15984c4fb4980a983f05ce91e7f05"></a><!-- doxytag: member="MD_Vector_tools::compute_sequential_items_index" ref="ae8a15984c4fb4980a983f05ce91e7f05" args="(const MD_Vector &amp;, MD_Vector_renumber &amp;, int line_size=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_Vector_tools::compute_sequential_items_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMD__Vector__renumber.html">MD_Vector_renumber</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line_size</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00294">294</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, and <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;MD_Vector_tools::compute_sequential_items_index&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
  <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae2cb70190653fe8f0263f5c05e74332b"></a><!-- doxytag: member="MD_Vector_tools::creer_md_vect_renum" ref="ae2cb70190653fe8f0263f5c05e74332b" args="(const IntVect &amp;renum, MD_Vector &amp;md_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_Vector_tools::creer_md_vect_renum </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>renum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>md_vect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cree un descripteur pour un sous-ensemble d'un vecteur.<br/>
renum fournit la structure et le descripteur du vecteur source (doit avoir line_size==1)<br/>
renum doit contenir -1 pour les items du vecteur source a ne pas conserver et une<br/>
valeur positive ou nulle pour les items a conserver.<br/>
La valeur renum[i] donne l'indice de cet item dans le nouveau tableau.<br/>
Attention, si un item du vecteur source est recu d'un autre processeur et doit etre conserve,<br/>
ce meme item doit aussi etre conserve sur le processeur qui envoie cet item. </p>

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00593">593</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="MD__Vector_8cpp_source.html#l00031">MD_Vector::copy()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="IntVect_8h_source.html#l00087">IntVect::get_md_vector()</a>, <a class="el" href="MD__Vector__composite_8h_source.html#l00060">MD_Vector_composite::global_md_</a>, <a class="el" href="IntVect_8h_source.html#l00150">IntVect::line_size()</a>, <a class="el" href="MD__Vector_8h_source.html#l00063">MD_Vector::non_nul()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, and <a class="el" href="MD__Vector_8h_source.html#l00067">MD_Vector::valeur()</a>.</p>

<p>Referenced by <a class="el" href="MD__Vector__tools_8cpp_source.html#l00638">creer_md_vect_renum_auto()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; src_md = renum.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>();
  <span class="keywordflow">if</span> (!src_md.<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in MD_Vector_tools::creer_md_vect_renum: descripteur nul !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="keywordflow">if</span> (renum.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>() != 1)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in MD_Vector_tools::creer_md_vect_renum: line_size != 1&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; src_md_val = src_md.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
  <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, src_md_val))
    {
      <span class="keyword">const</span> <a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>&amp; src = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, src_md_val);
      <a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a> dest;<a class="code" href="classMD__Vector__tools.html#ae2cb70190653fe8f0263f5c05e74332b" title="cree un descripteur pour un sous-ensemble d&#39;un vecteur. renum fournit la structure et le descripteur ..."></a>
<a class="code" href="classMD__Vector__tools.html#ae2cb70190653fe8f0263f5c05e74332b" title="cree un descripteur pour un sous-ensemble d&#39;un vecteur. renum fournit la structure et le descripteur ...">      ::creer_md_vect_renum</a>(renum, src, dest);
      md_vect.<a class="code" href="classMD__Vector.html#a063644dd8ca62e707a2d059eedeb58a7" title="construction d&#39;un objet MD_Vector par copie d&#39;un objet existant. C&#39;est la methode recommandee pour cr...">copy</a>(dest);
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, src_md_val))
    {
      <span class="keyword">const</span> <a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>&amp; src1 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, src_md_val);
      <span class="keyword">const</span> <a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>&amp; src = src1.<a class="code" href="classMD__Vector__composite.html#ac4784365aff4de8ddcd4f1823ac892d3">global_md_</a>;
      <a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a> dest;<a class="code" href="classMD__Vector__tools.html#ae2cb70190653fe8f0263f5c05e74332b" title="cree un descripteur pour un sous-ensemble d&#39;un vecteur. renum fournit la structure et le descripteur ..."></a>
<a class="code" href="classMD__Vector__tools.html#ae2cb70190653fe8f0263f5c05e74332b" title="cree un descripteur pour un sous-ensemble d&#39;un vecteur. renum fournit la structure et le descripteur ...">      ::creer_md_vect_renum</a>(renum, src, dest);
      md_vect.<a class="code" href="classMD__Vector.html#a063644dd8ca62e707a2d059eedeb58a7" title="construction d&#39;un objet MD_Vector par copie d&#39;un objet existant. C&#39;est la methode recommandee pour cr...">copy</a>(dest);
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in MD_Vector_tools::creer_md_vect_renum: unknown MD_Vector type &quot;</span>
           &lt;&lt; src_md_val.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a773ef21e5af6331de459189d19cc340b"></a><!-- doxytag: member="MD_Vector_tools::creer_md_vect_renum_auto" ref="a773ef21e5af6331de459189d19cc340b" args="(IntVect &amp;flags_renum, MD_Vector &amp;md_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_Vector_tools::creer_md_vect_renum_auto </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>flags_renum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>md_vect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Idem que <a class="el" href="classMD__Vector__tools.html#ae2cb70190653fe8f0263f5c05e74332b" title="cree un descripteur pour un sous-ensemble d&#39;un vecteur. renum fournit la structure et le descripteur ...">creer_md_vect_renum()</a> mais cree une numerotation par defaut.<br/>
Le tableau flags_renum doit contenir en entree une valeur POSITIVE OU NULLE pour les<br/>
valeurs a conserver et une valeur negative pour les autres.<br/>
En sortie, flags_renum contient l'indice de l'item dans le tableau reduit s'il est<br/>
conserve, sinon la valeur d'origine non modifiee.<br/>
Les items sont places dans l'ordre croissant de leur indice local sur dans le descripteur<br/>
d'origine. </p>

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00638">638</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="MD__Vector__tools_8cpp_source.html#l00593">creer_md_vect_renum()</a>, and <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>.</p>

<p>Referenced by <a class="el" href="Zone__Cl__VEF_8cpp_source.html#l00093">Zone_Cl_VEF::associer()</a>, <a class="el" href="Faces__builder_8cpp_source.html#l00751">Zone::init_faces_virt_bord()</a>, <a class="el" href="Solv__GCP_8cpp_source.html#l00124">Solv_GCP::prepare_data()</a>, and <a class="el" href="Zone__VEF_8cpp_source.html#l00118">Zone_VEF::reordonner()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">int</span> n = flags_renum.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keywordtype">int</span> count = 0;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
    {
      <span class="keywordtype">int</span> x = flags_renum[i];
      <span class="keywordflow">if</span> (x &gt;= 0)
        flags_renum[i] = count++;
    }
  <a class="code" href="classMD__Vector__tools.html#ae2cb70190653fe8f0263f5c05e74332b" title="cree un descripteur pour un sous-ensemble d&#39;un vecteur. renum fournit la structure et le descripteur ...">creer_md_vect_renum</a>(flags_renum, md_vect);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeac48ec589f525bafdfc83244a5d4dea"></a><!-- doxytag: member="MD_Vector_tools::creer_tableau_distribue" ref="aeac48ec589f525bafdfc83244a5d4dea" args="(const MD_Vector &amp;, Array_base &amp;, Array_base::Resize_Options opt=Array_base::COPY_INIT)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_Vector_tools::creer_tableau_distribue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArray__base.html">Array_base</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ff">Array_base::Resize_Options</a>&#160;</td>
          <td class="paramname"><em>opt</em> = <code>Array_base::COPY_INIT</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>transforme v en un tableau parallele ayant la structure md.<br/>
md doit est non nul !<br/>
Les dimension(i&gt;=1) du tableau v (si c'est un <a class="el" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> ou <a class="el" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>) sont conservees,<br/>
les dimension(0) et dimension_tot(0) sont modifiees en fonction du nombre d'items<br/>
specifies dans le <a class="el" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>.<br/>
La dimension initiale du vecteur doit etre soit 0, soit md.get_nb_items_reels(),<br/>
soit md.get_nb_items_tot(). Si besoin, la taille du tableau est modifiee et on<br/>
initialise le tableau selon opt.<br/>
ATTENTION, <a class="el" href="classMD__Vector__tools.html#a529704705758b2c8c9a688a3090011f6">echange_espace_virtuel()</a> n'est PAS appele.<br/>
Les cases virtuelles ne sont pas initialisees... </p>

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00109">109</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="MD__Vector_8h_source.html#l00063">MD_Vector::non_nul()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, and <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>.</p>

<p>Referenced by <a class="el" href="SETS_8cpp_source.html#l00496">SETS::assembler()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (!md.<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in MD_Vector_tools::creer_tableau_distribue(): MD_Vector is null&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classIntVect.html">IntVect</a>, v))
    {
      ::creer_tableau_distribue&lt;IntVect, IntTab&gt;(md, <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classIntVect.html">IntVect</a>, v), opt);
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDoubleVect.html">DoubleVect</a>, v))
    {
      ::creer_tableau_distribue&lt;DoubleVect, DoubleTab&gt;(md, <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDoubleVect.html">DoubleVect</a>, v), opt);
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in MD_Vector_tools::creer_tableau_distribue(const MD_Vector &amp; md, Array_base &amp; v):\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot; Invalid array type &quot;</span> &lt;&lt; v.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()
           &lt;&lt; <span class="stringliteral">&quot;\n Array must be a subtype of IntVect or DoubleVect&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a300c405bb5f57d2d7e4456ed317adb7c"></a><!-- doxytag: member="MD_Vector_tools::dump_vector_with_md" ref="a300c405bb5f57d2d7e4456ed317adb7c" args="(const DoubleVect &amp;, Sortie &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_Vector_tools::dump_vector_with_md </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSortie.html">Sortie</a> &amp;&#160;</td>
          <td class="paramname"><em>os</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>dumps vector v with its parallel descriptor to os.<br/>
os must be a file type with one file per process (no shared file). </p>

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00653">653</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="ArrOfDouble_8h_source.html#l00379">ArrOfDouble::addr()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="DoubleVect_8h_source.html#l00101">DoubleVect::get_md_vector()</a>, <a class="el" href="DoubleVect_8h_source.html#l00164">DoubleVect::line_size()</a>, <a class="el" href="Sortie_8cpp_source.html#l00176">Sortie::put()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="ArrOfDouble_8h_source.html#l00350">ArrOfDouble::size_array()</a>, <a class="el" href="EntreeSortie_8h.html#ae67efc620265981e3385b5f75837d3ef">space</a>, and <a class="el" href="MD__Vector_8h_source.html#l00067">MD_Vector::valeur()</a>.</p>

<p>Referenced by <a class="el" href="SolveurSys__base_8cpp_source.html#l00066">SolveurSys_base::save_matrice_secmem_conditionnel()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; md = v.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
  os &lt;&lt; md.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
  os &lt;&lt; md &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
  os &lt;&lt; <span class="stringliteral">&quot;line_size&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#ae67efc620265981e3385b5f75837d3ef">space</a> &lt;&lt; v.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() &lt;&lt; finl;

  os &lt;&lt; v.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() &lt;&lt; finl;
  os.<a class="code" href="classSortie.html#aa3f46aaccaff0f83c018784b50d8ea24" title="Methode de bas niveau pour ecrire un tableau d&#39;ints ou reels dans le stream. Dans l&#39;implementation de...">put</a>(v.<a class="code" href="classArrOfDouble.html#a95357a1390c11dbd481d385257f2e983" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>(), v.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(), v.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>());
  os &lt;&lt; finl;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a529704705758b2c8c9a688a3090011f6"></a><!-- doxytag: member="MD_Vector_tools::echange_espace_virtuel" ref="a529704705758b2c8c9a688a3090011f6" args="(IntVect &amp;, Operations_echange opt=ECHANGE_EV)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_Vector_tools::echange_espace_virtuel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7c">Operations_echange</a>&#160;</td>
          <td class="paramname"><em>opt</em> = <code>ECHANGE_EV</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00186">186</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="Statistiques_8h_source.html#l00219">Statistiques::begin_count()</a>, <a class="el" href="MD__Vector__tools_8cpp_source.html#l00160">echange_espace_virtuel1_()</a>, <a class="el" href="stat__counters_8cpp_source.html#l00048">echange_vect_counter_</a>, <a class="el" href="Statistiques_8h_source.html#l00237">Statistiques::end_count()</a>, <a class="el" href="IntVect_8h_source.html#l00087">IntVect::get_md_vector()</a>, <a class="el" href="MD__Vector_8h_source.html#l00063">MD_Vector::non_nul()</a>, and <a class="el" href="Statistiques_8h_source.html#l00190">statistiques()</a>.</p>

<p>Referenced by <a class="el" href="Zone__VEF__PreP1b_8cpp_source.html#l00131">Zone_VEF_PreP1b::discretiser_arete()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (v.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
    {
      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#ad1adaf02fb22ea330f54d28bd7db19d7">echange_vect_counter_</a>);
      <a class="code" href="MD__Vector__tools_8cpp.html#ae640b1087dd146877cc5fb22dd74829e">echange_espace_virtuel1_</a>(v.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>(), v, 0, opt);
      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#ad1adaf02fb22ea330f54d28bd7db19d7">echange_vect_counter_</a>);
    }
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>  <span class="keywordflow">else</span>
    {
<span class="comment">// Cerr &lt;&lt; &quot;Warning: A call to ::echange_espace_virtuel() is done on a non-distributed vector.&quot; &lt;&lt; finl;</span>
<span class="comment">// Process::exit();</span>
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="a9331c1098c8f7285d9fa75a77f4c41ba"></a><!-- doxytag: member="MD_Vector_tools::echange_espace_virtuel" ref="a9331c1098c8f7285d9fa75a77f4c41ba" args="(DoubleVect &amp;, Operations_echange opt=ECHANGE_EV)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_Vector_tools::echange_espace_virtuel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMD__Vector__tools.html#ac0611ff35861322f7e1fe9b98a132b7c">Operations_echange</a>&#160;</td>
          <td class="paramname"><em>opt</em> = <code>ECHANGE_EV</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00203">203</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="Statistiques_8h_source.html#l00219">Statistiques::begin_count()</a>, <a class="el" href="MD__Vector__tools_8cpp_source.html#l00160">echange_espace_virtuel1_()</a>, <a class="el" href="stat__counters_8cpp_source.html#l00048">echange_vect_counter_</a>, <a class="el" href="Statistiques_8h_source.html#l00237">Statistiques::end_count()</a>, <a class="el" href="DoubleVect_8h_source.html#l00101">DoubleVect::get_md_vector()</a>, <a class="el" href="MD__Vector_8h_source.html#l00063">MD_Vector::non_nul()</a>, and <a class="el" href="Statistiques_8h_source.html#l00190">statistiques()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (v.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
    {
      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#ad1adaf02fb22ea330f54d28bd7db19d7">echange_vect_counter_</a>);
      <a class="code" href="MD__Vector__tools_8cpp.html#ae640b1087dd146877cc5fb22dd74829e">echange_espace_virtuel1_</a>(v.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>(), v, 1 <span class="comment">/* double */</span>, opt);
      <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#ad1adaf02fb22ea330f54d28bd7db19d7">echange_vect_counter_</a>);
    }
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>  <span class="keywordflow">else</span>
    {
<span class="comment">// Cerr &lt;&lt; &quot;Warning: A call to ::echange_espace_virtuel() is done on a non-distributed vector.&quot; &lt;&lt; finl;</span>
<span class="comment">// Process::exit();</span>
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div>
</div>
</div>
<a class="anchor" id="abbbf6fa01a47a78772f8a4458b7ef45d"></a><!-- doxytag: member="MD_Vector_tools::extend" ref="abbbf6fa01a47a78772f8a4458b7ef45d" args="(const MD_Vector &amp;src, extra_item_t &amp;items)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMD__Vector.html">MD_Vector</a> MD_Vector_tools::extend </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="MD__Vector__tools_8h.html#a25b6cd4711cb79584b6c83b3de18f9e0">extra_item_t</a> &amp;&#160;</td>
          <td class="paramname"><em>items</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00702">702</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="MD__Vector__std_8h_source.html#l00076">MD_Vector_std::blocs_to_recv_</a>, <a class="el" href="MD__Vector_8cpp_source.html#l00031">MD_Vector::copy()</a>, <a class="el" href="communications_8cpp_source.html#l00452">envoyer_all_to_all()</a>, <a class="el" href="Static__Int__Lists_8h_source.html#l00106">Static_Int_Lists::get_list_size()</a>, <a class="el" href="MD__Vector__base2_8h_source.html#l00032">MD_Vector_base2::get_nb_items_reels()</a>, <a class="el" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">MD_Vector_base::get_nb_items_tot()</a>, <a class="el" href="MD__Vector__std_8h_source.html#l00071">MD_Vector_std::items_to_recv_</a>, <a class="el" href="MD__Vector__std_8h_source.html#l00065">MD_Vector_std::items_to_send_</a>, <a class="el" href="Process_8cpp_source.html#l00156">Process::mp_max()</a>, <a class="el" href="Process_8cpp_source.html#l00109">Process::nproc()</a>, <a class="el" href="MD__Vector__std_8h_source.html#l00060">MD_Vector_std::pe_voisins_</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, <a class="el" href="MD__Vector_8h_source.html#l00067">MD_Vector::valeur()</a>, and <a class="el" href="Vect_8h_source.html#l00026">VECT</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a1e9d9f9899b71927cfafae14c7bd048d" title="Calcule le max de x sur tous les processeurs du groupe courant. Remarques : Cette methode doit etre a...">Process::mp_max</a>(items.size()) == 0) <span class="keywordflow">return</span> src; <span class="comment">//rien a faire</span>
  <span class="comment">/* remplissage de : recep[p] -&gt; liste des items qu&#39;on veut recevoir du processeur p</span>
<span class="comment">                      items[{p, i}] -&gt; ou on va placer chaque item dans le MD_Vector elargi */</span>
  <span class="keywordtype">int</span> i, j, p, nb_items_tot = src.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">get_nb_items_tot</a>(), idx = nb_items_tot;
  <span class="keyword">const</span> <a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a> *mds = NULL;
  <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, src.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>())) mds = &amp;<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, src.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>());
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, src.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>())) mds = &amp;<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, src.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>()).global_md_;

  <span class="comment">/* recv[p] : items qu&#39;on veut recevoir du processeur p : taille nrecv[p]. On en profite pour les numeroter dans items */</span>
  <a class="code" href="Vect_8h.html#adc7c7b04809c9aec2cb897cd2ef06378">VECT</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>) recv(<a class="code" href="classProcess.html" title="Classe de base de TRUST (notamment Objet_U). Elle fournit quelques services de base accessibles de pa...">Process</a>::nproc());
  for (p = 0; p &lt; <a class="code" href="classProcess.html" title="Classe de base de TRUST (notamment Objet_U). Elle fournit quelques services de base accessibles de pa...">Process</a>::nproc(); p++) recv[p].set_smart_resize(1);
  std::vector&lt;<span class="keywordtype">int</span>&gt; nrecv(<a class="code" href="classProcess.html" title="Classe de base de TRUST (notamment Objet_U). Elle fournit quelques services de base accessibles de pa...">Process</a>::nproc());
  for (auto &amp;kv : items) recv[kv.first[0]].append_array(kv.first[1]), kv.second = idx, nrecv[kv.first[0]]++, idx++;

  <span class="comment">/* send[p] : items qu&#39;on doit envoyer au processeur p */</span>
  <a class="code" href="Vect_8h.html#adc7c7b04809c9aec2cb897cd2ef06378">VECT</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>) send(<a class="code" href="classProcess.html" title="Classe de base de TRUST (notamment Objet_U). Elle fournit quelques services de base accessibles de pa...">Process</a>::nproc());
  <a class="code" href="communications_8cpp.html#a5ceda011ec527d63b691f62cd2fb61c8">envoyer_all_to_all</a>(recv, send);

  std::map&lt;<span class="keywordtype">int</span>, std::array&lt;std::vector&lt;<span class="keywordtype">int</span>&gt;, 3&gt;&gt; map; <span class="comment">//map[p] = { items a envoyer a p, items a recevoir de p, blocs a recevoir de p }</span>

  for (i = 0; i &lt; mds-&gt;pe_voisins_.size_array(); i++)
    {
      p = mds-&gt;<a class="code" href="classMD__Vector__std.html#a68854e710075fdc8c2f2ce28fbbb9ecc">pe_voisins_</a>(i);
      <span class="keywordflow">for</span> (j = 0; j &lt; mds-&gt;<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(i); j++) map[p][0].push_back(mds-&gt;<a class="code" href="classMD__Vector__std.html#a3ee9294b8d36492e8bdabbc9a97db451">items_to_send_</a>(i, j));
      <span class="keywordflow">for</span> (j = 0; j &lt; mds-&gt;<a class="code" href="classMD__Vector__std.html#a8d6c4c5d6da6fe56e8330253137d412f">items_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(i); j++) map[p][1].push_back(mds-&gt;<a class="code" href="classMD__Vector__std.html#a8d6c4c5d6da6fe56e8330253137d412f">items_to_recv_</a>(i, j));
      <span class="keywordflow">for</span> (j = 0; j &lt; mds-&gt;<a class="code" href="classMD__Vector__std.html#ae266bd552dcb9f817c791a1c7342a6b0">blocs_to_recv_</a>.<a class="code" href="classStatic__Int__Lists.html#adbf6903737c3c30bf87e05b29f5a5b56" title="renvoie le nombre d&#39;elements de la liste i">get_list_size</a>(i); j++) map[p][2].push_back(mds-&gt;<a class="code" href="classMD__Vector__std.html#ae266bd552dcb9f817c791a1c7342a6b0">blocs_to_recv_</a>(i, j));
    }

  <span class="comment">/* ajout de ce qu&#39;on doit envoyer/recevoir en plus */</span>
  <span class="keywordflow">for</span> (p = 0; p &lt; <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(); p++) <span class="keywordflow">for</span> (i = 0; i &lt; send[p].size_array(); i++) map[p][0].push_back(send[p][i]);
  <span class="keywordflow">for</span> (p = 0, idx = nb_items_tot; p &lt; <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(); idx += nrecv[p], p++)
    <span class="keywordflow">if</span> (nrecv[p]) map[p][2].insert(map[p][2].end(), { idx, idx + nrecv[p] });

  <span class="comment">/* reconstruction de tableaux pour MD_Vector_std */</span>
  <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> pe_voisins(map.size());
  <a class="code" href="Vect_8h.html#adc7c7b04809c9aec2cb897cd2ef06378">VECT</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>) items_to_send(map.size()), items_to_recv(map.size()), blocs_to_recv(map.size());
  for (p = 0, i = 0; p &lt; <a class="code" href="classProcess.html" title="Classe de base de TRUST (notamment Objet_U). Elle fournit quelques services de base accessibles de pa...">Process</a>::nproc(); nb_items_tot += nrecv[p],  p++) if (map.count(p))
      {
        pe_voisins(i) = p;
        items_to_send[i].resize(map[p][0].size()), std::copy(map[p][0].begin(), map[p][0].end(), items_to_send[i].addr());
        items_to_recv[i].resize(map[p][1].size()), std::copy(map[p][1].begin(), map[p][1].end(), items_to_recv[i].addr());
        blocs_to_recv[i].resize(map[p][2].size()), std::copy(map[p][2].begin(), map[p][2].end(), blocs_to_recv[i].addr());
        i++;
      }

  <span class="comment">/* c&#39;est parti */</span>
  <a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a> mdd(nb_items_tot, mds-&gt;<a class="code" href="classMD__Vector__base2.html#a6735838767f62a3def156bf93d8a5224">get_nb_items_reels</a>(), pe_voisins, items_to_send, items_to_recv, blocs_to_recv);
  <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a> res;
  res.<a class="code" href="classMD__Vector.html#a063644dd8ca62e707a2d059eedeb58a7" title="construction d&#39;un objet MD_Vector par copie d&#39;un objet existant. C&#39;est la methode recommandee pour cr...">copy</a>(mdd);
  <span class="keywordflow">return</span> res;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad099d2407b0016920bd8c667a56fddd8"></a><!-- doxytag: member="MD_Vector_tools::get_sequential_items_flags" ref="ad099d2407b0016920bd8c667a56fddd8" args="(const MD_Vector &amp;, ArrOfBit &amp;flags, int line_size=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MD_Vector_tools::get_sequential_items_flags </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfBit.html">ArrOfBit</a> &amp;&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line_size</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>&lt; valeur par defaut la plus courante (0 est le cas particulier), voir setflag(ArrOfBit) </p>
</p>

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00275">275</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">MD_Vector_base::get_nb_items_tot()</a>, <a class="el" href="MD__Vector__tools_8cpp_source.html#l00240">get_seq_flags()</a>, <a class="el" href="ArrOfBit_8cpp_source.html#l00070">ArrOfBit::resize_array()</a>, <a class="el" href="Nom_8cpp_source.html#l00040">sz</a>, and <a class="el" href="MD__Vector_8h_source.html#l00067">MD_Vector::valeur()</a>.</p>

<p>Referenced by <a class="el" href="SETS_8cpp_source.html#l00496">SETS::assembler()</a>, <a class="el" href="Traitement__particulier__NS__THI_8cpp_source.html#l00190">Traitement_particulier_NS_THI::calcul_nb_som_dir()</a>, <a class="el" href="Zone__VEF__PreP1b_8cpp_source.html#l00328">Zone_VEF_PreP1b::construire_ok_arete()</a>, <a class="el" href="EcritureLectureSpecial_8cpp_source.html#l00222">ecriture_special_part2()</a>, <a class="el" href="EcritureLectureSpecial_8cpp_source.html#l00328">lire_special()</a>, and <a class="el" href="SSOR_8cpp_source.html#l00068">SSOR::prepare_()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; mdv = md.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = mdv.<a class="code" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">get_nb_items_tot</a>() * line_size;
<span class="comment">// setbit et clearbit font |= et &amp;=, donc valgrind ne voit pas qu&#39;on initialise tout</span>
<span class="comment">// le tableau. On initialise tout explicitement:</span>
  flags.<a class="code" href="classArrOfBit.html#a8d749d7e96a06c121a8b19a334ae483b" title="Change la taille du tableau et copie les donnees existantes. Si la taille est plus petite...">resize_array</a>(sz);
  flags = 1; <span class="comment">//!&lt; valeur par defaut la plus courante (0 est le cas particulier), voir setflag(ArrOfBit)</span>
<span class="comment"></span>  <span class="keywordflow">return</span> <a class="code" href="MD__Vector__tools_8cpp.html#aadc5886b4f2566e79c152a56c85b8033">get_seq_flags</a>(mdv, flags, 0, line_size);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5e4b6886fe352b47ebc795146bc9e370"></a><!-- doxytag: member="MD_Vector_tools::get_sequential_items_flags" ref="a5e4b6886fe352b47ebc795146bc9e370" args="(const MD_Vector &amp;, ArrOfInt &amp;flags, int line_size=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MD_Vector_tools::get_sequential_items_flags </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classMD__Vector.html">MD_Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>md</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line_size</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00286">286</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">MD_Vector_base::get_nb_items_tot()</a>, <a class="el" href="MD__Vector__tools_8cpp_source.html#l00240">get_seq_flags()</a>, <a class="el" href="Array__base_8h_source.html#l00038">Array_base::NOCOPY_NOINIT</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, <a class="el" href="Nom_8cpp_source.html#l00040">sz</a>, and <a class="el" href="MD__Vector_8h_source.html#l00067">MD_Vector::valeur()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; mdv = md.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = mdv.<a class="code" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">get_nb_items_tot</a>() * line_size;
  flags.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(sz, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
  <span class="keywordflow">return</span> <a class="code" href="MD__Vector__tools_8cpp.html#aadc5886b4f2566e79c152a56c85b8033">get_seq_flags</a>(mdv, flags, 0, line_size);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab7324a93364b401d8c542f399d24a7c5"></a><!-- doxytag: member="MD_Vector_tools::restore_vector_with_md" ref="ab7324a93364b401d8c542f399d24a7c5" args="(DoubleVect &amp;, Entree &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MD_Vector_tools::restore_vector_with_md </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classEntree.html">Entree</a> &amp;&#160;</td>
          <td class="paramname"><em>is</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>restores a vector saved by dump_vector_with_md.<br/>
The code must run with the same number of processors.<br/>
"v" will have a newly created copy of the descriptor (not equal to any<br/>
other descriptor previously loaded). If "identical" descriptors are needed<br/>
for several vectors, you might want to call set_md_vector() afterwards to<br/>
attach another descriptor. See save_matrice_conditionnel() </p>

<p>Definition at line <a class="el" href="MD__Vector__tools_8cpp_source.html#l00671">671</a> of file <a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a>.</p>

<p>References <a class="el" href="ArrOfDouble_8h_source.html#l00379">ArrOfDouble::addr()</a>, <a class="el" href="MD__Vector_8cpp_source.html#l00031">MD_Vector::copy()</a>, <a class="el" href="Deriv_8h_source.html#l00071">DERIV</a>, <a class="el" href="Entree_8cpp_source.html#l00302">Entree::get()</a>, <a class="el" href="Array__base_8h_source.html#l00038">Array_base::NOCOPY_NOINIT</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00133">DoubleVect::ref()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00111">DoubleVect::reset()</a>, <a class="el" href="DoubleTab_8cpp_source.html#l00335">DoubleTab::resize()</a>, and <a class="el" href="DoubleTab_8cpp_source.html#l00520">DoubleTab::set_md_vector()</a>.</p>

<p>Referenced by <a class="el" href="Solv__Optimal_8cpp_source.html#l00173">Test_solveur::interpreter()</a>.</p>
<div class="fragment"><pre class="fragment">{

  v.<a class="code" href="classDoubleVect.html#a990500e5bf63a8ca55fd833d111e135c" title="met l&#39;objet dans l&#39;etat obtenu par le constructeur par defaut. (voir ArrOfDouble::reset())">reset</a>();
  <a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>) md_ptr;
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> md_type;
  is &gt;&gt; md_type;
  md_ptr.typer(md_type);
  is &gt;&gt; md_ptr.<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>();

<span class="comment">// Creation du MD_Vector attache au tableau</span>
  <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a> md;
  md.copy(md_ptr.valeur());

  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> unused;
  <span class="keywordtype">int</span> line_size;
  is &gt;&gt; unused &gt;&gt; line_size;

<span class="comment">// Astuce pour restaurer le line_size:</span>
  <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> toto;
  toto.resize(md_ptr.valeur().get_nb_items_tot(), line_size, <a class="code" href="classArray__base.html" title=": classe vide servant de base a tous les tableaux. (permet de passer un type generique quel que soit ...">Array_base</a>::NOCOPY_NOINIT);
  <span class="keywordtype">int</span> size_tot;
  is &gt;&gt; size_tot;
  is.get(toto.addr(), size_tot);
  toto.set_md_vector(md);

<span class="comment">// Attache v a toto et oublie toto... line_size est transfere sur v</span>
  v.reset();
  v.ref(toto);
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/Kernel/Math/<a class="el" href="MD__Vector__tools_8h_source.html">MD_Vector_tools.h</a></li>
<li>src/Kernel/Math/<a class="el" href="MD__Vector__tools_8cpp_source.html">MD_Vector_tools.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:37:04 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
