<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: Convection_Diffusion_Fluide_Dilatable_Proto Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Convection_Diffusion_Fluide_Dilatable_Proto Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Convection_Diffusion_Fluide_Dilatable_Proto" -->
<p><code>#include &lt;<a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8h_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Convection_Diffusion_Fluide_Dilatable_Proto:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classConvection__Diffusion__Fluide__Dilatable__Proto.png" usemap="#Convection_Diffusion_Fluide_Dilatable_Proto_map" alt=""/>
  <map id="Convection_Diffusion_Fluide_Dilatable_Proto_map" name="Convection_Diffusion_Fluide_Dilatable_Proto_map">
<area href="classConvection__Diffusion__Fluide__Dilatable__base.html" title="classe Convection_Diffusion_Fluide_Dilatable_base pour un fluide dilatable" alt="Convection_Diffusion_Fluide_Dilatable_base" shape="rect" coords="572,56,889,80"/>
<area href="classConvection__Diffusion__Chaleur__Fluide__Dilatable__base.html" title="classe Convection_Diffusion_Chaleur_Fluide_Dilatable_base Cas particulier de Convection_Diffusion_std..." alt="Convection_Diffusion_Chaleur_Fluide_Dilatable_base" shape="rect" coords="163,112,480,136"/>
<area href="classConvection__Diffusion__Espece__Fluide__Dilatable__base.html" title="classe Convection_Diffusion_Espece_Fluide_Dilatable_base Cas particulier de Convection_Diffusion_std ..." alt="Convection_Diffusion_Espece_Fluide_Dilatable_base" shape="rect" coords="981,112,1298,136"/>
<area href="classConvection__Diffusion__Chaleur__QC.html" title="classe Convection_Diffusion_Chaleur_QC Cas particulier de Convection_Diffusion_Chaleur_Fluide_Dilatab..." alt="Convection_Diffusion_Chaleur_QC" shape="rect" coords="0,168,317,192"/>
<area href="classConvection__Diffusion__Chaleur__WC.html" title="classe Convection_Diffusion_Chaleur_WC Cas particulier de Convection_Diffusion_Chaleur_Fluide_Dilatab..." alt="Convection_Diffusion_Chaleur_WC" shape="rect" coords="327,168,644,192"/>
<area href="classConvection__Diffusion__Espece__Binaire__base.html" title="classe Convection_Diffusion_Espece_Binaire_base Cas particulier de Convection_Diffusion_Espece_Fluide..." alt="Convection_Diffusion_Espece_Binaire_base" shape="rect" coords="654,168,971,192"/>
<area href="classConvection__Diffusion__Espece__Multi__base.html" title="classe Convection_Diffusion_Espece_Multi_base Cas particulier de Convection_Diffusion_Espece_Fluide_D..." alt="Convection_Diffusion_Espece_Multi_base" shape="rect" coords="1308,168,1625,192"/>
<area href="classConvection__Diffusion__Espece__Binaire__QC.html" title="classe Convection_Diffusion_Espece_Binaire_QC Cas particulier de Convection_Diffusion_Espece_Binaire_..." alt="Convection_Diffusion_Espece_Binaire_QC" shape="rect" coords="490,224,807,248"/>
<area href="classConvection__Diffusion__Espece__Binaire__WC.html" title="classe Convection_Diffusion_Espece_Binaire_WC Cas particulier de Convection_Diffusion_Espece_Binaire_..." alt="Convection_Diffusion_Espece_Binaire_WC" shape="rect" coords="817,224,1134,248"/>
<area href="classConvection__Diffusion__Espece__Multi__QC.html" title="classe Convection_Diffusion_Espece_Multi_QC Cas particulier de Convection_Diffusion_Espece_Multi_base..." alt="Convection_Diffusion_Espece_Multi_QC" shape="rect" coords="1144,224,1461,248"/>
<area href="classConvection__Diffusion__Espece__Multi__WC.html" title="classe Convection_Diffusion_Espece_Multi_WC Cas particulier de Convection_Diffusion_Espece_Multi_base..." alt="Convection_Diffusion_Espece_Multi_WC" shape="rect" coords="1471,224,1788,248"/>
</map>
 </div></div>

<p><a href="classConvection__Diffusion__Fluide__Dilatable__Proto-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a1a77cd559f9339f8f26a4f32b768ac5c">~Convection_Diffusion_Fluide_Dilatable_Proto</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#acb0976593376c9f67b7a9fa2b837e7c2">Sauvegarder_WC</a> (<a class="el" href="classSortie.html">Sortie</a> &amp;os, const <a class="el" href="classConvection__Diffusion__std.html">Convection_Diffusion_std</a> &amp;eq, const <a class="el" href="classFluide__Dilatable__base.html">Fluide_Dilatable_base</a> &amp;fld)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a7d940f524683ea3868619bca2209710d">Reprendre_WC</a> (<a class="el" href="classEntree.html">Entree</a> &amp;is, double temps, <a class="el" href="classConvection__Diffusion__std.html">Convection_Diffusion_std</a> &amp;eq, <a class="el" href="classFluide__Dilatable__base.html">Fluide_Dilatable_base</a> &amp;fld, <a class="el" href="classChamp__Inc.html">Champ_Inc</a> &amp;inco, <a class="el" href="classProbleme__base.html">Probleme_base</a> &amp;pb)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a8c4d899cf6e1cc9b3e876d759a423ad2">calculer_div_rho_u_impl</a> (<a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;res, const <a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html">Convection_Diffusion_Fluide_Dilatable_base</a> &amp;eqn) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a6726448816aaa2898df58d670a1a9704">assembler_impl</a> (<a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html">Convection_Diffusion_Fluide_Dilatable_base</a> &amp;eqn, <a class="el" href="classMatrice__Morse.html">Matrice_Morse</a> &amp;mat_morse, const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;present, <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;secmem)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a2f09516e23af998bef35700d625abb50">derivee_en_temps_inco_sans_solveur_masse_impl</a> (<a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html">Convection_Diffusion_Fluide_Dilatable_base</a> &amp;eqn, <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;derivee, const bool is_expl)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Renvoie la derivee en temps de l'inconnue de l'equation.<br/>
Le calcul est le suivant:<br/>
d(inconnue)/dt = M^{-1} * (sources - somme(Op_{i}(inconnue))) / rho.  <a href="#a2f09516e23af998bef35700d625abb50"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#ac654cf15f0945a632fdca7d6b972c1c1">calculer_div_u_ou_div_rhou</a> (<a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;res) const =0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a94bcbe88e748606055e07a229ddffa62">is_thermal</a> ()=0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a1a2d6dc69952d47ff501e3235946dfc2">is_generic</a> ()=0</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8h_source.html#l00036">36</a> of file <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8h_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1a77cd559f9339f8f26a4f32b768ac5c"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::~Convection_Diffusion_Fluide_Dilatable_Proto" ref="a1a77cd559f9339f8f26a4f32b768ac5c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual Convection_Diffusion_Fluide_Dilatable_Proto::~Convection_Diffusion_Fluide_Dilatable_Proto </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8h_source.html#l00047">47</a> of file <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8h_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.h</a>.</p>
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6726448816aaa2898df58d670a1a9704"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::assembler_impl" ref="a6726448816aaa2898df58d670a1a9704" args="(Convection_Diffusion_Fluide_Dilatable_base &amp;eqn, Matrice_Morse &amp;mat_morse, const DoubleTab &amp;present, DoubleTab &amp;secmem)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Convection_Diffusion_Fluide_Dilatable_Proto::assembler_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html">Convection_Diffusion_Fluide_Dilatable_base</a> &amp;&#160;</td>
          <td class="paramname"><em>eqn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMatrice__Morse.html">Matrice_Morse</a> &amp;&#160;</td>
          <td class="paramname"><em>mat_morse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>present</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>secmem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html#l00203">203</a> of file <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.cpp</a>.</p>

<p>References <a class="el" href="Sources_8cpp_source.html#l00132">Sources::ajouter()</a>, <a class="el" href="Matrice__Base_8h_source.html#l00230">Matrice_Base::ajouter_multvect()</a>, <a class="el" href="Solveur__Masse_8h_source.html#l00087">Solveur_Masse::appliquer()</a>, <a class="el" href="Milieu__base_8cpp_source.html#l00677">Milieu_base::capacite_calorifique()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Champ__P1iP1B__implementation_8cpp_source.html#l00331">coeff</a>, <a class="el" href="Sources_8cpp_source.html#l00307">Sources::contribuer_a_avec()</a>, <a class="el" href="Operateur__base_8cpp_source.html#l00336">Operateur_base::contribuer_a_avec()</a>, <a class="el" href="Operateur__base_8cpp_source.html#l00369">Operateur_base::contribuer_au_second_membre()</a>, <a class="el" href="Double_8h_source.html#l00255">dabs()</a>, <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Convection__Diffusion__Fluide__Dilatable__base_8cpp_source.html#l00071">Convection_Diffusion_Fluide_Dilatable_base::fluide()</a>, <a class="el" href="Equation__base_8cpp_source.html#l01441">Equation_base::get_champ()</a>, <a class="el" href="Matrice__Morse_8h_source.html#l00129">Matrice_Morse::get_set_coeff()</a>, <a class="el" href="Matrice__Morse_8h_source.html#l00134">Matrice_Morse::get_tab1()</a>, <a class="el" href="ArrOfDouble_8cpp_source.html#l00763">imax_array()</a>, <a class="el" href="ArrOfDouble_8cpp_source.html#l00735">imin_array()</a>, <a class="el" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">Operateur::l_op_base()</a>, <a class="el" href="Milieu__base_8cpp_source.html#l00560">Milieu_base::masse_volumique()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l02277">mp_max_abs_vect()</a>, <a class="el" href="Convection__Diffusion__std_8cpp_source.html#l00140">Convection_Diffusion_std::operateur()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="Equation__base_8cpp_source.html#l01120">Equation_base::schema_temps()</a>, <a class="el" href="DoubleVect_8h_source.html#l00153">DoubleVect::size()</a>, <a class="el" href="Equation__base_8h_source.html#l00432">Equation_base::solv_masse()</a>, <a class="el" href="Equation__base_8cpp_source.html#l00578">Equation_base::sources()</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, <a class="el" href="Schema__Temps__base_8h_source.html#l00676">Schema_Temps_base::temps_courant()</a>, <a class="el" href="Fluide__Dilatable__base_8h_source.html#l00087">Fluide_Dilatable_base::type_fluide()</a>, <a class="el" href="Fluide__Dilatable__base_8cpp_source.html#l00261">Fluide_Dilatable_base::update_rho_cp()</a>, <a class="el" href="Champ__Don_8h_source.html#l00030">Deriv_Champ_Don_base::valeur()</a>, <a class="el" href="Champ__Don_8h_source.html#l00081">Champ_Don::valeurs()</a>, and <a class="el" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">Champ_Proto::valeurs()</a>.</p>

<p>Referenced by <a class="el" href="Convection__Diffusion__Espece__Multi__WC_8cpp_source.html#l00084">Convection_Diffusion_Espece_Multi_WC::assembler()</a>, <a class="el" href="Convection__Diffusion__Espece__Binaire__base_8cpp_source.html#l00112">Convection_Diffusion_Espece_Binaire_base::assembler()</a>, and <a class="el" href="Convection__Diffusion__Chaleur__Fluide__Dilatable__base_8cpp_source.html#l00081">Convection_Diffusion_Chaleur_Fluide_Dilatable_base::assembler()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/*</span>
<span class="comment">   * ATEENTION : THIS IS A GENERIC METHOD THAT IS USED TO SOLVE IMPLICITLY A THERMAL OR SPECIES</span>
<span class="comment">   *  CONV/DIFF EQUATION. SO THE VARIABLE CAN EITHER BE THE TEMPERATURE T OR THE MASS FRACTION Y.</span>
<span class="comment">   *</span>
<span class="comment">   * See the previous method derivee_en_temps_inco_sans_solveur_masse_impl for more description</span>
<span class="comment">   * of the treated equations.</span>
<span class="comment">   */</span>

<span class="comment">// Elie Saikali</span>
<span class="comment">// Je garde ce test pour debug ... TODO : a voir si on peut virer tout Ã§a...</span>
  <span class="keywordtype">int</span> test_op=0;
  {
    <span class="keywordtype">char</span>* theValue = getenv(<span class="stringliteral">&quot;TRUST_TEST_OPERATEUR_IMPLICITE&quot;</span>);
    <span class="keywordflow">if</span> (theValue != NULL) test_op=2;
  }
  {
    <span class="keywordtype">char</span>* theValue = getenv(<span class="stringliteral">&quot;TRUST_TEST_OPERATEUR_IMPLICITE_BLOQUANT&quot;</span>);
    <span class="keywordflow">if</span> (theValue != NULL) test_op=1;
  }

  <a class="code" href="classFluide__Dilatable__base.html" title="classe Fluide_Dilatable_base Cette classe represente un d&#39;un fluide dilatable, heritant de fluide bas...">Fluide_Dilatable_base</a>&amp; fluide_dil = eqn.<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__base.html#adc8fb881a02b677e276fa23989fbd9ce">fluide</a>();
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_rho = fluide_dil.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> n = tab_rho.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);

<span class="comment">// ajout diffusion (avec rho, D et Y / ou lambda et T)</span>
  eqn.<a class="code" href="classConvection__Diffusion__std.html#a4bb82d17dd39ba9d8531764b2800a8bd" title="Renvoie l&#39;operateur specifie par son index: renvoie terme_diffusif si i = 0 renvoie terme_convectif s...">operateur</a>(0).<a class="code" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">l_op_base</a>().<a class="code" href="classOperateur__base.html#a903e728aad8e2d490580bf264319d65f" title="NE FAIT RIEN A surcharger dans les classes derivees.">contribuer_a_avec</a>(inco, matrice );

<span class="comment">// Add source term (if any)</span>
  eqn.<a class="code" href="classEquation__base.html#a3c8ac50e3e7b6ed29024a43e828a5396" title="Renvoie les termes sources asssocies a l&#39;equation.">sources</a>().<a class="code" href="classSources.html#aa91bceeb92650bc8b60a94f193a9d689" title="contribution a la matrice implicite des termes sources par defaut pas de contribution">contribuer_a_avec</a>(inco,matrice);

  <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; tab1= matrice.get_tab1();
  <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="Champ__P1iP1B__implementation_8cpp.html#aa8c8f49390c3cf7c702d71a71bc977e3">coeff</a>=matrice.get_set_coeff();
  <a class="code" href="classDoubleVect.html">DoubleVect</a> coeff_diffusif(coeff);

<span class="comment">// on calcule les coefficients de l&#39;op de convection on obtient les coeff de div (rho*u*Y)</span>
<span class="comment">// ou div(rho*u*T). dans le cas thermique, il faudrait multiplier par cp puis divisier par rho cp</span>
<span class="comment">// on le fera d&#39;un coup...</span>
  coeff=0.;
  eqn.<a class="code" href="classConvection__Diffusion__std.html#a4bb82d17dd39ba9d8531764b2800a8bd" title="Renvoie l&#39;operateur specifie par son index: renvoie terme_diffusif si i = 0 renvoie terme_convectif s...">operateur</a>(1).<a class="code" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">l_op_base</a>().<a class="code" href="classOperateur__base.html#a903e728aad8e2d490580bf264319d65f" title="NE FAIT RIEN A surcharger dans les classes derivees.">contribuer_a_avec</a>(inco, matrice );

<span class="comment">// on calcule div(rho * u)</span>
  <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> derivee2(resu);
  <a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#ac654cf15f0945a632fdca7d6b972c1c1">calculer_div_u_ou_div_rhou</a>(derivee2);

  <span class="keywordflow">if</span> (!<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a94bcbe88e748606055e07a229ddffa62">is_thermal</a>()) <span class="comment">//espece</span>
    {
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> som=0 ; som&lt;n ; som++)
        {
          <span class="keywordtype">double</span> inv_rho = 1. / tab_rho(som);
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=tab1(som)-1; k&lt;tab1(som+1)-1; k++) <a class="code" href="Champ__P1iP1B__implementation_8cpp.html#aa8c8f49390c3cf7c702d71a71bc977e3">coeff</a>(k)= (<a class="code" href="Champ__P1iP1B__implementation_8cpp.html#aa8c8f49390c3cf7c702d71a71bc977e3">coeff</a>(k)*inv_rho+coeff_diffusif(k)*inv_rho);

          matrice(som,som)+=derivee2(som)*inv_rho;
        }
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a94bcbe88e748606055e07a229ddffa62">is_thermal</a>() &amp;&amp; fluide_dil.<a class="code" href="classFluide__Dilatable__base.html#af310e9aeafbd35af667d91bb88714537">type_fluide</a>()==<span class="stringliteral">&quot;Gaz_Parfait&quot;</span>)
    {
      fluide_dil.<a class="code" href="classFluide__Dilatable__base.html#a169d6724b98e444ba9a672a78e83490f">update_rho_cp</a>(eqn.<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>());
      <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; rhoCp = eqn.<a class="code" href="classEquation__base.html#ad6bcab0bb6d83b1b563a7aa30f0df721">get_champ</a>(<span class="stringliteral">&quot;rho_cp_comme_T&quot;</span>).<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();

      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> som=0 ; som&lt;n ; som++)
        {
          <span class="keywordtype">double</span> inv_rho = 1. / tab_rho(som);
          <span class="keywordflow">if</span> (!<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a1a2d6dc69952d47ff501e3235946dfc2">is_generic</a>()) inv_rho = 1.;
          <span class="keywordtype">double</span> rapport = 1. / rhoCp(som);

<span class="comment">// il faut multiplier toute la ligne de la matrice par rapport</span>
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=tab1(som)-1; k&lt;tab1(som+1)-1; k++) <a class="code" href="Champ__P1iP1B__implementation_8cpp.html#aa8c8f49390c3cf7c702d71a71bc977e3">coeff</a>(k)= (<a class="code" href="Champ__P1iP1B__implementation_8cpp.html#aa8c8f49390c3cf7c702d71a71bc977e3">coeff</a>(k)*inv_rho+coeff_diffusif(k)*rapport);

<span class="comment">// ajout de Tdiv(rhou )/rho</span>
          matrice(som,som) += derivee2(som)*inv_rho;
        }
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The implicit algorithm is available only for perfect gas.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }

<span class="comment">// on a la matrice approchee on recalcule le residu;</span>
  resu=0;
  <a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a2f09516e23af998bef35700d625abb50" title="Renvoie la derivee en temps de l&#39;inconnue de l&#39;equation. Le calcul est le suivant: d(inconnue)/dt = M...">derivee_en_temps_inco_sans_solveur_masse_impl</a>(eqn,resu,<span class="keyword">false</span> <span class="comment">/* implicit */</span>);
  matrice.ajouter_multvect(inco,resu);

  <span class="keywordflow">if</span> (test_op)
    {
      <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> diff(resu), conv(resu);
      eqn.<a class="code" href="classConvection__Diffusion__std.html#a4bb82d17dd39ba9d8531764b2800a8bd" title="Renvoie l&#39;operateur specifie par son index: renvoie terme_diffusif si i = 0 renvoie terme_convectif s...">operateur</a>(0).<a class="code" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">l_op_base</a>().<a class="code" href="classOperateur__base.html#a1b64f0211a360c124a218be15c80d9c7" title="NE FAIT RIEN A surcharger dans les classes derivees.">contribuer_au_second_membre</a>(diff);
      eqn.<a class="code" href="classConvection__Diffusion__std.html#a4bb82d17dd39ba9d8531764b2800a8bd" title="Renvoie l&#39;operateur specifie par son index: renvoie terme_diffusif si i = 0 renvoie terme_convectif s...">operateur</a>(1).<a class="code" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">l_op_base</a>().<a class="code" href="classOperateur__base.html#a1b64f0211a360c124a218be15c80d9c7" title="NE FAIT RIEN A surcharger dans les classes derivees.">contribuer_au_second_membre</a>(conv);
      eqn.<a class="code" href="classEquation__base.html#a3c8ac50e3e7b6ed29024a43e828a5396" title="Renvoie les termes sources asssocies a l&#39;equation.">sources</a>().<a class="code" href="classSources.html#a6fc277f1920a71841cb041dc1b6ed771" title="Ajoute la contribution de toutes les sources de la liste au tableau passe en parametre, et renvoie ce tableau.">ajouter</a>(diff);
      <span class="keywordtype">double</span> Cp = -5.;
      <span class="keywordtype">int</span> is_cp_unif= <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide_dil.<a class="code" href="classMilieu__base.html#a174d49eab1db7dfce83578b227f4e702" title="Renvoie la capacite calorifique du milieu. (version const)">capacite_calorifique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>());
      <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_cp = fluide_dil.<a class="code" href="classMilieu__base.html#a174d49eab1db7dfce83578b227f4e702" title="Renvoie la capacite calorifique du milieu. (version const)">capacite_calorifique</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>();
      <span class="keywordflow">if</span> (is_cp_unif) Cp=tab_cp(0,0);

      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> som=0 ; som&lt;n ; som++)
        {
          <span class="keywordflow">if</span> (!is_cp_unif) Cp=tab_cp(som);
          <span class="keywordtype">double</span> inv_rho=1./tab_rho(som);
          <span class="keywordflow">if</span> (!<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a1a2d6dc69952d47ff501e3235946dfc2">is_generic</a>()) inv_rho=1;
          <span class="keywordtype">double</span> rapport=1./(tab_rho(som)*Cp);
          diff(som)=resu(som)-conv(som)*inv_rho-diff(som)*rapport;
        }
      eqn.<a class="code" href="classEquation__base.html#adfedf474c07a92f6b2261ca2f1cee80e" title="Renvoie le solveur de masse associe a l&#39;equation.">solv_masse</a>().<a class="code" href="classSolveur__Masse.html#af7afe8c2d4d5764f7428f2cd4ef43ddb" title="Appel a l&#39;objet sous-jacent. Resoud le systeme lineaire, dont la matrice est la matrice de masse...">appliquer</a>(diff);
      <span class="keywordtype">double</span> err=<a class="code" href="DoubleVect_8cpp.html#acb21ec8c0b3909c26b20e3f3455e0289">mp_max_abs_vect</a>(diff);
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; eqn.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt;<span class="stringliteral">&quot; : Erreur assemblage = &quot;</span> &lt;&lt; err &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;;

      <span class="keywordflow">if</span> (err &gt; 1.e-5)
        {
          <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; diff_=diff;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; size &quot;</span>&lt;&lt; diff_.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()&lt;&lt;finl;
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;diff_.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
            <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(diff_(i))&gt;1e-5) <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;i &lt;&lt; <span class="stringliteral">&quot; &quot;</span>&lt;&lt; diff_(i)&lt;&lt; <span class="stringliteral">&quot; &quot;</span>&lt;&lt;finl;

          <span class="keywordflow">if</span> (test_op==1)
            {
              <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; pb max case &quot;</span>&lt;&lt;<a class="code" href="ArrOfDouble_8cpp.html#afe9f20f22a4feecff7412bbcd71cafea" title="Retourne l&#39;indice du min ou -1 si le tableau est vide.">imin_array</a>(diff)&lt;&lt;<span class="stringliteral">&quot; ou &quot;</span> &lt;&lt;<a class="code" href="ArrOfDouble_8cpp.html#ace2773782c6cf82f52e226ca32314ae4" title="Retourne l&#39;indice du max ou -1 si le tableau est vide.">imax_array</a>(diff)&lt;&lt;finl;
              <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
            }
        }
    }
} <span class="comment">/* END assembler_impl */</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a8c4d899cf6e1cc9b3e876d759a423ad2"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::calculer_div_rho_u_impl" ref="a8c4d899cf6e1cc9b3e876d759a423ad2" args="(DoubleTab &amp;res, const Convection_Diffusion_Fluide_Dilatable_base &amp;eqn) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Convection_Diffusion_Fluide_Dilatable_Proto::calculer_div_rho_u_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html">Convection_Diffusion_Fluide_Dilatable_base</a> &amp;&#160;</td>
          <td class="paramname"><em>eqn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html#l00042">42</a> of file <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.cpp</a>.</p>

<p>References <a class="el" href="classOperateur.html#accdf61cf1e33fb42e9eb06f1c501422b">Operateur::ajouter()</a>, <a class="el" href="Convection__Diffusion__Fluide__Dilatable__base_8h_source.html#l00063">Convection_Diffusion_Fluide_Dilatable_base::inconnue()</a>, <a class="el" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">Operateur::l_op_base()</a>, <a class="el" href="Convection__Diffusion__std_8cpp_source.html#l00140">Convection_Diffusion_std::operateur()</a>, <a class="el" href="Cast_8h_source.html#l00062">ref_cast_non_const</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, <a class="el" href="Champ__Inc_8cpp_source.html#l00245">Champ_Inc::valeurs()</a>, <a class="el" href="Equation__base_8h_source.html#l00391">Equation_base::zone_Cl_dis()</a>, and <a class="el" href="Convection__Diffusion__Fluide__Dilatable__base_8h_source.html#l00065">Convection_Diffusion_Fluide_Dilatable_base::zone_cl_modif()</a>.</p>

<p>Referenced by <a class="el" href="Convection__Diffusion__Chaleur__WC_8cpp_source.html#l00091">Convection_Diffusion_Chaleur_WC::calculer_div_u_ou_div_rhou()</a>, <a class="el" href="Convection__Diffusion__Chaleur__QC_8cpp_source.html#l00118">Convection_Diffusion_Chaleur_QC::calculer_div_u_ou_div_rhou()</a>, and <a class="el" href="Convection__Diffusion__Espece__Fluide__Dilatable__base_8cpp_source.html#l00075">Convection_Diffusion_Espece_Fluide_Dilatable_base::calculer_div_u_ou_div_rhou()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classOperateur.html" title="classe Operateur Classe generique de la hierarchie des operateurs. Cette classe generique est particu...">Operateur</a>&amp; op_conv = eqn.<a class="code" href="classConvection__Diffusion__std.html#a4bb82d17dd39ba9d8531764b2800a8bd" title="Renvoie l&#39;operateur specifie par son index: renvoie terme_diffusif si i = 0 renvoie terme_convectif s...">operateur</a>(1);
<span class="comment">// No convective operator:</span>
  <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classOp__Conv__negligeable.html" title="Classe Op_Conv_negligeable Cette classe represente un opperateur de convection negligeable. Lorsqu&#39;un operateur de ce type est utilise dans une equation cela revient a negliger le terme de convection. Les methodes de modification et de participation a un calcul de l&#39;operateur sont en fait des appels aux meme methodes de Operateur_negligeable qui ne font rien.">Op_Conv_negligeable</a>,op_conv.<a class="code" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">l_op_base</a>()))
    {
      Div=0;
      <span class="keywordflow">return</span>;
    }

  <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> unite(eqn.<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__base.html#ad197c8dc5ae14b8f32d3bb50e201fada">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>());
  unite=1;
  <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classOperateur__base.html" title="classe Operateur_base Classe est la base de la hierarchie des objets representant un operateur utilis...">Operateur_base</a>,op_conv.<a class="code" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">l_op_base</a>()).associer_zone_cl_dis(eqn.<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__base.html#a96a8b426c7cdf33342129e13259841c6">zone_cl_modif</a>());

  op_conv.<a class="code" href="classOperateur.html#accdf61cf1e33fb42e9eb06f1c501422b">ajouter</a>(unite,Div);
  <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classOperateur__base.html" title="classe Operateur_base Classe est la base de la hierarchie des objets representant un operateur utilis...">Operateur_base</a>,op_conv.<a class="code" href="classOperateur.html#a1f3e24efd9b54d05821e731fe4bd6027">l_op_base</a>()).associer_zone_cl_dis(eqn.<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>());

}
</pre></div>
</div>
</div>
<a class="anchor" id="ac654cf15f0945a632fdca7d6b972c1c1"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::calculer_div_u_ou_div_rhou" ref="ac654cf15f0945a632fdca7d6b972c1c1" args="(DoubleTab &amp;res) const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Convection_Diffusion_Fluide_Dilatable_Proto::calculer_div_u_ou_div_rhou </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>res</em></td><td>)</td>
          <td> const<code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implemented in <a class="el" href="classConvection__Diffusion__Chaleur__Fluide__Dilatable__base.html#add5f2319a59429beba0a7603870d6d37">Convection_Diffusion_Chaleur_Fluide_Dilatable_base</a>, <a class="el" href="classConvection__Diffusion__Espece__Fluide__Dilatable__base.html#a0e038e7cb3fbcb23dafa85de4202dfed">Convection_Diffusion_Espece_Fluide_Dilatable_base</a>, <a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html#afdc147c2317bc9d2861df7a70405c841">Convection_Diffusion_Fluide_Dilatable_base</a>, <a class="el" href="classConvection__Diffusion__Chaleur__QC.html#a7e6295250e2171f97bf37f84092bec59">Convection_Diffusion_Chaleur_QC</a>, and <a class="el" href="classConvection__Diffusion__Chaleur__WC.html#ad60cf450c46d49257da33c1fad250733">Convection_Diffusion_Chaleur_WC</a>.</p>

</div>
</div>
<a class="anchor" id="a2f09516e23af998bef35700d625abb50"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::derivee_en_temps_inco_sans_solveur_masse_impl" ref="a2f09516e23af998bef35700d625abb50" args="(Convection_Diffusion_Fluide_Dilatable_base &amp;eqn, DoubleTab &amp;derivee, const bool is_expl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDoubleTab.html">DoubleTab</a> &amp; Convection_Diffusion_Fluide_Dilatable_Proto::derivee_en_temps_inco_sans_solveur_masse_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html">Convection_Diffusion_Fluide_Dilatable_base</a> &amp;&#160;</td>
          <td class="paramname"><em>eqn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDoubleTab.html">DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>derivee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>is_expl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Renvoie la derivee en temps de l'inconnue de l'equation.<br/>
Le calcul est le suivant:<br/>
d(inconnue)/dt = M^{-1} * (sources - somme(Op_{i}(inconnue))) / rho. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;<br/>
 Signification: le tableau des valeurs de la derivee en temps du champ inconnu<br/>
 Contraintes: </dd></dl>

<p><p>&lt; Thermal equation + Gaz reel =&gt; No diffusion implicit ... </p>
</p>

<p>Definition at line <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html#l00078">78</a> of file <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.cpp</a>.</p>

<p>References <a class="el" href="Sources_8cpp_source.html#l00132">Sources::ajouter()</a>, <a class="el" href="classOperateur.html#accdf61cf1e33fb42e9eb06f1c501422b">Operateur::ajouter()</a>, <a class="el" href="Solveur__Masse_8h_source.html#l00087">Solveur_Masse::appliquer()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Schema__Temps__base_8h_source.html#l00904">Schema_Temps_base::diffusion_implicite()</a>, <a class="el" href="DoubleTab_8h_source.html#l00243">DoubleTab::dimension()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00277">DoubleVect::echange_espace_virtuel()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Convection__Diffusion__Fluide__Dilatable__base_8cpp_source.html#l00071">Convection_Diffusion_Fluide_Dilatable_base::fluide()</a>, <a class="el" href="Champ__Inc_8cpp_source.html#l00329">Champ_Inc::futur()</a>, <a class="el" href="Equation__base_8cpp_source.html#l01441">Equation_base::get_champ()</a>, <a class="el" href="Equation__base_8h_source.html#l00244">Equation_base::Gradient_conjugue_diff_impl()</a>, <a class="el" href="Convection__Diffusion__Fluide__Dilatable__base_8h_source.html#l00063">Convection_Diffusion_Fluide_Dilatable_base::inconnue()</a>, <a class="el" href="Zone__Cl__dis_8h_source.html#l00130">Zone_Cl_dis::les_conditions_limites()</a>, <a class="el" href="DoubleVect_8h_source.html#l00164">DoubleVect::line_size()</a>, <a class="el" href="Milieu__base_8cpp_source.html#l00560">Milieu_base::masse_volumique()</a>, <a class="el" href="Convection__Diffusion__std_8cpp_source.html#l00140">Convection_Diffusion_std::operateur()</a>, <a class="el" href="Equation__base_8cpp_source.html#l01120">Equation_base::schema_temps()</a>, <a class="el" href="Cond__lim_8h_source.html#l00319">Cond_lim::set_modifier_val_imp()</a>, <a class="el" href="Equation__base_8h_source.html#l00432">Equation_base::solv_masse()</a>, <a class="el" href="Equation__base_8cpp_source.html#l00578">Equation_base::sources()</a>, <a class="el" href="Fluide__Dilatable__base_8cpp_source.html#l00294">Fluide_Dilatable_base::temperature()</a>, <a class="el" href="Schema__Temps__base_8h_source.html#l00676">Schema_Temps_base::temps_courant()</a>, <a class="el" href="Fluide__Dilatable__base_8h_source.html#l00087">Fluide_Dilatable_base::type_fluide()</a>, <a class="el" href="Fluide__Dilatable__base_8cpp_source.html#l00261">Fluide_Dilatable_base::update_rho_cp()</a>, <a class="el" href="Champ__Inc_8cpp_source.html#l00245">Champ_Inc::valeurs()</a>, <a class="el" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">Champ_Proto::valeurs()</a>, and <a class="el" href="Equation__base_8h_source.html#l00391">Equation_base::zone_Cl_dis()</a>.</p>

<p>Referenced by <a class="el" href="Convection__Diffusion__Espece__Multi__WC_8cpp_source.html#l00078">Convection_Diffusion_Espece_Multi_WC::derivee_en_temps_inco()</a>, <a class="el" href="Convection__Diffusion__Espece__Binaire__base_8cpp_source.html#l00106">Convection_Diffusion_Espece_Binaire_base::derivee_en_temps_inco()</a>, and <a class="el" href="Convection__Diffusion__Chaleur__Fluide__Dilatable__base_8cpp_source.html#l00075">Convection_Diffusion_Chaleur_Fluide_Dilatable_base::derivee_en_temps_inco()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/*</span>
<span class="comment">   * ATEENTION : THIS IS A GENERIC METHOD THAT IS USED TO SOLVE EXPLICITLY (OR DIFFUSION IMPLICIT)</span>
<span class="comment">   * A THERMAL OR SPECIES CONV/DIFF EQUATION. SO THE VARIABLE CAN EITHER BE THE TEMPERATURE T OR</span>
<span class="comment">   * THE MASS FRACTION Y.</span>
<span class="comment">   *</span>
<span class="comment">   * For the species equation for example, we have :</span>
<span class="comment">   * d(rho Y)/dt + div( rho*u*Y ) = div( rho*D*grad(Y) )</span>
<span class="comment">   *</span>
<span class="comment">   * With a non conservative formulation we write:</span>
<span class="comment">   * rho d(Y)/dt + Y d(rho)/dt + Y div (rho*u) + rho*u grad(Y) = div( rho*D*grad(Y) )</span>
<span class="comment">   *</span>
<span class="comment">   * Using the mass equation, we get :</span>
<span class="comment">   * rho d(Y)/dt + rho*u grad(Y) = div( rho*D*grad(Y) )</span>
<span class="comment">   *</span>
<span class="comment">   * divide by rho =&gt; d(Y)/dt = ( div( rho*D*grad(Y) ) + S ) / rho - u grad(Y)</span>
<span class="comment">   *</span>
<span class="comment">   * This is what we code here with derivee = d(Y)/dt</span>
<span class="comment">   *</span>
<span class="comment">   *</span>
<span class="comment">   * Similarly for the temperature equation, we code</span>
<span class="comment">   *</span>
<span class="comment">   * derivee = d(T)/dt = ( div( lambda*grad(T) ) + S ) / (rho*Cp) - u grad(T)</span>
<span class="comment">   */</span>

  <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch = eqn.<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>();
  <span class="keywordtype">int</span> diffusion_implicite=sch.<a class="code" href="classSchema__Temps__base.html#af19143270478f1a870292550da641a94" title="Renvoie 1 si le schema en temps a ete lu diffusion_implicite.">diffusion_implicite</a>();
  eqn.<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>().<a class="code" href="classZone__Cl__dis.html#aafbd0525703e23200e31796bcd4fcac6" title="Appel a l&#39;objet sous-jacent Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>().<a class="code" href="classCond__lim.html#a3b3f17c62938552010df3adbaa8cf29e" title="Appel a l&#39;objet sous-jacent. Positionnement du drapeau modifier_val_imp.">set_modifier_val_imp</a>(0);

  <span class="comment">/*</span>
<span class="comment">   * FIRST TERM : diffusive</span>
<span class="comment">   * derivee = div( rho*D*grad(Y) ) or div( lambda*grad(T) )</span>
<span class="comment">   */</span>
  <a class="code" href="classFluide__Dilatable__base.html" title="classe Fluide_Dilatable_base Cette classe represente un d&#39;un fluide dilatable, heritant de fluide bas...">Fluide_Dilatable_base</a>&amp; fluide_dil = eqn.<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__base.html#adc8fb881a02b677e276fa23989fbd9ce">fluide</a>();
  <span class="keywordflow">if</span> ( !<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a94bcbe88e748606055e07a229ddffa62">is_thermal</a>() <span class="comment">/* species equation */</span> || (<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a94bcbe88e748606055e07a229ddffa62">is_thermal</a>() &amp;&amp; fluide_dil.<a class="code" href="classFluide__Dilatable__base.html#af310e9aeafbd35af667d91bb88714537">type_fluide</a>()==<span class="stringliteral">&quot;Gaz_Parfait&quot;</span> ))
    {
      <span class="keywordflow">if</span> (!diffusion_implicite) eqn.<a class="code" href="classConvection__Diffusion__std.html#a4bb82d17dd39ba9d8531764b2800a8bd" title="Renvoie l&#39;operateur specifie par son index: renvoie terme_diffusif si i = 0 renvoie terme_convectif s...">operateur</a>(0).<a class="code" href="classOperateur.html#accdf61cf1e33fb42e9eb06f1c501422b">ajouter</a>(derivee);
    }
  <span class="keywordflow">else</span> <span class="comment">//!&lt; Thermal equation + Gaz reel =&gt; No diffusion implicit ...</span>
<span class="comment"></span>    {
      eqn.<a class="code" href="classConvection__Diffusion__std.html#a4bb82d17dd39ba9d8531764b2800a8bd" title="Renvoie l&#39;operateur specifie par son index: renvoie terme_diffusif si i = 0 renvoie terme_convectif s...">operateur</a>(0).<a class="code" href="classOperateur.html#accdf61cf1e33fb42e9eb06f1c501422b">ajouter</a>(fluide_dil.<a class="code" href="classFluide__Dilatable__base.html#a043bfb7456e59e3974565b65d1e24988" title="Renvoie le tableau des valeurs de le temperature.">temperature</a>(),derivee);
      <span class="keywordflow">if</span> (diffusion_implicite)
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error: diffusion implicit not implemented in Convection_Diffusion_Chaleur_Fluide_Dilatable_base&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
    }


  eqn.<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>().<a class="code" href="classZone__Cl__dis.html#aafbd0525703e23200e31796bcd4fcac6" title="Appel a l&#39;objet sous-jacent Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>().<a class="code" href="classCond__lim.html#a3b3f17c62938552010df3adbaa8cf29e" title="Appel a l&#39;objet sous-jacent. Positionnement du drapeau modifier_val_imp.">set_modifier_val_imp</a>(1);
  derivee.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();

<span class="comment">// Add source term (if any, but for temperatur eit is sure !!! )</span>
  eqn.<a class="code" href="classEquation__base.html#a3c8ac50e3e7b6ed29024a43e828a5396" title="Renvoie les termes sources asssocies a l&#39;equation.">sources</a>().<a class="code" href="classSources.html#a6fc277f1920a71841cb041dc1b6ed771" title="Ajoute la contribution de toutes les sources de la liste au tableau passe en parametre, et renvoie ce tableau.">ajouter</a>(derivee);

<span class="comment">// On divise derivee  par rho si espece ou gaz reel... sinon par rho*Cp !</span>
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_rho = fluide_dil.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> n = tab_rho.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
  assert (tab_rho.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() == 1);

  <span class="keywordflow">if</span> (<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a94bcbe88e748606055e07a229ddffa62">is_thermal</a>() &amp;&amp; fluide_dil.<a class="code" href="classFluide__Dilatable__base.html#af310e9aeafbd35af667d91bb88714537">type_fluide</a>()==<span class="stringliteral">&quot;Gaz_Parfait&quot;</span>)
    {
      fluide_dil.<a class="code" href="classFluide__Dilatable__base.html#a169d6724b98e444ba9a672a78e83490f">update_rho_cp</a>(sch.<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>());
      <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; rhoCp = eqn.<a class="code" href="classEquation__base.html#ad6bcab0bb6d83b1b563a7aa30f0df721">get_champ</a>(<span class="stringliteral">&quot;rho_cp_comme_T&quot;</span>).<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> som=0 ; som&lt;n ; som++) derivee(som) /= rhoCp(som);
    }
  <span class="keywordflow">else</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> som=0 ; som&lt;n ; som++) derivee(som) /= tab_rho(som);

  derivee.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();


  <span class="comment">/*</span>
<span class="comment">   * SECOND TERM : convective</span>
<span class="comment">   * = - u grad(Y) = [Â Y div (rho*u) - div( rho*u*Y ) ]Â / rho</span>
<span class="comment">   * or</span>
<span class="comment">   * = - u grad(T) = [ T div (rho*u) - div( rho*u*T ) ] / rho*Cp</span>
<span class="comment">   */</span>
  <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> convection(derivee);

<span class="comment">// Add Y div (rho*u) or T div (rho*u)</span>
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco = eqn.<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__base.html#ad197c8dc5ae14b8f32d3bb50e201fada">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>();
  <a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#ac654cf15f0945a632fdca7d6b972c1c1">calculer_div_u_ou_div_rhou</a>(convection);

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> som=0 ; som&lt;n ; som++) convection(som) *= (-inco(som));

<span class="comment">// Add convection operator: - div( rho*u*Y ) or -div ( rho*u*T )</span>
  eqn.<a class="code" href="classConvection__Diffusion__std.html#a4bb82d17dd39ba9d8531764b2800a8bd" title="Renvoie l&#39;operateur specifie par son index: renvoie terme_diffusif si i = 0 renvoie terme_convectif s...">operateur</a>(1).<a class="code" href="classOperateur.html#accdf61cf1e33fb42e9eb06f1c501422b">ajouter</a>(convection);

<span class="comment">// Divide by rho if necessary</span>
  <span class="keywordflow">if</span> (<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a1a2d6dc69952d47ff501e3235946dfc2">is_generic</a>())
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> som=0 ; som&lt;n ; som++) convection(som) /= tab_rho(som);

  <span class="comment">/*</span>
<span class="comment">   * TOTAL TERM : diffusive + convective + sources</span>
<span class="comment">   */</span>
  derivee+=convection;

  <span class="keywordflow">if</span> (diffusion_implicite)
    {
      <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Tfutur=eqn.<a class="code" href="classConvection__Diffusion__Fluide__Dilatable__base.html#ad197c8dc5ae14b8f32d3bb50e201fada">inconnue</a>().<a class="code" href="classChamp__Inc.html#a518c3eb1e7a249ae0fc4d1a4e0d072d0" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps t+i.">futur</a>();
      <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> secmem(derivee);
      secmem=derivee;
      eqn.<a class="code" href="classEquation__base.html#adfedf474c07a92f6b2261ca2f1cee80e" title="Renvoie le solveur de masse associe a l&#39;equation.">solv_masse</a>().<a class="code" href="classSolveur__Masse.html#af7afe8c2d4d5764f7428f2cd4ef43ddb" title="Appel a l&#39;objet sous-jacent. Resoud le systeme lineaire, dont la matrice est la matrice de masse...">appliquer</a>(secmem);
      derivee = Tfutur;

      <a class="code" href="classConvection__Diffusion__Fluide__Dilatable__Proto.html#a94bcbe88e748606055e07a229ddffa62">is_thermal</a>() ? eqn.<a class="code" href="classEquation__base.html#adfedf474c07a92f6b2261ca2f1cee80e" title="Renvoie le solveur de masse associe a l&#39;equation.">solv_masse</a>()-&gt;set_name_of_coefficient_temporel(<span class="stringliteral">&quot;rho_cp_comme_T&quot;</span>) :
      eqn.<a class="code" href="classEquation__base.html#adfedf474c07a92f6b2261ca2f1cee80e" title="Renvoie le solveur de masse associe a l&#39;equation.">solv_masse</a>()-&gt;set_name_of_coefficient_temporel(<span class="stringliteral">&quot;masse_volumique&quot;</span>);

      eqn.<a class="code" href="classEquation__base.html#abd67532530f67b3305703a130a5d823a">Gradient_conjugue_diff_impl</a>(secmem,derivee);
      eqn.<a class="code" href="classEquation__base.html#adfedf474c07a92f6b2261ca2f1cee80e" title="Renvoie le solveur de masse associe a l&#39;equation.">solv_masse</a>()-&gt;set_name_of_coefficient_temporel(<span class="stringliteral">&quot;no_coeff&quot;</span>);
    }

<span class="comment">// 100% explicite</span>
  <span class="keywordflow">if</span> (!sch.<a class="code" href="classSchema__Temps__base.html#af19143270478f1a870292550da641a94" title="Renvoie 1 si le schema en temps a ete lu diffusion_implicite.">diffusion_implicite</a>() &amp;&amp; is_expl)
    {
      eqn.<a class="code" href="classEquation__base.html#adfedf474c07a92f6b2261ca2f1cee80e" title="Renvoie le solveur de masse associe a l&#39;equation.">solv_masse</a>().<a class="code" href="classSolveur__Masse.html#af7afe8c2d4d5764f7428f2cd4ef43ddb" title="Appel a l&#39;objet sous-jacent. Resoud le systeme lineaire, dont la matrice est la matrice de masse...">appliquer</a>(derivee);
      derivee.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
    }

  <span class="keywordflow">return</span> derivee;
} <span class="comment">/* END derivee_en_temps_inco_sans_solveur_masse_impl */</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a1a2d6dc69952d47ff501e3235946dfc2"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::is_generic" ref="a1a2d6dc69952d47ff501e3235946dfc2" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool Convection_Diffusion_Fluide_Dilatable_Proto::is_generic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implemented in <a class="el" href="classConvection__Diffusion__Chaleur__Fluide__Dilatable__base.html#aaefcbcf7e41411dfb97eae4ae77540df">Convection_Diffusion_Chaleur_Fluide_Dilatable_base</a>, <a class="el" href="classConvection__Diffusion__Espece__Fluide__Dilatable__base.html#a779efda84aad4e8713888cee8511535a">Convection_Diffusion_Espece_Fluide_Dilatable_base</a>, <a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html#a09aa91ab29402c0fe0b179757427c742">Convection_Diffusion_Fluide_Dilatable_base</a>, <a class="el" href="classConvection__Diffusion__Chaleur__QC.html#a0a64d8fa40243bdbdec94e72db665954">Convection_Diffusion_Chaleur_QC</a>, and <a class="el" href="classConvection__Diffusion__Chaleur__WC.html#a41edbb50c486ed634cbfa347d26c21a9">Convection_Diffusion_Chaleur_WC</a>.</p>

</div>
</div>
<a class="anchor" id="a94bcbe88e748606055e07a229ddffa62"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::is_thermal" ref="a94bcbe88e748606055e07a229ddffa62" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool Convection_Diffusion_Fluide_Dilatable_Proto::is_thermal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implemented in <a class="el" href="classConvection__Diffusion__Chaleur__Fluide__Dilatable__base.html#a1dc8cab8fbde1d7f5c17ab4599909d35">Convection_Diffusion_Chaleur_Fluide_Dilatable_base</a>, <a class="el" href="classConvection__Diffusion__Espece__Fluide__Dilatable__base.html#a6c91829af9bcb2a4b390486ce18c5b48">Convection_Diffusion_Espece_Fluide_Dilatable_base</a>, and <a class="el" href="classConvection__Diffusion__Fluide__Dilatable__base.html#a06d31a9a72102215096b9ea48862e938">Convection_Diffusion_Fluide_Dilatable_base</a>.</p>

</div>
</div>
<a class="anchor" id="a7d940f524683ea3868619bca2209710d"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::Reprendre_WC" ref="a7d940f524683ea3868619bca2209710d" args="(Entree &amp;is, double temps, Convection_Diffusion_std &amp;eq, Fluide_Dilatable_base &amp;fld, Champ_Inc &amp;inco, Probleme_base &amp;pb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Convection_Diffusion_Fluide_Dilatable_Proto::Reprendre_WC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEntree.html">Entree</a> &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classConvection__Diffusion__std.html">Convection_Diffusion_std</a> &amp;&#160;</td>
          <td class="paramname"><em>eq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFluide__Dilatable__base.html">Fluide_Dilatable_base</a> &amp;&#160;</td>
          <td class="paramname"><em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classChamp__Inc.html">Champ_Inc</a> &amp;&#160;</td>
          <td class="paramname"><em>inco</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classProbleme__base.html">Probleme_base</a> &amp;&#160;</td>
          <td class="paramname"><em>pb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>&lt; XXX : voir <a class="el" href="classConvection__Diffusion__std.html" title="classe Convection_Diffusion_std Cette classe est la base des equations modelisant le transport d&#39;un s...">Convection_Diffusion_std</a></p>
<p>&lt; Same discretization normally </p>
</p>

<p>Definition at line <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html#l00354">354</a> of file <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.cpp</a>.</p>

<p>References <a class="el" href="Avanc_8cpp_source.html#l00046">avancer_fichier()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Probleme__base_8cpp_source.html#l01393">Probleme_base::domaine()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="EcritureLectureSpecial_8cpp_source.html#l00110">EcritureLectureSpecial::is_lecture_special()</a>, <a class="el" href="Domaine_8h_source.html#l00204">Domaine::le_nom()</a>, <a class="el" href="O__U__Ptr_8cpp_source.html#l00179">O_U_Ptr::le_nom()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00445">Objet_U::nommer()</a>, <a class="el" href="Process_8cpp_source.html#l00109">Process::nproc()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="Champ__Inc_8cpp_source.html#l00472">Champ_Inc::reprendre()</a>, <a class="el" href="Convection__Diffusion__std_8cpp_source.html#l00213">Convection_Diffusion_std::reprendre_base()</a>, <a class="el" href="Probleme__base_8h_source.html#l00335">Probleme_base::reprise_format_temps()</a>, <a class="el" href="Fluide__Weakly__Compressible_8h_source.html#l00070">Fluide_Weakly_Compressible::set_pression_th_tab()</a>, <a class="el" href="Fluide__Weakly__Compressible_8h_source.html#l00071">Fluide_Weakly_Compressible::set_resume_flag()</a>, <a class="el" href="Champ__Inc_8h_source.html#l00043">Deriv_Champ_Inc_base::valeur()</a>, and <a class="el" href="Champ__Inc_8cpp_source.html#l00245">Champ_Inc::valeurs()</a>.</p>

<p>Referenced by <a class="el" href="Convection__Diffusion__Espece__Binaire__WC_8cpp_source.html#l00053">Convection_Diffusion_Espece_Binaire_WC::reprendre()</a>, and <a class="el" href="Convection__Diffusion__Chaleur__WC_8cpp_source.html#l00107">Convection_Diffusion_Chaleur_WC::reprendre()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// start resuming</span>
  eq.<a class="code" href="classConvection__Diffusion__std.html#a87cba2432b9aa0215de377777fdf9e0f">reprendre_base</a>(is); <span class="comment">//!&lt; XXX : voir Convection_Diffusion_std</span>
<span class="comment"></span>
<span class="comment">// XXX : should be set so that Pression_EOS is read and not initialized from data file</span>
  <a class="code" href="classFluide__Weakly__Compressible.html" title="classe Fluide_Weakly_Compressible Cette classe represente un d&#39;un fluide faiblement compressible c&#39;es...">Fluide_Weakly_Compressible</a>&amp; FWC = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__Weakly__Compressible.html" title="classe Fluide_Weakly_Compressible Cette classe represente un d&#39;un fluide faiblement compressible c&#39;es...">Fluide_Weakly_Compressible</a>,fld);
  FWC.<a class="code" href="classFluide__Weakly__Compressible.html#a143eec89aa24e7b24e2fbdc3604e05e3">set_resume_flag</a>();
<span class="comment">// resume EOS pressure field</span>
  <a class="code" href="classChamp__Inc.html">Champ_Inc</a> p_tab = inco; <span class="comment">//!&lt; Same discretization normally</span>
<span class="comment"></span>  p_tab-&gt;<a class="code" href="classObjet__U.html#a469dbcad1d4a98a67e4246dce8e264ad" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(<span class="stringliteral">&quot;Pression_EOS&quot;</span>);
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> field_tag(p_tab-&gt;<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>());
  field_tag += p_tab.<a class="code" href="classDeriv__Champ__Inc__base.html#a9e0b743a3e124e7114fa977b36b68225">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
  field_tag += pb.<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
  field_tag += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(temps,pb.<a class="code" href="classProbleme__base.html#a909fe96e356be6a559ae6de73258bb36">reprise_format_temps</a>());

  <span class="keywordflow">if</span> (<a class="code" href="classEcritureLectureSpecial.html#a5fa89017be05d6f062f210e24e00361c" title="indique si le format special a ete demande en lecture active par reprise xyz ....">EcritureLectureSpecial::is_lecture_special</a>() &amp;&amp; <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>() &gt; 1)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Convection_Diffusion_Espece_Binaire_WC::reprendre !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Use the sauv file to resume a parallel WC calculation (Pression_EOS is required) ... &quot;</span> &lt;&lt; finl;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="Avanc_8cpp.html#ae61571402d637eb7962957b7714ffc33">avancer_fichier</a>(is, field_tag);
      p_tab-&gt;<a class="code" href="classChamp__Inc.html#a1a11a937f6d82d26f2d708e4a7b85d36" title="Appel a l&#39;objet sous-jacent Effectue une reprise sur un flot d&#39;entree.">reprendre</a>(is);
    }

<span class="comment">// set good field</span>
  FWC.<a class="code" href="classFluide__Weakly__Compressible.html#aa872e7b99faaa01b2eda7a209714006f">set_pression_th_tab</a>(p_tab-&gt;<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>());

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acb0976593376c9f67b7a9fa2b837e7c2"></a><!-- doxytag: member="Convection_Diffusion_Fluide_Dilatable_Proto::Sauvegarder_WC" ref="acb0976593376c9f67b7a9fa2b837e7c2" args="(Sortie &amp;os, const Convection_Diffusion_std &amp;eq, const Fluide_Dilatable_base &amp;fld)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Convection_Diffusion_Fluide_Dilatable_Proto::Sauvegarder_WC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSortie.html">Sortie</a> &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classConvection__Diffusion__std.html">Convection_Diffusion_std</a> &amp;&#160;</td>
          <td class="paramname"><em>eq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classFluide__Dilatable__base.html">Fluide_Dilatable_base</a> &amp;&#160;</td>
          <td class="paramname"><em>fld</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>&lt; XXX : voir <a class="el" href="classConvection__Diffusion__std.html" title="classe Convection_Diffusion_std Cette classe est la base des equations modelisant le transport d&#39;un s...">Convection_Diffusion_std</a></p>
<p>&lt; Initialize with same discretization</p>
<p>&lt; Use good values </p>
</p>

<p>Definition at line <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html#l00331">331</a> of file <a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Fluide__Dilatable__base_8h_source.html#l00090">Fluide_Dilatable_base::inco_chaleur()</a>, <a class="el" href="EcritureLectureSpecial_8cpp_source.html#l00122">EcritureLectureSpecial::is_ecriture_special()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00445">Objet_U::nommer()</a>, <a class="el" href="Process_8cpp_source.html#l00109">Process::nproc()</a>, <a class="el" href="Fluide__Weakly__Compressible_8h_source.html#l00065">Fluide_Weakly_Compressible::pression_th_tab()</a>, <a class="el" href="Cast_8h_source.html#l00062">ref_cast_non_const</a>, <a class="el" href="Champ__Inc_8cpp_source.html#l00492">Champ_Inc::sauvegarder()</a>, <a class="el" href="Convection__Diffusion__std_8cpp_source.html#l00209">Convection_Diffusion_std::sauvegarder_base()</a>, and <a class="el" href="Champ__Inc_8cpp_source.html#l00245">Champ_Inc::valeurs()</a>.</p>

<p>Referenced by <a class="el" href="Convection__Diffusion__Espece__Binaire__WC_8cpp_source.html#l00047">Convection_Diffusion_Espece_Binaire_WC::sauvegarder()</a>, and <a class="el" href="Convection__Diffusion__Chaleur__WC_8cpp_source.html#l00102">Convection_Diffusion_Chaleur_WC::sauvegarder()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> bytes=0,a_faire,special;
  bytes += eq.<a class="code" href="classConvection__Diffusion__std.html#a6217d1d3a7310eccd2ab9a0563f5672a">sauvegarder_base</a>(os); <span class="comment">//!&lt; XXX : voir Convection_Diffusion_std</span>
<span class="comment"></span>  <a class="code" href="classEcritureLectureSpecial.html#a449e40a68eeabf8e552f23d8e4c32bcf" title="indique si le format special a ete demande en lecture active par sauvegarde xyz .... si le mode ecriture est special c.a.d si format de sauvegarde xyz alors special =1 a_faire=je_suis_maitre sinon special=0 , a_faire=1">EcritureLectureSpecial::is_ecriture_special</a>(special,a_faire);

  <span class="keywordflow">if</span> (a_faire)
    {
      <a class="code" href="classFluide__Weakly__Compressible.html" title="classe Fluide_Weakly_Compressible Cette classe represente un d&#39;un fluide faiblement compressible c&#39;es...">Fluide_Weakly_Compressible</a>&amp; FWC = <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classFluide__Weakly__Compressible.html" title="classe Fluide_Weakly_Compressible Cette classe represente un d&#39;un fluide faiblement compressible c&#39;es...">Fluide_Weakly_Compressible</a>,fld);
      <a class="code" href="classChamp__Inc.html">Champ_Inc</a> p_tab = FWC.<a class="code" href="classFluide__Dilatable__base.html#a4f0873a7e2343c279479a1b90e402a31">inco_chaleur</a>(); <span class="comment">//!&lt; Initialize with same discretization</span>
<span class="comment"></span>      p_tab-&gt;<a class="code" href="classObjet__U.html#a469dbcad1d4a98a67e4246dce8e264ad" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(<span class="stringliteral">&quot;Pression_EOS&quot;</span>);
      p_tab-&gt;<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>() = FWC.<a class="code" href="classFluide__Weakly__Compressible.html#a694ced7f20d7ad1bdb32ffe4017a0c34" title="Tab Pression thermodynamique.">pression_th_tab</a>(); <span class="comment">//!&lt; Use good values</span>
<span class="comment"></span>      <span class="keywordflow">if</span> (special &amp;&amp; <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>() &gt; 1)
        <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;ATTENTION : For a parallel calculation, the field Pression_EOS is not saved in xyz format ... &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <span class="keywordflow">else</span>
        bytes += p_tab-&gt;<a class="code" href="classChamp__Inc.html#a454ab8f891f10bfd54449b12f8d44f52" title="Appel a l&#39;objet sous-jacent Effectue une sauvegarde sur un flot de sortie.">sauvegarder</a>(os);
    }

  <span class="keywordflow">return</span> bytes;
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/ThHyd/Dilatable/Common/Equations/<a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8h_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.h</a></li>
<li>src/ThHyd/Dilatable/Common/Equations/<a class="el" href="Convection__Diffusion__Fluide__Dilatable__Proto_8cpp_source.html">Convection_Diffusion_Fluide_Dilatable_Proto.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:36:29 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
