<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/VEF/Champs/Champ_front_contact_VEF.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/VEF/Champs/Champ_front_contact_VEF.cpp</div>  </div>
</div>
<div class="contents">
<a href="Champ__front__contact__VEF_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Champ_front_contact_VEF.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/VEF/Champs</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/55</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Champ__front__contact__VEF_8h.html">Champ_front_contact_VEF.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Mod__turb__hyd__base_8h.html">Mod_turb_hyd_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Convection__Diffusion__Temperature_8h.html">Convection_Diffusion_Temperature.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Modele__turbulence__scal__base_8h.html">Modele_turbulence_scal_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Raccord__distant__homogene_8h.html">Raccord_distant_homogene.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Uniforme_8h.html">Champ_Uniforme.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Fluide__Incompressible_8h.html">Fluide_Incompressible.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="distances__VEF_8h.html">distances_VEF.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Interprete_8h.html">Interprete.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Pb__Conduction_8h.html">Pb_Conduction.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="Zone__Cl__VEF_8h.html">Zone_Cl_VEF.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Fonc__P0__VEF_8h.html">Champ_Fonc_P0_VEF.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="Format__Post__Med_8h.html">Format_Post_Med.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="Champ__front__contact__fictif__VEF_8h.html">Champ_front_contact_fictif_VEF.h</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Comm_8h.html">Schema_Comm.h</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="ArrOfBit_8h.html">ArrOfBit.h</a>&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="SFichier_8h.html">SFichier.h</a>&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="Ref__Objet__U_8h.html">Ref_Objet_U.h</a>&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="Constituant_8h.html">Constituant.h</a>&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;<a class="code" href="Convection__Diffusion__Concentration_8h.html">Convection_Diffusion_Concentration.h</a>&gt;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">// WEC : Attention. D&#39;autres tableaux que le champ_front meriteraient davoir plusieurs valeurs temporelles !</span>
<a name="l00048"></a>00048 <span class="comment">// En particulier les gradients...</span>
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="Champ__front__contact__VEF_8cpp.html#a09f8ac85feae5fdf562edaf158e9c93c">00050</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>,<span class="stringliteral">&quot;Champ_front_contact_VEF&quot;</span>,<a class="code" href="classCh__front__var__instationnaire__dep.html" title="classe Ch_front_var_instationnaire_dep Cette classe abstraite represente un champ sur une frontiere...">Ch_front_var_instationnaire_dep</a>);
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="classChamp__front__contact__VEF.html#a647beb08bb9eab45141125a806ca1adf">00053</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#a647beb08bb9eab45141125a806ca1adf" title="Imprime le nom du champ sur un flot de sortie.">Champ_front_contact_VEF::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00054"></a>00054 <span class="keyword"></span>{
<a name="l00055"></a>00055   <span class="keywordflow">return</span> os;
<a name="l00056"></a>00056 }
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 
<a name="l00059"></a><a class="code" href="classChamp__front__contact__VEF.html#ae79cfc80546d8873cbd00d32aeb407ad">00059</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#ae79cfc80546d8873cbd00d32aeb407ad" title="NE FAIT RIEN A surcharger dans les classes derivees.">Champ_front_contact_VEF::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00060"></a>00060 {
<a name="l00061"></a>00061 
<a name="l00062"></a>00062   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> nom_inco;
<a name="l00063"></a>00063   nom_inco = <span class="stringliteral">&quot;temperature&quot;</span>;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065   is &gt;&gt; <a class="code" href="classChamp__front__contact__VEF.html#a274d0667aa56bab68285909236dbcd19">nom_pb1</a> &gt;&gt; <a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a> &gt;&gt; <a class="code" href="classChamp__front__contact__VEF.html#afe5587cb43c3cf6f7bc2edc667eb5e3c">nom_pb2</a> &gt;&gt; <a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a> ;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067   <a class="code" href="classChamp__front__contact__VEF.html#a4570a425c6f1c43047b1c5f307695bd4">creer</a>(<a class="code" href="classChamp__front__contact__VEF.html#a274d0667aa56bab68285909236dbcd19">nom_pb1</a>, <a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a>, <a class="code" href="classChamp__front__contact__VEF.html#afe5587cb43c3cf6f7bc2edc667eb5e3c">nom_pb2</a>, nom_bord2, nom_inco);
<a name="l00068"></a>00068 
<a name="l00069"></a>00069   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Champ_front_contact_VEF::readOn : &quot;</span> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#a274d0667aa56bab68285909236dbcd19">nom_pb1</a> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a> &lt;&lt; nom_inco &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00070"></a>00070   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;      connecte a                : &quot;</span> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#afe5587cb43c3cf6f7bc2edc667eb5e3c">nom_pb2</a> &lt;&lt; nom_bord2 &lt;&lt; nom_inco &lt;&lt; finl;
<a name="l00071"></a>00071   <a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(1); <span class="comment">//!&lt; prevu pour la temperature.</span>
<a name="l00072"></a>00072 <span class="comment"></span>  <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>() &gt; 1)
<a name="l00073"></a>00073     <a class="code" href="classChamp__front__contact__VEF.html#ac771ac59453cf1ced48fc404f083b583">connect_est_remplit</a> = 1;
<a name="l00074"></a>00074   <span class="keywordflow">else</span>
<a name="l00075"></a>00075     <a class="code" href="classChamp__front__contact__VEF.html#ac771ac59453cf1ced48fc404f083b583">connect_est_remplit</a> = 0;
<a name="l00076"></a>00076   <a class="code" href="classChamp__front__contact__VEF.html#a53aeff332c0f2aee17092e4d856ac2ad">remplir_elems_voisin_bord</a>();
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   <span class="keywordflow">return</span> is;
<a name="l00079"></a>00079 }
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="classChamp__front__contact__VEF.html#a24b1e55208df7b3bcce180d8bd90eb2b">00081</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a24b1e55208df7b3bcce180d8bd90eb2b">Champ_front_contact_VEF::completer</a>()
<a name="l00082"></a>00082 {
<a name="l00083"></a>00083 <span class="comment">// Check/initialize Raccord boundaries in parallel:</span>
<a name="l00084"></a>00084   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>()&gt;1)
<a name="l00085"></a>00085     {
<a name="l00086"></a>00086       <a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a> = <a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a>;
<a name="l00087"></a>00087       <a class="code" href="classChamp__front__contact__VEF.html#aae9eeb35ae323872587c44b0f034dea0">associer_ch_inc_base</a>(<a class="code" href="classChamp__front__contact__VEF.html#a88ecd53bc5e661db5f08a8b76d37f338">l_inconnue2</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>()) ;
<a name="l00088"></a>00088       <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis_opposee = <a class="code" href="classChamp__front__contact__VEF.html#aad620b3a6369c3b76047ded5dba7d60a">front_dis</a>().<a class="code" href="classFrontiere__dis__base.html#ae59cf10086641faa60a2b2fda4ac63ae">zone_dis</a>();
<a name="l00089"></a>00089       <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis_locale = <a class="code" href="classChamp__front__base.html#af5b3aaf468fe33492ed777c2e5772651" title="Renvoie la frontiere discretisee associee au champ. (version const)">frontiere_dis</a>().<a class="code" href="classFrontiere__dis__base.html#ae59cf10086641faa60a2b2fda4ac63ae">zone_dis</a>();
<a name="l00090"></a>00090       <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; frontiere_opposee = <a class="code" href="classChamp__front__contact__VEF.html#aad620b3a6369c3b76047ded5dba7d60a">front_dis</a>().<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>();
<a name="l00091"></a>00091       <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; frontiere_locale = <a class="code" href="classChamp__front__base.html#af5b3aaf468fe33492ed777c2e5772651" title="Renvoie la frontiere discretisee associee au champ. (version const)">frontiere_dis</a>().<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>();
<a name="l00092"></a>00092       <span class="keywordflow">if</span> (!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classRaccord__distant__homogene.html">Raccord_distant_homogene</a>, frontiere_opposee))
<a name="l00093"></a>00093         {
<a name="l00094"></a>00094           <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_domaine_oppose = zone_dis_opposee.zone().domaine().<a class="code" href="classNom.html#a4fcffbaa80271df0d9674f2a2751efb9" title="Renvoie *this;.">le_nom</a>();
<a name="l00095"></a>00095           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error, the boundary &quot;</span> &lt;&lt; frontiere_opposee.<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; should be a Raccord.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00096"></a>00096           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Add in your data file between the definition and the partition of the domain &quot;</span> &lt;&lt; nom_domaine_oppose &lt;&lt; <span class="stringliteral">&quot; :&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00097"></a>00097           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Modif_bord_to_raccord &quot;</span> &lt;&lt; nom_domaine_oppose &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; frontiere_opposee.<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>() &lt;&lt; finl;
<a name="l00098"></a>00098           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00099"></a>00099         }
<a name="l00100"></a>00100       <a class="code" href="classRaccord__distant__homogene.html">Raccord_distant_homogene</a>&amp; raccord_distant = <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classRaccord__distant__homogene.html">Raccord_distant_homogene</a>, frontiere_opposee);
<a name="l00101"></a>00101       raccord_distant.<a class="code" href="classRaccord__distant__homogene.html#a94d7f14bc4bf0f2c8084f96fa53cc169" title="Initialise le raccord distant avec la frontiere et la zone discretisee opposees au raccord distant...">initialise</a>(frontiere_locale, zone_dis_locale, zone_dis_opposee);
<a name="l00102"></a>00102     }
<a name="l00103"></a>00103 }
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="classChamp__front__contact__VEF.html#ae3e408479375585c6c5033919264aabd">00105</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__front__contact__VEF.html#ae3e408479375585c6c5033919264aabd" title="Initialise le temps courant et Gpoint.">Champ_front_contact_VEF::initialiser</a>(<span class="keywordtype">double</span> temps, <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; inco)
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107   <span class="keywordflow">if</span> (!<a class="code" href="classCh__front__var__instationnaire__dep.html#a5e18c33d21cdbee5214cd7e93de34bc3" title="Initialise le temps courant et Gpoint.">Ch_front_var_instationnaire_dep::initialiser</a>(temps,inco))
<a name="l00108"></a>00108     <span class="keywordflow">return</span> 0;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">// WEC : code repris de calculer_coeffs_echange qui faisait des</span>
<a name="l00111"></a>00111 <span class="comment">// iniialisations au premier pas de temps.</span>
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="comment">// remplissage du tableau de connectivite des numeros de faces de bord</span>
<a name="l00114"></a>00114 <span class="comment">// entre les deux problemes couples.</span>
<a name="l00115"></a>00115   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__contact__VEF.html#ac771ac59453cf1ced48fc404f083b583">connect_est_remplit</a>==0)
<a name="l00116"></a>00116     {
<a name="l00117"></a>00117       <a class="code" href="classChamp__front__contact__VEF.html#a4042d6599b59d2397d041f68d50b7496">remplir_connect_bords</a>();
<a name="l00118"></a>00118       <a class="code" href="classChamp__front__contact__VEF.html#ac771ac59453cf1ced48fc404f083b583">connect_est_remplit</a> = 1;
<a name="l00119"></a>00119 <span class="comment">// Les elems_voisin_bord_ ont ete remplis pour chaque frontiere portant un Champ_Front_contact_VEF</span>
<a name="l00120"></a>00120 <span class="comment">// On peut remplir faces_coin</span>
<a name="l00121"></a>00121       <a class="code" href="classChamp__front__contact__VEF.html#a107b97c534814bbcbbc359c161fe871f">remplir_faces_coin</a>();
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123   <a class="code" href="classChamp__front__contact__VEF.html#a61e525b87320779faef7fb6f327c1e71">verification_faces_coin</a>=0;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="comment">// On initialise les references au ch_fr_autre_pb et fr_vf_autre_pb</span>
<a name="l00126"></a>00126   <a class="code" href="classChamp__front__contact__VEF.html#a14a9d12414f9e6b81d620b97e5e7a8b6">associer_front_vf_et_ch_front_autre_pb</a>();
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <span class="comment">// Dimensionnement des tableaux</span>
<a name="l00129"></a>00129   <span class="keywordtype">int</span> nb_faces=<a class="code" href="classChamp__front__base.html#af5b3aaf468fe33492ed777c2e5772651" title="Renvoie la frontiere discretisee associee au champ. (version const)">frontiere_dis</a>().<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#aa073fe9dbdddde59471ee7032b256aa2" title="Renvoie le nombre de faces de la frontiere.">nb_faces</a>();
<a name="l00130"></a>00130   <a class="code" href="classChamp__front__contact__VEF.html#a30e3b816ce3da14d165ddc5e8573742f">gradient_num_transf</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00131"></a>00131   <a class="code" href="classChamp__front__contact__VEF.html#a886b9b59922de5d40ad98cdfa30e34c6">gradient_fro_transf</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00132"></a>00132   <a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00133"></a>00133   <a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00134"></a>00134   <a class="code" href="classChamp__front__contact__VEF.html#a27c83a26ba78c5ce70266307b5e2ec63">gradient_fro_local</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00135"></a>00135   <a class="code" href="classChamp__front__contact__VEF.html#af94b5de56ae2c12ca5855da5449909f9">coeff_amort_num</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00136"></a>00136   <a class="code" href="classChamp__front__contact__VEF.html#ae5248790a936518a844a73ff224c03f0">coeff_amort_denum</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="comment">// Est-on dans le probleme conduction ?</span>
<a name="l00139"></a>00139 <span class="comment">// (utilise en rayo trans et semi_transp =&gt; factorisation)</span>
<a name="l00140"></a>00140   <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb = <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;equation().probleme();
<a name="l00141"></a>00141   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPb__Conduction.html" title="Classe Pb_Conduction Cette classe represente un probleme de conduction avec rho et Cp non uniformes :...">Pb_Conduction</a>,pb))
<a name="l00142"></a>00142     <a class="code" href="classChamp__front__contact__VEF.html#a9b7014d6fd4a0f5ea6c45eaa7aef6344" title="Est-on dans un probleme conduction ?">is_conduction</a>=1;
<a name="l00143"></a>00143   <span class="keywordflow">else</span>
<a name="l00144"></a>00144     <a class="code" href="classChamp__front__contact__VEF.html#a9b7014d6fd4a0f5ea6c45eaa7aef6344" title="Est-on dans un probleme conduction ?">is_conduction</a>=0;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="comment">// Initialisation des tableaux de gradients</span>
<a name="l00147"></a>00147   <a class="code" href="classChamp__front__contact__VEF.html#a440ef54824a74b645fb99c18f6b17d6a" title="NE FAIT RIEN, a surcharger Cette methode peut calculer et stocker des donnees utiles a la CL...">calculer_coeffs_echange</a>(temps); <span class="comment">//!&lt; sur instant present</span>
<a name="l00148"></a>00148 <span class="comment"></span>  <span class="keywordflow">return</span> 1;
<a name="l00149"></a>00149 }
<a name="l00150"></a>00150 
<a name="l00151"></a><a class="code" href="classChamp__front__contact__VEF.html#a4570a425c6f1c43047b1c5f307695bd4">00151</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a4570a425c6f1c43047b1c5f307695bd4">Champ_front_contact_VEF::creer</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nompb1, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom1,
<a name="l00152"></a>00152                                     <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nompb2, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom2,
<a name="l00153"></a>00153                                     <span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; nom_inco)
<a name="l00154"></a>00154 {
<a name="l00155"></a>00155   <a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a> = nom1;
<a name="l00156"></a>00156   <a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a> = nom2;
<a name="l00157"></a>00157   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_inco1, nom_inco2;
<a name="l00158"></a>00158   nom_inco1 = nom_inco;
<a name="l00159"></a>00159   nom_inco2 = nom_inco;
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) rch1;
<a name="l00162"></a>00162   <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb1=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>, <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">Interprete::objet</a>(nompb1));
<a name="l00163"></a>00163 
<a name="l00164"></a>00164   <span class="keywordflow">if</span> (!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPb__Conduction.html" title="Classe Pb_Conduction Cette classe represente un probleme de conduction avec rho et Cp non uniformes :...">Pb_Conduction</a>,pb1))
<a name="l00165"></a>00165     <span class="keywordflow">if</span> (pb1.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(1).<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>()!=<span class="stringliteral">&quot;temperature&quot;</span>)
<a name="l00166"></a>00166       nom_inco1 = <span class="stringliteral">&quot;concentration&quot;</span>;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   rch1 = pb1.<a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">get_champ</a>(nom_inco1);
<a name="l00169"></a>00169   <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, rch1.valeur()) ;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) rch2 ;
<a name="l00172"></a>00172   <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb2=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>, <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">Interprete::objet</a>(nompb2));
<a name="l00173"></a>00173 
<a name="l00174"></a>00174   <span class="keywordflow">if</span> (!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPb__Conduction.html" title="Classe Pb_Conduction Cette classe represente un probleme de conduction avec rho et Cp non uniformes :...">Pb_Conduction</a>,pb2))
<a name="l00175"></a>00175     <span class="keywordflow">if</span> (pb2.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(1).<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>()!=<span class="stringliteral">&quot;temperature&quot;</span>)
<a name="l00176"></a>00176       nom_inco2 = <span class="stringliteral">&quot;concentration&quot;</span>;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   rch2 = pb2.<a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">get_champ</a>(nom_inco2);
<a name="l00179"></a>00179   <a class="code" href="classChamp__front__contact__VEF.html#a88ecd53bc5e661db5f08a8b76d37f338">l_inconnue2</a>=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>, rch2.valeur()) ;
<a name="l00180"></a>00180 
<a name="l00181"></a>00181   <span class="keywordflow">if</span> (nom_inco1!=nom_inco2)
<a name="l00182"></a>00182     {
<a name="l00183"></a>00183       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Une condition limite de contact est mal specifiee&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00184"></a>00184       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Il existe une incoherence sur l&#39;inconnue mise en jeu de part et d&#39;autre de la frontiere de contact&quot;</span>&lt;&lt;finl;
<a name="l00185"></a>00185       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 
<a name="l00191"></a><a class="code" href="classChamp__front__contact__VEF.html#aae9eeb35ae323872587c44b0f034dea0">00191</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#aae9eeb35ae323872587c44b0f034dea0">Champ_front_contact_VEF::associer_ch_inc_base</a>(<span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; inco)
<a name="l00192"></a>00192 {
<a name="l00193"></a>00193   <a class="code" href="classChamp__front__contact__VEF.html#aed594b1ab2a4d1e99d078e11a71eec00">l_inconnue</a> = inco;
<a name="l00194"></a>00194 }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 
<a name="l00198"></a><a class="code" href="classChamp__front__contact__VEF.html#a891cf332f867115f7f0e3e127ad54556">00198</a> <a class="code" href="classChamp__front__base.html" title="classe Champ_front_base Classe de base pour la hierarchie des champs aux frontieres. Un objet Champ_front_base definit un champ sur la frontiere d&#39;un domaine. Un objet de type Champ_front_base sera associe a chaque condition aux limites. Champ_front_base derive de Champ_Proto, afin d&#39;avoir une interface conforme a tous les champs, et d&#39;heriter des operations courantes sur les Champs. Les deux methodes principales sont initialiser et mettre_a_jour. Ce sont les deux seules qui peuvent modifier les valeurs du champ. La methode initialiser est appelee une fois au debut du calcul. Elle ne doit pas dependre de donnees exterieures a l&#39;equation qui porte la CL (en effet, rien ne garantit que ces donnees sont initialisees). En revanche, les valeurs de l&#39;inconnue sur laquelle porte la CL peuvent etre utiles pour l&#39;initialisation =&gt; l&#39;inconnue est passee en parametre en lecture seule. La methode mettre_a_jour est appelee au debut de chaque pas de temps ou sous-pas-de-temps, elle peut utiliser des donnees exterieures a l&#39;equation. A charge a l&#39;algorithme de s&#39;assurer que ces donnees sont pertinentes... Dans le cas de champs stationnaires, la methode mettre_a_jour n&#39;a rien a faire et les valeurs sont remplies une fois pour toutes par la methode initialiser. Dans le cas de champs instationnaires, il y a plusieurs valeurs en temps et chacune peut etre mise a jour. Les Champ_front sont divises en : * Champ_front_uniforme, constant dans le temps et l&#39;espace * Champ_front_instationnaire_base, uniformes en espace mais variables en temps * Champ_front_var, variables en espace. Les Champ_front_var sont ensuite classes selon qu&#39;ils sont stationnaires ou instationnaires. Les valeurs sont stockees dans une roue de DoubleTab. Si le champ est uniforme en espace, les DoubleTab sont dimensionnes a 1. S&#39;il est stationnaire, la roue n&#39;a qu&#39;une valeur temporelle et le temps qui lui est assigne n&#39;a pas de sens. S&#39;il est instationnaire, les valeurs temporelles sont celles de l&#39;inconnue de l&#39;equation a laquelle se rapporte le champ.">Champ_front_base</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#a891cf332f867115f7f0e3e127ad54556">Champ_front_contact_VEF::affecter_</a>(<span class="keyword">const</span> <a class="code" href="classChamp__front__base.html" title="classe Champ_front_base Classe de base pour la hierarchie des champs aux frontieres. Un objet Champ_front_base definit un champ sur la frontiere d&#39;un domaine. Un objet de type Champ_front_base sera associe a chaque condition aux limites. Champ_front_base derive de Champ_Proto, afin d&#39;avoir une interface conforme a tous les champs, et d&#39;heriter des operations courantes sur les Champs. Les deux methodes principales sont initialiser et mettre_a_jour. Ce sont les deux seules qui peuvent modifier les valeurs du champ. La methode initialiser est appelee une fois au debut du calcul. Elle ne doit pas dependre de donnees exterieures a l&#39;equation qui porte la CL (en effet, rien ne garantit que ces donnees sont initialisees). En revanche, les valeurs de l&#39;inconnue sur laquelle porte la CL peuvent etre utiles pour l&#39;initialisation =&gt; l&#39;inconnue est passee en parametre en lecture seule. La methode mettre_a_jour est appelee au debut de chaque pas de temps ou sous-pas-de-temps, elle peut utiliser des donnees exterieures a l&#39;equation. A charge a l&#39;algorithme de s&#39;assurer que ces donnees sont pertinentes... Dans le cas de champs stationnaires, la methode mettre_a_jour n&#39;a rien a faire et les valeurs sont remplies une fois pour toutes par la methode initialiser. Dans le cas de champs instationnaires, il y a plusieurs valeurs en temps et chacune peut etre mise a jour. Les Champ_front sont divises en : * Champ_front_uniforme, constant dans le temps et l&#39;espace * Champ_front_instationnaire_base, uniformes en espace mais variables en temps * Champ_front_var, variables en espace. Les Champ_front_var sont ensuite classes selon qu&#39;ils sont stationnaires ou instationnaires. Les valeurs sont stockees dans une roue de DoubleTab. Si le champ est uniforme en espace, les DoubleTab sont dimensionnes a 1. S&#39;il est stationnaire, la roue n&#39;a qu&#39;une valeur temporelle et le temps qui lui est assigne n&#39;a pas de sens. S&#39;il est instationnaire, les valeurs temporelles sont celles de l&#39;inconnue de l&#39;equation a laquelle se rapporte le champ.">Champ_front_base</a>&amp; ch)
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00201"></a>00201 }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 
<a name="l00204"></a><a class="code" href="classChamp__front__contact__VEF.html#a333b8f20b7956f3a46a838661181349e">00204</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a333b8f20b7956f3a46a838661181349e">Champ_front_contact_VEF::calcul_grads_transf</a>(<span class="keywordtype">double</span> temps)
<a name="l00205"></a>00205 {
<a name="l00206"></a>00206 <span class="comment">// Dans le cas de raccords homogenes, c&#39;est a dire parfaitement coincidents</span>
<a name="l00207"></a>00207 <span class="comment">// au niveau du maillage, gradient_num_local = gradient_num_transf et</span>
<a name="l00208"></a>00208 <span class="comment">// gradient_fro_local = gradient_fro_transf</span>
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   <a class="code" href="classChamp__front__contact__VEF.html#a30e3b816ce3da14d165ddc5e8573742f">gradient_num_transf</a>.<a class="code" href="classArrOfDouble.html#a89ba688c107e2f6089501983dfa051b0" title="appelle operator=(a)">copy_array</a>(<a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>);
<a name="l00211"></a>00211   <a class="code" href="classChamp__front__contact__VEF.html#a886b9b59922de5d40ad98cdfa30e34c6">gradient_fro_transf</a>.<a class="code" href="classArrOfDouble.html#a89ba688c107e2f6089501983dfa051b0" title="appelle operator=(a)">copy_array</a>(<a class="code" href="classChamp__front__contact__VEF.html#a27c83a26ba78c5ce70266307b5e2ec63">gradient_fro_local</a>);
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00214"></a><a class="code" href="classChamp__front__contact__VEF.html#a4612b7acf0a521baeb91f742b9a3a9dd">00214</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a4612b7acf0a521baeb91f742b9a3a9dd">Champ_front_contact_VEF::calcul_grads_locaux</a>(<span class="keywordtype">double</span> temps)
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216 <span class="comment">// collection information problem local</span>
<a name="l00217"></a>00217   <a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a> = <a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a> ;
<a name="l00218"></a>00218   <a class="code" href="classChamp__front__contact__VEF.html#aae9eeb35ae323872587c44b0f034dea0">associer_ch_inc_base</a>(<a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>()) ;
<a name="l00219"></a>00219   <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; inco = <a class="code" href="classChamp__front__contact__VEF.html#aed594b1ab2a4d1e99d078e11a71eec00">l_inconnue</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>();
<a name="l00220"></a>00220   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; inco_valeurs = <a class="code" href="classChamp__front__contact__VEF.html#aed594b1ab2a4d1e99d078e11a71eec00">l_inconnue</a>-&gt;valeurs(temps);
<a name="l00221"></a>00221 <span class="comment">// const Equation_base&amp; eq=l_inconnue-&gt;equation();</span>
<a name="l00222"></a>00222   assert (<a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a> != <span class="stringliteral">&quot;??&quot;</span>) ;
<a name="l00223"></a>00223   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone_dis=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, <a class="code" href="classChamp__front__contact__VEF.html#a94473774f32a79b1a0ec68f1b23ff5f7">zone_dis</a>());
<a name="l00224"></a>00224   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_vf=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>, <a class="code" href="classChamp__front__contact__VEF.html#aad620b3a6369c3b76047ded5dba7d60a">front_dis</a>());
<a name="l00225"></a>00225   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vol = la_zone_dis.<a class="code" href="classZone__VF.html#aea771c835e561469d2d21dbca5fac1cf" title="renvoie le volume de la maille i.">volumes</a>();
<a name="l00226"></a>00226   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = la_zone_dis.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00227"></a>00227   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = la_zone_dis.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00228"></a>00228   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; face_normales = la_zone_dis.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>();
<a name="l00229"></a>00229   <span class="keywordtype">int</span> ndeb = la_front_vf.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00230"></a>00230   <span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; le_milieu = <a class="code" href="classChamp__front__contact__VEF.html#aff99e600619e24ea047ee03d8bbd0352">milieu</a>();
<a name="l00231"></a>00231   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> coeff_lam, coeff_turb;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="comment">// On test si le probleme local est un probleme thermohydraulique turbulent</span>
<a name="l00234"></a>00234 <span class="comment">// Et si le modele de turbulence utilise necessite l&#39;utilisation d&#39;une loi de paroi</span>
<a name="l00235"></a>00235   <span class="keywordtype">int</span> ind_loi_paroi=0;
<a name="l00236"></a>00236   <a class="code" href="classDoubleVect.html">DoubleVect</a> d_equiv;
<a name="l00237"></a>00237 <span class="comment">// DoubleTab positions_Pf;</span>
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="keywordflow">if</span> (!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classConvection__Diffusion__Concentration.html" title="classe Convection_Diffusion_Concentration Cas particulier de Convection_Diffusion_std pour un ou plus...">Convection_Diffusion_Concentration</a>,inco.equation()))
<a name="l00240"></a>00240     coeff_lam = le_milieu.<a class="code" href="classMilieu__base.html#a99251c07d04e1f13ec4c300bfe8757db" title="Renvoie la conductivite du milieu. (version const)">conductivite</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>();
<a name="l00241"></a>00241   <span class="keywordflow">else</span>
<a name="l00242"></a>00242     coeff_lam = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classConstituant.html" title="classe Constituant Cette classe represente le(s) constituant(s) d&#39;un fluide. Elle contient un champ a...">Constituant</a>,le_milieu).diffusivite_constituant().valeurs();
<a name="l00243"></a>00243   <span class="keywordtype">int</span> dim = coeff_lam.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>();
<a name="l00244"></a>00244 
<a name="l00245"></a>00245   <span class="keyword">const</span> <a class="code" href="classRef__Objet__U.html">RefObjU</a>&amp; mod = inco.equation().get_modele(<a class="code" href="Equation__base_8h.html#a2c9d34b2cc47e5b2b18347de20a77db5a0fecbd75e0b8b4c37ffd696e173a14c7">TURBULENCE</a>);
<a name="l00246"></a>00246   <span class="keywordflow">if</span> (mod.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00247"></a>00247     {
<a name="l00248"></a>00248       <span class="keyword">const</span> <a class="code" href="classModele__turbulence__scal__base.html" title="Classe Modele_turbulence_scal_base Cette classe represente un modele de turbulence pour une equation ...">Modele_turbulence_scal_base</a>&amp; mod_turb_scal = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classModele__turbulence__scal__base.html" title="Classe Modele_turbulence_scal_base Cette classe represente un modele de turbulence pour une equation ...">Modele_turbulence_scal_base</a>,mod.<a class="code" href="classRef__Objet__U.html#ad875112c0fd275aa0c0aa710481ab11e">valeur</a>());
<a name="l00249"></a>00249       coeff_turb = mod_turb_scal.<a class="code" href="classModele__turbulence__scal__base.html#aee459bd926d0bf0e57c1b1c404abe551">conductivite_turbulente</a>().<a class="code" href="classChamp__Fonc.html#a60b75eadb0987d488884e24fcb72d1e5" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>();
<a name="l00250"></a>00250 
<a name="l00251"></a>00251       <span class="keyword">const</span> <a class="code" href="classTurbulence__paroi__scal.html" title="Classe Turbulence_paroi_scal Classe generique de la hierarchie des turbulences au niveau de la paroi...">Turbulence_paroi_scal</a>&amp; loipar = mod_turb_scal.<a class="code" href="classModele__turbulence__scal__base.html#a3498c3b522536e605fb6810c88adf753" title="Renvoie la loi de turbulence sur la paroi&lt;br&gt;(version const)">loi_paroi</a>();
<a name="l00252"></a>00252 
<a name="l00253"></a>00253       <span class="keywordflow">if</span> (loipar.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00254"></a>00254         {
<a name="l00255"></a>00255           <span class="keywordflow">if</span>( loipar.<a class="code" href="classDeriv__Turbulence__paroi__scal__base.html#a1555c9b0653274c6c7551034143eccdd">valeur</a>().<a class="code" href="classTurbulence__paroi__scal__base.html#a8d862e042634c38c2cc2dfabc4671b17" title="Give a boolean indicating if we need to use equivant distance by default we consider that we use the ...">use_equivalent_distance</a>() )
<a name="l00256"></a>00256             {
<a name="l00257"></a>00257               ind_loi_paroi=1;
<a name="l00258"></a>00258 <span class="comment">// const Paroi_scal_hyd_base_VEF&amp; paroi_vef = ref_cast(Paroi_scal_hyd_base_VEF,loipar.valeur());</span>
<a name="l00259"></a>00259               <span class="keywordtype">int</span> nb_faces = la_front_vf.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00260"></a>00260               d_equiv.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00261"></a>00261 <span class="comment">// Recherche du bord correspondant</span>
<a name="l00262"></a>00262               <span class="keywordtype">int</span> i_bord=-1;
<a name="l00263"></a>00263               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n_bord=0; n_bord&lt;la_zone_dis.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a9bf185c52ad1809d954bba670d9aed8a" title="Renvoie le nombre de bords + le nombre de raccords + le nombre de faces frontieres internes...">nb_front_Cl</a>(); n_bord++)
<a name="l00264"></a>00264                 <span class="keywordflow">if</span> (la_zone_dis.<a class="code" href="classZone__VF.html#a45e54622328fcf035535edf96172c1e4" title="renvoie la ieme frontiere_discrete.">front_VF</a>(n_bord).<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>() == la_front_vf.<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>()) i_bord=n_bord;
<a name="l00265"></a>00265 <span class="comment">// Copie des donnees d&#39;un bord dans les tableaux locaux temporaires positions_Pf et d_equiv</span>
<a name="l00266"></a>00266               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_face=0; ind_face&lt;nb_faces; ind_face++)
<a name="l00267"></a>00267                 {
<a name="l00268"></a>00268 <span class="comment">// d_equiv(ind_face) = paroi_vef.equivalent_distance(i_bord,ind_face);</span>
<a name="l00269"></a>00269                   d_equiv(ind_face) = loipar.<a class="code" href="classDeriv__Turbulence__paroi__scal__base.html#a1555c9b0653274c6c7551034143eccdd">valeur</a>().<a class="code" href="classTurbulence__paroi__scal__base.html#af70d24c25a5d09299f25081e6c697da7">equivalent_distance</a>(i_bord,ind_face);
<a name="l00270"></a>00270                 }
<a name="l00271"></a>00271             }
<a name="l00272"></a>00272         }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <span class="keywordtype">int</span> i, j, num, fac_glob ;
<a name="l00277"></a>00277   <span class="keywordtype">int</span> fac_front, fac_loc;
<a name="l00278"></a>00278   <span class="keywordtype">double</span> <a class="code" href="Champ__P1iP1B__implementation_8cpp.html#aa8c8f49390c3cf7c702d71a71bc977e3">coeff</a>;
<a name="l00279"></a>00279   <span class="keywordtype">int</span> signe;
<a name="l00280"></a>00280   <span class="keywordtype">double</span> surface_pond, surface_face;
<a name="l00281"></a>00281   <span class="keywordtype">int</span> nb_faces_elem = la_zone_dis.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a548fbc7518be2f122b1a5c9589a443c2" title="Renvoie le nombre de face de type i des elements geometriques constituants la zone. Ex: les objets de la classe Prisme ont 2 types de faces: triangle ou quadrangle.">nb_faces_elem</a>();
<a name="l00282"></a>00282   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; face_normale = la_zone_dis.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>();
<a name="l00283"></a>00283 
<a name="l00284"></a>00284 <span class="comment">// calcul de grad_num_local et grad_fro_local</span>
<a name="l00285"></a>00285   <span class="keywordtype">int</span> nb_faces = la_front_vf.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00286"></a>00286   <span class="keywordflow">for</span> ( fac_front = 0 ; fac_front&lt;nb_faces ; fac_front++)
<a name="l00287"></a>00287     {
<a name="l00288"></a>00288       <a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>(fac_front) = 0.;
<a name="l00289"></a>00289       <a class="code" href="classChamp__front__contact__VEF.html#a27c83a26ba78c5ce70266307b5e2ec63">gradient_fro_local</a>(fac_front) = 0.;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291       fac_glob = fac_front +  ndeb ;
<a name="l00292"></a>00292       num = face_voisins(fac_glob,0);
<a name="l00293"></a>00293       <span class="keywordflow">if</span> (num &lt; 0 ) num = face_voisins(fac_glob,1);
<a name="l00294"></a>00294 
<a name="l00295"></a>00295       <span class="keywordflow">if</span>(dim!=1) coeff = coeff_lam(0,0) ;
<a name="l00296"></a>00296       <span class="keywordflow">else</span>       coeff = coeff_lam(num) ;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">// GF PQ</span>
<a name="l00299"></a>00299 <span class="comment">// ajout de lambda_t cote fluide egalite des flux entre lambda_s *DT_s/dy =(lambda+lambda_t)_f *DT_f/dy</span>
<a name="l00300"></a>00300 
<a name="l00301"></a>00301       <span class="keywordflow">if</span> (mod.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00302"></a>00302         coeff += coeff_turb(num);
<a name="l00303"></a>00303 
<a name="l00304"></a>00304       <a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front) = 0. ;
<a name="l00305"></a>00305       <span class="keywordtype">double</span> ratio = 0. ;
<a name="l00306"></a>00306       <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++) ratio += (face_normales(fac_glob,i) * face_normales(fac_glob,i));
<a name="l00307"></a>00307       ratio = sqrt(ratio) ;
<a name="l00308"></a>00308       <span class="keywordtype">int</span> fac;
<a name="l00309"></a>00309       surface_face=la_zone_dis.<a class="code" href="classZone__VF.html#a40c3382b189a4fc508cf1c3e37b04b21">face_surfaces</a>(fac_glob);
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 <span class="comment">// Calcul de la temperature moyenne dans la maille</span>
<a name="l00312"></a>00312       <span class="keywordflow">for</span> (i=0; i&lt;nb_faces_elem; i++)
<a name="l00313"></a>00313         {
<a name="l00314"></a>00314 <span class="comment">// On ne tient pas compte de la temperature de paroi</span>
<a name="l00315"></a>00315 <span class="comment">// pour calculer la temperature moyenne dans la maille.</span>
<a name="l00316"></a>00316           <span class="keywordflow">if</span> ( (j= elem_faces(num,i)) != fac_glob )
<a name="l00317"></a>00317             {
<a name="l00318"></a>00318 <span class="comment">// On pondere la moyenne par la surface</span>
<a name="l00319"></a>00319               surface_pond = 0.;
<a name="l00320"></a>00320               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> kk=0; kk&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; kk++)
<a name="l00321"></a>00321                 surface_pond -= (face_normale(j,kk)*la_zone_dis.<a class="code" href="classZone__VEF.html#a5c3e9d7f89d87989e338f5d725853e48">oriente_normale</a>(j,num)*face_normale(fac_glob,kk)*
<a name="l00322"></a>00322                                  la_zone_dis.<a class="code" href="classZone__VEF.html#a5c3e9d7f89d87989e338f5d725853e48">oriente_normale</a>(fac_glob,num))/(surface_face*surface_face);
<a name="l00323"></a>00323               <a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front) += inco_valeurs(j)*surface_pond;
<a name="l00324"></a>00324             }
<a name="l00325"></a>00325         }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327 
<a name="l00328"></a>00328       <span class="keywordflow">for</span> (fac=0; fac&lt;dimension+1; fac++)
<a name="l00329"></a>00329         <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00330"></a>00330           {
<a name="l00331"></a>00331             fac_loc = elem_faces(num,fac) ;
<a name="l00332"></a>00332             signe = la_zone_dis.<a class="code" href="classZone__VEF.html#a5c3e9d7f89d87989e338f5d725853e48">oriente_normale</a>(fac_loc, num);
<a name="l00333"></a>00333             <span class="keywordflow">if</span> (fac_loc != fac_glob) <a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>(fac_front) += (signe * face_normales(fac_glob,i) / ratio *
<a name="l00334"></a>00334                                                                          face_normales(fac_loc,i)*inco_valeurs(fac_loc)) ;
<a name="l00335"></a>00335             <span class="keywordflow">else</span>                 <a class="code" href="classChamp__front__contact__VEF.html#a27c83a26ba78c5ce70266307b5e2ec63">gradient_fro_local</a>(fac_front) += (signe * face_normales(fac_loc,i) / ratio *
<a name="l00336"></a>00336                                                                      face_normales(fac_loc,i)) ;
<a name="l00337"></a>00337           }
<a name="l00338"></a>00338 
<a name="l00339"></a>00339       <a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>(fac_front) *= (coeff / vol(num));
<a name="l00340"></a>00340       <a class="code" href="classChamp__front__contact__VEF.html#a27c83a26ba78c5ce70266307b5e2ec63">gradient_fro_local</a>(fac_front) *= (coeff / vol(num));
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 <span class="comment">// On recalcul gradient_num_local et gradient_fro_local si l&#39;ecoulement dans le domaine local est turbulent</span>
<a name="l00343"></a>00343       <span class="keywordflow">if</span> (ind_loi_paroi==1)
<a name="l00344"></a>00344         {
<a name="l00345"></a>00345           <a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>(fac_front) = 0.;
<a name="l00346"></a>00346           <a class="code" href="classChamp__front__contact__VEF.html#a27c83a26ba78c5ce70266307b5e2ec63">gradient_fro_local</a>(fac_front) = 0.;
<a name="l00347"></a>00347 
<a name="l00348"></a>00348           <a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>(fac_front) = -<a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front);
<a name="l00349"></a>00349           <span class="keywordtype">double</span> coeff_equiv = coeff/d_equiv(fac_front);
<a name="l00350"></a>00350           <a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>(fac_front) *=coeff_equiv;
<a name="l00351"></a>00351           <a class="code" href="classChamp__front__contact__VEF.html#a27c83a26ba78c5ce70266307b5e2ec63">gradient_fro_local</a>(fac_front) = coeff_equiv;
<a name="l00352"></a>00352         }
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354 }
<a name="l00355"></a>00355 
<a name="l00356"></a><a class="code" href="classChamp__front__contact__VEF.html#a19b72e69e3691a002e14a95fb078c463">00356</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a19b72e69e3691a002e14a95fb078c463" title="NE FAIT RIEN, a surcharger. Cette methode est appelee au debut de chaque pas de temps ou sous-pas-de-...">Champ_front_contact_VEF::mettre_a_jour</a>(<span class="keywordtype">double</span> temps )
<a name="l00357"></a>00357 {
<a name="l00358"></a>00358   <span class="keywordflow">if</span> (!<a class="code" href="classChamp__front__contact__VEF.html#a61e525b87320779faef7fb6f327c1e71">verification_faces_coin</a>)
<a name="l00359"></a>00359     {
<a name="l00360"></a>00360       <a class="code" href="classChamp__front__contact__VEF.html#ab7c9e9f4e197fadeb5492ef063a59636">test_faces_coin</a>();
<a name="l00361"></a>00361       <a class="code" href="classChamp__front__contact__VEF.html#a61e525b87320779faef7fb6f327c1e71">verification_faces_coin</a>=1;
<a name="l00362"></a>00362     }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364   <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; la_front=<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>-&gt;frontiere();
<a name="l00365"></a>00365   <span class="keywordtype">int</span> nb_faces=la_front.<a class="code" href="classFrontiere.html#aa073fe9dbdddde59471ee7032b256aa2" title="Renvoie le nombre de faces de la frontiere.">nb_faces</a>();
<a name="l00366"></a>00366   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab=<a class="code" href="classChamp__front__var__instationnaire.html#a4ce857027c891d19b36813a44f260400" title="Renvoie les valeurs au temps desire. Sinon, sort en erreur.">valeurs_au_temps</a>(temps);
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <span class="comment">// On recupere les coefficients gradient_num_transf et gradient_fro_transf de l&#39;autre probleme</span>
<a name="l00369"></a>00369   <a class="code" href="classDoubleVect.html">DoubleVect</a> gradient_num_transf_autre_pb(nb_faces);
<a name="l00370"></a>00370   <a class="code" href="classDoubleVect.html">DoubleVect</a> gradient_fro_transf_autre_pb(nb_faces);
<a name="l00371"></a>00371   <span class="keywordflow">if</span> (!<a class="code" href="classChamp__front__contact__VEF.html#a1c2a316988f868e2905d3e62887a6500">ch_fr_autre_pb</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00372"></a>00372     {
<a name="l00373"></a>00373       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Attention: Vous utilisez une condition de contact Champ_front_contact_VEF sur le bord &quot;</span> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a> &lt;&lt; <span class="stringliteral">&quot; sur le probleme &quot;</span>&lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#a274d0667aa56bab68285909236dbcd19">nom_pb1</a> &lt;&lt;<span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00374"></a>00374       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Vous devez avoir un Champ_front_contact_VEF equivalent sur le bord &quot;</span> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a> &lt;&lt; <span class="stringliteral">&quot; du probleme &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__contact__VEF.html#afe5587cb43c3cf6f7bc2edc667eb5e3c">nom_pb2</a>&lt;&lt;<span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l00375"></a>00375       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00376"></a>00376     }
<a name="l00377"></a>00377   <a class="code" href="classChamp__front__contact__VEF.html#aa3ee2e38d81235cddcaf21678f723f55">trace_face_raccord</a>(<a class="code" href="classChamp__front__contact__VEF.html#a54d544b659474485646c8f8cfc974903">fr_vf_autre_pb</a>.<a class="code" href="classRef__Front__VF.html#a148903c54fcf6655f9431e20feb1fd4f">valeur</a>(),<a class="code" href="classChamp__front__contact__VEF.html#a1c2a316988f868e2905d3e62887a6500">ch_fr_autre_pb</a>-&gt;gradient_num_transf,gradient_num_transf_autre_pb);
<a name="l00378"></a>00378   <a class="code" href="classChamp__front__contact__VEF.html#aa3ee2e38d81235cddcaf21678f723f55">trace_face_raccord</a>(<a class="code" href="classChamp__front__contact__VEF.html#a54d544b659474485646c8f8cfc974903">fr_vf_autre_pb</a>.<a class="code" href="classRef__Front__VF.html#a148903c54fcf6655f9431e20feb1fd4f">valeur</a>(),<a class="code" href="classChamp__front__contact__VEF.html#a1c2a316988f868e2905d3e62887a6500">ch_fr_autre_pb</a>-&gt;gradient_fro_transf,gradient_fro_transf_autre_pb);
<a name="l00379"></a>00379 <span class="comment">// </span>
<a name="l00380"></a>00380 <span class="comment">// </span>
<a name="l00381"></a>00381 <span class="comment">// gradient_fro_ h</span>
<a name="l00382"></a>00382 <span class="comment">// gradient_num_ -h*T</span>
<a name="l00383"></a>00383 <span class="comment">// Calcul de la temperature imposee</span>
<a name="l00384"></a>00384   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> fac_front=0; fac_front&lt;nb_faces; fac_front++)
<a name="l00385"></a>00385     {
<a name="l00386"></a>00386       tab(fac_front,0)= -(<a class="code" href="classChamp__front__contact__VEF.html#af1c4296cc63ee1602ee3395d4395bbe4">gradient_num_local</a>(fac_front) + gradient_num_transf_autre_pb(fac_front))
<a name="l00387"></a>00387                         / ( gradient_fro_transf_autre_pb(fac_front) + <a class="code" href="classChamp__front__contact__VEF.html#a27c83a26ba78c5ce70266307b5e2ec63">gradient_fro_local</a>(fac_front)) ;
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389 <span class="comment">// Verification de la coherence des temperatures de bord calculees</span>
<a name="l00390"></a>00390 <span class="comment">// verifier_scalaire_bord();</span>
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="classChamp__front__contact__VEF.html#a8beff0e475644fd300a43b9890bbd4e5">00394</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a8beff0e475644fd300a43b9890bbd4e5">Champ_front_contact_VEF::verifier_scalaire_bord</a>(<span class="keywordtype">double</span> temps)
<a name="l00395"></a>00395 {
<a name="l00396"></a>00396 <span class="comment">// Cette methode a pour but de verifier que la temperature de bord calculee pour chaque</span>
<a name="l00397"></a>00397 <span class="comment">// face num_face est bien comprise entre les temperatures moyennes sur les elements entourant</span>
<a name="l00398"></a>00398 <span class="comment">// num_face dans chaque milieu.</span>
<a name="l00399"></a>00399   <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; la_front=<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>-&gt;frontiere();
<a name="l00400"></a>00400   <span class="keywordtype">int</span> nb_faces=la_front.<a class="code" href="classFrontiere.html#aa073fe9dbdddde59471ee7032b256aa2" title="Renvoie le nombre de faces de la frontiere.">nb_faces</a>();
<a name="l00401"></a>00401 
<a name="l00402"></a>00402   <a class="code" href="classDoubleVect.html">DoubleVect</a> Scal_moy_autre_pb(nb_faces);
<a name="l00403"></a>00403   <a class="code" href="classChamp__front__contact__VEF.html#aa3ee2e38d81235cddcaf21678f723f55">trace_face_raccord</a>(<a class="code" href="classChamp__front__contact__VEF.html#a54d544b659474485646c8f8cfc974903">fr_vf_autre_pb</a>.<a class="code" href="classRef__Front__VF.html#a148903c54fcf6655f9431e20feb1fd4f">valeur</a>(),<a class="code" href="classChamp__front__contact__VEF.html#a1c2a316988f868e2905d3e62887a6500">ch_fr_autre_pb</a>-&gt;Scal_moy,Scal_moy_autre_pb);
<a name="l00404"></a>00404 
<a name="l00405"></a>00405   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab=<a class="code" href="classChamp__front__var__instationnaire.html#a4ce857027c891d19b36813a44f260400" title="Renvoie les valeurs au temps desire. Sinon, sort en erreur.">valeurs_au_temps</a>(temps);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="comment">// Verification sur les temperatures</span>
<a name="l00408"></a>00408   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> fac_front=0; fac_front&lt;nb_faces; fac_front++)
<a name="l00409"></a>00409     {
<a name="l00410"></a>00410       <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front) &gt; Scal_moy_autre_pb(fac_front))
<a name="l00411"></a>00411         {
<a name="l00412"></a>00412           <span class="keywordflow">if</span> ((tab(fac_front,0)&gt;<a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front)) || (tab(fac_front,0)&lt;Scal_moy_autre_pb(fac_front)))
<a name="l00413"></a>00413             {
<a name="l00414"></a>00414               <span class="keywordflow">if</span> (tab(fac_front,0)&gt;<a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front))
<a name="l00415"></a>00415                 {
<a name="l00416"></a>00416                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Attention, Tp n&#39;est pas compris entre les temperatures&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00417"></a>00417                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;fluide et solide au voisinage de la paroi&quot;</span>&lt;&lt;finl;
<a name="l00418"></a>00418                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Tp(&quot;</span>&lt;&lt;fac_front&lt;&lt;<span class="stringliteral">&quot;) = &quot;</span>&lt;&lt;tab(fac_front,0)&lt;&lt;<span class="stringliteral">&quot; est trop elevee&quot;</span>&lt;&lt;finl;
<a name="l00419"></a>00419                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;de DT = &quot;</span>&lt;&lt;tab(fac_front,0)-<a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front)&lt;&lt;<span class="stringliteral">&quot; K&quot;</span>&lt;&lt;finl;
<a name="l00420"></a>00420                 }
<a name="l00421"></a>00421               <span class="keywordflow">else</span>
<a name="l00422"></a>00422                 {
<a name="l00423"></a>00423                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Attention, Tp n&#39;est pas compris entre les temperatures&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00424"></a>00424                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;fluide et solide au voisinage de la paroi&quot;</span>&lt;&lt;finl;
<a name="l00425"></a>00425                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Tp(&quot;</span>&lt;&lt;fac_front&lt;&lt;<span class="stringliteral">&quot;) = &quot;</span>&lt;&lt;tab(fac_front,0)&lt;&lt;<span class="stringliteral">&quot; est trop basse &quot;</span>&lt;&lt;finl;
<a name="l00426"></a>00426                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;de DT = &quot;</span>&lt;&lt;Scal_moy_autre_pb(fac_front)-tab(fac_front,0)&lt;&lt;<span class="stringliteral">&quot; K&quot;</span>&lt;&lt;finl;
<a name="l00427"></a>00427                 }
<a name="l00428"></a>00428             }
<a name="l00429"></a>00429         }
<a name="l00430"></a>00430       <span class="keywordflow">else</span>
<a name="l00431"></a>00431         {
<a name="l00432"></a>00432           <span class="keywordflow">if</span> ((tab(fac_front,0)&lt;<a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front)) || (tab(fac_front,0)&gt;Scal_moy_autre_pb(fac_front)))
<a name="l00433"></a>00433             {
<a name="l00434"></a>00434               <span class="keywordflow">if</span> (tab(fac_front,0)&lt;<a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front))
<a name="l00435"></a>00435                 {
<a name="l00436"></a>00436                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Attention, Tp n&#39;est pas compris entre les temperatures&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00437"></a>00437                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;fluide et solide au voisinage de la paroi&quot;</span>&lt;&lt;finl;
<a name="l00438"></a>00438                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Tp(&quot;</span>&lt;&lt;fac_front&lt;&lt;<span class="stringliteral">&quot;) = &quot;</span>&lt;&lt;tab(fac_front,0)&lt;&lt;<span class="stringliteral">&quot; est trop basse&quot;</span>&lt;&lt;finl;
<a name="l00439"></a>00439                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;de DT = &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__contact__VEF.html#a9528b30118caea379fdd62ea5dd93f6a">Scal_moy</a>(fac_front)-tab(fac_front,0)&lt;&lt;<span class="stringliteral">&quot; K&quot;</span>&lt;&lt;finl;
<a name="l00440"></a>00440                 }
<a name="l00441"></a>00441               <span class="keywordflow">else</span>
<a name="l00442"></a>00442                 {
<a name="l00443"></a>00443                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Attention, Tp n&#39;est pas compris entre les temperatures&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00444"></a>00444                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;fluide et solide au voisinage de la paroi&quot;</span>&lt;&lt;finl;
<a name="l00445"></a>00445                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Tp(&quot;</span>&lt;&lt;fac_front&lt;&lt;<span class="stringliteral">&quot;) = &quot;</span>&lt;&lt;tab(fac_front,0)&lt;&lt;<span class="stringliteral">&quot; est trop elevee&quot;</span>&lt;&lt;finl;
<a name="l00446"></a>00446                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;de DT = &quot;</span>&lt;&lt;tab(fac_front,0)-Scal_moy_autre_pb(fac_front)&lt;&lt;<span class="stringliteral">&quot; K&quot;</span>&lt;&lt;finl;
<a name="l00447"></a>00447                 }
<a name="l00448"></a>00448             }
<a name="l00449"></a>00449         }
<a name="l00450"></a>00450     }
<a name="l00451"></a>00451 }
<a name="l00452"></a>00452 
<a name="l00453"></a>00453 
<a name="l00454"></a><a class="code" href="classChamp__front__contact__VEF.html#a440ef54824a74b645fb99c18f6b17d6a">00454</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a440ef54824a74b645fb99c18f6b17d6a" title="NE FAIT RIEN, a surcharger Cette methode peut calculer et stocker des donnees utiles a la CL...">Champ_front_contact_VEF::calculer_coeffs_echange</a>(<span class="keywordtype">double</span> temps)
<a name="l00455"></a>00455 {
<a name="l00456"></a>00456 <span class="comment">// Calcul de la temperature imposee</span>
<a name="l00457"></a>00457   <a class="code" href="classChamp__front__contact__VEF.html#a4612b7acf0a521baeb91f742b9a3a9dd">calcul_grads_locaux</a>(temps);
<a name="l00458"></a>00458   <a class="code" href="classChamp__front__contact__VEF.html#a333b8f20b7956f3a46a838661181349e">calcul_grads_transf</a>(temps);
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461 
<a name="l00462"></a><a class="code" href="classChamp__front__contact__VEF.html#a85df5880064d78dcd8e37786104a0546">00462</a> <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#a85df5880064d78dcd8e37786104a0546">Champ_front_contact_VEF::inconnue</a>()<span class="keyword"> const</span>
<a name="l00463"></a>00463 <span class="keyword"></span>{
<a name="l00464"></a>00464   <span class="keywordflow">return</span> <a class="code" href="classChamp__front__contact__VEF.html#aed594b1ab2a4d1e99d078e11a71eec00">l_inconnue</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>();
<a name="l00465"></a>00465 }
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 
<a name="l00468"></a><a class="code" href="classChamp__front__contact__VEF.html#a9d749d3650bfdb26a92b09b5af228c86">00468</a> <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#a9d749d3650bfdb26a92b09b5af228c86">Champ_front_contact_VEF::nom_bord_oppose</a>()<span class="keyword"> const</span>
<a name="l00469"></a>00469 <span class="keyword"></span>{
<a name="l00470"></a>00470   <span class="keywordflow">return</span> <a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a>;
<a name="l00471"></a>00471 }
<a name="l00472"></a>00472 
<a name="l00473"></a>00473 
<a name="l00474"></a><a class="code" href="classChamp__front__contact__VEF.html#a2968a8fc6b746aa9f8213decaa043424">00474</a> <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#a2968a8fc6b746aa9f8213decaa043424">Champ_front_contact_VEF::equation</a>()<span class="keyword"> const</span>
<a name="l00475"></a>00475 <span class="keyword"></span>{
<a name="l00476"></a>00476   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__contact__VEF.html#aed594b1ab2a4d1e99d078e11a71eec00">l_inconnue</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>()==0)
<a name="l00477"></a>00477     {
<a name="l00478"></a>00478       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;\nError in Champ_front_contact_VEF::equation() : not able to return the equation !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00479"></a>00479       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481   <span class="keywordflow">return</span> <a class="code" href="classChamp__front__contact__VEF.html#a85df5880064d78dcd8e37786104a0546">inconnue</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 
<a name="l00485"></a><a class="code" href="classChamp__front__contact__VEF.html#aff99e600619e24ea047ee03d8bbd0352">00485</a> <span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#aff99e600619e24ea047ee03d8bbd0352">Champ_front_contact_VEF::milieu</a>()<span class="keyword"> const</span>
<a name="l00486"></a>00486 <span class="keyword"></span>{
<a name="l00487"></a>00487   <span class="keywordflow">return</span> <a class="code" href="classChamp__front__contact__VEF.html#a2968a8fc6b746aa9f8213decaa043424">equation</a>().<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>();
<a name="l00488"></a>00488 }
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 
<a name="l00491"></a><a class="code" href="classChamp__front__contact__VEF.html#a94473774f32a79b1a0ec68f1b23ff5f7">00491</a> <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#a94473774f32a79b1a0ec68f1b23ff5f7">Champ_front_contact_VEF::zone_dis</a>()<span class="keyword"> const</span>
<a name="l00492"></a>00492 <span class="keyword"></span>{
<a name="l00493"></a>00493   <span class="keywordflow">return</span> <a class="code" href="classChamp__front__contact__VEF.html#a85df5880064d78dcd8e37786104a0546">inconnue</a>().<a class="code" href="classChamp__base.html#a298ee24f3efdf2f60f39a13966a20bcd">zone_dis_base</a>();
<a name="l00494"></a>00494 }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 
<a name="l00497"></a><a class="code" href="classChamp__front__contact__VEF.html#a6319ff1db0ab130a50a89749ab9ffaf0">00497</a> <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis__base.html" title="classe Zone_Cl_dis_base Les objets Zone_Cl_dis_base representent les conditions aux limites discretis...">Zone_Cl_dis_base</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#a6319ff1db0ab130a50a89749ab9ffaf0">Champ_front_contact_VEF::zone_Cl_dis</a>()<span class="keyword"> const</span>
<a name="l00498"></a>00498 <span class="keyword"></span>{
<a name="l00499"></a>00499   <span class="keywordflow">return</span> <a class="code" href="classChamp__front__contact__VEF.html#a2968a8fc6b746aa9f8213decaa043424">equation</a>().<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>().<a class="code" href="classDeriv__Zone__Cl__dis__base.html#a6b56880f00b604e1f13970ec6d5bc077">valeur</a>();
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 
<a name="l00503"></a><a class="code" href="classChamp__front__contact__VEF.html#aad620b3a6369c3b76047ded5dba7d60a">00503</a> <span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#aad620b3a6369c3b76047ded5dba7d60a">Champ_front_contact_VEF::front_dis</a>()<span class="keyword"> const</span>
<a name="l00504"></a>00504 <span class="keyword"></span>{
<a name="l00505"></a>00505   <span class="keywordflow">return</span> <a class="code" href="classChamp__front__contact__VEF.html#a94473774f32a79b1a0ec68f1b23ff5f7">zone_dis</a>().<a class="code" href="classZone__dis__base.html#a62455512d02a9b6217e6c7924a41782a">frontiere_dis</a>(<a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a>);
<a name="l00506"></a>00506 }
<a name="l00507"></a>00507 
<a name="l00508"></a>00508 
<a name="l00509"></a><a class="code" href="classChamp__front__contact__VEF.html#af6243d1a07d3425195f4c79383e48788">00509</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#af6243d1a07d3425195f4c79383e48788">Champ_front_contact_VEF::calcul_coeff_amort</a>()
<a name="l00510"></a>00510 {
<a name="l00511"></a>00511   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone_dis=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;equation().zone_dis().<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>());
<a name="l00512"></a>00512   <span class="keywordtype">int</span> rang_front = la_zone_dis.<a class="code" href="classZone__dis__base.html#ab4595e57d3d8c173e4b2438688aeda93">rang_frontiere</a>(<a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a>);
<a name="l00513"></a>00513   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_vf=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>, la_zone_dis.<a class="code" href="classZone__VF.html#a56f6611653484717846fadfbb7a0edfc" title="renvoie la ieme frontiere_discrete.">frontiere_dis</a>(rang_front));
<a name="l00514"></a>00514   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vol = la_zone_dis.<a class="code" href="classZone__VF.html#aea771c835e561469d2d21dbca5fac1cf" title="renvoie le volume de la maille i.">volumes</a>();
<a name="l00515"></a>00515   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins = la_zone_dis.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00516"></a>00516   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; face_normales = la_zone_dis.<a class="code" href="classZone__VEF.html#a5742d75972e4846bf9fbb6ed5715053e">face_normales</a>();
<a name="l00517"></a>00517   <span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; le_milieu = <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;equation().milieu();
<a name="l00518"></a>00518 
<a name="l00519"></a>00519   <span class="keywordtype">int</span> nb_faces = la_front_vf.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00520"></a>00520   <span class="keywordtype">int</span> ndeb = la_front_vf.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00521"></a>00521 
<a name="l00522"></a>00522   <span class="keywordtype">int</span> fac_front;
<a name="l00523"></a>00523   <span class="keywordflow">for</span> (fac_front = 0; fac_front&lt;nb_faces; fac_front++)
<a name="l00524"></a>00524     {
<a name="l00525"></a>00525       <span class="keywordtype">int</span> fac = fac_front + ndeb;
<a name="l00526"></a>00526       <span class="keywordtype">int</span> num = face_voisins(fac,0);
<a name="l00527"></a>00527       <span class="keywordflow">if</span> (num &lt; 0) num = face_voisins(fac,1);
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 <span class="comment">// calcul de la surface de la face courante</span>
<a name="l00530"></a>00530       <span class="keywordtype">double</span> ratio = 0.;
<a name="l00531"></a>00531       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++) ratio += (face_normales(fac,i) * face_normales(fac,i));
<a name="l00532"></a>00532       ratio = sqrt(ratio);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534       <span class="keywordtype">double</span> alpha;
<a name="l00535"></a>00535       <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,le_milieu.<a class="code" href="classMilieu__base.html#a4da7a57f2b9cafb4aaf9309360b6a29f" title="Renvoie la diffusivite du milieu. (version const)">diffusivite</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()))
<a name="l00536"></a>00536         alpha=le_milieu.<a class="code" href="classMilieu__base.html#a4da7a57f2b9cafb4aaf9309360b6a29f" title="Renvoie la diffusivite du milieu. (version const)">diffusivite</a>()(0,0);
<a name="l00537"></a>00537       <span class="keywordflow">else</span>
<a name="l00538"></a>00538         {
<a name="l00539"></a>00539           <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_alpha = le_milieu.<a class="code" href="classMilieu__base.html#a4da7a57f2b9cafb4aaf9309360b6a29f" title="Renvoie la diffusivite du milieu. (version const)">diffusivite</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>();
<a name="l00540"></a>00540           alpha=tab_alpha(num);
<a name="l00541"></a>00541         }
<a name="l00542"></a>00542 
<a name="l00543"></a>00543       <span class="keywordtype">double</span> volume = vol(num);
<a name="l00544"></a>00544 
<a name="l00545"></a>00545       <a class="code" href="classChamp__front__contact__VEF.html#af94b5de56ae2c12ca5855da5449909f9">coeff_amort_num</a>(fac_front) = volume/ratio;
<a name="l00546"></a>00546       <a class="code" href="classChamp__front__contact__VEF.html#ae5248790a936518a844a73ff224c03f0">coeff_amort_denum</a>(fac_front) = (alpha*ratio)/volume;
<a name="l00547"></a>00547     }
<a name="l00548"></a>00548 }
<a name="l00549"></a>00549 
<a name="l00550"></a>00550 
<a name="l00551"></a><a class="code" href="classChamp__front__contact__VEF.html#a14a9d12414f9e6b81d620b97e5e7a8b6">00551</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a14a9d12414f9e6b81d620b97e5e7a8b6">Champ_front_contact_VEF::associer_front_vf_et_ch_front_autre_pb</a>()
<a name="l00552"></a>00552 {
<a name="l00553"></a>00553   <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; temp_autre = <a class="code" href="classChamp__front__contact__VEF.html#a88ecd53bc5e661db5f08a8b76d37f338">l_inconnue2</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>();
<a name="l00554"></a>00554   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn = temp_autre.<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00555"></a>00555   <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis__base.html" title="classe Zone_Cl_dis_base Les objets Zone_Cl_dis_base representent les conditions aux limites discretis...">Zone_Cl_dis_base</a>&amp; zcl = eqn.<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>().<a class="code" href="classDeriv__Zone__Cl__dis__base.html#a6b56880f00b604e1f13970ec6d5bc077">valeur</a>();
<a name="l00556"></a>00556 
<a name="l00557"></a>00557   <span class="keywordtype">int</span> num_cl;
<a name="l00558"></a>00558   <span class="keywordflow">for</span> (num_cl = 0; num_cl&lt;zcl.<a class="code" href="classZone__Cl__dis__base.html#aa6f1df56cfd6e2eae83cc991c7cc9b41" title="Renvoie le nombre de conditions aux limites.">nb_cond_lim</a>(); num_cl++)
<a name="l00559"></a>00559     {
<a name="l00560"></a>00560       <span class="keyword">const</span> <a class="code" href="classCond__lim__base.html" title="classe Cond_lim_base Classe de base pour la hierarchie des classes qui representent les differentes c...">Cond_lim_base</a>&amp; la_cl = zcl.<a class="code" href="classZone__Cl__dis__base.html#af75e0ed7786863e4d333bfb29d67c323" title="Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>(num_cl);
<a name="l00561"></a>00561       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; le_nom_cl = la_cl.<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>().<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>();
<a name="l00562"></a>00562       <span class="keywordflow">if</span> (le_nom_cl == <a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a>)
<a name="l00563"></a>00563         {
<a name="l00564"></a>00564           <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>,la_cl.<a class="code" href="classCond__lim__base.html#a8cddc02f544ee44bebd5bae0e6a9581c">champ_front</a>().<a class="code" href="classDeriv__Champ__front__base.html#a5405a20c106b868a23805a45c4436a53">valeur</a>()))
<a name="l00565"></a>00565             {
<a name="l00566"></a>00566               <a class="code" href="classChamp__front__contact__VEF.html#a1c2a316988f868e2905d3e62887a6500">ch_fr_autre_pb</a> = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>,la_cl.<a class="code" href="classCond__lim__base.html#a8cddc02f544ee44bebd5bae0e6a9581c">champ_front</a>().<a class="code" href="classDeriv__Champ__front__base.html#a5405a20c106b868a23805a45c4436a53">valeur</a>());
<a name="l00567"></a>00567 <span class="comment">// Test de securite pour verifier que l&#39;on a bien saisit le champ</span>
<a name="l00568"></a>00568 <span class="comment">// front_contact_VEF.</span>
<a name="l00569"></a>00569               <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__contact__VEF.html#a1c2a316988f868e2905d3e62887a6500">ch_fr_autre_pb</a>-&gt;nom_pb1 == <a class="code" href="classChamp__front__contact__VEF.html#a274d0667aa56bab68285909236dbcd19">nom_pb1</a>)
<a name="l00570"></a>00570                 <span class="keywordflow">if</span> (!(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__front__contact__fictif__VEF.html" title="classe Champ_front_contact_fictif_VEF Classe derivee de Champ_front_contact_VEF elle-meme derivant de...">Champ_front_contact_fictif_VEF</a>,(*<span class="keyword">this</span>))))
<a name="l00571"></a>00571                   {
<a name="l00572"></a>00572                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Attention, erreur lors de la lecture du Champ_Front_Contact_VEF&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00573"></a>00573                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;La syntaxe a utiliser est : nom_pb_local nom_bord_local nom_pb_distant nom_bord_distant&quot;</span>&lt;&lt;finl;
<a name="l00574"></a>00574                     <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00575"></a>00575                   }
<a name="l00576"></a>00576               <a class="code" href="classChamp__front__contact__VEF.html#a54d544b659474485646c8f8cfc974903">fr_vf_autre_pb</a>=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>, la_cl.<a class="code" href="classCond__lim__base.html#ad88b3b516351146c85e8fce1df0f691a" title="Renvoie la frontiere discretisee a laquelle les conditions aux limites s&#39;appliquent.">frontiere_dis</a>());
<a name="l00577"></a>00577             }
<a name="l00578"></a>00578         }
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580 }
<a name="l00581"></a>00581 
<a name="l00582"></a><a class="code" href="classChamp__front__contact__VEF.html#aa3ee2e38d81235cddcaf21678f723f55">00582</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__front__contact__VEF.html#aa3ee2e38d81235cddcaf21678f723f55">Champ_front_contact_VEF::trace_face_raccord</a>(<span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf,<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; y,<a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; x)
<a name="l00583"></a>00583 {
<a name="l00584"></a>00584 <span class="comment">// On verifie que la frontiere est de type Raccord_distant_homogene</span>
<a name="l00585"></a>00585   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classRaccord__distant__homogene.html">Raccord_distant_homogene</a>,fr_vf.<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>()))
<a name="l00586"></a>00586     fr_vf.<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#a2993ce1565d3eeda6e2bb9e4aaeca175">trace_face_distant</a>(y,x);
<a name="l00587"></a>00587   <span class="keywordflow">else</span>
<a name="l00588"></a>00588     {
<a name="l00589"></a>00589       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>()&gt;1)
<a name="l00590"></a>00590         {
<a name="l00591"></a>00591 <span class="comment">// On teste si on a bien un raccord distant homogene car sinon le tableau connect n&#39;est pas rempli en parallele</span>
<a name="l00592"></a>00592 <span class="comment">// En effet remplir_connect_bords n&#39;est fait qu&#39;en sequentiel</span>
<a name="l00593"></a>00593           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The boundary named &quot;</span> &lt;&lt; fr_vf.<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; is not a &#39;Raccord Distant Homogene&#39;&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00594"></a>00594           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Use keyword modif_bord_to_raccord to change the boundary of kind Paroi into a boundary of kind Raccord&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00595"></a>00595           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;after you read the meshes during the partitioning.&quot;</span> &lt;&lt; finl;
<a name="l00596"></a>00596           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00597"></a>00597         }
<a name="l00598"></a>00598 <span class="comment">// On traite un raccord local</span>
<a name="l00599"></a>00599       <span class="keywordtype">int</span> nb_fac_front=x.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00600"></a>00600       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> fac_front=0; fac_front&lt;nb_fac_front; fac_front++)
<a name="l00601"></a>00601         x(fac_front) = y(<a class="code" href="classChamp__front__contact__VEF.html#ad078e8501d944ffb3adf46d6d0036d4e" title="Tableau de connectivite des faces de bord des deux bord conjugues (en sequentiel)">connect_bords</a>(fac_front));
<a name="l00602"></a>00602     }
<a name="l00603"></a>00603 
<a name="l00604"></a>00604   <span class="keywordflow">return</span> x;
<a name="l00605"></a>00605 }
<a name="l00606"></a>00606 
<a name="l00607"></a>00607 
<a name="l00608"></a><a class="code" href="classChamp__front__contact__VEF.html#a4042d6599b59d2397d041f68d50b7496">00608</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a4042d6599b59d2397d041f68d50b7496">Champ_front_contact_VEF::remplir_connect_bords</a>()
<a name="l00609"></a>00609 {
<a name="l00610"></a>00610 <span class="comment">// Par convention, les grandeurs notees sans indice ainsi que celle notees</span>
<a name="l00611"></a>00611 <span class="comment">// avec un indice 1 correspondent au probleme courant, celle notees avec</span>
<a name="l00612"></a>00612 <span class="comment">// un indice 2 correspondent aux grandeurs du probleme couple avec le probleme</span>
<a name="l00613"></a>00613 <span class="comment">// courant</span>
<a name="l00614"></a>00614   <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; la_front = <a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>-&gt;frontiere();
<a name="l00615"></a>00615   <span class="keywordtype">int</span> nb_faces = la_front.<a class="code" href="classFrontiere.html#aa073fe9dbdddde59471ee7032b256aa2" title="Renvoie le nombre de faces de la frontiere.">nb_faces</a>();
<a name="l00616"></a>00616 
<a name="l00617"></a>00617 <span class="comment">// </span>
<a name="l00618"></a>00618 <span class="comment">// collection des informations du probleme 1</span>
<a name="l00619"></a>00619 <span class="comment">// </span>
<a name="l00620"></a>00620   <a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a> = <a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a> ;
<a name="l00621"></a>00621   <a class="code" href="classChamp__front__contact__VEF.html#aae9eeb35ae323872587c44b0f034dea0">associer_ch_inc_base</a>(<a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>()) ;
<a name="l00622"></a>00622 
<a name="l00623"></a>00623   assert (<a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a> != <span class="stringliteral">&quot;??&quot;</span>) ;
<a name="l00624"></a>00624   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone_dis1=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;equation().zone_dis().<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>());
<a name="l00625"></a>00625 
<a name="l00626"></a>00626   <span class="keywordtype">int</span> rang_front1 = la_zone_dis1.<a class="code" href="classZone__dis__base.html#ab4595e57d3d8c173e4b2438688aeda93">rang_frontiere</a>(<a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a>);
<a name="l00627"></a>00627   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_vf1=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>, la_zone_dis1.<a class="code" href="classZone__VF.html#a56f6611653484717846fadfbb7a0edfc" title="renvoie la ieme frontiere_discrete.">frontiere_dis</a>(rang_front1));
<a name="l00628"></a>00628   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv1 = la_zone_dis1.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00629"></a>00629   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisin=la_zone_dis1.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00630"></a>00630 
<a name="l00631"></a>00631   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = la_zone_dis1.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00632"></a>00632 
<a name="l00633"></a>00633   <span class="keywordtype">int</span> ndeb1 = la_front_vf1.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 <span class="comment">// </span>
<a name="l00636"></a>00636 <span class="comment">// collection des informations du probleme 2</span>
<a name="l00637"></a>00637 <span class="comment">// </span>
<a name="l00638"></a>00638   <a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a> = <a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a> ;
<a name="l00639"></a>00639   <a class="code" href="classChamp__front__contact__VEF.html#aae9eeb35ae323872587c44b0f034dea0">associer_ch_inc_base</a>(<a class="code" href="classChamp__front__contact__VEF.html#a88ecd53bc5e661db5f08a8b76d37f338">l_inconnue2</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>()) ;
<a name="l00640"></a>00640 
<a name="l00641"></a>00641   assert (<a class="code" href="classChamp__front__contact__VEF.html#a948b4f7d6eb1aa38f26c7426a4132d30">nom_bord</a> != <span class="stringliteral">&quot;??&quot;</span>) ;
<a name="l00642"></a>00642   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone_dis2=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, <a class="code" href="classChamp__front__contact__VEF.html#a88ecd53bc5e661db5f08a8b76d37f338">l_inconnue2</a>-&gt;equation().zone_dis().<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>());
<a name="l00643"></a>00643 
<a name="l00644"></a>00644   <span class="keywordtype">int</span> rang_front2 = la_zone_dis2.<a class="code" href="classZone__dis__base.html#ab4595e57d3d8c173e4b2438688aeda93">rang_frontiere</a>(<a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a>);
<a name="l00645"></a>00645   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_vf2=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>, la_zone_dis2.<a class="code" href="classZone__VF.html#a56f6611653484717846fadfbb7a0edfc" title="renvoie la ieme frontiere_discrete.">frontiere_dis</a>(rang_front2));
<a name="l00646"></a>00646   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv2 = la_zone_dis2.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00647"></a>00647   <span class="keywordtype">int</span> ndeb2 = la_front_vf2.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00648"></a>00648 
<a name="l00649"></a>00649 <span class="comment">// On verifie que les numerotations des faces sur ce bord sont bien compatibles</span>
<a name="l00650"></a>00650 <span class="comment">// pour les deux problemes consideres.</span>
<a name="l00651"></a>00651   <span class="keywordtype">int</span> i,j,k,temoin,temoin_tot;
<a name="l00652"></a>00652 
<a name="l00653"></a>00653   <span class="keywordtype">double</span> <a class="code" href="Solv__GCP__NS_8cpp.html#ab6aa1075b965c7713d8db20dd3a8e09b">erreur</a> = 0.;
<a name="l00654"></a>00654   <span class="keywordtype">int</span> ii;
<a name="l00655"></a>00655   <span class="keywordflow">for</span> (ii=0; ii&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; ii++)
<a name="l00656"></a>00656     <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(xv1(ndeb1,ii) - xv1(ndeb1+nb_faces,ii)) &gt; erreur )
<a name="l00657"></a>00657       erreur = <a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(xv1(ndeb1,ii) - xv1(ndeb1+nb_faces,ii));
<a name="l00658"></a>00658 <span class="comment">// </span>
<a name="l00659"></a>00659 <span class="comment">// L&#39;erreur est 1.e-5 fois la distance maximale entre deux faces de bord</span>
<a name="l00660"></a>00660   erreur *=1.e-5;
<a name="l00661"></a>00661 
<a name="l00662"></a>00662 <span class="comment">// GF la reference pour calculer l&#39;erreur ne correspondait a rien</span>
<a name="l00663"></a>00663 <span class="comment">// distance entre la premiere face du bord et la face apres le bord ?????</span>
<a name="l00664"></a>00664 
<a name="l00665"></a>00665 
<a name="l00666"></a>00666 
<a name="l00667"></a>00667 
<a name="l00668"></a>00668 <span class="comment">// Version PAT</span>
<a name="l00669"></a>00669 <span class="comment">// erreur = Objet_U::precision_geom</span>
<a name="l00670"></a>00670   <a class="code" href="classChamp__front__contact__VEF.html#ad078e8501d944ffb3adf46d6d0036d4e" title="Tableau de connectivite des faces de bord des deux bord conjugues (en sequentiel)">connect_bords</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00671"></a>00671 
<a name="l00672"></a>00672 <span class="comment">// assert(la_front_vf2.nb_faces()==la_front_vf1.nb_faces());</span>
<a name="l00673"></a>00673 <span class="comment">// Cout &lt;&lt; &quot;nb faces = &quot; &lt;&lt; la_front_vf2.nb_faces() &lt;&lt; finl;</span>
<a name="l00674"></a>00674 <span class="comment">// Cout &lt;&lt; &quot;nb faces = &quot; &lt;&lt; la_front_vf1.nb_faces() &lt;&lt; finl;</span>
<a name="l00675"></a>00675 
<a name="l00676"></a>00676 <span class="comment">// PQ : 06/08/07</span>
<a name="l00677"></a>00677 
<a name="l00678"></a>00678   <span class="keywordtype">int</span> nb_faces1 = la_front_vf1.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00679"></a>00679   <span class="keywordtype">int</span> nb_faces2 = la_front_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00680"></a>00680 
<a name="l00681"></a>00681   <span class="keywordflow">if</span>(nb_faces1!=nb_faces2)
<a name="l00682"></a>00682     {
<a name="l00683"></a>00683       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Warning, the number of faces (&quot;</span> &lt;&lt; nb_faces1 &lt;&lt; <span class="stringliteral">&quot;) on the boundary &quot;</span> &lt;&lt; la_front_vf1.<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>();
<a name="l00684"></a>00684       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; of the domain &quot;</span> &lt;&lt; la_zone_dis1.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00685"></a>00685       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;is different of the number of faces (&quot;</span> &lt;&lt; nb_faces2 &lt;&lt; <span class="stringliteral">&quot;) on the boundary &quot;</span> &lt;&lt; la_front_vf2.<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>();
<a name="l00686"></a>00686       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; of the domain &quot;</span> &lt;&lt; la_zone_dis2.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; ...&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00687"></a>00687       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The exchange condition with the paroi_contact can&#39;t succeed!&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00688"></a>00688       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier=<span class="stringliteral">&quot;connectivity_failed_&quot;</span>;
<a name="l00689"></a>00689       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier_med=<span class="stringliteral">&quot;connectivity_failed_&quot;</span>;
<a name="l00690"></a>00690       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_pb;
<a name="l00691"></a>00691       <span class="keywordflow">if</span>(nb_faces1&gt;nb_faces2)
<a name="l00692"></a>00692         {
<a name="l00693"></a>00693           nom_pb=<a class="code" href="classChamp__front__contact__VEF.html#afe5587cb43c3cf6f7bc2edc667eb5e3c">nom_pb2</a>;
<a name="l00694"></a>00694           fichier+=<a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a>;
<a name="l00695"></a>00695           fichier_med+=nom_pb;
<a name="l00696"></a>00696           fichier_med+=<span class="stringliteral">&quot;.med&quot;</span>;
<a name="l00697"></a>00697           <a class="code" href="classChamp__front__contact__VEF.html#aad81dbc4d6f35d31fc1fe8b31f5ffaf3">connectivity_failed</a>(la_zone_dis1, nb_faces1, ndeb1, la_zone_dis2, nb_faces2, ndeb2, fichier, fichier_med);
<a name="l00698"></a>00698         }
<a name="l00699"></a>00699       <span class="keywordflow">else</span>
<a name="l00700"></a>00700         {
<a name="l00701"></a>00701           nom_pb=<a class="code" href="classChamp__front__contact__VEF.html#a274d0667aa56bab68285909236dbcd19">nom_pb1</a>;
<a name="l00702"></a>00702           fichier+=<a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a>;
<a name="l00703"></a>00703           fichier_med+=nom_pb;
<a name="l00704"></a>00704           fichier_med+=<span class="stringliteral">&quot;.med&quot;</span>;
<a name="l00705"></a>00705           <a class="code" href="classChamp__front__contact__VEF.html#aad81dbc4d6f35d31fc1fe8b31f5ffaf3">connectivity_failed</a>(la_zone_dis2, nb_faces2, ndeb2, la_zone_dis1, nb_faces1, ndeb1, fichier, fichier_med);
<a name="l00706"></a>00706         }
<a name="l00707"></a>00707       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Boundaries &quot;</span> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a> &lt;&lt; <span class="stringliteral">&quot; from problem &quot;</span> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#a274d0667aa56bab68285909236dbcd19">nom_pb1</a> &lt;&lt; finl;
<a name="l00708"></a>00708       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;       and &quot;</span> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#aa4c33b390656999b918807c955b84205">nom_bord2</a> &lt;&lt; <span class="stringliteral">&quot; from problem &quot;</span> &lt;&lt; <a class="code" href="classChamp__front__contact__VEF.html#afe5587cb43c3cf6f7bc2edc667eb5e3c">nom_pb2</a> &lt;&lt; finl;
<a name="l00709"></a>00709       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;have not the same number of faces.&quot;</span> &lt;&lt; finl;
<a name="l00710"></a>00710       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Coincidence between meshes may be recovered &quot;</span> &lt;&lt; finl;
<a name="l00711"></a>00711       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;by cutting mesh associated to &quot;</span> &lt;&lt; nom_pb &lt;&lt; finl;
<a name="l00712"></a>00712       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;thanks to decouper_bord_coincident keyword or HOMARD tool (see reference manual).&quot;</span> &lt;&lt; finl;
<a name="l00713"></a>00713       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00714"></a>00714     }
<a name="l00715"></a>00715 
<a name="l00716"></a>00716 
<a name="l00717"></a>00717 
<a name="l00718"></a>00718 <span class="comment">// PQ : 03/03 : redefinition du tableau de connectivite</span>
<a name="l00719"></a>00719 <span class="comment">// processus &quot;optimise&quot; et applicable a tout type de configuration</span>
<a name="l00720"></a>00720 
<a name="l00721"></a>00721   temoin_tot=0;
<a name="l00722"></a>00722 
<a name="l00723"></a>00723   <span class="keywordflow">for</span> (i=0; i&lt;nb_faces; i++)
<a name="l00724"></a>00724     {
<a name="l00725"></a>00725 
<a name="l00726"></a>00726 <span class="comment">// on redefinit erreur pour chaque face comme etant:</span>
<a name="l00727"></a>00727 <span class="comment">// on cherche l&#39;elt associe a la face, on calcule le min du centre</span>
<a name="l00728"></a>00728 <span class="comment">// de gravite de l&#39;elem a ses faces -&gt; d1</span>
<a name="l00729"></a>00729 <span class="comment">// d1*1e-2</span>
<a name="l00730"></a>00730       <span class="keywordtype">int</span> elem_voisin=face_voisin(ndeb1+i,0);
<a name="l00731"></a>00731       <span class="keywordflow">if</span> (elem_voisin==-1)
<a name="l00732"></a>00732         elem_voisin=face_voisin(ndeb1+i,1);
<a name="l00733"></a>00733       <span class="keywordtype">int</span> nbf=elem_faces.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00734"></a>00734       <span class="keywordtype">double</span> d1=<a class="code" href="Double_8h.html#ae0ee0cebfad5968da0ad6cc7a49e16b6">DMAXFLOAT</a>;
<a name="l00735"></a>00735       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> f=0; f&lt;nbf; f++)
<a name="l00736"></a>00736         {
<a name="l00737"></a>00737           <span class="keywordtype">int</span> <a class="code" href="Lois__sodium_8h.html#a23f45359b08cb1d0538697b4f2d3dbbe">f2</a>=elem_faces(elem_voisin,f);
<a name="l00738"></a>00738           <span class="keywordflow">if</span> (dimension==2)
<a name="l00739"></a>00739             d1=<a class="code" href="Double_8h.html#a04e03b7aad55468a8b8eae326087338a">dmin</a>(d1,<a class="code" href="distances__VEF_8cpp.html#ab2783144acec34a0b426e3b6745696cd">distance_2D</a>(f2,elem_voisin,la_zone_dis1));
<a name="l00740"></a>00740           <span class="keywordflow">else</span>
<a name="l00741"></a>00741             d1=<a class="code" href="Double_8h.html#a04e03b7aad55468a8b8eae326087338a">dmin</a>(d1,<a class="code" href="distances__VEF_8cpp.html#aec2af8d7d36c326744c660af71eab979">distance_3D</a>(f2,elem_voisin,la_zone_dis1));
<a name="l00742"></a>00742         }
<a name="l00743"></a>00743       erreur=d1*1e-2;
<a name="l00744"></a>00744       temoin=0;
<a name="l00745"></a>00745       <span class="keywordflow">for</span> (j=i; j&lt;nb_faces; j++)
<a name="l00746"></a>00746         {
<a name="l00747"></a>00747 <span class="comment">// O.C. : dimension plutot que dim1 dans la boucle suivante :</span>
<a name="l00748"></a>00748 <span class="comment">// for (k=0 ; k&lt;dim1 ; k++)</span>
<a name="l00749"></a>00749           <span class="keywordflow">for</span> (k=0 ; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> ; k++)
<a name="l00750"></a>00750             <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(xv1(ndeb1+i,k) - xv2(ndeb2+j,k)) &gt; erreur) <span class="keywordflow">break</span>;
<a name="l00751"></a>00751 <span class="comment">// Si on a passe le test ci-dessus, c&#39;est que les dim coordonnees de la face</span>
<a name="l00752"></a>00752 <span class="comment">// sont les memes (d == dim)</span>
<a name="l00753"></a>00753           <span class="keywordflow">if</span> (k==dimension)
<a name="l00754"></a>00754             {
<a name="l00755"></a>00755 <span class="comment"></span>
<a name="l00756"></a>00756 <span class="comment">              /** if (j==1)</span>
<a name="l00757"></a>00757 <span class="comment">                  {</span>
<a name="l00758"></a>00758 <span class="comment">                  Cout &lt;&lt; &quot;connect i j &quot; &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; j &lt;&lt; finl;</span>
<a name="l00759"></a>00759 <span class="comment">                  Cout &lt;&lt; &quot;xv i j &quot; &lt;&lt; xv1(ndeb1+i,0) &lt;&lt; &quot; &quot; &lt;&lt; xv2(ndeb2+j,0) &lt;&lt; finl;</span>
<a name="l00760"></a>00760 <span class="comment">                  Cout &lt;&lt; &quot;xv i j &quot; &lt;&lt; xv1(ndeb1+i,1) &lt;&lt; &quot; &quot; &lt;&lt; xv2(ndeb2+j,1) &lt;&lt; finl;</span>
<a name="l00761"></a>00761 <span class="comment">                  Cout &lt;&lt; &quot;xv i j &quot; &lt;&lt; xv1(ndeb1+i,2) &lt;&lt; &quot; &quot; &lt;&lt; xv2(ndeb2+j,2) &lt;&lt; finl;</span>
<a name="l00762"></a>00762 <span class="comment">                  Cout &lt;&lt; &quot;err i j &quot; &lt;&lt; dabs(xv1(ndeb1+i,0) - xv2(ndeb2+j,0)) &lt;&lt; finl;</span>
<a name="l00763"></a>00763 <span class="comment">                  Cout &lt;&lt; &quot;err i j &quot; &lt;&lt; dabs(xv1(ndeb1+i,1) - xv2(ndeb2+j,1)) &lt;&lt; finl;</span>
<a name="l00764"></a>00764 <span class="comment">                  Cout &lt;&lt; &quot;err i j &quot; &lt;&lt; dabs(xv1(ndeb1+i,2) - xv2(ndeb2+j,2)) &lt;&lt; finl;</span>
<a name="l00765"></a>00765 <span class="comment">                  Cout &lt;&lt; &quot;erreur &quot; &lt;&lt; erreur &lt;&lt; finl;</span>
<a name="l00766"></a>00766 <span class="comment">                  }*/</span>
<a name="l00767"></a>00767               <a class="code" href="classChamp__front__contact__VEF.html#ad078e8501d944ffb3adf46d6d0036d4e" title="Tableau de connectivite des faces de bord des deux bord conjugues (en sequentiel)">connect_bords</a>(i)=j;
<a name="l00768"></a>00768               temoin=1;
<a name="l00769"></a>00769               <span class="keywordflow">break</span>;
<a name="l00770"></a>00770             }
<a name="l00771"></a>00771         }
<a name="l00772"></a>00772       <span class="keywordflow">if</span>(temoin==0)
<a name="l00773"></a>00773         <span class="keywordflow">for</span> (j=0; j&lt;i; j++)
<a name="l00774"></a>00774           {
<a name="l00775"></a>00775             <span class="keywordflow">for</span> (k=0 ; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> ; k++)
<a name="l00776"></a>00776               <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(xv1(ndeb1+i,k) - xv2(ndeb2+j,k)) &gt; erreur) <span class="keywordflow">break</span>;
<a name="l00777"></a>00777 
<a name="l00778"></a>00778 <span class="comment">// Si on a passe le test ci-dessus, c&#39;est que les dim coordonnees de la face</span>
<a name="l00779"></a>00779 <span class="comment">// sont les memes (d == dim)</span>
<a name="l00780"></a>00780             <span class="keywordflow">if</span> (k==dimension)
<a name="l00781"></a>00781               {<span class="comment"></span>
<a name="l00782"></a>00782 <span class="comment">                /**  if (j==1)</span>
<a name="l00783"></a>00783 <span class="comment">                     {</span>
<a name="l00784"></a>00784 <span class="comment">                     Cout &lt;&lt; &quot;connect i j &quot; &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; j &lt;&lt; finl;</span>
<a name="l00785"></a>00785 <span class="comment">                     Cout &lt;&lt; &quot;xv i j &quot; &lt;&lt; xv1(ndeb1+i,0) &lt;&lt; &quot; &quot; &lt;&lt; xv2(ndeb2+j,0) &lt;&lt; finl;</span>
<a name="l00786"></a>00786 <span class="comment">                     Cout &lt;&lt; &quot;xv i j &quot; &lt;&lt; xv1(ndeb1+i,1) &lt;&lt; &quot; &quot; &lt;&lt; xv2(ndeb2+j,1) &lt;&lt; finl;</span>
<a name="l00787"></a>00787 <span class="comment">                     Cout &lt;&lt; &quot;xv i j &quot; &lt;&lt; xv1(ndeb1+i,2) &lt;&lt; &quot; &quot; &lt;&lt; xv2(ndeb2+j,2) &lt;&lt; finl;</span>
<a name="l00788"></a>00788 <span class="comment">                     Cout &lt;&lt; &quot;err i j &quot; &lt;&lt; dabs(xv1(ndeb1+i,0) - xv2(ndeb2+j,0)) &lt;&lt; finl;</span>
<a name="l00789"></a>00789 <span class="comment">                     Cout &lt;&lt; &quot;err i j &quot; &lt;&lt; dabs(xv1(ndeb1+i,1) - xv2(ndeb2+j,1)) &lt;&lt; finl;</span>
<a name="l00790"></a>00790 <span class="comment">                     Cout &lt;&lt; &quot;err i j &quot; &lt;&lt; dabs(xv1(ndeb1+i,2) - xv2(ndeb2+j,2)) &lt;&lt; finl;</span>
<a name="l00791"></a>00791 <span class="comment">                     Cout &lt;&lt; &quot;erreur &quot; &lt;&lt; erreur &lt;&lt; finl;</span>
<a name="l00792"></a>00792 <span class="comment">                     }*/</span>
<a name="l00793"></a>00793                 <a class="code" href="classChamp__front__contact__VEF.html#ad078e8501d944ffb3adf46d6d0036d4e" title="Tableau de connectivite des faces de bord des deux bord conjugues (en sequentiel)">connect_bords</a>(i)=j;
<a name="l00794"></a>00794                 temoin=1;
<a name="l00795"></a>00795                 <span class="keywordflow">break</span>;
<a name="l00796"></a>00796               }
<a name="l00797"></a>00797           }
<a name="l00798"></a>00798       <span class="keywordflow">if</span>(temoin==0)
<a name="l00799"></a>00799         {
<a name="l00800"></a>00800           temoin_tot=1;
<a name="l00801"></a>00801           <span class="keywordflow">if</span>(dimension==2)
<a name="l00802"></a>00802             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; no connectivity found for face : &quot;</span>&lt;&lt;ndeb1+i&lt;&lt;<span class="stringliteral">&quot; located at : x= &quot;</span>&lt;&lt;xv1(ndeb1+i,0)&lt;&lt;<span class="stringliteral">&quot; y= &quot;</span>&lt;&lt;xv1(ndeb1+i,1)&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00803"></a>00803           <span class="keywordflow">else</span>
<a name="l00804"></a>00804             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; no connectivity found for face : &quot;</span>&lt;&lt;ndeb1+i&lt;&lt;<span class="stringliteral">&quot; located at : x= &quot;</span>&lt;&lt;xv1(ndeb1+i,0)&lt;&lt;<span class="stringliteral">&quot; y= &quot;</span>&lt;&lt;xv1(ndeb1+i,1)&lt;&lt; <span class="stringliteral">&quot; z= &quot;</span>&lt;&lt;xv1(ndeb1+i,2)&lt;&lt;finl;
<a name="l00805"></a>00805         }
<a name="l00806"></a>00806     }
<a name="l00807"></a>00807 
<a name="l00808"></a>00808 
<a name="l00809"></a>00809   <span class="keywordflow">if</span>(temoin_tot==1)
<a name="l00810"></a>00810     {
<a name="l00811"></a>00811       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; Process stopped at Champ_front_contact_VEF::remplir_connect_bords() &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00812"></a>00812       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00813"></a>00813     }
<a name="l00814"></a>00814 <span class="comment">// on verifie que l&#39;on a bien cree une bijection</span>
<a name="l00815"></a>00815   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> inv_connect_bords;
<a name="l00816"></a>00816   inv_connect_bords.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(nb_faces, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00817"></a>00817   inv_connect_bords=-1;
<a name="l00818"></a>00818   <span class="keywordflow">for</span> (i=0; i&lt;nb_faces; i++)
<a name="l00819"></a>00819     {
<a name="l00820"></a>00820       inv_connect_bords(<a class="code" href="classChamp__front__contact__VEF.html#ad078e8501d944ffb3adf46d6d0036d4e" title="Tableau de connectivite des faces de bord des deux bord conjugues (en sequentiel)">connect_bords</a>(i))=i;
<a name="l00821"></a>00821     }
<a name="l00822"></a>00822   <span class="keywordflow">if</span> (<a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(inv_connect_bords) &lt; 0)
<a name="l00823"></a>00823     {
<a name="l00824"></a>00824       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Pb a la creation de connect_bord, ce n&#39;est pas une bijection&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00825"></a>00825       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;tableau inverse &quot;</span>&lt;&lt;inv_connect_bords&lt;&lt;finl;
<a name="l00826"></a>00826       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;tableau connect &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__contact__VEF.html#ad078e8501d944ffb3adf46d6d0036d4e" title="Tableau de connectivite des faces de bord des deux bord conjugues (en sequentiel)">connect_bords</a>&lt;&lt;finl;
<a name="l00827"></a>00827       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00828"></a>00828     }
<a name="l00829"></a>00829 }
<a name="l00830"></a>00830 
<a name="l00831"></a><a class="code" href="classChamp__front__contact__VEF.html#a107b97c534814bbcbbc359c161fe871f">00831</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a107b97c534814bbcbbc359c161fe871f">Champ_front_contact_VEF::remplir_faces_coin</a>()
<a name="l00832"></a>00832 {
<a name="l00833"></a>00833   <span class="keyword">const</span> <a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>&amp; la_zcl_dis1=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>, <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;equation().zone_Cl_dis().<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>());
<a name="l00834"></a>00834   <span class="keyword">const</span> <a class="code" href="classConds__lim.html">Conds_lim</a>&amp; conds_lim = la_zcl_dis1.<a class="code" href="classZone__Cl__dis__base.html#af75e0ed7786863e4d333bfb29d67c323" title="Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>();
<a name="l00835"></a>00835   <span class="keywordtype">int</span> size_cl = conds_lim.size();
<a name="l00836"></a>00836   <span class="keywordtype">int</span> size = <a class="code" href="classChamp__front__contact__VEF.html#ae795b8f335209d2ca3cdc4fdead9f3d5">elems_voisin_bord_</a>.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>();
<a name="l00837"></a>00837   <span class="keywordtype">int</span> elem_vois, elem_vois_autre_fr;
<a name="l00838"></a>00838 
<a name="l00839"></a>00839 <span class="comment">// Parcours des faces de la frontiere</span>
<a name="l00840"></a>00840 
<a name="l00841"></a>00841   <span class="keywordtype">int</span> elem_vois_face_1, elem_vois_face_2;
<a name="l00842"></a>00842   <a class="code" href="classChamp__front__contact__VEF.html#a77b3fa7910dc0bba8bf4d52fe520dec7">faces_coin</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(size);
<a name="l00843"></a>00843 
<a name="l00844"></a>00844   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_face_1=0; ind_face_1&lt;size; ind_face_1++)
<a name="l00845"></a>00845     {
<a name="l00846"></a>00846       elem_vois_face_1 = <a class="code" href="classChamp__front__contact__VEF.html#ae795b8f335209d2ca3cdc4fdead9f3d5">elems_voisin_bord_</a>[ind_face_1];
<a name="l00847"></a>00847       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_face_2 =0; ind_face_2&lt;size; ind_face_2++)
<a name="l00848"></a>00848         {
<a name="l00849"></a>00849           <span class="keywordflow">if</span> (ind_face_1!=ind_face_2)
<a name="l00850"></a>00850             {
<a name="l00851"></a>00851               elem_vois_face_2 = <a class="code" href="classChamp__front__contact__VEF.html#ae795b8f335209d2ca3cdc4fdead9f3d5">elems_voisin_bord_</a>[ind_face_2];
<a name="l00852"></a>00852               <span class="keywordflow">if</span> ((elem_vois_face_1==elem_vois_face_2) &amp;&amp; (elem_vois_face_1!=-1))
<a name="l00853"></a>00853                 <a class="code" href="classChamp__front__contact__VEF.html#a77b3fa7910dc0bba8bf4d52fe520dec7">faces_coin</a>(ind_face_1)=1;
<a name="l00854"></a>00854 
<a name="l00855"></a>00855             }
<a name="l00856"></a>00856         }
<a name="l00857"></a>00857     }
<a name="l00858"></a>00858 
<a name="l00859"></a>00859 <span class="comment">// On tient compte ensuite des faces appaartenant a d autres fontieres</span>
<a name="l00860"></a>00860 <span class="comment">// pouvant appartenir a un element coin</span>
<a name="l00861"></a>00861 
<a name="l00862"></a>00862   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_cl=0; num_cl&lt;size_cl; num_cl++)
<a name="l00863"></a>00863     {
<a name="l00864"></a>00864       <span class="keyword">const</span> <a class="code" href="classChamp__front.html" title="classe Champ_front Classe generique de la hierarchie des champs aux frontieres, un objet Champ_front ...">Champ_front</a>&amp; ch_front = conds_lim[num_cl]-&gt;champ_front();
<a name="l00865"></a>00865       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>,ch_front.<a class="code" href="classDeriv__Champ__front__base.html#a5405a20c106b868a23805a45c4436a53">valeur</a>()))
<a name="l00866"></a>00866         {
<a name="l00867"></a>00867           <span class="keyword">const</span> <a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>&amp; ch_front_contact = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>,ch_front.<a class="code" href="classDeriv__Champ__front__base.html#a5405a20c106b868a23805a45c4436a53">valeur</a>());
<a name="l00868"></a>00868           <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_bord_autre_fr = ch_front_contact.<a class="code" href="classChamp__front__contact__VEF.html#a2d602813fd6a11a71785b759a67645c2">get_nom_bord1</a>();
<a name="l00869"></a>00869 
<a name="l00870"></a>00870           <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a>!=nom_bord_autre_fr)
<a name="l00871"></a>00871             {
<a name="l00872"></a>00872               <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; elems_autre_fr =  ch_front_contact.<a class="code" href="classChamp__front__contact__VEF.html#aec3327309a1d05895ee4c00a4ee57bdc">get_elems_voisin_bord</a>();
<a name="l00873"></a>00873               <span class="keywordtype">int</span> size_autre_fr = elems_autre_fr.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>();
<a name="l00874"></a>00874               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_face =0; ind_face&lt;size; ind_face++)
<a name="l00875"></a>00875                 {
<a name="l00876"></a>00876                   elem_vois = <a class="code" href="classChamp__front__contact__VEF.html#ae795b8f335209d2ca3cdc4fdead9f3d5">elems_voisin_bord_</a>[ind_face];
<a name="l00877"></a>00877                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_face_autre_fr =0; ind_face_autre_fr&lt;size_autre_fr; ind_face_autre_fr++)
<a name="l00878"></a>00878                     {
<a name="l00879"></a>00879                       elem_vois_autre_fr = elems_autre_fr[ind_face_autre_fr];
<a name="l00880"></a>00880                       <span class="keywordflow">if</span> ((elem_vois==elem_vois_autre_fr) &amp;&amp; (elem_vois!=-1))
<a name="l00881"></a>00881                         <a class="code" href="classChamp__front__contact__VEF.html#a77b3fa7910dc0bba8bf4d52fe520dec7">faces_coin</a>(ind_face)=1;
<a name="l00882"></a>00882                     }
<a name="l00883"></a>00883                 }
<a name="l00884"></a>00884             }
<a name="l00885"></a>00885         }
<a name="l00886"></a>00886     }
<a name="l00887"></a>00887 }
<a name="l00888"></a>00888 
<a name="l00889"></a><a class="code" href="classChamp__front__contact__VEF.html#a53aeff332c0f2aee17092e4d856ac2ad">00889</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#a53aeff332c0f2aee17092e4d856ac2ad">Champ_front_contact_VEF::remplir_elems_voisin_bord</a>()
<a name="l00890"></a>00890 {
<a name="l00891"></a>00891   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone_dis1=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;zone_dis_base());
<a name="l00892"></a>00892   <span class="keywordtype">int</span> rang_front1 = la_zone_dis1.<a class="code" href="classZone__dis__base.html#ab4595e57d3d8c173e4b2438688aeda93">rang_frontiere</a>(<a class="code" href="classChamp__front__contact__VEF.html#a17e1e0bf260fcc3cf714d2bfb6a0e502">nom_bord1</a>);
<a name="l00893"></a>00893   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_vf1=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>, la_zone_dis1.<a class="code" href="classZone__VF.html#a56f6611653484717846fadfbb7a0edfc" title="renvoie la ieme frontiere_discrete.">frontiere_dis</a>(rang_front1));
<a name="l00894"></a>00894   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisins1 = la_zone_dis1.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00895"></a>00895   <span class="keywordtype">int</span> nb_faces = la_front_vf1.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00896"></a>00896   <span class="keywordtype">int</span> ndeb = la_front_vf1.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00897"></a>00897 
<a name="l00898"></a>00898   <span class="keywordtype">int</span> voisin_0, voisin_1;
<a name="l00899"></a>00899   <span class="keywordtype">int</span> elem_vois;
<a name="l00900"></a>00900   <a class="code" href="classChamp__front__contact__VEF.html#ae795b8f335209d2ca3cdc4fdead9f3d5">elems_voisin_bord_</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces);
<a name="l00901"></a>00901   <a class="code" href="classChamp__front__contact__VEF.html#ae795b8f335209d2ca3cdc4fdead9f3d5">elems_voisin_bord_</a>=-1;
<a name="l00902"></a>00902 
<a name="l00903"></a>00903   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face=0; face&lt;nb_faces; face++)
<a name="l00904"></a>00904     {
<a name="l00905"></a>00905       elem_vois=-1;
<a name="l00906"></a>00906       voisin_0 = face_voisins1(ndeb+face,0);
<a name="l00907"></a>00907       voisin_1 = face_voisins1(ndeb+face,1);
<a name="l00908"></a>00908 
<a name="l00909"></a>00909       <span class="keywordflow">if</span> (voisin_0!=-1)
<a name="l00910"></a>00910         elem_vois=voisin_0;
<a name="l00911"></a>00911       <span class="keywordflow">else</span>
<a name="l00912"></a>00912         elem_vois=voisin_1;
<a name="l00913"></a>00913       <a class="code" href="classChamp__front__contact__VEF.html#ae795b8f335209d2ca3cdc4fdead9f3d5">elems_voisin_bord_</a>(face) = elem_vois;
<a name="l00914"></a>00914     }
<a name="l00915"></a>00915 
<a name="l00916"></a>00916 }
<a name="l00917"></a><a class="code" href="classChamp__front__contact__VEF.html#ab7c9e9f4e197fadeb5492ef063a59636">00917</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#ab7c9e9f4e197fadeb5492ef063a59636">Champ_front_contact_VEF::test_faces_coin</a>()
<a name="l00918"></a>00918 {
<a name="l00919"></a>00919   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; la_zone_dis1=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;zone_dis_base());
<a name="l00920"></a>00920   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv1 = la_zone_dis1.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00921"></a>00921   <span class="keyword">const</span> <a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>&amp; la_zcl_dis1=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>, <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;equation().zone_Cl_dis().<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>());
<a name="l00922"></a>00922   <span class="keyword">const</span> <a class="code" href="classConds__lim.html">Conds_lim</a>&amp; conds_lim = la_zcl_dis1.<a class="code" href="classZone__Cl__dis__base.html#af75e0ed7786863e4d333bfb29d67c323" title="Renvoie la i-ieme condition aux limites. (version const)">les_conditions_limites</a>();
<a name="l00923"></a>00923   <span class="keywordtype">int</span> size_cl = conds_lim.size();
<a name="l00924"></a>00924 
<a name="l00925"></a>00925   <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_dom = <a class="code" href="classChamp__front__contact__VEF.html#ada0cdf5a89a351e78eb9cb1cf96bea28">l_inconnue1</a>-&gt;equation().probleme().domaine().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>();
<a name="l00926"></a>00926   <span class="keywordtype">int</span> <a class="code" href="Solv__GCP__NS_8cpp.html#ab6aa1075b965c7713d8db20dd3a8e09b">erreur</a> = 0;
<a name="l00927"></a>00927   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_cl=0; num_cl&lt;size_cl; num_cl++)
<a name="l00928"></a>00928     {
<a name="l00929"></a>00929       <span class="keyword">const</span> <a class="code" href="classChamp__front.html" title="classe Champ_front Classe generique de la hierarchie des champs aux frontieres, un objet Champ_front ...">Champ_front</a>&amp; ch_front = conds_lim[num_cl]-&gt;champ_front();
<a name="l00930"></a>00930       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>,ch_front.<a class="code" href="classDeriv__Champ__front__base.html#a5405a20c106b868a23805a45c4436a53">valeur</a>()))
<a name="l00931"></a>00931         {
<a name="l00932"></a>00932           <span class="keyword">const</span> <a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>&amp; ch_front_contact = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__front__contact__VEF.html" title="classe Champ_front_contact_VEF Permet le couplage scalaire (temperature ou concentration) entre probl...">Champ_front_contact_VEF</a>,ch_front.<a class="code" href="classDeriv__Champ__front__base.html#a5405a20c106b868a23805a45c4436a53">valeur</a>());
<a name="l00933"></a>00933           <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_bord_fr = ch_front_contact.<a class="code" href="classChamp__front__contact__VEF.html#a2d602813fd6a11a71785b759a67645c2">get_nom_bord1</a>();
<a name="l00934"></a>00934           <span class="keywordtype">int</span> rang_front_fr = la_zone_dis1.<a class="code" href="classZone__dis__base.html#ab4595e57d3d8c173e4b2438688aeda93">rang_frontiere</a>(nom_bord_fr);
<a name="l00935"></a>00935           <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_vf_fr = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>, la_zone_dis1.<a class="code" href="classZone__VF.html#a56f6611653484717846fadfbb7a0edfc" title="renvoie la ieme frontiere_discrete.">frontiere_dis</a>(rang_front_fr));
<a name="l00936"></a>00936           <span class="keywordtype">int</span> ndeb_fr = la_front_vf_fr.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00937"></a>00937           <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; faces_coin_fr = ch_front_contact.<a class="code" href="classChamp__front__contact__VEF.html#a6791a5d41d65c8f3d681e7c58254536d">get_faces_coin</a>();
<a name="l00938"></a>00938 
<a name="l00939"></a>00939           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;faces_coin_fr.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>(); i++)
<a name="l00940"></a>00940             {
<a name="l00941"></a>00941               <span class="keywordflow">if</span> (faces_coin_fr(i)!=0)
<a name="l00942"></a>00942                 {
<a name="l00943"></a>00943                   erreur =1;
<a name="l00944"></a>00944                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;La face suivante du bord &quot;</span>&lt;&lt;nom_bord_fr&lt;&lt;<span class="stringliteral">&quot; est une face de coin pour le domaine &quot;</span>&lt;&lt;nom_dom&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00945"></a>00945                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; k++)
<a name="l00946"></a>00946                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;x_&quot;</span>&lt;&lt;k&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;xv1(ndeb_fr+i,k)&lt;&lt;finl;
<a name="l00947"></a>00947                 }
<a name="l00948"></a>00948             }
<a name="l00949"></a>00949         }
<a name="l00950"></a>00950     }
<a name="l00951"></a>00951   <span class="keywordflow">if</span> (erreur)
<a name="l00952"></a>00952     {
<a name="l00953"></a>00953       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Le codage de Champ_front_contact_VEF n est pas disponible pour cette situation&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00954"></a>00954       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Decouper la (ou les) maille concernee en utilisant l interprete VerifierCoin&quot;</span>&lt;&lt;finl;
<a name="l00955"></a>00955       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;ou en utilisant Trianguler_H en 2D ou Tetraedriser_homogene en 3D&quot;</span>&lt;&lt;finl;
<a name="l00956"></a>00956 <span class="comment">// exit();</span>
<a name="l00957"></a>00957     }
<a name="l00958"></a>00958 }
<a name="l00959"></a>00959 
<a name="l00960"></a><a class="code" href="classChamp__front__contact__VEF.html#aad81dbc4d6f35d31fc1fe8b31f5ffaf3">00960</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__contact__VEF.html#aad81dbc4d6f35d31fc1fe8b31f5ffaf3">Champ_front_contact_VEF::connectivity_failed</a>(<span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zvef1, <span class="keywordtype">int</span>&amp; nb_faces1, <span class="keywordtype">int</span>&amp; ndeb1,
<a name="l00961"></a>00961                                                   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zvef2, <span class="keywordtype">int</span>&amp; nb_faces2, <span class="keywordtype">int</span>&amp; ndeb2,
<a name="l00962"></a>00962                                                   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier, <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier_med)
<a name="l00963"></a>00963 {
<a name="l00964"></a>00964 
<a name="l00965"></a>00965   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_voisin2 = zvef2.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00966"></a>00966   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces2  = zvef2.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00967"></a>00967   <span class="keywordtype">int</span> nb_elem2 = zvef2.<a class="code" href="classZone__dis__base.html#a790cb2f6bc2928518799e748313d0eb3">nb_elem</a>();
<a name="l00968"></a>00968 
<a name="l00969"></a>00969   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv1  = zvef1.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00970"></a>00970 
<a name="l00971"></a>00971   <span class="keywordtype">int</span> nbf = <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>+1; <span class="comment">//!&lt; nombre de faces par element</span>
<a name="l00972"></a>00972 <span class="comment"></span>  <span class="keywordtype">int</span> fac,elem,face1,face2,elem2,trouve;
<a name="l00973"></a>00973   <span class="keywordtype">int</span> j;
<a name="l00974"></a>00974 
<a name="l00975"></a>00975 <span class="comment">// Creation du champ P0</span>
<a name="l00976"></a>00976 
<a name="l00977"></a>00977   <a class="code" href="classChamp__Fonc__P0__VEF.html" title="classe Champ_Fonc_P0_VEF">Champ_Fonc_P0_VEF</a> chp;
<a name="l00978"></a>00978   chp.<a class="code" href="classChamp__Fonc__P0__VEF.html#ab4f8b790974e11979b721480bb24c45d">associer_zone_dis_base</a>(zvef2);
<a name="l00979"></a>00979   chp.<a class="code" href="classChamp__Don__base.html#a17e3161b4b8cbf51a5029bba45ac758b" title="Fixe le nombre de composantes et le nombre de valeurs nodales.">dimensionner</a>(nb_elem2,1);
<a name="l00980"></a>00980   chp.<a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(1);
<a name="l00981"></a>00981   chp.<a class="code" href="classField__base.html#a3e1964ad4c0e4132aa0e39bc36dfdb15" title="Donne un nom au champ.">nommer</a>(<span class="stringliteral">&quot;Raccord_Homard&quot;</span>);
<a name="l00982"></a>00982   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; chp_val = chp.<a class="code" href="classChamp__Don__base.html#ac0ac51817e03e27c28d2b96bb15db9a0" title="Surcharge Champ_base::valeurs() Renvoie le tableau des valeurs.">valeurs</a>();
<a name="l00983"></a>00983 
<a name="l00984"></a>00984   chp_val=0.;
<a name="l00985"></a>00985 
<a name="l00986"></a>00986 
<a name="l00987"></a>00987   <span class="keywordflow">for</span> (fac=0; fac&lt;nb_faces1; fac++)
<a name="l00988"></a>00988     {
<a name="l00989"></a>00989       face1=fac+ndeb1;
<a name="l00990"></a>00990 
<a name="l00991"></a>00991       elem2=-1;
<a name="l00992"></a>00992 
<a name="l00993"></a>00993       <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==2)  elem2 = zvef2.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(xv1(face1,0),xv1(face1,1));
<a name="l00994"></a>00994       <span class="keywordflow">else</span>                 elem2 = zvef2.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(xv1(face1,0),xv1(face1,1),xv1(face1,2));
<a name="l00995"></a>00995 
<a name="l00996"></a>00996       <span class="keywordflow">if</span>(elem2==-1)
<a name="l00997"></a>00997         {
<a name="l00998"></a>00998           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Probleme dans la recherche de l&#39;element associe !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00999"></a>00999           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01000"></a>01000         }
<a name="l01001"></a>01001 
<a name="l01002"></a>01002       chp_val(elem2)++;
<a name="l01003"></a>01003     }
<a name="l01004"></a>01004 
<a name="l01005"></a>01005 <span class="comment">//</span>
<a name="l01006"></a>01006 <span class="comment">// Ecriture du fichier Connectivity_failed pour decoupage</span>
<a name="l01007"></a>01007 <span class="comment">// a l&#39;aide de l&#39;interprete  Decouper_Bord_coincident</span>
<a name="l01008"></a>01008 <span class="comment">//</span>
<a name="l01009"></a>01009 
<a name="l01010"></a>01010   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic(fichier);
<a name="l01011"></a>01011   fic &lt;&lt; nb_faces2 &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01012"></a>01012   fic &lt;&lt; nb_faces1 &lt;&lt; finl;
<a name="l01013"></a>01013 
<a name="l01014"></a>01014   <span class="keywordflow">for</span> (fac=0; fac&lt;nb_faces2; fac++)
<a name="l01015"></a>01015     {
<a name="l01016"></a>01016       face2=fac+ndeb2;
<a name="l01017"></a>01017       elem2=face_voisin2(face2,0);
<a name="l01018"></a>01018       <span class="keywordflow">if</span> (elem2==-1) elem2=face_voisin2(face2,1);
<a name="l01019"></a>01019 
<a name="l01020"></a>01020 <span class="comment">// recherche de l&#39;indice locale de la face</span>
<a name="l01021"></a>01021       trouve=0;
<a name="l01022"></a>01022       <span class="keywordflow">for</span>(j=0; j&lt;nbf; j++)
<a name="l01023"></a>01023         <span class="keywordflow">if</span>(face2==elem_faces2(elem2,j))
<a name="l01024"></a>01024           {
<a name="l01025"></a>01025             trouve=1;
<a name="l01026"></a>01026             <span class="keywordflow">break</span>;
<a name="l01027"></a>01027           }
<a name="l01028"></a>01028 
<a name="l01029"></a>01029       <span class="keywordflow">if</span>(trouve==0)
<a name="l01030"></a>01030         {
<a name="l01031"></a>01031           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Probleme dans la recherche de l&#39;indice local !&quot;</span> &lt;&lt; finl;
<a name="l01032"></a>01032           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01033"></a>01033         }
<a name="l01034"></a>01034 
<a name="l01035"></a>01035       fic &lt;&lt; chp_val(elem2) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; fac &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; elem2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; j &lt;&lt; finl;
<a name="l01036"></a>01036     }
<a name="l01037"></a>01037 
<a name="l01038"></a>01038   fic &lt;&lt;(int) -1;
<a name="l01039"></a>01039 <span class="comment">// pour forcer l ecriture</span>
<a name="l01040"></a>01040   fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01041"></a>01041 <span class="comment">//</span>
<a name="l01042"></a>01042 <span class="comment">// Ecriture du fichier MED pour decoupage suivant HOMARD</span>
<a name="l01043"></a>01043 <span class="comment">//</span>
<a name="l01044"></a>01044 
<a name="l01045"></a>01045 <span class="comment">// renormalisation de chp_val</span>
<a name="l01046"></a>01046 
<a name="l01047"></a>01047   <span class="keywordflow">for</span> (elem=0; elem&lt;nb_elem2; elem++)
<a name="l01048"></a>01048     {
<a name="l01049"></a>01049       <span class="keywordflow">if</span>(chp_val(elem)==(2*(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>-1))) chp_val(elem)=1;
<a name="l01050"></a>01050       <span class="keywordflow">else</span>                                   chp_val(elem)=0;
<a name="l01051"></a>01051     }
<a name="l01052"></a>01052   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> bis(fichier_med);
<a name="l01053"></a>01053   bis+=<span class="stringliteral">&quot;_index&quot;</span>;
<a name="l01054"></a>01054   fichier_med.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot;.med&quot;</span>);
<a name="l01055"></a>01055   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom2 = zvef2.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>();
<a name="l01056"></a>01056   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> unites_(1);
<a name="l01057"></a>01057   unites_[0]=<span class="stringliteral">&quot;1&quot;</span>;
<a name="l01058"></a>01058   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> nom_compos(1);
<a name="l01059"></a>01059   nom_compos[0]=chp.<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>();
<a name="l01060"></a>01060   <a class="code" href="classFormat__Post__Med.html" title=": Classe de postraitement des champs euleriens au format med.">Format_Post_Med</a> post;
<a name="l01061"></a>01061   post.<a class="code" href="classFormat__Post__Med.html#a5950166bdb6a4aa21153a06224d4fddf" title="Initialisation de la classe avec des parametres par defaut.">initialize_by_default</a>(fichier_med);
<a name="l01062"></a>01062   post.<a class="code" href="classFormat__Post__Med.html#a76b38e0362672d2cd0513dd3947758b0" title="Ecriture d&#39;un maillage. L&#39;ecriture du domaine a lieu soit au debut, avant le premier appel a ecrire_t...">ecrire_domaine</a>(dom2,1);
<a name="l01063"></a>01063   post.<a class="code" href="classFormat__Post__Med.html#a66e61bf366291a34756051f860870323" title="voir Format_Post_base::ecrire_champ">ecrire_champ</a>(dom2,unites_,nom_compos,-1,0., 0., chp.<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>(), dom2.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>(), <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<span class="stringliteral">&quot;elem&quot;</span>), <span class="stringliteral">&quot;scalar&quot;</span>,chp_val);
<a name="l01064"></a>01064   post.<a class="code" href="classFormat__Post__Med.html#a66e61bf366291a34756051f860870323" title="voir Format_Post_base::ecrire_champ">ecrire_champ</a>(dom2,unites_,nom_compos,-1,0., 0., chp.<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>(), dom2.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>(), <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>(<span class="stringliteral">&quot;elem&quot;</span>), <span class="stringliteral">&quot;scalar&quot;</span>,chp_val);
<a name="l01065"></a>01065 }
<a name="l01066"></a>01066 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:41 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
