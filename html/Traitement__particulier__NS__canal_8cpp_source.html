<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Incompressible/Traitement_particulier/Traitement_particulier_NS_canal.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Incompressible/Traitement_particulier/Traitement_particulier_NS_canal.cpp</div>  </div>
</div>
<div class="contents">
<a href="Traitement__particulier__NS__canal_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Traitement_particulier_NS_canal.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Incompressible/Traitement_particulier</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/36</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Traitement__particulier__NS__canal_8h.html">Traitement_particulier_NS_canal.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="LecFicDistribue_8h.html">LecFicDistribue.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="EcrFicCollecte_8h.html">EcrFicCollecte.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Navier__Stokes__std_8h.html">Navier_Stokes_std.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Mod__turb__hyd__base_8h.html">Mod_turb_hyd_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Discretisation__base_8h.html">Discretisation_base.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Zone__Cl__dis__base_8h.html">Zone_Cl_dis_base.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Dirichlet__paroi__fixe_8h.html">Dirichlet_paroi_fixe.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Temps__base_8h.html">Schema_Temps_base.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTrav_8h.html">DoubleTrav.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="Fluide__base_8h.html">Fluide_base.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="DoubleVect_8h.html">DoubleVect.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Uniforme_8h.html">Champ_Uniforme.h</a>&gt;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a><a class="code" href="Traitement__particulier__NS__canal_8cpp.html#a2a4f899c7d64aa5c074c4d694cf08e92">00040</a> <a class="code" href="Declare__Base_8h.html#a279604f97959498f17b67e986dfd4486">Implemente_base_sans_constructeur</a>(<a class="code" href="classTraitement__particulier__NS__canal.html" title="classe Traitement_particulier_NS_canal Cette classe permet de faire les traitements particuliers pour...">Traitement_particulier_NS_canal</a>,<span class="stringliteral">&quot;Traitement_particulier_NS_canal&quot;</span>,<a class="code" href="classTraitement__particulier__NS__base.html" title="classe Traitement_particulier_NS_base Derive de Support_Champ_Masse_Volumique: utilisation de rho pou...">Traitement_particulier_NS_base</a>);
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a4f93b8920eb7dfa81283cfbe13ad486f">00042</a> <a class="code" href="classTraitement__particulier__NS__canal.html#a4f93b8920eb7dfa81283cfbe13ad486f">Traitement_particulier_NS_canal::Traitement_particulier_NS_canal</a>()
<a name="l00043"></a>00043 {
<a name="l00044"></a>00044   <a class="code" href="classTraitement__particulier__NS__canal.html#a9277fe07b3e1cd730bf71956145b62c3">oui_profil_nu_t</a> = 0;
<a name="l00045"></a>00045   <a class="code" href="classTraitement__particulier__NS__canal.html#a65b21ecbd62ddb38b6dcd7588fb803bd">oui_profil_Temp</a> = 0;
<a name="l00046"></a>00046   <a class="code" href="classTraitement__particulier__NS__canal.html#a4e4de89c384367f3c82a89e9877aa127">oui_repr</a> = 0;
<a name="l00047"></a>00047   <a class="code" href="classTraitement__particulier__NS__canal.html#aae18e4636a9ef2d2915f2fce4975143d">oui_pulse</a> = 0;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049   <a class="code" href="classTraitement__particulier__NS__canal.html#a018b545889267015ca0527ddfffbd896">dt_impr_moy_spat</a>=1e6;
<a name="l00050"></a>00050   <a class="code" href="classTraitement__particulier__NS__canal.html#ad4473b66498a00e61219894aea9de45d">dt_impr_moy_temp</a>=1e6;
<a name="l00051"></a>00051   <a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>=1e6;
<a name="l00052"></a>00052   <a class="code" href="classTraitement__particulier__NS__canal.html#af08df3cb454d6cb245baad5e105e54ca">temps_fin</a>=1e6;
<a name="l00053"></a>00053   <a class="code" href="classTraitement__particulier__NS__canal.html#a6a118cd952d452f7324e2936b53ca5c6">debut_phase</a>=1e6;
<a name="l00054"></a>00054   <a class="code" href="classTraitement__particulier__NS__canal.html#afe320e66135a21a275a0dcab09d9e82f">ind_phase</a>=0;
<a name="l00055"></a>00055 
<a name="l00056"></a>00056   <a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>=12;
<a name="l00057"></a>00057   <a class="code" href="classTraitement__particulier__NS__canal.html#adbcdf38f82f2c0c852604574bc97d267">Nphase</a>=1;
<a name="l00058"></a>00058   <a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1);
<a name="l00059"></a>00059   <a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>(0)=1;
<a name="l00060"></a>00060 }
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">// Precondition:</span>
<a name="l00064"></a>00064 <span class="comment">// Parametre: Sortie&amp; is</span>
<a name="l00065"></a>00065 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00066"></a>00066 <span class="comment">// Valeurs par defaut:</span>
<a name="l00067"></a>00067 <span class="comment">// Contraintes:</span>
<a name="l00068"></a>00068 <span class="comment">// Acces: entree/sortie</span>
<a name="l00069"></a>00069 <span class="comment">// Exception:</span>
<a name="l00070"></a>00070 <span class="comment">// Effets de bord:</span>
<a name="l00071"></a>00071 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00072"></a>00072 <span class="comment">//</span>
<a name="l00073"></a>00073 <span class="comment">//</span><span class="comment"></span>
<a name="l00074"></a>00074 <span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00075"></a>00075 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00076"></a>00076 <span class="comment">Contraintes: */</span>
<a name="l00077"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a8533a5ab7287c24441fbada15f752a40">00077</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classTraitement__particulier__NS__canal.html#a8533a5ab7287c24441fbada15f752a40">Traitement_particulier_NS_canal::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; is)<span class="keyword"> const</span>
<a name="l00078"></a>00078 <span class="keyword"></span>{
<a name="l00079"></a>00079   <span class="keywordflow">return</span> is;
<a name="l00080"></a>00080 }
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">// Precondition:</span>
<a name="l00084"></a>00084 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00085"></a>00085 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00086"></a>00086 <span class="comment">// Valeurs par defaut:</span>
<a name="l00087"></a>00087 <span class="comment">// Contraintes:</span>
<a name="l00088"></a>00088 <span class="comment">// Acces: entree/sortie</span>
<a name="l00089"></a>00089 <span class="comment">// Exception:</span>
<a name="l00090"></a>00090 <span class="comment">// Effets de bord:</span>
<a name="l00091"></a>00091 <span class="comment">// Postcondition:</span>
<a name="l00092"></a>00092 <span class="comment">//</span>
<a name="l00093"></a>00093 <span class="comment">//</span><span class="comment"></span>
<a name="l00094"></a>00094 <span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00095"></a>00095 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00096"></a>00096 <span class="comment">Contraintes: */</span>
<a name="l00097"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a08ae98d384267cafcd0fc3d639c76d1f">00097</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__canal.html#a08ae98d384267cafcd0fc3d639c76d1f">Traitement_particulier_NS_canal::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00098"></a>00098 {
<a name="l00099"></a>00099   <span class="keywordflow">return</span> is;
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="classTraitement__particulier__NS__canal.html#af3211d8c1903eb3be4418e5562995f7a">00102</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__canal.html#af3211d8c1903eb3be4418e5562995f7a">Traitement_particulier_NS_canal::lire</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00103"></a>00103 {
<a name="l00104"></a>00104   <span class="keywordflow">if</span>(!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classNavier__Stokes__std.html" title="classe Navier_Stokes_std Cette classe porte les termes de l&#39;equation de la dynamique pour un fluide s...">Navier_Stokes_std</a>,<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>()))
<a name="l00105"></a>00105     {
<a name="l00106"></a>00106       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Traitement_particulier_canal has to be called from a Navier_Stokes problem &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00107"></a>00107       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00108"></a>00108     }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> accouverte = <span class="stringliteral">&quot;{&quot;</span> , accfermee = <span class="stringliteral">&quot;}&quot;</span> ;
<a name="l00111"></a>00111   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motbidon, motlu;
<a name="l00112"></a>00112   is &gt;&gt; motbidon ;
<a name="l00113"></a>00113   <span class="keywordflow">if</span> (motbidon == accouverte)
<a name="l00114"></a>00114     {
<a name="l00115"></a>00115       <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_mots(7);
<a name="l00116"></a>00116       les_mots[0] = <span class="stringliteral">&quot;dt_impr_moy_spat&quot;</span>;
<a name="l00117"></a>00117       les_mots[1] = <span class="stringliteral">&quot;dt_impr_moy_temp&quot;</span>;
<a name="l00118"></a>00118       les_mots[2] = <span class="stringliteral">&quot;debut_stat&quot;</span>;
<a name="l00119"></a>00119       les_mots[3] = <span class="stringliteral">&quot;fin_stat&quot;</span>;
<a name="l00120"></a>00120       les_mots[4] = <span class="stringliteral">&quot;reprise&quot;</span>;
<a name="l00121"></a>00121       les_mots[5] = <span class="stringliteral">&quot;pulsation_w&quot;</span>;
<a name="l00122"></a>00122       les_mots[6] = <span class="stringliteral">&quot;nb_points_par_phase&quot;</span>;
<a name="l00123"></a>00123 
<a name="l00124"></a>00124       is &gt;&gt; motlu;
<a name="l00125"></a>00125       <span class="keywordflow">while</span>(motlu != accfermee)
<a name="l00126"></a>00126         {
<a name="l00127"></a>00127           <span class="keywordtype">int</span> rang=les_mots.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(motlu);
<a name="l00128"></a>00128           <span class="keywordflow">switch</span>(rang)
<a name="l00129"></a>00129             {
<a name="l00130"></a>00130             <span class="keywordflow">case</span> 0 :
<a name="l00131"></a>00131               {
<a name="l00132"></a>00132                 is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#a018b545889267015ca0527ddfffbd896">dt_impr_moy_spat</a>;      <span class="comment">//!&lt; intervalle de temps de sorties des moyennes spatiales</span>
<a name="l00133"></a>00133 <span class="comment"></span>                <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Spatial averages are printed for : dt_impr_moy_spat = &quot;</span> &lt;&lt; dt_impr_moy_spat &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00134"></a>00134                 <span class="keywordflow">break</span>;
<a name="l00135"></a>00135               }
<a name="l00136"></a>00136             <span class="keywordflow">case</span> 1 :
<a name="l00137"></a>00137               {
<a name="l00138"></a>00138                 is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#ad4473b66498a00e61219894aea9de45d">dt_impr_moy_temp</a>;      <span class="comment">//!&lt; intervalle de temps de sorties des moyennes temporelles</span>
<a name="l00139"></a>00139 <span class="comment"></span>                <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Temporal averages are printed for : dt_impr_moy_temp = &quot;</span> &lt;&lt; dt_impr_moy_temp &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00140"></a>00140                 <span class="keywordflow">break</span>;
<a name="l00141"></a>00141               }
<a name="l00142"></a>00142             <span class="keywordflow">case</span> 2 :
<a name="l00143"></a>00143               {
<a name="l00144"></a>00144                 is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>;             <span class="comment">//!&lt; temps de debut des moyennes temporelles</span>
<a name="l00145"></a>00145 <span class="comment"></span>                <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Temporal averages start at : temps_deb = &quot;</span> &lt;&lt; temps_deb &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00146"></a>00146                 <span class="keywordflow">break</span>;
<a name="l00147"></a>00147               }
<a name="l00148"></a>00148             <span class="keywordflow">case</span> 3 :
<a name="l00149"></a>00149               {
<a name="l00150"></a>00150                 is &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#af08df3cb454d6cb245baad5e105e54ca">temps_fin</a>;             <span class="comment">//!&lt; temps de debut des moyennes temporelles</span>
<a name="l00151"></a>00151 <span class="comment"></span>                <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Temporal averages finish at : temps_fin = &quot;</span> &lt;&lt; temps_fin &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00152"></a>00152                 <span class="keywordflow">break</span>;
<a name="l00153"></a>00153               }
<a name="l00154"></a>00154             <span class="keywordflow">case</span> 4 :
<a name="l00155"></a>00155               {
<a name="l00156"></a>00156                 <a class="code" href="classTraitement__particulier__NS__canal.html#a4e4de89c384367f3c82a89e9877aa127">oui_repr</a> = 1;
<a name="l00157"></a>00157                 is  &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#a789bded89fe22a63b9f73e47a654f29e">fich_repr</a> ;             <span class="comment">//!&lt; indication du nom du fichier de reprise des stats</span>
<a name="l00158"></a>00158 <span class="comment"></span>                <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The time statistics file is : &quot;</span> &lt;&lt; fich_repr &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00159"></a>00159                 <span class="keywordflow">break</span>;
<a name="l00160"></a>00160               }
<a name="l00161"></a>00161             <span class="keywordflow">case</span> 5 :
<a name="l00162"></a>00162               {
<a name="l00163"></a>00163                 <a class="code" href="classTraitement__particulier__NS__canal.html#aae18e4636a9ef2d2915f2fce4975143d">oui_pulse</a> = 1;
<a name="l00164"></a>00164                 is  &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#a56b6f972cb1ea5bdd325b12ba51e9c6c">w</a> ;                     <span class="comment">//!&lt; pulsation</span>
<a name="l00165"></a>00165 <span class="comment"></span>                <a class="code" href="classTraitement__particulier__NS__canal.html#a6e3a55facd19bd83b5b63c4bc2f6ef68">freq</a> = w/(2.*3.141592653); <span class="comment">//!&lt; frequence associee</span>
<a name="l00166"></a>00166 <span class="comment"></span>                <span class="keywordflow">break</span>;
<a name="l00167"></a>00167               }
<a name="l00168"></a>00168             <span class="keywordflow">case</span> 6 :
<a name="l00169"></a>00169               {
<a name="l00170"></a>00170                 <a class="code" href="classTraitement__particulier__NS__canal.html#aae18e4636a9ef2d2915f2fce4975143d">oui_pulse</a> = 1;
<a name="l00171"></a>00171                 is  &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#adbcdf38f82f2c0c852604574bc97d267">Nphase</a> ;            <span class="comment">//!&lt; nombre de points pour decrire une phase</span>
<a name="l00172"></a>00172 <span class="comment"></span>                <span class="keywordflow">break</span>;
<a name="l00173"></a>00173               }
<a name="l00174"></a>00174             <span class="keywordflow">default</span> :
<a name="l00175"></a>00175               {
<a name="l00176"></a>00176                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot; is not a keyword for Traitement_particulier_NS_canal &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00177"></a>00177                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Since the TRUST v1.5, the syntax of Canal option has changed.&quot;</span> &lt;&lt; finl;
<a name="l00178"></a>00178                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Check the reference manual.&quot;</span> &lt;&lt; finl;
<a name="l00179"></a>00179                 <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00180"></a>00180               }
<a name="l00181"></a>00181             }
<a name="l00182"></a>00182           is &gt;&gt; motlu;
<a name="l00183"></a>00183         }
<a name="l00184"></a>00184       is &gt;&gt; motlu;
<a name="l00185"></a>00185       <span class="keywordflow">if</span> (motlu != accfermee)
<a name="l00186"></a>00186         {
<a name="l00187"></a>00187           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading in Traitement_particulier_NS_canal&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;;
<a name="l00188"></a>00188           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We were expecting a }&quot;</span> &lt;&lt; finl;
<a name="l00189"></a>00189           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00190"></a>00190         }
<a name="l00191"></a>00191     }
<a name="l00192"></a>00192   <span class="keywordflow">else</span>
<a name="l00193"></a>00193     {
<a name="l00194"></a>00194       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading in Traitement_particulier_NS_canal&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00195"></a>00195       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We were expecting a {&quot;</span> &lt;&lt; finl;
<a name="l00196"></a>00196       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00197"></a>00197     }
<a name="l00198"></a>00198 
<a name="l00199"></a>00199   <span class="keywordflow">return</span> is;
<a name="l00200"></a>00200 }
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a8f9014ec1e8ad0e79e8f618ce88cbe25">00202</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a8f9014ec1e8ad0e79e8f618ce88cbe25">Traitement_particulier_NS_canal::remplir_Tab_recap</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; Tab_rec)<span class="keyword"> const</span>
<a name="l00203"></a>00203 <span class="keyword"></span>{
<a name="l00204"></a>00204 <span class="comment">// surchargeee dans VDF</span>
<a name="l00205"></a>00205   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Traitement_particulier_NS_canal::remplir_Tab_recap ne marche pas pour le VEF&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00206"></a>00206 <span class="comment">// Process::exit();</span>
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a130c2cda616a9619cefda98d9910323a">00209</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a130c2cda616a9619cefda98d9910323a">Traitement_particulier_NS_canal::preparer_calcul_particulier</a>()
<a name="l00210"></a>00210 {
<a name="l00211"></a>00211   <span class="keyword">const</span> <a class="code" href="classRef__Objet__U.html">RefObjU</a>&amp; modele_turbulence = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#ab0bb5d06bdc91e131dc9d5f9d7b57095">get_modele</a>(<a class="code" href="Equation__base_8h.html#a2c9d34b2cc47e5b2b18347de20a77db5a0fecbd75e0b8b4c37ffd696e173a14c7">TURBULENCE</a>);
<a name="l00212"></a>00212   <span class="keywordflow">if</span> (modele_turbulence.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>() &amp;&amp; <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMod__turb__hyd__base.html" title="Classe Mod_turb_hyd_base Cette classe sert de base a la hierarchie des classes qui representent un mo...">Mod_turb_hyd_base</a>,modele_turbulence.<a class="code" href="classRef__Objet__U.html#ad875112c0fd275aa0c0aa710481ab11e">valeur</a>()))
<a name="l00213"></a>00213     {
<a name="l00214"></a>00214       <a class="code" href="classTraitement__particulier__NS__canal.html#a9277fe07b3e1cd730bf71956145b62c3">oui_profil_nu_t</a> = 1;
<a name="l00215"></a>00215       <a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>=13;
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>()&gt;1)
<a name="l00219"></a>00219     <span class="keywordflow">try</span>
<a name="l00220"></a>00220       {
<a name="l00221"></a>00221         <a class="code" href="classTraitement__particulier__NS__canal.html#ae70d0037644f9ea8145977f97633f515">Temp</a> = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(1).<a class="code" href="classEquation__base.html#ad6bcab0bb6d83b1b563a7aa30f0df721">get_champ</a>(<span class="stringliteral">&quot;temperature&quot;</span>);
<a name="l00222"></a>00222         <a class="code" href="classTraitement__particulier__NS__canal.html#a65b21ecbd62ddb38b6dcd7588fb803bd">oui_profil_Temp</a> = 1 ;
<a name="l00223"></a>00223         <a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>=18;
<a name="l00224"></a>00224       }
<a name="l00225"></a>00225     <span class="keywordflow">catch</span> (<a class="code" href="classChamps__compris__erreur.html">Champs_compris_erreur</a>)
<a name="l00226"></a>00226       {
<a name="l00227"></a>00227       }
<a name="l00228"></a>00228 
<a name="l00229"></a>00229   <a class="code" href="classTraitement__particulier__NS__canal.html#acb3c99fa25187225bdfa05308e279ccb">remplir_Y</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#acdd101ab13e27f8aa4a9c5473a10abe6">Y</a>,<a class="code" href="classTraitement__particulier__NS__canal.html#aed9ee583a24dfbc2e0236d3de4748233">compt</a>,<a class="code" href="classTraitement__particulier__NS__canal.html#af2aa8fb7ba7f2098eed13ec4a063d024">Ny</a>); <span class="comment">//!&lt; renvoie vers Traitement_particulier_NS_canal_VDF ou Traitement_particulier_NS_canal_VEF</span>
<a name="l00230"></a>00230 <span class="comment"></span>  <a class="code" href="classTraitement__particulier__NS__canal.html#a8f9014ec1e8ad0e79e8f618ce88cbe25">remplir_Tab_recap</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a5262d8b05922271b91ce8fec60e919ff">Tab_recap</a>);
<a name="l00231"></a>00231   <a class="code" href="classTraitement__particulier__NS__canal.html#a51c14d9ab9b9c81ace0c2353ec24150a">remplir_reordonne_Y_tot</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#acdd101ab13e27f8aa4a9c5473a10abe6">Y</a>,<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233   <span class="keywordtype">int</span> NN=<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00234"></a>00234   <a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(NN);
<a name="l00235"></a>00235   <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(NN,<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>,1);
<a name="l00236"></a>00236 
<a name="l00237"></a>00237   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a4e4de89c384367f3c82a89e9877aa127">oui_repr</a>!=1)
<a name="l00238"></a>00238     {
<a name="l00239"></a>00239       <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(),<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>,1);
<a name="l00240"></a>00240       <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>=0.;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242       <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#aae18e4636a9ef2d2915f2fce4975143d">oui_pulse</a>==1)
<a name="l00243"></a>00243         {
<a name="l00244"></a>00244           <a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(),<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>,<a class="code" href="classTraitement__particulier__NS__canal.html#adbcdf38f82f2c0c852604574bc97d267">Nphase</a>);
<a name="l00245"></a>00245           <a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>=0.;
<a name="l00246"></a>00246           <a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#adbcdf38f82f2c0c852604574bc97d267">Nphase</a>);
<a name="l00247"></a>00247           <a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>=0;
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250 }
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a51c14d9ab9b9c81ace0c2353ec24150a">00252</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a51c14d9ab9b9c81ace0c2353ec24150a">Traitement_particulier_NS_canal::remplir_reordonne_Y_tot</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; tab_Y, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; tab_Y_tot)<span class="keyword"> const</span>
<a name="l00253"></a>00253 <span class="keyword"></span>{
<a name="l00254"></a>00254   <a class="code" href="classDoubleVect.html">DoubleVect</a> Y_p(tab_Y);
<a name="l00255"></a>00255   <span class="keywordtype">int</span> j_tot=1;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(Y_p, <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(), 0, <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00258"></a>00258 
<a name="l00259"></a>00259   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00260"></a>00260     {
<a name="l00261"></a>00261       tab_Y_tot.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1);
<a name="l00262"></a>00262       tab_Y_tot(0) = tab_Y(0);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(); p++)
<a name="l00265"></a>00265         {
<a name="l00266"></a>00266           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(Y_p,p,0,p);
<a name="l00267"></a>00267           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;Y_p.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); k++)
<a name="l00268"></a>00268             {
<a name="l00269"></a>00269               <span class="keywordflow">if</span>(!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(Y_p(k),-100.)) <span class="comment">//!&lt; on recherche si Y_p(k) est deja contenu dans Y_tot</span>
<a name="l00270"></a>00270 <span class="comment"></span>                {
<a name="l00271"></a>00271                   <span class="keywordtype">int</span> ok_new=1;
<a name="l00272"></a>00272 
<a name="l00273"></a>00273                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;tab_Y_tot.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); j++)
<a name="l00274"></a>00274                     <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(tab_Y_tot(j),Y_p(k)))
<a name="l00275"></a>00275                       ok_new=0;
<a name="l00276"></a>00276 
<a name="l00277"></a>00277                   <span class="keywordflow">if</span>(ok_new==1)
<a name="l00278"></a>00278                     {
<a name="l00279"></a>00279                       tab_Y_tot.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(j_tot+1);
<a name="l00280"></a>00280                       tab_Y_tot(j_tot) = Y_p(k);
<a name="l00281"></a>00281                       j_tot++;
<a name="l00282"></a>00282                     }
<a name="l00283"></a>00283                 }
<a name="l00284"></a>00284             }
<a name="l00285"></a>00285         }
<a name="l00286"></a>00286 
<a name="l00287"></a>00287       <span class="keywordflow">if</span>(<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(tab_Y_tot(0),1.e12))
<a name="l00288"></a>00288         {
<a name="l00289"></a>00289           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Probleme a la construction de Y_tot&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00290"></a>00290           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00291"></a>00291         }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293       tab_Y_tot.<a class="code" href="classArrOfDouble.html#a779184ebb5056c91f6185acf7c10088c" title="Tri des valeurs du tableau dans l&#39;ordre croissant. La fonction utilisee est qsort de stdlib (elle est...">ordonne_array</a>();
<a name="l00294"></a>00294 <span class="comment">// Envoi de Y_tot aux autres processeurs</span>
<a name="l00295"></a>00295       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> p=1; p&lt;<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(); p++)
<a name="l00296"></a>00296         <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(tab_Y_tot, 0, p, 0);
<a name="l00297"></a>00297     }
<a name="l00298"></a>00298   <span class="keywordflow">else</span>
<a name="l00299"></a>00299     {
<a name="l00300"></a>00300       <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(tab_Y_tot,0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0);
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 
<a name="l00304"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a49b68d7881d57a9e80a6738e5ad3c8b6">00304</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a49b68d7881d57a9e80a6738e5ad3c8b6">Traitement_particulier_NS_canal::reprendre_stat</a>()
<a name="l00305"></a>00305 {
<a name="l00306"></a>00306   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00307"></a>00307     {
<a name="l00308"></a>00308       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Traitement_particulier_NS_canal::reprendre_stat!!&quot;</span> &lt;&lt; flush &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310       <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a4e4de89c384367f3c82a89e9877aa127">oui_repr</a>==1)
<a name="l00311"></a>00311         {
<a name="l00312"></a>00312           <a class="code" href="classTraitement__particulier__NS__canal.html#abf19d2323da848d35203274ed869ecc1">reprendre_stat_canal</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>,<a class="code" href="classTraitement__particulier__NS__canal.html#a789bded89fe22a63b9f73e47a654f29e">fich_repr</a>);
<a name="l00313"></a>00313           <a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>=<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00314"></a>00314         }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316       <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a4e4de89c384367f3c82a89e9877aa127">oui_repr</a>==1 &amp;&amp; <a class="code" href="classTraitement__particulier__NS__canal.html#aae18e4636a9ef2d2915f2fce4975143d">oui_pulse</a>==1)
<a name="l00317"></a>00317         {
<a name="l00318"></a>00318           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fich_repr_phase;
<a name="l00319"></a>00319           fich_repr_phase  = <a class="code" href="classTraitement__particulier__NS__canal.html#a789bded89fe22a63b9f73e47a654f29e">fich_repr</a>;
<a name="l00320"></a>00320           fich_repr_phase +=<span class="stringliteral">&quot;_phase&quot;</span>;
<a name="l00321"></a>00321 
<a name="l00322"></a>00322           <a class="code" href="classTraitement__particulier__NS__canal.html#abf19d2323da848d35203274ed869ecc1">reprendre_stat_canal</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>,fich_repr_phase);
<a name="l00323"></a>00323           <a class="code" href="classTraitement__particulier__NS__canal.html#adbcdf38f82f2c0c852604574bc97d267">Nphase</a>=<a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(2);
<a name="l00324"></a>00324         }
<a name="l00325"></a>00325     }
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a><a class="code" href="classTraitement__particulier__NS__canal.html#abf19d2323da848d35203274ed869ecc1">00328</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#abf19d2323da848d35203274ed869ecc1">Traitement_particulier_NS_canal::reprendre_stat_canal</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier)
<a name="l00329"></a>00329 {
<a name="l00330"></a>00330   <span class="keywordtype">double</span> tps,tps_deb_moy;
<a name="l00331"></a>00331   <span class="keywordtype">int</span> NN,Nv,Np;
<a name="l00332"></a>00332   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> temps;
<a name="l00333"></a>00333 
<a name="l00334"></a>00334   <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> fic(fichier);
<a name="l00335"></a>00335   fic.<a class="code" href="classEntree__Fichier__base.html#a6c26b698a9e6a4a36d3a86d36722b2fb">setf</a>(ios::scientific);
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="keywordflow">if</span>(fic.<a class="code" href="classEntree__Fichier__base.html#a27c3eab43170c45ca83c64dd0d0c483d">fail</a>())
<a name="l00338"></a>00338     {
<a name="l00339"></a>00339       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Impossible d&#39;ouvrir le fichier &quot;</span> &lt;&lt; fichier &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00340"></a>00340       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   fic &gt;&gt; tps;
<a name="l00344"></a>00344   fic &gt;&gt; tps_deb_moy;
<a name="l00345"></a>00345   fic &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#a6a118cd952d452f7324e2936b53ca5c6">debut_phase</a>;
<a name="l00346"></a>00346   fic &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#afe320e66135a21a275a0dcab09d9e82f">ind_phase</a>;
<a name="l00347"></a>00347   fic &gt;&gt; NN;
<a name="l00348"></a>00348   fic &gt;&gt; Nv;
<a name="l00349"></a>00349   fic &gt;&gt; Np;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   val.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(NN,Nv,Np);
<a name="l00352"></a>00352   <a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(Np);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;Np; k++)
<a name="l00355"></a>00355     fic &gt;&gt; <a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>(k);
<a name="l00356"></a>00356 
<a name="l00357"></a>00357   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;Np; k++)
<a name="l00358"></a>00358     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;Nv; j++)
<a name="l00359"></a>00359       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;NN; i++)
<a name="l00360"></a>00360         fic &gt;&gt; val(i,j,k);
<a name="l00361"></a>00361 
<a name="l00362"></a>00362   <span class="keywordflow">if</span>(!<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(tps_deb_moy,<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>,0.1))
<a name="l00363"></a>00363     {
<a name="l00364"></a>00364       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;ERREUR : le temps de debut des stats figurant dans le jeu de donnees differe de beaucoup&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00365"></a>00365       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;du temps defini dans le fichier de reprise : &quot;</span> &lt;&lt; fichier &lt;&lt; finl;
<a name="l00366"></a>00366       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00367"></a>00367     }
<a name="l00368"></a>00368 
<a name="l00369"></a>00369   <a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>=tps_deb_moy;
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a59d0cc837f9df0a5ad948dfd51b16484">00372</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a59d0cc837f9df0a5ad948dfd51b16484">Traitement_particulier_NS_canal::sauver_stat</a>()<span class="keyword"> const</span>
<a name="l00373"></a>00373 <span class="keyword"></span>{
<a name="l00374"></a>00374   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00375"></a>00375 
<a name="l00376"></a>00376   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>() &amp;&amp; (tps&gt;=<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>) &amp;&amp; (tps&lt;=<a class="code" href="classTraitement__particulier__NS__canal.html#af08df3cb454d6cb245baad5e105e54ca">temps_fin</a>) )
<a name="l00377"></a>00377     {
<a name="l00378"></a>00378       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Traitement_particulier_NS_canal::sauver_stat!!&quot;</span> &lt;&lt; flush &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00379"></a>00379 
<a name="l00380"></a>00380       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> temps = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(tps);
<a name="l00381"></a>00381       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fich_sauv1 =<span class="stringliteral">&quot;val_moy_temp_&quot;</span>;
<a name="l00382"></a>00382       fich_sauv1+=temps;
<a name="l00383"></a>00383       fich_sauv1+=<span class="stringliteral">&quot;.sauv&quot;</span>;
<a name="l00384"></a>00384       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fich_sauv2 = fich_sauv1;
<a name="l00385"></a>00385       fich_sauv2+=<span class="stringliteral">&quot;_phase&quot;</span>;
<a name="l00386"></a>00386 
<a name="l00387"></a>00387       <a class="code" href="classTraitement__particulier__NS__canal.html#a28af5ebb5a20f6626d40a8ad186364dd">sauver_stat_canal</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>,fich_sauv1);
<a name="l00388"></a>00388       <span class="keywordflow">if</span>(<a class="code" href="classTraitement__particulier__NS__canal.html#aae18e4636a9ef2d2915f2fce4975143d">oui_pulse</a>==1)  <a class="code" href="classTraitement__particulier__NS__canal.html#a28af5ebb5a20f6626d40a8ad186364dd">sauver_stat_canal</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>,fich_sauv2);
<a name="l00389"></a>00389     }
<a name="l00390"></a>00390 }
<a name="l00391"></a>00391 
<a name="l00392"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a28af5ebb5a20f6626d40a8ad186364dd">00392</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a28af5ebb5a20f6626d40a8ad186364dd">Traitement_particulier_NS_canal::sauver_stat_canal</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier)<span class="keyword"> const</span>
<a name="l00393"></a>00393 <span class="keyword"></span>{
<a name="l00394"></a>00394   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00395"></a>00395   <span class="keywordtype">int</span> NN,Nv,Np;
<a name="l00396"></a>00396   NN=val.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00397"></a>00397   Nv=val.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00398"></a>00398   Np=val.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(2);
<a name="l00399"></a>00399 
<a name="l00400"></a>00400   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic(fichier);
<a name="l00401"></a>00401   fic.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l00402"></a>00402 
<a name="l00403"></a>00403   fic &lt;&lt; tps &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00404"></a>00404   fic &lt;&lt; <a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a> &lt;&lt; finl;
<a name="l00405"></a>00405   fic &lt;&lt; <a class="code" href="classTraitement__particulier__NS__canal.html#a6a118cd952d452f7324e2936b53ca5c6">debut_phase</a> &lt;&lt; finl;
<a name="l00406"></a>00406   fic &lt;&lt; <a class="code" href="classTraitement__particulier__NS__canal.html#afe320e66135a21a275a0dcab09d9e82f">ind_phase</a> &lt;&lt; finl;
<a name="l00407"></a>00407   fic &lt;&lt; NN &lt;&lt; finl;
<a name="l00408"></a>00408   fic &lt;&lt; Nv &lt;&lt; finl;
<a name="l00409"></a>00409   fic &lt;&lt; Np &lt;&lt; finl;
<a name="l00410"></a>00410 
<a name="l00411"></a>00411   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;Np; k++)
<a name="l00412"></a>00412     fic &lt;&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>(k) &lt;&lt; finl;
<a name="l00413"></a>00413 
<a name="l00414"></a>00414   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;Np; k++)
<a name="l00415"></a>00415     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;Nv; j++)
<a name="l00416"></a>00416       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;NN; i++)
<a name="l00417"></a>00417         fic &lt;&lt; val(i,j,k) &lt;&lt; finl;
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a><a class="code" href="classTraitement__particulier__NS__canal.html#aaf258b280af565495c5c3b0e3f381f6f">00420</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#aaf258b280af565495c5c3b0e3f381f6f">Traitement_particulier_NS_canal::post_traitement_particulier</a>()
<a name="l00421"></a>00421 {
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 <span class="comment">// Calcul des Moyennes spatiales</span>
<a name="l00424"></a>00424 <span class="comment">//</span>
<a name="l00425"></a>00425 
<a name="l00426"></a>00426   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> val_moy(<a class="code" href="classTraitement__particulier__NS__canal.html#af2aa8fb7ba7f2098eed13ec4a063d024">Ny</a>,<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>);
<a name="l00427"></a>00427 
<a name="l00428"></a>00428   val_moy=0.;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430   <a class="code" href="classTraitement__particulier__NS__canal.html#aa617dfd9c0d972c7bea28c7b249c0685">calculer_moyenne_spatiale_vitesse_rho_mu</a>(val_moy);
<a name="l00431"></a>00431 
<a name="l00432"></a>00432   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a9277fe07b3e1cd730bf71956145b62c3">oui_profil_nu_t</a> != 0)
<a name="l00433"></a>00433     <a class="code" href="classTraitement__particulier__NS__canal.html#a721e46ba53f78721c9a023bc2665b6d5">calculer_moyenne_spatiale_nut</a>(val_moy);
<a name="l00434"></a>00434 
<a name="l00435"></a>00435   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a65b21ecbd62ddb38b6dcd7588fb803bd">oui_profil_Temp</a> != 0)
<a name="l00436"></a>00436     <a class="code" href="classTraitement__particulier__NS__canal.html#a6e68a326570f1f18c9b6df15332f0cea">calculer_moyenne_spatiale_Temp</a>(val_moy);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 <span class="comment">// Echange des donnees entre processeurs</span>
<a name="l00440"></a>00440 <span class="comment">//</span>
<a name="l00441"></a>00441 
<a name="l00442"></a>00442   <a class="code" href="classDoubleVect.html">DoubleVect</a> Y_p(<a class="code" href="classTraitement__particulier__NS__canal.html#acdd101ab13e27f8aa4a9c5473a10abe6">Y</a>);
<a name="l00443"></a>00443   <a class="code" href="classDoubleVect.html">DoubleVect</a> compt_p(<a class="code" href="classTraitement__particulier__NS__canal.html#aed9ee583a24dfbc2e0236d3de4748233">compt</a>);
<a name="l00444"></a>00444   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> val_moy_p(val_moy);
<a name="l00445"></a>00445 
<a name="l00446"></a>00446   <span class="keyword">const</span> <span class="keywordtype">int</span> NN = <a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00447"></a>00447 
<a name="l00448"></a>00448   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(Y_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00449"></a>00449   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(compt_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00450"></a>00450   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(val_moy_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00451"></a>00451 
<a name="l00452"></a>00452   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00453"></a>00453     {
<a name="l00454"></a>00454       <a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>=0;
<a name="l00455"></a>00455       <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>=0.;
<a name="l00456"></a>00456       <span class="keywordtype">int</span> j;
<a name="l00457"></a>00457       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(); p++)
<a name="l00458"></a>00458         {
<a name="l00459"></a>00459           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(Y_p,p,0,p);
<a name="l00460"></a>00460           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(compt_p,p,0,p);
<a name="l00461"></a>00461           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(val_moy_p,p,0,p);
<a name="l00462"></a>00462 
<a name="l00463"></a>00463           <span class="keywordtype">int</span> Y_p_size = Y_p.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00464"></a>00464           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;Y_p_size; i++)
<a name="l00465"></a>00465             {
<a name="l00466"></a>00466               <span class="keywordflow">for</span> (j=0; j&lt;NN; j++)
<a name="l00467"></a>00467                 <span class="keywordflow">if</span>(<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>[j],Y_p[i])) <span class="keywordflow">break</span>;
<a name="l00468"></a>00468 
<a name="l00469"></a>00469               <a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>(j) += compt_p(i);
<a name="l00470"></a>00470 
<a name="l00471"></a>00471               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>; k++)
<a name="l00472"></a>00472                 <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(j,k,0) += val_moy_p(i,k);
<a name="l00473"></a>00473             }
<a name="l00474"></a>00474         }
<a name="l00475"></a>00475 
<a name="l00476"></a>00476       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;NN; i++)
<a name="l00477"></a>00477         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>; k++)
<a name="l00478"></a>00478           <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,k,0) /= <a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>[i];
<a name="l00479"></a>00479     }
<a name="l00480"></a>00480 
<a name="l00481"></a>00481 
<a name="l00482"></a>00482 <span class="comment">// Calcul et ecriture des grandeurs parietales</span>
<a name="l00483"></a>00483 <span class="comment">//</span>
<a name="l00484"></a>00484 
<a name="l00485"></a>00485   <a class="code" href="classTraitement__particulier__NS__canal.html#a7e53a421d909387b6dbfa9672f95cc34">calcul_reynolds_tau</a>();
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 <span class="comment">// Calcul des Moyennes temporelles</span>
<a name="l00488"></a>00488 <span class="comment">//</span>
<a name="l00489"></a>00489 
<a name="l00490"></a>00490   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00491"></a>00491 
<a name="l00492"></a>00492   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00493"></a>00493     {
<a name="l00494"></a>00494       <span class="keywordflow">if</span> ((tps&gt;=<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>)&amp;&amp;(tps&lt;=<a class="code" href="classTraitement__particulier__NS__canal.html#af08df3cb454d6cb245baad5e105e54ca">temps_fin</a>))
<a name="l00495"></a>00495         {
<a name="l00496"></a>00496           <span class="keyword">static</span> <span class="keywordtype">int</span> init_stat_temps = 0;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498           <span class="keywordtype">double</span> dt_v = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().pas_de_temps();
<a name="l00499"></a>00499           <span class="keywordtype">int</span> NN2 = <a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00500"></a>00500 
<a name="l00501"></a>00501           <span class="keywordflow">if</span>(init_stat_temps==0 &amp;&amp; <a class="code" href="classTraitement__particulier__NS__canal.html#a4e4de89c384367f3c82a89e9877aa127">oui_repr</a>!=1) <span class="comment">//!&lt; sinon, les valeurs de val_moy_temp ont ete lues a partir de reprendre_stat()</span>
<a name="l00502"></a>00502 <span class="comment"></span>            {
<a name="l00503"></a>00503               <a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a> = tps-dt_v;
<a name="l00504"></a>00504 
<a name="l00505"></a>00505               <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(NN2,<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>,1);
<a name="l00506"></a>00506               <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>=0.;
<a name="l00507"></a>00507 
<a name="l00508"></a>00508               init_stat_temps++;
<a name="l00509"></a>00509             }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>; j++)
<a name="l00512"></a>00512             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;NN2; i++)
<a name="l00513"></a>00513               {
<a name="l00514"></a>00514                 <span class="keywordflow">if</span> ((j!=3) &amp;&amp; (j!=4) &amp;&amp; (j!=5) &amp;&amp; (j!=6) &amp;&amp; (j!=7) &amp;&amp; (j!=8) &amp;&amp; (j!=14) &amp;&amp; (j!=15) &amp;&amp; (j!=16) &amp;&amp; (j!=17))
<a name="l00515"></a>00515                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,j,0);
<a name="l00516"></a>00516 
<a name="l00517"></a>00517                 <span class="keywordflow">if</span> (j==3)
<a name="l00518"></a>00518                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,3,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,0,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,0,0));
<a name="l00519"></a>00519                 <span class="keywordflow">if</span> (j==4)
<a name="l00520"></a>00520                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,4,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,1,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,1,0));
<a name="l00521"></a>00521                 <span class="keywordflow">if</span> (j==5)
<a name="l00522"></a>00522                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,5,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,2,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,2,0));
<a name="l00523"></a>00523 
<a name="l00524"></a>00524                 <span class="keywordflow">if</span> (j==6)
<a name="l00525"></a>00525                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,6,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,0,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,1,0));
<a name="l00526"></a>00526                 <span class="keywordflow">if</span> (j==7)
<a name="l00527"></a>00527                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,7,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,0,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,2,0));
<a name="l00528"></a>00528                 <span class="keywordflow">if</span> (j==8)
<a name="l00529"></a>00529                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,8,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,1,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,2,0));
<a name="l00530"></a>00530 
<a name="l00531"></a>00531 
<a name="l00532"></a>00532                 <span class="keywordflow">if</span> (j==14)
<a name="l00533"></a>00533 <span class="comment">// val_moy_temp(i,j,0)+= dt_v*val_moy_tot(i,13,0)*val_moy_tot(i,13,0);</span>
<a name="l00534"></a>00534                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,14,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,13,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,13,0));
<a name="l00535"></a>00535                 <span class="keywordflow">if</span> (j==15)
<a name="l00536"></a>00536                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,15,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,0,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,13,0));
<a name="l00537"></a>00537                 <span class="keywordflow">if</span> (j==16)
<a name="l00538"></a>00538                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,16,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,1,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,13,0));
<a name="l00539"></a>00539                 <span class="keywordflow">if</span> (j==17)
<a name="l00540"></a>00540                   <a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>(i,j,0)+= dt_v*(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,17,0)-<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,2,0)*<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,13,0));
<a name="l00541"></a>00541 
<a name="l00542"></a>00542               }
<a name="l00543"></a>00543         }
<a name="l00544"></a>00544     }
<a name="l00545"></a>00545 
<a name="l00546"></a>00546 <span class="comment">// Calcul des Moyennes de phases</span>
<a name="l00547"></a>00547 <span class="comment">//</span>
<a name="l00548"></a>00548 
<a name="l00549"></a>00549   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>() &amp;&amp; <a class="code" href="classTraitement__particulier__NS__canal.html#aae18e4636a9ef2d2915f2fce4975143d">oui_pulse</a>==1)
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551       <span class="keywordflow">if</span> ((tps&gt;=<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>)&amp;&amp;(tps&lt;=<a class="code" href="classTraitement__particulier__NS__canal.html#af08df3cb454d6cb245baad5e105e54ca">temps_fin</a>))
<a name="l00552"></a>00552         {
<a name="l00553"></a>00553           <span class="keywordtype">double</span> dt_v = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().pas_de_temps();
<a name="l00554"></a>00554 
<a name="l00555"></a>00555           <span class="keywordflow">if</span> ( (cos(<a class="code" href="classTraitement__particulier__NS__canal.html#a56b6f972cb1ea5bdd325b12ba51e9c6c">w</a>*tps) &gt; cos(<a class="code" href="classTraitement__particulier__NS__canal.html#a56b6f972cb1ea5bdd325b12ba51e9c6c">w</a>*(tps+dt_v))) &amp;&amp; (cos(<a class="code" href="classTraitement__particulier__NS__canal.html#a56b6f972cb1ea5bdd325b12ba51e9c6c">w</a>*tps) &gt; cos(<a class="code" href="classTraitement__particulier__NS__canal.html#a56b6f972cb1ea5bdd325b12ba51e9c6c">w</a>*(tps-dt_v))) ) <span class="comment">//!&lt; debut d&#39;une periode</span>
<a name="l00556"></a>00556 <span class="comment"></span>            {
<a name="l00557"></a>00557               <a class="code" href="classTraitement__particulier__NS__canal.html#a6a118cd952d452f7324e2936b53ca5c6">debut_phase</a>=tps;
<a name="l00558"></a>00558               <a class="code" href="classTraitement__particulier__NS__canal.html#afe320e66135a21a275a0dcab09d9e82f">ind_phase</a>=1;
<a name="l00559"></a>00559             }
<a name="l00560"></a>00560 
<a name="l00561"></a>00561           <span class="keywordflow">if</span>(<a class="code" href="classTraitement__particulier__NS__canal.html#afe320e66135a21a275a0dcab09d9e82f">ind_phase</a>==1)
<a name="l00562"></a>00562             {
<a name="l00563"></a>00563               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#adbcdf38f82f2c0c852604574bc97d267">Nphase</a>; k++)
<a name="l00564"></a>00564                 {
<a name="l00565"></a>00565                   <span class="keywordtype">double</span> tps_k=<a class="code" href="classTraitement__particulier__NS__canal.html#a6a118cd952d452f7324e2936b53ca5c6">debut_phase</a>+k/(Nphase*<a class="code" href="classTraitement__particulier__NS__canal.html#a6e3a55facd19bd83b5b63c4bc2f6ef68">freq</a>);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567                   <span class="keywordflow">if</span>( (tps &gt; tps_k-0.5*dt_v)  &amp;&amp; (tps &lt; tps_k+0.5*dt_v) ) <span class="comment">//!&lt; recherche de la k-phase correspondant</span>
<a name="l00568"></a>00568 <span class="comment"></span>                    {
<a name="l00569"></a>00569                       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a7b7909ad833e7c666532bd14fd5932f9">Nval</a>; j++)
<a name="l00570"></a>00570                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;NN; i++)
<a name="l00571"></a>00571                           <a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>(i,j,k) += <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(i,j,0);
<a name="l00572"></a>00572 
<a name="l00573"></a>00573                       <a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>(k)++;
<a name="l00574"></a>00574 
<a name="l00575"></a>00575                       <span class="keywordflow">if</span>(k==Nphase-1)  <a class="code" href="classTraitement__particulier__NS__canal.html#afe320e66135a21a275a0dcab09d9e82f">ind_phase</a>=2; <span class="comment">//!&lt; marqueur pour ecriture de moyennes de phase (voir plus bas)</span>
<a name="l00576"></a>00576 <span class="comment"></span>                    }
<a name="l00577"></a>00577                 }
<a name="l00578"></a>00578             }
<a name="l00579"></a>00579         }
<a name="l00580"></a>00580     }
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 <span class="comment">// Ecriture des Moyennes spatiales et temporelles</span>
<a name="l00583"></a>00583 <span class="comment">//</span>
<a name="l00584"></a>00584 
<a name="l00585"></a>00585   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00586"></a>00586     {
<a name="l00587"></a>00587       <span class="keywordtype">double</span> stationnaire_atteint=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().stationnaire_atteint();
<a name="l00588"></a>00588       <span class="keywordtype">double</span> tps_passe=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().temps_courant();
<a name="l00589"></a>00589       <span class="keywordtype">double</span> nb_pas_dt_max=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().nb_pas_dt_max();
<a name="l00590"></a>00590       <span class="keywordtype">double</span> nb_pas_dt=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().nb_pas_dt();
<a name="l00591"></a>00591       <span class="keywordtype">double</span> temps_max=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().temps_max();
<a name="l00592"></a>00592       <span class="keywordtype">int</span> impr_inst;
<a name="l00593"></a>00593       <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a018b545889267015ca0527ddfffbd896">dt_impr_moy_spat</a>&lt;=(tps-tps_passe))
<a name="l00594"></a>00594         impr_inst=1;
<a name="l00595"></a>00595       <span class="keywordflow">else</span>
<a name="l00596"></a>00596         {
<a name="l00597"></a>00597 <span class="comment">// Voir Schema_Temps_base::limpr pour information sur epsilon et modf</span>
<a name="l00598"></a>00598           <span class="keywordtype">double</span> i, j, epsilon = 1.e-8;
<a name="l00599"></a>00599           modf(tps/<a class="code" href="classTraitement__particulier__NS__canal.html#a018b545889267015ca0527ddfffbd896">dt_impr_moy_spat</a> + epsilon, &amp;i);
<a name="l00600"></a>00600           modf(tps_passe/<a class="code" href="classTraitement__particulier__NS__canal.html#a018b545889267015ca0527ddfffbd896">dt_impr_moy_spat</a> + epsilon, &amp;j);
<a name="l00601"></a>00601           impr_inst=(i&gt;j);
<a name="l00602"></a>00602         }
<a name="l00603"></a>00603       <span class="keywordtype">int</span> impr_stat;
<a name="l00604"></a>00604       <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#ad4473b66498a00e61219894aea9de45d">dt_impr_moy_temp</a>&lt;=(tps-tps_passe))
<a name="l00605"></a>00605         impr_stat=1;
<a name="l00606"></a>00606       <span class="keywordflow">else</span>
<a name="l00607"></a>00607         {
<a name="l00608"></a>00608 <span class="comment">// Voir Schema_Temps_base::limpr pour information sur epsilon et modf</span>
<a name="l00609"></a>00609           <span class="keywordtype">double</span> i, j, epsilon = 1.e-8;
<a name="l00610"></a>00610           modf(tps/<a class="code" href="classTraitement__particulier__NS__canal.html#ad4473b66498a00e61219894aea9de45d">dt_impr_moy_temp</a> + epsilon, &amp;i);
<a name="l00611"></a>00611           modf(tps_passe/<a class="code" href="classTraitement__particulier__NS__canal.html#ad4473b66498a00e61219894aea9de45d">dt_impr_moy_temp</a> + epsilon, &amp;j);
<a name="l00612"></a>00612           impr_stat=(i&gt;j);
<a name="l00613"></a>00613         }
<a name="l00614"></a>00614 
<a name="l00615"></a>00615 <span class="comment">// sauvegarde periodique des moyennes spatiales</span>
<a name="l00616"></a>00616 
<a name="l00617"></a>00617       <span class="keywordflow">if</span> ((nb_pas_dt+1&lt;=1) || impr_inst || (temps_max &lt;= tps) || (nb_pas_dt_max &lt;= nb_pas_dt+1) || stationnaire_atteint)
<a name="l00618"></a>00618         {
<a name="l00619"></a>00619           <span class="keywordtype">double</span> dt = 1.;
<a name="l00620"></a>00620 
<a name="l00621"></a>00621           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier1 = <span class="stringliteral">&quot;Moyennes_spatiales_vitesse_rho_mu_&quot;</span>;
<a name="l00622"></a>00622           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier2 = <span class="stringliteral">&quot;Moyennes_spatiales_nut_&quot;</span>;
<a name="l00623"></a>00623           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier3 = <span class="stringliteral">&quot;Moyennes_spatiales_Temp_&quot;</span>;
<a name="l00624"></a>00624           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> temps = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(tps);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626           fichier1 += temps;
<a name="l00627"></a>00627           fichier2 += temps;
<a name="l00628"></a>00628           fichier3 += temps;
<a name="l00629"></a>00629 
<a name="l00630"></a>00630           <span class="comment">/*</span>
<a name="l00631"></a>00631 <span class="comment">            ecriture_fichiers_moy_vitesse_rho_mu(val_moy_tot,fichier1,dt,0);</span>
<a name="l00632"></a>00632 <span class="comment">            if (oui_profil_nu_t == 1)   ecriture_fichiers_moy_nut(val_moy_tot,fichier2,dt,0);</span>
<a name="l00633"></a>00633 <span class="comment">            if (oui_profil_Temp == 1)   ecriture_fichiers_moy_Temp(val_moy_tot,fichier3,dt,0);</span>
<a name="l00634"></a>00634 <span class="comment">          */</span>
<a name="l00635"></a>00635 
<a name="l00636"></a>00636           <a class="code" href="classTraitement__particulier__NS__canal.html#a81b8d009dd1ad5df770f25bbf70b547c">ecriture_fichiers_moy_vitesse_rho_mu_old</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>,fichier1,dt,0);
<a name="l00637"></a>00637           <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a9277fe07b3e1cd730bf71956145b62c3">oui_profil_nu_t</a> == 1)   <a class="code" href="classTraitement__particulier__NS__canal.html#ad284801ab37cf81427220002c14762f1">ecriture_fichiers_moy_nut</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>,fichier2,dt,0);
<a name="l00638"></a>00638           <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a65b21ecbd62ddb38b6dcd7588fb803bd">oui_profil_Temp</a> == 1)   <a class="code" href="classTraitement__particulier__NS__canal.html#a50af2679483decb3e4c09ae228d3d2dc">ecriture_fichiers_moy_Temp_old</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>,fichier3,dt,0);
<a name="l00639"></a>00639         }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641 <span class="comment">// sauvegarde periodique des moyennes temporelles</span>
<a name="l00642"></a>00642 
<a name="l00643"></a>00643       <span class="keywordflow">if</span> ((tps&gt;<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>) &amp;&amp; ((nb_pas_dt+1&lt;=1) || impr_stat || (temps_max &lt;= tps) || (nb_pas_dt_max &lt;= nb_pas_dt+1) || stationnaire_atteint))
<a name="l00644"></a>00644         {
<a name="l00645"></a>00645           <span class="keywordtype">double</span> dt = tps-<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>;
<a name="l00646"></a>00646 
<a name="l00647"></a>00647           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier1 = <span class="stringliteral">&quot;Moyennes_temporelles_vitesse_rho_mu_&quot;</span>;
<a name="l00648"></a>00648           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier2 = <span class="stringliteral">&quot;Moyennes_temporelles_nut_&quot;</span>;
<a name="l00649"></a>00649           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier3 = <span class="stringliteral">&quot;Moyennes__temporelles_Temp_&quot;</span>;
<a name="l00650"></a>00650           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> temps = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(tps);
<a name="l00651"></a>00651 
<a name="l00652"></a>00652           fichier1 += temps;
<a name="l00653"></a>00653           fichier2 += temps;
<a name="l00654"></a>00654           fichier3 += temps;
<a name="l00655"></a>00655 
<a name="l00656"></a>00656           <a class="code" href="classTraitement__particulier__NS__canal.html#a5230715534b5086ffa45b228804bd916">ecriture_fichiers_moy_vitesse_rho_mu</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>,fichier1,dt,0);
<a name="l00657"></a>00657           <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a9277fe07b3e1cd730bf71956145b62c3">oui_profil_nu_t</a> == 1)   <a class="code" href="classTraitement__particulier__NS__canal.html#ad284801ab37cf81427220002c14762f1">ecriture_fichiers_moy_nut</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>,fichier2,dt,0);
<a name="l00658"></a>00658           <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a65b21ecbd62ddb38b6dcd7588fb803bd">oui_profil_Temp</a> == 1)   <a class="code" href="classTraitement__particulier__NS__canal.html#a22cd080396299dfdfeba702f174d2d84">ecriture_fichiers_moy_Temp</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>,fichier3,dt,0);
<a name="l00659"></a>00659         }
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 <span class="comment">// sauvegarde en continue des moyennes temporelles</span>
<a name="l00662"></a>00662 
<a name="l00663"></a>00663       <span class="keywordflow">if</span> (tps&gt;<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>)
<a name="l00664"></a>00664         {
<a name="l00665"></a>00665           <span class="keywordtype">double</span> dt = tps-<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>;
<a name="l00666"></a>00666 
<a name="l00667"></a>00667           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier1 = <span class="stringliteral">&quot;Moyennes_temporelles_vitesse_rho_mu&quot;</span>;
<a name="l00668"></a>00668           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier2 = <span class="stringliteral">&quot;Moyennes_temporelles_nut&quot;</span>;
<a name="l00669"></a>00669           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier3 = <span class="stringliteral">&quot;Moyennes__temporelles_Temp&quot;</span>;
<a name="l00670"></a>00670 
<a name="l00671"></a>00671           <a class="code" href="classTraitement__particulier__NS__canal.html#a5230715534b5086ffa45b228804bd916">ecriture_fichiers_moy_vitesse_rho_mu</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>,fichier1,dt,0);
<a name="l00672"></a>00672           <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a9277fe07b3e1cd730bf71956145b62c3">oui_profil_nu_t</a> == 1)   <a class="code" href="classTraitement__particulier__NS__canal.html#ad284801ab37cf81427220002c14762f1">ecriture_fichiers_moy_nut</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>,fichier2,dt,0);
<a name="l00673"></a>00673           <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a65b21ecbd62ddb38b6dcd7588fb803bd">oui_profil_Temp</a> == 1)   <a class="code" href="classTraitement__particulier__NS__canal.html#a22cd080396299dfdfeba702f174d2d84">ecriture_fichiers_moy_Temp</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#afbda677364ab0d66b351409ed238c4fc">val_moy_temp</a>,fichier3,dt,0);
<a name="l00674"></a>00674         }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676 <span class="comment">// sauvegarde en continue des moyennes de phase (en fin de cycle)</span>
<a name="l00677"></a>00677 
<a name="l00678"></a>00678       <span class="keywordflow">if</span> ( (<a class="code" href="classTraitement__particulier__NS__canal.html#afe320e66135a21a275a0dcab09d9e82f">ind_phase</a>==2) &amp;&amp; (tps&gt;<a class="code" href="classTraitement__particulier__NS__canal.html#aebbefd3aa46df185bd2a85743d98bc11">temps_deb</a>) )
<a name="l00679"></a>00679         {
<a name="l00680"></a>00680           <a class="code" href="classTraitement__particulier__NS__canal.html#afe320e66135a21a275a0dcab09d9e82f">ind_phase</a>=0;
<a name="l00681"></a>00681 
<a name="l00682"></a>00682           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#adbcdf38f82f2c0c852604574bc97d267">Nphase</a>; k++)
<a name="l00683"></a>00683             {
<a name="l00684"></a>00684               <span class="keywordtype">double</span> dt = <a class="code" href="classTraitement__particulier__NS__canal.html#a9d69bb556f02ab5cd5713b5b6f0dbb3c" title="nombre d&#39;echantillons par phase">Nb_ech_phase</a>(k);
<a name="l00685"></a>00685 
<a name="l00686"></a>00686               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier1 = <span class="stringliteral">&quot;Moyennes_de_phase_vitesse_rho_mu_&quot;</span>;
<a name="l00687"></a>00687               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier2 = <span class="stringliteral">&quot;Moyennes_de_phase_nut_&quot;</span>;
<a name="l00688"></a>00688               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier3 = <span class="stringliteral">&quot;Moyennes_de_phase_Temp_&quot;</span>;
<a name="l00689"></a>00689               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> phase = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(k);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691               fichier1 += phase;
<a name="l00692"></a>00692               fichier2 += phase;
<a name="l00693"></a>00693               fichier3 += phase;
<a name="l00694"></a>00694 
<a name="l00695"></a>00695 
<a name="l00696"></a>00696               <a class="code" href="classTraitement__particulier__NS__canal.html#a81b8d009dd1ad5df770f25bbf70b547c">ecriture_fichiers_moy_vitesse_rho_mu_old</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>,fichier1,dt,k);
<a name="l00697"></a>00697               <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a9277fe07b3e1cd730bf71956145b62c3">oui_profil_nu_t</a> == 1)   <a class="code" href="classTraitement__particulier__NS__canal.html#ad284801ab37cf81427220002c14762f1">ecriture_fichiers_moy_nut</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>,fichier2,dt,k);
<a name="l00698"></a>00698               <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__canal.html#a65b21ecbd62ddb38b6dcd7588fb803bd">oui_profil_Temp</a> == 1)   <a class="code" href="classTraitement__particulier__NS__canal.html#a50af2679483decb3e4c09ae228d3d2dc">ecriture_fichiers_moy_Temp_old</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#ade1b5965ca06ca1149eba62a2b888b1e">val_moy_phase</a>,fichier3,dt,k);
<a name="l00699"></a>00699             }
<a name="l00700"></a>00700         }
<a name="l00701"></a>00701     }
<a name="l00702"></a>00702 }
<a name="l00703"></a>00703 
<a name="l00704"></a>00704 
<a name="l00705"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a7e53a421d909387b6dbfa9672f95cc34">00705</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a7e53a421d909387b6dbfa9672f95cc34">Traitement_particulier_NS_canal::calcul_reynolds_tau</a>()
<a name="l00706"></a>00706 {
<a name="l00707"></a>00707 <span class="comment">// Aspects geometriques du maillage</span>
<a name="l00708"></a>00708 <span class="comment">//</span>
<a name="l00709"></a>00709 <span class="comment">// !!!!!  Hypotheses : maillage symetrique suivant la demi-hauteur et s&#39;etendant de Y=0 a Y=H</span>
<a name="l00710"></a>00710 
<a name="l00711"></a>00711   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_discr=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#a324a761eaad25eb00d18e14764a1362e" title="Renvoie la discretisation associee a l&#39;equation.">discretisation</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00712"></a>00712 <span class="comment">// indice du premier point hors paroi</span>
<a name="l00713"></a>00713   <span class="keywordtype">int</span> kmin=(nom_discr==<span class="stringliteral">&quot;VEFPreP1B&quot;</span> || nom_discr==<span class="stringliteral">&quot;VEF&quot;</span>) ? 1 : 0;
<a name="l00714"></a>00714   <span class="keywordtype">int</span> kmax=<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()-1-kmin;                         <span class="comment">//!&lt; indice du dernier point hors paroi</span>
<a name="l00715"></a>00715 <span class="comment"></span>  <span class="keywordtype">double</span> ymin=<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>(kmin);                              <span class="comment">//!&lt; position du premier point</span>
<a name="l00716"></a>00716 <span class="comment"></span>  <span class="keywordtype">double</span> ymax=<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>(kmax);                              <span class="comment">//!&lt; position du dernier point</span>
<a name="l00717"></a>00717 <span class="comment"></span>  <span class="keywordtype">double</span> hs2=0.5*(ymin+ymax);                           <span class="comment">//!&lt; demi-hauteur</span>
<a name="l00718"></a>00718 <span class="comment"></span>
<a name="l00719"></a>00719 <span class="comment">// check that the canal is in the good bounds</span>
<a name="l00720"></a>00720   <span class="keywordflow">if</span> ( ymin &lt; 0. || ymax &lt; 0.)
<a name="l00721"></a>00721     {
<a name="l00722"></a>00722       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error Traitement_particulier_NS_canal&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00723"></a>00723       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Invalid mesh: Y must be between 0 and H&gt;0&quot;</span> &lt;&lt; finl;
<a name="l00724"></a>00724       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;In addition, the mesh must be symmetric along the half-height.&quot;</span> &lt;&lt; finl;
<a name="l00725"></a>00725       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>() ;
<a name="l00726"></a>00726     }
<a name="l00727"></a>00727 
<a name="l00728"></a>00728 <span class="comment">// viscosite dynamique</span>
<a name="l00729"></a>00729   <span class="keywordtype">double</span> mu_bas  = <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(kmin,11,0);
<a name="l00730"></a>00730   <span class="keywordtype">double</span> mu_haut = <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(kmax,11,0);
<a name="l00731"></a>00731 
<a name="l00732"></a>00732 <span class="comment">// masse volumique</span>
<a name="l00733"></a>00733   <span class="keywordtype">double</span> rho_bas  = <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(kmin,10,0);
<a name="l00734"></a>00734   <span class="keywordtype">double</span> rho_haut = <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(kmax,10,0);
<a name="l00735"></a>00735 
<a name="l00736"></a>00736 <span class="comment">// cisaillement a la paroi</span>
<a name="l00737"></a>00737   <span class="keywordtype">double</span> tauwb, tauwh, tauwm;
<a name="l00738"></a>00738 <span class="comment">// int nbfaces_tot=0;</span>
<a name="l00739"></a>00739 
<a name="l00740"></a>00740   <span class="keywordtype">int</span> nb_cl_diri=0;
<a name="l00741"></a>00741   <span class="keywordtype">double</span> tauw_diri_m=0.;
<a name="l00742"></a>00742   <span class="keywordtype">double</span> retau_diri_m=0.;
<a name="l00743"></a>00743   <span class="keywordtype">double</span> utau_diri_m=0.;
<a name="l00744"></a>00744 
<a name="l00745"></a>00745   <span class="keywordtype">int</span> nb_cl_robin=0;
<a name="l00746"></a>00746   <span class="keywordtype">double</span> tauw_robin_m=0.;
<a name="l00747"></a>00747   <span class="keywordtype">double</span> retau_robin_m=0.;
<a name="l00748"></a>00748   <span class="keywordtype">double</span> utau_robin_m=0.;
<a name="l00749"></a>00749 
<a name="l00750"></a>00750   <span class="keyword">const</span> <a class="code" href="classRef__Objet__U.html">RefObjU</a>&amp; modele_turbulence         = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#ab0bb5d06bdc91e131dc9d5f9d7b57095">get_modele</a>(<a class="code" href="Equation__base_8h.html#a2c9d34b2cc47e5b2b18347de20a77db5a0fecbd75e0b8b4c37ffd696e173a14c7">TURBULENCE</a>);
<a name="l00751"></a>00751   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn                 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classEquation__base.html">Equation_base</a>,<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>()) ;
<a name="l00752"></a>00752   <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis__base.html" title="classe Zone_Cl_dis_base Les objets Zone_Cl_dis_base representent les conditions aux limites discretis...">Zone_Cl_dis_base</a>&amp; zone_Cl_dis_base = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__Cl__dis__base.html" title="classe Zone_Cl_dis_base Les objets Zone_Cl_dis_base representent les conditions aux limites discretis...">Zone_Cl_dis_base</a>,eqn.<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>().<a class="code" href="classDeriv__Zone__Cl__dis__base.html#a6b56880f00b604e1f13970ec6d5bc077">valeur</a>());
<a name="l00753"></a>00753   <span class="keyword">const</span> <a class="code" href="classConds__lim.html">Conds_lim</a>&amp; les_cl                  = zone_Cl_dis_base.les_conditions_limites();
<a name="l00754"></a>00754   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zone_VF                   = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,eqn.<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>());
<a name="l00755"></a>00755   <span class="keywordtype">double</span> tps                               = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00756"></a>00756 
<a name="l00757"></a>00757   <span class="keywordtype">double</span> nb_pas_dt=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().nb_pas_dt();
<a name="l00758"></a>00758   <span class="keywordtype">int</span> reprise = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#acafc48b3c050d6c292bb8395a7904a33">reprise_effectuee</a>();
<a name="l00759"></a>00759   <span class="keywordtype">bool</span> new_file = ( nb_pas_dt == 0 &amp;&amp; reprise == 0 );
<a name="l00760"></a>00760   <a class="code" href="arch_8h.html#a58aa6cef3a754a92479a2fb744a5f538" title="Gestion des dependances machines pour l&#39;appel a FORTRAN La macro F77DECLARE(TOTO) permet de declarer ...">IOS_OPEN_MODE</a> mode;
<a name="l00761"></a>00761   <span class="keywordflow">if</span> (new_file == 0)
<a name="l00762"></a>00762     mode = (ios::out | ios::app);
<a name="l00763"></a>00763   <span class="keywordflow">else</span>
<a name="l00764"></a>00764     mode = ios::out;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766   <span class="keywordtype">int</span> nb_cl=les_cl.size();
<a name="l00767"></a>00767   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_cl=0; num_cl&lt;nb_cl; num_cl++)
<a name="l00768"></a>00768     {
<a name="l00769"></a>00769       <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = les_cl[num_cl];
<a name="l00770"></a>00770       <span class="keywordflow">if</span> (la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Paroi_decalee_Robin&quot;</span>)
<a name="l00771"></a>00771         {
<a name="l00772"></a>00772           nb_cl_robin+=1;
<a name="l00773"></a>00773         }
<a name="l00774"></a>00774       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDirichlet__paroi__fixe.html" title="classe Dirichlet_paroi_fixe Represente une paroi immobile dans une equation de type Navier_Stokes...">Dirichlet_paroi_fixe</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l00775"></a>00775         {
<a name="l00776"></a>00776           nb_cl_diri+=1;
<a name="l00777"></a>00777         }
<a name="l00778"></a>00778     }
<a name="l00779"></a>00779 
<a name="l00780"></a>00780   <span class="keywordflow">if</span> (modele_turbulence.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>() &amp;&amp; !<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMod__turb__hyd__base.html" title="Classe Mod_turb_hyd_base Cette classe sert de base a la hierarchie des classes qui representent un mo...">Mod_turb_hyd_base</a>,modele_turbulence.<a class="code" href="classRef__Objet__U.html#ad875112c0fd275aa0c0aa710481ab11e">valeur</a>()).loi_paroi().valeur().que_suis_je().debute_par(<span class="stringliteral">&quot;negligeable&quot;</span>))
<a name="l00781"></a>00781     {
<a name="l00782"></a>00782 <span class="comment">// PQ : 13/07/05 : prise en compte des lois de paroi pour le calcul de u_tau</span>
<a name="l00783"></a>00783 <span class="comment">// Hypotheses :    1ere condition de Dirichlet = paroi basse</span>
<a name="l00784"></a>00784 <span class="comment">// 2eme condition de Dirichlet = paroi haute</span>
<a name="l00785"></a>00785 <span class="comment">// maillage regulier suivant x</span>
<a name="l00786"></a>00786       <span class="keyword">const</span> <a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>&amp; fluide = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>,<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>());
<a name="l00787"></a>00787       <span class="keyword">const</span> <a class="code" href="classTurbulence__paroi.html" title="Classe Turbulence_paroi Classe generique de la hierarchie des turbulences au niveau de la paroi...">Turbulence_paroi</a>&amp; loipar           = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMod__turb__hyd__base.html" title="Classe Mod_turb_hyd_base Cette classe sert de base a la hierarchie des classes qui representent un mo...">Mod_turb_hyd_base</a>,modele_turbulence.<a class="code" href="classRef__Objet__U.html#ad875112c0fd275aa0c0aa710481ab11e">valeur</a>()).loi_paroi();
<a name="l00788"></a>00788       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> tau_tan;
<a name="l00789"></a>00789       tau_tan.<a class="code" href="classDoubleTab.html#afc7cddeeec2c80636e54eaf330ac41ad" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(loipar-&gt;Cisaillement_paroi());
<a name="l00790"></a>00790 
<a name="l00791"></a>00791 <span class="comment">// int num_cl_rep=0;</span>
<a name="l00792"></a>00792 <span class="comment">// int nbfaces=0;</span>
<a name="l00793"></a>00793       tauwb=0.;
<a name="l00794"></a>00794       tauwh=0.;
<a name="l00795"></a>00795 
<a name="l00796"></a>00796 <span class="comment">// dirichlet</span>
<a name="l00797"></a>00797       <span class="keywordflow">if</span> ( nb_cl_diri != 0 )
<a name="l00798"></a>00798         {
<a name="l00799"></a>00799           <a class="code" href="classDoubleVect.html">DoubleVect</a> tauw_diri(nb_cl_diri);
<a name="l00800"></a>00800           <a class="code" href="classDoubleVect.html">DoubleVect</a> retau_diri(nb_cl_diri);
<a name="l00801"></a>00801           <a class="code" href="classDoubleVect.html">DoubleVect</a> utau_diri(nb_cl_diri);
<a name="l00802"></a>00802 <span class="comment">// search of cl diri</span>
<a name="l00803"></a>00803 <span class="comment">// nb cl diri</span>
<a name="l00804"></a>00804           <span class="keywordtype">double</span> tauw_diri_tmp=0.;
<a name="l00805"></a>00805           <span class="keywordtype">int</span> numero_bord_diri=0;
<a name="l00806"></a>00806           <span class="keywordtype">int</span> nbfaces_bord_diri=0;
<a name="l00807"></a>00807 
<a name="l00808"></a>00808           <span class="keywordtype">double</span> rho = 0.;
<a name="l00809"></a>00809           <span class="keywordtype">double</span> mu = 0.;
<a name="l00810"></a>00810 
<a name="l00811"></a>00811           <span class="keywordflow">if</span> ( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00812"></a>00812             {
<a name="l00813"></a>00813               rho = fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>()(0,0);
<a name="l00814"></a>00814             }
<a name="l00815"></a>00815           <span class="keywordflow">if</span> ( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00816"></a>00816             {
<a name="l00817"></a>00817               mu = fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>()(0,0);
<a name="l00818"></a>00818             }
<a name="l00819"></a>00819 
<a name="l00820"></a>00820 <span class="comment">// for each cl, calculation of the mean tauw</span>
<a name="l00821"></a>00821 <span class="comment">// loop on boundaries</span>
<a name="l00822"></a>00822           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_cl=0; num_cl&lt;nb_cl; num_cl++)
<a name="l00823"></a>00823             {
<a name="l00824"></a>00824               tauw_diri_tmp=0.;
<a name="l00825"></a>00825               <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00826"></a>00826                 rho = 0.;
<a name="l00827"></a>00827               <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00828"></a>00828                 mu = 0.;
<a name="l00829"></a>00829               <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = les_cl[num_cl];
<a name="l00830"></a>00830               <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDirichlet__paroi__fixe.html" title="classe Dirichlet_paroi_fixe Represente une paroi immobile dans une equation de type Navier_Stokes...">Dirichlet_paroi_fixe</a>,la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>()))
<a name="l00831"></a>00831                 {
<a name="l00832"></a>00832                   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_dis = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>());
<a name="l00833"></a>00833                   nbfaces_bord_diri = la_front_dis.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00834"></a>00834                   <span class="keywordtype">int</span> ndeb = la_front_dis.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00835"></a>00835                   <span class="keywordtype">int</span> nfin = ndeb + nbfaces_bord_diri;
<a name="l00836"></a>00836                   <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a> == 2 )
<a name="l00837"></a>00837                     {
<a name="l00838"></a>00838 <span class="comment">// loop on faces in 2D</span>
<a name="l00839"></a>00839                       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> fac=ndeb; fac&lt;nfin ; fac++)
<a name="l00840"></a>00840                         {
<a name="l00841"></a>00841                           tauw_diri_tmp += sqrt(tau_tan(fac,0)*tau_tan(fac,0));
<a name="l00842"></a>00842 
<a name="l00843"></a>00843                           <span class="keywordtype">int</span> elem = zone_VF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(fac,0);
<a name="l00844"></a>00844                           <span class="keywordflow">if</span> (elem == -1)
<a name="l00845"></a>00845                             elem = zone_VF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(fac,1);
<a name="l00846"></a>00846                           <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00847"></a>00847                             rho += fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>()[elem];
<a name="l00848"></a>00848                           <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00849"></a>00849                             mu += fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>()[elem];
<a name="l00850"></a>00850                         }
<a name="l00851"></a>00851                     }
<a name="l00852"></a>00852                   <span class="keywordflow">else</span>
<a name="l00853"></a>00853                     {
<a name="l00854"></a>00854 <span class="comment">// loop on faces on 3D</span>
<a name="l00855"></a>00855                       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> fac=ndeb; fac&lt;nfin ; fac++)
<a name="l00856"></a>00856                         {
<a name="l00857"></a>00857                           tauw_diri_tmp += sqrt(tau_tan(fac,0)*tau_tan(fac,0)+tau_tan(fac,2)*tau_tan(fac,2));
<a name="l00858"></a>00858 
<a name="l00859"></a>00859                           <span class="keywordtype">int</span> elem = zone_VF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(fac,0);
<a name="l00860"></a>00860                           <span class="keywordflow">if</span> (elem == -1)
<a name="l00861"></a>00861                             elem = zone_VF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(fac,1);
<a name="l00862"></a>00862                           <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00863"></a>00863                             rho += fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>()[elem];
<a name="l00864"></a>00864                           <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00865"></a>00865                             mu += fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>()[elem];
<a name="l00866"></a>00866                         }
<a name="l00867"></a>00867                     }
<a name="l00868"></a>00868                   tauw_diri_tmp=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(tauw_diri_tmp)/<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(nbfaces_bord_diri);
<a name="l00869"></a>00869                   <span class="keywordflow">if</span>(!(<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a4ef1cb4c4eed0aab75358ab7a91e29db">is_dilatable</a>()))
<a name="l00870"></a>00870                     tauw_diri_tmp *= rho ;
<a name="l00871"></a>00871 
<a name="l00872"></a>00872                   <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00873"></a>00873                     rho=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(rho)/<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(nbfaces_bord_diri);
<a name="l00874"></a>00874                   <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00875"></a>00875                     mu=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(mu)/<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(nbfaces_bord_diri);
<a name="l00876"></a>00876 
<a name="l00877"></a>00877                   tauw_diri(numero_bord_diri) = tauw_diri_tmp;
<a name="l00878"></a>00878                   utau_diri(numero_bord_diri) = sqrt(tauw_diri_tmp/rho);
<a name="l00879"></a>00879                   retau_diri(numero_bord_diri)= rho*utau_diri(numero_bord_diri)*hs2/mu;
<a name="l00880"></a>00880 
<a name="l00881"></a>00881                   tauw_diri_m  += tauw_diri(numero_bord_diri);
<a name="l00882"></a>00882                   utau_diri_m  += utau_diri(numero_bord_diri);
<a name="l00883"></a>00883                   retau_diri_m += retau_diri(numero_bord_diri);
<a name="l00884"></a>00884 
<a name="l00885"></a>00885                   numero_bord_diri+=1;
<a name="l00886"></a>00886                 }
<a name="l00887"></a>00887             } <span class="comment">//!&lt; loop on boundaries</span>
<a name="l00888"></a>00888 <span class="comment"></span>
<a name="l00889"></a>00889           tauw_diri_m  =tauw_diri_m/nb_cl_diri;
<a name="l00890"></a>00890           retau_diri_m =retau_diri_m/nb_cl_diri;
<a name="l00891"></a>00891           utau_diri_m  =utau_diri_m/nb_cl_diri;
<a name="l00892"></a>00892 
<a name="l00893"></a>00893 <span class="comment">// prints</span>
<a name="l00894"></a>00894           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00895"></a>00895             {
<a name="l00896"></a>00896               <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic7(<span class="stringliteral">&quot;tauw.dat&quot;</span>, mode);
<a name="l00897"></a>00897               <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic8(<span class="stringliteral">&quot;reynolds_tau.dat&quot;</span>, mode);
<a name="l00898"></a>00898               <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic9(<span class="stringliteral">&quot;u_tau.dat&quot;</span>, mode);
<a name="l00899"></a>00899               fic7 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot;   &quot;</span> &lt;&lt; tauw_diri_m   &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l00900"></a>00900               fic8 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot;   &quot;</span> &lt;&lt; retau_diri_m  &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l00901"></a>00901               fic9 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot;   &quot;</span> &lt;&lt; utau_diri_m   &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l00902"></a>00902               <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> num=0 ; num&lt;nb_cl_diri ; num++)
<a name="l00903"></a>00903                 {
<a name="l00904"></a>00904                   fic7 &lt;&lt; tauw_diri(num)   &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l00905"></a>00905                   fic8 &lt;&lt; retau_diri(num)  &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l00906"></a>00906                   fic9 &lt;&lt; utau_diri(num)   &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l00907"></a>00907                 }
<a name="l00908"></a>00908               fic7 &lt;&lt;  <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00909"></a>00909               fic8 &lt;&lt;  finl;
<a name="l00910"></a>00910               fic9 &lt;&lt;  finl;
<a name="l00911"></a>00911               fic7.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00912"></a>00912               fic8.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00913"></a>00913               fic9.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00914"></a>00914               fic7.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l00915"></a>00915               fic8.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l00916"></a>00916               fic9.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l00917"></a>00917             }
<a name="l00918"></a>00918         } <span class="comment">//!&lt; end dirichlet</span>
<a name="l00919"></a>00919 <span class="comment"></span>
<a name="l00920"></a>00920 <span class="comment">// robin</span>
<a name="l00921"></a>00921       <span class="keywordflow">if</span> ( nb_cl_robin != 0 )
<a name="l00922"></a>00922         {
<a name="l00923"></a>00923           <a class="code" href="classDoubleVect.html">DoubleVect</a> tauw_robin(nb_cl_robin);
<a name="l00924"></a>00924           <a class="code" href="classDoubleVect.html">DoubleVect</a> retau_robin(nb_cl_robin);
<a name="l00925"></a>00925           <a class="code" href="classDoubleVect.html">DoubleVect</a> utau_robin(nb_cl_robin);
<a name="l00926"></a>00926 <span class="comment">// search of cl robin</span>
<a name="l00927"></a>00927 <span class="comment">// nb cl robin</span>
<a name="l00928"></a>00928           <span class="keywordtype">double</span> tauw_robin_tmp=0.;
<a name="l00929"></a>00929           <span class="keywordtype">int</span> numero_bord_robin=0;
<a name="l00930"></a>00930           <span class="keywordtype">int</span> nbfaces_bord_robin=0;
<a name="l00931"></a>00931           <span class="keywordtype">double</span> rho = 0.;
<a name="l00932"></a>00932           <span class="keywordtype">double</span> mu = 0.;
<a name="l00933"></a>00933 
<a name="l00934"></a>00934           <span class="keywordflow">if</span> ( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00935"></a>00935             {
<a name="l00936"></a>00936               rho = fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>()(0,0);
<a name="l00937"></a>00937             }
<a name="l00938"></a>00938           <span class="keywordflow">if</span> ( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00939"></a>00939             {
<a name="l00940"></a>00940               mu = fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>()(0,0);
<a name="l00941"></a>00941             }
<a name="l00942"></a>00942 
<a name="l00943"></a>00943 <span class="comment">// for each cl, calculation of the mean tauw</span>
<a name="l00944"></a>00944 <span class="comment">// loop on boundaries</span>
<a name="l00945"></a>00945           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_cl=0; num_cl&lt;nb_cl; num_cl++)
<a name="l00946"></a>00946             {
<a name="l00947"></a>00947               tauw_robin_tmp=0.;
<a name="l00948"></a>00948               <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00949"></a>00949                 rho = 0.;
<a name="l00950"></a>00950               <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00951"></a>00951                 mu = 0.;
<a name="l00952"></a>00952               <span class="keyword">const</span> <a class="code" href="classCond__lim.html" title="classe Cond_lim Classe generique servant a representer n&#39;importe quelle classe derivee de la classe C...">Cond_lim</a>&amp; la_cl = les_cl[num_cl];
<a name="l00953"></a>00953               <span class="keywordflow">if</span> (la_cl.<a class="code" href="classDeriv__Cond__lim__base.html#a482c910c704f6f51065a8b7d25acf48a">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Paroi_decalee_Robin&quot;</span>)
<a name="l00954"></a>00954                 {
<a name="l00955"></a>00955                   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; la_front_dis = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,la_cl.<a class="code" href="classCond__lim.html#a5b2d24809cee07727006a891d4ce8d22" title="Appel a l&#39;objet sous-jacent Renvoie la frontiere discretisee associee a la condition aux limites...">frontiere_dis</a>());
<a name="l00956"></a>00956                   nbfaces_bord_robin = la_front_dis.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00957"></a>00957                   <span class="keywordtype">int</span> ndeb = la_front_dis.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00958"></a>00958                   <span class="keywordtype">int</span> nfin = ndeb + nbfaces_bord_robin;
<a name="l00959"></a>00959                   <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a> == 2 )
<a name="l00960"></a>00960                     {
<a name="l00961"></a>00961 <span class="comment">// loop on faces in 2D</span>
<a name="l00962"></a>00962                       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> fac=ndeb; fac&lt;nfin ; fac++)
<a name="l00963"></a>00963                         {
<a name="l00964"></a>00964                           tauw_robin_tmp+=sqrt(tau_tan(fac,0)*tau_tan(fac,0));
<a name="l00965"></a>00965 
<a name="l00966"></a>00966                           <span class="keywordtype">int</span> elem = zone_VF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(fac,0);
<a name="l00967"></a>00967                           <span class="keywordflow">if</span> (elem == -1)
<a name="l00968"></a>00968                             elem = zone_VF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(fac,1);
<a name="l00969"></a>00969                           <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00970"></a>00970                             rho+=fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>()[elem];
<a name="l00971"></a>00971                           <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00972"></a>00972                             mu+=fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>()[elem];
<a name="l00973"></a>00973                         }
<a name="l00974"></a>00974                     }
<a name="l00975"></a>00975                   <span class="keywordflow">else</span>
<a name="l00976"></a>00976                     {
<a name="l00977"></a>00977 <span class="comment">// loop on faces on 3D</span>
<a name="l00978"></a>00978                       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> fac=ndeb; fac&lt;nfin ; fac++)
<a name="l00979"></a>00979                         {
<a name="l00980"></a>00980                           tauw_robin_tmp+=sqrt(tau_tan(fac,0)*tau_tan(fac,0)+tau_tan(fac,2)*tau_tan(fac,2));
<a name="l00981"></a>00981 
<a name="l00982"></a>00982                           <span class="keywordtype">int</span> elem = zone_VF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(fac,0);
<a name="l00983"></a>00983                           <span class="keywordflow">if</span> (elem == -1)
<a name="l00984"></a>00984                             elem = zone_VF.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(fac,1);
<a name="l00985"></a>00985                           <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00986"></a>00986                             rho+=fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>()[elem];
<a name="l00987"></a>00987                           <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00988"></a>00988                             mu+=fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classChamp__Don.html#a7e848a3a3cbe82cb50ab70c0c96505bd" title="Appel a l&#39;objet sous-jacent. Renvoie le tableau des valeurs.">valeurs</a>()[elem];
<a name="l00989"></a>00989                         }
<a name="l00990"></a>00990                     }
<a name="l00991"></a>00991                   tauw_robin_tmp=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(tauw_robin_tmp)/<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(nbfaces_bord_robin);
<a name="l00992"></a>00992                   <span class="keywordflow">if</span>(!(<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a4ef1cb4c4eed0aab75358ab7a91e29db">is_dilatable</a>()))
<a name="l00993"></a>00993                     tauw_robin_tmp *= rho ;
<a name="l00994"></a>00994 
<a name="l00995"></a>00995                   <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>()) )
<a name="l00996"></a>00996                     rho=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(rho)/<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(nbfaces_bord_robin);
<a name="l00997"></a>00997                   <span class="keywordflow">if</span> ( !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Uniforme.html" title="classe Champ_Uniforme Represente un champ constant dans l&#39;espace et dans le temps.">Champ_Uniforme</a>,fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>().<a class="code" href="classDeriv__Champ__Don__base.html#ae16e7e2a7a706352781c5ecc7764703d">valeur</a>()) )
<a name="l00998"></a>00998                     mu=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(mu)/<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(nbfaces_bord_robin);
<a name="l00999"></a>00999 
<a name="l01000"></a>01000                   tauw_robin(numero_bord_robin) = tauw_robin_tmp;
<a name="l01001"></a>01001                   utau_robin(numero_bord_robin) = sqrt(tauw_robin_tmp/rho);
<a name="l01002"></a>01002                   retau_robin(numero_bord_robin)= rho*utau_robin(numero_bord_robin)*hs2/mu;
<a name="l01003"></a>01003 
<a name="l01004"></a>01004                   tauw_robin_m  += tauw_robin(numero_bord_robin);
<a name="l01005"></a>01005                   utau_robin_m  += utau_robin(numero_bord_robin);
<a name="l01006"></a>01006                   retau_robin_m += retau_robin(numero_bord_robin);
<a name="l01007"></a>01007 
<a name="l01008"></a>01008                   numero_bord_robin+=1;
<a name="l01009"></a>01009                 }
<a name="l01010"></a>01010             } <span class="comment">//!&lt; loop on boundaries</span>
<a name="l01011"></a>01011 <span class="comment"></span>
<a name="l01012"></a>01012           tauw_robin_m  = tauw_robin_m/nb_cl_robin;
<a name="l01013"></a>01013           retau_robin_m = retau_robin_m/nb_cl_robin;
<a name="l01014"></a>01014           utau_robin_m  = utau_robin_m/nb_cl_robin;
<a name="l01015"></a>01015 
<a name="l01016"></a>01016 <span class="comment">// prints</span>
<a name="l01017"></a>01017           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l01018"></a>01018             {
<a name="l01019"></a>01019               <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic4(<span class="stringliteral">&quot;tauw_robin.dat&quot;</span>, mode);
<a name="l01020"></a>01020               <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic5(<span class="stringliteral">&quot;reynolds_tau_robin.dat&quot;</span>, mode);
<a name="l01021"></a>01021               <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic6(<span class="stringliteral">&quot;u_tau_robin.dat&quot;</span>, mode);
<a name="l01022"></a>01022               fic4 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot;   &quot;</span> &lt;&lt; tauw_robin_m   &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l01023"></a>01023               fic5 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot;   &quot;</span> &lt;&lt; retau_robin_m  &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l01024"></a>01024               fic6 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot;   &quot;</span> &lt;&lt; utau_robin_m   &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l01025"></a>01025               <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> num=0 ; num&lt;nb_cl_robin ; num++)
<a name="l01026"></a>01026                 {
<a name="l01027"></a>01027                   fic4 &lt;&lt; tauw_robin(num)   &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l01028"></a>01028                   fic5 &lt;&lt; retau_robin(num)  &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l01029"></a>01029                   fic6 &lt;&lt; utau_robin(num)   &lt;&lt; <span class="stringliteral">&quot;   &quot;</span>;
<a name="l01030"></a>01030                 }
<a name="l01031"></a>01031               fic4 &lt;&lt;  <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01032"></a>01032               fic5 &lt;&lt;  finl;
<a name="l01033"></a>01033               fic6 &lt;&lt;  finl;
<a name="l01034"></a>01034               fic4.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l01035"></a>01035               fic5.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l01036"></a>01036               fic6.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l01037"></a>01037               fic4.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01038"></a>01038               fic5.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01039"></a>01039               fic6.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01040"></a>01040             }
<a name="l01041"></a>01041         } <span class="comment">//!&lt; end robin</span>
<a name="l01042"></a>01042 <span class="comment"></span><span class="comment"></span>
<a name="l01043"></a>01043 <span class="comment">////!&lt; begin old</span>
<a name="l01044"></a>01044 <span class="comment">////!&lt;    search of cl dirichlet      for (int num_cl=0; num_cl&lt;nb_cl; num_cl++)        {          //Loop on boundaries          const Cond_lim&amp; la_cl = les_cl[num_cl];          if (sub_type(Dirichlet_paroi_fixe,la_cl.valeur()))            {              const Front_VF&amp; la_front_dis = ref_cast(Front_VF,la_cl.frontiere_dis());              nbfaces = la_front_dis.nb_faces();              int ndeb = la_front_dis.num_premiere_face();              int nfin = ndeb + nbfaces;              if (Objet_U::dimension == 2 )                for (int fac=ndeb; fac&lt;nfin ; fac++)                  {                    tauwb+=sqrt(tau_tan(fac,0)*tau_tan(fac,0));                  }              else                for (int fac=ndeb; fac&lt;nfin ; fac++)                  {                    tauwb+=sqrt(tau_tan(fac,0)*tau_tan(fac,0)+tau_tan(fac,2)*tau_tan(fac,2));                  }              num_cl_rep=num_cl+1;              break;            }        } //Loop on boundaries      nbfaces_tot=mp_sum(nbfaces);      if (nbfaces_tot)        tauwb=mp_sum(tauwb)/nbfaces_tot;</span>
<a name="l01045"></a>01045 <span class="comment"></span><span class="comment">//</span>
<a name="l01046"></a>01046 <span class="comment">//</span>
<a name="l01047"></a>01047 <span class="comment">//</span>
<a name="l01048"></a>01048 <span class="comment">//</span>
<a name="l01049"></a>01049 <span class="comment">//</span>
<a name="l01050"></a>01050 <span class="comment">//</span>
<a name="l01051"></a>01051 <span class="comment">//</span>
<a name="l01052"></a>01052 <span class="comment">//</span>
<a name="l01053"></a>01053 <span class="comment">//</span>
<a name="l01054"></a>01054 <span class="comment">//</span>
<a name="l01055"></a>01055 <span class="comment">//</span>
<a name="l01056"></a>01056 <span class="comment">//</span>
<a name="l01057"></a>01057 <span class="comment">//</span>
<a name="l01058"></a>01058 <span class="comment">//</span>
<a name="l01059"></a>01059 <span class="comment">//</span>
<a name="l01060"></a>01060 <span class="comment">//</span>
<a name="l01061"></a>01061 <span class="comment">//</span>
<a name="l01062"></a>01062 <span class="comment">//</span>
<a name="l01063"></a>01063 <span class="comment">//</span>
<a name="l01064"></a>01064 <span class="comment">//</span>
<a name="l01065"></a>01065 <span class="comment">//</span>
<a name="l01066"></a>01066 <span class="comment">//</span>
<a name="l01067"></a>01067 <span class="comment">//</span>
<a name="l01068"></a>01068 <span class="comment">//</span>
<a name="l01069"></a>01069 <span class="comment">//</span>
<a name="l01070"></a>01070 <span class="comment">//</span>
<a name="l01071"></a>01071 <span class="comment">//</span><span class="comment"></span>
<a name="l01072"></a>01072 <span class="comment">////!&lt;    on cherche la deuxieme cl dirichlet      nbfaces=0;      for (int num_cl=num_cl_rep; num_cl&lt;nb_cl; num_cl++)        {          //Boucle sur les bords          const Cond_lim&amp; la_cl = les_cl[num_cl];          if (sub_type(Dirichlet_paroi_fixe,la_cl.valeur()))            {              const Front_VF&amp; la_front_dis = ref_cast(Front_VF,la_cl.frontiere_dis());              nbfaces = la_front_dis.nb_faces();              int ndeb = la_front_dis.num_premiere_face();              int nfin = ndeb + nbfaces;              if (Objet_U::dimension == 2 )                for (int fac=ndeb; fac&lt;nfin ; fac++)                  {                    tauwh+=sqrt(tau_tan(fac,0)*tau_tan(fac,0));                  }              else                for (int fac=ndeb; fac&lt;nfin ; fac++)                  {                    tauwh+=sqrt(tau_tan(fac,0)*tau_tan(fac,0)+tau_tan(fac,2)*tau_tan(fac,2));                  }              break;            }        } //Boucle sur les bords      nbfaces_tot=mp_sum(nbfaces);      if (nbfaces_tot)        tauwh=mp_sum(tauwh)/nbfaces_tot;      if(!(mon_equation.valeur().probleme().is_QC()))        {          tauwb*=rho_bas;          tauwh*=rho_haut;        }      if (je_suis_maitre())        {          // calcul et ecritures des differentes grandeurs parietales          //////////////////////////////////////////////////////          // vitesse de frottement          double utaub=sqrt(tauwb/rho_bas);          if(val_moy_tot(kmin,0,0)&lt;=0) utaub*=-1.;          double utauh=sqrt(tauwh/rho_haut);          if(val_moy_tot(kmax,0,0)&lt;=0) utauh*=-1.;          double utaum=0.5*(utauh+utaub);          // Reynolds de frottement          double retaub=rho_bas*utaub*hs2/mu_bas;          double retauh=rho_haut*utauh*hs2/mu_haut;          double retaum=0.5*(retauh+retaub);          tauwm=0.5*(tauwh+tauwb);          SFichier fic1(&quot;reynolds_tau_old.dat&quot;,ios::app);          SFichier fic2(&quot;u_tau_old.dat&quot;,ios::app);          SFichier fic3(&quot;tauw_old.dat&quot;,ios::app);          fic1 &lt;&lt; tps &lt;&lt; &quot; &quot; &lt;&lt; retaum &lt;&lt; &quot; &quot; &lt;&lt; retaub &lt;&lt; &quot; &quot; &lt;&lt; retauh &lt;&lt; finl;          fic2 &lt;&lt; tps &lt;&lt; &quot; &quot; &lt;&lt; utaum &lt;&lt; &quot; &quot;  &lt;&lt; utaub &lt;&lt; &quot; &quot;  &lt;&lt; utauh  &lt;&lt; finl;          fic3 &lt;&lt; tps &lt;&lt; &quot; &quot; &lt;&lt; tauwm &lt;&lt; &quot; &quot;  &lt;&lt; tauwb &lt;&lt; &quot; &quot;  &lt;&lt; tauwh  &lt;&lt; finl;          fic1.close();          fic2.close();          fic3.close();        }</span>
<a name="l01073"></a>01073 <span class="comment"></span><span class="comment">//</span>
<a name="l01074"></a>01074 <span class="comment">//</span>
<a name="l01075"></a>01075 <span class="comment">//</span>
<a name="l01076"></a>01076 <span class="comment">//</span>
<a name="l01077"></a>01077 <span class="comment">//</span>
<a name="l01078"></a>01078 <span class="comment">//</span>
<a name="l01079"></a>01079 <span class="comment">//</span>
<a name="l01080"></a>01080 <span class="comment">//</span>
<a name="l01081"></a>01081 <span class="comment">//</span>
<a name="l01082"></a>01082 <span class="comment">//</span>
<a name="l01083"></a>01083 <span class="comment">//</span>
<a name="l01084"></a>01084 <span class="comment">//</span>
<a name="l01085"></a>01085 <span class="comment">//</span>
<a name="l01086"></a>01086 <span class="comment">//</span>
<a name="l01087"></a>01087 <span class="comment">//</span>
<a name="l01088"></a>01088 <span class="comment">//</span>
<a name="l01089"></a>01089 <span class="comment">//</span>
<a name="l01090"></a>01090 <span class="comment">//</span>
<a name="l01091"></a>01091 <span class="comment">//</span>
<a name="l01092"></a>01092 <span class="comment">//</span>
<a name="l01093"></a>01093 <span class="comment">//</span>
<a name="l01094"></a>01094 <span class="comment">//</span>
<a name="l01095"></a>01095 <span class="comment">//</span>
<a name="l01096"></a>01096 <span class="comment">//</span>
<a name="l01097"></a>01097 <span class="comment">//</span>
<a name="l01098"></a>01098 <span class="comment">//</span>
<a name="l01099"></a>01099 <span class="comment">//</span>
<a name="l01100"></a>01100 <span class="comment">//</span>
<a name="l01101"></a>01101 <span class="comment">//</span>
<a name="l01102"></a>01102 <span class="comment">//</span>
<a name="l01103"></a>01103 <span class="comment">//</span>
<a name="l01104"></a>01104 <span class="comment">//</span>
<a name="l01105"></a>01105 <span class="comment">//</span>
<a name="l01106"></a>01106 <span class="comment">//</span>
<a name="l01107"></a>01107 <span class="comment">//</span>
<a name="l01108"></a>01108 <span class="comment">//</span>
<a name="l01109"></a>01109 <span class="comment">//</span>
<a name="l01110"></a>01110 <span class="comment">//</span>
<a name="l01111"></a>01111 <span class="comment">//</span>
<a name="l01112"></a>01112 <span class="comment">//</span>
<a name="l01113"></a>01113 <span class="comment">//</span>
<a name="l01114"></a>01114 <span class="comment">//</span>
<a name="l01115"></a>01115 <span class="comment">//</span>
<a name="l01116"></a>01116 <span class="comment">//</span>
<a name="l01117"></a>01117 <span class="comment">//</span>
<a name="l01118"></a>01118 <span class="comment">//</span>
<a name="l01119"></a>01119 <span class="comment">//</span>
<a name="l01120"></a>01120 <span class="comment">//</span>
<a name="l01121"></a>01121 <span class="comment">//</span>
<a name="l01122"></a>01122 <span class="comment">//</span>
<a name="l01123"></a>01123 <span class="comment">//</span>
<a name="l01124"></a>01124 <span class="comment">//</span>
<a name="l01125"></a>01125 <span class="comment">//</span>
<a name="l01126"></a>01126 <span class="comment">//</span>
<a name="l01127"></a>01127 <span class="comment">//</span>
<a name="l01128"></a>01128 <span class="comment">//</span>
<a name="l01129"></a>01129 <span class="comment">//</span><span class="comment"></span>
<a name="l01130"></a>01130 <span class="comment">////!&lt; end old</span>
<a name="l01131"></a>01131 <span class="comment"></span>
<a name="l01132"></a>01132     } <span class="comment">//!&lt; end if turbul</span>
<a name="l01133"></a>01133 <span class="comment"></span>  <span class="keywordflow">else</span>
<a name="l01134"></a>01134     {
<a name="l01135"></a>01135 <span class="comment">// norme de la vitesse tangente a la paroi</span>
<a name="l01136"></a>01136       <span class="keywordtype">double</span> utang_bas  = <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(kmin,9,0);
<a name="l01137"></a>01137       <span class="keywordtype">double</span> utang_haut = <a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(kmax,9,0);
<a name="l01138"></a>01138 <span class="comment">// calcul du cisaillement a la paroi suivant la vitesse tangentielle</span>
<a name="l01139"></a>01139 <span class="comment">//</span>
<a name="l01140"></a>01140 <span class="comment">// approximation lineaire : Tau_w = mu * ||u_t||(y1) / dy1</span>
<a name="l01141"></a>01141       tauwb= mu_bas * utang_bas  / ymin;
<a name="l01142"></a>01142       tauwh= mu_haut* utang_haut / ymin;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l01145"></a>01145         {
<a name="l01146"></a>01146 <span class="comment">// calcul et ecritures des differentes grandeurs parietales</span>
<a name="l01147"></a>01147 <span class="comment">//</span>
<a name="l01148"></a>01148 <span class="comment">// vitesse de frottement</span>
<a name="l01149"></a>01149           <span class="keywordtype">double</span> utaub=sqrt(tauwb/rho_bas);
<a name="l01150"></a>01150           <span class="keywordflow">if</span>(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(kmin,0,0)&lt;=0) utaub*=-1.;
<a name="l01151"></a>01151           <span class="keywordtype">double</span> utauh=sqrt(tauwh/rho_haut);
<a name="l01152"></a>01152           <span class="keywordflow">if</span>(<a class="code" href="classTraitement__particulier__NS__canal.html#a0274793565cb131faa96a540d2bdbab1">val_moy_tot</a>(kmax,0,0)&lt;=0) utauh*=-1.;
<a name="l01153"></a>01153           <span class="keywordtype">double</span> utaum=0.5*(utauh+utaub);
<a name="l01154"></a>01154 
<a name="l01155"></a>01155 <span class="comment">// Reynolds de frottement</span>
<a name="l01156"></a>01156           <span class="keywordtype">double</span> retaub=rho_bas*utaub*hs2/mu_bas;
<a name="l01157"></a>01157           <span class="keywordtype">double</span> retauh=rho_haut*utauh*hs2/mu_haut;
<a name="l01158"></a>01158           <span class="keywordtype">double</span> retaum=0.5*(retauh+retaub);
<a name="l01159"></a>01159           tauwm=0.5*(tauwh+tauwb);
<a name="l01160"></a>01160 
<a name="l01161"></a>01161           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic1(<span class="stringliteral">&quot;reynolds_tau.dat&quot;</span>, mode);
<a name="l01162"></a>01162           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic2(<span class="stringliteral">&quot;u_tau.dat&quot;</span>, mode);
<a name="l01163"></a>01163           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic3(<span class="stringliteral">&quot;tauw.dat&quot;</span>, mode);
<a name="l01164"></a>01164           fic1 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; retaum &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; retaub &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; retauh &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01165"></a>01165           fic2 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; utaum &lt;&lt; <span class="stringliteral">&quot; &quot;</span>  &lt;&lt; utaub &lt;&lt; <span class="stringliteral">&quot; &quot;</span>  &lt;&lt; utauh  &lt;&lt; finl;
<a name="l01166"></a>01166           fic3 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; tauwm &lt;&lt; <span class="stringliteral">&quot; &quot;</span>  &lt;&lt; tauwb &lt;&lt; <span class="stringliteral">&quot; &quot;</span>  &lt;&lt; tauwh  &lt;&lt; finl;
<a name="l01167"></a>01167           fic1.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01168"></a>01168           fic2.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01169"></a>01169           fic3.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01170"></a>01170         }
<a name="l01171"></a>01171 
<a name="l01172"></a>01172     } <span class="comment">//!&lt; end if not-turbul</span>
<a name="l01173"></a>01173 <span class="comment"></span>
<a name="l01174"></a>01174 
<a name="l01175"></a>01175 }
<a name="l01176"></a>01176 
<a name="l01177"></a>01177 
<a name="l01178"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a5230715534b5086ffa45b228804bd916">01178</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a5230715534b5086ffa45b228804bd916">Traitement_particulier_NS_canal::ecriture_fichiers_moy_vitesse_rho_mu</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_moy, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; k)<span class="keyword"> const</span>
<a name="l01179"></a>01179 <span class="keyword"></span>{
<a name="l01180"></a>01180   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (fichier);
<a name="l01181"></a>01181 
<a name="l01182"></a>01182   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l01183"></a>01183   <span class="keywordtype">double</span> u,v,wl,u2,v2,w2,uv,uw,vw,rho,mu;
<a name="l01184"></a>01184 
<a name="l01185"></a>01185   fic &lt;&lt; <span class="stringliteral">&quot;# Temps : &quot;</span> &lt;&lt; tps &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01186"></a>01186   fic &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l01187"></a>01187 
<a name="l01188"></a>01188   fic &lt;&lt; <span class="stringliteral">&quot;# (0)  : Y &quot;</span> &lt;&lt; finl;
<a name="l01189"></a>01189   fic &lt;&lt; <span class="stringliteral">&quot;# (1)  : &lt;u&gt; &quot;</span> &lt;&lt; finl;
<a name="l01190"></a>01190   fic &lt;&lt; <span class="stringliteral">&quot;# (2)  : &lt;v&gt; &quot;</span> &lt;&lt; finl;
<a name="l01191"></a>01191   fic &lt;&lt; <span class="stringliteral">&quot;# (3)  : &lt;w&gt; &quot;</span> &lt;&lt; finl;
<a name="l01192"></a>01192   fic &lt;&lt; <span class="stringliteral">&quot;# (4)  : sqrt(&lt;u.u&gt;-&lt;u&gt;*&lt;u&gt;) &quot;</span> &lt;&lt; finl;
<a name="l01193"></a>01193   fic &lt;&lt; <span class="stringliteral">&quot;# (5)  : sqrt(&lt;v.v&gt;-&lt;v&gt;*&lt;v&gt;) &quot;</span> &lt;&lt; finl;
<a name="l01194"></a>01194   fic &lt;&lt; <span class="stringliteral">&quot;# (6)  : sqrt(&lt;w.w&gt;-&lt;w&gt;*&lt;w&gt;) &quot;</span> &lt;&lt; finl;
<a name="l01195"></a>01195   fic &lt;&lt; <span class="stringliteral">&quot;# (7)  : &lt;u.v&gt;-&lt;u&gt;*&lt;v&gt; &quot;</span> &lt;&lt; finl;
<a name="l01196"></a>01196   fic &lt;&lt; <span class="stringliteral">&quot;# (8)  : &lt;u.w&gt;-&lt;u&gt;*&lt;w&gt; &quot;</span> &lt;&lt; finl;
<a name="l01197"></a>01197   fic &lt;&lt; <span class="stringliteral">&quot;# (9)  : &lt;v.w&gt;-&lt;v&gt;*&lt;w&gt; &quot;</span> &lt;&lt; finl;
<a name="l01198"></a>01198   fic &lt;&lt; <span class="stringliteral">&quot;# (10) : &lt;rho&gt; &quot;</span> &lt;&lt; finl;
<a name="l01199"></a>01199   fic &lt;&lt; <span class="stringliteral">&quot;# (11) : &lt;mu&gt; &quot;</span> &lt;&lt; finl;
<a name="l01200"></a>01200 
<a name="l01201"></a>01201   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01202"></a>01202   fic &lt;&lt; <span class="stringliteral">&quot;# Nombre minimum de points par plan Y=cste ayant servi au calcul de la moyenne spatiale : &quot;</span> &lt;&lt; <a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>) &lt;&lt; finl;
<a name="l01203"></a>01203   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01204"></a>01204 
<a name="l01205"></a>01205   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
<a name="l01206"></a>01206     {
<a name="l01207"></a>01207       u    = val_moy(i,0,k)/dt;
<a name="l01208"></a>01208       v    = val_moy(i,1,k)/dt;
<a name="l01209"></a>01209       wl    = val_moy(i,2,k)/dt;
<a name="l01210"></a>01210       u2   = val_moy(i,3,k)/dt;
<a name="l01211"></a>01211       v2   = val_moy(i,4,k)/dt;
<a name="l01212"></a>01212       w2   = val_moy(i,5,k)/dt;
<a name="l01213"></a>01213       uv   = val_moy(i,6,k)/dt;
<a name="l01214"></a>01214       uw   = val_moy(i,7,k)/dt;
<a name="l01215"></a>01215       vw   = val_moy(i,8,k)/dt;
<a name="l01216"></a>01216       rho  = val_moy(i,10,k)/dt;
<a name="l01217"></a>01217       mu   = val_moy(i,11,k)/dt;
<a name="l01218"></a>01218 
<a name="l01219"></a>01219 
<a name="l01220"></a>01220       fic &lt;&lt; <a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>(i) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>  ;
<a name="l01221"></a>01221       fic &lt;&lt; u &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; wl &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> ;
<a name="l01222"></a>01222 <span class="comment">// Pour eviter NAN, on prend le dmax(,0):</span>
<a name="l01223"></a>01223       fic &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(0,u2)) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(v2,0)) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(w2,0)) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>  ;
<a name="l01224"></a>01224       fic &lt;&lt; -uv &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; -uw &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; -vw  &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> ;
<a name="l01225"></a>01225       fic &lt;&lt; rho &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; mu &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> ;
<a name="l01226"></a>01226       fic &lt;&lt; finl;
<a name="l01227"></a>01227     }
<a name="l01228"></a>01228   fic.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l01229"></a>01229   fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01230"></a>01230 }
<a name="l01231"></a>01231 
<a name="l01232"></a><a class="code" href="classTraitement__particulier__NS__canal.html#ad284801ab37cf81427220002c14762f1">01232</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#ad284801ab37cf81427220002c14762f1">Traitement_particulier_NS_canal::ecriture_fichiers_moy_nut</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_moy, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; k)<span class="keyword"> const</span>
<a name="l01233"></a>01233 <span class="keyword"></span>{
<a name="l01234"></a>01234   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (fichier);
<a name="l01235"></a>01235 
<a name="l01236"></a>01236   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l01237"></a>01237 
<a name="l01238"></a>01238   fic &lt;&lt; <span class="stringliteral">&quot;# Temps : &quot;</span> &lt;&lt; tps &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01239"></a>01239   fic &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l01240"></a>01240 
<a name="l01241"></a>01241   fic &lt;&lt; <span class="stringliteral">&quot;# (0)  : Y &quot;</span> &lt;&lt; finl;
<a name="l01242"></a>01242   fic &lt;&lt; <span class="stringliteral">&quot;# (1)  : &lt;nu_t&gt; &quot;</span> &lt;&lt; finl;
<a name="l01243"></a>01243 
<a name="l01244"></a>01244   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01245"></a>01245   fic &lt;&lt; <span class="stringliteral">&quot;# Nombre minimum de points par plan Y=cste ayant servi au calcul de la moyenne spatiale : &quot;</span> &lt;&lt; <a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>) &lt;&lt; finl;
<a name="l01246"></a>01246   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01247"></a>01247 
<a name="l01248"></a>01248   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
<a name="l01249"></a>01249     fic &lt;&lt; <a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>(i) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; val_moy(i,12,k)/dt &lt;&lt; finl;
<a name="l01250"></a>01250 
<a name="l01251"></a>01251   fic.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l01252"></a>01252   fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01253"></a>01253 }
<a name="l01254"></a>01254 
<a name="l01255"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a22cd080396299dfdfeba702f174d2d84">01255</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a22cd080396299dfdfeba702f174d2d84">Traitement_particulier_NS_canal::ecriture_fichiers_moy_Temp</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_moy, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; k)<span class="keyword"> const</span>
<a name="l01256"></a>01256 <span class="keyword"></span>{
<a name="l01257"></a>01257   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (fichier);
<a name="l01258"></a>01258 
<a name="l01259"></a>01259   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l01260"></a>01260   <span class="keywordtype">double</span> T,T2,uT,vT,wT;
<a name="l01261"></a>01261 
<a name="l01262"></a>01262   fic &lt;&lt; <span class="stringliteral">&quot;# Temps : &quot;</span> &lt;&lt; tps &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01263"></a>01263   fic &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l01264"></a>01264 
<a name="l01265"></a>01265   fic &lt;&lt; <span class="stringliteral">&quot;# (0)  : Y &quot;</span> &lt;&lt; finl;
<a name="l01266"></a>01266   fic &lt;&lt; <span class="stringliteral">&quot;# (1)  : &lt;T&gt; &quot;</span> &lt;&lt; finl;
<a name="l01267"></a>01267   fic &lt;&lt; <span class="stringliteral">&quot;# (2)  : sqrt(&lt;T.T&gt;-&lt;T&gt;*&lt;T&gt;) &quot;</span> &lt;&lt; finl;
<a name="l01268"></a>01268   fic &lt;&lt; <span class="stringliteral">&quot;# (3)  : &lt;u.T&gt;-&lt;u&gt;*&lt;T&gt; &quot;</span> &lt;&lt; finl;
<a name="l01269"></a>01269   fic &lt;&lt; <span class="stringliteral">&quot;# (4)  : &lt;v.T&gt;-&lt;v&gt;*&lt;T&gt; &quot;</span> &lt;&lt; finl;
<a name="l01270"></a>01270   fic &lt;&lt; <span class="stringliteral">&quot;# (5)  : &lt;w.T&gt;-&lt;w&gt;*&lt;T&gt; &quot;</span> &lt;&lt; finl;
<a name="l01271"></a>01271 
<a name="l01272"></a>01272   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01273"></a>01273   fic &lt;&lt; <span class="stringliteral">&quot;# Nombre minimum de points par plan Y=cste ayant servi au calcul de la moyenne spatiale : &quot;</span> &lt;&lt; <a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>) &lt;&lt; finl;
<a name="l01274"></a>01274   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01275"></a>01275 
<a name="l01276"></a>01276   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
<a name="l01277"></a>01277     {
<a name="l01278"></a>01278 <span class="comment">// u    = val_moy(i,0,k)/dt;</span>
<a name="l01279"></a>01279 <span class="comment">// v    = val_moy(i,1,k)/dt;</span>
<a name="l01280"></a>01280 <span class="comment">// w    = val_moy(i,2,k)/dt;</span>
<a name="l01281"></a>01281       T    = val_moy(i,13,k)/dt;
<a name="l01282"></a>01282       T2   = val_moy(i,14,k)/dt;
<a name="l01283"></a>01283       uT   = val_moy(i,15,k)/dt;
<a name="l01284"></a>01284       vT   = val_moy(i,16,k)/dt;
<a name="l01285"></a>01285       wT   = val_moy(i,17,k)/dt;
<a name="l01286"></a>01286 
<a name="l01287"></a>01287 
<a name="l01288"></a>01288       fic &lt;&lt; <a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>(i) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>  ;
<a name="l01289"></a>01289 <span class="comment">// Pour eviter NAN, on prend le dmax(,0):</span>
<a name="l01290"></a>01290       fic &lt;&lt; T &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>  &lt;&lt;sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(T2,0))&lt;&lt;<span class="stringliteral">&quot; &quot;</span>;
<a name="l01291"></a>01291       fic &lt;&lt; -uT &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; -vT  &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; -wT  &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>;
<a name="l01292"></a>01292       fic &lt;&lt; finl;
<a name="l01293"></a>01293     }
<a name="l01294"></a>01294   fic.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l01295"></a>01295   fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01296"></a>01296 }
<a name="l01297"></a>01297 
<a name="l01298"></a>01298 <span class="comment">// Apres correction de l expression de la moyenne temporelle et des methodes d ecriture des moyennes temporelles</span>
<a name="l01299"></a>01299 <span class="comment">// On conserve ces deux methodes d ecriture en version old pour l ecriture des moyennes de phase</span>
<a name="l01300"></a>01300 
<a name="l01301"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a81b8d009dd1ad5df770f25bbf70b547c">01301</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a81b8d009dd1ad5df770f25bbf70b547c">Traitement_particulier_NS_canal::ecriture_fichiers_moy_vitesse_rho_mu_old</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_moy, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; k)<span class="keyword"> const</span>
<a name="l01302"></a>01302 <span class="keyword"></span>{
<a name="l01303"></a>01303   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (fichier);
<a name="l01304"></a>01304 
<a name="l01305"></a>01305   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l01306"></a>01306   <span class="keywordtype">double</span> u,v,wl,u2,v2,w2,uv,uw,vw,rho,mu;
<a name="l01307"></a>01307 
<a name="l01308"></a>01308   fic &lt;&lt; <span class="stringliteral">&quot;# Temps : &quot;</span> &lt;&lt; tps &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01309"></a>01309   fic &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l01310"></a>01310 
<a name="l01311"></a>01311   fic &lt;&lt; <span class="stringliteral">&quot;# (0)  : Y &quot;</span> &lt;&lt; finl;
<a name="l01312"></a>01312   fic &lt;&lt; <span class="stringliteral">&quot;# (1)  : &lt;u&gt; &quot;</span> &lt;&lt; finl;
<a name="l01313"></a>01313   fic &lt;&lt; <span class="stringliteral">&quot;# (2)  : &lt;v&gt; &quot;</span> &lt;&lt; finl;
<a name="l01314"></a>01314   fic &lt;&lt; <span class="stringliteral">&quot;# (3)  : &lt;w&gt; &quot;</span> &lt;&lt; finl;
<a name="l01315"></a>01315   fic &lt;&lt; <span class="stringliteral">&quot;# (4)  : sqrt(&lt;u.u&gt;-&lt;u&gt;*&lt;u&gt;) &quot;</span> &lt;&lt; finl;
<a name="l01316"></a>01316   fic &lt;&lt; <span class="stringliteral">&quot;# (5)  : sqrt(&lt;v.v&gt;-&lt;v&gt;*&lt;v&gt;) &quot;</span> &lt;&lt; finl;
<a name="l01317"></a>01317   fic &lt;&lt; <span class="stringliteral">&quot;# (6)  : sqrt(&lt;w.w&gt;-&lt;w&gt;*&lt;w&gt;) &quot;</span> &lt;&lt; finl;
<a name="l01318"></a>01318   fic &lt;&lt; <span class="stringliteral">&quot;# (7)  : &lt;u.v&gt;-&lt;u&gt;*&lt;v&gt; &quot;</span> &lt;&lt; finl;
<a name="l01319"></a>01319   fic &lt;&lt; <span class="stringliteral">&quot;# (8)  : &lt;u.w&gt;-&lt;u&gt;*&lt;w&gt; &quot;</span> &lt;&lt; finl;
<a name="l01320"></a>01320   fic &lt;&lt; <span class="stringliteral">&quot;# (9)  : &lt;v.w&gt;-&lt;v&gt;*&lt;w&gt; &quot;</span> &lt;&lt; finl;
<a name="l01321"></a>01321   fic &lt;&lt; <span class="stringliteral">&quot;# (10) : &lt;rho&gt; &quot;</span> &lt;&lt; finl;
<a name="l01322"></a>01322   fic &lt;&lt; <span class="stringliteral">&quot;# (11) : &lt;mu&gt; &quot;</span> &lt;&lt; finl;
<a name="l01323"></a>01323 
<a name="l01324"></a>01324   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01325"></a>01325   fic &lt;&lt; <span class="stringliteral">&quot;# Nombre minimum de points par plan Y=cste ayant servi au calcul de la moyenne spatiale : &quot;</span> &lt;&lt; <a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>) &lt;&lt; finl;
<a name="l01326"></a>01326   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01327"></a>01327 
<a name="l01328"></a>01328   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
<a name="l01329"></a>01329     {
<a name="l01330"></a>01330       u    = val_moy(i,0,k)/dt;
<a name="l01331"></a>01331       v    = val_moy(i,1,k)/dt;
<a name="l01332"></a>01332       wl    = val_moy(i,2,k)/dt;
<a name="l01333"></a>01333       u2   = val_moy(i,3,k)/dt;
<a name="l01334"></a>01334       v2   = val_moy(i,4,k)/dt;
<a name="l01335"></a>01335       w2   = val_moy(i,5,k)/dt;
<a name="l01336"></a>01336       uv   = val_moy(i,6,k)/dt;
<a name="l01337"></a>01337       uw   = val_moy(i,7,k)/dt;
<a name="l01338"></a>01338       vw   = val_moy(i,8,k)/dt;
<a name="l01339"></a>01339       rho  = val_moy(i,10,k)/dt;
<a name="l01340"></a>01340       mu   = val_moy(i,11,k)/dt;
<a name="l01341"></a>01341 
<a name="l01342"></a>01342 
<a name="l01343"></a>01343       fic &lt;&lt; <a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>(i) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>  ;
<a name="l01344"></a>01344       fic &lt;&lt; u &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; wl &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> ;
<a name="l01345"></a>01345 <span class="comment">// Pour eviter NAN, on prend le dmax(,0):</span>
<a name="l01346"></a>01346       fic &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(0,u2-u*u)) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(v2-v*v,0)) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(w2-wl*wl,0)) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>  ;
<a name="l01347"></a>01347       fic &lt;&lt; u*v-uv &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; u*wl-uw &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; v*wl-vw  &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> ;
<a name="l01348"></a>01348 
<a name="l01349"></a>01349 
<a name="l01350"></a>01350       fic &lt;&lt; rho &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; mu &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> ;
<a name="l01351"></a>01351       fic &lt;&lt; finl;
<a name="l01352"></a>01352     }
<a name="l01353"></a>01353   fic.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l01354"></a>01354   fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01355"></a>01355 }
<a name="l01356"></a>01356 
<a name="l01357"></a>01357 
<a name="l01358"></a>01358 
<a name="l01359"></a><a class="code" href="classTraitement__particulier__NS__canal.html#a50af2679483decb3e4c09ae228d3d2dc">01359</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal.html#a50af2679483decb3e4c09ae228d3d2dc">Traitement_particulier_NS_canal::ecriture_fichiers_moy_Temp_old</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_moy, <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; k)<span class="keyword"> const</span>
<a name="l01360"></a>01360 <span class="keyword"></span>{
<a name="l01361"></a>01361   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (fichier);
<a name="l01362"></a>01362   fic.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l01363"></a>01363   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l01364"></a>01364   <span class="keywordtype">double</span> u,v,wl,T,T2,uT,vT,wT;
<a name="l01365"></a>01365 
<a name="l01366"></a>01366   fic &lt;&lt; <span class="stringliteral">&quot;# Temps : &quot;</span> &lt;&lt; tps &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01367"></a>01367   fic &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l01368"></a>01368 
<a name="l01369"></a>01369   fic &lt;&lt; <span class="stringliteral">&quot;# (0)  : Y &quot;</span> &lt;&lt; finl;
<a name="l01370"></a>01370   fic &lt;&lt; <span class="stringliteral">&quot;# (1)  : &lt;T&gt; &quot;</span> &lt;&lt; finl;
<a name="l01371"></a>01371   fic &lt;&lt; <span class="stringliteral">&quot;# (2)  : sqrt(&lt;T.T&gt;-&lt;T&gt;*&lt;T&gt;) &quot;</span> &lt;&lt; finl;
<a name="l01372"></a>01372   fic &lt;&lt; <span class="stringliteral">&quot;# (3)  : &lt;u.T&gt;-&lt;u&gt;*&lt;T&gt; &quot;</span> &lt;&lt; finl;
<a name="l01373"></a>01373   fic &lt;&lt; <span class="stringliteral">&quot;# (4)  : &lt;v.T&gt;-&lt;v&gt;*&lt;T&gt; &quot;</span> &lt;&lt; finl;
<a name="l01374"></a>01374   fic &lt;&lt; <span class="stringliteral">&quot;# (5)  : &lt;w.T&gt;-&lt;w&gt;*&lt;T&gt; &quot;</span> &lt;&lt; finl;
<a name="l01375"></a>01375 
<a name="l01376"></a>01376   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01377"></a>01377   fic &lt;&lt; <span class="stringliteral">&quot;# Nombre minimum de points par plan Y=cste ayant servi au calcul de la moyenne spatiale : &quot;</span> &lt;&lt; <a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(<a class="code" href="classTraitement__particulier__NS__canal.html#a4ba5bde8ff8729cf48ec1126fb91bf22">compt_tot</a>) &lt;&lt; finl;
<a name="l01378"></a>01378   fic &lt;&lt; <span class="stringliteral">&quot;#  &quot;</span> &lt;&lt; finl;
<a name="l01379"></a>01379 
<a name="l01380"></a>01380   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>(); i++)
<a name="l01381"></a>01381     {
<a name="l01382"></a>01382       u    = val_moy(i,0,k)/dt;
<a name="l01383"></a>01383       v    = val_moy(i,1,k)/dt;
<a name="l01384"></a>01384       wl    = val_moy(i,2,k)/dt;
<a name="l01385"></a>01385       T    = val_moy(i,13,k)/dt;
<a name="l01386"></a>01386       T2   = val_moy(i,14,k)/dt;
<a name="l01387"></a>01387       uT   = val_moy(i,15,k)/dt;
<a name="l01388"></a>01388       vT   = val_moy(i,16,k)/dt;
<a name="l01389"></a>01389       wT   = val_moy(i,17,k)/dt;
<a name="l01390"></a>01390 
<a name="l01391"></a>01391 
<a name="l01392"></a>01392       fic &lt;&lt; <a class="code" href="classTraitement__particulier__NS__canal.html#a82c3852c0d8683eb4792bb3280743147">Y_tot</a>(i) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>  ;
<a name="l01393"></a>01393 <span class="comment">// Pour eviter NAN, on prend le dmax(,0):</span>
<a name="l01394"></a>01394       fic &lt;&lt; T &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(T2-T*T,0)) &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>  ;
<a name="l01395"></a>01395       fic &lt;&lt; u*T-uT &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; v*T-vT &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; wl*T-wT &lt;&lt; <span class="stringliteral">&quot;    &quot;</span>;
<a name="l01396"></a>01396 
<a name="l01397"></a>01397       fic &lt;&lt; finl;
<a name="l01398"></a>01398     }
<a name="l01399"></a>01399   fic.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l01400"></a>01400   fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01401"></a>01401 }
<a name="l01402"></a>01402 
<a name="l01403"></a>01403 
<a name="l01404"></a>01404 
<a name="l01405"></a>01405 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:35 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
