<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/Postraiter_domaine.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/Postraiter_domaine.cpp</div>  </div>
</div>
<div class="contents">
<a href="Postraiter__domaine_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Postraiter_domaine.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Geometrie</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/34</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Postraiter__domaine_8h.html">Postraiter_domaine.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Sous__Zone_8h.html">Sous_Zone.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Format__Post_8h.html">Format_Post.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a><a class="code" href="Postraiter__domaine_8cpp.html#a9153df97cd59773508ac156e61706639">00029</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classPostraiter__domaine.html" title="Classe Postraiter_domaine Lecture d&#39;un fichier.">Postraiter_domaine</a>,<span class="stringliteral">&quot;Postraiter_domaine&quot;</span>,<a class="code" href="classInterprete__geometrique__base.html" title="classe Interprete_geometrique_base .">Interprete_geometrique_base</a>);
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">// Precondition:</span>
<a name="l00032"></a>00032 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00033"></a>00033 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00034"></a>00034 <span class="comment">// Valeurs par defaut:</span>
<a name="l00035"></a>00035 <span class="comment">// Contraintes:</span>
<a name="l00036"></a>00036 <span class="comment">// Acces: entree/sortie</span>
<a name="l00037"></a>00037 <span class="comment">// Exception:</span>
<a name="l00038"></a>00038 <span class="comment">// Effets de bord:</span>
<a name="l00039"></a>00039 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00040"></a>00040 <span class="comment">//</span><span class="comment"></span>
<a name="l00041"></a>00041 <span class="comment">//! Simple appel a: Interprete::printOn(Sortie\&amp;)</span>
<a name="l00042"></a>00042 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00043"></a>00043 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00044"></a>00044 <span class="comment">Contraintes: */</span>
<a name="l00045"></a><a class="code" href="classPostraiter__domaine.html#a7554d7f3f252bb261a6b050192c04cdf">00045</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classPostraiter__domaine.html#a7554d7f3f252bb261a6b050192c04cdf" title="Simple appel a: Interprete::printOn(Sortie&amp;)">Postraiter_domaine::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00046"></a>00046 <span class="keyword"></span>{
<a name="l00047"></a>00047   <span class="keywordflow">return</span> <a class="code" href="classPostraiter__domaine.html#a7554d7f3f252bb261a6b050192c04cdf" title="Simple appel a: Interprete::printOn(Sortie&amp;)">Interprete::printOn</a>(os);
<a name="l00048"></a>00048 }
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="comment">// Precondition:</span>
<a name="l00051"></a>00051 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00052"></a>00052 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00053"></a>00053 <span class="comment">// Valeurs par defaut:</span>
<a name="l00054"></a>00054 <span class="comment">// Contraintes:</span>
<a name="l00055"></a>00055 <span class="comment">// Acces: entree/sortie</span>
<a name="l00056"></a>00056 <span class="comment">// Exception:</span>
<a name="l00057"></a>00057 <span class="comment">// Effets de bord:</span>
<a name="l00058"></a>00058 <span class="comment">// Postcondition:</span>
<a name="l00059"></a>00059 <span class="comment">//</span><span class="comment"></span>
<a name="l00060"></a>00060 <span class="comment">//! Simple appel a: Interprete::readOn(Entree\&amp;)</span>
<a name="l00061"></a>00061 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00062"></a>00062 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00063"></a>00063 <span class="comment">Contraintes: */</span>
<a name="l00064"></a><a class="code" href="classPostraiter__domaine.html#a7f0d5bc032c0ebca080a85d892a698c5">00064</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classPostraiter__domaine.html#a7f0d5bc032c0ebca080a85d892a698c5" title="Simple appel a: Interprete::readOn(Entree&amp;)">Postraiter_domaine::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00065"></a>00065 {
<a name="l00066"></a>00066   <span class="keywordflow">return</span> <a class="code" href="classPostraiter__domaine.html#a7f0d5bc032c0ebca080a85d892a698c5" title="Simple appel a: Interprete::readOn(Entree&amp;)">Interprete::readOn</a>(is);
<a name="l00067"></a>00067 }
<a name="l00068"></a><a class="code" href="Postraiter__domaine_8cpp.html#a2623d83ce7df80c22750f5aecff0571a">00068</a> <span class="keywordtype">void</span> <a class="code" href="Postraiter__domaine_8cpp.html#a2623d83ce7df80c22750f5aecff0571a">traite_bord</a>(<span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone,<a class="code" href="classIntVect.html">IntVect</a>&amp; ch_som,<a class="code" href="classIntVect.html">IntVect</a>&amp; ch_elem3,<span class="keywordtype">int</span> num2, <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_bord,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; fichier,<span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems, <a class="code" href="classFormat__Post__base.html" title="Classe de base des formats de postraitements pour les champs&lt;br&gt;(lata, med, lml, meshtv). Utilisation de la classe par l&#39;interface generique: -typer un objet format de postraitement -initialiser l objet format de postraitement -proceder a des operations de complement et verification -ecrire un domaine -ecrire_temps -ecrire_champ (un type de champ supporte: aux elements ou aux sommets, ou encore aux faces si on a ecrit les faces du domaine et si les faces sont supportees par le postraitement)">Format_Post_base</a>&amp; post, <span class="keywordtype">int</span>&amp; <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>,<span class="keywordtype">int</span>&amp; compteur0,<span class="keywordtype">int</span>&amp; compteur_reel,<span class="keywordtype">int</span>&amp; moi,<span class="keywordtype">int</span> isjoint=0)
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>();
<a name="l00071"></a>00071   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom=dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00072"></a>00072   <span class="keywordtype">int</span> num=-num2;
<a name="l00073"></a>00073   <span class="keywordtype">int</span> nb_elem=les_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00074"></a>00074   <span class="keywordtype">int</span> nb_elem_tot=zone.<a class="code" href="classZone.html#aa3a33e8b723618b9092460007153e42d" title="Renvoie le nombre total d&#39;elements de la zone.">nb_elem_tot</a>();
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 
<a name="l00077"></a>00077   <span class="keywordtype">int</span> nb_faces=faces.<a class="code" href="classFaces.html#a64d898edb20c3687d357018f1821c50a" title="Renvoie le nombre de Faces.">nb_faces</a>();
<a name="l00078"></a>00078   <span class="keywordtype">int</span> nb_som_faces=faces.<a class="code" href="classFaces.html#a1361d27e4c8b239c48de671fad23428c" title="Renvoie le nombre de sommet par face.">nb_som_faces</a>();
<a name="l00079"></a>00079   <span class="keywordtype">int</span> j,k,som;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> ch_elem2(nb_elem,1);
<a name="l00082"></a>00082   ch_elem2=moi;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   <span class="keywordflow">if</span> (isjoint!=2)
<a name="l00085"></a>00085     {
<a name="l00086"></a>00086 <span class="comment">// on a pas encore calcule ch_elem3</span>
<a name="l00087"></a>00087       ch_elem3=moi;
<a name="l00088"></a>00088       <span class="keywordflow">for</span> (j=0; j&lt;nb_faces; j++)
<a name="l00089"></a>00089         <span class="keywordflow">for</span> (k=0; k&lt;nb_som_faces; k++)
<a name="l00090"></a>00090           {
<a name="l00091"></a>00091             som=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(j,k);
<a name="l00092"></a>00092 <span class="comment">// cas des polyedres</span>
<a name="l00093"></a>00093             <span class="keywordflow">if</span> (som==-1)  <span class="keywordflow">break</span>;
<a name="l00094"></a>00094             <span class="keywordflow">if</span> (ch_som(som)==0)
<a name="l00095"></a>00095               ch_som(som)=num;
<a name="l00096"></a>00096             <span class="keywordflow">else</span>
<a name="l00097"></a>00097               ch_som(som)=(ch_som(som)+num)/2;
<a name="l00098"></a>00098           }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="comment">// num=-Process::nproc();</span>
<a name="l00101"></a>00101       num=-1;
<a name="l00102"></a>00102       <span class="keywordflow">if</span> (nb_faces!=0)
<a name="l00103"></a>00103         {
<a name="l00104"></a>00104           <span class="keywordflow">if</span> (0)
<a name="l00105"></a>00105             {
<a name="l00106"></a>00106               <span class="keywordtype">int</span> taille1=les_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00107"></a>00107               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> e=0 ; e &lt; nb_elem ; e++)
<a name="l00108"></a>00108                 {
<a name="l00109"></a>00109                   <span class="keywordflow">for</span> (j=0; j&lt;nb_faces; j++)
<a name="l00110"></a>00110                     {
<a name="l00111"></a>00111                       <span class="keywordtype">int</span> m=-1;
<a name="l00112"></a>00112                       <span class="keywordflow">for</span> (k=0; k&lt;nb_som_faces; k++)
<a name="l00113"></a>00113                         {
<a name="l00114"></a>00114                           som=faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(j,k);
<a name="l00115"></a>00115                           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> kk=0; kk&lt;taille1; kk++)
<a name="l00116"></a>00116                             {
<a name="l00117"></a>00117                               <span class="keywordflow">if</span> (les_elems(e,kk)==som)
<a name="l00118"></a>00118                                 {
<a name="l00119"></a>00119                                   m++;;
<a name="l00120"></a>00120                                   <span class="keywordflow">break</span>;
<a name="l00121"></a>00121                                 }
<a name="l00122"></a>00122                             }
<a name="l00123"></a>00123                           <span class="keywordflow">if</span> (m!=k) <span class="keywordflow">break</span>;
<a name="l00124"></a>00124                         }
<a name="l00125"></a>00125                       <span class="keywordflow">if</span> (m==nb_som_faces-1)
<a name="l00126"></a>00126                         ch_elem3[e]=num;
<a name="l00127"></a>00127                     }
<a name="l00128"></a>00128                 }
<a name="l00129"></a>00129             }
<a name="l00130"></a>00130           <span class="keywordflow">else</span>
<a name="l00131"></a>00131             {
<a name="l00132"></a>00132               <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; faces_voisin=faces.<a class="code" href="classFaces.html#af49c4448e67aa7c732c2cc1dc237b442" title="Renvoie le tableau des voisins (des faces).">voisins</a>();
<a name="l00133"></a>00133               <span class="keywordflow">if</span> (faces_voisin.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0) &gt; 0 &amp;&amp; <a class="code" href="DoubleVect_8cpp.html#a6471e7e85cb0b00b67bd7ca9bb362371">local_max_vect</a>(faces_voisin)!=-1)
<a name="l00134"></a>00134                 {
<a name="l00135"></a>00135 <span class="comment">// Cerr&lt;&lt;&quot; we use faces_voisins&quot;&lt;&lt;finl;</span>
<a name="l00136"></a>00136                   <span class="keywordflow">for</span> (j=0; j&lt;nb_faces; j++)
<a name="l00137"></a>00137                     {
<a name="l00138"></a>00138                       <span class="keywordtype">int</span> el1=faces_voisin(j,0);
<a name="l00139"></a>00139                       <span class="keywordflow">if</span> (el1==-1) el1=faces_voisin(j,1);
<a name="l00140"></a>00140                       <span class="keywordflow">if</span> (el1==-1)
<a name="l00141"></a>00141                         {
<a name="l00142"></a>00142                           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error, the face &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; of the domain &quot;</span> &lt;&lt; dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; has no neighbours !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00143"></a>00143                           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Check that the domain &quot;</span> &lt;&lt; dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; has been discretized.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00144"></a>00144                           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00145"></a>00145                         }
<a name="l00146"></a>00146                       ch_elem3[el1]=num;
<a name="l00147"></a>00147                     }
<a name="l00148"></a>00148                 }
<a name="l00149"></a>00149               <span class="keywordflow">else</span>
<a name="l00150"></a>00150                 {
<a name="l00151"></a>00151                   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> position(1,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>);
<a name="l00152"></a>00152                   <a class="code" href="classIntVect.html">IntVect</a> res;
<a name="l00153"></a>00153                   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> xv;
<a name="l00154"></a>00154                   faces.<a class="code" href="classFaces.html#a1f8132799487789d4670795c2dbeaa5d" title="Associe les faces a une Zone.">associer_zone</a>(zone);
<a name="l00155"></a>00155                   faces.<a class="code" href="classFaces.html#aff1f39c3e63c21260ab8c49497dd3a3f" title="Calcule les centres de gravite de chaque face.">calculer_centres_gravite</a>(xv);
<a name="l00156"></a>00156                   <span class="keywordflow">for</span> (j=0; j&lt;nb_faces; j++)
<a name="l00157"></a>00157                     {
<a name="l00158"></a>00158                       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dir=0; dir&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>; dir++)
<a name="l00159"></a>00159                         position(0,dir)=xv(j,dir);
<a name="l00160"></a>00160                       zone.<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(position,res);
<a name="l00161"></a>00161                       <span class="keywordflow">if</span> (res[0]&lt;0)
<a name="l00162"></a>00162                         {
<a name="l00163"></a>00163                           position+=1e-5;
<a name="l00164"></a>00164                           zone.<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(position,res);
<a name="l00165"></a>00165                           <span class="keywordflow">if</span> (res[0]&lt;0)
<a name="l00166"></a>00166                             {
<a name="l00167"></a>00167                               position-=2e-5;
<a name="l00168"></a>00168                               zone.<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(position,res);
<a name="l00169"></a>00169                             }
<a name="l00170"></a>00170                         }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172                       <span class="keywordflow">if</span> (res[0]&lt;nb_elem)
<a name="l00173"></a>00173                         {
<a name="l00174"></a>00174                           <span class="keywordflow">if</span> (res[0]&lt;0)
<a name="l00175"></a>00175                             {
<a name="l00176"></a>00176                               <span class="keywordflow">if</span> (isjoint==1)
<a name="l00177"></a>00177                                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;To properly view the joints, the splitting area must be complete &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00178"></a>00178                               <span class="keywordflow">else</span>
<a name="l00179"></a>00179                                 {
<a name="l00180"></a>00180                                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Problem in Postraiter_domaine.cpp with the boundary &quot;</span>&lt;&lt;nom_bord&lt;&lt;finl;
<a name="l00181"></a>00181 <span class="comment">// abort();</span>
<a name="l00182"></a>00182                                 }
<a name="l00183"></a>00183                             }
<a name="l00184"></a>00184                           <span class="keywordflow">else</span>
<a name="l00185"></a>00185                             {
<a name="l00186"></a>00186                               ch_elem3[res[0]]=num;
<a name="l00187"></a>00187                             }
<a name="l00188"></a>00188                         }
<a name="l00189"></a>00189                       <span class="keywordflow">else</span>
<a name="l00190"></a>00190                         {
<a name="l00191"></a>00191                           <span class="keywordflow">if</span> (nb_elem&gt;=nb_elem_tot) abort();
<a name="l00192"></a>00192                         }
<a name="l00193"></a>00193                     }
<a name="l00194"></a>00194                 }
<a name="l00195"></a>00195             }
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197     }
<a name="l00198"></a>00198 
<a name="l00199"></a>00199   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;nb_elem; s++) ch_elem2(s,0)=(ch_elem3[s]);
<a name="l00200"></a>00200 <span class="comment">// on ajoute ce bord</span>
<a name="l00201"></a>00201   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> noms_post(1);
<a name="l00202"></a>00202   noms_post[0]=nom_bord;
<a name="l00203"></a>00203   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> unites(1);
<a name="l00204"></a>00204   unites[0]=<span class="stringliteral">&quot;1&quot;</span>;
<a name="l00205"></a>00205 <span class="comment">// Cerr&lt;&lt;Process::me() &lt;&lt;&quot; ch_elem2 size&quot;&lt;&lt;fichier&lt;&lt; &quot; &quot;&lt;&lt;nom_dom&lt;&lt;&quot; &quot; &lt;&lt;nom_bord&lt;&lt;&quot; &quot;&lt;&lt;ch_elem2.dimension(0)&lt;&lt;finl;</span>
<a name="l00206"></a>00206   post.<a class="code" href="classFormat__Post__base.html#a3786a17f1ffe0b632fa03635e3befde4" title="Ecriture d&#39;un champ dans le fichier de postraitement. Parametre: id_du_champ Signification: identifia...">ecrire_champ</a>(dom,unites,noms_post,-1,0.,0.,nom_bord, nom_dom, <span class="stringliteral">&quot;ELEM&quot;</span>,<span class="stringliteral">&quot;scalar&quot;</span>,ch_elem2);
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 <span class="comment">// Precondition:</span>
<a name="l00209"></a>00209 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00210"></a>00210 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00211"></a>00211 <span class="comment">// Valeurs par defaut:</span>
<a name="l00212"></a>00212 <span class="comment">// Contraintes:</span>
<a name="l00213"></a>00213 <span class="comment">// Acces: entree/sortie</span>
<a name="l00214"></a>00214 <span class="comment">// Exception:</span>
<a name="l00215"></a>00215 <span class="comment">// Effets de bord:</span>
<a name="l00216"></a>00216 <span class="comment">// Postcondition:</span>
<a name="l00217"></a>00217 <span class="comment">//</span><span class="comment"></span>
<a name="l00218"></a>00218 <span class="comment">//! Fonction principale de l&#39;interprete.</span>
<a name="l00219"></a>00219 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00220"></a>00220 <span class="comment">Signification: le flot d&#39;entree&lt;br&gt;</span>
<a name="l00221"></a>00221 <span class="comment">Contraintes: */</span>
<a name="l00222"></a><a class="code" href="classPostraiter__domaine.html#a78e5c7de338a84dd243821f50a1429c8">00222</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classPostraiter__domaine.html#a78e5c7de338a84dd243821f50a1429c8" title="Fonction principale de l&#39;interprete.">Postraiter_domaine::interpreter_</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00223"></a>00223 {
<a name="l00224"></a>00224   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_pdb;
<a name="l00225"></a>00225   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> un_dom;
<a name="l00226"></a>00226   <a class="code" href="classParam.html" title="Defined below in this file.">Param</a> param(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00227"></a>00227   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;format&quot;</span>,&amp;<a class="code" href="classPostraiter__domaine.html#aed4a3a05ce6919699221cf0a92889f51">format_post_</a>,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
<a name="l00228"></a>00228   <a class="code" href="classPostraiter__domaine.html#a299de42079858eb2a3a12f47a4ca448a">format_binaire_</a>=1;
<a name="l00229"></a>00229   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;binaire&quot;</span>,&amp;<a class="code" href="classPostraiter__domaine.html#a299de42079858eb2a3a12f47a4ca448a">format_binaire_</a>);
<a name="l00230"></a>00230   <a class="code" href="classPostraiter__domaine.html#aabc0c8a9263edb769b6388f2e0d50933">ecrire_frontiere_</a>=1;
<a name="l00231"></a>00231   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;ecrire_frontiere&quot;</span>,&amp;<a class="code" href="classPostraiter__domaine.html#aabc0c8a9263edb769b6388f2e0d50933">ecrire_frontiere_</a>);
<a name="l00232"></a>00232   nom_pdb=<span class="stringliteral">&quot;NOM_DU_CAS&quot;</span>;
<a name="l00233"></a>00233   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;fichier|file&quot;</span>,&amp;nom_pdb);
<a name="l00234"></a>00234   <a class="code" href="classPostraiter__domaine.html#acb55436e9a5705650330ee2fef25ccc0">joint_non_ecrit_</a>=1;
<a name="l00235"></a>00235   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;joints_non_postraites&quot;</span>,&amp;<a class="code" href="classPostraiter__domaine.html#acb55436e9a5705650330ee2fef25ccc0">joint_non_ecrit_</a>); <span class="comment">//!&lt; desactive l&#39;ecriture des joints pratique pour comparer parallele et sequentielle</span>
<a name="l00236"></a>00236 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;domaine&quot;</span>,&amp;un_dom);
<a name="l00237"></a>00237   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;domaines&quot;</span>,(<span class="keyword">this</span>));
<a name="l00238"></a>00238   param.<a class="code" href="classParam.html#a6363f31c467c06512aee2f004abac69d">ajouter_condition</a>(<span class="stringliteral">&quot;is_read_domaine_or_is_read_domaines&quot;</span>,<span class="stringliteral">&quot;Vous devez preciser domaine ou domaines dans Postraiter_domaine&quot;</span>);
<a name="l00239"></a>00239   param.<a class="code" href="classParam.html#a6363f31c467c06512aee2f004abac69d">ajouter_condition</a>(<span class="stringliteral">&quot;is_read_domaine_or_is_read_domaines&quot;</span>,<span class="stringliteral">&quot;Interpreter Postraiter_domaine : one of the keywords domaine or domaines must be specified.&quot;</span>);
<a name="l00240"></a>00240   param.<a class="code" href="classParam.html#aa9d44fc51b4a08b357733a97dc7acaad" title="Read the is input with the parameters (defined with the Param object) inside: { ... } Example, to read: { a 1 b 2 } Param param(que_suis_je()); int a,b; param.ajouter(&quot;a&quot;,&amp;a); param.ajouter(&quot;b&quot;,&amp;b); param.lire_avec_accolades_depuis(is);.">lire_avec_accolades_depuis</a>(is);
<a name="l00241"></a>00241   <span class="keywordflow">if</span> (un_dom!=<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>())
<a name="l00242"></a>00242     {
<a name="l00243"></a>00243       <a class="code" href="classInterprete__geometrique__base.html#ac0d2fd316a4bb1585ec579f473684caa">associer_domaine</a>(un_dom);
<a name="l00244"></a>00244     }
<a name="l00245"></a>00245   <a class="code" href="classPostraiter__domaine.html#a9350d88f5df26184c7950c1d882e47eb">nb_domaine_</a>=<a class="code" href="classInterprete__geometrique__base.html#a2e60d4c9318fa1be9ce0f65db612e932">domaines</a>().<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00246"></a>00246   <span class="keywordflow">if</span>(<a class="code" href="classPostraiter__domaine.html#a9350d88f5df26184c7950c1d882e47eb">nb_domaine_</a>==0)
<a name="l00247"></a>00247     {
<a name="l00248"></a>00248       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You must specify one or several domains&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00249"></a>00249       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251   <span class="keywordflow">if</span> (nom_pdb==<span class="stringliteral">&quot;NOM_DU_CAS&quot;</span>)
<a name="l00252"></a>00252     {
<a name="l00253"></a>00253       nom_pdb=<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">nom_du_cas</a>();
<a name="l00254"></a>00254       nom_pdb+=<span class="stringliteral">&quot;.&quot;</span>;
<a name="l00255"></a>00255       nom_pdb+=<a class="code" href="classPostraiter__domaine.html#aed4a3a05ce6919699221cf0a92889f51">format_post_</a>;
<a name="l00256"></a>00256     }
<a name="l00257"></a>00257   <span class="keywordflow">if</span> (<a class="code" href="classPostraiter__domaine.html#aed4a3a05ce6919699221cf0a92889f51">format_post_</a>==<span class="stringliteral">&quot;lata&quot;</span>)
<a name="l00258"></a>00258     <a class="code" href="classPostraiter__domaine.html#aed4a3a05ce6919699221cf0a92889f51">format_post_</a>+=<span class="stringliteral">&quot;_V2&quot;</span>;
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 <span class="comment">// On deplace la boucle sur les domaines lus</span>
<a name="l00261"></a>00261   <a class="code" href="classPostraiter__domaine.html#a5b29dd3d37da110768c778cad2f4b8a3">ecrire</a>(nom_pdb);
<a name="l00262"></a>00262   <span class="keywordflow">return</span> is;
<a name="l00263"></a>00263 }
<a name="l00264"></a><a class="code" href="classPostraiter__domaine.html#a324de2c13b8e235e7de1eb45ff8348a5">00264</a> <span class="keywordtype">int</span> <a class="code" href="classPostraiter__domaine.html#a324de2c13b8e235e7de1eb45ff8348a5" title="Lecture des parametres de type non simple d&#39;un objet_U a partir d&#39;un flot d&#39;entree.">Postraiter_domaine::lire_motcle_non_standard</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; motcle, <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00265"></a>00265 {
<a name="l00266"></a>00266   <span class="keywordflow">if</span> (motcle==<span class="stringliteral">&quot;domaines&quot;</span>)
<a name="l00267"></a>00267     {
<a name="l00268"></a>00268       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> mot;
<a name="l00269"></a>00269       is&gt;&gt;mot;
<a name="l00270"></a>00270       <span class="keywordflow">if</span> (mot!=<span class="stringliteral">&quot;{&quot;</span>)
<a name="l00271"></a>00271         {
<a name="l00272"></a>00272           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt; <span class="stringliteral">&quot;we expected { and not &quot;</span>&lt;&lt;mot&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00273"></a>00273           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00274"></a>00274         }
<a name="l00275"></a>00275       is&gt;&gt;mot;
<a name="l00276"></a>00276       <span class="keywordflow">while</span> (mot!=<span class="stringliteral">&quot;}&quot;</span>)
<a name="l00277"></a>00277         {
<a name="l00278"></a>00278           <a class="code" href="classInterprete__geometrique__base.html#ac0d2fd316a4bb1585ec579f473684caa">associer_domaine</a>(mot);
<a name="l00279"></a>00279           is&gt;&gt;mot;
<a name="l00280"></a>00280         }
<a name="l00281"></a>00281       <span class="keywordflow">return</span> 1;
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283   <span class="keywordflow">else</span>
<a name="l00284"></a>00284     {
<a name="l00285"></a>00285       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;motcle &lt;&lt;<span class="stringliteral">&quot; not understood by Postraiter_domaine::lire_motcle_non_standard&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00286"></a>00286       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00287"></a>00287     }
<a name="l00288"></a>00288   <span class="keywordflow">return</span> -1;
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00291"></a><a class="code" href="classPostraiter__domaine.html#a5b29dd3d37da110768c778cad2f4b8a3">00291</a> <span class="keywordtype">void</span> <a class="code" href="classPostraiter__domaine.html#a5b29dd3d37da110768c778cad2f4b8a3">Postraiter_domaine::ecrire</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_pdb)
<a name="l00292"></a>00292 {
<a name="l00293"></a>00293   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier=nom_pdb.<a class="code" href="classNom.html#a49a5c6438b6efe73ab314900c60a329c" title="Insere _prefix000n (n=me() ou nproc()) dans un nom de fichier (par ex:toto.titi) pour donner toto_pre...">nom_me</a>(<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00294"></a>00294   <span class="keywordtype">int</span> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>=-123;
<a name="l00295"></a>00295   <span class="keywordtype">int</span> compteur0=-123;
<a name="l00296"></a>00296   <span class="keywordtype">int</span> compteur_reel=0;
<a name="l00297"></a>00297   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> type(<span class="stringliteral">&quot;Format_Post_&quot;</span>);
<a name="l00298"></a>00298   type+=<a class="code" href="classPostraiter__domaine.html#aed4a3a05ce6919699221cf0a92889f51">format_post_</a>;
<a name="l00299"></a>00299   <a class="code" href="classFormat__Post.html">Format_Post</a>  post_typer;
<a name="l00300"></a>00300   post_typer.<a class="code" href="classFormat__Post.html#af92be898aa08574855b5d862e564202b">typer_direct</a>(type);
<a name="l00301"></a>00301   <a class="code" href="classFormat__Post__base.html" title="Classe de base des formats de postraitements pour les champs&lt;br&gt;(lata, med, lml, meshtv). Utilisation de la classe par l&#39;interface generique: -typer un objet format de postraitement -initialiser l objet format de postraitement -proceder a des operations de complement et verification -ecrire un domaine -ecrire_temps -ecrire_champ (un type de champ supporte: aux elements ou aux sommets, ou encore aux faces si on a ecrit les faces du domaine et si les faces sont supportees par le postraitement)">Format_Post_base</a>&amp; post=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFormat__Post__base.html" title="Classe de base des formats de postraitements pour les champs&lt;br&gt;(lata, med, lml, meshtv). Utilisation de la classe par l&#39;interface generique: -typer un objet format de postraitement -initialiser l objet format de postraitement -proceder a des operations de complement et verification -ecrire un domaine -ecrire_temps -ecrire_champ (un type de champ supporte: aux elements ou aux sommets, ou encore aux faces si on a ecrit les faces du domaine et si les faces sont supportees par le postraitement)">Format_Post_base</a>,post_typer.<a class="code" href="classDeriv__Format__Post__base.html#a97011f9e5c11a714aa87a107d0548592">valeur</a>());
<a name="l00302"></a>00302 
<a name="l00303"></a>00303   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_2(nom_pdb);
<a name="l00304"></a>00304   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> format_post_bis(<a class="code" href="classPostraiter__domaine.html#aed4a3a05ce6919699221cf0a92889f51">format_post_</a>);
<a name="l00305"></a>00305   <span class="keywordflow">if</span> (format_post_bis.<a class="code" href="classNom.html#a41b0ba18fb90d481c0828ed4372de8ee">debute_par</a>(<span class="stringliteral">&quot;lata&quot;</span>))
<a name="l00306"></a>00306     format_post_bis=<span class="stringliteral">&quot;lata&quot;</span>;
<a name="l00307"></a>00307   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> suffix(<span class="stringliteral">&quot;.&quot;</span>);
<a name="l00308"></a>00308   suffix+=format_post_bis;
<a name="l00309"></a>00309   nom_2.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(suffix);
<a name="l00310"></a>00310   <span class="keywordtype">int</span> est_le_premie_post=0;
<a name="l00311"></a>00311   <span class="keywordflow">if</span> (format_post_bis!=<span class="stringliteral">&quot;lata&quot;</span>)
<a name="l00312"></a>00312     post.<a class="code" href="classFormat__Post__base.html#a6804fdf6e00a990dcbb7d0fc4416a181" title="Initialise le fichier avec des parametres appropries pour son format (exemple: format ascii...">initialize_by_default</a>(nom_2);
<a name="l00313"></a>00313   <span class="keywordflow">else</span>
<a name="l00314"></a>00314     post.<a class="code" href="classFormat__Post__base.html#a4284b93045ce9f0245680ec2fbb14cf0">initialize</a>(nom_2,<a class="code" href="classPostraiter__domaine.html#a299de42079858eb2a3a12f47a4ca448a">format_binaire_</a>,<span class="stringliteral">&quot;SIMPLE&quot;</span>);
<a name="l00315"></a>00315   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> numero_domaine=0; numero_domaine&lt;<a class="code" href="classPostraiter__domaine.html#a9350d88f5df26184c7950c1d882e47eb">nb_domaine_</a>; numero_domaine++)
<a name="l00316"></a>00316     {
<a name="l00317"></a>00317       <span class="keywordflow">if</span> (numero_domaine==0)
<a name="l00318"></a>00318         est_le_premie_post=1;
<a name="l00319"></a>00319       <span class="keywordflow">else</span>
<a name="l00320"></a>00320         est_le_premie_post=0;
<a name="l00321"></a>00321       post.<a class="code" href="classFormat__Post__base.html#ae11c6023d377a665c55e082fcd5ca28e">ecrire_entete</a>(0.,0,est_le_premie_post);
<a name="l00322"></a>00322 
<a name="l00323"></a>00323       <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>(numero_domaine);
<a name="l00324"></a>00324       <span class="keywordtype">int</span> reprise = 0;
<a name="l00325"></a>00325       <span class="keywordtype">double</span> t_init = 0.;
<a name="l00326"></a>00326       post.<a class="code" href="classFormat__Post__base.html#af36b24fb1eebaef44cce2fe2e776a6f7">preparer_post</a>(dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>(),est_le_premie_post,reprise,t_init);
<a name="l00327"></a>00327       post.<a class="code" href="classFormat__Post__base.html#abf7c0bcdd173cc18ec268949ab9df893" title="Ecriture d&#39;un maillage. L&#39;ecriture du domaine a lieu soit au debut, avant le premier appel a ecrire_t...">ecrire_domaine</a>(dom, est_le_premie_post);
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329 
<a name="l00330"></a>00330   post.<a class="code" href="classFormat__Post__base.html#a6f85911c85685f7a2d5563885ac1cfd9" title="Commence l&#39;ecriture d&#39;un pas de temps. La classe derivee doit accepter de recevoir plusieurs appels c...">ecrire_temps</a>(0.);
<a name="l00331"></a>00331 
<a name="l00332"></a>00332   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> numero_domaine=0; numero_domaine&lt;<a class="code" href="classPostraiter__domaine.html#a9350d88f5df26184c7950c1d882e47eb">nb_domaine_</a>; numero_domaine++)
<a name="l00333"></a>00333     {
<a name="l00334"></a>00334       <span class="keywordflow">if</span> (numero_domaine==0)
<a name="l00335"></a>00335         est_le_premie_post=1;
<a name="l00336"></a>00336       <span class="keywordflow">else</span>
<a name="l00337"></a>00337         est_le_premie_post=0;
<a name="l00338"></a>00338       <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>(numero_domaine);
<a name="l00339"></a>00339 
<a name="l00340"></a>00340       compteur=-1;
<a name="l00341"></a>00341       post.<a class="code" href="classFormat__Post__base.html#a5f48dd23a4a4f54e5274f1a994aac4eb">init_ecriture</a>(0.,-1.,est_le_premie_post,dom);
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     }
<a name="l00344"></a>00344   <span class="keywordtype">int</span> moi=<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>();
<a name="l00345"></a>00345   <span class="keywordflow">if</span> (<a class="code" href="classPostraiter__domaine.html#acb55436e9a5705650330ee2fef25ccc0">joint_non_ecrit_</a>)
<a name="l00346"></a>00346     moi=0;
<a name="l00347"></a>00347 
<a name="l00348"></a>00348   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> numero_domaine=0; numero_domaine&lt;<a class="code" href="classPostraiter__domaine.html#a9350d88f5df26184c7950c1d882e47eb">nb_domaine_</a>; numero_domaine++)
<a name="l00349"></a>00349     {
<a name="l00350"></a>00350       <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>(numero_domaine);
<a name="l00351"></a>00351       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom(dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>());
<a name="l00352"></a>00352       <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00353"></a>00353       <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems = zone.les_elems();
<a name="l00354"></a>00354       <a class="code" href="classIntVect.html">IntVect</a> ch_som(zone.nb_som());
<a name="l00355"></a>00355       <span class="keywordtype">int</span> nb_elem=zone.nb_elem();
<a name="l00356"></a>00356       <a class="code" href="classIntVect.html">IntVect</a> ch_elem2(nb_elem);
<a name="l00357"></a>00357       <span class="keywordtype">int</span> num=0;
<a name="l00358"></a>00358 <span class="comment">// En format LATA V2, les frontieres et joints</span>
<a name="l00359"></a>00359 <span class="comment">// sont ecrits par defaut depuis la 1.6.6 lors</span>
<a name="l00360"></a>00360 <span class="comment">// de l&#39;ecriture des domaines si le domaine a ete discretise &lt;=&gt; indice_domaines_frontieres&gt;0</span>
<a name="l00361"></a>00361       <span class="keywordflow">if</span> (<a class="code" href="classPostraiter__domaine.html#aed4a3a05ce6919699221cf0a92889f51">format_post_</a>!=<span class="stringliteral">&quot;lata_V2&quot;</span> || dom.<a class="code" href="classDomaine.html#a22db0ffbfd9e5283705db098fa2dff5b">domaines_frontieres</a>().<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>()==0)
<a name="l00362"></a>00362         {
<a name="l00363"></a>00363           <span class="keywordflow">if</span> (dom.<a class="code" href="classDomaine.html#a22db0ffbfd9e5283705db098fa2dff5b">domaines_frontieres</a>().<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>()==0) <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Warning: it could be faster and nicer to discretize your domain before using Postraiter_domaine.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00364"></a>00364 <span class="comment">//</span>
<a name="l00365"></a>00365 <span class="comment">// Ecriture des frontieres</span>
<a name="l00366"></a>00366 <span class="comment">//</span>
<a name="l00367"></a>00367           <span class="keywordflow">if</span> (<a class="code" href="classPostraiter__domaine.html#aabc0c8a9263edb769b6388f2e0d50933">ecrire_frontiere_</a>)
<a name="l00368"></a>00368             {
<a name="l00369"></a>00369               <span class="keywordtype">int</span> nglob=1;
<a name="l00370"></a>00370               <span class="keywordtype">int</span> nb_bords = zone.nb_bords();
<a name="l00371"></a>00371               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_bords; i++)
<a name="l00372"></a>00372                 {
<a name="l00373"></a>00373                   num=i+nglob;
<a name="l00374"></a>00374                   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fr=zone.bord(i).<a class="code" href="classNom.html#a4fcffbaa80271df0d9674f2a2751efb9" title="Renvoie *this;.">le_nom</a>();
<a name="l00375"></a>00375 <span class="comment">// le maitre envoit le nom de la frontiere</span>
<a name="l00376"></a>00376 <span class="comment">// afin que les processeurs traitent les bords dans le meme ordre</span>
<a name="l00377"></a>00377                   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00378"></a>00378                     <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(nom_fr,0,-1,11);
<a name="l00379"></a>00379                   <span class="keywordflow">else</span>
<a name="l00380"></a>00380                     <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(nom_fr,0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">me</a>(),11);
<a name="l00381"></a>00381                   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_bord;
<a name="l00382"></a>00382                   <span class="keywordflow">if</span> (nb_domaine_==1)
<a name="l00383"></a>00383                     nom_bord = nom_fr;
<a name="l00384"></a>00384                   <span class="keywordflow">else</span>
<a name="l00385"></a>00385                     nom_bord = zone.domaine().<a class="code" href="classNom.html#a4fcffbaa80271df0d9674f2a2751efb9" title="Renvoie *this;.">le_nom</a>()+<span class="stringliteral">&quot;_&quot;</span>+nom_fr;
<a name="l00386"></a>00386                   <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces=zone.frontiere(zone.rang_frontiere(nom_fr)).faces();
<a name="l00387"></a>00387                   <a class="code" href="Postraiter__domaine_8cpp.html#a2623d83ce7df80c22750f5aecff0571a">traite_bord</a>(zone, ch_som,ch_elem2, num, faces, nom_bord, fichier, les_elems, post,compteur,compteur0,compteur_reel,moi);
<a name="l00388"></a>00388                 }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390               nglob+=zone.nb_bords();
<a name="l00391"></a>00391               <span class="keywordtype">int</span> nb_raccords = zone.nb_raccords();
<a name="l00392"></a>00392               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_raccords; i++)
<a name="l00393"></a>00393                 {
<a name="l00394"></a>00394                   num=i+nglob;
<a name="l00395"></a>00395                   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fr=zone.raccord(i).valeur().<a class="code" href="classNom.html#a4fcffbaa80271df0d9674f2a2751efb9" title="Renvoie *this;.">le_nom</a>();
<a name="l00396"></a>00396                   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00397"></a>00397                     <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(nom_fr,0,-1,11);
<a name="l00398"></a>00398                   <span class="keywordflow">else</span>
<a name="l00399"></a>00399                     <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(nom_fr,0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">me</a>(),11);
<a name="l00400"></a>00400                   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_bord;
<a name="l00401"></a>00401                   <span class="keywordflow">if</span> (nb_domaine_==1)
<a name="l00402"></a>00402                     nom_bord = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;Raccord_&quot;</span>)+nom_fr;
<a name="l00403"></a>00403                   <span class="keywordflow">else</span>
<a name="l00404"></a>00404                     nom_bord = zone.domaine().<a class="code" href="classNom.html#a4fcffbaa80271df0d9674f2a2751efb9" title="Renvoie *this;.">le_nom</a>()+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;_Raccord_&quot;</span>)+nom_fr;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406                   <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces=zone.frontiere(zone.rang_frontiere(nom_fr)).faces();
<a name="l00407"></a>00407                   <a class="code" href="Postraiter__domaine_8cpp.html#a2623d83ce7df80c22750f5aecff0571a">traite_bord</a>(zone, ch_som,ch_elem2, num, faces, nom_bord, fichier, les_elems, post,compteur,compteur0,compteur_reel,moi);
<a name="l00408"></a>00408                 }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410               nglob+=zone.nb_raccords();
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 <span class="comment">// On ecrit un champ global</span>
<a name="l00413"></a>00413               <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> noms_post(1);
<a name="l00414"></a>00414               <span class="keywordflow">if</span> (nb_domaine_==1)
<a name="l00415"></a>00415                 noms_post[0] = <span class="stringliteral">&quot;Bord&quot;</span>;
<a name="l00416"></a>00416               <span class="keywordflow">else</span>
<a name="l00417"></a>00417                 noms_post[0] = zone.domaine().<a class="code" href="classObjet__U.html#a70413a8785d36bf5105fced1c89d0d2b" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>()+<span class="stringliteral">&quot;_Bord&quot;</span>;
<a name="l00418"></a>00418               <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> unites(1);
<a name="l00419"></a>00419               unites[0]=<span class="stringliteral">&quot;1&quot;</span>;
<a name="l00420"></a>00420               <span class="keywordtype">int</span> nb_som=zone.nb_som();
<a name="l00421"></a>00421               <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> ch_som2(nb_som,1);
<a name="l00422"></a>00422               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nb_som; j++)
<a name="l00423"></a>00423                 ch_som2(j,0)=(ch_som(j));
<a name="l00424"></a>00424               post.<a class="code" href="classFormat__Post__base.html#a3786a17f1ffe0b632fa03635e3befde4" title="Ecriture d&#39;un champ dans le fichier de postraitement. Parametre: id_du_champ Signification: identifia...">ecrire_champ</a>(dom,unites,noms_post,-1,0.,0.,noms_post[0], nom_dom, <span class="stringliteral">&quot;SOM&quot;</span>,<span class="stringliteral">&quot;scalar&quot;</span>,ch_som2);
<a name="l00425"></a>00425             }
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 <span class="comment">//</span>
<a name="l00428"></a>00428 <span class="comment">// Ecriture des joints</span>
<a name="l00429"></a>00429 <span class="comment">//</span>
<a name="l00430"></a>00430           <span class="keywordflow">if</span> (!<a class="code" href="classPostraiter__domaine.html#acb55436e9a5705650330ee2fef25ccc0">joint_non_ecrit_</a>)
<a name="l00431"></a>00431             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">nproc</a>(); p++)
<a name="l00432"></a>00432               {
<a name="l00433"></a>00433                 <span class="keywordtype">int</span> nb_joint=zone.nb_joints();
<a name="l00434"></a>00434                 <a class="code" href="communications_8cpp.html#a2335b36078ae87e23dab400a6e129a3c">envoyer_broadcast</a>(nb_joint, p);
<a name="l00435"></a>00435                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_joint; i++)
<a name="l00436"></a>00436                   {
<a name="l00437"></a>00437                     <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_bord;
<a name="l00438"></a>00438                     <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">me</a>()==p)
<a name="l00439"></a>00439                       {
<a name="l00440"></a>00440                         <span class="keywordflow">if</span> (nb_domaine_==1)
<a name="l00441"></a>00441                           nom_bord=<span class="stringliteral">&quot;Joint_Proc_&quot;</span>;
<a name="l00442"></a>00442                         <span class="keywordflow">else</span>
<a name="l00443"></a>00443                           nom_bord=zone.domaine().<a class="code" href="classNom.html#a4fcffbaa80271df0d9674f2a2751efb9" title="Renvoie *this;.">le_nom</a>()+<span class="stringliteral">&quot;Joint_Proc_&quot;</span>;
<a name="l00444"></a>00444                         <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> namep(p);
<a name="l00445"></a>00445                         nom_bord+=namep;
<a name="l00446"></a>00446                         nom_bord+=<span class="stringliteral">&quot;_avec_Proc_&quot;</span>;
<a name="l00447"></a>00447                         nom_bord+=<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(zone.joint(i).PEvoisin());
<a name="l00448"></a>00448                       }
<a name="l00449"></a>00449 <span class="comment">// Le processeur p envoie nom_bord a tout le monde</span>
<a name="l00450"></a>00450                     <a class="code" href="communications_8cpp.html#a2335b36078ae87e23dab400a6e129a3c">envoyer_broadcast</a>(nom_bord, p);
<a name="l00451"></a>00451                     <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a> toto;
<a name="l00452"></a>00452                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt; <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">me</a>()&lt;&lt;<span class="stringliteral">&quot; INFO &quot;</span> &lt;&lt; p&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;nom_bord&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00453"></a>00453                     <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces=(<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">me</a>()==p?zone.joint(i).faces():toto);
<a name="l00454"></a>00454                     <a class="code" href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1" title="Synchronise tous les processeurs du groupe courant&lt;br&gt;(attend que tous les processeurs soient arrives...">barrier</a>();
<a name="l00455"></a>00455                     <a class="code" href="Postraiter__domaine_8cpp.html#a2623d83ce7df80c22750f5aecff0571a">traite_bord</a>(zone, ch_som,ch_elem2, num, faces, nom_bord, fichier, les_elems,post,compteur,compteur0,compteur_reel,moi,1);
<a name="l00456"></a>00456                     <a class="code" href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1" title="Synchronise tous les processeurs du groupe courant&lt;br&gt;(attend que tous les processeurs soient arrives...">barrier</a>();
<a name="l00457"></a>00457                   }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459               }
<a name="l00460"></a>00460         }
<a name="l00461"></a>00461 <span class="comment">//</span>
<a name="l00462"></a>00462 <span class="comment">// Ecriture des sous_zones</span>
<a name="l00463"></a>00463 <span class="comment">//</span>
<a name="l00464"></a>00464       <span class="keywordtype">int</span> nb_ss_zones=dom.<a class="code" href="classDomaine.html#a247a66a1ad882b7d223f963767cdfe8b" title="Renvoie le nombre de sous-zone.">nb_ss_zones</a>();
<a name="l00465"></a>00465       <span class="keywordtype">int</span> nb_elem_tot=zone.nb_elem_tot();
<a name="l00466"></a>00466       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_ss_zones; i++)
<a name="l00467"></a>00467         {
<a name="l00468"></a>00468           <span class="keyword">const</span> <a class="code" href="classSous__Zone.html" title="Classe Sous_Zone Represente une sous zone volumique i.e un sous ensemble de polyedres d&#39;un objet de t...">Sous_Zone</a>&amp; la_ss_zone=dom.<a class="code" href="classDomaine.html#ad38f4fc3c0e1b44dc9fdc947985178a5" title="Renvoie la i-ieme sous-zone. (version const)">ss_zone</a>(i);
<a name="l00469"></a>00469           <span class="keywordtype">int</span> nbpoly=la_ss_zone.<a class="code" href="classSous__Zone.html#a4266863124b1b4ce971ac57a6ec746e9" title="Returns the subzone number of elements (real+virtual elements in parallel)">nb_elem_tot</a>();
<a name="l00470"></a>00470           <a class="code" href="classIntVect.html">IntVect</a> ch_elemb2(nb_elem);
<a name="l00471"></a>00471           <span class="keywordtype">int</span> cell=0;
<a name="l00472"></a>00472           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pol=0; pol&lt;nbpoly; pol++)
<a name="l00473"></a>00473             {
<a name="l00474"></a>00474               <span class="keywordtype">int</span> elem=la_ss_zone[pol];
<a name="l00475"></a>00475               <span class="keywordflow">if</span> (elem&lt;nb_elem)
<a name="l00476"></a>00476                 {
<a name="l00477"></a>00477                   ch_elemb2[elem]=(i+1);
<a name="l00478"></a>00478                   cell++;
<a name="l00479"></a>00479                 }
<a name="l00480"></a>00480               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (elem&gt;=nb_elem_tot)
<a name="l00481"></a>00481                 {
<a name="l00482"></a>00482                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;This subzone is poorly defined.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00483"></a>00483                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;It is composed of elements which do not belong&quot;</span> &lt;&lt; finl;
<a name="l00484"></a>00484                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;to the domain!&quot;</span> &lt;&lt; finl;
<a name="l00485"></a>00485                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00486"></a>00486                 }
<a name="l00487"></a>00487             }
<a name="l00488"></a>00488           <span class="keywordtype">int</span> subzone_cells=<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(cell);
<a name="l00489"></a>00489           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;We handle of the subzone &quot;</span> &lt;&lt; i &lt;&lt;<span class="stringliteral">&quot; who have &quot;</span> &lt;&lt; subzone_cells &lt;&lt; <span class="stringliteral">&quot; cells.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00490"></a>00490           <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a> bidon;
<a name="l00491"></a>00491           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_post;
<a name="l00492"></a>00492           nom_post=<span class="stringliteral">&quot;Sous_Zone_&quot;</span>;
<a name="l00493"></a>00493           nom_post+=la_ss_zone.<a class="code" href="classSous__Zone.html#af05a7f18787ee39875bddf131f4b3d29" title="Renvoie le nom de la sous-zone.">le_nom</a>();
<a name="l00494"></a>00494           <a class="code" href="Postraiter__domaine_8cpp.html#a2623d83ce7df80c22750f5aecff0571a">traite_bord</a>(zone,ch_som,ch_elemb2,1,bidon,nom_post,fichier,les_elems,post,compteur,compteur0,compteur_reel,moi,2);
<a name="l00495"></a>00495         }
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497   <span class="keywordtype">int</span> fin=1;
<a name="l00498"></a>00498   post.<a class="code" href="classFormat__Post__base.html#a621bd94fa673c47fe7e0ca44d8416c52">finir</a>(fin);
<a name="l00499"></a>00499 }
<a name="l00500"></a>00500 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:20 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
