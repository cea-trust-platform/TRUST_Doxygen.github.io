<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/ExtrudeParoi.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/ExtrudeParoi.cpp</div>  </div>
</div>
<div class="contents">
<a href="ExtrudeParoi_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        ExtrudeParoi.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Geometrie</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/13</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="ExtrudeParoi_8h.html">ExtrudeParoi.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Static__Int__Lists_8h.html">Static_Int_Lists.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Connectivite__som__elem_8h.html">Connectivite_som_elem.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Faces__builder_8h.html">Faces_builder.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="IntList_8h.html">IntList.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Array__tools_8h.html">Array_tools.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Scatter_8h.html">Scatter.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="ExtrudeParoi_8cpp.html#aecdc7d1ac7802ddbb207dc7eedb89f43">00033</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classExtrudeParoi.html" title="Classe ExtrudeParoi Cette classe est un interprete qui sert a lire et executer la directive ExtrudePa...">ExtrudeParoi</a>,<span class="stringliteral">&quot;ExtrudeParoi&quot;</span>,<a class="code" href="classInterprete__geometrique__base.html" title="classe Interprete_geometrique_base .">Interprete_geometrique_base</a>);
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="classExtrudeParoi.html#aab84d28740dd0b1055d31b8781a9ee53">00035</a> <a class="code" href="classExtrudeParoi.html#aab84d28740dd0b1055d31b8781a9ee53">ExtrudeParoi::ExtrudeParoi</a>()
<a name="l00036"></a>00036 {
<a name="l00037"></a>00037   <a class="code" href="classExtrudeParoi.html#a06532288b8780cd2a37e499fe40b0def">projection_normale_bord</a>=1;
<a name="l00038"></a>00038   <a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>=1;
<a name="l00039"></a>00039   <a class="code" href="classExtrudeParoi.html#ade0b94d0031f9a6738ca60951ce755c6">type</a>=0;
<a name="l00040"></a>00040   <a class="code" href="classExtrudeParoi.html#aaf9d8afe404fbdf5b32038b208d191d1">epaisseur</a>.<a class="code" href="classArrOfDouble.html#a610464f4b3dccac6f814915b526783ed">resize_array</a>(1);
<a name="l00041"></a>00041   <a class="code" href="classExtrudeParoi.html#aaf9d8afe404fbdf5b32038b208d191d1">epaisseur</a>[0]=0.5;
<a name="l00042"></a>00042 }
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="comment">// Precondition:</span>
<a name="l00045"></a>00045 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00046"></a>00046 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00047"></a>00047 <span class="comment">// Valeurs par defaut:</span>
<a name="l00048"></a>00048 <span class="comment">// Contraintes:</span>
<a name="l00049"></a>00049 <span class="comment">// Acces: entree/sortie</span>
<a name="l00050"></a>00050 <span class="comment">// Exception:</span>
<a name="l00051"></a>00051 <span class="comment">// Effets de bord:</span>
<a name="l00052"></a>00052 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00053"></a>00053 <span class="comment">//</span><span class="comment"></span>
<a name="l00054"></a>00054 <span class="comment">//! Simple appel a: Interprete::printOn(Sortie\&amp;)</span>
<a name="l00055"></a>00055 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00056"></a>00056 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00057"></a>00057 <span class="comment">Contraintes: */</span>
<a name="l00058"></a><a class="code" href="classExtrudeParoi.html#ae9982561c7ab1ecc50bae14185abb0bc">00058</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classExtrudeParoi.html#ae9982561c7ab1ecc50bae14185abb0bc" title="Simple appel a: Interprete::printOn(Sortie&amp;)">ExtrudeParoi::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00059"></a>00059 <span class="keyword"></span>{
<a name="l00060"></a>00060   <span class="keywordflow">return</span> <a class="code" href="classExtrudeParoi.html#ae9982561c7ab1ecc50bae14185abb0bc" title="Simple appel a: Interprete::printOn(Sortie&amp;)">Interprete::printOn</a>(os);
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="ExtrudeParoi_8cpp.html#a34684b46a6adf7561fa48c2bff697a6e">00064</a> <span class="keywordtype">void</span> <a class="code" href="ExtrudeParoi_8cpp.html#a34684b46a6adf7561fa48c2bff697a6e">calcul_normal2</a>(<span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; pt0, <span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; pt1, <span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; pt2, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; normal)
<a name="l00065"></a>00065 {
<a name="l00066"></a>00066   normal(0)=(pt1(1)-pt0(1))*(pt2(2)-pt0(2))-((pt2(1)-pt0(1))*(pt1(2)-pt0(2)));
<a name="l00067"></a>00067   normal(1)=(pt1(2)-pt0(2))*(pt2(0)-pt0(0))-((pt2(2)-pt0(2))*(pt1(0)-pt0(0)));
<a name="l00068"></a>00068   normal(2)=(pt1(0)-pt0(0))*(pt2(1)-pt0(1))-((pt2(0)-pt0(0))*(pt1(1)-pt0(1)));
<a name="l00069"></a>00069 }
<a name="l00070"></a>00070 
<a name="l00071"></a><a class="code" href="ExtrudeParoi_8cpp.html#a079c4e51b46ed2d1e8690326e2feda3e">00071</a> <span class="keywordtype">void</span> <a class="code" href="ExtrudeParoi_8cpp.html#a079c4e51b46ed2d1e8690326e2feda3e">calcul_normal_norme2</a>(<span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; pt0, <span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; pt1, <span class="keyword">const</span> <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; pt2, <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; normal)
<a name="l00072"></a>00072 {
<a name="l00073"></a>00073   <a class="code" href="ExtrudeParoi_8cpp.html#a34684b46a6adf7561fa48c2bff697a6e">calcul_normal2</a>(pt0, pt1,  pt2, normal);
<a name="l00074"></a>00074   normal/=<a class="code" href="ArrOfDouble_8cpp.html#af3b2ac08cde80e3eadd7a83f5fd06ab7" title="Calcul de la norme du vecteur dx (fonction blas DNRM2, soit racine carree(somme des dx[i]*dx[i])...">norme_array</a>(normal);
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="ExtrudeParoi_8cpp.html#abbc681e7bcbc245e215b000dde1c22f5">00078</a> <span class="keywordtype">void</span> <a class="code" href="ExtrudeParoi_8cpp.html#abbc681e7bcbc245e215b000dde1c22f5">calcul_tab_norme</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab)
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;tab.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0); i++)
<a name="l00081"></a>00081     {
<a name="l00082"></a>00082       <span class="keywordtype">double</span> norm = sqrt(tab(i,0)*tab(i,0)+tab(i,1)*tab(i,1)+tab(i,2)*tab(i,2));
<a name="l00083"></a>00083       norm += <a class="code" href="Double_8h.html#a0a3fffa6d17ad8f7de4bb337c6266561">DMINFLOAT</a>;
<a name="l00084"></a>00084       tab(i,0)/=norm;
<a name="l00085"></a>00085       tab(i,1)/=norm;
<a name="l00086"></a>00086       tab(i,2)/=norm;
<a name="l00087"></a>00087     }
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">// Precondition:</span>
<a name="l00092"></a>00092 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00093"></a>00093 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00094"></a>00094 <span class="comment">// Valeurs par defaut:</span>
<a name="l00095"></a>00095 <span class="comment">// Contraintes:</span>
<a name="l00096"></a>00096 <span class="comment">// Acces: entree/sortie</span>
<a name="l00097"></a>00097 <span class="comment">// Exception:</span>
<a name="l00098"></a>00098 <span class="comment">// Effets de bord:</span>
<a name="l00099"></a>00099 <span class="comment">// Postcondition:</span>
<a name="l00100"></a>00100 <span class="comment">//</span><span class="comment"></span>
<a name="l00101"></a>00101 <span class="comment">//! Simple appel a: Interprete::readOn(Entree\&amp;)</span>
<a name="l00102"></a>00102 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00103"></a>00103 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00104"></a>00104 <span class="comment">Contraintes: */</span>
<a name="l00105"></a><a class="code" href="classExtrudeParoi.html#a10f7a28f360f28acfc1c58f5401588e8">00105</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classExtrudeParoi.html#a10f7a28f360f28acfc1c58f5401588e8" title="Simple appel a: Interprete::readOn(Entree&amp;)">ExtrudeParoi::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107   <span class="keywordflow">return</span> <a class="code" href="classExtrudeParoi.html#a10f7a28f360f28acfc1c58f5401588e8" title="Simple appel a: Interprete::readOn(Entree&amp;)">Interprete::readOn</a>(is);
<a name="l00108"></a>00108 }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="comment">// Precondition:</span>
<a name="l00112"></a>00112 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00113"></a>00113 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00114"></a>00114 <span class="comment">// Valeurs par defaut:</span>
<a name="l00115"></a>00115 <span class="comment">// Contraintes:</span>
<a name="l00116"></a>00116 <span class="comment">// Acces: entree/sortie</span>
<a name="l00117"></a>00117 <span class="comment">// Exception: l&#39;objet a mailler n&#39;est pas du type Domaine</span>
<a name="l00118"></a>00118 <span class="comment">// Effets de bord:</span>
<a name="l00119"></a>00119 <span class="comment">// Postcondition:</span>
<a name="l00120"></a>00120 <span class="comment">//</span>
<a name="l00121"></a>00121 <span class="comment">//</span>
<a name="l00122"></a>00122 <span class="comment">//</span><span class="comment"></span>
<a name="l00123"></a>00123 <span class="comment">//! Fonction principale de l&#39;interprete ExtrudeParoi&lt;br&gt;Creation d&#39;une couche de prismes en paroi&lt;br&gt;(prismes tetraedrises en 3)</span>
<a name="l00124"></a>00124 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00125"></a>00125 <span class="comment">Signification: le flot d&#39;entree&lt;br&gt;</span>
<a name="l00126"></a>00126 <span class="comment">Contraintes: */</span>
<a name="l00127"></a><a class="code" href="classExtrudeParoi.html#afcf0c0e884890f9eed87ab640edc6c07">00127</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classExtrudeParoi.html#afcf0c0e884890f9eed87ab640edc6c07" title="Fonction principale de l&#39;interprete ExtrudeParoi Creation d&#39;une couche de prismes en paroi&lt;br&gt;(prisme...">ExtrudeParoi::interpreter_</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00128"></a>00128 {
<a name="l00129"></a>00129   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom;
<a name="l00130"></a>00130   <a class="code" href="classParam.html" title="Defined below in this file.">Param</a> param(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00131"></a>00131   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;domaine&quot;</span>,&amp;nom_dom,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
<a name="l00132"></a>00132   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;nom_bord&quot;</span>,&amp;<a class="code" href="classExtrudeParoi.html#ada4dfdc9276d7ee0ac37a2107b926a1f">nom_front</a>,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
<a name="l00133"></a>00133   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;epaisseur&quot;</span>,&amp;<a class="code" href="classExtrudeParoi.html#aaf9d8afe404fbdf5b32038b208d191d1">epaisseur</a>);
<a name="l00134"></a>00134   param.<a class="code" href="classParam.html#ae3d50612a0014a9d58e6e035a65f20e5">ajouter_flag</a>(<span class="stringliteral">&quot;critere_absolu&quot;</span>,&amp;<a class="code" href="classExtrudeParoi.html#ade0b94d0031f9a6738ca60951ce755c6">type</a>);
<a name="l00135"></a>00135   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;projection_normale_bord&quot;</span>,&amp;<a class="code" href="classExtrudeParoi.html#a06532288b8780cd2a37e499fe40b0def">projection_normale_bord</a>);
<a name="l00136"></a>00136   param.<a class="code" href="classParam.html#aa9d44fc51b4a08b357733a97dc7acaad" title="Read the is input with the parameters (defined with the Param object) inside: { ... } Example, to read: { a 1 b 2 } Param param(que_suis_je()); int a,b; param.ajouter(&quot;a&quot;,&amp;a); param.ajouter(&quot;b&quot;,&amp;b); param.lire_avec_accolades_depuis(is);.">lire_avec_accolades_depuis</a>(is);
<a name="l00137"></a>00137   <a class="code" href="classExtrudeParoi.html#aaf9d8afe404fbdf5b32038b208d191d1">epaisseur</a>.<a class="code" href="classArrOfDouble.html#aee755ade0ca203a8490ef2b29e1136cd" title="Tri des valeurs du tableau dans l&#39;ordre croissant et suppresion des doublons La fonction utilisee est...">array_trier_retirer_doublons</a>();
<a name="l00138"></a>00138   <a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>=<a class="code" href="classExtrudeParoi.html#aaf9d8afe404fbdf5b32038b208d191d1">epaisseur</a>.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00139"></a>00139   <a class="code" href="classInterprete__geometrique__base.html#ac0d2fd316a4bb1585ec579f473684caa">associer_domaine</a>(nom_dom);
<a name="l00140"></a>00140   <a class="code" href="classScatter.html#a8cf934a9b5f7ecb7ef89f61c09804f45" title="methode utilisee par les interpretes qui modifient le domaine&lt;br&gt;(sequentiel), detruit les descripteu...">Scatter::uninit_sequential_domain</a>(<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>());
<a name="l00141"></a>00141   <a class="code" href="classExtrudeParoi.html#a9f1a5e517dd971cb1a5722a24eca621d">extrude</a>(<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>());
<a name="l00142"></a>00142   <a class="code" href="classScatter.html#a1874139ffd29d5a68191bc7828d3a5bd" title="cree des descripteurs sequentiels pour les tableaux sommets et elements du domaine (necessaire car Sc...">Scatter::init_sequential_domain</a>(<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>());
<a name="l00143"></a>00143   <span class="keywordflow">return</span> is;
<a name="l00144"></a>00144 }
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="comment">// Precondition:</span>
<a name="l00147"></a>00147 <span class="comment">// Parametre: Zone&amp; zone</span>
<a name="l00148"></a>00148 <span class="comment">// Signification: la zone dont on veut raffiner les elements</span>
<a name="l00149"></a>00149 <span class="comment">// Valeurs par defaut:</span>
<a name="l00150"></a>00150 <span class="comment">// Contraintes:</span>
<a name="l00151"></a>00151 <span class="comment">// Acces: entree/sortie</span>
<a name="l00152"></a>00152 <span class="comment">// </span>
<a name="l00153"></a>00153 <span class="comment">// Signification:</span>
<a name="l00154"></a>00154 <span class="comment">// Contraintes:</span>
<a name="l00155"></a>00155 <span class="comment">// Exception:</span>
<a name="l00156"></a>00156 <span class="comment">// Effets de bord:</span>
<a name="l00157"></a>00157 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00158"></a>00158 <span class="comment">//</span>
<a name="l00159"></a><a class="code" href="classExtrudeParoi.html#a9f1a5e517dd971cb1a5722a24eca621d">00159</a> <span class="keywordtype">void</span> <a class="code" href="classExtrudeParoi.html#a9f1a5e517dd971cb1a5722a24eca621d">ExtrudeParoi::extrude</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom)
<a name="l00160"></a>00160 {
<a name="l00161"></a>00161   <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone = dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00162"></a>00162 
<a name="l00163"></a>00163   <span class="keywordflow">if</span>  (zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Tetraedre&quot;</span>)
<a name="l00164"></a>00164     {
<a name="l00165"></a>00165       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;ExtrudeParoi ..... &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167   <span class="keywordflow">else</span>
<a name="l00168"></a>00168     {
<a name="l00169"></a>00169       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The &quot;</span> &lt;&lt; zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt;<span class="stringliteral">&quot;s are not treated with ExtrudeParoi&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00170"></a>00170       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems = zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00174"></a>00174   <span class="keywordtype">int</span> oldsz = les_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00175"></a>00175   <span class="keywordtype">int</span> nbs = zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>();
<a name="l00176"></a>00176   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> elem_traite(oldsz);
<a name="l00177"></a>00177   <span class="keywordtype">int</span> oldnbsom = zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>();
<a name="l00178"></a>00178 
<a name="l00179"></a>00179   <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a> lesfaces;
<a name="l00180"></a>00180 <span class="comment">// zone.creer_faces(les_faces);</span>
<a name="l00181"></a>00181   {
<a name="l00182"></a>00182 <span class="comment">// bloc a factoriser avec Zone_VF.cpp :</span>
<a name="l00183"></a>00183     <a class="code" href="classFaces.html#a62b7dbd959f99b997dc8111210ec8458">Type_Face</a> type_face = zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>().<a class="code" href="classElem__geom.html#a80ae8c21d0d7e74956065006519370c6" title="Appel a l&#39;objet sous-jacent Renvoie le i-eme type de face de l&#39;element geometrique.">type_face</a>(0);
<a name="l00184"></a>00184     lesfaces.<a class="code" href="classFaces.html#a503fe687811445373b75dd8ac0991ec2" title="Type les faces.">typer</a>(type_face);
<a name="l00185"></a>00185     lesfaces.<a class="code" href="classFaces.html#a1f8132799487789d4670795c2dbeaa5d" title="Associe les faces a une Zone.">associer_zone</a>(zone);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <a class="code" href="classStatic__Int__Lists.html" title="Cette classe permet de stocker des listes d&#39;entiers accessibles en temps constant. La taille des listes ne peut pas changer sans perdre le contenu (ce sont des listes statiques). Exemple: Static_Int_List l; ArrOfInt tailles(3); tailles[0] = 2; tailles[1] = 3; tailles[2] = 0; // On reserve la memoire pour trois listes de taille 2, 3 et 0: l.set_list_sizes(tailles); // On affecte une valeur au deuxieme element de la premiere liste: l.set_value(0,1,765); // Affiche la valeur Cout &lt;&lt; l(0,1);.">Static_Int_Lists</a> connectivite_som_elem;
<a name="l00188"></a>00188     <span class="keyword">const</span> <span class="keywordtype">int</span>     nb_sommets_tot = zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a394e61cf1993665886de0fbbd0c0178e" title="Renvoie le nombre total de sommets.">nb_som_tot</a>();
<a name="l00189"></a>00189     <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp;    elements       = zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     <a class="code" href="Connectivite__som__elem_8cpp.html#a82161461a228e43ae236c31101ff3ce6" title="construction de la structure som_elem pour la zone donnee On cree pour chaque sommet i la liste des e...">construire_connectivite_som_elem</a>(nb_sommets_tot,
<a name="l00192"></a>00192                                      elements,
<a name="l00193"></a>00193                                      connectivite_som_elem,
<a name="l00194"></a>00194                                      1 <span class="comment">/* include virtual elements */</span>);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <a class="code" href="classFaces__builder.html">Faces_builder</a> faces_builder;
<a name="l00197"></a>00197     <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> elem_faces; <span class="comment">//!&lt; Tableau dont on aura pas besoin</span>
<a name="l00198"></a>00198 <span class="comment"></span>    faces_builder.<a class="code" href="classFaces__builder.html#a5b48ba95888da226cbf702f677656ff6" title="A partir de la description des elements de la zone et des frontieres&lt;br&gt;(bords, raccords, faces internes et joints) : Remplissage des structures suivantes: - pour les frontieres de la zone: fixer_num_premiere_face - les_faces.faces_sommets (faces reeles) - les_faces.faces_voisins (faces reeles) - elem_faces (pour les faces reeles des elements reels) (on initialise elem_faces de taille nb_elem_reels, nb_faces_par_elem) - joints.items_communs(FACE)">creer_faces_reeles</a>(zone,
<a name="l00199"></a>00199                                      connectivite_som_elem,
<a name="l00200"></a>00200                                      lesfaces,
<a name="l00201"></a>00201                                      elem_faces);
<a name="l00202"></a>00202   }
<a name="l00203"></a>00203   <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> ep_abs(<a class="code" href="classExtrudeParoi.html#aaf9d8afe404fbdf5b32038b208d191d1">epaisseur</a>);
<a name="l00204"></a>00204   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; faces_voisins = lesfaces.<a class="code" href="classFaces.html#af49c4448e67aa7c732c2cc1dc237b442" title="Renvoie le tableau des voisins (des faces).">voisins</a>();
<a name="l00205"></a>00205   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord=dom.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>();
<a name="l00206"></a>00206 
<a name="l00207"></a>00207   <a class="code" href="classIntList.html" title="Classe qui sert a representer une liste de reels int precision. On ne peut pas utiliser la classe con...">IntList</a>  List_som;
<a name="l00208"></a>00208   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> som_arete;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>  normale_som(nbs,3);
<a name="l00211"></a>00211   normale_som=0.;
<a name="l00212"></a>00212   <a class="code" href="classDoubleVect.html">DoubleVect</a> dmin_som(nbs);
<a name="l00213"></a>00213   dmin_som=1e6;
<a name="l00214"></a>00214 
<a name="l00215"></a>00215   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> new_soms;                <span class="comment">//!&lt; les nouveaux sommets</span>
<a name="l00216"></a>00216 <span class="comment"></span>  <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> new_elems;                 <span class="comment">//!&lt; les nouveaux elements</span>
<a name="l00217"></a>00217 <span class="comment"></span>
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l=0; l&lt;zone.<a class="code" href="classZone.html#a9bf185c52ad1809d954bba670d9aed8a" title="Renvoie le nombre de bords + le nombre de raccords + le nombre de faces frontieres internes...">nb_front_Cl</a>(); l++)
<a name="l00220"></a>00220     {
<a name="l00221"></a>00221       <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; fr=zone.<a class="code" href="classZone.html#ac338b119d4b0bc4f510a223b9086fe5e">frontiere</a>(l);
<a name="l00222"></a>00222       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nomfr=fr.<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>();
<a name="l00223"></a>00223 
<a name="l00224"></a>00224       <span class="keywordflow">if</span>(nomfr==<a class="code" href="classExtrudeParoi.html#ada4dfdc9276d7ee0ac37a2107b926a1f">nom_front</a>)
<a name="l00225"></a>00225         {
<a name="l00226"></a>00226           <span class="keywordtype">int</span> nbfaces=fr.<a class="code" href="classFrontiere.html#aa073fe9dbdddde59471ee7032b256aa2" title="Renvoie le nombre de faces de la frontiere.">nb_faces</a>();
<a name="l00227"></a>00227           <span class="keywordtype">int</span> ndeb = fr.<a class="code" href="classFrontiere.html#a2a41c319a1530c984c356121e5ca2383">num_premiere_face</a>();
<a name="l00228"></a>00228           <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; sommet=fr.<a class="code" href="classFrontiere.html#a6d1f96137ddae39a46985a8c3e53bcf5" title="Renvoie les sommets des faces de la frontiere.">les_sommets_des_faces</a>();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 
<a name="l00231"></a>00231           new_elems.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(oldsz+nbfaces*3*<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>,4);
<a name="l00232"></a>00232           new_elems.<a class="code" href="classArrOfInt.html#a195c644d98bf2da2fe4f8aede4e02262" title="Copie les elements source[first_element_source + i] dans les elements (*this)[first_element_dest + i]...">inject_array</a>(les_elems);
<a name="l00233"></a>00233           som_arete.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(3*nbfaces,2);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235 
<a name="l00236"></a>00236           <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> som_elem(4); <span class="comment">//!&lt; sommet rattache a l&#39;element frontiere</span>
<a name="l00237"></a>00237 <span class="comment"></span>          <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> som_face(3); <span class="comment">//!&lt; sommet de la face frontiere</span>
<a name="l00238"></a>00238 <span class="comment"></span>
<a name="l00239"></a>00239           <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> pt0(3),pt1(3),pt2(3),pt_ext(3);
<a name="l00240"></a>00240           <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> normale(3),vect_int(3);
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="comment">// calcul de la normale portee par chaque sommet de la frontiere</span>
<a name="l00244"></a>00244 <span class="comment">//</span>
<a name="l00245"></a>00245 
<a name="l00246"></a>00246           <span class="keywordtype">int</span> compt=0;
<a name="l00247"></a>00247 
<a name="l00248"></a>00248           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbfaces; i++)
<a name="l00249"></a>00249             {
<a name="l00250"></a>00250               <span class="keywordtype">int</span> elem=faces_voisins(i+ndeb,0);
<a name="l00251"></a>00251               <span class="keywordflow">if</span> (elem==-1) elem=faces_voisins(i+ndeb,1);
<a name="l00252"></a>00252 
<a name="l00253"></a>00253               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;4; j++)   som_elem[j]=les_elems(elem,j);
<a name="l00254"></a>00254               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;3; j++)
<a name="l00255"></a>00255                 {
<a name="l00256"></a>00256                   som_face[j]=sommet(i,j);
<a name="l00257"></a>00257                   List_som.<a class="code" href="classIntList.html#a251e57a817484f3c2bb8e9382ebb55b4" title="Ajout d&#39;un element a la liste ssi il n&#39;existe pas deja.">add_if_not</a>(som_face[j]) ;
<a name="l00258"></a>00258                 }
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 <span class="comment">// rangt par ordre croissant des sommets</span>
<a name="l00261"></a>00261 
<a name="l00262"></a>00262               <span class="keywordtype">int</span> stot=som_face[0]+som_face[1]+som_face[2];
<a name="l00263"></a>00263 
<a name="l00264"></a>00264               <span class="keywordtype">int</span> som0=<a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(som_face);
<a name="l00265"></a>00265               <span class="keywordtype">int</span> som2=<a class="code" href="ArrOfDouble_8cpp.html#a95241fccf4bed7fb7a4e2340b7735f14" title="Retourne la valeur maximale.">max_array</a>(som_face);
<a name="l00266"></a>00266               <span class="keywordtype">int</span> som1=stot-som0-som2;
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 
<a name="l00269"></a>00269               som_arete(compt,0)=som0;
<a name="l00270"></a>00270               som_arete(compt,1)=som1;
<a name="l00271"></a>00271               compt++;
<a name="l00272"></a>00272 
<a name="l00273"></a>00273               som_arete(compt,0)=som0;
<a name="l00274"></a>00274               som_arete(compt,1)=som2;
<a name="l00275"></a>00275               compt++;
<a name="l00276"></a>00276 
<a name="l00277"></a>00277               som_arete(compt,0)=som1;
<a name="l00278"></a>00278               som_arete(compt,1)=som2;
<a name="l00279"></a>00279               compt++;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281               <span class="keywordtype">int</span> som_ext=0;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;4; j++)
<a name="l00284"></a>00284                 {
<a name="l00285"></a>00285                   <span class="keywordtype">int</span> ok=0;
<a name="l00286"></a>00286                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;3; k++) <span class="keywordflow">if</span>(som_elem[j]==som_face[k]) ok=1;
<a name="l00287"></a>00287                   <span class="keywordflow">if</span>(ok==0)
<a name="l00288"></a>00288                     {
<a name="l00289"></a>00289                       som_ext=som_elem[j] ;
<a name="l00290"></a>00290                       <span class="keywordflow">break</span>;
<a name="l00291"></a>00291                     }
<a name="l00292"></a>00292                 }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;3; j++)
<a name="l00295"></a>00295                 {
<a name="l00296"></a>00296                   pt0[j]=coord(som_face[0],j);
<a name="l00297"></a>00297                   pt1[j]=coord(som_face[1],j);
<a name="l00298"></a>00298                   pt2[j]=coord(som_face[2],j);
<a name="l00299"></a>00299                   vect_int[j]=coord(som_ext,j)-pt0[j];
<a name="l00300"></a>00300                 }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302               <a class="code" href="ExtrudeParoi_8cpp.html#a079c4e51b46ed2d1e8690326e2feda3e">calcul_normal_norme2</a>(pt0,pt1,pt2,normale);
<a name="l00303"></a>00303               <span class="keywordtype">double</span> dist_paroi = <a class="code" href="ArrOfDouble_8cpp.html#af541bfdadae7483016c96f13760598ac" title="Produit scalaire de deux &quot;array&quot;. (dotproduct_array remplace operator* car le nom indique clairemen...">dotproduct_array</a>(normale,vect_int);
<a name="l00304"></a>00304               <span class="keywordflow">if</span> (dist_paroi&lt;0.) normale *=-1.;
<a name="l00305"></a>00305 
<a name="l00306"></a>00306               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;3; k++)
<a name="l00307"></a>00307                 {
<a name="l00308"></a>00308                   <span class="keywordtype">int</span> som=som_face[k];
<a name="l00309"></a>00309                   dmin_som(som) = <a class="code" href="Double_8h.html#a04e03b7aad55468a8b8eae326087338a">dmin</a>(dmin_som(som),<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(dist_paroi));
<a name="l00310"></a>00310                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;3; j++) normale_som(som,j) += normale(j);
<a name="l00311"></a>00311                 }
<a name="l00312"></a>00312             }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314         }<span class="comment">//if(nomfr==nom_front)</span>
<a name="l00315"></a>00315     }<span class="comment">//for (l&lt;zone.nb_front_Cl()</span>
<a name="l00316"></a>00316 
<a name="l00317"></a>00317   <a class="code" href="ExtrudeParoi_8cpp.html#abbc681e7bcbc245e215b000dde1c22f5">calcul_tab_norme</a>(normale_som);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;minimum distance node-wall : &quot;</span>&lt;&lt; dmin_som.<a class="code" href="classDoubleVect.html#a7b957db42076f2748265521dbb97c150">mp_min_vect</a>()&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00320"></a>00320   <span class="keywordflow">if</span>(<a class="code" href="classExtrudeParoi.html#ade0b94d0031f9a6738ca60951ce755c6">type</a>==1) <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;thickness of the layer &quot;</span>&lt;&lt; ep_abs[<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>-1] &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00321"></a>00321 
<a name="l00322"></a>00322   <span class="keywordflow">if</span>(<a class="code" href="classExtrudeParoi.html#ade0b94d0031f9a6738ca60951ce755c6">type</a>==1 &amp;&amp; (dmin_som.<a class="code" href="classDoubleVect.html#a7b957db42076f2748265521dbb97c150">mp_min_vect</a>()&lt;=ep_abs[<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>-1]))
<a name="l00323"></a>00323     {
<a name="l00324"></a>00324       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error !! The thickness of the layer is greater than the minimum distance node-wall&quot;</span> &lt;&lt; finl;
<a name="l00325"></a>00325       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00326"></a>00326     }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="comment">// Recherche des aretes de nom_front partagee avec d&#39;autres frontieres</span>
<a name="l00329"></a>00329 <span class="comment">//</span>
<a name="l00330"></a>00330 
<a name="l00331"></a>00331   <a class="code" href="Array__tools_8cpp.html#a4cfd65b3398623b2011557f6f029f8e6" title="tri lexicographique du tableau tab (par ordre croissant de la premiere colonne, si premiere colonne i...">tri_lexicographique_tableau</a>(som_arete);
<a name="l00332"></a>00332   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> som_arete_bord(som_arete.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0),3);
<a name="l00333"></a>00333 
<a name="l00334"></a>00334   <span class="keywordtype">int</span> nba=som_arete.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00335"></a>00335   <span class="keywordtype">int</span> compt=0;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1; i&lt;nba; i++)
<a name="l00338"></a>00338     {
<a name="l00339"></a>00339       <span class="keywordflow">if</span>( (som_arete(i,0)==som_arete(i-1,0)) &amp;&amp; (som_arete(i,1)==som_arete(i-1,1)) ) i++;
<a name="l00340"></a>00340       <span class="keywordflow">else</span>
<a name="l00341"></a>00341         {
<a name="l00342"></a>00342           som_arete_bord(compt,0)=som_arete(i-1,0);
<a name="l00343"></a>00343           som_arete_bord(compt,1)=som_arete(i-1,1);
<a name="l00344"></a>00344           compt++;
<a name="l00345"></a>00345 
<a name="l00346"></a>00346           <span class="keywordflow">if</span>(i==nba)
<a name="l00347"></a>00347             {
<a name="l00348"></a>00348               som_arete_bord(compt,0)=som_arete(i,0);
<a name="l00349"></a>00349               som_arete_bord(compt,1)=som_arete(i,1);
<a name="l00350"></a>00350               compt++;
<a name="l00351"></a>00351             }
<a name="l00352"></a>00352         }
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355   <span class="keywordtype">int</span> nba_bord=compt;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357   som_arete_bord.resize(nba_bord,3);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> corresp_bord(nba_bord);
<a name="l00360"></a>00360   corresp_bord=-1;
<a name="l00361"></a>00361 
<a name="l00362"></a>00362   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_front=0; num_front&lt;zone.<a class="code" href="classZone.html#a9bf185c52ad1809d954bba670d9aed8a" title="Renvoie le nombre de bords + le nombre de raccords + le nombre de faces frontieres internes...">nb_front_Cl</a>(); num_front++)
<a name="l00363"></a>00363     {
<a name="l00364"></a>00364       <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; fr=zone.<a class="code" href="classZone.html#ac338b119d4b0bc4f510a223b9086fe5e">frontiere</a>(num_front);
<a name="l00365"></a>00365       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nomfr=fr.<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>();
<a name="l00366"></a>00366 
<a name="l00367"></a>00367       <span class="keywordflow">if</span>(nomfr!=<a class="code" href="classExtrudeParoi.html#ada4dfdc9276d7ee0ac37a2107b926a1f">nom_front</a>)
<a name="l00368"></a>00368         {
<a name="l00369"></a>00369           <span class="keywordtype">int</span> nbfaces=fr.<a class="code" href="classFrontiere.html#aa073fe9dbdddde59471ee7032b256aa2" title="Renvoie le nombre de faces de la frontiere.">nb_faces</a>();
<a name="l00370"></a>00370           <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; sommet=fr.<a class="code" href="classFrontiere.html#a6d1f96137ddae39a46985a8c3e53bcf5" title="Renvoie les sommets des faces de la frontiere.">les_sommets_des_faces</a>();
<a name="l00371"></a>00371 
<a name="l00372"></a>00372           <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> som_face(3); <span class="comment">//!&lt; sommets de la face frontiere</span>
<a name="l00373"></a>00373 <span class="comment"></span>
<a name="l00374"></a>00374           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbfaces; i++)
<a name="l00375"></a>00375             {
<a name="l00376"></a>00376               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;3; j++) som_face[j]=sommet(i,j);
<a name="l00377"></a>00377 
<a name="l00378"></a>00378               <span class="keywordtype">int</span> stot=som_face[0]+som_face[1]+som_face[2];
<a name="l00379"></a>00379 
<a name="l00380"></a>00380               <span class="keywordtype">int</span> som0=<a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(som_face);
<a name="l00381"></a>00381               <span class="keywordtype">int</span> som2=<a class="code" href="ArrOfDouble_8cpp.html#a95241fccf4bed7fb7a4e2340b7735f14" title="Retourne la valeur maximale.">max_array</a>(som_face);
<a name="l00382"></a>00382               <span class="keywordtype">int</span> som1=stot-som0-som2;
<a name="l00383"></a>00383 
<a name="l00384"></a>00384               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;nba_bord; j++)
<a name="l00385"></a>00385                 {
<a name="l00386"></a>00386                   <span class="keywordflow">if</span>((som_arete_bord(j,0)==som0) &amp;&amp; (som_arete_bord(j,1)==som1))
<a name="l00387"></a>00387                     {
<a name="l00388"></a>00388                       som_arete_bord(j,2)=som2;
<a name="l00389"></a>00389                       corresp_bord(j)=num_front;
<a name="l00390"></a>00390                       <span class="keywordflow">break</span>;
<a name="l00391"></a>00391                     }
<a name="l00392"></a>00392                   <span class="keywordflow">if</span>((som_arete_bord(j,0)==som0) &amp;&amp; (som_arete_bord(j,1)==som2))
<a name="l00393"></a>00393                     {
<a name="l00394"></a>00394                       som_arete_bord(j,2)=som1;
<a name="l00395"></a>00395                       corresp_bord(j)=num_front;
<a name="l00396"></a>00396                       <span class="keywordflow">break</span>;
<a name="l00397"></a>00397                     }
<a name="l00398"></a>00398                   <span class="keywordflow">if</span>((som_arete_bord(j,0)==som1) &amp;&amp; (som_arete_bord(j,1)==som2))
<a name="l00399"></a>00399                     {
<a name="l00400"></a>00400                       som_arete_bord(j,2)=som0;
<a name="l00401"></a>00401                       corresp_bord(j)=num_front;
<a name="l00402"></a>00402                       <span class="keywordflow">break</span>;
<a name="l00403"></a>00403                     }
<a name="l00404"></a>00404                 }
<a name="l00405"></a>00405             }
<a name="l00406"></a>00406         }
<a name="l00407"></a>00407     }
<a name="l00408"></a>00408 
<a name="l00409"></a>00409   <span class="keywordflow">if</span>(<a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(corresp_bord)==-1)
<a name="l00410"></a>00410     {
<a name="l00411"></a>00411       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Problem with the boundary edges !!&quot;</span> &lt;&lt; finl;
<a name="l00412"></a>00412       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00413"></a>00413     }
<a name="l00414"></a>00414 
<a name="l00415"></a>00415 
<a name="l00416"></a>00416 <span class="comment">// projection de la normale de bord dans le plan de la frontiere voisine de bord</span>
<a name="l00417"></a>00417 <span class="comment">//</span>
<a name="l00418"></a>00418 
<a name="l00419"></a>00419   <span class="keywordflow">if</span>(<a class="code" href="classExtrudeParoi.html#a06532288b8780cd2a37e499fe40b0def">projection_normale_bord</a>)
<a name="l00420"></a>00420     {
<a name="l00421"></a>00421       <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> pt1(3),pt2(3),pt3(3);
<a name="l00422"></a>00422       <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> n1(3),n2(3),n_proj(3);
<a name="l00423"></a>00423 
<a name="l00424"></a>00424       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nba_bord; i++)
<a name="l00425"></a>00425         {
<a name="l00426"></a>00426           <span class="keywordtype">int</span> s1 = som_arete_bord(i,0);
<a name="l00427"></a>00427           <span class="keywordtype">int</span> s2 = som_arete_bord(i,1);
<a name="l00428"></a>00428           <span class="keywordtype">int</span> s3 = som_arete_bord(i,2);
<a name="l00429"></a>00429 
<a name="l00430"></a>00430           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;3; j++)
<a name="l00431"></a>00431             {
<a name="l00432"></a>00432               n1[j]=normale_som(s1,j) ;
<a name="l00433"></a>00433               n2[j]=normale_som(s2,j) ;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435               pt1[j]=coord(s1,j);
<a name="l00436"></a>00436               pt2[j]=coord(s2,j);
<a name="l00437"></a>00437               pt3[j]=coord(s3,j);
<a name="l00438"></a>00438             }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440           <a class="code" href="ExtrudeParoi_8cpp.html#a079c4e51b46ed2d1e8690326e2feda3e">calcul_normal_norme2</a>(pt1,pt2,pt3,n_proj);
<a name="l00441"></a>00441           <span class="keywordtype">double</span> ori = <a class="code" href="ArrOfDouble_8cpp.html#af541bfdadae7483016c96f13760598ac" title="Produit scalaire de deux &quot;array&quot;. (dotproduct_array remplace operator* car le nom indique clairemen...">dotproduct_array</a>(n1,n_proj);
<a name="l00442"></a>00442           <span class="keywordflow">if</span> (ori&lt;0.) n_proj *=-1.;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444           <span class="keywordtype">double</span> psc1=<a class="code" href="ArrOfDouble_8cpp.html#af541bfdadae7483016c96f13760598ac" title="Produit scalaire de deux &quot;array&quot;. (dotproduct_array remplace operator* car le nom indique clairemen...">dotproduct_array</a>(n1,n_proj);
<a name="l00445"></a>00445           <span class="keywordtype">double</span> psc2=<a class="code" href="ArrOfDouble_8cpp.html#af541bfdadae7483016c96f13760598ac" title="Produit scalaire de deux &quot;array&quot;. (dotproduct_array remplace operator* car le nom indique clairemen...">dotproduct_array</a>(n2,n_proj);
<a name="l00446"></a>00446 
<a name="l00447"></a>00447           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;3; j++)
<a name="l00448"></a>00448             {
<a name="l00449"></a>00449               normale_som(s1,j) -= psc1*n_proj(j);
<a name="l00450"></a>00450               normale_som(s2,j) -= psc2*n_proj(j);
<a name="l00451"></a>00451             }
<a name="l00452"></a>00452         }
<a name="l00453"></a>00453     }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455 <span class="comment">// creation des sommets de la couche prismatique</span>
<a name="l00456"></a>00456 <span class="comment">//</span>
<a name="l00457"></a>00457 
<a name="l00458"></a>00458   <span class="keywordtype">int</span> nb_som = List_som.<a class="code" href="classIntList.html#ae8b23a7b17410d1e0bdcc20da0594f9b" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00459"></a>00459   <span class="keywordtype">int</span> newnbsom = oldnbsom+<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>*nb_som;
<a name="l00460"></a>00460 
<a name="l00461"></a>00461   new_soms.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(newnbsom,3);
<a name="l00462"></a>00462   new_soms.<a class="code" href="classArrOfDouble.html#a2fcb2a2d3b59425c6cb37526ea6af6a3" title="Copie les elements source[first_element_source + i] dans les elements (*this)[first_element_dest + i]...">inject_array</a>(coord);
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_som; i++)
<a name="l00465"></a>00465     {
<a name="l00466"></a>00466       <span class="keywordtype">int</span> som=List_som[i];
<a name="l00467"></a>00467 
<a name="l00468"></a>00468       <span class="keywordflow">if</span>(<a class="code" href="classExtrudeParoi.html#ade0b94d0031f9a6738ca60951ce755c6">type</a>==0) <span class="comment">//!&lt; traduction de l&#39;epaisseur relative en epaisseur absolue</span>
<a name="l00469"></a>00469 <span class="comment"></span>        {
<a name="l00470"></a>00470           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>; j++) ep_abs[j]=<a class="code" href="classExtrudeParoi.html#aaf9d8afe404fbdf5b32038b208d191d1">epaisseur</a>[j]*dmin_som(som);
<a name="l00471"></a>00471         }
<a name="l00472"></a>00472 
<a name="l00473"></a>00473       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;3; j++)
<a name="l00474"></a>00474         {
<a name="l00475"></a>00475           new_soms(oldnbsom+i,j) = new_soms(som,j); <span class="comment">//!&lt; creation des nouveaux sommets rattaches a la paroi</span>
<a name="l00476"></a>00476 <span class="comment"></span>
<a name="l00477"></a>00477           <span class="keywordflow">if</span>(<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>&gt;1)                               <span class="comment">//!&lt; creation des nouveaux sommets rattaches aux couches successives</span>
<a name="l00478"></a>00478 <span class="comment"></span>            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>-1; k++)
<a name="l00479"></a>00479               new_soms(oldnbsom+(k+1)*nb_som+i,j) = new_soms(som,j)+ep_abs[k]*normale_som(som,j);
<a name="l00480"></a>00480           new_soms(som,j) += ep_abs[nb_couche-1]*normale_som(som,j); <span class="comment">//!&lt; translation des anciens sommets</span>
<a name="l00481"></a>00481 <span class="comment"></span>        }
<a name="l00482"></a>00482     }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484 <span class="comment">// creation des elements de la couche prismatique</span>
<a name="l00485"></a>00485 <span class="comment">//</span>
<a name="l00486"></a>00486 
<a name="l00487"></a>00487   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> som_front;
<a name="l00488"></a>00488 
<a name="l00489"></a>00489   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l=0; l&lt;zone.<a class="code" href="classZone.html#a9bf185c52ad1809d954bba670d9aed8a" title="Renvoie le nombre de bords + le nombre de raccords + le nombre de faces frontieres internes...">nb_front_Cl</a>(); l++)
<a name="l00490"></a>00490     {
<a name="l00491"></a>00491       <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; fr=zone.<a class="code" href="classZone.html#ac338b119d4b0bc4f510a223b9086fe5e">frontiere</a>(l);
<a name="l00492"></a>00492       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nomfr=fr.<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>();
<a name="l00493"></a>00493 
<a name="l00494"></a>00494       <span class="keywordflow">if</span>(nomfr==<a class="code" href="classExtrudeParoi.html#ada4dfdc9276d7ee0ac37a2107b926a1f">nom_front</a>)
<a name="l00495"></a>00495         {
<a name="l00496"></a>00496           <span class="keywordtype">int</span> nbfaces=fr.<a class="code" href="classFrontiere.html#aa073fe9dbdddde59471ee7032b256aa2" title="Renvoie le nombre de faces de la frontiere.">nb_faces</a>();
<a name="l00497"></a>00497           <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; sommet=fr.<a class="code" href="classFrontiere.html#a6d1f96137ddae39a46985a8c3e53bcf5" title="Renvoie les sommets des faces de la frontiere.">les_sommets_des_faces</a>();
<a name="l00498"></a>00498 
<a name="l00499"></a>00499           som_front.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbfaces,3);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501           <span class="keywordtype">int</span> cpt=0;
<a name="l00502"></a>00502 
<a name="l00503"></a>00503           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbfaces; i++)
<a name="l00504"></a>00504             {
<a name="l00505"></a>00505               <span class="keywordtype">int</span> s1=sommet(i,0);
<a name="l00506"></a>00506               <span class="keywordtype">int</span> s2=sommet(i,1);
<a name="l00507"></a>00507               <span class="keywordtype">int</span> s3=sommet(i,2);
<a name="l00508"></a>00508 
<a name="l00509"></a>00509               <span class="keywordtype">int</span> stot=s1+s2+s3;
<a name="l00510"></a>00510 
<a name="l00511"></a>00511               <span class="keywordtype">int</span> i1=<a class="code" href="Double_8h.html#a2f8edc4561e9744ed4233b205fa7ec32">min</a>(<a class="code" href="Double_8h.html#a2f8edc4561e9744ed4233b205fa7ec32">min</a>(s1,s2),s3);
<a name="l00512"></a>00512               <span class="keywordtype">int</span> i3=<a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(<a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(s1,s2),s3);
<a name="l00513"></a>00513               <span class="keywordtype">int</span> i2=stot-i1-i3;
<a name="l00514"></a>00514 
<a name="l00515"></a>00515               <span class="keywordtype">int</span> i4=oldnbsom+List_som.<a class="code" href="classIntList.html#a3a1d0e3afbde58ba6c58653a3e9a315f" title="renvoie le rang d&#39;un element dans la liste si un element apparait plusieurs fois, renvoie le rang du ...">rang</a>(i1);
<a name="l00516"></a>00516               <span class="keywordtype">int</span> i5=oldnbsom+List_som.<a class="code" href="classIntList.html#a3a1d0e3afbde58ba6c58653a3e9a315f" title="renvoie le rang d&#39;un element dans la liste si un element apparait plusieurs fois, renvoie le rang du ...">rang</a>(i2);
<a name="l00517"></a>00517               <span class="keywordtype">int</span> i6=oldnbsom+List_som.<a class="code" href="classIntList.html#a3a1d0e3afbde58ba6c58653a3e9a315f" title="renvoie le rang d&#39;un element dans la liste si un element apparait plusieurs fois, renvoie le rang du ...">rang</a>(i3);
<a name="l00518"></a>00518 
<a name="l00519"></a>00519               som_front(i,0)=i4;
<a name="l00520"></a>00520               som_front(i,1)=i5;
<a name="l00521"></a>00521               som_front(i,2)=i6;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>; k++)
<a name="l00524"></a>00524                 {
<a name="l00525"></a>00525 <span class="comment">// sommets sup de la couche</span>
<a name="l00526"></a>00526 
<a name="l00527"></a>00527                   <span class="keywordtype">int</span> ii1=i4+(k+1)*nb_som;
<a name="l00528"></a>00528                   <span class="keywordtype">int</span> ii2=i5+(k+1)*nb_som;
<a name="l00529"></a>00529                   <span class="keywordtype">int</span> ii3=i6+(k+1)*nb_som;
<a name="l00530"></a>00530 
<a name="l00531"></a>00531                   <span class="keywordflow">if</span>(k==(nb_couche-1))
<a name="l00532"></a>00532                     {
<a name="l00533"></a>00533                       ii1=i1;
<a name="l00534"></a>00534                       ii2=i2;
<a name="l00535"></a>00535                       ii3=i3;
<a name="l00536"></a>00536                     }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 <span class="comment">// sommets inf de la couche</span>
<a name="l00539"></a>00539 
<a name="l00540"></a>00540                   <span class="keywordtype">int</span> ii4=i4+k*nb_som;
<a name="l00541"></a>00541                   <span class="keywordtype">int</span> ii5=i5+k*nb_som;
<a name="l00542"></a>00542                   <span class="keywordtype">int</span> ii6=i6+k*nb_som;
<a name="l00543"></a>00543 
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 <span class="comment">// connectivite sommets-element inspiree de Extruder_en3</span>
<a name="l00546"></a>00546 
<a name="l00547"></a>00547                   new_elems(oldsz+cpt,0) = ii1;
<a name="l00548"></a>00548                   new_elems(oldsz+cpt,1) = ii2;
<a name="l00549"></a>00549                   new_elems(oldsz+cpt,2) = ii3;
<a name="l00550"></a>00550                   new_elems(oldsz+cpt,3) = ii6;
<a name="l00551"></a>00551                   cpt++;
<a name="l00552"></a>00552 
<a name="l00553"></a>00553                   new_elems(oldsz+cpt,0) = ii1;
<a name="l00554"></a>00554                   new_elems(oldsz+cpt,1) = ii2;
<a name="l00555"></a>00555                   new_elems(oldsz+cpt,2) = ii5;
<a name="l00556"></a>00556                   new_elems(oldsz+cpt,3) = ii6;
<a name="l00557"></a>00557                   cpt++;
<a name="l00558"></a>00558 
<a name="l00559"></a>00559                   new_elems(oldsz+cpt,0) = ii1;
<a name="l00560"></a>00560                   new_elems(oldsz+cpt,1) = ii4;
<a name="l00561"></a>00561                   new_elems(oldsz+cpt,2) = ii5;
<a name="l00562"></a>00562                   new_elems(oldsz+cpt,3) = ii6;
<a name="l00563"></a>00563                   cpt++;
<a name="l00564"></a>00564 
<a name="l00565"></a>00565                   <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,oldsz,0);
<a name="l00566"></a>00566                 }
<a name="l00567"></a>00567             }
<a name="l00568"></a>00568         }<span class="comment">//if(nomfr==nom_front)</span>
<a name="l00569"></a>00569     }<span class="comment">//for (l&lt;zone.nb_front_Cl()</span>
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 
<a name="l00572"></a>00572   coord.<a class="code" href="classDoubleTab.html#acb465ae8c9b24990db18002693b42dea" title="met le tableau dans l&#39;etat obtenu par le constructeur par defaut voir DoubleVect::reset()">reset</a>();
<a name="l00573"></a>00573   dom.<a class="code" href="classDomaine.html#a9e067ee24e1952315722374190c8cb06" title="Ajoute des noeuds au domaine avec elimination des noeuds double au retour nums contient les nouveaux ...">ajouter</a>(new_soms);
<a name="l00574"></a>00574   les_elems.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(new_elems);
<a name="l00575"></a>00575 
<a name="l00576"></a>00576 <span class="comment">// Reconstruction de l&#39;octree</span>
<a name="l00577"></a>00577   zone.<a class="code" href="classZone.html#a8ee51194c663be29651925c88f904d76">invalide_octree</a>();
<a name="l00578"></a>00578   zone.<a class="code" href="classZone.html#ac1ff391994a372815b7f88c3fdc39f55" title="Type les elements de la zone avec le nom passe en parametre. Et associe le type d&#39;element a la zone...">typer</a>(<span class="stringliteral">&quot;Tetraedre&quot;</span>);
<a name="l00579"></a>00579 
<a name="l00580"></a>00580   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;  Reconstruction of the Octree&quot;</span> &lt;&lt; finl;
<a name="l00581"></a>00581   zone.<a class="code" href="classZone.html#a492c53ea54616079fb65c18f7726ebc9">construit_octree</a>();
<a name="l00582"></a>00582   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;  Octree rebuilt&quot;</span> &lt;&lt; finl;
<a name="l00583"></a>00583 
<a name="l00584"></a>00584 
<a name="l00585"></a>00585   {
<a name="l00586"></a>00586     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Reconstruction of the boundaries&quot;</span> &lt;&lt; finl;
<a name="l00587"></a>00587     <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a>) curseur(zone.<a class="code" href="classZone.html#a4bc04163903c004c5c1383eaa5fa844d" title="Renvoie la liste des bords de la zone. (version const)">faces_bord</a>());;;
<a name="l00588"></a>00588     <span class="keywordtype">int</span> num_front=0;
<a name="l00589"></a>00589     <span class="keywordflow">while</span>(curseur)
<a name="l00590"></a>00590       {
<a name="l00591"></a>00591         <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; lesfacesbord=curseur-&gt;faces();
<a name="l00592"></a>00592         lesfacesbord.<a class="code" href="classFaces.html#a503fe687811445373b75dd8ac0991ec2" title="Type les faces.">typer</a>(<a class="code" href="classFaces.html#a62b7dbd959f99b997dc8111210ec8458a8d0ad1b612ea277393c4ce895b4ce0af">Faces::triangle_3D</a>);
<a name="l00593"></a>00593         <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; sommets=lesfacesbord.<a class="code" href="classFaces.html#a07b8d8db9e3d656b93a21a49c063430c">les_sommets</a>();
<a name="l00594"></a>00594         <span class="keywordflow">if</span>(curseur-&gt;le_nom()==<a class="code" href="classExtrudeParoi.html#ada4dfdc9276d7ee0ac37a2107b926a1f">nom_front</a>)
<a name="l00595"></a>00595           {
<a name="l00596"></a>00596             sommets.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(som_front);
<a name="l00597"></a>00597           }
<a name="l00598"></a>00598         <span class="keywordflow">else</span>
<a name="l00599"></a>00599           {
<a name="l00600"></a>00600             <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> som_front2(sommets);
<a name="l00601"></a>00601 
<a name="l00602"></a>00602             <span class="keywordtype">int</span> nbf =lesfacesbord.<a class="code" href="classFaces.html#a64d898edb20c3687d357018f1821c50a" title="Renvoie le nombre de Faces.">nb_faces</a>();
<a name="l00603"></a>00603             <span class="keywordtype">int</span> nbf2=0;
<a name="l00604"></a>00604 
<a name="l00605"></a>00605             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nba_bord; i++)
<a name="l00606"></a>00606               <span class="keywordflow">if</span>(corresp_bord(i)==num_front) nbf2++;
<a name="l00607"></a>00607 
<a name="l00608"></a>00608             som_front2.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbf+2*<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>*nbf2,3);
<a name="l00609"></a>00609 
<a name="l00610"></a>00610             <span class="keywordtype">int</span> compt2=nbf;
<a name="l00611"></a>00611 
<a name="l00612"></a>00612             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nba_bord; i++)
<a name="l00613"></a>00613               <span class="keywordflow">if</span>(corresp_bord(i)==num_front)
<a name="l00614"></a>00614                 {
<a name="l00615"></a>00615                   <span class="keywordtype">int</span> s1=som_arete_bord(i,0);
<a name="l00616"></a>00616                   <span class="keywordtype">int</span> s2=som_arete_bord(i,1);
<a name="l00617"></a>00617 
<a name="l00618"></a>00618                   <span class="keywordtype">int</span> s1_new=oldnbsom+List_som.<a class="code" href="classIntList.html#a3a1d0e3afbde58ba6c58653a3e9a315f" title="renvoie le rang d&#39;un element dans la liste si un element apparait plusieurs fois, renvoie le rang du ...">rang</a>(s1);
<a name="l00619"></a>00619                   <span class="keywordtype">int</span> s2_new=oldnbsom+List_som.<a class="code" href="classIntList.html#a3a1d0e3afbde58ba6c58653a3e9a315f" title="renvoie le rang d&#39;un element dans la liste si un element apparait plusieurs fois, renvoie le rang du ...">rang</a>(s2);
<a name="l00620"></a>00620 
<a name="l00621"></a>00621                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classExtrudeParoi.html#a9c302c6c822ced769ccf1ffbbaa5b0f0">nb_couche</a>; k++)
<a name="l00622"></a>00622                     {
<a name="l00623"></a>00623 <span class="comment">// sommets sup de la couche</span>
<a name="l00624"></a>00624 
<a name="l00625"></a>00625                       <span class="keywordtype">int</span> s1_sup=s1_new+(k+1)*nb_som;
<a name="l00626"></a>00626                       <span class="keywordtype">int</span> s2_sup=s2_new+(k+1)*nb_som;
<a name="l00627"></a>00627 
<a name="l00628"></a>00628                       <span class="keywordflow">if</span>(k==(nb_couche-1))
<a name="l00629"></a>00629                         {
<a name="l00630"></a>00630                           s1_sup=s1;
<a name="l00631"></a>00631                           s2_sup=s2;
<a name="l00632"></a>00632                         }
<a name="l00633"></a>00633 
<a name="l00634"></a>00634 <span class="comment">// sommets inf de la couche</span>
<a name="l00635"></a>00635 
<a name="l00636"></a>00636                       <span class="keywordtype">int</span> s1_inf=s1_new+k*nb_som;
<a name="l00637"></a>00637                       <span class="keywordtype">int</span> s2_inf=s2_new+k*nb_som;
<a name="l00638"></a>00638 
<a name="l00639"></a>00639 
<a name="l00640"></a>00640                       som_front2(compt2,0)=s1_sup;
<a name="l00641"></a>00641                       som_front2(compt2,1)=s2_sup;
<a name="l00642"></a>00642                       som_front2(compt2,2)=s2_inf;
<a name="l00643"></a>00643                       compt2++;
<a name="l00644"></a>00644 
<a name="l00645"></a>00645                       som_front2(compt2,0)=s1_sup;
<a name="l00646"></a>00646                       som_front2(compt2,1)=s1_inf;
<a name="l00647"></a>00647                       som_front2(compt2,2)=s2_inf;
<a name="l00648"></a>00648                       compt2++;
<a name="l00649"></a>00649                     }
<a name="l00650"></a>00650                 }
<a name="l00651"></a>00651 
<a name="l00652"></a>00652             sommets.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(som_front2);
<a name="l00653"></a>00653           }
<a name="l00654"></a>00654         num_front++;
<a name="l00655"></a>00655         ++curseur;
<a name="l00656"></a>00656       }
<a name="l00657"></a>00657   }
<a name="l00658"></a>00658 
<a name="l00659"></a>00659 }
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:18 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
