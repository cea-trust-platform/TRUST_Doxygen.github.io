<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: Octree_Int Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Octree_Int Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Octree_Int" -->
<p>: Un octree permettant de retrouver des objets ponctuels ou<br/>
parallelipipediques dans un espace 1D, 2D ou 3D et des coordonnees entieres  
 <a href="classOctree__Int.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>&gt;</code></p>

<p><a href="classOctree__Int-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a5a0ea54ef0a1e354d35ac53eb4f743b0">build</a> (const int dimension, const <a class="el" href="classIntTab.html">IntTab</a> &amp;elements_boxes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">construction de l'octree. On donne la dimension (1, 2 ou 3)<br/>
et un tableau d'elements a stocker dans l'octree. Deux possibilites:<br/>
1) les elements sont ponctuels si elements_boxes.dimension(1) == dimension.<br/>
Dans ce cas, chaque element se trouve dans un et un seul octree_floor<br/>
2) les elements sont des parallelipipedes, si elements_boxes.dimension(1) == dimension*2<br/>
Les "dimension" premieres colonnes sont les coordonnees inferieures,<br/>
les "dimension" suivantes sont les coordonnees superieures.<br/>
Un parallelipipede peut etre affecte a plusieurs octree_floor.<br/>
Les coordonnees stockees dans elements_boxes peuvent aller de 0 a coord_max_ inclus.<br/>
Il vaut mieux utiliser toute la plage des entiers en multipliant par un facteur adequat.  <a href="#a5a0ea54ef0a1e354d35ac53eb4f743b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#ab999fee7a1cd43e79011f0013b499a54">search_elements</a> (int x, int y, int z, int &amp;floor_elements_index) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">renvoie la liste des elements contenant potentiellement le point (x,y,z)<br/>
On renvoie n=nombre d'elements de la liste et les elements sont dans<br/>
<a class="el" href="classOctree__Int.html#a80e72913238e8489d9f90ece56e780d6">floor_elements()</a>[index+i] pour 0 &lt;= i &lt; n.<br/>
En realite on renvoie tous les elements qui ont une intersection non vide avec l'octree_floor<br/>
contenant le point (x,y,z)  <a href="#ab999fee7a1cd43e79011f0013b499a54"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a603544a594cacc8bdb1083e4c9dfbd58">search_elements_box</a> (int xmin, int ymin, int zmin, int xmax, int ymax, int zmax, <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;elements) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">cherche les elements ayant potentiellement une intersection non vide avec la<br/>
boite xmin..zmax. Le tableau elements doit etre de type smart_resize(1).<br/>
Les elements peuvent apparaitre plusieurs fois dans le tableau "elements"  <a href="#a603544a594cacc8bdb1083e4c9dfbd58"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#aa4816ea0fb496ee0b1b590d49d92bad6">reset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a80e72913238e8489d9f90ece56e780d6">floor_elements</a> () const </td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a> = 2147483647</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a> = 1073741824</td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832">Octree_Type</a> { <a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>, 
<a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>, 
<a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a25ab41815ad4258e136cab7d4a9633e7">build_octree_recursively</a> (const int octree_center_x, const int octree_center_y, const int octree_center_z, const int octree_half_width, const <a class="el" href="classIntTab.html">IntTab</a> &amp;elements_boxes, <a class="el" href="classVect__ArrOfInt.html">Vect_ArrOfInt</a> &amp;vect_elements_list, const int level, <a class="el" href="classVect__ArrOfInt.html">Vect_ArrOfInt</a> &amp;tmp_elem_flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">octree_center_i est le premier int de la moitie superieure de l'octree dans la direction i.<br/>
octree_half_width est une puissance de 2 egale a octree_center_i-octree_min_i (octree_min_i<br/>
est le premier int inclu dans cet octree dans la direction i)<br/>
Valeur de retour: octree_id de l'octree construit (void octree_structure_)  <a href="#a25ab41815ad4258e136cab7d4a9633e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a2b5d09243c69bf157fe2c6c81ad66f1b">build_octree_floor</a> (const <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;elements_list)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">construit un octree_floor avec la liste d'elements donnee et<br/>
renvoie l'octree_id de cet octree_floor  <a href="#a2b5d09243c69bf157fe2c6c81ad66f1b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a31459ec8946792be867506e19586943d">search_octree_floor</a> (int x_pos, int y_pos, int z_pos) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">renvoie l'octree_id de l'octree_floor contenant le sommet (x,y,z)<br/>
(peut renvoyer l'octree EMPTY)  <a href="#a31459ec8946792be867506e19586943d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#adfe03cd1d654fe388d1a6fc5b783994d">search_elements_box_floor</a> (<a class="el" href="structIntBoxData.html">IntBoxData</a> &amp;boxdata, int octree_floor_id) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">ajoute des elements de l'octree_floor a boxdata.elements_  <a href="#adfe03cd1d654fe388d1a6fc5b783994d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a9c60dccfe4bf346acd90b3f734f46c08">search_elements_box_recursively</a> (<a class="el" href="structIntBoxData.html">IntBoxData</a> &amp;boxdata, int octree_id, int cx, int cy, int cz, int half_width) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">cherche recursivement les elements inclus dans la boite<br/>
boxdata pour l'octree_id donne, de centre cx, cy, cz.  <a href="#a9c60dccfe4bf346acd90b3f734f46c08"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965">octree_id</a> (int index, <a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832">Octree_Type</a> type)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">construction d'un octree_id (voir octree_structure_)<br/>
Si type==EMPTY, on l'octree_id est 0<br/>
Si type==OCTREE, on suppose que index est un indice dans octree_structure_<br/>
Si type==FLOOR, on suppose que index est un indice dans floor_elements_  <a href="#a3207ae64c65f9e966456170c6ea00965"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a3f6f9925773084c01590aa8c9320af57">octree_index</a> (int octree_id, <a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832">Octree_Type</a> type)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">calcul de l'index de l'octree dans octree_structure ou floor_elements<br/>
en fonction du type de l'octree et de son octree_id.<br/>
En general on a deja determine le type avant, on le passe en parametre pour optimiser.  <a href="#a3f6f9925773084c01590aa8c9320af57"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832">Octree_Type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a51b26021cc70040b366ecb76aedbc875">octree_type</a> (int octree_id)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Renvoie le type d'un octree en fonction de son octree_id.  <a href="#a51b26021cc70040b366ecb76aedbc875"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#ad16fcc42e2a07401843733cb718867c3">nb_elements_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classIntTab.html">IntTab</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classArrOfInt.html">ArrOfInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>: Un octree permettant de retrouver des objets ponctuels ou<br/>
parallelipipediques dans un espace 1D, 2D ou 3D et des coordonnees entieres </p>

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00032">32</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a0365c96e0b36478c6dd4b11fe41c6832"></a><!-- doxytag: member="Octree_Int::Octree_Type" ref="a0365c96e0b36478c6dd4b11fe41c6832" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832">Octree_Int::Octree_Type</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e"></a><!-- doxytag: member="EMPTY" ref="a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e" args="" -->EMPTY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8"></a><!-- doxytag: member="OCTREE" ref="a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8" args="" -->OCTREE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178"></a><!-- doxytag: member="FLOOR" ref="a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178" args="" -->FLOOR</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00070">70</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a> };
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a5a0ea54ef0a1e354d35ac53eb4f743b0"></a><!-- doxytag: member="Octree_Int::build" ref="a5a0ea54ef0a1e354d35ac53eb4f743b0" args="(const int dimension, const IntTab &amp;elements_boxes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Octree_Int::build </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>dimension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIntTab.html">IntTab</a> &amp;&#160;</td>
          <td class="paramname"><em>elements_boxes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>construction de l'octree. On donne la dimension (1, 2 ou 3)<br/>
et un tableau d'elements a stocker dans l'octree. Deux possibilites:<br/>
1) les elements sont ponctuels si elements_boxes.dimension(1) == dimension.<br/>
Dans ce cas, chaque element se trouve dans un et un seul octree_floor<br/>
2) les elements sont des parallelipipedes, si elements_boxes.dimension(1) == dimension*2<br/>
Les "dimension" premieres colonnes sont les coordonnees inferieures,<br/>
les "dimension" suivantes sont les coordonnees superieures.<br/>
Un parallelipipede peut etre affecte a plusieurs octree_floor.<br/>
Les coordonnees stockees dans elements_boxes peuvent aller de 0 a coord_max_ inclus.<br/>
Il vaut mieux utiliser toute la plage des entiers en multipliant par un facteur adequat. </p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00088">88</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8cpp_source.html#l00316">build_octree_recursively()</a>, <a class="el" href="Octree__Int_8h_source.html#l00045">coord_max_</a>, <a class="el" href="IntTab_8h_source.html#l00233">IntTab::dimension()</a>, <a class="el" href="Octree__Int_8h_source.html#l00092">floor_elements_</a>, <a class="el" href="ArrOfDouble_8cpp_source.html#l00814">max_array()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00025">max_levels_</a>, <a class="el" href="ArrOfDouble_8cpp_source.html#l00792">min_array()</a>, <a class="el" href="Octree__Int_8h_source.html#l00079">nb_elements_</a>, <a class="el" href="Array__base_8h_source.html#l00038">Array_base::NOCOPY_NOINIT</a>, <a class="el" href="Octree__Int_8h_source.html#l00086">octree_structure_</a>, <a class="el" href="IntTab_8cpp_source.html#l00353">IntTab::resize()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, <a class="el" href="Octree__Int_8h_source.html#l00050">root_octree_half_width_</a>, <a class="el" href="Octree__Int_8h_source.html#l00077">root_octree_id_</a>, <a class="el" href="ArrOfInt_8cpp_source.html#l00443">ArrOfInt::set_smart_resize()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>, and <a class="el" href="Vect_8h_source.html#l00026">VECT</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00205">Octree_Double::build_elements()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00154">Octree_Double::build_nodes()</a>.</p>
<div class="fragment"><pre class="fragment">{
  assert(dimension &gt;= 1 &amp;&amp; dimension &lt;= 3);
  assert(elements_boxes.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1) == dimension
         || elements_boxes.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1) == dimension * 2 );

  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_elems = elements_boxes.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
  <a class="code" href="classOctree__Int.html#ad16fcc42e2a07401843733cb718867c3">nb_elements_</a> = nb_elems;

  <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
  <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
  <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_octrees = 1 &lt;&lt; dimension;
  <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(0, nb_octrees);

  assert(elements_boxes.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() == 0
         || (<a class="code" href="ArrOfDouble_8cpp.html#abd3998749a1a8dab00dd6ac1798327fb" title="Retourne la valeur minimale.">min_array</a>(elements_boxes) &gt;= 0 &amp;&amp; <a class="code" href="ArrOfDouble_8cpp.html#a95241fccf4bed7fb7a4e2340b7735f14" title="Retourne la valeur maximale.">max_array</a>(elements_boxes) &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>));

  <a class="code" href="Vect_8h.html#adc7c7b04809c9aec2cb897cd2ef06378">VECT</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>) tmp_elem_flags(<a class="code" href="Octree__Int_8cpp.html#acfcaaf9379615876ac0c423735bb0eb6" title="1 de plus que le nombre de bits=1 dans coords_max La valeur suivante doit etre une puissance de deux...">max_levels_</a>);
  <a class="code" href="Vect_8h.html#adc7c7b04809c9aec2cb897cd2ef06378">VECT</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>) tmp_elem_list(max_levels_);
  for (<span class="keywordtype">int</span> i = 0; i &lt; max_levels_; i++)
    {
      tmp_elem_flags[i].set_smart_resize(1);
      tmp_elem_list[i].set_smart_resize(1);
    }
  <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; elements_list = tmp_elem_list[0];
  elements_list.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(nb_elems, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_elems; i++)
    elements_list[i] = i;

  <a class="code" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a> = <a class="code" href="classOctree__Int.html#a25ab41815ad4258e136cab7d4a9633e7" title="octree_center_i est le premier int de la moitie superieure de l&#39;octree dans la direction i...">build_octree_recursively</a>(<a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>,<a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>,<a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>,
                                             <a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>,
                                             elements_boxes,
                                             tmp_elem_list,
                                             0,
                                             tmp_elem_flags);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2b5d09243c69bf157fe2c6c81ad66f1b"></a><!-- doxytag: member="Octree_Int::build_octree_floor" ref="a2b5d09243c69bf157fe2c6c81ad66f1b" args="(const ArrOfInt &amp;elements_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Int::build_octree_floor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>elements_list</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>construit un octree_floor avec la liste d'elements donnee et<br/>
renvoie l'octree_id de cet octree_floor </p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00300">300</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Array__base_8h_source.html#l00038">Array_base::COPY_NOINIT</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">FLOOR</a>, <a class="el" href="Octree__Int_8h_source.html#l00092">floor_elements_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00035">octree_id()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, and <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00316">build_octree_recursively()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_elems = elements_list.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keyword">const</span> <span class="keywordtype">int</span> index = <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(index + nb_elems + 1, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffac85954f9768f1ed2b14e58cea8ddb7c5">ArrOfInt::COPY_NOINIT</a>);
  <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>[index] = nb_elems;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_elems; i++)
    <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>[index + 1 + i] = elements_list[i];
  <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a>(index, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a25ab41815ad4258e136cab7d4a9633e7"></a><!-- doxytag: member="Octree_Int::build_octree_recursively" ref="a25ab41815ad4258e136cab7d4a9633e7" args="(const int octree_center_x, const int octree_center_y, const int octree_center_z, const int octree_half_width, const IntTab &amp;elements_boxes, Vect_ArrOfInt &amp;vect_elements_list, const int level, Vect_ArrOfInt &amp;tmp_elem_flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Int::build_octree_recursively </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>octree_center_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>octree_center_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>octree_center_z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>octree_half_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIntTab.html">IntTab</a> &amp;&#160;</td>
          <td class="paramname"><em>elements_boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVect__ArrOfInt.html">Vect_ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>vect_elements_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVect__ArrOfInt.html">Vect_ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>tmp_elem_flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>octree_center_i est le premier int de la moitie superieure de l'octree dans la direction i.<br/>
octree_half_width est une puissance de 2 egale a octree_center_i-octree_min_i (octree_min_i<br/>
est le premier int inclu dans cet octree dans la direction i)<br/>
Valeur de retour: octree_id de l'octree construit (void octree_structure_) </p>

<p><p>&lt; non -&gt; on retire les flags des cubes de la partie inferieure</p>
<p>&lt; non -&gt; on retire les flags des cubes de la partie superieure</p>
<p>&lt; l'element coupe les deux parties ! </p>
</p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00316">316</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8cpp_source.html#l00300">build_octree_floor()</a>, <a class="el" href="Array__base_8h_source.html#l00038">Array_base::COPY_NOINIT</a>, <a class="el" href="IntTab_8h_source.html#l00233">IntTab::dimension()</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">EMPTY</a>, <a class="el" href="Array__base_8h_source.html#l00038">Array_base::NOCOPY_NOINIT</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">OCTREE</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00035">octree_id()</a>, <a class="el" href="Octree__Int_8h_source.html#l00086">octree_structure_</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, <a class="el" href="IntTab_8cpp_source.html#l00344">IntTab::resize_dim0()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00234">sub_cube_flags_max</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00230">sub_cube_flags_min</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00088">build()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// Criteres d&#39;arret de la subdivision:</span>
<span class="comment">// Nombre maximal d&#39;elements dans un sous-cube floor</span>
  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> octree_floor_max_elems = 8;
<span class="comment">// S&#39;il y a beaucoup d&#39;elements dupliques, mais pas trop, et que le nombre d&#39;elements</span>
<span class="comment">// dans l&#39;octree est superieur a cette valeur, on subdivise quand-meme</span>
  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> octree_duplicate_elements_limit = 64;
  <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; elements_list = vect_elements_list[level];
<span class="comment">// Si le nombre d&#39;elements est inferieur a la limite, on cree un floor_element,</span>
<span class="comment">// sinon on subdivise</span>
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_elems = elements_list.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keywordflow">if</span> (nb_elems == 0)
    <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a>(0, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>);

  <span class="keywordflow">if</span> (nb_elems &lt; octree_floor_max_elems || octree_half_width == 1 <span class="comment">/* dernier niveau */</span>)
    {
      <span class="keyword">const</span> <span class="keywordtype">int</span> the_octree_id = <a class="code" href="classOctree__Int.html#a2b5d09243c69bf157fe2c6c81ad66f1b" title="construit un octree_floor avec la liste d&#39;elements donnee et renvoie l&#39;octree_id de cet octree_floor...">build_octree_floor</a>(elements_list);
      <span class="keywordflow">return</span> the_octree_id;
    }

  <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; elem_flags = tmp_elem_flags[level];
  elem_flags.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(nb_elems, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);

  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_octrees = <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  assert(nb_octrees == 2 || nb_octrees == 4 || nb_octrees == 8);
  <span class="keyword">const</span> <span class="keywordtype">int</span> elem_box_dim = elements_boxes.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<span class="comment">// Soit elements_boxes contient dimension colonnes, soit dimension*2</span>
  <span class="keyword">const</span> <span class="keywordtype">int</span> box_delta = (elem_box_dim &gt; 3) ? (elem_box_dim &gt;&gt; 1) : 0;
<span class="comment">// Nombre d&#39;elements stockes en double dans l&#39;octree (a cause des elements a cheval</span>
<span class="comment">// sur plusieurs sous-octrees)</span>
  <span class="keywordtype">int</span> nb_duplicate_elements = 0;
<span class="comment">// On range les elements de la liste dans 8 sous-cubes (remplissage de elem_flags)</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i_elem = 0; i_elem &lt; nb_elems; i_elem++)
    {
      <span class="keyword">const</span> <span class="keywordtype">int</span> elem = elements_list[i_elem];
<span class="comment">// dir_flag vaut 1 pour la direction x, 2 pour y et 4 pour z</span>
      <span class="keywordtype">int</span> dir_flag = 1;
<span class="comment">// sub_cube_flags contient 2^dim drapeaux binaires (1 par sous-cube),</span>
<span class="comment">// et indique les sous-cubes coupes par l&#39;element</span>
      <span class="keywordtype">int</span> octree_flags = 255;
<span class="comment">// dans combien de sous-octree cet element est-il stocke ?</span>
      <span class="keywordtype">int</span> nb_duplicates = 1;

      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> direction = 0; direction &lt; 3; direction++)
        {
          <span class="keyword">const</span> <span class="keywordtype">int</span> elem_min = elements_boxes(elem, direction);
          <span class="keyword">const</span> <span class="keywordtype">int</span> elem_max = elements_boxes(elem, box_delta+direction);
          assert(elem_max &gt;= elem_min);
<span class="comment">// coordonnee du centre du cube dans la direction j:</span>
          <span class="keyword">const</span> <span class="keywordtype">int</span> center = (direction==0) ? octree_center_x : ((direction==1) ? octree_center_y : octree_center_z);
<span class="comment">// L&#39;element coupe-t-il la partie inferieure et la partie superieure du cube dans la &quot;direction&quot; ?</span>
          <span class="keywordflow">if</span> (elem_min &gt;= center) <span class="comment">//!&lt; non -&gt; on retire les flags des cubes de la partie inferieure</span>
<span class="comment"></span>            octree_flags &amp;= <a class="code" href="Octree__Int_8cpp.html#aa8e328675a04846e925da6026268be0a">sub_cube_flags_max</a>[direction];
          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (elem_max &lt; center) <span class="comment">//!&lt; non -&gt; on retire les flags des cubes de la partie superieure</span>
<span class="comment"></span>            octree_flags &amp;= <a class="code" href="Octree__Int_8cpp.html#ae1846ad2999e810f04b6f41a76bc3281">sub_cube_flags_min</a>[direction];
          <span class="keywordflow">else</span>
            nb_duplicates &lt;&lt;= 1; <span class="comment">//!&lt; l&#39;element coupe les deux parties !</span>
<span class="comment"></span>          dir_flag = dir_flag &lt;&lt; 1;
          <span class="keywordflow">if</span> (dir_flag == nb_octrees)
            <span class="keywordflow">break</span>;
        }
      elem_flags[i_elem] = octree_flags;
      nb_duplicate_elements += nb_duplicates - 1;
    }

<span class="comment">// Critere un peu complique : s&#39;il y a vraiment beaucoup d&#39;elements</span>
<span class="comment">// dans cet octree, on autorise jusqu&#39;a dupliquer tous les elements,</span>
<span class="comment">// ce qui permet de ranger des elements tres alonges qui sont forcement</span>
<span class="comment">// dupliques dans une direction (&gt;octree_duplicate_elements_limit).</span>
  <span class="keywordflow">if</span> ((nb_duplicate_elements * 2 &gt;= nb_elems &amp;&amp; nb_elems &lt; octree_duplicate_elements_limit)
      || nb_duplicate_elements &gt; nb_elems)
    {
      <span class="keyword">const</span> <span class="keywordtype">int</span> the_octree_id = <a class="code" href="classOctree__Int.html#a2b5d09243c69bf157fe2c6c81ad66f1b" title="construit un octree_floor avec la liste d&#39;elements donnee et renvoie l&#39;octree_id de cet octree_floor...">build_octree_floor</a>(elements_list);
<span class="comment">// On renvoie un index d&#39;octreefloor</span>
      <span class="keywordflow">return</span> the_octree_id;
    }

<span class="comment">// On reserve une case a la fin de octree_structure pour stocker cet octree:</span>
  <span class="keyword">const</span> <span class="keywordtype">int</span> index_octree = <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
  <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>.<a class="code" href="classIntTab.html#a425c14e929dedb4760f303ff42a20ee2" title="change la dimension[0] du tableau en conservant les autres.">resize_dim0</a>(index_octree + 1, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffac85954f9768f1ed2b14e58cea8ddb7c5">ArrOfInt::COPY_NOINIT</a>);
  <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; new_liste_elems = vect_elements_list[level+1];
  new_liste_elems.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
  <span class="keyword">const</span> <span class="keywordtype">int</span> width = octree_half_width &gt;&gt; 1;
  <span class="keyword">const</span> <span class="keywordtype">int</span> m_width = - width;
<span class="comment">// Traitement recursif des sous-cubes de l&#39;octree:</span>
  <span class="keywordtype">int</span> i_cube;
  <span class="keywordflow">for</span> (i_cube = 0; i_cube &lt; nb_octrees; i_cube++)
    {
      <span class="keyword">const</span> <span class="keywordtype">int</span> octree_flag = 1 &lt;&lt; i_cube;
      new_liste_elems.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(nb_elems, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);
      <span class="keywordtype">int</span> count = 0;
<span class="comment">// Liste des elements inclus dans le sous-cube:</span>
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i_elem = 0; i_elem &lt; nb_elems; i_elem++)
        <span class="keywordflow">if</span> ((elem_flags[i_elem] &amp; octree_flag) != 0)
          new_liste_elems[count++] = elements_list[i_elem];
      new_liste_elems.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(count);

      <span class="keywordtype">int</span> sub_octree_id;
      <span class="keywordflow">if</span> (new_liste_elems.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() == 0)
        {
          sub_octree_id = <a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a>(-1, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>);
        }
      <span class="keywordflow">else</span>
        {
<span class="comment">// Coordonnees du nouveau sous-cube</span>
          <span class="keyword">const</span> <span class="keywordtype">int</span> cx = octree_center_x + ((i_cube&amp;1) ? width : m_width);
          <span class="keyword">const</span> <span class="keywordtype">int</span> cy = octree_center_y + ((i_cube&amp;2) ? width : m_width);
          <span class="keyword">const</span> <span class="keywordtype">int</span> cz = octree_center_z + ((i_cube&amp;4) ? width : m_width);
          sub_octree_id = <a class="code" href="classOctree__Int.html#a25ab41815ad4258e136cab7d4a9633e7" title="octree_center_i est le premier int de la moitie superieure de l&#39;octree dans la direction i...">build_octree_recursively</a>(cx, cy, cz, width,
                                                   elements_boxes,
                                                   vect_elements_list,
                                                   level+1,
                                                   tmp_elem_flags);
        }
      <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>(index_octree, i_cube) = sub_octree_id;
    }

  <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a>(index_octree, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a80e72913238e8489d9f90ece56e780d6"></a><!-- doxytag: member="Octree_Int::floor_elements" ref="a80e72913238e8489d9f90ece56e780d6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classArrOfInt.html">ArrOfInt</a>&amp; Octree_Int::floor_elements </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00042">42</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00092">floor_elements_</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8h_source.html#l00066">Octree_Double::floor_elements()</a>.</p>
<div class="fragment"><pre class="fragment">  {
    <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>;
  };
</pre></div>
</div>
</div>
<a class="anchor" id="a3207ae64c65f9e966456170c6ea00965"></a><!-- doxytag: member="Octree_Int::octree_id" ref="a3207ae64c65f9e966456170c6ea00965" args="(int index, Octree_Type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Int::octree_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832">Octree_Type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>construction d'un octree_id (voir octree_structure_)<br/>
Si type==EMPTY, on l'octree_id est 0<br/>
Si type==OCTREE, on suppose que index est un indice dans octree_structure_<br/>
Si type==FLOOR, on suppose que index est un indice dans floor_elements_ </p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00035">35</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00070">EMPTY</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">FLOOR</a>, and <a class="el" href="Octree__Int_8h_source.html#l00070">OCTREE</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00300">build_octree_floor()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00316">build_octree_recursively()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00290">reset()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">switch</span>(type)
    {
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>:
      <span class="keywordflow">return</span> 0;
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>:
      <span class="keywordflow">return</span> index + 1;
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>:
      <span class="keywordflow">return</span> - index - 1;
    }
  <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3f6f9925773084c01590aa8c9320af57"></a><!-- doxytag: member="Octree_Int::octree_index" ref="a3f6f9925773084c01590aa8c9320af57" args="(int octree_id, Octree_Type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Int::octree_index </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>octree_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832">Octree_Type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>calcul de l'index de l'octree dans octree_structure ou floor_elements<br/>
en fonction du type de l'octree et de son octree_id.<br/>
En general on a deja determine le type avant, on le passe en parametre pour optimiser. </p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00052">52</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00070">EMPTY</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">FLOOR</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">OCTREE</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00068">octree_type()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00131">search_elements()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00209">search_elements_box_floor()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00242">search_elements_box_recursively()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00446">search_octree_floor()</a>.</p>
<div class="fragment"><pre class="fragment">{
  assert(type==<a class="code" href="classOctree__Int.html#a51b26021cc70040b366ecb76aedbc875" title="Renvoie le type d&#39;un octree en fonction de son octree_id.">octree_type</a>(<a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a>));
  <span class="keywordflow">switch</span>(type)
    {
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>:
      <span class="keywordflow">return</span> -1;
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>:
      <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a> - 1;
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>:
      <span class="keywordflow">return</span> - <a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a> - 1;
    }
  <span class="keywordflow">return</span> -1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a51b26021cc70040b366ecb76aedbc875"></a><!-- doxytag: member="Octree_Int::octree_type" ref="a51b26021cc70040b366ecb76aedbc875" args="(int octree_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832">Octree_Int::Octree_Type</a> Octree_Int::octree_type </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>octree_id</em></td><td>)</td>
          <td><code> [inline, static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Renvoie le type d'un octree en fonction de son octree_id. </p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00068">68</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00070">EMPTY</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">FLOOR</a>, and <a class="el" href="Octree__Int_8h_source.html#l00070">OCTREE</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00052">octree_index()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00131">search_elements()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00173">search_elements_box()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00242">search_elements_box_recursively()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00446">search_octree_floor()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a> &gt; 0)
    <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>;
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a> == 0)
    <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>;
  <span class="keywordflow">else</span>
    <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa4816ea0fb496ee0b1b590d49d92bad6"></a><!-- doxytag: member="Octree_Int::reset" ref="aa4816ea0fb496ee0b1b590d49d92bad6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Octree_Int::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00290">290</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00070">EMPTY</a>, <a class="el" href="Octree__Int_8h_source.html#l00092">floor_elements_</a>, <a class="el" href="Octree__Int_8h_source.html#l00079">nb_elements_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00035">octree_id()</a>, <a class="el" href="Octree__Int_8h_source.html#l00086">octree_structure_</a>, <a class="el" href="ArrOfInt_8cpp_source.html#l00452">ArrOfInt::reset()</a>, <a class="el" href="IntTab_8cpp_source.html#l00325">IntTab::reset()</a>, and <a class="el" href="Octree__Int_8h_source.html#l00077">root_octree_id_</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00205">Octree_Double::build_elements()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00154">Octree_Double::build_nodes()</a>, and <a class="el" href="Octree__Double_8cpp_source.html#l00030">Octree_Double::reset()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a> = <a class="code" href="classOctree__Int.html#a3207ae64c65f9e966456170c6ea00965" title="construction d&#39;un octree_id (voir octree_structure_) Si type==EMPTY, on l&#39;octree_id est 0 Si type==OC...">octree_id</a>(0, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>);
  <a class="code" href="classOctree__Int.html#ad16fcc42e2a07401843733cb718867c3">nb_elements_</a> = 0;
  <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>.<a class="code" href="classIntTab.html#ac66710ddde96fe2745f341a0166b3b34" title="met le tableau dans l&#39;etat obtenu par le constructeur par defaut voir IntVect::reset()">reset</a>();
  <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>.<a class="code" href="classArrOfInt.html#afc932bc1df352ead26b844dcb090dacc" title="Remet le tableau dans l&#39;etat obtenu avec le constructeur par defaut (libere la memoire mais conserve ...">reset</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab999fee7a1cd43e79011f0013b499a54"></a><!-- doxytag: member="Octree_Int::search_elements" ref="ab999fee7a1cd43e79011f0013b499a54" args="(int x, int y, int z, int &amp;floor_elements_index) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Int::search_elements </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>z</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>floor_elements_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>renvoie la liste des elements contenant potentiellement le point (x,y,z)<br/>
On renvoie n=nombre d'elements de la liste et les elements sont dans<br/>
<a class="el" href="classOctree__Int.html#a80e72913238e8489d9f90ece56e780d6">floor_elements()</a>[index+i] pour 0 &lt;= i &lt; n.<br/>
En realite on renvoie tous les elements qui ont une intersection non vide avec l'octree_floor<br/>
contenant le point (x,y,z) </p>

<p><p>&lt; important pour ne pas tomber sur des cubes inexistants</p>
<p>&lt; idem </p>
</p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00131">131</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00045">coord_max_</a>, <a class="el" href="IntTab_8h_source.html#l00233">IntTab::dimension()</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">EMPTY</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">FLOOR</a>, <a class="el" href="Octree__Int_8h_source.html#l00092">floor_elements_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00052">octree_index()</a>, <a class="el" href="Octree__Int_8h_source.html#l00086">octree_structure_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00068">octree_type()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00446">search_octree_floor()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00081">Octree_Double::search_elements()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_octrees = <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <span class="keywordflow">if</span> (nb_octrees == 2)
    y = 0; <span class="comment">//!&lt; important pour ne pas tomber sur des cubes inexistants</span>
<span class="comment"></span>  <span class="keywordflow">if</span> (nb_octrees &lt;= 4)
    z = 0; <span class="comment">//!&lt; idem</span>
<span class="comment"></span>  assert(x &gt;= 0 &amp;&amp; x &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);
  assert(y &gt;= 0 &amp;&amp; y &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);
  assert(z &gt;= 0 &amp;&amp; z &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);

  <span class="keyword">const</span> <span class="keywordtype">int</span> my_octree_id = <a class="code" href="classOctree__Int.html#a31459ec8946792be867506e19586943d" title="renvoie l&#39;octree_id de l&#39;octree_floor contenant le sommet (x,y,z) (peut renvoyer l&#39;octree EMPTY)...">search_octree_floor</a>(x, y, z);

  <span class="keywordflow">if</span> (<a class="code" href="classOctree__Int.html#a51b26021cc70040b366ecb76aedbc875" title="Renvoie le type d&#39;un octree en fonction de son octree_id.">octree_type</a>(my_octree_id) == <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>)
    {
      <span class="keywordflow">return</span> 0;
    }
  <span class="keyword">const</span> <span class="keywordtype">int</span> idx = <a class="code" href="classOctree__Int.html#a3f6f9925773084c01590aa8c9320af57" title="calcul de l&#39;index de l&#39;octree dans octree_structure ou floor_elements en fonction du type de l&#39;octree...">octree_index</a>(my_octree_id, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>);
  <span class="keyword">const</span> <span class="keywordtype">int</span> n = <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>[idx];
  index = idx + 1;
  <span class="keywordflow">return</span> n;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a603544a594cacc8bdb1083e4c9dfbd58"></a><!-- doxytag: member="Octree_Int::search_elements_box" ref="a603544a594cacc8bdb1083e4c9dfbd58" args="(int xmin, int ymin, int zmin, int xmax, int ymax, int zmax, ArrOfInt &amp;elements) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Int::search_elements_box </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ymin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>zmin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ymax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>zmax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classArrOfInt.html">ArrOfInt</a> &amp;&#160;</td>
          <td class="paramname"><em>elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cherche les elements ayant potentiellement une intersection non vide avec la<br/>
boite xmin..zmax. Le tableau elements doit etre de type smart_resize(1).<br/>
Les elements peuvent apparaitre plusieurs fois dans le tableau "elements" </p>

<p><p>&lt; important pour ne pas tomber sur des cubes inexistants</p>
<p>&lt; idem </p>
</p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00173">173</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00045">coord_max_</a>, <a class="el" href="IntTab_8h_source.html#l00233">IntTab::dimension()</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">EMPTY</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">FLOOR</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">OCTREE</a>, <a class="el" href="Octree__Int_8h_source.html#l00086">octree_structure_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00068">octree_type()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, <a class="el" href="Octree__Int_8h_source.html#l00050">root_octree_half_width_</a>, <a class="el" href="Octree__Int_8h_source.html#l00077">root_octree_id_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00209">search_elements_box_floor()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00242">search_elements_box_recursively()</a>, and <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Double_8cpp_source.html#l00244">Octree_Double::search_elements_box()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_octrees = <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
  <span class="keywordflow">if</span> (nb_octrees == 2)
    ymin = ymax = 0; <span class="comment">//!&lt; important pour ne pas tomber sur des cubes inexistants</span>
<span class="comment"></span>  <span class="keywordflow">if</span> (nb_octrees &lt;= 4)
    zmin = zmax = 0; <span class="comment">//!&lt; idem</span>
<span class="comment"></span>  assert(xmin &gt;= 0 &amp;&amp; xmin &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);
  assert(ymin &gt;= 0 &amp;&amp; ymin &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);
  assert(zmin &gt;= 0 &amp;&amp; zmin &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);
  assert(xmax &gt;= 0 &amp;&amp; xmax &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);
  assert(ymax &gt;= 0 &amp;&amp; ymax &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);
  assert(zmax &gt;= 0 &amp;&amp; zmax &lt;= <a class="code" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">coord_max_</a>);

  elements.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(0);
  <a class="code" href="structIntBoxData.html">IntBoxData</a> boxdata(xmin, ymin, zmin, xmax, ymax, zmax, elements, 0);
  <span class="keywordflow">switch</span>(<a class="code" href="classOctree__Int.html#a51b26021cc70040b366ecb76aedbc875" title="Renvoie le type d&#39;un octree en fonction de son octree_id.">octree_type</a>(<a class="code" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a>))
    {
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>:
      <a class="code" href="classOctree__Int.html#adfe03cd1d654fe388d1a6fc5b783994d" title="ajoute des elements de l&#39;octree_floor a boxdata.elements_">search_elements_box_floor</a>(boxdata, <a class="code" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>:
      <a class="code" href="classOctree__Int.html#a9c60dccfe4bf346acd90b3f734f46c08" title="cherche recursivement les elements inclus dans la boite boxdata pour l&#39;octree_id donne, de centre cx, cy, cz.">search_elements_box_recursively</a>(boxdata, <a class="code" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a>,
                                      <a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>,<a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>,<a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>,
                                      <a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>:
      <span class="keywordflow">break</span>;
    }
  <span class="keyword">const</span> <span class="keywordtype">int</span> n = elements.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
  <span class="keywordflow">return</span> n;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adfe03cd1d654fe388d1a6fc5b783994d"></a><!-- doxytag: member="Octree_Int::search_elements_box_floor" ref="adfe03cd1d654fe388d1a6fc5b783994d" args="(IntBoxData &amp;boxdata, int octree_floor_id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Octree_Int::search_elements_box_floor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIntBoxData.html">IntBoxData</a> &amp;&#160;</td>
          <td class="paramname"><em>boxdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>octree_floor_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ajoute des elements de l'octree_floor a boxdata.elements_ </p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00209">209</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="ArrOfInt_8h_source.html#l00355">ArrOfInt::append_array()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00166">IntBoxData::elements_</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">FLOOR</a>, <a class="el" href="Octree__Int_8h_source.html#l00092">floor_elements_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00167">IntBoxData::markers_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00052">octree_index()</a>, and <a class="el" href="ArrOfBit_8h_source.html#l00073">ArrOfBit::testsetbit()</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00173">search_elements_box()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00242">search_elements_box_recursively()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">int</span> idx = <a class="code" href="classOctree__Int.html#a3f6f9925773084c01590aa8c9320af57" title="calcul de l&#39;index de l&#39;octree dans octree_structure ou floor_elements en fonction du type de l&#39;octree...">octree_index</a>(octree_floor_id, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>);
  <span class="keyword">const</span> <span class="keywordtype">int</span> n = <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>[idx];
  <span class="keywordflow">if</span> (boxdata.<a class="code" href="structIntBoxData.html#a67d9cfbda6e3ec2dba97dde8b6126e8a">markers_</a>)
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
      {
        <span class="keyword">const</span> <span class="keywordtype">int</span> elem = <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>[idx+1+i];
        <span class="keywordflow">if</span> (!boxdata.<a class="code" href="structIntBoxData.html#a67d9cfbda6e3ec2dba97dde8b6126e8a">markers_</a>-&gt;<a class="code" href="classArrOfBit.html#a68b08edd2eebc91e7bd7d34ec81f6cd2" title="Renvoie la valeur du bit e, puis met le bit e a 1.">testsetbit</a>(elem))
          boxdata.<a class="code" href="structIntBoxData.html#afe16b9185b536129304db13687c20082">elements_</a>.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(elem);
      }
  <span class="keywordflow">else</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
      {
        <span class="keyword">const</span> <span class="keywordtype">int</span> elem = <a class="code" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">floor_elements_</a>[idx+1+i];
        boxdata.<a class="code" href="structIntBoxData.html#afe16b9185b536129304db13687c20082">elements_</a>.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(elem);
      }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c60dccfe4bf346acd90b3f734f46c08"></a><!-- doxytag: member="Octree_Int::search_elements_box_recursively" ref="a9c60dccfe4bf346acd90b3f734f46c08" args="(IntBoxData &amp;boxdata, int octree_id, int cx, int cy, int cz, int half_width) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Octree_Int::search_elements_box_recursively </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structIntBoxData.html">IntBoxData</a> &amp;&#160;</td>
          <td class="paramname"><em>boxdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>octree_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>half_width</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cherche recursivement les elements inclus dans la boite<br/>
boxdata pour l'octree_id donne, de centre cx, cy, cz. </p>

<p><p>&lt; les cubes superieurs en x ne sont pas dedans</p>
<p>&lt; les cubes inferieurs ne sont pas dedans </p>
</p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00242">242</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00070">EMPTY</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">FLOOR</a>, <a class="el" href="Octree__Int_8h_source.html#l00070">OCTREE</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00052">octree_index()</a>, <a class="el" href="Octree__Int_8h_source.html#l00086">octree_structure_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00068">octree_type()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00209">search_elements_box_floor()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00234">sub_cube_flags_max</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00230">sub_cube_flags_min</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00165">IntBoxData::xmax_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00163">IntBoxData::xmin_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00165">IntBoxData::ymax_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00163">IntBoxData::ymin_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00165">IntBoxData::zmax_</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00163">IntBoxData::zmin_</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00173">search_elements_box()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> flags = 255;
  <span class="keywordflow">if</span> (cx &gt; boxdata.<a class="code" href="structIntBoxData.html#a1692d275f8361a6bb79406febcf6060b">xmax_</a>) <span class="comment">//!&lt; les cubes superieurs en x ne sont pas dedans</span>
<span class="comment"></span>    flags &amp;= <a class="code" href="Octree__Int_8cpp.html#ae1846ad2999e810f04b6f41a76bc3281">sub_cube_flags_min</a>[0];
  <span class="keywordflow">if</span> (cx &lt;= boxdata.<a class="code" href="structIntBoxData.html#a3a4c9dd2d8a9a5361799d21049d8b0f4">xmin_</a>) <span class="comment">//!&lt; les cubes inferieurs ne sont pas dedans</span>
<span class="comment"></span>    flags &amp;= <a class="code" href="Octree__Int_8cpp.html#aa8e328675a04846e925da6026268be0a">sub_cube_flags_max</a>[0];
  <span class="keywordflow">if</span> (cy &gt; boxdata.<a class="code" href="structIntBoxData.html#ac1aa88dfe5617933b1c095d4ead2c7e4">ymax_</a>)
    flags &amp;= <a class="code" href="Octree__Int_8cpp.html#ae1846ad2999e810f04b6f41a76bc3281">sub_cube_flags_min</a>[1];
  <span class="keywordflow">if</span> (cy &lt;= boxdata.<a class="code" href="structIntBoxData.html#ae1b4a5e1415c7318dfd14f617ef3b7ff">ymin_</a>)
    flags &amp;= <a class="code" href="Octree__Int_8cpp.html#aa8e328675a04846e925da6026268be0a">sub_cube_flags_max</a>[1];
  <span class="keywordflow">if</span> (cz &gt; boxdata.<a class="code" href="structIntBoxData.html#a4934e818f0e4d4aba7e05089f234ffda">zmax_</a>)
    flags &amp;= <a class="code" href="Octree__Int_8cpp.html#ae1846ad2999e810f04b6f41a76bc3281">sub_cube_flags_min</a>[2];
  <span class="keywordflow">if</span> (cz &lt;= boxdata.<a class="code" href="structIntBoxData.html#a4f1f167d66904e36e72d69fd78a02535">zmin_</a>)
    flags &amp;= <a class="code" href="Octree__Int_8cpp.html#aa8e328675a04846e925da6026268be0a">sub_cube_flags_max</a>[2];
  <span class="keywordtype">int</span> test_flag = 1;
  <span class="keyword">const</span> <span class="keywordtype">int</span> idx = <a class="code" href="classOctree__Int.html#a3f6f9925773084c01590aa8c9320af57" title="calcul de l&#39;index de l&#39;octree dans octree_structure ou floor_elements en fonction du type de l&#39;octree...">octree_index</a>(the_octree_id, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>);
  <span class="keyword">const</span> <span class="keywordtype">int</span> half_width_2 = half_width &gt;&gt; 1;
  <span class="keyword">const</span> <span class="keywordtype">int</span> mhalf_width = - half_width_2;
  <span class="keywordtype">int</span> cx2, cy2, cz2;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; i++, test_flag &lt;&lt;= 1)
    {
      <span class="keywordflow">if</span> ((flags &amp; test_flag) != 0)
        {
          <span class="keyword">const</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>(idx, i);
          <span class="keywordflow">switch</span>(<a class="code" href="classOctree__Int.html#a51b26021cc70040b366ecb76aedbc875" title="Renvoie le type d&#39;un octree en fonction de son octree_id.">octree_type</a>(<span class="keywordtype">id</span>))
            {
            <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a8f66b3136cf3ef1f2bbe7f2c79aac178">FLOOR</a>:
              <a class="code" href="classOctree__Int.html#adfe03cd1d654fe388d1a6fc5b783994d" title="ajoute des elements de l&#39;octree_floor a boxdata.elements_">search_elements_box_floor</a>(boxdata, <span class="keywordtype">id</span>);
              <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>:
              cx2 = cx + ((i &amp; 1) ? half_width_2 : mhalf_width);
              cy2 = cy + ((i &amp; 2) ? half_width_2 : mhalf_width);
              cz2 = cz + ((i &amp; 4) ? half_width_2 : mhalf_width);
              <a class="code" href="classOctree__Int.html#a9c60dccfe4bf346acd90b3f734f46c08" title="cherche recursivement les elements inclus dans la boite boxdata pour l&#39;octree_id donne, de centre cx, cy, cz.">search_elements_box_recursively</a>(boxdata, <span class="keywordtype">id</span>,
                                              cx2, cy2, cz2,
                                              half_width_2);
              <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832a6f8ebfd270827dbc40fcf0a6e9e5606e">EMPTY</a>:
              <span class="keywordflow">break</span>;
            }
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31459ec8946792be867506e19586943d"></a><!-- doxytag: member="Octree_Int::search_octree_floor" ref="a31459ec8946792be867506e19586943d" args="(int x_pos, int y_pos, int z_pos) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Octree_Int::search_octree_floor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>z_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>renvoie l'octree_id de l'octree_floor contenant le sommet (x,y,z)<br/>
(peut renvoyer l'octree EMPTY) </p>

<p><p>&lt; On n'arrive jamais ici ! </p>
</p>

<p>Definition at line <a class="el" href="Octree__Int_8cpp_source.html#l00446">446</a> of file <a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a>.</p>

<p>References <a class="el" href="Octree__Int_8h_source.html#l00070">OCTREE</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00052">octree_index()</a>, <a class="el" href="Octree__Int_8h_source.html#l00086">octree_structure_</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00068">octree_type()</a>, <a class="el" href="Octree__Int_8h_source.html#l00050">root_octree_half_width_</a>, and <a class="el" href="Octree__Int_8h_source.html#l00077">root_octree_id_</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00131">search_elements()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="classOctree__Int.html#a51b26021cc70040b366ecb76aedbc875" title="Renvoie le type d&#39;un octree en fonction de son octree_id.">octree_type</a>(<a class="code" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a>) != <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>)
    <span class="keywordflow">return</span> <a class="code" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a>;
<span class="comment">// Le test pour savoir si on est dans la partie superieure ou</span>
<span class="comment">// inferieure d&#39;un octree au niveau i consiste simplement a tester</span>
<span class="comment">// le i-ieme bit de la position.</span>
  <span class="keywordtype">int</span> flag = <a class="code" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">root_octree_half_width_</a>;

  <span class="keywordtype">int</span> index = <a class="code" href="classOctree__Int.html#a3f6f9925773084c01590aa8c9320af57" title="calcul de l&#39;index de l&#39;octree dans octree_structure ou floor_elements en fonction du type de l&#39;octree...">octree_index</a>(<a class="code" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">root_octree_id_</a>, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>);

<span class="comment">// Descendre dans la hierarchie d&#39;octree subdivises jusqu&#39;au cube</span>
<span class="comment">// le plus petit</span>
  <span class="keywordflow">while</span> (1)
    {
<span class="comment">// Numero du sous-cube dans lequel se trouve le sommet x,y,z</span>
      <span class="keyword">const</span> <span class="keywordtype">int</span> ix = (x &amp; flag) ? 1 : 0;
      <span class="keyword">const</span> <span class="keywordtype">int</span> iy = (y &amp; flag) ? 2 : 0;
      <span class="keyword">const</span> <span class="keywordtype">int</span> iz = (z &amp; flag) ? 4 : 0;
      <span class="keywordtype">int</span> i_sous_cube = ix + iy + iz;
<span class="comment">// On entre dans le sous-cube :</span>
      <span class="keyword">const</span> <span class="keywordtype">int</span> the_octree_id = <a class="code" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">octree_structure_</a>(index, i_sous_cube);
      <span class="keywordflow">if</span> (<a class="code" href="classOctree__Int.html#a51b26021cc70040b366ecb76aedbc875" title="Renvoie le type d&#39;un octree en fonction de son octree_id.">octree_type</a>(the_octree_id) != <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>)
        <span class="keywordflow">return</span> the_octree_id;

      index = <a class="code" href="classOctree__Int.html#a3f6f9925773084c01590aa8c9320af57" title="calcul de l&#39;index de l&#39;octree dans octree_structure ou floor_elements en fonction du type de l&#39;octree...">octree_index</a>(the_octree_id, <a class="code" href="classOctree__Int.html#a0365c96e0b36478c6dd4b11fe41c6832ad9968d6fdd4db22d148f86bb1d2087a8">OCTREE</a>);
      flag &gt;&gt;= 1;
    }
  <span class="keywordflow">return</span> -1; <span class="comment">//!&lt; On n&#39;arrive jamais ici !</span>
<span class="comment"></span>}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a4b7158c59133f28d4df425cd6ed16046"></a><!-- doxytag: member="Octree_Int::coord_max_" ref="a4b7158c59133f28d4df425cd6ed16046" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classOctree__Int.html#a4b7158c59133f28d4df425cd6ed16046">Octree_Int::coord_max_</a> = 2147483647<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00045">45</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00088">build()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00102">Octree_Double::compute_origin_factors()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00040">Octree_Double::integer_position()</a>, <a class="el" href="Octree__Double_8cpp_source.html#l00056">Octree_Double::integer_position_clip()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00131">search_elements()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00173">search_elements_box()</a>.</p>

</div>
</div>
<a class="anchor" id="a342d0061644331c7c3f8763ba1b6c603"></a><!-- doxytag: member="Octree_Int::floor_elements_" ref="a342d0061644331c7c3f8763ba1b6c603" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classArrOfInt.html">ArrOfInt</a> <a class="el" href="classOctree__Int.html#a342d0061644331c7c3f8763ba1b6c603">Octree_Int::floor_elements_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00092">92</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00088">build()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00300">build_octree_floor()</a>, <a class="el" href="Octree__Int_8h_source.html#l00042">floor_elements()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00290">reset()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00131">search_elements()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00209">search_elements_box_floor()</a>.</p>

</div>
</div>
<a class="anchor" id="ad16fcc42e2a07401843733cb718867c3"></a><!-- doxytag: member="Octree_Int::nb_elements_" ref="ad16fcc42e2a07401843733cb718867c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOctree__Int.html#ad16fcc42e2a07401843733cb718867c3">Octree_Int::nb_elements_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00079">79</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00088">build()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00290">reset()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ed69a1f24dee3d2312f360a739795ce"></a><!-- doxytag: member="Octree_Int::octree_structure_" ref="a7ed69a1f24dee3d2312f360a739795ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIntTab.html">IntTab</a> <a class="el" href="classOctree__Int.html#a7ed69a1f24dee3d2312f360a739795ce">Octree_Int::octree_structure_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00086">86</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00088">build()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00316">build_octree_recursively()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00290">reset()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00131">search_elements()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00173">search_elements_box()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00242">search_elements_box_recursively()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00446">search_octree_floor()</a>.</p>

</div>
</div>
<a class="anchor" id="a359ebd6e68ef842e6dabd335a4740381"></a><!-- doxytag: member="Octree_Int::root_octree_half_width_" ref="a359ebd6e68ef842e6dabd335a4740381" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classOctree__Int.html#a359ebd6e68ef842e6dabd335a4740381">Octree_Int::root_octree_half_width_</a> = 1073741824<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00050">50</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00088">build()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00173">search_elements_box()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00446">search_octree_floor()</a>.</p>

</div>
</div>
<a class="anchor" id="aabaf96e8a3369a53152632f2ae29e51e"></a><!-- doxytag: member="Octree_Int::root_octree_id_" ref="aabaf96e8a3369a53152632f2ae29e51e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classOctree__Int.html#aabaf96e8a3369a53152632f2ae29e51e">Octree_Int::root_octree_id_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Octree__Int_8h_source.html#l00077">77</a> of file <a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a>.</p>

<p>Referenced by <a class="el" href="Octree__Int_8cpp_source.html#l00088">build()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00290">reset()</a>, <a class="el" href="Octree__Int_8cpp_source.html#l00173">search_elements_box()</a>, and <a class="el" href="Octree__Int_8cpp_source.html#l00446">search_octree_floor()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/Kernel/Geometrie/<a class="el" href="Octree__Int_8h_source.html">Octree_Int.h</a></li>
<li>src/Kernel/Geometrie/<a class="el" href="Octree__Int_8cpp_source.html">Octree_Int.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:37:12 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
