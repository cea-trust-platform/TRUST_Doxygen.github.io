<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Champs_dis/Champ_Q4_implementation.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Champs_dis/Champ_Q4_implementation.cpp</div>  </div>
</div>
<div class="contents">
<a href="Champ__Q4__implementation_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2015 - 2016, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Champ_Q4_implementation.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Champs_dis</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/9</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Q4__implementation_8h.html">Champ_Q4_implementation.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Champ__base_8h.html">Champ_base.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a><a class="code" href="classChamp__Q4__implementation.html#a0f6fe22db1b8e67e029e12987fc5b6ec">00027</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__Q4__implementation.html#a0f6fe22db1b8e67e029e12987fc5b6ec">Champ_Q4_implementation::valeur_a_elem</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; position, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; val, <span class="keywordtype">int</span> num_elem)<span class="keyword"> const</span>
<a name="l00028"></a>00028 <span class="keyword"></span>{
<a name="l00029"></a>00029   val = 0.;
<a name="l00030"></a>00030   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; cha=<a class="code" href="classChamp__implementation.html#acef977877647c519ea01aa4b19ba6613">le_champ</a>();
<a name="l00031"></a>00031   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; ch = cha.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00032"></a>00032   <span class="keywordtype">int</span> nb_compo_=cha.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00033"></a>00033 
<a name="l00034"></a>00034   <span class="keywordtype">int</span> j,ncomp, num_som,nb_som_elem = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#ae0b34a93b9ae8146df2d1884157afe9f" title="Renvoie le nombre de sommets des elements geometriques constituants la zone. Tous les elements de la ...">nb_som_elem</a>();
<a name="l00035"></a>00035   <span class="keywordflow">if</span> (nb_compo_ == 1)
<a name="l00036"></a>00036     {
<a name="l00037"></a>00037       <span class="keywordflow">for</span> (j=0 ; j&lt;nb_som_elem ; j++)
<a name="l00038"></a>00038         {
<a name="l00039"></a>00039           num_som = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(num_elem,j);
<a name="l00040"></a>00040           val(0) += ch(num_som);
<a name="l00041"></a>00041         }
<a name="l00042"></a>00042       val(0) /= nb_som_elem;
<a name="l00043"></a>00043     }
<a name="l00044"></a>00044   <span class="keywordflow">else</span>
<a name="l00045"></a>00045     {
<a name="l00046"></a>00046       <span class="keywordflow">for</span> (ncomp=0 ; ncomp&lt;nb_compo_ ; ncomp++)
<a name="l00047"></a>00047         {
<a name="l00048"></a>00048           <span class="keywordflow">for</span> (j=0 ; j&lt;nb_som_elem ; j++)
<a name="l00049"></a>00049             {
<a name="l00050"></a>00050               num_som = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(num_elem,j);
<a name="l00051"></a>00051               val(ncomp) += ch(num_som,ncomp);
<a name="l00052"></a>00052             }
<a name="l00053"></a>00053           val(ncomp) /= nb_som_elem;
<a name="l00054"></a>00054         }
<a name="l00055"></a>00055     }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057   <span class="keywordflow">return</span> val;
<a name="l00058"></a>00058 }
<a name="l00059"></a><a class="code" href="classChamp__Q4__implementation.html#a4de11350a5a5f4a4d895964972de6c24">00059</a> <span class="keywordtype">double</span> <a class="code" href="classChamp__Q4__implementation.html#a4de11350a5a5f4a4d895964972de6c24">Champ_Q4_implementation::valeur_a_elem_compo</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; position, <span class="keywordtype">int</span> num_elem, <span class="keywordtype">int</span> ncomp)<span class="keyword"> const</span>
<a name="l00060"></a>00060 <span class="keyword"></span>{
<a name="l00061"></a>00061   <span class="keywordtype">double</span> val = 0.;
<a name="l00062"></a>00062   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; cha=<a class="code" href="classChamp__implementation.html#acef977877647c519ea01aa4b19ba6613">le_champ</a>();
<a name="l00063"></a>00063   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; ch = cha.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00064"></a>00064   <span class="keywordtype">int</span> nb_compo_=cha.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00065"></a>00065 
<a name="l00066"></a>00066   <span class="keywordtype">int</span> j, num_som,nb_som_elem = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#ae0b34a93b9ae8146df2d1884157afe9f" title="Renvoie le nombre de sommets des elements geometriques constituants la zone. Tous les elements de la ...">nb_som_elem</a>();
<a name="l00067"></a>00067   <span class="keywordflow">if</span> (nb_compo_ == 1)
<a name="l00068"></a>00068     {
<a name="l00069"></a>00069       assert(ncomp==0);
<a name="l00070"></a>00070       <span class="keywordflow">for</span> (j=0 ; j&lt;nb_som_elem ; j++)
<a name="l00071"></a>00071         {
<a name="l00072"></a>00072           num_som = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(num_elem,j);
<a name="l00073"></a>00073           val += ch(num_som);
<a name="l00074"></a>00074         }
<a name="l00075"></a>00075       val /= nb_som_elem;
<a name="l00076"></a>00076     }
<a name="l00077"></a>00077   <span class="keywordflow">else</span>
<a name="l00078"></a>00078     {
<a name="l00079"></a>00079       <span class="keywordflow">for</span> (j=0 ; j&lt;nb_som_elem ; j++)
<a name="l00080"></a>00080         {
<a name="l00081"></a>00081           num_som = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(num_elem,j);
<a name="l00082"></a>00082           val += ch(num_som,ncomp);
<a name="l00083"></a>00083         }
<a name="l00084"></a>00084       val /= nb_som_elem;
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <span class="keywordflow">return</span> val;
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="classChamp__Q4__implementation.html#af56b1b9d723c4f539915d1b6c20d60bd">00091</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__Q4__implementation.html#af56b1b9d723c4f539915d1b6c20d60bd">Champ_Q4_implementation::valeur_aux_elems</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;,<span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; les_elems,<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val)<span class="keyword"> const</span>
<a name="l00092"></a>00092 <span class="keyword"></span>{
<a name="l00093"></a>00093   val = 0.;
<a name="l00094"></a>00094   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; cha=<a class="code" href="classChamp__implementation.html#acef977877647c519ea01aa4b19ba6613">le_champ</a>();
<a name="l00095"></a>00095   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; ch = cha.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00096"></a>00096   <span class="keywordtype">int</span> nb_compo_=cha.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00097"></a>00097 
<a name="l00098"></a>00098   <span class="keywordtype">int</span> j,ncomp, num_som,nb_som_elem = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#ae0b34a93b9ae8146df2d1884157afe9f" title="Renvoie le nombre de sommets des elements geometriques constituants la zone. Tous les elements de la ...">nb_som_elem</a>(), ielem, num_elem,nb_elems=les_elems.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>();
<a name="l00099"></a>00099   assert(val.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()==nb_elems);
<a name="l00100"></a>00100   <span class="keywordflow">if</span> (nb_compo_ == 1)
<a name="l00101"></a>00101     {
<a name="l00102"></a>00102       <span class="keywordflow">for</span> (ielem=0 ; ielem&lt;nb_elems ; ielem++)
<a name="l00103"></a>00103         {
<a name="l00104"></a>00104           num_elem = les_elems(ielem);
<a name="l00105"></a>00105           <span class="keywordflow">for</span> (j=0 ; j&lt;nb_som_elem ; j++)
<a name="l00106"></a>00106             {
<a name="l00107"></a>00107               num_som = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(num_elem,j);
<a name="l00108"></a>00108               val(ielem,0) += ch(num_som);
<a name="l00109"></a>00109             }
<a name="l00110"></a>00110           val(ielem,0) /= nb_som_elem;
<a name="l00111"></a>00111         }
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113   <span class="keywordflow">else</span>
<a name="l00114"></a>00114     {
<a name="l00115"></a>00115       <span class="keywordflow">for</span> (ielem=0 ; ielem&lt;nb_elems ; ielem++)
<a name="l00116"></a>00116         {
<a name="l00117"></a>00117           num_elem = les_elems(ielem);
<a name="l00118"></a>00118           <span class="keywordflow">for</span> (ncomp=0 ; ncomp&lt;nb_compo_ ; ncomp++)
<a name="l00119"></a>00119             {
<a name="l00120"></a>00120               <span class="keywordflow">for</span> (j=0 ; j&lt;nb_som_elem ; j++)
<a name="l00121"></a>00121                 {
<a name="l00122"></a>00122                   num_som = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(num_elem,j);
<a name="l00123"></a>00123                   val(ielem,ncomp) += ch(num_som,ncomp);
<a name="l00124"></a>00124                 }
<a name="l00125"></a>00125               val(ielem,ncomp) /= nb_som_elem;
<a name="l00126"></a>00126             }
<a name="l00127"></a>00127         }
<a name="l00128"></a>00128     }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130   <span class="keywordflow">return</span> val;
<a name="l00131"></a>00131 }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 
<a name="l00134"></a><a class="code" href="classChamp__Q4__implementation.html#ab423d951ca85f02d8fa264124c0dbeb0">00134</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__Q4__implementation.html#ab423d951ca85f02d8fa264124c0dbeb0">Champ_Q4_implementation::valeur_aux_elems_compo</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;,<span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; les_elems,<a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; val,<span class="keywordtype">int</span> ncomp)<span class="keyword"> const</span>
<a name="l00135"></a>00135 <span class="keyword"></span>{
<a name="l00136"></a>00136   val = 0.;
<a name="l00137"></a>00137   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; cha=<a class="code" href="classChamp__implementation.html#acef977877647c519ea01aa4b19ba6613">le_champ</a>();
<a name="l00138"></a>00138   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; ch = cha.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00139"></a>00139   <span class="keywordtype">int</span> nb_compo_=cha.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   <span class="keywordtype">int</span> j, num_som,nb_som_elem = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#ae0b34a93b9ae8146df2d1884157afe9f" title="Renvoie le nombre de sommets des elements geometriques constituants la zone. Tous les elements de la ...">nb_som_elem</a>(), ielem, num_elem,nb_elems=les_elems.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>();
<a name="l00142"></a>00142   assert(val.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()==nb_elems);
<a name="l00143"></a>00143   <span class="keywordflow">if</span> (nb_compo_ == 1)
<a name="l00144"></a>00144     {
<a name="l00145"></a>00145       assert(ncomp==0);
<a name="l00146"></a>00146       <span class="keywordflow">for</span> (ielem=0 ; ielem&lt;nb_elems ; ielem++)
<a name="l00147"></a>00147         {
<a name="l00148"></a>00148           num_elem = les_elems(ielem);
<a name="l00149"></a>00149           <span class="keywordflow">for</span> (j=0 ; j&lt;nb_som_elem ; j++)
<a name="l00150"></a>00150             {
<a name="l00151"></a>00151               num_som = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(num_elem,j);
<a name="l00152"></a>00152               val(ielem) += ch(num_som);
<a name="l00153"></a>00153             }
<a name="l00154"></a>00154           val(ielem) /= nb_som_elem;
<a name="l00155"></a>00155         }
<a name="l00156"></a>00156     }
<a name="l00157"></a>00157   <span class="keywordflow">else</span>
<a name="l00158"></a>00158     {
<a name="l00159"></a>00159       <span class="keywordflow">for</span> (ielem=0 ; ielem&lt;nb_elems ; ielem++)
<a name="l00160"></a>00160         {
<a name="l00161"></a>00161           num_elem = les_elems(ielem);
<a name="l00162"></a>00162           <span class="keywordflow">for</span> (j=0 ; j&lt;nb_som_elem ; j++)
<a name="l00163"></a>00163             {
<a name="l00164"></a>00164               num_som = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(num_elem,j);
<a name="l00165"></a>00165               val(ielem) += ch(num_som,ncomp);
<a name="l00166"></a>00166             }
<a name="l00167"></a>00167           val(ielem) /= nb_som_elem;
<a name="l00168"></a>00168         }
<a name="l00169"></a>00169     }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="keywordflow">return</span> val;
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 
<a name="l00175"></a><a class="code" href="classChamp__Q4__implementation.html#a5abf0d7a12d4cead4ab734dd299ee592">00175</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__Q4__implementation.html#a5abf0d7a12d4cead4ab734dd299ee592">Champ_Q4_implementation::valeur_aux_sommets</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val)<span class="keyword"> const</span>
<a name="l00176"></a>00176 <span class="keyword"></span>{
<a name="l00177"></a>00177   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; cha=<a class="code" href="classChamp__implementation.html#acef977877647c519ea01aa4b19ba6613">le_champ</a>();
<a name="l00178"></a>00178   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; ch = cha.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00179"></a>00179 <span class="comment">// val = cha.valeurs();</span>
<a name="l00180"></a>00180   <span class="keywordtype">int</span> nb_compo_=cha.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00181"></a>00181 
<a name="l00182"></a>00182   <span class="keywordflow">if</span> (nb_compo_==1)
<a name="l00183"></a>00183     {
<a name="l00184"></a>00184       <span class="keywordtype">int</span> isom,nbsom = ch.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00185"></a>00185       <span class="keywordflow">for</span> (isom=0 ; isom&lt;nbsom ; isom++)
<a name="l00186"></a>00186         {
<a name="l00187"></a>00187           val(isom,0) = ch(isom);
<a name="l00188"></a>00188         }
<a name="l00189"></a>00189     }
<a name="l00190"></a>00190   <span class="keywordflow">else</span>
<a name="l00191"></a>00191     {
<a name="l00192"></a>00192       <span class="keywordtype">int</span> isom,nbsom = ch.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00193"></a>00193       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ncomp=0 ; ncomp&lt;nb_compo_ ; ncomp++)
<a name="l00194"></a>00194         {
<a name="l00195"></a>00195           <span class="keywordflow">for</span> (isom=0 ; isom&lt;nbsom ; isom++)
<a name="l00196"></a>00196             {
<a name="l00197"></a>00197               val(isom,ncomp) = ch(isom,ncomp);
<a name="l00198"></a>00198             }
<a name="l00199"></a>00199         }
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201   <span class="keywordflow">return</span> val;
<a name="l00202"></a>00202 }
<a name="l00203"></a><a class="code" href="classChamp__Q4__implementation.html#a429ace6a77ffc78dd988d32d685c57ca">00203</a> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; <a class="code" href="classChamp__Q4__implementation.html#a429ace6a77ffc78dd988d32d685c57ca">Champ_Q4_implementation::valeur_aux_sommets_compo</a>(<span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; val, <span class="keywordtype">int</span> ncomp)<span class="keyword"> const</span>
<a name="l00204"></a>00204 <span class="keyword"></span>{
<a name="l00205"></a>00205   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; cha=<a class="code" href="classChamp__implementation.html#acef977877647c519ea01aa4b19ba6613">le_champ</a>();
<a name="l00206"></a>00206   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; ch = cha.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00207"></a>00207   <span class="keywordtype">int</span> nb_compo_=cha.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00208"></a>00208 
<a name="l00209"></a>00209   <span class="keywordflow">if</span> (nb_compo_==1)
<a name="l00210"></a>00210     {
<a name="l00211"></a>00211       assert(ncomp==0);
<a name="l00212"></a>00212       <span class="keywordtype">int</span> isom,nbsom = ch.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00213"></a>00213       <span class="keywordflow">for</span> (isom=0 ; isom&lt;nbsom ; isom++)
<a name="l00214"></a>00214         {
<a name="l00215"></a>00215           val(isom) = ch(isom);
<a name="l00216"></a>00216         }
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218   <span class="keywordflow">else</span>
<a name="l00219"></a>00219     {
<a name="l00220"></a>00220       <span class="keywordtype">int</span> isom,nbsom = ch.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00221"></a>00221       <span class="keywordflow">for</span> (isom=0 ; isom&lt;nbsom ; isom++)
<a name="l00222"></a>00222         {
<a name="l00223"></a>00223           val(isom) = ch(isom,ncomp);
<a name="l00224"></a>00224         }
<a name="l00225"></a>00225     }
<a name="l00226"></a>00226   <span class="keywordflow">return</span> val;
<a name="l00227"></a>00227 }
<a name="l00228"></a>00228 
<a name="l00229"></a><a class="code" href="classChamp__Q4__implementation.html#ad6629c9fbd8c1a8d04346f4ffdd59c47">00229</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__Q4__implementation.html#ad6629c9fbd8c1a8d04346f4ffdd59c47">Champ_Q4_implementation::remplir_coord_noeuds</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; positions)<span class="keyword"> const</span>
<a name="l00230"></a>00230 <span class="keyword"></span>{
<a name="l00231"></a>00231   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coordsom = <a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00232"></a>00232   positions = coordsom;
<a name="l00233"></a>00233   <span class="keywordflow">return</span> positions;
<a name="l00234"></a>00234 }
<a name="l00235"></a>00235 
<a name="l00236"></a><a class="code" href="classChamp__Q4__implementation.html#a5ce10d5bd40cfcb7bc77f1bd2f7de180">00236</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__Q4__implementation.html#a5ce10d5bd40cfcb7bc77f1bd2f7de180">Champ_Q4_implementation::remplir_coord_noeuds_et_polys</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; positions,
<a name="l00237"></a>00237                                                            <a class="code" href="classIntVect.html">IntVect</a>&amp; polys)<span class="keyword"> const</span>
<a name="l00238"></a>00238 <span class="keyword"></span>{
<a name="l00239"></a>00239   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_Q4_implementation::remplir_coord_noeuds_et_polys not implemented&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00240"></a>00240   assert(0);
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <span class="keywordtype">int</span> nb_elem=<a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00243"></a>00243   polys.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_elem);
<a name="l00244"></a>00244   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_elem; i++)
<a name="l00245"></a>00245     polys(i)=i;
<a name="l00246"></a>00246   <span class="keywordflow">return</span> 1;
<a name="l00247"></a>00247 }
<a name="l00248"></a>00248 
<a name="l00249"></a><a class="code" href="classChamp__Q4__implementation.html#aef0aa8a407db8cdff57e80df0705859b">00249</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__Q4__implementation.html#aef0aa8a407db8cdff57e80df0705859b">Champ_Q4_implementation::imprime_Q4</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os, <span class="keywordtype">int</span> ncomp)<span class="keyword"> const</span>
<a name="l00250"></a>00250 <span class="keyword"></span>{
<a name="l00251"></a>00251   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; cha=<a class="code" href="classChamp__implementation.html#acef977877647c519ea01aa4b19ba6613">le_champ</a>();
<a name="l00252"></a>00252   <span class="keywordtype">int</span> nb_compo_=cha.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00253"></a>00253   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; la_zone=<a class="code" href="classChamp__implementation.html#a66052aa2858507b8a7b58f6beab245ad">zone</a>();
<a name="l00254"></a>00254   <span class="keywordtype">int</span> nb_som_tot = la_zone.<a class="code" href="classZone.html#a01ed67af826d6045ef4eacfb87a663e8" title="Renvoie le nombre total de sommets de la zone. i.e. le nombre de sommets reels et virtuels sur le pro...">nb_som_tot</a>();
<a name="l00255"></a>00255   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val = cha.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00256"></a>00256   <span class="keywordtype">int</span> som;
<a name="l00257"></a>00257 <span class="comment">// On recalcule les centres de gravite :</span>
<a name="l00258"></a>00258   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> pos_som = la_zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00259"></a>00259   os &lt;&lt; nb_som_tot &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00260"></a>00260   <span class="keywordflow">for</span> (som=0; som&lt;nb_som_tot; som++)
<a name="l00261"></a>00261     {
<a name="l00262"></a>00262       <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>==3)
<a name="l00263"></a>00263         os &lt;&lt; pos_som(som,0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; pos_som(som,1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; pos_som(som,2) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> ;
<a name="l00264"></a>00264       <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>==2)
<a name="l00265"></a>00265         os &lt;&lt; pos_som(som,0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; pos_som(som,1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> ;
<a name="l00266"></a>00266       <span class="keywordflow">if</span> (nb_compo_ == 1)
<a name="l00267"></a>00267         os &lt;&lt; val(som) &lt;&lt; finl;
<a name="l00268"></a>00268       <span class="keywordflow">else</span>
<a name="l00269"></a>00269         os &lt;&lt; val(som,ncomp) &lt;&lt; finl;
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271   os &lt;&lt; finl;
<a name="l00272"></a>00272   <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;Champ_Q4_implementation::imprime_Q4 END &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; &quot;</span> &lt;&lt; finl;
<a name="l00273"></a>00273   <span class="keywordflow">return</span> 1;
<a name="l00274"></a>00274 }
<a name="l00275"></a>00275 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:14 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
