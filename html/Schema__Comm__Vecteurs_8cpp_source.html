<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TRUST: src/Kernel/Utilitaires/Schema_Comm_Vecteurs.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TRUST<span id="projectnumber">&#160;1.9.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_4ebb9cf478835123b919db691d6366a3.html">Kernel</a></li><li class="navelem"><a class="el" href="dir_cdaacd66118cd3761cec6ba1adfb2dd4.html">Utilitaires</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">Schema_Comm_Vecteurs.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="Schema__Comm__Vecteurs_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/****************************************************************************</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">* Copyright (c) 2022, CEA</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">* All rights reserved.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">*</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">*</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">*</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">*****************************************************************************/</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;<a class="code" href="Schema__Comm__Vecteurs_8h.html">Schema_Comm_Vecteurs.h</a>&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;<a class="code" href="Comm__Group_8h.html">Comm_Group.h</a>&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;<a class="code" href="PE__Groups_8h.html">PE_Groups.h</a>&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="keywordtype">int</span> <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a53368cc5b731fda45880a64e126551f1">Schema_Comm_Vecteurs::buffer_locked_</a>;</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><a class="code hl_class" href="classTRUSTArray.html">ArrOfDouble</a> <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a2fab4d2b9a4370b5be227b0221b5f16b">Schema_Comm_Vecteurs::tmp_area_double_</a>;</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><a class="code hl_class" href="classTRUSTArray.html">ArrOfInt</a> <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a76a394eefd359ca8c00c459124aa4433">Schema_Comm_Vecteurs::tmp_area_int_</a>;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><a class="code hl_class" href="classSchema__Comm__Vecteurs__Static__Data.html">Schema_Comm_Vecteurs_Static_Data</a> <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">Schema_Comm_Vecteurs::sdata_</a>;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs__Static__Data.html#accb766de57a5b0363ad0e07f5004c330">   25</a></span><a class="code hl_function" href="classSchema__Comm__Vecteurs__Static__Data.html#accb766de57a5b0363ad0e07f5004c330">Schema_Comm_Vecteurs_Static_Data::Schema_Comm_Vecteurs_Static_Data</a>()</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>{</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a> = 0;</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a49e6d562d9107c76f4b09c94d2afaa04">buffer_base_size_</a> = 0;</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a> = 0;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a28f343988f1e7d0e8795e0d031efe439">buf_pointers_size_</a> = 0;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>}</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs__Static__Data.html#a108a25291e8ef56311d8fde3da034c56">   33</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classSchema__Comm__Vecteurs__Static__Data.html#a108a25291e8ef56311d8fde3da034c56">Schema_Comm_Vecteurs_Static_Data::init</a>(<span class="keywordtype">int</span> min_buf_size)</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>{</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a28f343988f1e7d0e8795e0d031efe439">buf_pointers_size_</a> == 0)</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    {</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>      <span class="keywordtype">int</span> n = <a class="code hl_function" href="classPE__Groups.html#af38ed6631e572dc5117361b3f26a47a3">PE_Groups::groupe_TRUST</a>().<a class="code hl_function" href="classComm__Group.html#a77f7c2af23e60af705eeaeac448dce5d">nproc</a>();</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a28f343988f1e7d0e8795e0d031efe439">buf_pointers_size_</a> = n * 2; <span class="comment">//!&lt; Maximum requis si on echange avec tous les procs dans exchange()</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a> = <span class="keyword">new</span> <span class="keywordtype">char</span>*[n*2];</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n*2; i++)</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>        <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a>[i] = 0;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    }</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment">// Le buffer global a-t-il une taille suffisante ?</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a49e6d562d9107c76f4b09c94d2afaa04">buffer_base_size_</a> &lt; min_buf_size)</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    {</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>      <span class="keyword">delete</span> [] <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a>;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a> = <span class="keyword">new</span> <span class="keywordtype">char</span>[min_buf_size];</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="comment">// GF ajout de la mise a zero pour mpiwrapper valgrind mais est ce util ?</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; min_buf_size; i++)</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>        <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a>[i] = 0;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a49e6d562d9107c76f4b09c94d2afaa04">buffer_base_size_</a> = min_buf_size;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>      <a class="code hl_function" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd">Process::Journal</a>() &lt;&lt; <span class="stringliteral">&quot;Schema_Comm_Vecteurs::end_init() reallocating buffer, size= &quot;</span> &lt;&lt; <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a49e6d562d9107c76f4b09c94d2afaa04">buffer_base_size_</a> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    }</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>}</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs__Static__Data.html#ad938efa7d8155bcd8909735fe6634a5e">   56</a></span><a class="code hl_function" href="classSchema__Comm__Vecteurs__Static__Data.html#ad938efa7d8155bcd8909735fe6634a5e">Schema_Comm_Vecteurs_Static_Data::~Schema_Comm_Vecteurs_Static_Data</a>()</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>{</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  <span class="keyword">delete</span>[] <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  <span class="keyword">delete</span>[] <a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>}</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#a6951f896ebedb99dad6dfbcfe4be7a67">   62</a></span><a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a6951f896ebedb99dad6dfbcfe4be7a67">Schema_Comm_Vecteurs::Schema_Comm_Vecteurs</a>()</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>{</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> = <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7faab624dd5c19c008840a1aa849d9e82dc">RESET</a>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7c2cb947c5f755b7bcc8256246ccfdb5">set_smart_resize</a>(1);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7c2cb947c5f755b7bcc8256246ccfdb5">set_smart_resize</a>(1);</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7c2cb947c5f755b7bcc8256246ccfdb5">set_smart_resize</a>(1);</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7c2cb947c5f755b7bcc8256246ccfdb5">set_smart_resize</a>(1);</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>}</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#ad98e7188d4e47242a0fae0c98a49cbdb">   71</a></span><a class="code hl_function" href="classSchema__Comm__Vecteurs.html#ad98e7188d4e47242a0fae0c98a49cbdb">Schema_Comm_Vecteurs::~Schema_Comm_Vecteurs</a>()</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>{</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  assert (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fab012d408c1973759c4c1877bd2f4e2b1">END_INIT</a> || <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7faab624dd5c19c008840a1aa849d9e82dc">RESET</a>);</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>}</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="comment">// Precondition: etat RESET ou END_INIT</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment">// Postcondition: etat BEGIN_INIT</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="comment">//</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="comment">//! Reinitialise les tailles de buffers.&lt;br&gt;Il faut ensuite definir les tailles de buffers avec add_send/recv_area_...()&lt;br&gt;Cette methode doit etre appelee simultanement sur tous les processeurs du groupe.</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#a611c6c0d69aae3a85657a4811a745dd6">   81</a></span><span class="comment"></span><span class="keywordtype">void</span> <a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a611c6c0d69aae3a85657a4811a745dd6">Schema_Comm_Vecteurs::begin_init</a>()</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>{</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  assert(<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fab012d408c1973759c4c1877bd2f4e2b1">END_INIT</a> || <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7faab624dd5c19c008840a1aa849d9e82dc">RESET</a>);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="comment">// Reset des tableaux sizes_</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> np = <a class="code hl_function" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1">Process::nproc</a>();</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7fdab39e76f6cb0f5a5691eaaee32d8c">resize_array</a>(np, <a class="code hl_enumvalue" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a> = 0;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7fdab39e76f6cb0f5a5691eaaee32d8c">resize_array</a>(np, <a class="code hl_enumvalue" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a> = 0;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7fdab39e76f6cb0f5a5691eaaee32d8c">resize_array</a>(0);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7fdab39e76f6cb0f5a5691eaaee32d8c">resize_array</a>(0);</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#af1bf17b00de4bd2e96695f94f68ea791">sorted_</a> = 1;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> = <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa707bf7dddcf9ecd02c8606e508a21449">BEGIN_INIT</a>;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>}</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="comment">// Precondition: etat BEGIN_INIT</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment">// Postcondtion: etat END_INIT</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment">//</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">//</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment">//</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="comment">//! Une fois les donnees a echanger declarees avec add_send/recv_area_...(),&lt;br&gt;initialise les offset de buffers et alloue un buffer global de taille&lt;br&gt;suffisante.&lt;br&gt;Methode a appeler par tous les processeurs du groupe.</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#a60c477436f012ff4caadc23b4f6626d9">  103</a></span><span class="comment"></span><span class="keywordtype">void</span> <a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a60c477436f012ff4caadc23b4f6626d9">Schema_Comm_Vecteurs::end_init</a>()</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>{</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  assert(<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa707bf7dddcf9ecd02c8606e508a21449">BEGIN_INIT</a>);</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  assert(<a class="code hl_function" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1">Process::nproc</a>() == <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>());</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment">// Verification des tailles en emission et en reception:</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="classComm__Group.html#a0f230fe65c9f52fd2a168a1ea70e7b15">Comm_Group::check_enabled</a>())</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> n = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>      <a class="code hl_class" href="classTRUSTArray.html">ArrOfInt</a> tmp(n);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>      <a class="code hl_function" href="communications_8cpp.html#a11460f0a3e3fa43ee1ed51b9b881be89">envoyer_all_to_all</a>(<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>, tmp);</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>      <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        <span class="keywordflow">if</span> (tmp[i] != <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>[i])</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>          err++;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd">Process::mp_sum</a>(err))</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>          <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Schema_Comm_Vecteurs::end_init(): send_size_ and recv_size_ don&#39;t match, see log files&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>          <a class="code hl_function" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd">Process::Journal</a>() &lt;&lt; <span class="stringliteral">&quot;Error in Schema_Comm_Vecteurs::end_init():\n&quot;</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>                             &lt;&lt; <span class="stringliteral">&quot;send_sizes_ = &quot;</span> &lt;&lt; <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                             &lt;&lt; <span class="stringliteral">&quot;\n recv_sizes_ = &quot;</span> &lt;&lt; <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>          <a class="code hl_function" href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1">Process::barrier</a>();</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>          <a class="code hl_function" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a>();</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        }</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    }</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="comment">// Tri des numeros de processeurs dans l&#39;ordre croissant</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#af1bf17b00de4bd2e96695f94f68ea791">sorted_</a>)</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    {</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#a6380491c50b8df1bc144b70836b73da5">ordonne_array</a>();</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#a6380491c50b8df1bc144b70836b73da5">ordonne_array</a>();</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    }</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> nsend = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> nrecv = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  <span class="keywordtype">int</span> offset = 0;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  <span class="keywordflow">for</span> (i = 0; i &lt; nsend; i++)</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    {</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>      <span class="keywordtype">int</span> pe = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>[i];</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> size = (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>[pe]+7)&amp;(~7); <span class="comment">//!&lt; align size on 8 bytes</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>      offset += size;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>      assert(pe &gt;= i); <span class="comment">//!&lt; send_procs_ trie dans l&#39;ordre croissant</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>[i] = size;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    }</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="keywordflow">for</span> (i = 0; i &lt; nrecv; i++)</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    {</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>      <span class="keywordtype">int</span> pe = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>[i];</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> size = (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>[pe]+7)&amp;(~7); <span class="comment">//!&lt; align size on 8 bytes</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>      offset += size;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>      assert(pe &gt;= i); <span class="comment">//!&lt; recv_procs_ trie dans l&#39;ordre croissant</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>[i] = size;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#aca1abcf441c2f3c71b392ac830bbc912">min_buf_size_</a> = offset; <span class="comment">//!&lt; taille du buffer a alouer    recv_buf_offset_[i] = offset;</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7fdab39e76f6cb0f5a5691eaaee32d8c">resize_array</a>(nsend);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>.<a class="code hl_function" href="classTRUSTArray.html#a7fdab39e76f6cb0f5a5691eaaee32d8c">resize_array</a>(nrecv);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> = <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fab012d408c1973759c4c1877bd2f4e2b1">END_INIT</a>;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>}</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span><span class="comment">// Precondition: Le schema doit etre initialise (etat END_INIT),</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="comment">// et les buffers non bloques (pas d&#39;autre communication en cours</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span><span class="comment">// avec ce schema)</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span><span class="comment">// Postcondition: Le schema est dans l&#39;etat BEGIN_COMM, buffers bloques.</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span><span class="comment">//</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="comment">//</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span><span class="comment">//</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span><span class="comment">//</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span><span class="comment">//</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span><span class="comment">//</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="comment">//</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="comment">//! Commence un nouvel echange de donnees (les tailles de buffers&lt;br&gt;doivent avoir ete initialisees avec begin_init() ... end_init())&lt;br&gt;On place les sdata_.buf_pointers_ au debut des buffers pour chaque&lt;br&gt;processeur pour lequel un buffer a ete declare en &quot;send&quot;&lt;br&gt;Apres begin_comm(), il faut remplir les buffers en utilisant&lt;br&gt;get_next_area_int() ou get_next_area_double() dans le meme&lt;br&gt;ordre que celui declare dans la phase d&#39;initialisation,&lt;br&gt;puis appeler exchange()</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#a5174c71752ad18a1ebad363832aa97fe">  173</a></span><span class="comment"></span><span class="keywordtype">void</span> <a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a5174c71752ad18a1ebad363832aa97fe">Schema_Comm_Vecteurs::begin_comm</a>()</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>{</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  assert(<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fab012d408c1973759c4c1877bd2f4e2b1">END_INIT</a>);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="comment">// Pas un assert car erreur grave et sans doute rare...</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a53368cc5b731fda45880a64e126551f1">buffer_locked_</a>)</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    {</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in Schema_Comm_Vecteurs::begin_comm(): buffers already locked by another communication&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>      <a class="code hl_function" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a>();</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    }</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a53368cc5b731fda45880a64e126551f1">buffer_locked_</a> = 1;</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_function" href="classSchema__Comm__Vecteurs__Static__Data.html#a108a25291e8ef56311d8fde3da034c56">init</a>(<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#aca1abcf441c2f3c71b392ac830bbc912">min_buf_size_</a>);</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span><span class="comment">// Fait pointer les buffers sur le debut des send_buffers</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  <span class="keywordtype">char</span> *ptr = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a>;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span> </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> nsend = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nsend; i++)</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    {</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> pe = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>[i];</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a>[pe] = ptr;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>      ptr += <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>[i];</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    }</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a53368cc5b731fda45880a64e126551f1">buffer_locked_</a> = 1;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> = <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674">BEGIN_COMM</a>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>}</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#abf1ef0ef60e6756f9c4c8346262a35b1">  199</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classSchema__Comm__Vecteurs.html#abf1ef0ef60e6756f9c4c8346262a35b1">Schema_Comm_Vecteurs::exchange</a>()</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>{</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  assert(<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674">BEGIN_COMM</a>);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="comment">// Verifie que tous les buffers sont pleins</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  assert(<a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a8df69217bc72cd248b24e733301297eb">check_buffers_full</a>());</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment">// Echange les donnees</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> nsend = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> nrecv = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span><span class="comment">// On utilise le tableau sdata_.buf_pointers_ pour stocker les adresses</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="comment">// des buffers a donner a Comm_Group::send_recv_start()</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="comment">// (dimensionne a 2*nproc() donc suffisant)</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>  assert(nsend + nrecv &lt;= <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a28f343988f1e7d0e8795e0d031efe439">buf_pointers_size_</a>);</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>  <span class="keywordtype">char</span> ** send_bufs = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a>;</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>  <span class="keywordtype">char</span> ** recv_bufs = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a> + nsend;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  <span class="keywordtype">char</span> * ptr = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a>;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>  <span class="keywordflow">for</span> (i = 0; i &lt; nsend; i++)</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>      send_bufs[i] = ptr;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>      ptr += <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>[i];</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>  <span class="keywordtype">char</span> * recv_ptr_base = ptr; <span class="comment">//!&lt; Pour toute a l&#39;heure adresse de base des buffers de reception</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  <span class="keywordflow">for</span> (i = 0; i &lt; nrecv; i++)</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>      recv_bufs[i] = ptr;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>      ptr += <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>[i];</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>  <span class="keyword">const</span> <a class="code hl_class" href="classComm__Group.html">Comm_Group</a>&amp; group = <a class="code hl_function" href="classPE__Groups.html#ae6ca0277a58f2ab34ebfb3216578fa75">PE_Groups::current_group</a>();</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span><span class="comment">// On devrait pouvoir mettre un int64 comme type ici car</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span><span class="comment">// les buffers sont de alignes sur 8 octets.</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  group.<a class="code hl_function" href="classComm__Group.html#a7fb0eaad288afd68e88514f0ab9ee42d">send_recv_start</a>(<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>, <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>, send_bufs,</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>                        <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>, <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>, recv_bufs,</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>                        <a class="code hl_enumvalue" href="classComm__Group.html#a93c4c5b0887e1fc63a123d11e7da0118ace1f14aca3731a4ba1a90890825dc33e">Comm_Group::INT</a>);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  group.<a class="code hl_function" href="classComm__Group.html#a68bdde2db96498a1024cd1db4d371bcd">send_recv_finish</a>();</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="comment">// Fait pointer les buffers sur les donnees recues</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  ptr = recv_ptr_base;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  <span class="keywordflow">for</span> (i = 0; i &lt; nrecv; i++)</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    {</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> pe = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>[i];</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>      <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a>[pe] = ptr;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>      ptr += <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>[i];</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> = <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa5e2a97a86e391667109817a944f3df14">EXCHANGED</a>;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>}</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#a09f608641aa8e3349ac966b1eb3b07e1">  245</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a09f608641aa8e3349ac966b1eb3b07e1">Schema_Comm_Vecteurs::end_comm</a>()</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>{</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  assert(<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa5e2a97a86e391667109817a944f3df14">EXCHANGED</a>);</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span><span class="comment">// Verifie qu&#39;on a bien lu toutes les donnees</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  assert(<a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a8df69217bc72cd248b24e733301297eb">check_buffers_full</a>());</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> = <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fab012d408c1973759c4c1877bd2f4e2b1">END_INIT</a>; <span class="comment">//!&lt; pret pour un nouveau begin_comm()</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>  <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a53368cc5b731fda45880a64e126551f1">buffer_locked_</a> = 0;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>}</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="comment">//</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment">//</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span><span class="comment">//! Selon status_, verifie que tous les pointeurs de buffers&lt;br&gt;pointent a la fin du buffer aloue pour chaque processeur en emission&lt;br&gt;ou reception. Renvoie 0 en cas d&#39;erreur (si un buffer n&#39;a pas ete&lt;br&gt;entierement rempli ou vide)</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#a8df69217bc72cd248b24e733301297eb">  258</a></span><span class="comment"></span><span class="keywordtype">int</span> <a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a8df69217bc72cd248b24e733301297eb">Schema_Comm_Vecteurs::check_buffers_full</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  <span class="keywordtype">char</span> *ptr = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a>;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> nsend = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>  <span class="keywordtype">int</span> ok = 1;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674">BEGIN_COMM</a>)</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>      <span class="keywordflow">for</span> (i = 0; i &lt; nsend; i++)</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>          ptr += <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>[i];</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>          <span class="keyword">const</span> <span class="keywordtype">int</span> pe = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>[i];</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>          <span class="keywordtype">char</span> *ptr2 = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a>[pe];</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>          <a class="code hl_define" href="Schema__Comm__Vecteurs_8h.html#acaaec25a198425e04f2cab9826df83e6">ALIGN_SIZE</a>(ptr2, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>          <span class="keywordflow">if</span> (ptr != ptr2)</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>            {</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>              <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in Schema_Comm_Vecteurs::check_buffers_full(): send buffer for processor &quot;</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>                   &lt;&lt; pe &lt;&lt; <span class="stringliteral">&quot; is not full&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>              ok = 0;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>            }</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        }</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    }</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa5e2a97a86e391667109817a944f3df14">EXCHANGED</a>)</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>      <span class="keywordflow">for</span> (i = 0; i &lt; nsend; i++)</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        ptr += <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>[i];</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> nrecv = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>      <span class="keywordflow">for</span> (i = 0; i &lt; nrecv; i++)</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        {</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>          ptr += <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>[i];</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>          <span class="keyword">const</span> <span class="keywordtype">int</span> pe = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>[i];</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>          <span class="keywordtype">char</span> *ptr2 = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a>[pe];</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>          <a class="code hl_define" href="Schema__Comm__Vecteurs_8h.html#acaaec25a198425e04f2cab9826df83e6">ALIGN_SIZE</a>(ptr2, <span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>          <span class="keywordflow">if</span> (ptr != ptr2)</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>            {</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>              <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in Schema_Comm_Vecteurs::check_buffers_full(): recv buffer for processor &quot;</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>                   &lt;&lt; pe &lt;&lt; <span class="stringliteral">&quot; has not been read entirely&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>              ok = 0;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>            }</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        }</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    }</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    {</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>      <a class="code hl_define" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;check_buffers_full: What ?&quot;</span> &lt;&lt; <a class="code hl_variable" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>      <a class="code hl_function" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a>();</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    }</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>  <span class="keywordflow">return</span> ok;</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>}</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="comment"></span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="comment">//! verifie qu&#39;il reste au moins byte_size octets dans le buffer du processeur pe</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno"><a class="line" href="classSchema__Comm__Vecteurs.html#a4b8c1defca657eaaa9aab90c9cedebe3">  308</a></span><span class="comment"></span><span class="keywordtype">int</span> <a class="code hl_function" href="classSchema__Comm__Vecteurs.html#a4b8c1defca657eaaa9aab90c9cedebe3">Schema_Comm_Vecteurs::check_next_area</a>(<span class="keywordtype">int</span> pe, <span class="keywordtype">int</span> byte_size)<span class="keyword"> const</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>  assert(byte_size &gt;= 0);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  <span class="keywordflow">if</span> (byte_size == 0)</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    }</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>  <span class="keyword">const</span> <a class="code hl_class" href="classTRUSTArray.html">ArrOfInt</a>&amp; procs = (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674">BEGIN_COMM</a>) ? <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a> : <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">recv_procs_</a>;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>  <span class="keyword">const</span> <a class="code hl_class" href="classTRUSTArray.html">ArrOfInt</a>&amp; sizes = (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> == <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674">BEGIN_COMM</a>) ? <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a> : <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">recv_buf_sizes_</a>;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> n = procs.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>  <span class="keywordtype">int</span> i;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>  <span class="keywordtype">char</span> * ptr = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">buffer_base_</a>;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span><span class="comment">// Si on est en phase de reception, le debut des buffers de reception se trouve a la</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="comment">// fin des buffers en emission:</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">status_</a> != <a class="code hl_enumvalue" href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674">BEGIN_COMM</a>)</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> nsend = <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">send_procs_</a>.<a class="code hl_function" href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">size_array</a>();</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>      <span class="keywordflow">for</span> (i = 0; i &lt; nsend; i++)</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        ptr += <a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">send_buf_sizes_</a>[i];</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    }</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>  <span class="keywordflow">for</span> (i = 0; i &lt; n; i++)</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>      ptr += sizes[i]; <span class="comment">//!&lt; pointeur sur la fin du buffer de ce processeur</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>      <span class="keywordflow">if</span> (procs[i] == pe)</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        <span class="keywordflow">return</span> (<a class="code hl_variable" href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">sdata_</a>.<a class="code hl_variable" href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">buf_pointers_</a>[pe] + byte_size) &lt;= ptr;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span><span class="comment">// aucun buffer declare pour ce processeur</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>}</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span> </div>
<div class="ttc" id="aComm__Group_8h_html"><div class="ttname"><a href="Comm__Group_8h.html">Comm_Group.h</a></div></div>
<div class="ttc" id="aEntreeSortie_8h_html_a5ebb6b5243d6167369bddecb78d0b5b8"><div class="ttname"><a href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a></div><div class="ttdeci">#define Cerr</div><div class="ttdef"><b>Definition:</b> <a href="EntreeSortie_8h_source.html#l00025">EntreeSortie.h:25</a></div></div>
<div class="ttc" id="aEntreeSortie_8h_html_a7f716d3c5b6411631d5d0700ead09467"><div class="ttname"><a href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a></div><div class="ttdeci">const Separateur finl</div></div>
<div class="ttc" id="aPE__Groups_8h_html"><div class="ttname"><a href="PE__Groups_8h.html">PE_Groups.h</a></div></div>
<div class="ttc" id="aSchema__Comm__Vecteurs_8h_html"><div class="ttname"><a href="Schema__Comm__Vecteurs_8h.html">Schema_Comm_Vecteurs.h</a></div></div>
<div class="ttc" id="aSchema__Comm__Vecteurs_8h_html_acaaec25a198425e04f2cab9826df83e6"><div class="ttname"><a href="Schema__Comm__Vecteurs_8h.html#acaaec25a198425e04f2cab9826df83e6">ALIGN_SIZE</a></div><div class="ttdeci">#define ALIGN_SIZE(ptr, sz)</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00123">Schema_Comm_Vecteurs.h:123</a></div></div>
<div class="ttc" id="aclassArray__base_html_abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68"><div class="ttname"><a href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a></div><div class="ttdeci">@ NOCOPY_NOINIT</div><div class="ttdef"><b>Definition:</b> <a href="Array__base_8h_source.html#l00032">Array_base.h:32</a></div></div>
<div class="ttc" id="aclassComm__Group_html"><div class="ttname"><a href="classComm__Group.html">Comm_Group</a></div><div class="ttdoc">: Cette classe decrit un groupe de processeurs sur lesquels une portion de code s'execute simultaneme...</div><div class="ttdef"><b>Definition:</b> <a href="Comm__Group_8h_source.html#l00036">Comm_Group.h:37</a></div></div>
<div class="ttc" id="aclassComm__Group_html_a0f230fe65c9f52fd2a168a1ea70e7b15"><div class="ttname"><a href="classComm__Group.html#a0f230fe65c9f52fd2a168a1ea70e7b15">Comm_Group::check_enabled</a></div><div class="ttdeci">static int check_enabled()</div><div class="ttdef"><b>Definition:</b> <a href="Comm__Group_8h_source.html#l00136">Comm_Group.h:136</a></div></div>
<div class="ttc" id="aclassComm__Group_html_a68bdde2db96498a1024cd1db4d371bcd"><div class="ttname"><a href="classComm__Group.html#a68bdde2db96498a1024cd1db4d371bcd">Comm_Group::send_recv_finish</a></div><div class="ttdeci">virtual void send_recv_finish() const =0</div></div>
<div class="ttc" id="aclassComm__Group_html_a77f7c2af23e60af705eeaeac448dce5d"><div class="ttname"><a href="classComm__Group.html#a77f7c2af23e60af705eeaeac448dce5d">Comm_Group::nproc</a></div><div class="ttdeci">int nproc() const</div><div class="ttdoc">Renvoie le nombre de processeurs dans le groupe *this.</div><div class="ttdef"><b>Definition:</b> <a href="Comm__Group_8h_source.html#l00162">Comm_Group.h:162</a></div></div>
<div class="ttc" id="aclassComm__Group_html_a7fb0eaad288afd68e88514f0ab9ee42d"><div class="ttname"><a href="classComm__Group.html#a7fb0eaad288afd68e88514f0ab9ee42d">Comm_Group::send_recv_start</a></div><div class="ttdeci">virtual void send_recv_start(const ArrOfInt &amp;send_list, const ArrOfInt &amp;send_size, const char *const *const send_buffers, const ArrOfInt &amp;recv_list, const ArrOfInt &amp;recv_size, char *const *const recv_buffers, TypeHint typehint=CHAR) const =0</div></div>
<div class="ttc" id="aclassComm__Group_html_a93c4c5b0887e1fc63a123d11e7da0118ace1f14aca3731a4ba1a90890825dc33e"><div class="ttname"><a href="classComm__Group.html#a93c4c5b0887e1fc63a123d11e7da0118ace1f14aca3731a4ba1a90890825dc33e">Comm_Group::INT</a></div><div class="ttdeci">@ INT</div><div class="ttdef"><b>Definition:</b> <a href="Comm__Group_8h_source.html#l00068">Comm_Group.h:68</a></div></div>
<div class="ttc" id="aclassPE__Groups_html_ae6ca0277a58f2ab34ebfb3216578fa75"><div class="ttname"><a href="classPE__Groups.html#ae6ca0277a58f2ab34ebfb3216578fa75">PE_Groups::current_group</a></div><div class="ttdeci">static const Comm_Group &amp; current_group()</div><div class="ttdoc">renvoie une reference au groupe de processeurs actif courant</div><div class="ttdef"><b>Definition:</b> <a href="PE__Groups_8h_source.html#l00050">PE_Groups.h:50</a></div></div>
<div class="ttc" id="aclassPE__Groups_html_af38ed6631e572dc5117361b3f26a47a3"><div class="ttname"><a href="classPE__Groups.html#af38ed6631e572dc5117361b3f26a47a3">PE_Groups::groupe_TRUST</a></div><div class="ttdeci">static const Comm_Group &amp; groupe_TRUST()</div><div class="ttdoc">Renvoie une reference au groupe de tous les processeurs TRUST.</div><div class="ttdef"><b>Definition:</b> <a href="PE__Groups_8cpp_source.html#l00152">PE_Groups.cpp:152</a></div></div>
<div class="ttc" id="aclassProcess_html_a57e0f54b11e6eaadbea224fa904b18dd"><div class="ttname"><a href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd">Process::Journal</a></div><div class="ttdeci">static Sortie &amp; Journal(int message_level=0)</div><div class="ttdoc">Renvoie un objet statique de type Sortie qui sert de journal d'evenements. Si message_level &lt;= verbos...</div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00335">Process.cpp:335</a></div></div>
<div class="ttc" id="aclassProcess_html_a6bf692ce58d9578aa62ac3c07b8caaa1"><div class="ttname"><a href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1">Process::nproc</a></div><div class="ttdeci">static int nproc()</div><div class="ttdoc">renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...</div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00099">Process.cpp:99</a></div></div>
<div class="ttc" id="aclassProcess_html_a7d23bc1ef94b3f0623fbc79d034c27fd"><div class="ttname"><a href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd">Process::mp_sum</a></div><div class="ttdeci">static double mp_sum(double)</div><div class="ttdoc">Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()</div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00168">Process.cpp:168</a></div></div>
<div class="ttc" id="aclassProcess_html_aa9e74a5c06a68ea38298a08ea401e7b1"><div class="ttname"><a href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1">Process::barrier</a></div><div class="ttdeci">static void barrier()</div><div class="ttdoc">Synchronise tous les processeurs du groupe courant&lt;br&gt;(attend que tous les processeurs soient arrives...</div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00117">Process.cpp:117</a></div></div>
<div class="ttc" id="aclassProcess_html_acc2fbbe761e08e5870ae605c0705491c"><div class="ttname"><a href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c">Process::exit</a></div><div class="ttdeci">static void exit(int exit_code=-1)</div><div class="ttdoc">Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...</div><div class="ttdef"><b>Definition:</b> <a href="Process_8cpp_source.html#l00213">Process.cpp:213</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs__Static__Data_html"><div class="ttname"><a href="classSchema__Comm__Vecteurs__Static__Data.html">Schema_Comm_Vecteurs_Static_Data</a></div><div class="ttdoc">Donnees statiques communes a toutes les classes Schema_Comm_Vecteur, avec destructeur pour liberer la...</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00100">Schema_Comm_Vecteurs.h:101</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs__Static__Data_html_a108a25291e8ef56311d8fde3da034c56"><div class="ttname"><a href="classSchema__Comm__Vecteurs__Static__Data.html#a108a25291e8ef56311d8fde3da034c56">Schema_Comm_Vecteurs_Static_Data::init</a></div><div class="ttdeci">void init(int size)</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00033">Schema_Comm_Vecteurs.cpp:33</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs__Static__Data_html_a17c27dc3ea91f86491469dc8a68ded0b"><div class="ttname"><a href="classSchema__Comm__Vecteurs__Static__Data.html#a17c27dc3ea91f86491469dc8a68ded0b">Schema_Comm_Vecteurs_Static_Data::buffer_base_</a></div><div class="ttdeci">char * buffer_base_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00107">Schema_Comm_Vecteurs.h:107</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs__Static__Data_html_a28f343988f1e7d0e8795e0d031efe439"><div class="ttname"><a href="classSchema__Comm__Vecteurs__Static__Data.html#a28f343988f1e7d0e8795e0d031efe439">Schema_Comm_Vecteurs_Static_Data::buf_pointers_size_</a></div><div class="ttdeci">int buf_pointers_size_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00109">Schema_Comm_Vecteurs.h:109</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs__Static__Data_html_a49e6d562d9107c76f4b09c94d2afaa04"><div class="ttname"><a href="classSchema__Comm__Vecteurs__Static__Data.html#a49e6d562d9107c76f4b09c94d2afaa04">Schema_Comm_Vecteurs_Static_Data::buffer_base_size_</a></div><div class="ttdeci">int buffer_base_size_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00108">Schema_Comm_Vecteurs.h:108</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs__Static__Data_html_a957a2b143d97af8d47d2bf69a377f9ea"><div class="ttname"><a href="classSchema__Comm__Vecteurs__Static__Data.html#a957a2b143d97af8d47d2bf69a377f9ea">Schema_Comm_Vecteurs_Static_Data::buf_pointers_</a></div><div class="ttdeci">char ** buf_pointers_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00112">Schema_Comm_Vecteurs.h:112</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs__Static__Data_html_accb766de57a5b0363ad0e07f5004c330"><div class="ttname"><a href="classSchema__Comm__Vecteurs__Static__Data.html#accb766de57a5b0363ad0e07f5004c330">Schema_Comm_Vecteurs_Static_Data::Schema_Comm_Vecteurs_Static_Data</a></div><div class="ttdeci">Schema_Comm_Vecteurs_Static_Data()</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00025">Schema_Comm_Vecteurs.cpp:25</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs__Static__Data_html_ad938efa7d8155bcd8909735fe6634a5e"><div class="ttname"><a href="classSchema__Comm__Vecteurs__Static__Data.html#ad938efa7d8155bcd8909735fe6634a5e">Schema_Comm_Vecteurs_Static_Data::~Schema_Comm_Vecteurs_Static_Data</a></div><div class="ttdeci">~Schema_Comm_Vecteurs_Static_Data()</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00056">Schema_Comm_Vecteurs.cpp:56</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a09a2147eb4b5adfa654bee03e3c18f8a"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a09a2147eb4b5adfa654bee03e3c18f8a">Schema_Comm_Vecteurs::sdata_</a></div><div class="ttdeci">static Schema_Comm_Vecteurs_Static_Data sdata_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00094">Schema_Comm_Vecteurs.h:94</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a09f608641aa8e3349ac966b1eb3b07e1"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a09f608641aa8e3349ac966b1eb3b07e1">Schema_Comm_Vecteurs::end_comm</a></div><div class="ttdeci">void end_comm()</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00245">Schema_Comm_Vecteurs.cpp:245</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a2fab4d2b9a4370b5be227b0221b5f16b"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a2fab4d2b9a4370b5be227b0221b5f16b">Schema_Comm_Vecteurs::tmp_area_double_</a></div><div class="ttdeci">static ArrOfDouble tmp_area_double_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00091">Schema_Comm_Vecteurs.h:91</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a3f5e5544b71d235ea283f7f8beb2665e"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a3f5e5544b71d235ea283f7f8beb2665e">Schema_Comm_Vecteurs::send_buf_sizes_</a></div><div class="ttdeci">ArrOfInt send_buf_sizes_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00075">Schema_Comm_Vecteurs.h:75</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a4b8c1defca657eaaa9aab90c9cedebe3"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a4b8c1defca657eaaa9aab90c9cedebe3">Schema_Comm_Vecteurs::check_next_area</a></div><div class="ttdeci">int check_next_area(int pe, int byte_size) const</div><div class="ttdoc">verifie qu'il reste au moins byte_size octets dans le buffer du processeur pe</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00308">Schema_Comm_Vecteurs.cpp:308</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a5174c71752ad18a1ebad363832aa97fe"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a5174c71752ad18a1ebad363832aa97fe">Schema_Comm_Vecteurs::begin_comm</a></div><div class="ttdeci">void begin_comm()</div><div class="ttdoc">Commence un nouvel echange de donnees (les tailles de buffers doivent avoir ete initialisees avec beg...</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00173">Schema_Comm_Vecteurs.cpp:173</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a53368cc5b731fda45880a64e126551f1"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a53368cc5b731fda45880a64e126551f1">Schema_Comm_Vecteurs::buffer_locked_</a></div><div class="ttdeci">static int buffer_locked_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00089">Schema_Comm_Vecteurs.h:89</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a60c477436f012ff4caadc23b4f6626d9"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a60c477436f012ff4caadc23b4f6626d9">Schema_Comm_Vecteurs::end_init</a></div><div class="ttdeci">void end_init()</div><div class="ttdoc">Une fois les donnees a echanger declarees avec add_send/recv_area_...(), initialise les offset de buf...</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00103">Schema_Comm_Vecteurs.cpp:103</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a611c6c0d69aae3a85657a4811a745dd6"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a611c6c0d69aae3a85657a4811a745dd6">Schema_Comm_Vecteurs::begin_init</a></div><div class="ttdeci">void begin_init()</div><div class="ttdoc">Reinitialise les tailles de buffers. Il faut ensuite definir les tailles de buffers avec add_send/rec...</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00081">Schema_Comm_Vecteurs.cpp:81</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a6951f896ebedb99dad6dfbcfe4be7a67"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a6951f896ebedb99dad6dfbcfe4be7a67">Schema_Comm_Vecteurs::Schema_Comm_Vecteurs</a></div><div class="ttdeci">Schema_Comm_Vecteurs()</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00062">Schema_Comm_Vecteurs.cpp:62</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a71a5b90321747f416727a654100b89d5"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a71a5b90321747f416727a654100b89d5">Schema_Comm_Vecteurs::recv_procs_</a></div><div class="ttdeci">ArrOfInt recv_procs_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00079">Schema_Comm_Vecteurs.h:79</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a76a394eefd359ca8c00c459124aa4433"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a76a394eefd359ca8c00c459124aa4433">Schema_Comm_Vecteurs::tmp_area_int_</a></div><div class="ttdeci">static ArrOfInt tmp_area_int_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00092">Schema_Comm_Vecteurs.h:92</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a8df69217bc72cd248b24e733301297eb"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a8df69217bc72cd248b24e733301297eb">Schema_Comm_Vecteurs::check_buffers_full</a></div><div class="ttdeci">int check_buffers_full() const</div><div class="ttdoc">Selon status_, verifie que tous les pointeurs de buffers pointent a la fin du buffer aloue pour chaqu...</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00258">Schema_Comm_Vecteurs.cpp:258</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_a9554e2a80041d4a475fe57ca335fd624"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#a9554e2a80041d4a475fe57ca335fd624">Schema_Comm_Vecteurs::status_</a></div><div class="ttdeci">Status status_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00086">Schema_Comm_Vecteurs.h:86</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_abf1ef0ef60e6756f9c4c8346262a35b1"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#abf1ef0ef60e6756f9c4c8346262a35b1">Schema_Comm_Vecteurs::exchange</a></div><div class="ttdeci">void exchange()</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00199">Schema_Comm_Vecteurs.cpp:199</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_ac4bee61e3e8a6a0d34e525f6eae82381"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#ac4bee61e3e8a6a0d34e525f6eae82381">Schema_Comm_Vecteurs::send_procs_</a></div><div class="ttdeci">ArrOfInt send_procs_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00078">Schema_Comm_Vecteurs.h:78</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_aca1abcf441c2f3c71b392ac830bbc912"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#aca1abcf441c2f3c71b392ac830bbc912">Schema_Comm_Vecteurs::min_buf_size_</a></div><div class="ttdeci">int min_buf_size_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00083">Schema_Comm_Vecteurs.h:83</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_ad98e7188d4e47242a0fae0c98a49cbdb"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#ad98e7188d4e47242a0fae0c98a49cbdb">Schema_Comm_Vecteurs::~Schema_Comm_Vecteurs</a></div><div class="ttdeci">~Schema_Comm_Vecteurs()</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8cpp_source.html#l00071">Schema_Comm_Vecteurs.cpp:71</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_ada2157628cf7d00fbedf8fd12cebcca0"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#ada2157628cf7d00fbedf8fd12cebcca0">Schema_Comm_Vecteurs::recv_buf_sizes_</a></div><div class="ttdeci">ArrOfInt recv_buf_sizes_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00076">Schema_Comm_Vecteurs.h:76</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_af0b3633b2b20429b5d91bc5b13a3fa7fa5e2a97a86e391667109817a944f3df14"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa5e2a97a86e391667109817a944f3df14">Schema_Comm_Vecteurs::EXCHANGED</a></div><div class="ttdeci">@ EXCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00085">Schema_Comm_Vecteurs.h:85</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_af0b3633b2b20429b5d91bc5b13a3fa7fa707bf7dddcf9ecd02c8606e508a21449"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa707bf7dddcf9ecd02c8606e508a21449">Schema_Comm_Vecteurs::BEGIN_INIT</a></div><div class="ttdeci">@ BEGIN_INIT</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00085">Schema_Comm_Vecteurs.h:85</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fa875fbe2bdd16fe2e9dac04573165b674">Schema_Comm_Vecteurs::BEGIN_COMM</a></div><div class="ttdeci">@ BEGIN_COMM</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00085">Schema_Comm_Vecteurs.h:85</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_af0b3633b2b20429b5d91bc5b13a3fa7faab624dd5c19c008840a1aa849d9e82dc"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7faab624dd5c19c008840a1aa849d9e82dc">Schema_Comm_Vecteurs::RESET</a></div><div class="ttdeci">@ RESET</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00085">Schema_Comm_Vecteurs.h:85</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_af0b3633b2b20429b5d91bc5b13a3fa7fab012d408c1973759c4c1877bd2f4e2b1"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#af0b3633b2b20429b5d91bc5b13a3fa7fab012d408c1973759c4c1877bd2f4e2b1">Schema_Comm_Vecteurs::END_INIT</a></div><div class="ttdeci">@ END_INIT</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00085">Schema_Comm_Vecteurs.h:85</a></div></div>
<div class="ttc" id="aclassSchema__Comm__Vecteurs_html_af1bf17b00de4bd2e96695f94f68ea791"><div class="ttname"><a href="classSchema__Comm__Vecteurs.html#af1bf17b00de4bd2e96695f94f68ea791">Schema_Comm_Vecteurs::sorted_</a></div><div class="ttdeci">int sorted_</div><div class="ttdef"><b>Definition:</b> <a href="Schema__Comm__Vecteurs_8h_source.html#l00081">Schema_Comm_Vecteurs.h:81</a></div></div>
<div class="ttc" id="aclassTRUSTArray_html"><div class="ttname"><a href="classTRUSTArray.html">TRUSTArray&lt; double &gt;</a></div></div>
<div class="ttc" id="aclassTRUSTArray_html_a6380491c50b8df1bc144b70836b73da5"><div class="ttname"><a href="classTRUSTArray.html#a6380491c50b8df1bc144b70836b73da5">TRUSTArray::ordonne_array</a></div><div class="ttdeci">void ordonne_array()</div></div>
<div class="ttc" id="aclassTRUSTArray_html_a7c2cb947c5f755b7bcc8256246ccfdb5"><div class="ttname"><a href="classTRUSTArray.html#a7c2cb947c5f755b7bcc8256246ccfdb5">TRUSTArray::set_smart_resize</a></div><div class="ttdeci">void set_smart_resize(int flag)</div><div class="ttdef"><b>Definition:</b> <a href="TRUSTArray_8tpp_source.html#l00058">TRUSTArray.tpp:58</a></div></div>
<div class="ttc" id="aclassTRUSTArray_html_a7fdab39e76f6cb0f5a5691eaaee32d8c"><div class="ttname"><a href="classTRUSTArray.html#a7fdab39e76f6cb0f5a5691eaaee32d8c">TRUSTArray::resize_array</a></div><div class="ttdeci">void resize_array(int new_size, Array_base::Resize_Options opt=COPY_INIT)</div><div class="ttdef"><b>Definition:</b> <a href="TRUSTArray_8tpp_source.html#l00038">TRUSTArray.tpp:38</a></div></div>
<div class="ttc" id="aclassTRUSTArray_html_ac03d475a56970fcc19cf624a0353e42e"><div class="ttname"><a href="classTRUSTArray.html#ac03d475a56970fcc19cf624a0353e42e">TRUSTArray::size_array</a></div><div class="ttdeci">int size_array() const</div><div class="ttdef"><b>Definition:</b> <a href="TRUSTArray_8tpp_source.html#l00195">TRUSTArray.tpp:195</a></div></div>
<div class="ttc" id="acommunications_8cpp_html_a11460f0a3e3fa43ee1ed51b9b881be89"><div class="ttname"><a href="communications_8cpp.html#a11460f0a3e3fa43ee1ed51b9b881be89">envoyer_all_to_all</a></div><div class="ttdeci">int envoyer_all_to_all(const TRUST_Vector&lt; TRUSTTab, double &gt; &amp;src, TRUST_Vector&lt; TRUSTTab, double &gt; &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="communications_8cpp_source.html#l00202">communications.cpp:202</a></div></div>
<div class="ttc" id="acommunications_8h_html"><div class="ttname"><a href="communications_8h.html">communications.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 29 2022 11:11:31 for TRUST by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
