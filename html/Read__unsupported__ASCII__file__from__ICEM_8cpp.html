<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Utilitaires/Read_unsupported_ASCII_file_from_ICEM.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">src/Kernel/Utilitaires/Read_unsupported_ASCII_file_from_ICEM.cpp File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8h_source.html">Read_unsupported_ASCII_file_from_ICEM.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="SFichierBin_8h_source.html">SFichierBin.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="EFichierBin_8h_source.html">EFichierBin.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="DoubleTab_8h_source.html">DoubleTab.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="IntTab_8h_source.html">IntTab.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="Motcle_8h_source.html">Motcle.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="Lire__Fichier_8h_source.html">Lire_Fichier.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="Objet__U_8h_source.html">Objet_U.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="Interprete_8h_source.html">Interprete.h</a>&gt;</code><br/>
</div>
<p><a href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a> (<a class="el" href="classEFichierBin.html">EFichierBin</a> &amp;s, <a class="el" href="classSFichierBin.html">SFichierBin</a> &amp;o, const char *first_caracter)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#a26381e5eeaa1740ecaab98810c296fe5">check_ICEM_binary_file</a> (<a class="el" href="classNom.html">Nom</a> &amp;filename, const <a class="el" href="classNom.html">Nom</a> &amp;nom_objet_lu)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#af587deeebcda4cf3ce74175fac52a90d">check_ICEM_ascii_file</a> (const <a class="el" href="classNom.html">Nom</a> &amp;filename, const <a class="el" href="classLire__Fichier.html">Lire_Fichier</a> &amp;keyword)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classType__info.html">Type_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#a061639be33221fc4ac414c311782386f">Read_unsupported_ASCII_file_from_ICEMbases</a> [1] = { &amp;( <a class="el" href="classLire__Fichier.html">Lire_Fichier</a> ::info_obj)}</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af587deeebcda4cf3ce74175fac52a90d"></a><!-- doxytag: member="Read_unsupported_ASCII_file_from_ICEM.cpp::check_ICEM_ascii_file" ref="af587deeebcda4cf3ce74175fac52a90d" args="(const Nom &amp;filename, const Lire_Fichier &amp;keyword)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_ICEM_ascii_file </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNom.html">Nom</a> &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classLire__Fichier.html">Lire_Fichier</a> &amp;&#160;</td>
          <td class="paramname"><em>keyword</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html#l00226">226</a> of file <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html">Read_unsupported_ASCII_file_from_ICEM.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="Nom_8cpp_source.html#l00470">Nom::finit_par()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, and <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>.</p>

<p>Referenced by <a class="el" href="Lire__Fichier_8cpp_source.html#l00055">Lire_Fichier::interpreter()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> ICEM(filename);
  <span class="keywordflow">if</span> (ICEM.finit_par(<span class="stringliteral">&quot;.asc&quot;</span>) &amp;&amp; !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classRead__unsupported__ASCII__file__from__ICEM.html">Read_unsupported_ASCII_file_from_ICEM</a>,keyword))
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Since the 1.6.7 version, the read of an ASCII file from ICEM mesh tool is not&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;supported anymore cause insufficient number of digits to define the node coordinates.&quot;</span> &lt;&lt;finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Please, use the TRUST binary export from ICEM.&quot;</span> &lt;&lt; finl;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classRead__unsupported__ASCII__file__from__ICEM.html">Read_unsupported_ASCII_file_from_ICEM</a>,keyword))
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;====================================================&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Warning: You are using an obsolete feature of TRUST&quot;</span> &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;with Unsupported_ASCII_file_read_from_ICEM keyword.&quot;</span> &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Use binary format for ICEM file!&quot;</span> &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;====================================================&quot;</span> &lt;&lt; finl;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a26381e5eeaa1740ecaab98810c296fe5"></a><!-- doxytag: member="Read_unsupported_ASCII_file_from_ICEM.cpp::check_ICEM_binary_file" ref="a26381e5eeaa1740ecaab98810c296fe5" args="(Nom &amp;filename, const Nom &amp;nom_objet_lu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void check_ICEM_binary_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNom.html">Nom</a> &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classNom.html">Nom</a> &amp;&#160;</td>
          <td class="paramname"><em>nom_objet_lu</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>&lt; C'est un fichier binaire ICEM</p>
<p>&lt; TETRAEDRE Lecture des elements</p>
<p>&lt; TRIANGLE_3D Elements de la frontiere</p>
<p>&lt; , ou } on ne peut savoir a l'avance... </p>
</p>

<p>Definition at line <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html#l00116">116</a> of file <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html">Read_unsupported_ASCII_file_from_ICEM.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Sortie__Fichier__base_8cpp_source.html#l00126">Sortie_Fichier_base::close()</a>, <a class="el" href="Entree__Fichier__base_8cpp_source.html#l00118">Entree_Fichier_base::close()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Entree_8cpp_source.html#l00035">Entree::get_istream()</a>, <a class="el" href="Sortie__Fichier__base_8cpp_source.html#l00121">Sortie_Fichier_base::get_ofstream()</a>, <a class="el" href="Sortie_8cpp_source.html#l00111">Sortie::get_ostream()</a>, <a class="el" href="Interprete_8cpp_source.html#l00048">Interprete::objet()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html#l00046">read_write_string_from()</a>, and <a class="el" href="Assembleur__P__VEFPreP1B_8cpp_source.html#l00211">zero()</a>.</p>

<p>Referenced by <a class="el" href="Lire__Fichier_8cpp_source.html#l00055">Lire_Fichier::interpreter()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// On verifie que l&#39;objet lu est un domaine</span>
  <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; objet_lu = <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">Interprete::objet</a>(nom_objet_lu);
  <span class="keywordflow">if</span> (objet_lu.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()!=<span class="stringliteral">&quot;Domaine&quot;</span>) <span class="keywordflow">return</span>;

  <a class="code" href="classEFichierBin.html" title="Lecture dans un fichier d&#39;objets ecrits au format binaire.">EFichierBin</a> tmp(filename);
<span class="comment">// Un fichier binaire ASCII est reconnaissable par le fait que le nom du</span>
<span class="comment">// domaine est suivi d&#39;un espace donc l&#39;octet est 32 (= 20 en hexa = space)</span>
<span class="comment">// Dans un binaire classique le nom du domaine est suivi par 0</span>
  <span class="keywordtype">char</span> octet=-1;
  <span class="keywordflow">while</span>(octet!=32 &amp;&amp; octet!=0)
    tmp.get_istream().read(&amp;octet,1);
  tmp.close();
  <span class="keywordflow">if</span> (octet==32) <span class="comment">//!&lt; C&#39;est un fichier binaire ICEM</span>
<span class="comment"></span>    {
      <span class="keywordtype">char</span> <a class="code" href="Assembleur__P__VEFPreP1B_8cpp.html#a6e2318de58fc55873393f2dccdbd9d6c">zero</a>=0;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;==============================================&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; filename &lt;&lt; <span class="stringliteral">&quot; is an ICEM binary file.&quot;</span> &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;To save space, you can now delete this file and use&quot;</span> &lt;&lt; finl;
<span class="comment">// Suppression de certains espaces du fichier binaire</span>
      <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> new_filename(filename);
      new_filename+=<span class="stringliteral">&quot;.cleaned&quot;</span>;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;instead, the newly created &quot;</span> &lt;&lt; new_filename &lt;&lt; <span class="stringliteral">&quot; file.&quot;</span> &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;==============================================&quot;</span> &lt;&lt; finl;
      <a class="code" href="classEFichierBin.html" title="Lecture dans un fichier d&#39;objets ecrits au format binaire.">EFichierBin</a> s(filename);
      <a class="code" href="classSFichierBin.html" title="Ecriture dans un fichier d&#39;objets ecrits au format binaire.">SFichierBin</a> o(new_filename);
      s.get_istream().read(&amp;octet,1);
      <span class="keywordflow">while</span>(octet!=32)
        {
          o.get_ofstream().write(&amp;octet,1);
          s.get_istream().read(&amp;octet,1);
        }
<span class="comment">// Ecriture de 00 a la place de 32</span>
      o.get_ostream().write(&amp;zero,1);
<span class="comment">// Ensuite on va jusqu&#39;a l&#39;entier 2</span>
      s.get_istream().read(&amp;octet,1);
      <span class="keywordflow">while</span>(octet!=2)
        s.get_istream().read(&amp;octet,1);
<span class="comment">// On revient en arriere et on peut commencer a lire le DoubleTab</span>
      s.get_istream().unget();
<span class="comment">// Lecture des sommets</span>
      <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> sommets;
      s &gt;&gt; sommets;
      o &lt;&lt; sommets;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;End of the read of the nodes.&quot;</span> &lt;&lt; finl;
<span class="comment">// &quot;{&quot;</span>
      <span class="keywordflow">if</span> (<a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,<span class="stringliteral">&quot;{&quot;</span>)!=123)
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in is_a_ICEM_binary_file : { is waited.&quot;</span> &lt;&lt; finl;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
<span class="comment">// Nom du domaine</span>
      <a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,<span class="stringliteral">&quot;&quot;</span>);
<span class="comment">// Lecture du type d&#39;element</span>
      <a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,<span class="stringliteral">&quot;T&quot;</span>); <span class="comment">//!&lt; TETRAEDRE Lecture des elements</span>
<span class="comment"></span><span class="comment">//</span>
      <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> elems;
      s &gt;&gt; elems;
      o &lt;&lt; elems;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;End of the read of the cells.&quot;</span> &lt;&lt; finl;
<span class="comment">// Boucle sur les frontieres</span>
<span class="comment">// {  : 7b en hexa, 123 en decimal</span>
<span class="comment">// ,  : 2C en hexa, 44  en decimal</span>
<span class="comment">// }  : 7D en haxe, 125 en decimal</span>
      <span class="keyword">const</span> <span class="keywordtype">char</span>* sep=<span class="stringliteral">&quot;{&quot;</span>;
      <span class="keywordflow">while</span>(<a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,sep)!=125)
        {
<span class="comment">// Nom de frontiere</span>
          <a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,<span class="stringliteral">&quot;&quot;</span>);
<span class="comment">// Type de l&#39;element</span>
          <a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,<span class="stringliteral">&quot;T&quot;</span>); <span class="comment">//!&lt; TRIANGLE_3D Elements de la frontiere</span>
<span class="comment"></span><span class="comment">//</span>
          s &gt;&gt; elems;
          o &lt;&lt; elems;
<span class="comment">// Faces voisines</span>
          <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> faces_voisins;
          s &gt;&gt; faces_voisins;
          o &lt;&lt; faces_voisins;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;End of the read of a boundary.&quot;</span> &lt;&lt; finl;
          sep=<span class="stringliteral">&quot;&quot;</span>; <span class="comment">//!&lt; , ou } on ne peut savoir a l&#39;avance...</span>
<span class="comment"></span>        }
<span class="comment">// Lecture des 3 &quot;vide&quot;</span>
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;3; i++)
        {
          <span class="keywordflow">if</span> (<a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,<span class="stringliteral">&quot;v&quot;</span>)!=101)
            {
              <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in is_a_ICEM_binary_file : &#39;vide&#39; is waited.&quot;</span> &lt;&lt; finl;
              <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
            }
        }
<span class="comment">// Lecture de }</span>
      <span class="keywordflow">if</span> (<a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,<span class="stringliteral">&quot;}&quot;</span>)!=125)
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in is_a_ICEM_binary_file : } is waited.&quot;</span> &lt;&lt; finl;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
<span class="comment">// Lecture du dernier &quot;vide&quot;</span>
      <a class="code" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#acfff10211c83bdc7846a638d5aae85ec">read_write_string_from</a>(s,o,<span class="stringliteral">&quot;v&quot;</span>);
      o.close();
      s.close();
<span class="comment">// On pointe vers le nouveau fichier</span>
      filename=new_filename;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;=============================================&quot;</span> &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You can use now: &quot;</span> &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Lire_fichier &quot;</span> &lt;&lt; nom_objet_lu &lt;&lt; <span class="stringliteral">&quot; &quot;</span>&lt;&lt; filename  &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;=============================================&quot;</span> &lt;&lt; finl;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acfff10211c83bdc7846a638d5aae85ec"></a><!-- doxytag: member="Read_unsupported_ASCII_file_from_ICEM.cpp::read_write_string_from" ref="acfff10211c83bdc7846a638d5aae85ec" args="(EFichierBin &amp;s, SFichierBin &amp;o, const char *first_caracter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char read_write_string_from </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEFichierBin.html">EFichierBin</a> &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classSFichierBin.html">SFichierBin</a> &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>first_caracter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html#l00046">46</a> of file <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html">Read_unsupported_ASCII_file_from_ICEM.cpp</a>.</p>

<p>References <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Entree_8cpp_source.html#l00035">Entree::get_istream()</a>, <a class="el" href="Sortie_8cpp_source.html#l00111">Sortie::get_ostream()</a>, <a class="el" href="Entree__Fichier__base_8cpp_source.html#l00144">Entree_Fichier_base::good()</a>, and <a class="el" href="Assembleur__P__VEFPreP1B_8cpp_source.html#l00211">zero()</a>.</p>

<p>Referenced by <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html#l00116">check_ICEM_binary_file()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">// La regle est :</span>
<span class="comment">// On lit jusqu&#39;a first_caracter s&#39;il est defini</span>
<span class="comment">// On complete par le separateur 00</span>
<span class="comment">// On retourne le dernier caractere (avant l&#39;espace)</span>
  <span class="keywordtype">char</span> octet;
  <span class="keywordtype">char</span> <a class="code" href="Assembleur__P__VEFPreP1B_8cpp.html#a6e2318de58fc55873393f2dccdbd9d6c">zero</a>=0;
  <span class="keywordtype">char</span> last_caracter;
<span class="comment">// Si first_caracter est defini on lit jusqu&#39;a lui</span>
  <span class="keywordflow">if</span> (*first_caracter!=0)
    {
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; -&gt; Look for the byte:&quot;</span>;
      fprintf(stderr,<span class="stringliteral">&quot; %02x &lt;=&gt; &quot;</span>,*first_caracter);
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; (<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>)*first_caracter &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; -&gt; Read the bytes :&quot;</span>;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="comment">// while (s.good() &amp;&amp; s.get_istream().read(&amp;octet,1)!=0 &amp;&amp; octet!=*first_caracter)</span>
      <span class="keywordflow">while</span> (s.<a class="code" href="classEntree__Fichier__base.html#a0db5378632b186a9ecc72edee7441cea">good</a>() &amp;&amp; s.<a class="code" href="classEntree.html#abea15d57ebdf63f78c4b4a1285b1e896">get_istream</a>().read(&amp;octet,1) &amp;&amp; octet!=*first_caracter)
        {
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>          fprintf(stderr,<span class="stringliteral">&quot; %02x&quot;</span>,octet);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        };
    }
  <span class="keywordflow">else</span>
    {
<span class="comment">// Si first caracter n&#39;est pas defini, on se contente de passer</span>
<span class="comment">// les espaces (32, 20 en hexa) et separateurs (00) et delete (127, 7F en hexa)</span>
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>      Cerr &lt;&lt; <span class="stringliteral">&quot; -&gt; Read the bytes :&quot;</span>;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="comment">// while (s.good() &amp;&amp; s.get_istream().read(&amp;octet,1)!=0 &amp;&amp; (octet==32 || octet==0 || octet==127) )</span>
      <span class="keywordflow">while</span> (s.<a class="code" href="classEntree__Fichier__base.html#a0db5378632b186a9ecc72edee7441cea">good</a>() &amp;&amp; s.<a class="code" href="classEntree.html#abea15d57ebdf63f78c4b4a1285b1e896">get_istream</a>().read(&amp;octet,1) &amp;&amp; (octet==32 || octet==0 || octet==127) )
        {
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>          fprintf(stderr,<span class="stringliteral">&quot; %02x&quot;</span>,octet);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        };
    }
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>  fprintf(stderr,<span class="stringliteral">&quot; %02x&quot;</span>,octet);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  o.<a class="code" href="classSortie.html#a2b296619da65cf49f0e8934ee51ad3ed">get_ostream</a>().write(&amp;octet,1);
  last_caracter = octet;
  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> chaine(octet);
<span class="comment">// On lit jusqu&#39;a l&#39;espace:</span>
<span class="comment">// while (s.good() &amp;&amp; s.get_istream().read(&amp;octet,1)!=0 &amp;&amp; octet!=32)</span>
  <span class="keywordflow">while</span> (s.<a class="code" href="classEntree__Fichier__base.html#a0db5378632b186a9ecc72edee7441cea">good</a>() &amp;&amp; s.<a class="code" href="classEntree.html#abea15d57ebdf63f78c4b4a1285b1e896">get_istream</a>().read(&amp;octet,1) &amp;&amp; octet!=32)
    {
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>      fprintf(stderr,<span class="stringliteral">&quot; %02x&quot;</span>,octet);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>      o.<a class="code" href="classSortie.html#a2b296619da65cf49f0e8934ee51ad3ed">get_ostream</a>().write(&amp;octet,1);
      last_caracter = octet;
      chaine+=octet;
    }
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>  fprintf(stderr,<span class="stringliteral">&quot; %02x&quot;</span>,octet);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  o.<a class="code" href="classSortie.html#a2b296619da65cf49f0e8934ee51ad3ed">get_ostream</a>().write(&amp;zero,1);
<span class="preprocessor">#ifndef NDEBUG</span>
<span class="preprocessor"></span>  Cerr &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
  Cerr &lt;&lt; <span class="stringliteral">&quot; -&gt; Read the string: &quot;</span> &lt;&lt; chaine &lt;&lt; finl;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  <span class="keywordflow">return</span> last_caracter;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a061639be33221fc4ac414c311782386f"></a><!-- doxytag: member="Read_unsupported_ASCII_file_from_ICEM.cpp::Read_unsupported_ASCII_file_from_ICEMbases" ref="a061639be33221fc4ac414c311782386f" args="[1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classType__info.html">Type_info</a>* <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp.html#a061639be33221fc4ac414c311782386f">Read_unsupported_ASCII_file_from_ICEMbases</a>[1] = { &amp;( <a class="el" href="classLire__Fichier.html">Lire_Fichier</a> ::info_obj)}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html#l00033">33</a> of file <a class="el" href="Read__unsupported__ASCII__file__from__ICEM_8cpp_source.html">Read_unsupported_ASCII_file_from_ICEM.cpp</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:55 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
