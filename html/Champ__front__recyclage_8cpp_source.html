<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/VF/Champs/Champ_front_recyclage.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/VF/Champs/Champ_front_recyclage.cpp</div>  </div>
</div>
<div class="contents">
<a href="Champ__front__recyclage_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2015 - 2016, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Champ_front_recyclage.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/VF/Champs</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/33</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Champ__front__recyclage_8h.html">Champ_front_recyclage.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Interprete_8h.html">Interprete.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTrav_8h.html">DoubleTrav.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Equation__base_8h.html">Equation_base.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Octree_8h.html">Octree.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="IntList_8h.html">IntList.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="EFichier_8h.html">EFichier.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="EcrFicCollecte_8h.html">EcrFicCollecte.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="Champ__front__calc_8h.html">Champ_front_calc.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;string&gt;</span> <span class="comment">//!&lt; Pour AIX</span>
<a name="l00036"></a><a class="code" href="Champ__front__recyclage_8cpp.html#aef6feb44a6b8c2cebcda210fada18acd">00036</a> <span class="comment"></span><a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classChamp__front__recyclage.html" title="classe Champ_front_recyclage delt_dist delt_dist pb1 &lt;----------&gt; pb2 &lt;--------&gt; pb ch_fr2 ch_fr ____...">Champ_front_recyclage</a>,<span class="stringliteral">&quot;Champ_front_recyclage&quot;</span>,<a class="code" href="classCh__front__var__instationnaire__dep.html" title="classe Ch_front_var_instationnaire_dep Cette classe abstraite represente un champ sur une frontiere...">Ch_front_var_instationnaire_dep</a>);
<a name="l00037"></a>00037 
<a name="l00038"></a><a class="code" href="classChamp__front__recyclage.html#a0e29b649e5e0dcf4a8a1a91cdb2d2a44">00038</a> <a class="code" href="classChamp__front__recyclage.html#a0e29b649e5e0dcf4a8a1a91cdb2d2a44">Champ_front_recyclage::Champ_front_recyclage</a>()
<a name="l00039"></a>00039 {
<a name="l00040"></a>00040   <span class="keywordtype">int</span> dim = <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>;
<a name="l00041"></a>00041   <a class="code" href="classChamp__front__recyclage.html#ab8997525c12511b419ffdc64d6832799">delt_dist</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dim,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00042"></a>00042   <a class="code" href="classChamp__front__recyclage.html#ab8997525c12511b419ffdc64d6832799">delt_dist</a>=0;
<a name="l00043"></a>00043   <a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00044"></a>00044   <a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a> = 1.;
<a name="l00045"></a>00045   <a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00046"></a>00046   <a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a> = 1.;
<a name="l00047"></a>00047   <a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00048"></a>00048   <a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a> = 1.;
<a name="l00049"></a>00049 
<a name="l00050"></a>00050   <a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a> = -1;
<a name="l00051"></a>00051   <a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a> = -1;
<a name="l00052"></a>00052   <a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a> = -4;
<a name="l00053"></a>00053   <a class="code" href="classChamp__front__recyclage.html#a7241368168500bece0eff667255e2b36">diametre</a> = -1.;
<a name="l00054"></a>00054   <a class="code" href="classChamp__front__recyclage.html#a2d052bcb8a8010b2ffe0b6a9bc317c5b">u_tau</a> = -1.;
<a name="l00055"></a>00055   <a class="code" href="classChamp__front__recyclage.html#a155fdaf674c193686471affcdc6fd6e0">visco_cin</a> = -1.;
<a name="l00056"></a>00056   <a class="code" href="classChamp__front__recyclage.html#aec81625c44575a2f23fe6363711084f4">fich_recycl_</a> = <span class="stringliteral">&quot;??&quot;</span>;
<a name="l00057"></a>00057   <a class="code" href="classChamp__front__recyclage.html#aab9e03ba65934802188db712305a3400">fich_impos_</a> = <span class="stringliteral">&quot;??&quot;</span>;
<a name="l00058"></a>00058 }
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="classChamp__front__recyclage.html#aa09e66d1d8e11fb411897068f75e6158">00060</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classChamp__front__recyclage.html#aa09e66d1d8e11fb411897068f75e6158" title="Imprime le nom du champ sur un flot de sortie.">Champ_front_recyclage::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00061"></a>00061 <span class="keyword"></span>{
<a name="l00062"></a>00062   <span class="keywordflow">return</span> os;
<a name="l00063"></a>00063 }
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">// -pb_champ_evaluateur est obligatoire pour specifier le nom du probleme</span>
<a name="l00066"></a>00066 <span class="comment">// et le nom de l inconnue qui vont servir a initialiser la reference</span>
<a name="l00067"></a>00067 <span class="comment">// vers le champ evaluateur. Le nombre de composantes de ce champ doit etre specifie.</span>
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="classChamp__front__recyclage.html#ab1f81894a90c9dd70f290f1b3a46a5c1">00069</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classChamp__front__recyclage.html#ab1f81894a90c9dd70f290f1b3a46a5c1" title="NE FAIT RIEN A surcharger dans les classes derivees.">Champ_front_recyclage::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <span class="keywordtype">int</span> dim = <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>;
<a name="l00073"></a>00073   <span class="keywordtype">int</span> lu_info_evaluateur = 0;
<a name="l00074"></a>00074   <span class="keywordtype">int</span> nbcomp;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu, accolade_fermee=<span class="stringliteral">&quot;}&quot;</span>, accolade_ouverte=<span class="stringliteral">&quot;{&quot;</span>;
<a name="l00077"></a>00077   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_mots(8);
<a name="l00078"></a>00078   {
<a name="l00079"></a>00079     les_mots[0] = <span class="stringliteral">&quot;pb_champ_evaluateur&quot;</span>;
<a name="l00080"></a>00080     les_mots[1] = <span class="stringliteral">&quot;distance_plan&quot;</span>;
<a name="l00081"></a>00081     les_mots[2] = <span class="stringliteral">&quot;ampli_fluctuation&quot;</span>;
<a name="l00082"></a>00082     les_mots[3] = <span class="stringliteral">&quot;ampli_moyenne_imposee&quot;</span>;
<a name="l00083"></a>00083     les_mots[4] = <span class="stringliteral">&quot;ampli_moyenne_recyclee&quot;</span>;
<a name="l00084"></a>00084     les_mots[5] = <span class="stringliteral">&quot;moyenne_imposee&quot;</span>;
<a name="l00085"></a>00085     les_mots[6] = <span class="stringliteral">&quot;moyenne_recyclee&quot;</span>;
<a name="l00086"></a>00086     les_mots[7] = <span class="stringliteral">&quot;direction_anisotrope&quot;</span>;
<a name="l00087"></a>00087   }
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   is &gt;&gt; motlu;
<a name="l00090"></a>00090   <span class="keywordflow">if</span>(motlu!=accolade_ouverte)
<a name="l00091"></a>00091     {
<a name="l00092"></a>00092       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We expected a { while reading of &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00093"></a>00093       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;and not : &quot;</span> &lt;&lt; motlu &lt;&lt; finl;
<a name="l00094"></a>00094       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00095"></a>00095     }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   is &gt;&gt; motlu;
<a name="l00098"></a>00098   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;word read=&quot;</span>&lt;&lt;motlu&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100   <span class="keywordflow">while</span> (motlu != accolade_fermee)
<a name="l00101"></a>00101     {
<a name="l00102"></a>00102       <span class="keywordtype">int</span> rang = les_mots.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(motlu);
<a name="l00103"></a>00103       <span class="keywordflow">switch</span>(rang)
<a name="l00104"></a>00104         {
<a name="l00105"></a>00105         <span class="keywordflow">case</span> 0 :
<a name="l00106"></a>00106           {
<a name="l00107"></a>00107             is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a0ed386f6d8a5d10432168c40477e5636">nom_pb1</a> &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#ace515c97d9da3e8a58fdc0acd5185678">nom_inco1</a> &gt;&gt; nbcomp;
<a name="l00108"></a>00108             lu_info_evaluateur = 1;
<a name="l00109"></a>00109             <a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbcomp,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00110"></a>00110             <a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbcomp,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00111"></a>00111             <a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbcomp,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00112"></a>00112             <a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a> = 1.;
<a name="l00113"></a>00113             <a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a> = 1.;
<a name="l00114"></a>00114             <a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a> = 1.;
<a name="l00115"></a>00115             <span class="keywordflow">break</span>;
<a name="l00116"></a>00116           }
<a name="l00117"></a>00117         <span class="keywordflow">case</span> 1 :
<a name="l00118"></a>00118           {
<a name="l00119"></a>00119             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;dim; i++)
<a name="l00120"></a>00120               is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#ab8997525c12511b419ffdc64d6832799">delt_dist</a>(i) ;
<a name="l00121"></a>00121             <span class="keywordflow">break</span>;
<a name="l00122"></a>00122           }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124         <span class="keywordflow">case</span> 2 :
<a name="l00125"></a>00125           {
<a name="l00126"></a>00126 <span class="comment">// int nbcomp;</span>
<a name="l00127"></a>00127             is &gt;&gt; nbcomp;
<a name="l00128"></a>00128             <a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbcomp);
<a name="l00129"></a>00129             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbcomp; i++)
<a name="l00130"></a>00130               is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a>(i) ;
<a name="l00131"></a>00131             <span class="keywordflow">break</span>;
<a name="l00132"></a>00132           }
<a name="l00133"></a>00133         <span class="keywordflow">case</span> 3 :
<a name="l00134"></a>00134           {
<a name="l00135"></a>00135 <span class="comment">// int nbcomp;</span>
<a name="l00136"></a>00136             is &gt;&gt; nbcomp;
<a name="l00137"></a>00137             <a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbcomp);
<a name="l00138"></a>00138             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbcomp; i++)
<a name="l00139"></a>00139               is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a>(i) ;
<a name="l00140"></a>00140             <span class="keywordflow">break</span>;
<a name="l00141"></a>00141           }
<a name="l00142"></a>00142         <span class="keywordflow">case</span> 4 :
<a name="l00143"></a>00143           {
<a name="l00144"></a>00144 <span class="comment">// int nbcomp;</span>
<a name="l00145"></a>00145             is &gt;&gt; nbcomp;
<a name="l00146"></a>00146             <a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbcomp);
<a name="l00147"></a>00147             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbcomp; i++)
<a name="l00148"></a>00148               is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a>(i) ;
<a name="l00149"></a>00149             <span class="keywordflow">break</span>;
<a name="l00150"></a>00150           }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152         <span class="keywordflow">case</span> 5 :
<a name="l00153"></a>00153           {
<a name="l00154"></a>00154             <a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a> = <a class="code" href="classChamp__front__recyclage.html#a681003df9f7804f8d26f63ba8d93e38a">lire_info_moyenne_imposee</a>(is);
<a name="l00155"></a>00155             <span class="keywordflow">break</span>;
<a name="l00156"></a>00156           }
<a name="l00157"></a>00157         <span class="keywordflow">case</span> 6 :
<a name="l00158"></a>00158           {
<a name="l00159"></a>00159             <a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a> = <a class="code" href="classChamp__front__recyclage.html#a3a66e1a09a97babf2d7655b2b8867142">lire_info_moyenne_recyclee</a>(is);
<a name="l00160"></a>00160             <span class="keywordflow">break</span>;
<a name="l00161"></a>00161           }
<a name="l00162"></a>00162         <span class="keywordflow">case</span> 7 :
<a name="l00163"></a>00163           {
<a name="l00164"></a>00164             is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>;
<a name="l00165"></a>00165             <span class="keywordflow">break</span>;
<a name="l00166"></a>00166           }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168         <span class="keywordflow">default</span> :
<a name="l00169"></a>00169           {
<a name="l00170"></a>00170             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage::readOn: keyword &quot;</span>&lt;&lt;motlu&lt;&lt;<span class="stringliteral">&quot; is not recognized.&quot;</span>&lt;&lt;finl;
<a name="l00171"></a>00171             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The recognized keywords are :&quot;</span>&lt;&lt;les_mots&lt;&lt;finl;
<a name="l00172"></a>00172             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00173"></a>00173           }
<a name="l00174"></a>00174         }
<a name="l00175"></a>00175       is &gt;&gt; motlu;
<a name="l00176"></a>00176     }
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   <span class="keywordflow">if</span> (lu_info_evaluateur!=1)
<a name="l00179"></a>00179     {
<a name="l00180"></a>00180       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Keyword pb_champ_evaluateur must be specified with associated data&quot;</span>&lt;&lt;finl;
<a name="l00181"></a>00181       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;when Champ_front_recyclage field is used.&quot;</span>&lt;&lt;finl;
<a name="l00182"></a>00182       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184   <a class="code" href="classField__base.html#a0d3bb177287a79b9d7da6f3a46deff53" title="Fixe le nombre de composantes du champ. Le champ est vectoriel s&#39;il est de meme dimension que l&#39;espac...">fixer_nb_comp</a>(nbcomp);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="keywordflow">return</span> is;
<a name="l00187"></a>00187 }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 <span class="comment">// Lecture des informations necessaires pour evaluer la moyenne imposee</span>
<a name="l00190"></a>00190 <span class="comment">// -profil                : pour imposer un profil analytique</span>
<a name="l00191"></a>00191 <span class="comment">// -interpolation       : lecture dans un fichier et construction d un champ moyen</span>
<a name="l00192"></a>00192 <span class="comment">// en realisant une interpolation des donnees lues.</span>
<a name="l00193"></a>00193 <span class="comment">// La moyenne est construite pour une direction privilegiee</span>
<a name="l00194"></a>00194 <span class="comment">// (direction_anisotrope) et vaut 0 pour les autres directions</span>
<a name="l00195"></a>00195 <span class="comment">// -connexion_approchee : lecture dans un fichier et on retient la valeur de la</span>
<a name="l00196"></a>00196 <span class="comment">// variable lue par connexion avec le point le plus proche</span>
<a name="l00197"></a>00197 <span class="comment">// de la face de bord consideree</span>
<a name="l00198"></a>00198 <span class="comment">// -connexion_exacte    : lecture dans un fichier geometrie des coordonnees de points</span>
<a name="l00199"></a>00199 <span class="comment">// situes dans le plan d evaluation et lecture dans un fichier</span>
<a name="l00200"></a>00200 <span class="comment">// distinct des valeurs moyennes. Les valeurs moyennes lues</span>
<a name="l00201"></a>00201 <span class="comment">// sont stockees quand la correspondance exacte entre les points</span>
<a name="l00202"></a>00202 <span class="comment">// en vis a vis est verifiee.</span>
<a name="l00203"></a>00203 <span class="comment">// - logarithmique      : construction de la moyenne par une loi de paroi (logarithmique)</span>
<a name="l00204"></a>00204 <span class="comment">// </span>
<a name="l00205"></a><a class="code" href="classChamp__front__recyclage.html#a681003df9f7804f8d26f63ba8d93e38a">00205</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__front__recyclage.html#a681003df9f7804f8d26f63ba8d93e38a">Champ_front_recyclage::lire_info_moyenne_imposee</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00206"></a>00206 {
<a name="l00207"></a>00207   <span class="keywordtype">int</span> methode = -1;;
<a name="l00208"></a>00208   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> choix,motlu;
<a name="l00209"></a>00209   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_mots(5);
<a name="l00210"></a>00210   {
<a name="l00211"></a>00211     les_mots[0] = <span class="stringliteral">&quot;profil&quot;</span>;
<a name="l00212"></a>00212     les_mots[1] = <span class="stringliteral">&quot;interpolation&quot;</span>;
<a name="l00213"></a>00213     les_mots[2] = <span class="stringliteral">&quot;connexion_approchee&quot;</span>;
<a name="l00214"></a>00214     les_mots[3] = <span class="stringliteral">&quot;connexion_exacte&quot;</span>;
<a name="l00215"></a>00215     les_mots[4] = <span class="stringliteral">&quot;logarithmique&quot;</span>;
<a name="l00216"></a>00216   }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   is &gt;&gt; choix;
<a name="l00219"></a>00219   <span class="keywordtype">int</span> rang = les_mots.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(choix);
<a name="l00220"></a>00220   <span class="keywordflow">switch</span>(rang)
<a name="l00221"></a>00221     {
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     <span class="keywordflow">case</span> 0 :
<a name="l00224"></a>00224       {
<a name="l00225"></a>00225         methode = 1;
<a name="l00226"></a>00226         <span class="keywordtype">int</span> nc;
<a name="l00227"></a>00227         is &gt;&gt; nc;
<a name="l00228"></a>00228         <a class="code" href="classChamp__front__recyclage.html#a9805e316bb5263ff3c6d282dce3d1931">fcts_xyz</a>.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(nc);
<a name="l00229"></a>00229         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nc; i++)
<a name="l00230"></a>00230           is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a9805e316bb5263ff3c6d282dce3d1931">fcts_xyz</a>[i];
<a name="l00231"></a>00231         <span class="keywordflow">break</span>;
<a name="l00232"></a>00232       }
<a name="l00233"></a>00233     <span class="keywordflow">case</span> 1 :
<a name="l00234"></a>00234       {
<a name="l00235"></a>00235         methode = 2;
<a name="l00236"></a>00236         <span class="keywordflow">break</span>;
<a name="l00237"></a>00237       }
<a name="l00238"></a>00238     <span class="keywordflow">case</span> 2 :
<a name="l00239"></a>00239       {
<a name="l00240"></a>00240         methode = 3;
<a name="l00241"></a>00241         <span class="keywordflow">break</span>;
<a name="l00242"></a>00242       }
<a name="l00243"></a>00243     <span class="keywordflow">case</span> 3 :
<a name="l00244"></a>00244       {
<a name="l00245"></a>00245         methode = 4;
<a name="l00246"></a>00246         <span class="keywordflow">break</span>;
<a name="l00247"></a>00247       }
<a name="l00248"></a>00248     <span class="keywordflow">case</span> 4 :
<a name="l00249"></a>00249       {
<a name="l00250"></a>00250         <span class="keywordtype">int</span> compt_mot_lu = 0;
<a name="l00251"></a>00251         <span class="keywordflow">while</span> (compt_mot_lu!=4)
<a name="l00252"></a>00252           {
<a name="l00253"></a>00253             is &gt;&gt; motlu;
<a name="l00254"></a>00254             <span class="keywordflow">if</span> (motlu==<span class="stringliteral">&quot;diametre&quot;</span>)
<a name="l00255"></a>00255               is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a7241368168500bece0eff667255e2b36">diametre</a>;
<a name="l00256"></a>00256             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motlu==<span class="stringliteral">&quot;u_tau&quot;</span>)
<a name="l00257"></a>00257               is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a2d052bcb8a8010b2ffe0b6a9bc317c5b">u_tau</a>;
<a name="l00258"></a>00258             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motlu==<span class="stringliteral">&quot;visco_cin&quot;</span>)
<a name="l00259"></a>00259               is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a155fdaf674c193686471affcdc6fd6e0">visco_cin</a>;
<a name="l00260"></a>00260             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motlu==<span class="stringliteral">&quot;direction&quot;</span>)
<a name="l00261"></a>00261               is &gt;&gt; <a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>;
<a name="l00262"></a>00262             <span class="keywordflow">else</span>
<a name="l00263"></a>00263               {
<a name="l00264"></a>00264                 <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The keyword &quot;</span>&lt;&lt;motlu&lt;&lt;<span class="stringliteral">&quot; is not recognized.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00265"></a>00265               }
<a name="l00266"></a>00266             compt_mot_lu += 1;
<a name="l00267"></a>00267           }
<a name="l00268"></a>00268         <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#a7241368168500bece0eff667255e2b36">diametre</a>&lt;=0.)
<a name="l00269"></a>00269           {
<a name="l00270"></a>00270             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage : a positive diameter must be specified when a logarithmique injected averaged is used.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00271"></a>00271             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00272"></a>00272           }
<a name="l00273"></a>00273         <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#a2d052bcb8a8010b2ffe0b6a9bc317c5b">u_tau</a>&lt;=0.)
<a name="l00274"></a>00274           {
<a name="l00275"></a>00275             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage : a positive shear velocity must be specified when a logarithmique injected averaged is used.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00276"></a>00276             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00277"></a>00277           }
<a name="l00278"></a>00278         <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#a155fdaf674c193686471affcdc6fd6e0">visco_cin</a>&lt;=0.)
<a name="l00279"></a>00279           {
<a name="l00280"></a>00280             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage : a positive kinematic viscosity must be specified when a logarithmique injected averaged is used.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00281"></a>00281             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00282"></a>00282           }
<a name="l00283"></a>00283         <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>&lt;-3)
<a name="l00284"></a>00284           {
<a name="l00285"></a>00285             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage : the direction must be specified when a logarithmique injected averaged is used.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00286"></a>00286             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00287"></a>00287           }
<a name="l00288"></a>00288         methode = 5;
<a name="l00289"></a>00289         <span class="keywordflow">break</span>;
<a name="l00290"></a>00290       }
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="keywordflow">default</span> :
<a name="l00293"></a>00293       {
<a name="l00294"></a>00294         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage::lire_info_moyenne_imposee : keyword &quot;</span>&lt;&lt;choix&lt;&lt;<span class="stringliteral">&quot; is not recognized.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00295"></a>00295         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The recognized keywords are :&quot;</span>&lt;&lt;les_mots&lt;&lt;finl;
<a name="l00296"></a>00296         <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00297"></a>00297       }
<a name="l00298"></a>00298     }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300   <span class="keywordflow">if</span> ((methode == 2) || (methode == 3))
<a name="l00301"></a>00301     {
<a name="l00302"></a>00302       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich;
<a name="l00303"></a>00303       is &gt;&gt; motlu;
<a name="l00304"></a>00304       <span class="keywordflow">if</span> (motlu!=<span class="stringliteral">&quot;fichier&quot;</span>)
<a name="l00305"></a>00305         {
<a name="l00306"></a>00306           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage::lire_info_moyenne_imposee : at least one file must be provided for this method.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00307"></a>00307           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00308"></a>00308         }
<a name="l00309"></a>00309       <span class="keywordflow">else</span>
<a name="l00310"></a>00310         is &gt;&gt; nom_fich;
<a name="l00311"></a>00311       <a class="code" href="classChamp__front__recyclage.html#aab9e03ba65934802188db712305a3400">fich_impos_</a> = nom_fich;
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314   <span class="keywordflow">if</span> (methode == 4)
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich;
<a name="l00317"></a>00317       is &gt;&gt; motlu;
<a name="l00318"></a>00318       <span class="keywordflow">if</span> (motlu!=<span class="stringliteral">&quot;fichier&quot;</span>)
<a name="l00319"></a>00319         {
<a name="l00320"></a>00320           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage::lire_info_moyenne_imposee : at least one file must be provided for this method.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00321"></a>00321           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00322"></a>00322         }
<a name="l00323"></a>00323       <span class="keywordflow">else</span>
<a name="l00324"></a>00324         is &gt;&gt; nom_fich;
<a name="l00325"></a>00325       <a class="code" href="classChamp__front__recyclage.html#afbc93e60b63660668b108ad80d8c74b0">fich_maillage_</a> = nom_fich;
<a name="l00326"></a>00326       is &gt;&gt; nom_fich;
<a name="l00327"></a>00327       <a class="code" href="classChamp__front__recyclage.html#aab9e03ba65934802188db712305a3400">fich_impos_</a> = nom_fich;
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329 
<a name="l00330"></a>00330   <span class="keywordflow">if</span> (methode==-1)
<a name="l00331"></a>00331     {
<a name="l00332"></a>00332       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage::lire_info_moyenne_imposee : no method to make average evaluation has been given.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00333"></a>00333       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Choose among the following keywords : les_mots&quot;</span>&lt;&lt;finl;
<a name="l00334"></a>00334       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00335"></a>00335     }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="keywordflow">return</span> methode;
<a name="l00338"></a>00338 }
<a name="l00339"></a>00339 
<a name="l00340"></a>00340 <span class="comment">// Lecture des informations necessaires pour evaluer la moyenne recyclee</span>
<a name="l00341"></a>00341 <span class="comment">// -surfacique : moyenne surfacique des valeurs recyclees</span>
<a name="l00342"></a>00342 <span class="comment">// (la moyenne est faite sur le bord2 ou l on recupere les valeurs)</span>
<a name="l00343"></a>00343 <span class="comment">// -interpolation connexion_approchee connexion_exacte (voir lire_info_moyenne_imposee)</span>
<a name="l00344"></a>00344 <span class="comment">// </span>
<a name="l00345"></a><a class="code" href="classChamp__front__recyclage.html#a3a66e1a09a97babf2d7655b2b8867142">00345</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__front__recyclage.html#a3a66e1a09a97babf2d7655b2b8867142">Champ_front_recyclage::lire_info_moyenne_recyclee</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00346"></a>00346 {
<a name="l00347"></a>00347   <span class="keywordtype">int</span> methode = -1;
<a name="l00348"></a>00348   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> choix,motlu;
<a name="l00349"></a>00349   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_mots(4);
<a name="l00350"></a>00350   {
<a name="l00351"></a>00351     les_mots[0] = <span class="stringliteral">&quot;surfacique&quot;</span>;
<a name="l00352"></a>00352     les_mots[1] = <span class="stringliteral">&quot;interpolation&quot;</span>;
<a name="l00353"></a>00353     les_mots[2] = <span class="stringliteral">&quot;connexion_approchee&quot;</span>;
<a name="l00354"></a>00354     les_mots[3] = <span class="stringliteral">&quot;connexion_exacte&quot;</span>;
<a name="l00355"></a>00355   }
<a name="l00356"></a>00356   is &gt;&gt; choix;
<a name="l00357"></a>00357   <span class="keywordtype">int</span> rang = les_mots.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(choix);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359   <span class="keywordflow">switch</span>(rang)
<a name="l00360"></a>00360     {
<a name="l00361"></a>00361     <span class="keywordflow">case</span> 0 :
<a name="l00362"></a>00362       {
<a name="l00363"></a>00363         methode = 1;
<a name="l00364"></a>00364         <span class="keywordflow">break</span>;
<a name="l00365"></a>00365       }
<a name="l00366"></a>00366     <span class="keywordflow">case</span> 1 :
<a name="l00367"></a>00367       {
<a name="l00368"></a>00368         methode = 2;
<a name="l00369"></a>00369         <span class="keywordflow">break</span>;
<a name="l00370"></a>00370       }
<a name="l00371"></a>00371     <span class="keywordflow">case</span> 2 :
<a name="l00372"></a>00372       {
<a name="l00373"></a>00373         methode = 3;
<a name="l00374"></a>00374         <span class="keywordflow">break</span>;
<a name="l00375"></a>00375       }
<a name="l00376"></a>00376     <span class="keywordflow">case</span> 3 :
<a name="l00377"></a>00377       {
<a name="l00378"></a>00378         methode = 4;
<a name="l00379"></a>00379         <span class="keywordflow">break</span>;
<a name="l00380"></a>00380       }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     <span class="keywordflow">default</span> :
<a name="l00383"></a>00383       {
<a name="l00384"></a>00384         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage::lire_info_moyenne_recyclee keyword &quot;</span>&lt;&lt;choix&lt;&lt;<span class="stringliteral">&quot; is not recognized.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00385"></a>00385         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The recognized keywords are :&quot;</span>&lt;&lt;les_mots&lt;&lt;finl;
<a name="l00386"></a>00386         <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00387"></a>00387       }
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390   <span class="keywordflow">if</span> ((methode == 2) || (methode == 3) || (methode == 4))
<a name="l00391"></a>00391     {
<a name="l00392"></a>00392       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich;
<a name="l00393"></a>00393       is &gt;&gt; motlu;
<a name="l00394"></a>00394       <span class="keywordflow">if</span> (motlu!=<span class="stringliteral">&quot;fichier&quot;</span>)
<a name="l00395"></a>00395         {
<a name="l00396"></a>00396           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage::lire_info_moyenne_recyclee : a file must be provided for this method.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00397"></a>00397           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399       <span class="keywordflow">else</span>
<a name="l00400"></a>00400         is &gt;&gt; nom_fich;
<a name="l00401"></a>00401 
<a name="l00402"></a>00402       <a class="code" href="classChamp__front__recyclage.html#aec81625c44575a2f23fe6363711084f4">fich_recycl_</a>  = nom_fich;
<a name="l00403"></a>00403       <span class="keywordflow">if</span> (methode == 4)
<a name="l00404"></a>00404         is &gt;&gt; nom_fich;
<a name="l00405"></a>00405       <a class="code" href="classChamp__front__recyclage.html#afbc93e60b63660668b108ad80d8c74b0">fich_maillage_</a> = nom_fich;
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408   <span class="keywordflow">if</span> (methode==-1)
<a name="l00409"></a>00409     {
<a name="l00410"></a>00410       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Champ_front_recyclage::lire_info_moyenne_recyclee : no method to make average evaluation has been given.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00411"></a>00411       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Choose among the following keywords : les_mots&quot;</span>&lt;&lt;finl;
<a name="l00412"></a>00412       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00413"></a>00413     }
<a name="l00414"></a>00414 
<a name="l00415"></a>00415   <span class="keywordflow">return</span> methode;
<a name="l00416"></a>00416 }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 <span class="comment">// Initialisation de la reference au champ evaluateur (l_inconnue1)</span>
<a name="l00419"></a><a class="code" href="classChamp__front__recyclage.html#a43aed34cb6217d6091e8afa4977af238">00419</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#a43aed34cb6217d6091e8afa4977af238">Champ_front_recyclage::associer_champ_evaluateur</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; un_nom_pb1,<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; un_nom_inco1)
<a name="l00420"></a>00420 {
<a name="l00421"></a>00421   <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; ob1 = <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">Interprete::objet</a>(un_nom_pb1);
<a name="l00422"></a>00422   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>) pb1;
<a name="l00423"></a>00423   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) rch1;
<a name="l00424"></a>00424 
<a name="l00425"></a>00425   <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>,ob1))
<a name="l00426"></a>00426     {
<a name="l00427"></a>00427       pb1 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>,ob1);
<a name="l00428"></a>00428     }
<a name="l00429"></a>00429   <span class="keywordflow">else</span>
<a name="l00430"></a>00430     {
<a name="l00431"></a>00431       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt;<span class="stringliteral">&quot;No problem named &quot;</span>&lt;&lt; un_nom_pb1 &lt;&lt;<span class="stringliteral">&quot; has been found.&quot;</span>&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00432"></a>00432       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434   rch1 = pb1-&gt;get_champ(un_nom_inco1);
<a name="l00435"></a>00435 
<a name="l00436"></a>00436   <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>,rch1.valeur()))
<a name="l00437"></a>00437     <a class="code" href="classChamp__front__recyclage.html#a3454694ce72295999bd0ba19481718e8">l_inconnue1</a> = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>,rch1.valeur()) ;
<a name="l00438"></a>00438   <span class="keywordflow">else</span>
<a name="l00439"></a>00439     {
<a name="l00440"></a>00440       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;pb1-&gt;le_nom()&lt;&lt;<span class="stringliteral">&quot; has no unknown field named &quot;</span>&lt;&lt;un_nom_inco1&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00441"></a>00441       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00442"></a>00442     }
<a name="l00443"></a>00443 }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445 <span class="comment">// Evaluation de la localisation des points (coords)</span>
<a name="l00446"></a>00446 <span class="comment">// ou l_inconnue1 doit evaluer les valeurs a recycler</span>
<a name="l00447"></a>00447 <span class="comment">// coords = xv2(faces_bor2) + delt_dist</span>
<a name="l00448"></a>00448 <span class="comment">// </span>
<a name="l00449"></a><a class="code" href="classChamp__front__recyclage.html#ae90ee7b293fe67d4b0683406be2a6eaa">00449</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#ae90ee7b293fe67d4b0683406be2a6eaa">Champ_front_recyclage::get_coord_faces</a>(<span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; fr_vf,
<a name="l00450"></a>00450                                             <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coords,
<a name="l00451"></a>00451                                             <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; delt_dist)
<a name="l00452"></a>00452 {
<a name="l00453"></a>00453   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp;   fr_vf2    = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,fr_vf);
<a name="l00454"></a>00454   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp;    la_zone2  = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,fr_vf2.<a class="code" href="classFrontiere__dis__base.html#ae59cf10086641faa60a2b2fda4ac63ae">zone_dis</a>());
<a name="l00455"></a>00455   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;  xv2       = la_zone2.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00456"></a>00456   <span class="keyword">const</span> <span class="keywordtype">int</span>      nb_faces2 = fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00457"></a>00457   <span class="keyword">const</span> <span class="keywordtype">int</span>      ndeb2     = fr_vf2.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00458"></a>00458   <span class="keyword">const</span> <span class="keywordtype">int</span>      dim       = xv2.dimension(1);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460   coords.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces2,dim);
<a name="l00461"></a>00461   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_faces2; i++)
<a name="l00462"></a>00462     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; dim; j++)
<a name="l00463"></a>00463       coords(i,j) = xv2(i+ndeb2,j) + <a class="code" href="classChamp__front__recyclage.html#ab8997525c12511b419ffdc64d6832799">delt_dist</a>(j);
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 <span class="comment">// -appel a Champ_front_calc::initialiser(...)</span>
<a name="l00467"></a>00467 <span class="comment">// -dimensionnement de moyenne_imposee_ et moyenne_recyclee_ par nb_faces_bord2 et nb_compo_</span>
<a name="l00468"></a>00468 <span class="comment">// -constructon des structures assurant le parallelisme :</span>
<a name="l00469"></a>00469 <span class="comment">// inconnues1_coords_to_eval_ inconnues1_elems_ inconnues2_faces_</span>
<a name="l00470"></a>00470 <span class="comment">// -initialisation de moyenne_imposee_ et moyenne_recyclee_</span>
<a name="l00471"></a>00471 <span class="comment">// </span>
<a name="l00472"></a><a class="code" href="classChamp__front__recyclage.html#a5d953de5b68f18e8e785e86fceb1d024">00472</a> <span class="keywordtype">int</span> <a class="code" href="classChamp__front__recyclage.html#a5d953de5b68f18e8e785e86fceb1d024" title="Initialise le temps courant et Gpoint.">Champ_front_recyclage::initialiser</a>(<span class="keywordtype">double</span> temps, <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; inco)
<a name="l00473"></a>00473 {
<a name="l00474"></a>00474   <span class="keywordflow">if</span> (!<a class="code" href="classCh__front__var__instationnaire__dep.html#a5e18c33d21cdbee5214cd7e93de34bc3" title="Initialise le temps courant et Gpoint.">Ch_front_var_instationnaire_dep::initialiser</a>(temps,inco))
<a name="l00475"></a>00475     <span class="keywordflow">return</span> 0;
<a name="l00476"></a>00476 
<a name="l00477"></a>00477 <span class="comment">// 1: remote</span>
<a name="l00478"></a>00478 <span class="comment">// 2: local</span>
<a name="l00479"></a>00479   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>.<a class="code" href="classRef__Frontiere__dis__base.html#a345b498748a0885ac39c13ddf0041989">valeur</a>());
<a name="l00480"></a>00480   <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_bord2 = fr_vf2.<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>();
<a name="l00481"></a>00481   <span class="keywordtype">int</span> nb_faces_bord2 = fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00482"></a>00482   <a class="code" href="classChamp__front__recyclage.html#a43aed34cb6217d6091e8afa4977af238">associer_champ_evaluateur</a>(<a class="code" href="classChamp__front__recyclage.html#a0ed386f6d8a5d10432168c40477e5636">nom_pb1</a>,<a class="code" href="classChamp__front__recyclage.html#ace515c97d9da3e8a58fdc0acd5185678">nom_inco1</a>);
<a name="l00483"></a>00483 
<a name="l00484"></a>00484   <a class="code" href="classChamp__front__recyclage.html#ab461d2ca58241bf4a0392f8337ca630e">moyenne_imposee_</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces_bord2,<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffa9a675e25b5b7accff8d861e05060547b">Array_base::COPY_INIT</a>);
<a name="l00485"></a>00485   <a class="code" href="classChamp__front__recyclage.html#a8d6cfed6824190e20b2fed93d7bb617f">moyenne_recyclee_</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces_bord2,<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffa9a675e25b5b7accff8d861e05060547b">Array_base::COPY_INIT</a>);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()!=<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>)
<a name="l00488"></a>00488     {
<a name="l00489"></a>00489       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The number of fluctuation amplification factors is not coherent with the component number of the field &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__recyclage.html#ace515c97d9da3e8a58fdc0acd5185678">nom_inco1</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00490"></a>00490       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;This field has &quot;</span>&lt;&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>&lt;&lt;<span class="stringliteral">&quot; components and there is &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()&lt;&lt;<span class="stringliteral">&quot; amplification factors defined.&quot;</span>&lt;&lt;finl;
<a name="l00491"></a>00491       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Please check that ampli_fluctuation is well specified in your data set.&quot;</span>&lt;&lt;finl;
<a name="l00492"></a>00492       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00493"></a>00493     }
<a name="l00494"></a>00494 
<a name="l00495"></a>00495   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()!=<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>)
<a name="l00496"></a>00496     {
<a name="l00497"></a>00497       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The number of the amplification factors for the fixed average is not coherent with the component number of the field &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__recyclage.html#ace515c97d9da3e8a58fdc0acd5185678">nom_inco1</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00498"></a>00498       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;This field has &quot;</span>&lt;&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>&lt;&lt;<span class="stringliteral">&quot; components and there is &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()&lt;&lt;<span class="stringliteral">&quot; amplification factors defined.&quot;</span>&lt;&lt;finl;
<a name="l00499"></a>00499       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Please check that ampli_moyenne_imposee is well specified in your data set.&quot;</span>&lt;&lt;finl;
<a name="l00500"></a>00500       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()!=<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>)
<a name="l00504"></a>00504     {
<a name="l00505"></a>00505       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The number of the amplification factors for the recycled average is not coherent with the component number of the field &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__recyclage.html#ace515c97d9da3e8a58fdc0acd5185678">nom_inco1</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00506"></a>00506       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;This field has &quot;</span>&lt;&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>&lt;&lt;<span class="stringliteral">&quot; components and there is &quot;</span>&lt;&lt;<a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()&lt;&lt;<span class="stringliteral">&quot; amplification factors defined.&quot;</span>&lt;&lt;finl;
<a name="l00507"></a>00507       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Please check that ampli_moyenne_recyclee is well specified in your data set.&quot;</span>&lt;&lt;finl;
<a name="l00508"></a>00508       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00509"></a>00509     }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Initializing Champ_front_recyclage on the boundary: &quot;</span> &lt;&lt; nom_bord2 &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00512"></a>00512 
<a name="l00513"></a>00513 <span class="comment">// Pour chaque point de remote_coord, chercher le processeur dont le domaine1 contient ce point,</span>
<a name="l00514"></a>00514 <span class="comment">// et l&#39;indice de l&#39;element:</span>
<a name="l00515"></a>00515 
<a name="l00516"></a>00516   <span class="keyword">const</span> <span class="keywordtype">int</span> nprocs = <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">nproc</a>();
<a name="l00517"></a>00517   <span class="keyword">const</span> <span class="keywordtype">int</span> moi = <a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">me</a>();
<a name="l00518"></a>00518 
<a name="l00519"></a>00519 <span class="comment">// Remplissage de remote_coords[i]: coordonnees des centres des faces du bord nom_bord2</span>
<a name="l00520"></a>00520 <span class="comment">// (bord destination) + delt_dist</span>
<a name="l00521"></a>00521 <span class="comment">// du processeur i (tous les procs possedent le meme tableau remote_coords)</span>
<a name="l00522"></a>00522 <span class="comment">// Build a VECT(DoubleTab) containing the coordinates of the remote faces on zone 1 for each processor</span>
<a name="l00523"></a>00523   <a class="code" href="classDoubleTabs.html" title="DoubleTabs est equivalent a VECT(DoubleTab)">DoubleTabs</a> remote_coords(nprocs);
<a name="l00524"></a>00524   <span class="comment">/*</span>
<a name="l00525"></a>00525 <span class="comment">  if (nom_bord!=&quot;??&quot;) // Improve this test</span>
<a name="l00526"></a>00526 <span class="comment">  {</span>
<a name="l00527"></a>00527 <span class="comment">     const Front_VF&amp; fr_vf1 = ref_cast(Front_VF,front_dis());</span>
<a name="l00528"></a>00528 <span class="comment">     get_coord_faces(fr_vf1,remote_coords[moi],delt_dist);</span>
<a name="l00529"></a>00529 <span class="comment">  }</span>
<a name="l00530"></a>00530 <span class="comment">  else */</span>
<a name="l00531"></a>00531   <a class="code" href="classChamp__front__recyclage.html#ae90ee7b293fe67d4b0683406be2a6eaa">get_coord_faces</a>(fr_vf2,remote_coords[moi],<a class="code" href="classChamp__front__recyclage.html#ab8997525c12511b419ffdc64d6832799">delt_dist</a>);
<a name="l00532"></a>00532 
<a name="l00533"></a>00533   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pe = 0; pe &lt; nprocs; pe++)
<a name="l00534"></a>00534     <a class="code" href="communications_8cpp.html#a2335b36078ae87e23dab400a6e129a3c">envoyer_broadcast</a>(remote_coords[pe],pe);
<a name="l00535"></a>00535 
<a name="l00536"></a>00536 <span class="comment">// Size the 3 arrays:</span>
<a name="l00537"></a>00537   <a class="code" href="classChamp__front__recyclage.html#a9e970dc7ef885cc225199497d61876c0">inconnues1_coords_to_eval_</a>.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(nprocs);
<a name="l00538"></a>00538   <a class="code" href="classChamp__front__recyclage.html#afdff7b19d2ed8111acdedd312d796517">inconnues1_elems_</a>.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(nprocs);
<a name="l00539"></a>00539   <a class="code" href="classChamp__front__recyclage.html#ae71e57f392bc3b0ce76c76530a009af6">inconnues2_faces_</a>.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(nprocs);
<a name="l00540"></a>00540 
<a name="l00541"></a>00541   <a class="code" href="Vect_8h.html#adc7c7b04809c9aec2cb897cd2ef06378">VECT</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>) indexes_to_recv(nprocs);
<a name="l00542"></a>00542 
<a name="l00543"></a>00543 <span class="comment">// tmp array for octree results:</span>
<a name="l00544"></a>00544   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> elem_list;
<a name="l00545"></a>00545   elem_list.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00546"></a>00546 
<a name="l00547"></a>00547   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone1 = <a class="code" href="classChamp__front__recyclage.html#a3454694ce72295999bd0ba19481718e8">l_inconnue1</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>().<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>();
<a name="l00548"></a>00548   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_elem_zone1 = zone1.<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00549"></a>00549   <span class="keyword">const</span> <span class="keywordtype">int</span> dim = remote_coords[moi].<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>(1);
<a name="l00550"></a>00550 
<a name="l00551"></a>00551   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdis = <a class="code" href="classChamp__front__recyclage.html#a3454694ce72295999bd0ba19481718e8">l_inconnue1</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>().<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>();
<a name="l00552"></a>00552   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zdis);
<a name="l00553"></a>00553   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xp = zvf.<a class="code" href="classZone__VF.html#a87a29f0223c71256a25ee343c9277599">xp</a>();
<a name="l00554"></a>00554   <a class="code" href="classDoubleVect.html">DoubleVect</a> remote_point(3);
<a name="l00555"></a>00555   <span class="keyword">const</span> <a class="code" href="classOctreeRoot.html" title="Classe OctreeRoot.">OctreeRoot</a>&amp; octree = zone1.<a class="code" href="classZone.html#a492c53ea54616079fb65c18f7726ebc9">construit_octree</a>();
<a name="l00556"></a>00556 <span class="comment">// Loop on processes</span>
<a name="l00557"></a>00557   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pe = 0; pe &lt; nprocs; pe++)
<a name="l00558"></a>00558     {
<a name="l00559"></a>00559 <span class="comment">// Remote coordinates of the local faces:</span>
<a name="l00560"></a>00560       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; remote_coords_on_pe = remote_coords[pe];
<a name="l00561"></a>00561       <span class="keywordtype">int</span> nb_faces_on_pe = remote_coords_on_pe.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00562"></a>00562       elem_list.<a class="code" href="classArrOfInt.html#a2a8d5b9b592390c7d54d54742977d200" title="methode virtuelle identique a resize_array(), permet de traiter de facon generique les ArrOf...">resize_tab</a>(nb_faces_on_pe,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">ArrOfInt::NOCOPY_NOINIT</a>);
<a name="l00563"></a>00563 
<a name="l00564"></a>00564       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> elem_list_par_pos;
<a name="l00565"></a>00565 <span class="comment">// Loop on local faces on the process pe:</span>
<a name="l00566"></a>00566       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_face=0; ind_face&lt;nb_faces_on_pe; ind_face++)
<a name="l00567"></a>00567         {
<a name="l00568"></a>00568           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; j++)
<a name="l00569"></a>00569             remote_point(j) = remote_coords_on_pe(ind_face,j);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 <span class="comment">// Fill elem_list_par_pos by elements surrounding the remote point:</span>
<a name="l00572"></a>00572           octree.<a class="code" href="classOctreeRoot.html#aadb775575739c59baabc8bb13e48335c">rang_elems_sommet</a>(elem_list_par_pos,remote_point(0),remote_point(1),remote_point(2));
<a name="l00573"></a>00573           <span class="keywordtype">int</span> size_elem_list = elem_list_par_pos.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00574"></a>00574 
<a name="l00575"></a>00575           <span class="keywordflow">if</span> (size_elem_list==0)
<a name="l00576"></a>00576             elem_list(ind_face) = -1;
<a name="l00577"></a>00577           <span class="keywordflow">else</span>
<a name="l00578"></a>00578             {
<a name="l00579"></a>00579               <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> coord_elems(size_elem_list,dimension);
<a name="l00580"></a>00580               <a class="code" href="classIntList.html" title="Classe qui sert a representer une liste de reels int precision. On ne peut pas utiliser la classe con...">IntList</a> elems;
<a name="l00581"></a>00581 <span class="comment">// Fill a list elems and coordinates of the elems</span>
<a name="l00582"></a>00582               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_elem=0; ind_elem&lt;size_elem_list; ind_elem++)
<a name="l00583"></a>00583                 {
<a name="l00584"></a>00584                   <span class="keywordtype">int</span> elem = elem_list_par_pos(ind_elem);
<a name="l00585"></a>00585                   elems.<a class="code" href="classIntList.html#a251e57a817484f3c2bb8e9382ebb55b4" title="Ajout d&#39;un element a la liste ssi il n&#39;existe pas deja.">add_if_not</a>(elem);
<a name="l00586"></a>00586                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dir=0; dir&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; dir++)
<a name="l00587"></a>00587                     coord_elems(ind_elem,dir) = xp(elem,dir);
<a name="l00588"></a>00588                 }
<a name="l00589"></a>00589               <span class="keywordtype">int</span> elem_identifie;
<a name="l00590"></a>00590               <span class="keywordflow">if</span> (size_elem_list==1)
<a name="l00591"></a>00591                 {
<a name="l00592"></a>00592 <span class="comment">// Easy, one element in the list</span>
<a name="l00593"></a>00593                   elem_identifie = elems[0];
<a name="l00594"></a>00594                 }
<a name="l00595"></a>00595               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size_elem_list==2 &amp;&amp; <a class="code" href="ArrOfDouble_8cpp.html#af3b2ac08cde80e3eadd7a83f5fd06ab7" title="Calcul de la norme du vecteur dx (fonction blas DNRM2, soit racine carree(somme des dx[i]*dx[i])...">norme_array</a>(<a class="code" href="classChamp__front__recyclage.html#ab8997525c12511b419ffdc64d6832799">delt_dist</a>)==0)
<a name="l00596"></a>00596                 {
<a name="l00597"></a>00597 <span class="comment">// Check first if it is not 2 elements surrounding 2 internal superposed boundary faces, in this</span>
<a name="l00598"></a>00598 <span class="comment">// case, discards the element linked to the local boundary face</span>
<a name="l00599"></a>00599                   <span class="keywordtype">int</span> local_face = fr_vf2.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>()+ind_face;
<a name="l00600"></a>00600                   <span class="keywordtype">int</span> local_elem = zvf.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(local_face,0);
<a name="l00601"></a>00601                   <span class="keywordflow">if</span> (local_elem==-1) local_elem = zvf.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>(local_face,1);
<a name="l00602"></a>00602 <span class="comment">// Cerr &lt;&lt; &quot;[&quot; &lt;&lt; Process::me() &lt;&lt; &quot;&lt;-&gt;&quot; &lt;&lt; pe &lt;&lt; &quot;] nb_faces=&quot; &lt;&lt; fr_vf2.nb_faces() &lt;&lt; &quot; face= &quot; &lt;&lt; ind_face &lt;&lt; &quot; &quot; &lt;&lt; local_elem &lt;&lt; &quot; &quot; &lt;&lt; elems[0] &lt;&lt; &quot; &quot; &lt;&lt; elems[1] &lt;&lt; finl;</span>
<a name="l00603"></a>00603                   <span class="keywordflow">if</span> (elems[0]==local_elem)
<a name="l00604"></a>00604                     elem_identifie=elems[1]; <span class="comment">//!&lt; Remote elem</span>
<a name="l00605"></a>00605 <span class="comment"></span>                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (elems[1]==local_elem)
<a name="l00606"></a>00606                     elem_identifie=elems[0]; <span class="comment">//!&lt; Remote elem</span>
<a name="l00607"></a>00607 <span class="comment"></span>                  <span class="keywordflow">else</span>
<a name="l00608"></a>00608                     {
<a name="l00609"></a>00609 <span class="comment">// Surely 2 elements surrounding an internal face so select one element:</span>
<a name="l00610"></a>00610                       elem_identifie = <a class="code" href="classZone.html#a718b00d35161598bcb68d79013ab4d54">Zone::identifie_item_unique</a>(elems,coord_elems,remote_point);
<a name="l00611"></a>00611                     }
<a name="l00612"></a>00612                 }
<a name="l00613"></a>00613               <span class="keywordflow">else</span>
<a name="l00614"></a>00614                 {
<a name="l00615"></a>00615 <span class="comment">// Find a unic remote elem:</span>
<a name="l00616"></a>00616                   elem_identifie = <a class="code" href="classZone.html#a718b00d35161598bcb68d79013ab4d54">Zone::identifie_item_unique</a>(elems,coord_elems,remote_point);
<a name="l00617"></a>00617                 }
<a name="l00618"></a>00618               elem_list(ind_face) = (elem_identifie &lt; nb_elem_zone1 ? elem_identifie : -1);
<a name="l00619"></a>00619             }
<a name="l00620"></a>00620         }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622 <span class="comment">// We fill these three arrays:</span>
<a name="l00623"></a>00623       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord1 = <a class="code" href="classChamp__front__recyclage.html#a9e970dc7ef885cc225199497d61876c0">inconnues1_coords_to_eval_</a>[pe];
<a name="l00624"></a>00624       coord1.<a class="code" href="classArrOfDouble.html#ab49f6cae96be9d3f597468d8a53b67b6" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00625"></a>00625       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; num_elem = <a class="code" href="classChamp__front__recyclage.html#afdff7b19d2ed8111acdedd312d796517">inconnues1_elems_</a>[pe];
<a name="l00626"></a>00626       num_elem.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00627"></a>00627       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; index_to_recv = indexes_to_recv[pe];
<a name="l00628"></a>00628       index_to_recv.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00629"></a>00629 
<a name="l00630"></a>00630       <span class="keywordtype">int</span> nb_remote_faces = 0;
<a name="l00631"></a>00631 <span class="comment">// Loop on local faces on the process pe:</span>
<a name="l00632"></a>00632       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face = 0; face &lt; nb_faces_on_pe; face++)
<a name="l00633"></a>00633         {
<a name="l00634"></a>00634           <span class="keyword">const</span> <span class="keywordtype">int</span> elem = elem_list(face);
<a name="l00635"></a>00635           <span class="keywordflow">if</span> (elem &lt; 0 || elem &gt;= nb_elem_zone1)
<a name="l00636"></a>00636             {
<a name="l00637"></a>00637 <span class="comment">// This coordinate is not on this processor...</span>
<a name="l00638"></a>00638             }
<a name="l00639"></a>00639           <span class="keywordflow">else</span>
<a name="l00640"></a>00640             {
<a name="l00641"></a>00641               coord1.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_remote_faces + 1, dim);
<a name="l00642"></a>00642               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; dim; j++)
<a name="l00643"></a>00643                 coord1(nb_remote_faces, j) = remote_coords_on_pe(face, j);
<a name="l00644"></a>00644               nb_remote_faces++;
<a name="l00645"></a>00645               num_elem.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(elem);
<a name="l00646"></a>00646               index_to_recv.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(face);
<a name="l00647"></a>00647             }
<a name="l00648"></a>00648         }
<a name="l00649"></a>00649     }
<a name="l00650"></a>00650 
<a name="l00651"></a>00651 <span class="comment">// Send index_to_recv data to each processor</span>
<a name="l00652"></a>00652   <a class="code" href="communications_8cpp.html#a5ceda011ec527d63b691f62cd2fb61c8">envoyer_all_to_all</a>(indexes_to_recv, <a class="code" href="classChamp__front__recyclage.html#ae71e57f392bc3b0ce76c76530a009af6">inconnues2_faces_</a>);
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 <span class="comment">// Check that each coordinate is received from at least one processor:</span>
<a name="l00655"></a>00655   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces2 = remote_coords[moi].<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>(0);
<a name="l00656"></a>00656   <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> count(nb_faces2);
<a name="l00657"></a>00657   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pe = 0; pe &lt; nprocs; pe++)
<a name="l00658"></a>00658     {
<a name="l00659"></a>00659       <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> index_to_recv = <a class="code" href="classChamp__front__recyclage.html#ae71e57f392bc3b0ce76c76530a009af6">inconnues2_faces_</a>[pe];
<a name="l00660"></a>00660       <span class="keyword">const</span> <span class="keywordtype">int</span> n = index_to_recv.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00661"></a>00661       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
<a name="l00662"></a>00662         count[index_to_recv[i]] ++;
<a name="l00663"></a>00663 <span class="comment">// Cerr &lt;&lt; index_to_recv &lt;&lt; finl;</span>
<a name="l00664"></a>00664     }
<a name="l00665"></a>00665   <span class="keywordtype">int</span> error_1 = 0;
<a name="l00666"></a>00666   <span class="keywordtype">int</span> error_2 = 0;
<a name="l00667"></a>00667   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_faces2; i++)
<a name="l00668"></a>00668     {
<a name="l00669"></a>00669       <span class="keywordflow">if</span> (count[i] &lt; 1)
<a name="l00670"></a>00670         {
<a name="l00671"></a>00671           <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>() &lt;&lt; <span class="stringliteral">&quot;Champ_front_recyclage : error face (number &quot;</span>&lt;&lt; i&lt;&lt; <span class="stringliteral">&quot;) &quot;</span> &lt;&lt; remote_coords[moi](i, 0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; remote_coords[moi](i, 1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>
<a name="l00672"></a>00672                     &lt;&lt; ((dim==3)?remote_coords[moi](i, 2):0.) &lt;&lt; <span class="stringliteral">&quot; no matching element found&quot;</span> &lt;&lt; finl;
<a name="l00673"></a>00673           error_1 = 1;
<a name="l00674"></a>00674         }
<a name="l00675"></a>00675       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (count[i]&gt;1)
<a name="l00676"></a>00676         {
<a name="l00677"></a>00677           <a class="code" href="classProcess.html#a57e0f54b11e6eaadbea224fa904b18dd" title="Renvoie un objet statique de type Sortie qui sert de journal d&#39;evenements. Si message_level &lt;= verbose...">Journal</a>() &lt;&lt; <span class="stringliteral">&quot;Champ_front_recyclage : error face (number &quot;</span>&lt;&lt; i&lt;&lt; <span class="stringliteral">&quot;) &quot;</span> &lt;&lt; remote_coords[moi](i, 0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; remote_coords[moi](i, 1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>
<a name="l00678"></a>00678                     &lt;&lt; ((dim==3)?remote_coords[moi](i, 2):0.) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; count[i] &lt;&lt; <span class="stringliteral">&quot; corresponding points&quot;</span> &lt;&lt; finl;
<a name="l00679"></a>00679           error_2 = 1;
<a name="l00680"></a>00680         }
<a name="l00681"></a>00681 
<a name="l00682"></a>00682     }
<a name="l00683"></a>00683   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(error_1))
<a name="l00684"></a>00684     {
<a name="l00685"></a>00685       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_front_recyclage.\n&quot;</span>
<a name="l00686"></a>00686            &lt;&lt; <span class="stringliteral">&quot;No matching source element found for some faces of boundary &quot;</span> &lt;&lt; nom_bord2
<a name="l00687"></a>00687            &lt;&lt; <span class="stringliteral">&quot; (see log files).&quot;</span> &lt;&lt; finl;
<a name="l00688"></a>00688       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;If you are sure that boundary faces match with faces of the other domain, try adding this keyword:&quot;</span> &lt;&lt; finl;
<a name="l00689"></a>00689       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;PrecisionGeom 1.e-6&quot;</span> &lt;&lt; finl;
<a name="l00690"></a>00690       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Just after the following keyword in your data file:&quot;</span> &lt;&lt; finl;
<a name="l00691"></a>00691       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;dimension &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a> &lt;&lt; finl;
<a name="l00692"></a>00692       <a class="code" href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1" title="Synchronise tous les processeurs du groupe courant&lt;br&gt;(attend que tous les processeurs soient arrives...">barrier</a>();
<a name="l00693"></a>00693       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00694"></a>00694     }
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(error_2))
<a name="l00697"></a>00697     {
<a name="l00698"></a>00698       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_front_recyclage.\n&quot;</span>
<a name="l00699"></a>00699            &lt;&lt; <span class="stringliteral">&quot;At least two elements match for some faces of boundary &quot;</span> &lt;&lt; nom_bord2
<a name="l00700"></a>00700            &lt;&lt; <span class="stringliteral">&quot; (see log files).&quot;</span> &lt;&lt; finl;
<a name="l00701"></a>00701 
<a name="l00702"></a>00702       <a class="code" href="classProcess.html#aa9e74a5c06a68ea38298a08ea401e7b1" title="Synchronise tous les processeurs du groupe courant&lt;br&gt;(attend que tous les processeurs soient arrives...">barrier</a>();
<a name="l00703"></a>00703       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00704"></a>00704     }
<a name="l00705"></a>00705 
<a name="l00706"></a>00706   <a class="code" href="classChamp__front__recyclage.html#a2834b30f176673ab6537bb8da05066a7">initialiser_moyenne_imposee</a>(<a class="code" href="classChamp__front__recyclage.html#ab461d2ca58241bf4a0392f8337ca630e">moyenne_imposee_</a>);
<a name="l00707"></a>00707   <a class="code" href="classChamp__front__recyclage.html#a503699e2da78025a5b4d4842afd6ff8b">initialiser_moyenne_recyclee</a>(<a class="code" href="classChamp__front__recyclage.html#a8d6cfed6824190e20b2fed93d7bb617f">moyenne_recyclee_</a>);
<a name="l00708"></a>00708   <a class="code" href="classChamp__front__recyclage.html#a4fd5cd8060fd57a9205834f2d642b825" title="NE FAIT RIEN, a surcharger. Cette methode est appelee au debut de chaque pas de temps ou sous-pas-de-...">mettre_a_jour</a>(temps);
<a name="l00709"></a>00709 
<a name="l00710"></a>00710   <span class="keywordflow">return</span> 1;
<a name="l00711"></a>00711 
<a name="l00712"></a>00712 }
<a name="l00713"></a>00713 
<a name="l00714"></a>00714 <span class="comment">// -Evaluation des valeurs de l_inconnue1 aux points situes</span>
<a name="l00715"></a>00715 <span class="comment">// dans le plan1 (xv(faces_bord2) + delt_dist)</span>
<a name="l00716"></a>00716 <span class="comment">// -Echange des donnees entre processeurs</span>
<a name="l00717"></a>00717 <span class="comment">// -Calcul de moyenne_imposee_ et moyenne_recyclee_ si evaluation dependante du temps</span>
<a name="l00718"></a>00718 <span class="comment">// (faite par le processeur local sur le bord2 a partir de donnees recues d autres</span>
<a name="l00719"></a>00719 <span class="comment">// processeurs ou specifiees dans le jeu de donnees)</span>
<a name="l00720"></a>00720 <span class="comment">// </span>
<a name="l00721"></a><a class="code" href="classChamp__front__recyclage.html#a4fd5cd8060fd57a9205834f2d642b825">00721</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#a4fd5cd8060fd57a9205834f2d642b825" title="NE FAIT RIEN, a surcharger. Cette methode est appelee au debut de chaque pas de temps ou sous-pas-de-...">Champ_front_recyclage::mettre_a_jour</a>(<span class="keywordtype">double</span> temps)
<a name="l00722"></a>00722 {
<a name="l00723"></a>00723 
<a name="l00724"></a>00724   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab = <a class="code" href="classChamp__front__var__instationnaire.html#a4ce857027c891d19b36813a44f260400" title="Renvoie les valeurs au temps desire. Sinon, sort en erreur.">valeurs_au_temps</a>(temps);
<a name="l00725"></a>00725   <span class="keyword">const</span> <span class="keywordtype">int</span> nprocs = <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">nproc</a>();
<a name="l00726"></a>00726   <a class="code" href="classDoubleTabs.html" title="DoubleTabs est equivalent a VECT(DoubleTab)">DoubleTabs</a> values_to_send(nprocs);
<a name="l00727"></a>00727   <a class="code" href="classDoubleTabs.html" title="DoubleTabs est equivalent a VECT(DoubleTab)">DoubleTabs</a> values_to_recv(nprocs);
<a name="l00728"></a>00728 <span class="comment">// temporary array (because valeur_aux_elems wants intvect and not arrofint)</span>
<a name="l00729"></a>00729   <a class="code" href="classIntVect.html">IntVect</a> elems;
<a name="l00730"></a>00730   elems.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00731"></a>00731 
<a name="l00732"></a>00732   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pe = 0; pe &lt; nprocs; pe++)
<a name="l00733"></a>00733     {
<a name="l00734"></a>00734       elems.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classChamp__front__recyclage.html#afdff7b19d2ed8111acdedd312d796517">inconnues1_elems_</a>[pe].size_array());
<a name="l00735"></a>00735       elems.<a class="code" href="classArrOfInt.html#a195c644d98bf2da2fe4f8aede4e02262" title="Copie les elements source[first_element_source + i] dans les elements (*this)[first_element_dest + i]...">inject_array</a>(<a class="code" href="classChamp__front__recyclage.html#afdff7b19d2ed8111acdedd312d796517">inconnues1_elems_</a>[pe]);
<a name="l00736"></a>00736 
<a name="l00737"></a>00737       <span class="keyword">const</span> <span class="keywordtype">int</span> n = elems.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00738"></a>00738       values_to_send[pe].resize(n,<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>);
<a name="l00739"></a>00739       <a class="code" href="classChamp__front__recyclage.html#a3454694ce72295999bd0ba19481718e8">l_inconnue1</a>.<a class="code" href="classRef__Champ__Inc__base.html#a17553641a4c06730e1562125e07b3490">valeur</a>().<a class="code" href="classChamp__base.html#a43eede56d800b44980b8534a1845c9a5" title="provoque une erreur ! doit etre surchargee par les classes derivees non virtuelle pure par commodite ...">valeur_aux_elems</a>(<a class="code" href="classChamp__front__recyclage.html#a9e970dc7ef885cc225199497d61876c0">inconnues1_coords_to_eval_</a>[pe],
<a name="l00740"></a>00740                                             elems,
<a name="l00741"></a>00741                                             values_to_send[pe]);
<a name="l00742"></a>00742 
<a name="l00743"></a>00743     }
<a name="l00744"></a>00744   <a class="code" href="communications_8cpp.html#a5ceda011ec527d63b691f62cd2fb61c8">envoyer_all_to_all</a>(values_to_send, values_to_recv);
<a name="l00745"></a>00745   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pe = 0; pe &lt; nprocs; pe++)
<a name="l00746"></a>00746     {
<a name="l00747"></a>00747       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; values = values_to_recv[pe];
<a name="l00748"></a>00748       <span class="keyword">const</span> <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> index_to_recv = <a class="code" href="classChamp__front__recyclage.html#ae71e57f392bc3b0ce76c76530a009af6">inconnues2_faces_</a>[pe];
<a name="l00749"></a>00749       <span class="keyword">const</span> <span class="keywordtype">int</span> n = index_to_recv.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00750"></a>00750       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
<a name="l00751"></a>00751         {
<a name="l00752"></a>00752           <span class="keyword">const</span> <span class="keywordtype">int</span> idx = index_to_recv[i];
<a name="l00753"></a>00753           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; j++)
<a name="l00754"></a>00754             tab(idx, j) = values(i, j);
<a name="l00755"></a>00755         }
<a name="l00756"></a>00756     }
<a name="l00757"></a>00757 
<a name="l00758"></a>00758   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>.<a class="code" href="classRef__Frontiere__dis__base.html#a345b498748a0885ac39c13ddf0041989">valeur</a>());
<a name="l00759"></a>00759   <span class="keywordtype">int</span> nb_faces2 = fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00760"></a>00760 
<a name="l00761"></a>00761   <a class="code" href="classChamp__front__recyclage.html#a1e3e90da912a17d8ac20bd9e6e6eb1ac">calcul_moyenne_imposee</a>(tab,temps);
<a name="l00762"></a>00762   <a class="code" href="classChamp__front__recyclage.html#a1778cd071985d24ae99ffeef2bc40d44">calcul_moyenne_recyclee</a>(tab,temps);
<a name="l00763"></a>00763 
<a name="l00764"></a>00764   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_faces2; i++)
<a name="l00765"></a>00765     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dir=0; dir&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; dir++)
<a name="l00766"></a>00766       tab(i,dir) = <a class="code" href="classChamp__front__recyclage.html#a7074dbe90c59006770f4b4f4c69ea12c">ampli_moy_imposee_</a>(dir)*<a class="code" href="classChamp__front__recyclage.html#ab461d2ca58241bf4a0392f8337ca630e">moyenne_imposee_</a>(i,dir) + <a class="code" href="classChamp__front__recyclage.html#a5c02f119b0d9cc8f104c8b51b74cd0c8">ampli_fluct_</a>(dir)*(tab(i,dir)-<a class="code" href="classChamp__front__recyclage.html#a8549cc1625df0f6c97fb5cb88bd4b426">ampli_moy_recyclee_</a>(dir)*<a class="code" href="classChamp__front__recyclage.html#a8d6cfed6824190e20b2fed93d7bb617f">moyenne_recyclee_</a>(i,dir));
<a name="l00767"></a>00767 
<a name="l00768"></a>00768   tab.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00769"></a>00769 
<a name="l00770"></a>00770 }
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 <span class="comment">// Construction de donnees necessaires a l estimation de moyenne_imposee_</span>
<a name="l00773"></a>00773 <span class="comment">// en fonction de la methode d evaluation retenue (methode_moy_impos_)</span>
<a name="l00774"></a>00774 <span class="comment">// </span>
<a name="l00775"></a><a class="code" href="classChamp__front__recyclage.html#a2834b30f176673ab6537bb8da05066a7">00775</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#a2834b30f176673ab6537bb8da05066a7">Champ_front_recyclage::initialiser_moyenne_imposee</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; moyenne)
<a name="l00776"></a>00776 {
<a name="l00777"></a>00777 
<a name="l00778"></a>00778   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>.<a class="code" href="classRef__Frontiere__dis__base.html#a345b498748a0885ac39c13ddf0041989">valeur</a>());
<a name="l00779"></a>00779 
<a name="l00780"></a>00780   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==1)
<a name="l00781"></a>00781     {
<a name="l00782"></a>00782       <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>);
<a name="l00783"></a>00783       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; i++)
<a name="l00784"></a>00784         {
<a name="l00785"></a>00785           <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[i].setNbVar(4);
<a name="l00786"></a>00786           <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[i].setString(<a class="code" href="classChamp__front__recyclage.html#a9805e316bb5263ff3c6d282dce3d1931">fcts_xyz</a>[i]);
<a name="l00787"></a>00787           <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[i].addVar(<span class="stringliteral">&quot;t&quot;</span>);
<a name="l00788"></a>00788           <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[i].addVar(<span class="stringliteral">&quot;x&quot;</span>);
<a name="l00789"></a>00789           <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[i].addVar(<span class="stringliteral">&quot;y&quot;</span>);
<a name="l00790"></a>00790           <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[i].addVar(<span class="stringliteral">&quot;z&quot;</span>);
<a name="l00791"></a>00791           <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[i].parseString();
<a name="l00792"></a>00792         }
<a name="l00793"></a>00793     }
<a name="l00794"></a>00794   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==2)
<a name="l00795"></a>00795     {
<a name="l00796"></a>00796       <a class="code" href="classChamp__front__recyclage.html#a46de77ef7c4befd935eaac0bd21a329b">lire_fichier_format1</a>(<a class="code" href="classChamp__front__recyclage.html#ab461d2ca58241bf4a0392f8337ca630e">moyenne_imposee_</a>,fr_vf2,<a class="code" href="classChamp__front__recyclage.html#aab9e03ba65934802188db712305a3400">fich_impos_</a>);
<a name="l00797"></a>00797     }
<a name="l00798"></a>00798   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==3)
<a name="l00799"></a>00799     {
<a name="l00800"></a>00800       <a class="code" href="classChamp__front__recyclage.html#a336324702e35f03a80350d6d9d7029ad">lire_fichier_format2</a>(<a class="code" href="classChamp__front__recyclage.html#ab461d2ca58241bf4a0392f8337ca630e">moyenne_imposee_</a>,fr_vf2,<a class="code" href="classChamp__front__recyclage.html#aab9e03ba65934802188db712305a3400">fich_impos_</a>);
<a name="l00801"></a>00801     }
<a name="l00802"></a>00802   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==4)
<a name="l00803"></a>00803     {
<a name="l00804"></a>00804       <a class="code" href="classChamp__front__recyclage.html#af36fdc7cbb3ea7c3a756f607c94dbeaa">lire_fichier_format3</a>(<a class="code" href="classChamp__front__recyclage.html#ab461d2ca58241bf4a0392f8337ca630e">moyenne_imposee_</a>,fr_vf2,<a class="code" href="classChamp__front__recyclage.html#aab9e03ba65934802188db712305a3400">fich_impos_</a>,<a class="code" href="classChamp__front__recyclage.html#afbc93e60b63660668b108ad80d8c74b0">fich_maillage_</a>);
<a name="l00805"></a>00805     }
<a name="l00806"></a>00806   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==5)
<a name="l00807"></a>00807     {
<a name="l00808"></a>00808       <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis2 = fr_vf2.<a class="code" href="classFrontiere__dis__base.html#ae59cf10086641faa60a2b2fda4ac63ae">zone_dis</a>();
<a name="l00809"></a>00809       <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; la_zone2        = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis2);
<a name="l00810"></a>00810       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;  xv2          = la_zone2.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00811"></a>00811 
<a name="l00812"></a>00812       <span class="keywordtype">double</span> Kappa = 0.41;
<a name="l00813"></a>00813       <span class="keywordtype">double</span> d_paroi,y_plus,U_log;
<a name="l00814"></a>00814 
<a name="l00815"></a>00815       <span class="keywordtype">int</span> nbface2 = fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00816"></a>00816       <span class="keywordtype">int</span> num1 = fr_vf2.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00817"></a>00817       <span class="keywordtype">int</span> num2 = num1 + nbface2;
<a name="l00818"></a>00818       <span class="keywordtype">int</span> num_face_loc;
<a name="l00819"></a>00819 
<a name="l00820"></a>00820       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_face2=num1; num_face2&lt;num2; num_face2++)
<a name="l00821"></a>00821         {
<a name="l00822"></a>00822           num_face_loc = num_face2-num1;
<a name="l00823"></a>00823           d_paroi = <a class="code" href="classChamp__front__recyclage.html#a7241368168500bece0eff667255e2b36">diametre</a>/2.;
<a name="l00824"></a>00824 
<a name="l00825"></a>00825           <span class="keywordflow">if</span>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l00826"></a>00826             {
<a name="l00827"></a>00827               <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==1) d_paroi -= sqrt(xv2(num_face2,1)*xv2(num_face2,1) + xv2(num_face2,2)*xv2(num_face2,2));
<a name="l00828"></a>00828               <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==2) d_paroi -= sqrt(xv2(num_face2,0)*xv2(num_face2,0) + xv2(num_face2,2)*xv2(num_face2,2));
<a name="l00829"></a>00829               <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==3) d_paroi -= sqrt(xv2(num_face2,0)*xv2(num_face2,0) + xv2(num_face2,1)*xv2(num_face2,1));
<a name="l00830"></a>00830             }
<a name="l00831"></a>00831           <span class="keywordflow">else</span>
<a name="l00832"></a>00832             {
<a name="l00833"></a>00833               <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==1) d_paroi -= sqrt(xv2(num_face2,1)*xv2(num_face2,1));
<a name="l00834"></a>00834               <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==2) d_paroi -= sqrt(xv2(num_face2,0)*xv2(num_face2,0));
<a name="l00835"></a>00835             }
<a name="l00836"></a>00836 
<a name="l00837"></a>00837           y_plus = d_paroi*<a class="code" href="classChamp__front__recyclage.html#a2d052bcb8a8010b2ffe0b6a9bc317c5b">u_tau</a>/<a class="code" href="classChamp__front__recyclage.html#a155fdaf674c193686471affcdc6fd6e0">visco_cin</a>;
<a name="l00838"></a>00838           U_log  = (1./Kappa)*log(y_plus) + 5.1;
<a name="l00839"></a>00839           U_log *=  <a class="code" href="classChamp__front__recyclage.html#a2d052bcb8a8010b2ffe0b6a9bc317c5b">u_tau</a>;
<a name="l00840"></a>00840           U_log *= <a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>/abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>);
<a name="l00841"></a>00841 
<a name="l00842"></a>00842           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> dir=0; dir&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; dir++)
<a name="l00843"></a>00843             moyenne(num_face_loc,dir) = ((dir+1)==abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>))*U_log;
<a name="l00844"></a>00844         }
<a name="l00845"></a>00845     }
<a name="l00846"></a>00846 }
<a name="l00847"></a>00847 
<a name="l00848"></a>00848 <span class="comment">// Construction de donnees necessaires a l estimation de moyenne_recyclee_</span>
<a name="l00849"></a>00849 <span class="comment">// en fonction de la methode d evaluation retenue (methode_moy_recycl_)</span>
<a name="l00850"></a>00850 <span class="comment">// </span>
<a name="l00851"></a><a class="code" href="classChamp__front__recyclage.html#a503699e2da78025a5b4d4842afd6ff8b">00851</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#a503699e2da78025a5b4d4842afd6ff8b">Champ_front_recyclage::initialiser_moyenne_recyclee</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; moyenne)
<a name="l00852"></a>00852 {
<a name="l00853"></a>00853   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>.<a class="code" href="classRef__Frontiere__dis__base.html#a345b498748a0885ac39c13ddf0041989">valeur</a>());
<a name="l00854"></a>00854   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a>==2)
<a name="l00855"></a>00855     {
<a name="l00856"></a>00856       <a class="code" href="classChamp__front__recyclage.html#a46de77ef7c4befd935eaac0bd21a329b">lire_fichier_format1</a>(<a class="code" href="classChamp__front__recyclage.html#a8d6cfed6824190e20b2fed93d7bb617f">moyenne_recyclee_</a>,fr_vf2,<a class="code" href="classChamp__front__recyclage.html#aec81625c44575a2f23fe6363711084f4">fich_recycl_</a>);
<a name="l00857"></a>00857     }
<a name="l00858"></a>00858   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a>==3)
<a name="l00859"></a>00859     {
<a name="l00860"></a>00860       <a class="code" href="classChamp__front__recyclage.html#a336324702e35f03a80350d6d9d7029ad">lire_fichier_format2</a>(<a class="code" href="classChamp__front__recyclage.html#a8d6cfed6824190e20b2fed93d7bb617f">moyenne_recyclee_</a>,fr_vf2,<a class="code" href="classChamp__front__recyclage.html#aec81625c44575a2f23fe6363711084f4">fich_recycl_</a>);
<a name="l00861"></a>00861     }
<a name="l00862"></a>00862   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a>==4)
<a name="l00863"></a>00863     {
<a name="l00864"></a>00864       <a class="code" href="classChamp__front__recyclage.html#af36fdc7cbb3ea7c3a756f607c94dbeaa">lire_fichier_format3</a>(<a class="code" href="classChamp__front__recyclage.html#a8d6cfed6824190e20b2fed93d7bb617f">moyenne_recyclee_</a>,fr_vf2,<a class="code" href="classChamp__front__recyclage.html#aec81625c44575a2f23fe6363711084f4">fich_recycl_</a>,<a class="code" href="classChamp__front__recyclage.html#afbc93e60b63660668b108ad80d8c74b0">fich_maillage_</a>);
<a name="l00865"></a>00865     }
<a name="l00866"></a>00866 }
<a name="l00867"></a>00867 
<a name="l00868"></a>00868 
<a name="l00869"></a>00869 <span class="comment">// Evaluation de moyenne_imposee_ en fonction de la methode d evaluation retenue</span>
<a name="l00870"></a>00870 <span class="comment">// -methode_moy_impos_==1 : profil analytique</span>
<a name="l00871"></a>00871 <span class="comment">// -methode_moy_impos_==2 : pas d actualisation (voir initialiser_moyenne_imposee())</span>
<a name="l00872"></a>00872 <span class="comment">// lecture a l initialisation et interpolation des donnees lues</span>
<a name="l00873"></a>00873 <span class="comment">// -methode_moy_impos_==3 : pas d actualisation (voir initialiser_moyenne_imposee())</span>
<a name="l00874"></a>00874 <span class="comment">// lecture a l initialisation pour realiser une connexion_approchee</span>
<a name="l00875"></a>00875 <span class="comment">// -methode_moy_impos_==4 : pas d actualisation (voir initialiser_moyenne_imposee())</span>
<a name="l00876"></a>00876 <span class="comment">// lecture a l initialisation pour realiser une connexion_exacte</span>
<a name="l00877"></a>00877 <span class="comment">// -methode_moy_impos_==5 : pas d actualisation (voir initialiser_moyenne_imposee())</span>
<a name="l00878"></a>00878 <span class="comment">// construction a l initialisation d une loi log :</span>
<a name="l00879"></a>00879 <span class="comment">// U_log  = ndir/abs(ndir)*u_tau*(1./Kappa)*log(y_plus) + 5.1;</span>
<a name="l00880"></a>00880 <span class="comment">// </span>
<a name="l00881"></a><a class="code" href="classChamp__front__recyclage.html#a1e3e90da912a17d8ac20bd9e6e6eb1ac">00881</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#a1e3e90da912a17d8ac20bd9e6e6eb1ac">Champ_front_recyclage::calcul_moyenne_imposee</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab,<span class="keywordtype">double</span> temps)
<a name="l00882"></a>00882 {
<a name="l00883"></a>00883   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==1)
<a name="l00884"></a>00884     {
<a name="l00885"></a>00885       <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>.<a class="code" href="classRef__Frontiere__dis__base.html#a345b498748a0885ac39c13ddf0041989">valeur</a>());
<a name="l00886"></a>00886       <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis2 = fr_vf2.<a class="code" href="classFrontiere__dis__base.html#ae59cf10086641faa60a2b2fda4ac63ae">zone_dis</a>();
<a name="l00887"></a>00887       <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp;  la_zone2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis2);
<a name="l00888"></a>00888       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;  xv2 = la_zone2.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00889"></a>00889       <span class="keywordtype">int</span> nb_faces_bord2 = fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00890"></a>00890       <span class="keywordtype">int</span> ndeb = fr_vf2.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l00891"></a>00891 
<a name="l00892"></a>00892       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_faces_bord2; i++)
<a name="l00893"></a>00893         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; j++)
<a name="l00894"></a>00894           {
<a name="l00895"></a>00895             <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[j].setVar(0,temps);
<a name="l00896"></a>00896             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; d++)
<a name="l00897"></a>00897               <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[j].setVar(d+1,xv2(ndeb+i,d));
<a name="l00898"></a>00898             <a class="code" href="classChamp__front__recyclage.html#ab461d2ca58241bf4a0392f8337ca630e">moyenne_imposee_</a>(i,j) =  <a class="code" href="classChamp__front__recyclage.html#a56dfcd609eeb7ffb1b6136820ca276a7">profil_2</a>[j].eval();
<a name="l00899"></a>00899           }
<a name="l00900"></a>00900     }
<a name="l00901"></a>00901   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==2)
<a name="l00902"></a>00902     {
<a name="l00903"></a>00903     }
<a name="l00904"></a>00904   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==3)
<a name="l00905"></a>00905     {
<a name="l00906"></a>00906     }
<a name="l00907"></a>00907   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==4)
<a name="l00908"></a>00908     {
<a name="l00909"></a>00909     }
<a name="l00910"></a>00910   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>==5)
<a name="l00911"></a>00911     {
<a name="l00912"></a>00912     }
<a name="l00913"></a>00913   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ae6556984992db0b3fa1287e8af3c3d3d">methode_moy_impos_</a>!=-1)
<a name="l00914"></a>00914     {
<a name="l00915"></a>00915       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The method used to calculate moyenne_imposee_ is not definded.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00916"></a>00916       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00917"></a>00917     }
<a name="l00918"></a>00918 }
<a name="l00919"></a>00919 
<a name="l00920"></a>00920 <span class="comment">// Evaluation de moyenne_recyclee_ en fonction de la methode d evaluation retenue</span>
<a name="l00921"></a>00921 <span class="comment">// -methode_moy_recycl_==1 : moyenne surfacique sur le bord2 des valeurs estimees</span>
<a name="l00922"></a>00922 <span class="comment">// par l_inconnue1 dans plan1</span>
<a name="l00923"></a>00923 <span class="comment">// -methode_moy_recycl_==2 : pas d actualisation (voir initialiser_moyenne_recyclee)</span>
<a name="l00924"></a>00924 <span class="comment">// lecture a l initialisation et interpolation des donnees lues</span>
<a name="l00925"></a>00925 <span class="comment">// -methode_moy_recycl_==3 : pas d actualisation (voir initialiser_moyenne_recyclee())</span>
<a name="l00926"></a>00926 <span class="comment">// lecture a l initialisation pour realiser une connexion_approchee</span>
<a name="l00927"></a>00927 <span class="comment">// -methode_moy_recycl_==4 : pas d actualisation (voir initialiser_moyenne_recyclee())</span>
<a name="l00928"></a>00928 <span class="comment">// lecture a l initialisation pour realiser une connexion_exacte</span>
<a name="l00929"></a>00929 <span class="comment">// </span>
<a name="l00930"></a><a class="code" href="classChamp__front__recyclage.html#a1778cd071985d24ae99ffeef2bc40d44">00930</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#a1778cd071985d24ae99ffeef2bc40d44">Champ_front_recyclage::calcul_moyenne_recyclee</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab,<span class="keywordtype">double</span> temps)
<a name="l00931"></a>00931 {
<a name="l00932"></a>00932   <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a>==1)
<a name="l00933"></a>00933     {
<a name="l00934"></a>00934       <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,<a class="code" href="classChamp__front__base.html#a99ee1ceac721d515e0f1ff4d88a6a2a8">la_frontiere_dis</a>.<a class="code" href="classRef__Frontiere__dis__base.html#a345b498748a0885ac39c13ddf0041989">valeur</a>());
<a name="l00935"></a>00935       <span class="keywordtype">int</span> nb_faces_bord2 = fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l00936"></a>00936       <a class="code" href="classDoubleVect.html">DoubleVect</a> face_surfaces;
<a name="l00937"></a>00937       <span class="keyword">const</span> <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; les_faces_bord = fr_vf2.<a class="code" href="classFrontiere__dis__base.html#a95f81b046cd23c8c8083ae03eebe93cd" title="Renvoie la frontiere geometrique associee. (version const)">frontiere</a>().<a class="code" href="classFrontiere.html#ac64479069f0c43a17cb5766a39ce5ba8" title="Renvoie les faces de la frontiere&lt;br&gt;(version const)">faces</a>();
<a name="l00938"></a>00938       les_faces_bord.<a class="code" href="classFaces.html#a8143c6ab93f3350b3f1370d6616953c9" title="Calcule la surface des faces.">calculer_surfaces</a>(face_surfaces);
<a name="l00939"></a>00939 
<a name="l00940"></a>00940       <a class="code" href="classDoubleVect.html">DoubleVect</a> moyenne(<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>);
<a name="l00941"></a>00941       <span class="keywordtype">double</span> somme_si = 0.;
<a name="l00942"></a>00942       moyenne = 0.;
<a name="l00943"></a>00943       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_faces_bord2; i++)
<a name="l00944"></a>00944         {
<a name="l00945"></a>00945           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; j++)
<a name="l00946"></a>00946             moyenne(j) += tab(i,j)*face_surfaces(i);
<a name="l00947"></a>00947 
<a name="l00948"></a>00948           somme_si += face_surfaces(i);
<a name="l00949"></a>00949         }
<a name="l00950"></a>00950       somme_si = <a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(somme_si);
<a name="l00951"></a>00951 
<a name="l00952"></a>00952       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; j++)
<a name="l00953"></a>00953         moyenne(j) = <a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(moyenne(j));
<a name="l00954"></a>00954       moyenne /= somme_si;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_faces_bord2; i++)
<a name="l00957"></a>00957         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; j++)
<a name="l00958"></a>00958           <a class="code" href="classChamp__front__recyclage.html#a8d6cfed6824190e20b2fed93d7bb617f">moyenne_recyclee_</a>(i,j) = moyenne(j);
<a name="l00959"></a>00959     }
<a name="l00960"></a>00960   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a>==2)
<a name="l00961"></a>00961     {
<a name="l00962"></a>00962     }
<a name="l00963"></a>00963   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a>==3)
<a name="l00964"></a>00964     {
<a name="l00965"></a>00965     }
<a name="l00966"></a>00966   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a>==4)
<a name="l00967"></a>00967     {
<a name="l00968"></a>00968     }
<a name="l00969"></a>00969   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#ac01a7fe29ad2b21ef317e202ae16cf0a">methode_moy_recycl_</a>!=-1)
<a name="l00970"></a>00970     {
<a name="l00971"></a>00971       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;The method used to calculate moyenne_recyclee_ is not defined.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00972"></a>00972       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00973"></a>00973     }
<a name="l00974"></a>00974 }
<a name="l00975"></a>00975 
<a name="l00976"></a>00976 <span class="comment">// -Lecture du fichier pour dimensionner y_Pb2 et U_Pb2</span>
<a name="l00977"></a>00977 <span class="comment">// -Utilisation des donnees lues dans le fichier pour les trois points</span>
<a name="l00978"></a>00978 <span class="comment">// possedant les cotes les plus proches de y afin de faire une interpolation</span>
<a name="l00979"></a>00979 <span class="comment">// de la variable associee</span>
<a name="l00980"></a>00980 <span class="comment">// </span>
<a name="l00981"></a><a class="code" href="classChamp__front__recyclage.html#ae56181dc16492260d304f4772aca0716">00981</a> <span class="keywordtype">double</span> <a class="code" href="classChamp__front__recyclage.html#ae56181dc16492260d304f4772aca0716">Champ_front_recyclage::UPb</a>(<span class="keywordtype">double</span> y,<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich)
<a name="l00982"></a>00982 {
<a name="l00983"></a>00983 
<a name="l00984"></a>00984   <span class="keywordtype">int</span> nb_pts;
<a name="l00985"></a>00985   <a class="code" href="classDoubleVect.html">DoubleVect</a> y_Pb2;
<a name="l00986"></a>00986   <a class="code" href="classDoubleVect.html">DoubleVect</a> U_Pb2;
<a name="l00987"></a>00987   <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> fich_Pb2(nom_fich);
<a name="l00988"></a>00988 
<a name="l00989"></a>00989   y_Pb2.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1);
<a name="l00990"></a>00990   U_Pb2.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1);
<a name="l00991"></a>00991   <span class="keywordtype">int</span> l=0;
<a name="l00992"></a>00992   <span class="keywordflow">while</span> (!fich_Pb2.<a class="code" href="classEntree__Fichier__base.html#a5e6b0d743eb5c7986090c615bd7ad584">eof</a>())
<a name="l00993"></a>00993     {
<a name="l00994"></a>00994       y_Pb2.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(l+1);
<a name="l00995"></a>00995       U_Pb2.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(l+1);
<a name="l00996"></a>00996       fich_Pb2 &gt;&gt; y_Pb2(l) &gt;&gt; U_Pb2(l);
<a name="l00997"></a>00997       l++;
<a name="l00998"></a>00998     }
<a name="l00999"></a>00999   nb_pts=l-1;
<a name="l01000"></a>01000   y_Pb2.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_pts);
<a name="l01001"></a>01001   U_Pb2.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_pts);
<a name="l01002"></a>01002   fich_Pb2.<a class="code" href="classEntree__Fichier__base.html#aca9165bc1712c1057b4d4b91a7ea4fb4">close</a>();
<a name="l01003"></a>01003 
<a name="l01004"></a>01004   l=0;
<a name="l01005"></a>01005   <span class="keywordtype">int</span> l_deb;
<a name="l01006"></a>01006 
<a name="l01007"></a>01007   <span class="keywordflow">while</span> ((y&gt;y_Pb2(l)) &amp;&amp; (l&lt;nb_pts))
<a name="l01008"></a>01008     {
<a name="l01009"></a>01009       l++;
<a name="l01010"></a>01010     }
<a name="l01011"></a>01011 
<a name="l01012"></a>01012   <span class="keywordflow">if</span> (l&lt;2)
<a name="l01013"></a>01013     {
<a name="l01014"></a>01014       l_deb=0;
<a name="l01015"></a>01015     }
<a name="l01016"></a>01016   <span class="keywordflow">else</span>
<a name="l01017"></a>01017     {
<a name="l01018"></a>01018       <span class="keywordflow">if</span> (l&gt;(nb_pts-2))
<a name="l01019"></a>01019         {
<a name="l01020"></a>01020           l_deb=nb_pts-3;
<a name="l01021"></a>01021         }
<a name="l01022"></a>01022       <span class="keywordflow">else</span>
<a name="l01023"></a>01023         {
<a name="l01024"></a>01024           <span class="keywordflow">if</span> ( (y-y_Pb2(l-1)) &gt; (y_Pb2(l)-y) )
<a name="l01025"></a>01025             {
<a name="l01026"></a>01026               l_deb=l-2;
<a name="l01027"></a>01027             }
<a name="l01028"></a>01028           <span class="keywordflow">else</span>
<a name="l01029"></a>01029             {
<a name="l01030"></a>01030               l_deb=l-1;
<a name="l01031"></a>01031             }
<a name="l01032"></a>01032         }
<a name="l01033"></a>01033     }
<a name="l01034"></a>01034 
<a name="l01035"></a>01035   <span class="keywordtype">double</span> ya=y_Pb2(l_deb);
<a name="l01036"></a>01036   <span class="keywordtype">double</span> Ua=U_Pb2(l_deb);
<a name="l01037"></a>01037   <span class="keywordtype">double</span> yb=y_Pb2(l_deb+1);
<a name="l01038"></a>01038   <span class="keywordtype">double</span> Ub=U_Pb2(l_deb+1);
<a name="l01039"></a>01039   <span class="keywordtype">double</span> yc=y_Pb2(l_deb+2);
<a name="l01040"></a>01040   <span class="keywordtype">double</span> Uc=U_Pb2(l_deb+2);
<a name="l01041"></a>01041   <span class="keywordtype">double</span> U;
<a name="l01042"></a>01042 
<a name="l01043"></a>01043   U=(y-ya)*(y-yb)/(yc-ya)/(yc-yb)*Uc;
<a name="l01044"></a>01044   U+=(y-yb)*(y-yc)/(ya-yb)/(ya-yc)*Ua;
<a name="l01045"></a>01045   U+=(y-yc)*(y-ya)/(yb-yc)/(yb-ya)*Ub;
<a name="l01046"></a>01046 
<a name="l01047"></a>01047   <span class="keywordflow">return</span> U;
<a name="l01048"></a>01048 
<a name="l01049"></a>01049 }
<a name="l01050"></a>01050 
<a name="l01051"></a>01051 <span class="comment">// -On determine une direction orthogonale a la direction d anisotropie</span>
<a name="l01052"></a>01052 <span class="comment">// -Pour chaque point d evaluation se trouvant dans le plan1 :</span>
<a name="l01053"></a>01053 <span class="comment">// Estimation de sa cote y dans la direction orthogonale</span>
<a name="l01054"></a>01054 <span class="comment">// Initialisation de moyenne (dans la direction anisotrope) a partir de</span>
<a name="l01055"></a>01055 <span class="comment">// la fonction UPb pur la cote y</span>
<a name="l01056"></a>01056 <span class="comment">// </span>
<a name="l01057"></a><a class="code" href="classChamp__front__recyclage.html#a46de77ef7c4befd935eaac0bd21a329b">01057</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#a46de77ef7c4befd935eaac0bd21a329b">Champ_front_recyclage::lire_fichier_format1</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; moyenne,
<a name="l01058"></a>01058                                                  <span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; fr_vf,
<a name="l01059"></a>01059                                                  <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich)
<a name="l01060"></a>01060 {
<a name="l01061"></a>01061   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,fr_vf);
<a name="l01062"></a>01062   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> coords;
<a name="l01063"></a>01063   <a class="code" href="classChamp__front__recyclage.html#ae90ee7b293fe67d4b0683406be2a6eaa">get_coord_faces</a>(fr_vf2,coords,<a class="code" href="classChamp__front__recyclage.html#ab8997525c12511b419ffdc64d6832799">delt_dist</a>);
<a name="l01064"></a>01064   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_faces2 = coords.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l01065"></a>01065 
<a name="l01066"></a>01066   <span class="keywordtype">int</span> dir_ortho = -1;
<a name="l01067"></a>01067   <span class="keywordflow">if</span> ((<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>==1) || (<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>==2))
<a name="l01068"></a>01068     dir_ortho = <a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>;
<a name="l01069"></a>01069   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>==3)
<a name="l01070"></a>01070     dir_ortho = 0;
<a name="l01071"></a>01071   <span class="keywordflow">else</span>
<a name="l01072"></a>01072     {
<a name="l01073"></a>01073       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;For this method the anisotropic direction mut be 1 2 or 3&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01074"></a>01074       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01075"></a>01075     }
<a name="l01076"></a>01076 
<a name="l01077"></a>01077   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_faces2; i++)
<a name="l01078"></a>01078     {
<a name="l01079"></a>01079       <span class="keywordtype">double</span> y = coords(i,dir_ortho);
<a name="l01080"></a>01080       moyenne(i,<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>-1) = <a class="code" href="classChamp__front__recyclage.html#ae56181dc16492260d304f4772aca0716">UPb</a>(y,nom_fich);
<a name="l01081"></a>01081     }
<a name="l01082"></a>01082 }
<a name="l01083"></a>01083 
<a name="l01084"></a>01084 <span class="comment">// -Pour chaque face du bord2 (coordonnes x2 y2 z2):</span>
<a name="l01085"></a>01085 <span class="comment">// Lecture dans le fichier nom_fich des coordonnes de points (x1 y1 z1)</span>
<a name="l01086"></a>01086 <span class="comment">// et de(s) valeur(s) de la variable associee var1 [var2] [var3]</span>
<a name="l01087"></a>01087 <span class="comment">// Initialisation de moyenne (dans la direction anisotrope si celle_ci est specifiee</span>
<a name="l01088"></a>01088 <span class="comment">// ou pour toutes les composantes sinon) a partir de var1 [var2] [var3]</span>
<a name="l01089"></a>01089 <span class="comment">// associe au point x1 y1 z1 qui est a la plus petite distance de x2 y2 z2</span>
<a name="l01090"></a>01090 <span class="comment">// </span>
<a name="l01091"></a>01091 <span class="comment">// Defaut de parallelisme eventuel si (x1 y1 z1) ne parcourent pas les parties virtuels</span>
<a name="l01092"></a>01092 <span class="comment">// ou si deux points sont a egale distance d un point (x2 y2 z2)</span>
<a name="l01093"></a>01093 <span class="comment">// </span>
<a name="l01094"></a><a class="code" href="classChamp__front__recyclage.html#a336324702e35f03a80350d6d9d7029ad">01094</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#a336324702e35f03a80350d6d9d7029ad">Champ_front_recyclage::lire_fichier_format2</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; moyenne,
<a name="l01095"></a>01095                                                  <span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; fr_vf,
<a name="l01096"></a>01096                                                  <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich)
<a name="l01097"></a>01097 {
<a name="l01098"></a>01098 
<a name="l01099"></a>01099   <span class="keywordtype">int</span> N1;
<a name="l01100"></a>01100   <span class="keywordtype">int</span> num_face2,num_face2_loc;
<a name="l01101"></a>01101   <span class="keywordtype">double</span> x1,y1,z1;
<a name="l01102"></a>01102   <span class="keywordtype">double</span> x2,y2,z2;
<a name="l01103"></a>01103   z2 = 0.;
<a name="l01104"></a>01104   ifstream fic_Utargtest(nom_fich);
<a name="l01105"></a>01105   <span class="keywordflow">if</span> (!fic_Utargtest)
<a name="l01106"></a>01106     {
<a name="l01107"></a>01107       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt;<span class="stringliteral">&quot;No file of name : &quot;</span>&lt;&lt;nom_fich&lt;&lt;<span class="stringliteral">&quot; is available.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01108"></a>01108       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01109"></a>01109     }
<a name="l01110"></a>01110 
<a name="l01111"></a>01111   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,fr_vf);
<a name="l01112"></a>01112   <span class="keywordtype">int</span> num1 = fr_vf2.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l01113"></a>01113   <span class="keywordtype">int</span> num2 = num1 + fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l01114"></a>01114   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis2 = fr_vf2.<a class="code" href="classFrontiere__dis__base.html#ae59cf10086641faa60a2b2fda4ac63ae">zone_dis</a>();
<a name="l01115"></a>01115   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis2);
<a name="l01116"></a>01116   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv2 = zvf2.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l01117"></a>01117 
<a name="l01118"></a>01118   <span class="keywordflow">for</span> (num_face2=num1; num_face2&lt;num2; num_face2++)
<a name="l01119"></a>01119     {
<a name="l01120"></a>01120       x2 = xv2(num_face2,0);
<a name="l01121"></a>01121       y2 = xv2(num_face2,1);
<a name="l01122"></a>01122       <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3) z2 = xv2(num_face2,2);
<a name="l01123"></a>01123 
<a name="l01124"></a>01124       num_face2_loc = num_face2-num1;
<a name="l01125"></a>01125       <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> fic_Utarg(nom_fich);
<a name="l01126"></a>01126       fic_Utarg &gt;&gt; N1;
<a name="l01127"></a>01127 <span class="comment">// Je lis le reste de la ligne au cas ou...</span>
<a name="l01128"></a>01128       std::string ligne;
<a name="l01129"></a>01129       std::getline(fic_Utarg.<a class="code" href="classEntree__Fichier__base.html#a9e5abc201d0864efb7e22b593556f432">get_ifstream</a>(), ligne);
<a name="l01130"></a>01130       <span class="keywordtype">int</span> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>=0;
<a name="l01131"></a>01131       <span class="keywordtype">double</span> dist = 1.E6;
<a name="l01132"></a>01132       <span class="keywordtype">double</span> dist_eval;
<a name="l01133"></a>01133 
<a name="l01134"></a>01134       <a class="code" href="classDoubleVect.html">DoubleVect</a> val(<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>);
<a name="l01135"></a>01135       <span class="keywordflow">while</span> (!fic_Utarg.<a class="code" href="classEntree__Fichier__base.html#a5e6b0d743eb5c7986090c615bd7ad584">eof</a>())
<a name="l01136"></a>01136         {
<a name="l01137"></a>01137           compteur++;
<a name="l01138"></a>01138           <span class="keywordflow">if</span>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l01139"></a>01139             {
<a name="l01140"></a>01140               fic_Utarg &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; z1 ;
<a name="l01141"></a>01141               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; comp++)
<a name="l01142"></a>01142                 fic_Utarg &gt;&gt; val(comp);
<a name="l01143"></a>01143 <span class="comment">// Je lis le reste de la ligne au cas ou...</span>
<a name="l01144"></a>01144               std::getline(fic_Utarg.<a class="code" href="classEntree__Fichier__base.html#a9e5abc201d0864efb7e22b593556f432">get_ifstream</a>(), ligne);
<a name="l01145"></a>01145               dist_eval = (x2-x1)*(x2-x1)+(y2-y1)*(y2-y1)+(z2-z1)*(z2-z1);
<a name="l01146"></a>01146               <span class="keywordflow">if</span>(dist_eval&lt;dist)
<a name="l01147"></a>01147                 {
<a name="l01148"></a>01148                   dist = dist_eval;
<a name="l01149"></a>01149                   <span class="keywordflow">if</span> ((abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)&lt;4) &amp;&amp; (abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)&gt;0))
<a name="l01150"></a>01150                     moyenne(num_face2_loc,abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)-1) = val(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)-1);
<a name="l01151"></a>01151                   <span class="keywordflow">else</span>
<a name="l01152"></a>01152                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; comp++)
<a name="l01153"></a>01153                       moyenne(num_face2_loc,comp) = val(comp);
<a name="l01154"></a>01154 
<a name="l01155"></a>01155                 }
<a name="l01156"></a>01156             }
<a name="l01157"></a>01157           <span class="keywordflow">else</span>
<a name="l01158"></a>01158             {
<a name="l01159"></a>01159               fic_Utarg &gt;&gt; x1 &gt;&gt; y1;
<a name="l01160"></a>01160               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; comp++)
<a name="l01161"></a>01161                 fic_Utarg &gt;&gt; val(comp);
<a name="l01162"></a>01162 <span class="comment">// Je lis le reste de la ligne au cas ou...</span>
<a name="l01163"></a>01163               std::getline(fic_Utarg.<a class="code" href="classEntree__Fichier__base.html#a9e5abc201d0864efb7e22b593556f432">get_ifstream</a>(), ligne);
<a name="l01164"></a>01164               dist_eval = (x2-x1)*(x2-x1)+(y2-y1)*(y2-y1);
<a name="l01165"></a>01165               <span class="keywordflow">if</span>(dist_eval&lt;dist)
<a name="l01166"></a>01166                 {
<a name="l01167"></a>01167                   dist = dist_eval;
<a name="l01168"></a>01168                   <span class="keywordflow">if</span> ((abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)&lt;4) &amp;&amp; (abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)&gt;0))
<a name="l01169"></a>01169                     moyenne(num_face2_loc,abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)-1) = val(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)-1);
<a name="l01170"></a>01170                   <span class="keywordflow">else</span>
<a name="l01171"></a>01171                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> comp=0; comp&lt;<a class="code" href="classField__base.html#ac3539c9ffa67a0b2abe334607c61664f">nb_compo_</a>; comp++)
<a name="l01172"></a>01172                       moyenne(num_face2_loc,comp) = val(comp);
<a name="l01173"></a>01173                 }
<a name="l01174"></a>01174             }
<a name="l01175"></a>01175         }
<a name="l01176"></a>01176       <span class="keywordflow">if</span> (N1!=compteur-1)
<a name="l01177"></a>01177         {
<a name="l01178"></a>01178           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01179"></a>01179           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading &quot;</span> &lt;&lt; nom_fich &lt;&lt; finl;
<a name="l01180"></a>01180           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The number of lines indicated in the header : &quot;</span> &lt;&lt; N1 &lt;&lt; finl;
<a name="l01181"></a>01181           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;is not the same than the number of lines detected : &quot;</span> &lt;&lt; compteur-1 &lt;&lt; finl;
<a name="l01182"></a>01182           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01183"></a>01183         }
<a name="l01184"></a>01184       fic_Utarg.<a class="code" href="classEntree__Fichier__base.html#aca9165bc1712c1057b4d4b91a7ea4fb4">close</a>();
<a name="l01185"></a>01185     }
<a name="l01186"></a>01186 }
<a name="l01187"></a>01187 
<a name="l01188"></a>01188 <span class="comment">// -Pour chaque face du bord2 (coordonnes x2 y2 z2) :</span>
<a name="l01189"></a>01189 <span class="comment">// Lecture dans le fichier nom_fch2 des coordonnes de points (x1 y1 z1)</span>
<a name="l01190"></a>01190 <span class="comment">// Lecture dans le fichier nom_fich1 des valeurs de la variable associee</span>
<a name="l01191"></a>01191 <span class="comment">// et initialisation de moyenne a partir de ces valeurs. La lecture est stoppee</span>
<a name="l01192"></a>01192 <span class="comment">// quand on a lu les valeurs associees au point x1 y1 z1 qui est en connexion</span>
<a name="l01193"></a>01193 <span class="comment">// exacte avec x2 y2 z2 suivant la direction d anisotropie</span>
<a name="l01194"></a>01194 <span class="comment">// </span>
<a name="l01195"></a><a class="code" href="classChamp__front__recyclage.html#af36fdc7cbb3ea7c3a756f607c94dbeaa">01195</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__front__recyclage.html#af36fdc7cbb3ea7c3a756f607c94dbeaa">Champ_front_recyclage::lire_fichier_format3</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; moyenne,
<a name="l01196"></a>01196                                                  <span class="keyword">const</span> <a class="code" href="classFrontiere__dis__base.html" title="classe Frontiere_dis_base Classe representant une frontiere discretisee. Les objets Frontiere_dis_bas...">Frontiere_dis_base</a>&amp; fr_vf,
<a name="l01197"></a>01197                                                  <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich1,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_fich2)
<a name="l01198"></a>01198 {
<a name="l01199"></a>01199   <span class="keywordtype">int</span> Nbfaces,trouve;
<a name="l01200"></a>01200   <span class="keywordtype">int</span> num_face1,num_face2,num_face2_loc;
<a name="l01201"></a>01201   <span class="keywordtype">double</span> x1,y1,z1;
<a name="l01202"></a>01202   <span class="keywordtype">double</span> x2,y2,z2;
<a name="l01203"></a>01203   <span class="keywordtype">double</span> eps=1.e-4;
<a name="l01204"></a>01204 
<a name="l01205"></a>01205   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fichier = <span class="stringliteral">&quot;VERIF_face_perio.&quot;</span>;
<a name="l01206"></a>01206   fichier += <a class="code" href="classChamp__front__recyclage.html#a0ed386f6d8a5d10432168c40477e5636">nom_pb1</a>;
<a name="l01207"></a>01207   <a class="code" href="classEcrFicCollecte.html" title="Ecriture dans un fichier Cette classe implemente les operateurs et les methodes virtuelles de la clas...">EcrFicCollecte</a> fic(fichier);
<a name="l01208"></a>01208 
<a name="l01209"></a>01209   ifstream fic_geom_test(nom_fich2);
<a name="l01210"></a>01210   <span class="keywordflow">if</span> (!fic_geom_test)
<a name="l01211"></a>01211     {
<a name="l01212"></a>01212       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt;<span class="stringliteral">&quot;No file of name : geom_face_perio_&quot;</span>&lt;&lt;<a class="code" href="classChamp__front__recyclage.html#a0ed386f6d8a5d10432168c40477e5636">nom_pb1</a>&lt;&lt;<span class="stringliteral">&quot; is available.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01213"></a>01213       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01214"></a>01214     }
<a name="l01215"></a>01215 
<a name="l01216"></a>01216   ifstream fic_Umoy_test(nom_fich1);
<a name="l01217"></a>01217   <span class="keywordflow">if</span> (!fic_Umoy_test)
<a name="l01218"></a>01218     {
<a name="l01219"></a>01219       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt;<span class="stringliteral">&quot;No file of name : &quot;</span>&lt;&lt;nom_fich1&lt;&lt;<span class="stringliteral">&quot; is available.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01220"></a>01220       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01221"></a>01221     }
<a name="l01222"></a>01222 
<a name="l01223"></a>01223   <span class="keywordflow">if</span> (abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)!=1 &amp;&amp; abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)!=2 &amp;&amp; abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)!=3)
<a name="l01224"></a>01224     {
<a name="l01225"></a>01225       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01226"></a>01226       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading the boundary condition &quot;</span> &lt;&lt; fr_vf.<a class="code" href="classFrontiere__dis__base.html#a5a7eb46dc3af8a7d4225adc1814845d8" title="Renvoie le nom de la frontiere geometrique.">le_nom</a>() &lt;&lt; finl;
<a name="l01227"></a>01227       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You must define the keyword \&quot;direction_anisotrope\&quot;&quot;</span> &lt;&lt; finl;
<a name="l01228"></a>01228       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01229"></a>01229     }
<a name="l01230"></a>01230 
<a name="l01231"></a>01231   <span class="keyword">const</span> <a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>&amp; fr_vf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFront__VF.html" title="class Front_VF">Front_VF</a>,fr_vf);
<a name="l01232"></a>01232   <span class="keywordtype">int</span> num1 = fr_vf2.<a class="code" href="classFront__VF.html#a4986f0c65653fe9eb40bbbff5a97bf16" title="Numero de la premiere face du bord dans la liste des faces.">num_premiere_face</a>();
<a name="l01233"></a>01233   <span class="keywordtype">int</span> num2 = num1 + fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l01234"></a>01234   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis2 = fr_vf2.<a class="code" href="classFrontiere__dis__base.html#ae59cf10086641faa60a2b2fda4ac63ae">zone_dis</a>();
<a name="l01235"></a>01235   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf2 = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis2);
<a name="l01236"></a>01236   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv2 = zvf2.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l01237"></a>01237   <span class="keywordtype">int</span> nb_faces_bord2 = fr_vf2.<a class="code" href="classFront__VF.html#a341e2fcb5117b96e745fd7078ba86bab" title="Nombre de faces reelles du bord.">nb_faces</a>();
<a name="l01238"></a>01238 
<a name="l01239"></a>01239   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> bidon;
<a name="l01240"></a>01240   bidon.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces_bord2,<a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffa9a675e25b5b7accff8d861e05060547b">Array_base::COPY_INIT</a>);
<a name="l01241"></a>01241 
<a name="l01242"></a>01242   <span class="keywordflow">for</span> (num_face2=num1; num_face2&lt;num2; num_face2++)
<a name="l01243"></a>01243     {
<a name="l01244"></a>01244       x2 = xv2(num_face2,0);
<a name="l01245"></a>01245       y2 = xv2(num_face2,1);
<a name="l01246"></a>01246       <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3) z2 = xv2(num_face2,2);
<a name="l01247"></a>01247 
<a name="l01248"></a>01248       num_face2_loc = num_face2-num1;
<a name="l01249"></a>01249 
<a name="l01250"></a>01250       <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> fic_geom(nom_fich2);
<a name="l01251"></a>01251       <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> fic_Umoy(nom_fich1);
<a name="l01252"></a>01252       fic_geom  &gt;&gt; Nbfaces;
<a name="l01253"></a>01253       fic_Umoy &gt;&gt; Nbfaces;
<a name="l01254"></a>01254 <span class="comment">// Je lis le reste de la ligne au cas ou...</span>
<a name="l01255"></a>01255       std::string ligne;
<a name="l01256"></a>01256       std::getline(fic_geom.<a class="code" href="classEntree__Fichier__base.html#a9e5abc201d0864efb7e22b593556f432">get_ifstream</a>(), ligne);
<a name="l01257"></a>01257       std::getline(fic_Umoy.<a class="code" href="classEntree__Fichier__base.html#a9e5abc201d0864efb7e22b593556f432">get_ifstream</a>(), ligne);
<a name="l01258"></a>01258       <span class="keywordtype">int</span> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>=0;
<a name="l01259"></a>01259 
<a name="l01260"></a>01260       trouve = 0;
<a name="l01261"></a>01261 
<a name="l01262"></a>01262       <span class="keywordflow">while</span> (!fic_geom.<a class="code" href="classEntree__Fichier__base.html#a5e6b0d743eb5c7986090c615bd7ad584">eof</a>() &amp;&amp; !fic_Umoy.<a class="code" href="classEntree__Fichier__base.html#a5e6b0d743eb5c7986090c615bd7ad584">eof</a>())
<a name="l01263"></a>01263         {
<a name="l01264"></a>01264           compteur++;
<a name="l01265"></a>01265           <span class="keywordflow">if</span> (trouve==0)
<a name="l01266"></a>01266             {
<a name="l01267"></a>01267               fic_geom &gt;&gt; num_face1 &gt;&gt; x1 &gt;&gt; y1;
<a name="l01268"></a>01268               fic_Umoy &gt;&gt; bidon(num_face2_loc) &gt;&gt; moyenne(num_face2_loc,0) &gt;&gt; moyenne(num_face2_loc,1);
<a name="l01269"></a>01269               <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l01270"></a>01270                 {
<a name="l01271"></a>01271                   fic_geom &gt;&gt; z1;
<a name="l01272"></a>01272                   fic_Umoy &gt;&gt; moyenne(num_face2_loc,2);
<a name="l01273"></a>01273                   <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==1 &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(y1,y2,eps)) &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(z1,z2,eps))) trouve=1;
<a name="l01274"></a>01274                   <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==2 &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(x1,x2,eps)) &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(z1,z2,eps))) trouve=1;
<a name="l01275"></a>01275                   <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==3 &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(x1,x2,eps)) &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(y1,y2,eps))) trouve=1;
<a name="l01276"></a>01276                 }
<a name="l01277"></a>01277               <span class="keywordflow">else</span>
<a name="l01278"></a>01278                 {
<a name="l01279"></a>01279                   <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==1 &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(y1,y2,eps))) trouve=1;
<a name="l01280"></a>01280                   <span class="keywordflow">if</span>(abs(<a class="code" href="classChamp__front__recyclage.html#a1daaf81929663e524ec47122caf2fe0f">ndir</a>)==2 &amp;&amp; (<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(x1,x2,eps))) trouve=1;
<a name="l01281"></a>01281                 }
<a name="l01282"></a>01282             }
<a name="l01283"></a>01283 <span class="comment">// Je lis le reste de la ligne au cas ou...</span>
<a name="l01284"></a>01284           std::getline(fic_geom.<a class="code" href="classEntree__Fichier__base.html#a9e5abc201d0864efb7e22b593556f432">get_ifstream</a>(), ligne);
<a name="l01285"></a>01285           std::getline(fic_Umoy.<a class="code" href="classEntree__Fichier__base.html#a9e5abc201d0864efb7e22b593556f432">get_ifstream</a>(), ligne);
<a name="l01286"></a>01286         }
<a name="l01287"></a>01287 
<a name="l01288"></a>01288       <span class="keywordflow">if</span> (Nbfaces!=compteur-1)
<a name="l01289"></a>01289         {
<a name="l01290"></a>01290           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01291"></a>01291           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading &quot;</span> &lt;&lt; nom_fich1 &lt;&lt; finl;
<a name="l01292"></a>01292           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The number of lines indicated in the header : &quot;</span> &lt;&lt; Nbfaces &lt;&lt; finl;
<a name="l01293"></a>01293           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;is not the same than the number of lines detected : &quot;</span> &lt;&lt; compteur-1 &lt;&lt; finl;
<a name="l01294"></a>01294           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01295"></a>01295         }
<a name="l01296"></a>01296 
<a name="l01297"></a>01297       <span class="keywordflow">if</span> (trouve==0)
<a name="l01298"></a>01298         {
<a name="l01299"></a>01299           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; the face &quot;</span>&lt;&lt;num_face2&lt;&lt;<span class="stringliteral">&quot; with coordinates : x=&quot;</span>&lt;&lt;x2&lt;&lt;<span class="stringliteral">&quot; y=&quot;</span>&lt;&lt;y2;
<a name="l01300"></a>01300           <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l01301"></a>01301             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; z=&quot;</span>&lt;&lt;z2;
<a name="l01302"></a>01302           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;\n has no corresponding faces in &quot;</span>&lt;&lt;nom_fich2&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01303"></a>01303           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01304"></a>01304         }
<a name="l01305"></a>01305 
<a name="l01306"></a>01306       <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l01307"></a>01307         {
<a name="l01308"></a>01308           fic &lt;&lt;<span class="stringliteral">&quot; num_face1 &quot;</span> &lt;&lt; num_face1  &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; x1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; y1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; z1 &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01309"></a>01309           fic &lt;&lt;<span class="stringliteral">&quot; num_face2 &quot;</span> &lt;&lt; num_face2  &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; x2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; y2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; z2 &lt;&lt; finl;
<a name="l01310"></a>01310           fic &lt;&lt;<span class="stringliteral">&quot; &quot;</span>  &lt;&lt; finl;
<a name="l01311"></a>01311         }
<a name="l01312"></a>01312       <span class="keywordflow">else</span>
<a name="l01313"></a>01313         {
<a name="l01314"></a>01314           fic &lt;&lt;<span class="stringliteral">&quot; num_face1 &quot;</span> &lt;&lt; num_face1  &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; x1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; y1  &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01315"></a>01315           fic &lt;&lt;<span class="stringliteral">&quot; num_face2 &quot;</span> &lt;&lt; num_face2  &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; x2 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; y2  &lt;&lt; finl;
<a name="l01316"></a>01316           fic &lt;&lt;<span class="stringliteral">&quot; &quot;</span>  &lt;&lt; finl;
<a name="l01317"></a>01317         }
<a name="l01318"></a>01318 
<a name="l01319"></a>01319       fic_geom.<a class="code" href="classEntree__Fichier__base.html#aca9165bc1712c1057b4d4b91a7ea4fb4">close</a>();
<a name="l01320"></a>01320       fic_Umoy.<a class="code" href="classEntree__Fichier__base.html#aca9165bc1712c1057b4d4b91a7ea4fb4">close</a>();
<a name="l01321"></a>01321 
<a name="l01322"></a>01322     }
<a name="l01323"></a>01323   fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l01324"></a>01324 }
<a name="l01325"></a>01325 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:28 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
