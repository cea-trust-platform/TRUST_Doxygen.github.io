<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/ExtrudeBord.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/ExtrudeBord.cpp</div>  </div>
</div>
<div class="contents">
<a href="ExtrudeBord_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2018, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        ExtrudeBord.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Geometrie</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/28</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="ExtrudeBord_8h.html">ExtrudeBord.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="EFichier_8h.html">EFichier.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="TroisDto2D_8h.html">TroisDto2D.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Transformer_8h.html">Transformer.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="SFichier_8h.html">SFichier.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Extruder_8h.html">Extruder.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Extruder__en3_8h.html">Extruder_en3.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Extruder__en20_8h.html">Extruder_en20.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Scatter_8h.html">Scatter.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="IntVects_8h.html">IntVects.h</a>&gt;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="ExtrudeBord_8cpp.html#a6fd53d50c56bde358e1841da899b6e1d">00035</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classExtrudeBord.html">ExtrudeBord</a>,<span class="stringliteral">&quot;ExtrudeBord&quot;</span>,<a class="code" href="classInterprete__geometrique__base.html" title="classe Interprete_geometrique_base .">Interprete_geometrique_base</a>);
<a name="l00036"></a>00036 <span class="comment">// XD extrudebord interprete extrudebord 1 Class to generate an extruded mesh from a boundary of a tetrahedral or an hexahedral mesh. NL2 Warning: If the initial domain is a tetrahedral mesh, the boundary will be moved in the XY plane then extrusion will be applied (you should maybe use the Transformer keyword on the final domain to have the domain you really want). You can use the keyword Ecrire_Fichier_Meshtv to generate a meshtv file to visualize your initial and final meshes. NL2 This keyword can be used for example to create a periodic box extracted from a boundary of a tetrahedral or a hexaedral mesh. This periodic box may be used then to engender turbulent inlet flow condition for the main domain.NL2 Note that ExtrudeBord in VEF generates 3 or 14 tetrahedra from extruded prisms.</span>
<a name="l00037"></a><a class="code" href="classExtrudeBord.html#a3695b1bd31636337ff4faafb9dacf16b">00037</a> <a class="code" href="classExtrudeBord.html#a3695b1bd31636337ff4faafb9dacf16b">ExtrudeBord::ExtrudeBord</a>()
<a name="l00038"></a>00038 {
<a name="l00039"></a>00039   <a class="code" href="classExtrudeBord.html#af2bf413816f184523236b6d529e89bea" title="flag pour ancienne version de l&#39;extrusion des hexas : 0 = ancienne version">hexa_old</a>=0;
<a name="l00040"></a>00040   <a class="code" href="classExtrudeBord.html#a9be5cf8a2968dbc1877b77bbd095c9e9" title="flag pour extrusion en trois tetraedres plutot qu&#39;en 14 (option par defaut)">Trois_Tetra</a>=0;
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="classExtrudeBord.html#a9b5bc29cd0e67d785936b9fcbcbbab9c">00043</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classExtrudeBord.html#a9b5bc29cd0e67d785936b9fcbcbbab9c" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">ExtrudeBord::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00044"></a>00044 <span class="keyword"></span>{
<a name="l00045"></a>00045   <span class="keywordflow">return</span> <a class="code" href="classExtrudeBord.html#a9b5bc29cd0e67d785936b9fcbcbbab9c" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Interprete::printOn</a>(os);
<a name="l00046"></a>00046 }
<a name="l00047"></a>00047 
<a name="l00048"></a><a class="code" href="classExtrudeBord.html#a55f3aced05fd651062713856d470501c">00048</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classExtrudeBord.html#a55f3aced05fd651062713856d470501c" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">ExtrudeBord::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00049"></a>00049 {
<a name="l00050"></a>00050   <span class="keywordflow">return</span> <a class="code" href="classExtrudeBord.html#a55f3aced05fd651062713856d470501c" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Interprete::readOn</a>(is);
<a name="l00051"></a>00051 }
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="classExtrudeBord.html#ad8cd0c9b1e0a20893c1d1fd33216be08">00053</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classExtrudeBord.html#ad8cd0c9b1e0a20893c1d1fd33216be08">ExtrudeBord::interpreter_</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00054"></a>00054 {
<a name="l00055"></a>00055   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom_volumique;
<a name="l00056"></a>00056   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_front,nom_dom_surfacique;
<a name="l00057"></a>00057   <a class="code" href="classDoubleVect.html">DoubleVect</a> vect_dir(3);
<a name="l00058"></a>00058   <a class="code" href="classExtrudeBord.html#a581706e9f6ac40e1a09b61bf8467f9bc">en3D_</a>=1;
<a name="l00059"></a>00059   <span class="keywordtype">int</span> nbpas;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061   <span class="keywordflow">if</span>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>!=3)
<a name="l00062"></a>00062     {
<a name="l00063"></a>00063       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Interpreter &quot;</span>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<span class="stringliteral">&quot; can be used only in 3 dimensions.&quot;</span> &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00064"></a>00064       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00065"></a>00065     }
<a name="l00066"></a>00066   <a class="code" href="classParam.html" title="Defined below in this file.">Param</a> param(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00067"></a>00067   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;domaine_init&quot;</span>,&amp;nom_dom_volumique,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);<span class="comment">//!&lt; XD_ADD_P ref_domaine Initial domain with hexaedras or tetrahedras.</span>
<a name="l00068"></a>00068 <span class="comment"></span>  param.<a class="code" href="classParam.html#adcb07d363043552750b5cbca934ba015">ajouter_arr_size_predefinie</a>(<span class="stringliteral">&quot;direction&quot;</span>,&amp;vect_dir,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);<span class="comment">//!&lt; XD_ADD_P  listf Directions for the extrusion.</span>
<a name="l00069"></a>00069 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;nb_tranches&quot;</span>,&amp;nbpas,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);<span class="comment">//!&lt; XD_ADD_P  int Number of elements in the extrusion direction.</span>
<a name="l00070"></a>00070 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;domaine_final&quot;</span>,&amp;nom_dom_surfacique,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);<span class="comment">//!&lt; XD_ADD_P  chaine Extruded domain.</span>
<a name="l00071"></a>00071 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;nom_bord&quot;</span>,&amp;nom_front,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);<span class="comment">//!&lt; XD_ADD_P  chaine Name of the boundary of the initial domain where extrusion will be applied.</span>
<a name="l00072"></a>00072 <span class="comment"></span>  param.<a class="code" href="classParam.html#ae3d50612a0014a9d58e6e035a65f20e5">ajouter_flag</a>(<span class="stringliteral">&quot;hexa_old&quot;</span>,&amp;<a class="code" href="classExtrudeBord.html#af2bf413816f184523236b6d529e89bea" title="flag pour ancienne version de l&#39;extrusion des hexas : 0 = ancienne version">hexa_old</a>);<span class="comment">//!&lt; XD_ADD_P  rien Old algorithm for boundary extrusion from a hexahedral mesh.</span>
<a name="l00073"></a>00073 <span class="comment"></span>  param.<a class="code" href="classParam.html#ae3d50612a0014a9d58e6e035a65f20e5">ajouter_flag</a>(<span class="stringliteral">&quot;Trois_Tetra&quot;</span>,&amp;<a class="code" href="classExtrudeBord.html#a9be5cf8a2968dbc1877b77bbd095c9e9" title="flag pour extrusion en trois tetraedres plutot qu&#39;en 14 (option par defaut)">Trois_Tetra</a>);<span class="comment">//!&lt; XD_ADD_P  rien To extrude in 3 tetrahedras instead of 14 tetrahedras.</span>
<a name="l00074"></a>00074 <span class="comment"></span>  param.<a class="code" href="classParam.html#ae3d50612a0014a9d58e6e035a65f20e5">ajouter_flag</a>(<span class="stringliteral">&quot;Vingt_Tetra&quot;</span>,&amp;<a class="code" href="classExtrudeBord.html#a45d21ca3073ef784504be1973bee3b27" title="flag pour extrusion en vingr tetraedres plutot qu&#39;en 14 (option par defaut)">Vingt_Tetra</a>);<span class="comment">//!&lt; XD_ADD_P  rien To extrude in 20 tetrahedras instead of 14 tetrahedras.</span>
<a name="l00075"></a>00075 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;sans_passer_par_le2D&quot;</span>,&amp;<a class="code" href="classExtrudeBord.html#a581706e9f6ac40e1a09b61bf8467f9bc">en3D_</a>);<span class="comment">//!&lt; XD_ADD_P  int Only for non-regression</span>
<a name="l00076"></a>00076 <span class="comment"></span>  param.<a class="code" href="classParam.html#aa9d44fc51b4a08b357733a97dc7acaad" title="Read the is input with the parameters (defined with the Param object) inside: { ... } Example, to read: { a 1 b 2 } Param param(que_suis_je()); int a,b; param.ajouter(&quot;a&quot;,&amp;a); param.ajouter(&quot;b&quot;,&amp;b); param.lire_avec_accolades_depuis(is);.">lire_avec_accolades_depuis</a>(is);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   <a class="code" href="classInterprete__geometrique__base.html#ac0d2fd316a4bb1585ec579f473684caa">associer_domaine</a>(nom_dom_volumique);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>();
<a name="l00081"></a>00081   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083   <span class="keywordflow">if</span> (zone.<a class="code" href="classZone.html#ae0b34a93b9ae8146df2d1884157afe9f" title="Renvoie le nombre de sommets des elements geometriques constituants la zone. Tous les elements de la ...">nb_som_elem</a>()==8 &amp;&amp; (<a class="code" href="classExtrudeBord.html#af2bf413816f184523236b6d529e89bea" title="flag pour ancienne version de l&#39;extrusion des hexas : 0 = ancienne version">hexa_old</a> == 1))
<a name="l00084"></a>00084     {
<a name="l00085"></a>00085       <a class="code" href="classExtrudeBord.html#a72644ddb75429fa5b833db34d8e337ab">extruder_hexa_old</a>(nom_front, nom_dom_surfacique, vect_dir, nbpas);
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (zone.<a class="code" href="classZone.html#ae0b34a93b9ae8146df2d1884157afe9f" title="Renvoie le nombre de sommets des elements geometriques constituants la zone. Tous les elements de la ...">nb_som_elem</a>()==4 || zone.<a class="code" href="classZone.html#ae0b34a93b9ae8146df2d1884157afe9f" title="Renvoie le nombre de sommets des elements geometriques constituants la zone. Tous les elements de la ...">nb_som_elem</a>()==8)
<a name="l00088"></a>00088     {
<a name="l00089"></a>00089       <a class="code" href="classExtrudeBord.html#a723bf5d771da89d581296038043aabb5">extruder_bord</a>(nom_front, nom_dom_surfacique, vect_dir, nbpas);
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a>00093   <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom_surfacique=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(nom_dom_surfacique));
<a name="l00094"></a>00094   <a class="code" href="classScatter.html#a1874139ffd29d5a68191bc7828d3a5bd" title="cree des descripteurs sequentiels pour les tableaux sommets et elements du domaine (necessaire car Sc...">Scatter::init_sequential_domain</a>(dom_surfacique);
<a name="l00095"></a>00095   <span class="keywordflow">return</span> is;
<a name="l00096"></a>00096 }
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="classExtrudeBord.html#a723bf5d771da89d581296038043aabb5">00098</a> <span class="keywordtype">void</span> <a class="code" href="classExtrudeBord.html#a723bf5d771da89d581296038043aabb5">ExtrudeBord::extruder_bord</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_front, <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_dom_surfacique, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vect_dir, <span class="keywordtype">int</span> nbpas)
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>();
<a name="l00101"></a>00101 
<a name="l00102"></a>00102   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00103"></a>00103   <span class="keyword">const</span> <a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a>&amp; front=zone.<a class="code" href="classZone.html#af2f1e6a14af55249979da674e7aac11a" title="Renvoie le i-ieme bord de la zone&lt;br&gt;(version const)">bord</a>(nom_front);
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom_surfacique=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(nom_dom_surfacique));
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="comment">// Extract from the volume domain dom the boundary front and fill the dom_surfacique domain:</span>
<a name="l00108"></a>00108   <a class="code" href="classTroisDto2D.html" title="Classe TroisDto2D x-&gt;alpha x.">TroisDto2D</a> tD2dD;
<a name="l00109"></a>00109   <span class="keywordtype">int</span>&amp; coupe=tD2dD.<a class="code" href="classTroisDto2D.html#a4eddcc311683892d87a236eacc5f6259">coupe</a>();
<a name="l00110"></a>00110   coupe=0;
<a name="l00111"></a>00111   <span class="keywordflow">if</span> (<a class="code" href="classExtrudeBord.html#a581706e9f6ac40e1a09b61bf8467f9bc">en3D_</a>)
<a name="l00112"></a>00112     coupe=2;
<a name="l00113"></a>00113   tD2dD.<a class="code" href="classTroisDto2D.html#a415d04b8c014cbcc708b673164e320cd">extraire_2D</a>(dom,dom_surfacique,front,nom_front,0);
<a name="l00114"></a>00114   <span class="keywordflow">if</span> (0)
<a name="l00115"></a>00115     {
<a name="l00116"></a>00116       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> <a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>(<span class="stringliteral">&quot;bord.geom&quot;</span>);
<a name="l00117"></a>00117       test&lt;&lt;dom_surfacique;
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 
<a name="l00122"></a>00122   <span class="keywordtype">double</span> xa = tD2dD.<a class="code" href="classTroisDto2D.html#a20190cc5b73781d2ab82a1d1fbd9fd59">getXa</a>();
<a name="l00123"></a>00123   <span class="keywordtype">double</span> ya = tD2dD.<a class="code" href="classTroisDto2D.html#a21fd7b09b5b4c283095f9d2a1de205f0">getYa</a>();
<a name="l00124"></a>00124   <span class="keywordtype">double</span> za = tD2dD.<a class="code" href="classTroisDto2D.html#ab567bfb500b86b420f0dea5a25912eeb">getZa</a>();
<a name="l00125"></a>00125   <span class="keywordtype">double</span> Ix = tD2dD.<a class="code" href="classTroisDto2D.html#a3bd4db3f8f79edfcbf5b3b84023b7552">getIx</a>();
<a name="l00126"></a>00126   <span class="keywordtype">double</span> Iy = tD2dD.<a class="code" href="classTroisDto2D.html#abb01d71d7c91e0bcee5284b153455ade">getIy</a>();
<a name="l00127"></a>00127   <span class="keywordtype">double</span> Iz = tD2dD.<a class="code" href="classTroisDto2D.html#a363e35ec970e6c3b7b506ace424476e4">getIz</a>();
<a name="l00128"></a>00128   <span class="keywordtype">double</span> Jx = tD2dD.<a class="code" href="classTroisDto2D.html#a954bd8829d3597e944f93189eba70ebf">getJx</a>();
<a name="l00129"></a>00129   <span class="keywordtype">double</span> Jy = tD2dD.<a class="code" href="classTroisDto2D.html#af29ca8056ef03049070f537acc72cae3">getJy</a>();
<a name="l00130"></a>00130   <span class="keywordtype">double</span> Jz = tD2dD.<a class="code" href="classTroisDto2D.html#a30b772e33933183b920eda3ede19548f">getJz</a>();
<a name="l00131"></a>00131   <span class="keywordtype">double</span> Kx = tD2dD.<a class="code" href="classTroisDto2D.html#a14eb1ec1d290741445c9c4c1fe8be050">getKx</a>();
<a name="l00132"></a>00132   <span class="keywordtype">double</span> Ky = tD2dD.<a class="code" href="classTroisDto2D.html#a388538c4724155bfd87a229a4da2e71f">getKy</a>();
<a name="l00133"></a>00133   <span class="keywordtype">double</span> Kz = tD2dD.<a class="code" href="classTroisDto2D.html#aad2804cf7ac4bbceee37d71cca08db13">getKz</a>();
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   <span class="keywordflow">if</span> (!<a class="code" href="classExtrudeBord.html#a581706e9f6ac40e1a09b61bf8467f9bc">en3D_</a>)
<a name="l00136"></a>00136     {
<a name="l00137"></a>00137       <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>=2;
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139   <span class="keywordflow">else</span>
<a name="l00140"></a>00140     {
<a name="l00141"></a>00141       Ix=1;
<a name="l00142"></a>00142       Iy=0;
<a name="l00143"></a>00143       Iz=0;
<a name="l00144"></a>00144       Jx=0;
<a name="l00145"></a>00145       Jy=1;
<a name="l00146"></a>00146       Jz=0;
<a name="l00147"></a>00147       Kx=0;
<a name="l00148"></a>00148       Ky=0;
<a name="l00149"></a>00149       Kz=1;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151     }
<a name="l00152"></a>00152 
<a name="l00153"></a>00153   <span class="keywordflow">if</span> (<a class="code" href="classExtrudeBord.html#a9be5cf8a2968dbc1877b77bbd095c9e9" title="flag pour extrusion en trois tetraedres plutot qu&#39;en 14 (option par defaut)">Trois_Tetra</a>==1)  <span class="comment">//!&lt; Evolution de la methode Extrude bord pour l&#39;adapter a 3tetra</span>
<a name="l00154"></a>00154 <span class="comment"></span>    {
<a name="l00155"></a>00155       <a class="code" href="classExtruder__en3.html" title="Classe Extruder_en3 Cette classe est un interprete qui sert a lire et executer la directive Extruder_...">Extruder_en3</a> extr3;
<a name="l00156"></a>00156       extr3.<a class="code" href="classExtruder__en3.html#a1e1dda495eb7e60a249d3eb04280f790">setNbTranches</a>(nbpas);
<a name="l00157"></a>00157       extr3.<a class="code" href="classExtruder__en3.html#a45cc176aa0a2a317657a7c88593d8bb5">setDirection</a>(vect_dir(0)*Ix+vect_dir(1)*Iy+vect_dir(2)*Iz,
<a name="l00158"></a>00158                          vect_dir(0)*Jx+vect_dir(1)*Jy+vect_dir(2)*Jz,
<a name="l00159"></a>00159                          vect_dir(0)*Kx+vect_dir(1)*Ky+vect_dir(2)*Kz);
<a name="l00160"></a>00160 
<a name="l00161"></a>00161       <span class="keywordtype">int</span> nb_som=dom_surfacique.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>().<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00162"></a>00162       <a class="code" href="classIntVect.html">IntVect</a> num(nb_som);
<a name="l00163"></a>00163       dom_surfacique.<a class="code" href="classDomaine.html#a9e067ee24e1952315722374190c8cb06" title="Ajoute des noeuds au domaine avec elimination des noeuds double au retour nums contient les nouveaux ...">ajouter</a>(dom_surfacique.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>(), num);
<a name="l00164"></a>00164       extr3.<a class="code" href="classExtruder__en3.html#a45f6e71cc0fc1edef2b693b17b26be0c" title="Extrusion d&#39;un domaine surfacique.">extruder</a>(dom_surfacique,num);
<a name="l00165"></a>00165 
<a name="l00166"></a>00166       <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone2 = dom_surfacique.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00167"></a>00167       <span class="keywordflow">if</span> ((zone2.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>())== <span class="stringliteral">&quot;Rectangle&quot;</span>)
<a name="l00168"></a>00168         {
<a name="l00169"></a>00169           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;It is not possible to apply ExtrudeBord with 3Tetra option to : &quot;</span>   &lt;&lt;  zone2.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; mesh cells&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00170"></a>00170 <span class="comment">// exit();</span>
<a name="l00171"></a>00171         }
<a name="l00172"></a>00172     }
<a name="l00173"></a>00173   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classExtrudeBord.html#a45d21ca3073ef784504be1973bee3b27" title="flag pour extrusion en vingr tetraedres plutot qu&#39;en 14 (option par defaut)">Vingt_Tetra</a>==1)
<a name="l00174"></a>00174     {
<a name="l00175"></a>00175       <a class="code" href="classExtruder__en20.html" title="Classe Extruder_en20 Cette classe est un interprete qui sert a lire et executer la directive Extruder...">Extruder_en20</a> extr;
<a name="l00176"></a>00176       extr.<a class="code" href="classExtruder__en20.html#a321252c33c4b1849f32c7dfd29ee9320">setNbTranches</a>(nbpas);
<a name="l00177"></a>00177       extr.<a class="code" href="classExtruder__en20.html#a7103c143351990a122e30f5014a862b5">setDirection</a>(vect_dir(0)*Ix+vect_dir(1)*Iy+vect_dir(2)*Iz,
<a name="l00178"></a>00178                         vect_dir(0)*Jx+vect_dir(1)*Jy+vect_dir(2)*Jz,
<a name="l00179"></a>00179                         vect_dir(0)*Kx+vect_dir(1)*Ky+vect_dir(2)*Kz);
<a name="l00180"></a>00180       extr.<a class="code" href="classExtruder__en20.html#a871cb328122d9f0f26c7f4919e65ad66" title="Triangule tous les element d&#39;une zone: transforme les elements goemetriques de la zone en triangles...">extruder</a>(dom_surfacique);
<a name="l00181"></a>00181     }
<a name="l00182"></a>00182   <span class="keywordflow">else</span>
<a name="l00183"></a>00183     {
<a name="l00184"></a>00184       <a class="code" href="classExtruder.html" title="Classe Extruder Cette classe est un interprete qui sert a lire et executer la directive Extruder: Ext...">Extruder</a> extr;
<a name="l00185"></a>00185       extr.<a class="code" href="classExtruder.html#ae321b757a76fc8bc47827b985717d65d">setNbTranches</a>(nbpas);
<a name="l00186"></a>00186       extr.<a class="code" href="classExtruder.html#ae5298cc67d6518ff628d15c2822be510">setDirection</a>(vect_dir(0)*Ix+vect_dir(1)*Iy+vect_dir(2)*Iz,
<a name="l00187"></a>00187                         vect_dir(0)*Jx+vect_dir(1)*Jy+vect_dir(2)*Jz,
<a name="l00188"></a>00188                         vect_dir(0)*Kx+vect_dir(1)*Ky+vect_dir(2)*Kz);
<a name="l00189"></a>00189       extr.<a class="code" href="classExtruder.html#ac22a67fd2eb06022821f04f66ace0541" title="Triangule tous les element d&#39;une zone: transforme les elements goemetriques de la zone en triangles...">extruder</a>(dom_surfacique);
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191   <span class="keywordflow">if</span> (<a class="code" href="classExtrudeBord.html#a581706e9f6ac40e1a09b61bf8467f9bc">en3D_</a>)
<a name="l00192"></a>00192     {
<a name="l00193"></a>00193 <span class="comment">// en 3D on ne tourne pas le bord</span>
<a name="l00194"></a>00194       <span class="keywordflow">return</span>;
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 <span class="comment">// on remet le nouveau domaine 3D dans le repere du domaine 3D initial</span>
<a name="l00197"></a>00197   <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a> = 3;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> les_fcts(3);
<a name="l00200"></a>00200   les_fcts[0] = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(xa,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;+x*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Ix,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)+y*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Jx,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)+z*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Kx,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)&quot;</span>);
<a name="l00201"></a>00201   les_fcts[1] = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(ya,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;+x*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Iy,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)+y*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Jy,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)+z*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Ky,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)&quot;</span>);
<a name="l00202"></a>00202   les_fcts[2] = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(za,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;+x*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Iz,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)+y*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Jz,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)+z*(&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(Kz,<span class="stringliteral">&quot;%.16e&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;)&quot;</span>);
<a name="l00203"></a>00203 
<a name="l00204"></a>00204   <a class="code" href="classTransformer.html" title="Classe Transformer Applique un changement de coordonnees Structure du jeu de donnee (en dimension 2) ...">Transformer</a> transf;
<a name="l00205"></a>00205   transf.<a class="code" href="classTransformer.html#a06e20a5b4722b9aab90ac6b77eaf1f32">transformer</a>(dom_surfacique,les_fcts);
<a name="l00206"></a>00206 <span class="comment">// Pour que l&#39;on ait plus de problemes de precision ensuite quand on manipule</span>
<a name="l00207"></a>00207 <span class="comment">// le domaine extrude, on impose les coordonnes de la frontiere nom_front du domaine</span>
<a name="l00208"></a>00208 <span class="comment">// initial sur les coordonnees de la frontiere devant du domaine extrude</span>
<a name="l00209"></a>00209 <span class="comment">// Il faut egalement recalculer proprement pour la frontiere derriere</span>
<a name="l00210"></a>00210   <span class="keyword">const</span> <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces=zone.<a class="code" href="classZone.html#ac338b119d4b0bc4f510a223b9086fe5e">frontiere</a>(zone.<a class="code" href="classZone.html#a93fa9d16e258964f17006b5d92194dae">rang_frontiere</a>(nom_front)).faces();
<a name="l00211"></a>00211   <span class="keywordtype">int</span> nb_faces=faces.<a class="code" href="classFaces.html#a64d898edb20c3687d357018f1821c50a" title="Renvoie le nombre de Faces.">nb_faces</a>();
<a name="l00212"></a>00212   <span class="keywordtype">int</span> nb_som_faces=faces.<a class="code" href="classFaces.html#a1361d27e4c8b239c48de671fad23428c" title="Renvoie le nombre de sommet par face.">nb_som_faces</a>();
<a name="l00213"></a>00213 
<a name="l00214"></a>00214   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone2=dom_surfacique.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00215"></a>00215   <span class="keyword">const</span> <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces2=zone2.<a class="code" href="classZone.html#ac338b119d4b0bc4f510a223b9086fe5e">frontiere</a>(zone2.<a class="code" href="classZone.html#a93fa9d16e258964f17006b5d92194dae">rang_frontiere</a>(<span class="stringliteral">&quot;devant&quot;</span>)).faces();
<a name="l00216"></a>00216   <span class="keyword">const</span> <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces3=zone2.<a class="code" href="classZone.html#ac338b119d4b0bc4f510a223b9086fe5e">frontiere</a>(zone2.<a class="code" href="classZone.html#a93fa9d16e258964f17006b5d92194dae">rang_frontiere</a>(<span class="stringliteral">&quot;derriere&quot;</span>)).faces();
<a name="l00217"></a>00217   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nb_faces; j++)
<a name="l00218"></a>00218     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;nb_som_faces; k++)
<a name="l00219"></a>00219       {
<a name="l00220"></a>00220         <span class="keywordtype">int</span> som = faces.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(j,k);
<a name="l00221"></a>00221         <span class="keywordtype">int</span> som2 = faces2.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(j,k);
<a name="l00222"></a>00222         <span class="keywordtype">int</span> som3 = faces3.<a class="code" href="classFaces.html#abac5c946cee7423e80cef0a110f1007b" title="Renvoie le numero du j-ieme sommet de la i-ieme face.">sommet</a>(j,k);
<a name="l00223"></a>00223         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;3; i++)
<a name="l00224"></a>00224           {
<a name="l00225"></a>00225             dom_surfacique.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(som2,i) = dom.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(som,i);
<a name="l00226"></a>00226             dom_surfacique.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(som3,i) = dom.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(som,i) + vect_dir(i);
<a name="l00227"></a>00227           }
<a name="l00228"></a>00228       }
<a name="l00229"></a>00229   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;ExtrudeBord does not create any more PERIO boundary.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00230"></a>00230   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Use RegroupeBord if you want to create periodic boundary condition...&quot;</span> &lt;&lt; finl;
<a name="l00231"></a>00231 }
<a name="l00232"></a>00232 
<a name="l00233"></a><a class="code" href="classExtrudeBord.html#a72644ddb75429fa5b833db34d8e337ab">00233</a> <span class="keywordtype">void</span> <a class="code" href="classExtrudeBord.html#a72644ddb75429fa5b833db34d8e337ab">ExtrudeBord::extruder_hexa_old</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_front, <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_dom_surfacique, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; vect_dir, <span class="keywordtype">int</span> nbpas)
<a name="l00234"></a>00234 {
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>();
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00239"></a>00239   <span class="keywordtype">int</span> nbfr=zone.<a class="code" href="classZone.html#a9bf185c52ad1809d954bba670d9aed8a" title="Renvoie le nombre de bords + le nombre de raccords + le nombre de faces frontieres internes...">nb_front_Cl</a>();
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom_surfacique=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(nom_dom_surfacique));
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone2=dom_surfacique.<a class="code" href="classDomaine.html#a6204a2b89860bfd74ca2858d1d8750bf" title="Ajoute une Sous_Zone au domaine.">add</a>(*(<span class="keyword">new</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>()));
<a name="l00245"></a>00245   zone2.<a class="code" href="classZone.html#a68a215145852861f2d513c959f52a1a5" title="Specifie le domaine dont la zone fait partie.">associer_domaine</a>(dom_surfacique);
<a name="l00246"></a>00246   zone2.<a class="code" href="classZone.html#ac1ff391994a372815b7f88c3fdc39f55" title="Type les elements de la zone avec le nom passe en parametre. Et associe le type d&#39;element a la zone...">typer</a>(<span class="stringliteral">&quot;Hexaedre&quot;</span>);
<a name="l00247"></a>00247   zone2.<a class="code" href="classZone.html#ad9cedce77314d4aa1d84a12958079b0e" title="Donne un nom a la zone.">nommer</a>(nom_dom_surfacique);
<a name="l00248"></a>00248   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; sommets2=dom_surfacique.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>();
<a name="l00249"></a>00249   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems2=zone2.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00250"></a>00250   <span class="keywordtype">int</span> i;
<a name="l00251"></a>00251 
<a name="l00252"></a>00252   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l=0; l&lt;nbfr; l++)
<a name="l00253"></a>00253     {
<a name="l00254"></a>00254       <span class="keyword">const</span> <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; fr=zone.<a class="code" href="classZone.html#ac338b119d4b0bc4f510a223b9086fe5e">frontiere</a>(l);
<a name="l00255"></a>00255       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nomfr=fr.<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>();
<a name="l00256"></a>00256 
<a name="l00257"></a>00257       <span class="keywordflow">if</span>(nomfr==nom_front)
<a name="l00258"></a>00258         {
<a name="l00259"></a>00259           <span class="keywordtype">int</span> nbfaces=fr.<a class="code" href="classFrontiere.html#aa073fe9dbdddde59471ee7032b256aa2" title="Renvoie le nombre de faces de la frontiere.">nb_faces</a>();
<a name="l00260"></a>00260           <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; som=fr.<a class="code" href="classFrontiere.html#a6d1f96137ddae39a46985a8c3e53bcf5" title="Renvoie les sommets des faces de la frontiere.">les_sommets_des_faces</a>();
<a name="l00261"></a>00261           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> newsom(4*nbfaces);
<a name="l00262"></a>00262           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> compt(4*nbfaces);
<a name="l00263"></a>00263           newsom=-100;
<a name="l00264"></a>00264           compt=0;
<a name="l00265"></a>00265 
<a name="l00266"></a>00266           <span class="keywordtype">int</span> nbsombord,trouve;
<a name="l00267"></a>00267           nbsombord = 0;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 <span class="comment">// ******** Table de correspondance des sommets de bords : dom_volumique - dom_surfacique</span>
<a name="l00270"></a>00270 
<a name="l00271"></a>00271           <span class="keywordflow">for</span> (i=0; i&lt;nbfaces; i++)
<a name="l00272"></a>00272             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;4; j++)
<a name="l00273"></a>00273               {
<a name="l00274"></a>00274                 trouve = 0;
<a name="l00275"></a>00275                 <span class="keywordtype">int</span> sommet=som(i,j);
<a name="l00276"></a>00276 
<a name="l00277"></a>00277                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;nbsombord+1; k++)
<a name="l00278"></a>00278                   {
<a name="l00279"></a>00279                     <span class="keywordflow">if</span>(sommet==newsom(k))
<a name="l00280"></a>00280                       {
<a name="l00281"></a>00281                         k=nbsombord+1;
<a name="l00282"></a>00282                         trouve = 1;
<a name="l00283"></a>00283                         <span class="keywordflow">break</span>;
<a name="l00284"></a>00284                       }
<a name="l00285"></a>00285                   }
<a name="l00286"></a>00286 
<a name="l00287"></a>00287                 <span class="keywordflow">if</span> (trouve==0)
<a name="l00288"></a>00288                   {
<a name="l00289"></a>00289                     newsom[nbsombord]=sommet;
<a name="l00290"></a>00290                     nbsombord++;
<a name="l00291"></a>00291                   }
<a name="l00292"></a>00292               }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294           newsom.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbsombord);
<a name="l00295"></a>00295           compt.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbsombord);
<a name="l00296"></a>00296           sommets2.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>((nbpas+1)*nbsombord,3);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">// ******** Creation des sommets deduits par translation</span>
<a name="l00299"></a>00299 
<a name="l00300"></a>00300           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nbpas+1; j++)
<a name="l00301"></a>00301             <span class="keywordflow">for</span> (i=0; i&lt;nbsombord; i++)
<a name="l00302"></a>00302               {
<a name="l00303"></a>00303                 sommets2(i+j*nbsombord,0)=dom.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(newsom(i),0)+j*vect_dir(0)/nbpas;
<a name="l00304"></a>00304                 sommets2(i+j*nbsombord,1)=dom.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(newsom(i),1)+j*vect_dir(1)/nbpas;
<a name="l00305"></a>00305                 sommets2(i+j*nbsombord,2)=dom.<a class="code" href="classDomaine.html#a716f7248439ab8ec62d3e033ddfede41" title="Renvoie la j-ieme coordonnee du i-ieme noeud.">coord</a>(newsom(i),2)+j*vect_dir(2)/nbpas;
<a name="l00306"></a>00306               }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 
<a name="l00309"></a>00309 <span class="comment">// ******** Definition des tableaux de correspondance ELEM&lt;-&gt;SOMMETS</span>
<a name="l00310"></a>00310 
<a name="l00311"></a>00311           les_elems2.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbpas*nbfaces,8);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313           <span class="keywordtype">int</span>  sommet0,sommet1,sommet2,sommet3;
<a name="l00314"></a>00314           <span class="keywordtype">int</span>  newsom0=-1,newsom1=-1,newsom2=-1,newsom3=-1;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316           <span class="keywordflow">for</span> (i=0; i&lt;nbfaces; i++)
<a name="l00317"></a>00317             {
<a name="l00318"></a>00318               sommet0=som(i,0);
<a name="l00319"></a>00319               sommet1=som(i,1);
<a name="l00320"></a>00320               sommet2=som(i,2);
<a name="l00321"></a>00321               sommet3=som(i,3);
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 
<a name="l00324"></a>00324               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;nbsombord; j++)
<a name="l00325"></a>00325                 {
<a name="l00326"></a>00326                   <span class="keywordflow">if</span>(newsom[j]==sommet0) newsom0=j;
<a name="l00327"></a>00327                   <span class="keywordflow">if</span>(newsom[j]==sommet1) newsom1=j;
<a name="l00328"></a>00328                   <span class="keywordflow">if</span>(newsom[j]==sommet2) newsom2=j;
<a name="l00329"></a>00329                   <span class="keywordflow">if</span>(newsom[j]==sommet3) newsom3=j;
<a name="l00330"></a>00330                 }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;nbpas; k++)
<a name="l00333"></a>00333                 {
<a name="l00334"></a>00334                   les_elems2(i+k*nbfaces,0)=newsom0+k*nbsombord;
<a name="l00335"></a>00335                   les_elems2(i+k*nbfaces,1)=newsom1+k*nbsombord;
<a name="l00336"></a>00336                   les_elems2(i+k*nbfaces,2)=newsom2+k*nbsombord;
<a name="l00337"></a>00337                   les_elems2(i+k*nbfaces,3)=newsom3+k*nbsombord;
<a name="l00338"></a>00338                   les_elems2(i+k*nbfaces,4)=newsom0+(k+1)*nbsombord;
<a name="l00339"></a>00339                   les_elems2(i+k*nbfaces,5)=newsom1+(k+1)*nbsombord;
<a name="l00340"></a>00340                   les_elems2(i+k*nbfaces,6)=newsom2+(k+1)*nbsombord;
<a name="l00341"></a>00341                   les_elems2(i+k*nbfaces,7)=newsom3+(k+1)*nbsombord;
<a name="l00342"></a>00342                 }
<a name="l00343"></a>00343             }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 <span class="comment">// ******** Definition des frontieres periodiques</span>
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 
<a name="l00350"></a>00350           <a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a>&amp; bordperio=zone2.<a class="code" href="classZone.html#a4bc04163903c004c5c1383eaa5fa844d" title="Renvoie la liste des bords de la zone. (version const)">faces_bord</a>().<a class="code" href="classList__Bord.html#a61386a2f94d915253bcec812ce0735c3">add</a>(<a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a>());
<a name="l00351"></a>00351           bordperio.<a class="code" href="classFrontiere.html#a714e3cc26d7e59f3a65d80de23ea21ac" title="Donne un nom a la frontiere.">nommer</a>(<span class="stringliteral">&quot;PERIO&quot;</span>);
<a name="l00352"></a>00352           bordperio.<a class="code" href="classFrontiere.html#a982b45717b0c01579000d7a707b27672" title="Type les faces de la frontiere.">typer_faces</a>(<span class="stringliteral">&quot;QUADRANGLE_3D&quot;</span>);
<a name="l00353"></a>00353           bordperio.<a class="code" href="classFrontiere.html#afb3363b668c10bc112ae2a1f516fecdb" title="Dimensionne la frontiere, i.e. fixe son nombre de faces.">dimensionner</a>(0);
<a name="l00354"></a>00354           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> faces_perio(2*nbfaces,4);
<a name="l00355"></a>00355 
<a name="l00356"></a>00356           <span class="keywordflow">for</span> (i=0; i&lt;nbfaces; i++)
<a name="l00357"></a>00357             {
<a name="l00358"></a>00358               sommet0=som(i,0);
<a name="l00359"></a>00359               sommet1=som(i,1);
<a name="l00360"></a>00360               sommet2=som(i,2);
<a name="l00361"></a>00361               sommet3=som(i,3);
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 
<a name="l00364"></a>00364               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;nbsombord; j++)
<a name="l00365"></a>00365                 {
<a name="l00366"></a>00366                   <span class="keywordflow">if</span>(newsom[j]==sommet0) newsom0=j;
<a name="l00367"></a>00367                   <span class="keywordflow">if</span>(newsom[j]==sommet1) newsom1=j;
<a name="l00368"></a>00368                   <span class="keywordflow">if</span>(newsom[j]==sommet2) newsom2=j;
<a name="l00369"></a>00369                   <span class="keywordflow">if</span>(newsom[j]==sommet3) newsom3=j;
<a name="l00370"></a>00370                 }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372               faces_perio(i,0)=newsom0;
<a name="l00373"></a>00373               faces_perio(i,1)=newsom1;
<a name="l00374"></a>00374               faces_perio(i,2)=newsom2;
<a name="l00375"></a>00375               faces_perio(i,3)=newsom3;
<a name="l00376"></a>00376 
<a name="l00377"></a>00377               faces_perio(i+nbfaces,0)=newsom0+nbpas*nbsombord;
<a name="l00378"></a>00378               faces_perio(i+nbfaces,1)=newsom1+nbpas*nbsombord;
<a name="l00379"></a>00379               faces_perio(i+nbfaces,2)=newsom2+nbpas*nbsombord;
<a name="l00380"></a>00380               faces_perio(i+nbfaces,3)=newsom3+nbpas*nbsombord;
<a name="l00381"></a>00381             }
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 
<a name="l00384"></a>00384           bordperio.<a class="code" href="classFrontiere.html#a5198fed6a501424c0a72c427e348087f" title="Ajoute une (ou plusieurs) face(s) a la frontiere, la (les) face(s) est (sont) specifiee(s) par un tab...">ajouter_faces</a>(faces_perio);
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 
<a name="l00387"></a>00387 
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 <span class="comment">// ******** Definition des frontieres parois</span>
<a name="l00390"></a>00390 
<a name="l00391"></a>00391 
<a name="l00392"></a>00392           <a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a>&amp; bordparoi=zone2.<a class="code" href="classZone.html#a4bc04163903c004c5c1383eaa5fa844d" title="Renvoie la liste des bords de la zone. (version const)">faces_bord</a>().<a class="code" href="classList__Bord.html#a61386a2f94d915253bcec812ce0735c3">add</a>(<a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a>());
<a name="l00393"></a>00393           bordparoi.<a class="code" href="classFrontiere.html#a714e3cc26d7e59f3a65d80de23ea21ac" title="Donne un nom a la frontiere.">nommer</a>(<span class="stringliteral">&quot;PAROI&quot;</span>);
<a name="l00394"></a>00394           bordparoi.<a class="code" href="classFrontiere.html#a982b45717b0c01579000d7a707b27672" title="Type les faces de la frontiere.">typer_faces</a>(<span class="stringliteral">&quot;QUADRANGLE_3D&quot;</span>);
<a name="l00395"></a>00395           bordparoi.<a class="code" href="classFrontiere.html#afb3363b668c10bc112ae2a1f516fecdb" title="Dimensionne la frontiere, i.e. fixe son nombre de faces.">dimensionner</a>(0);
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 
<a name="l00398"></a>00398           <span class="keywordtype">int</span> nbsombordparoi=0;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="comment">// ***** recherche des sommets appartenant au contour de la face de bord *****</span>
<a name="l00401"></a>00401 
<a name="l00402"></a>00402           <span class="keywordflow">for</span> (i=0; i&lt;nbfaces; i++)
<a name="l00403"></a>00403             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;4; j++)
<a name="l00404"></a>00404               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;nbsombord; k++)
<a name="l00405"></a>00405                 <span class="keywordflow">if</span>(som(i,j)==newsom(k))  compt(k)++; <span class="comment">//!&lt; nb de faces se rapportant a chacun des sommets</span>
<a name="l00406"></a>00406 <span class="comment"></span>
<a name="l00407"></a>00407           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;nbsombord; k++)
<a name="l00408"></a>00408             <span class="keywordflow">if</span>(compt(k)&lt;3) nbsombordparoi++; <span class="comment">//!&lt; nb de sommets a extruder pour constituer les faces de parois</span>
<a name="l00409"></a>00409 <span class="comment"></span>
<a name="l00410"></a>00410 <span class="comment">// PQ : 05/05/04 : ATTENTION : des sommets internes peuvant etre connectes qu&#39;a</span>
<a name="l00411"></a>00411 <span class="comment">// 3 faces (cf. maillage en &quot;O&quot; d&#39;un cylindre)</span>
<a name="l00412"></a>00412 <span class="comment">// -&gt; on se place donc dans le cas ou les sommets de bords ne sont connectes qu&#39;a</span>
<a name="l00413"></a>00413 <span class="comment">// 2 elements (excluant de fait les bords types VDF en marche d&#39;escalier).</span>
<a name="l00414"></a>00414 
<a name="l00415"></a>00415 
<a name="l00416"></a>00416 <span class="comment">// **** Extension des aretes pour former les faces de la frontiere paroi</span>
<a name="l00417"></a>00417 
<a name="l00418"></a>00418           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> faces_paroi(nbsombordparoi*nbpas,4);
<a name="l00419"></a>00419           <span class="keywordtype">int</span> ip=0;
<a name="l00420"></a>00420 
<a name="l00421"></a>00421           <span class="keywordflow">for</span> (i=0; i&lt;nbfaces; i++)
<a name="l00422"></a>00422             {
<a name="l00423"></a>00423               sommet0=som(i,0);
<a name="l00424"></a>00424               sommet1=som(i,1);
<a name="l00425"></a>00425               sommet2=som(i,2);
<a name="l00426"></a>00426               sommet3=som(i,3);
<a name="l00427"></a>00427 
<a name="l00428"></a>00428               <span class="keywordtype">int</span> compt0=4,compt1=4,compt2=4,compt3=4;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;nbsombord; j++)
<a name="l00431"></a>00431                 {
<a name="l00432"></a>00432                   <span class="keywordflow">if</span>(newsom[j]==sommet0)
<a name="l00433"></a>00433                     {
<a name="l00434"></a>00434                       newsom0=j;
<a name="l00435"></a>00435                       compt0=compt(j);
<a name="l00436"></a>00436                     }
<a name="l00437"></a>00437                   <span class="keywordflow">if</span>(newsom[j]==sommet1)
<a name="l00438"></a>00438                     {
<a name="l00439"></a>00439                       newsom1=j;
<a name="l00440"></a>00440                       compt1=compt(j);
<a name="l00441"></a>00441                     }
<a name="l00442"></a>00442                   <span class="keywordflow">if</span>(newsom[j]==sommet2)
<a name="l00443"></a>00443                     {
<a name="l00444"></a>00444                       newsom2=j;
<a name="l00445"></a>00445                       compt2=compt(j);
<a name="l00446"></a>00446                     }
<a name="l00447"></a>00447                   <span class="keywordflow">if</span>(newsom[j]==sommet3)
<a name="l00448"></a>00448                     {
<a name="l00449"></a>00449                       newsom3=j;
<a name="l00450"></a>00450                       compt3=compt(j);
<a name="l00451"></a>00451                     }
<a name="l00452"></a>00452                 }
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 
<a name="l00455"></a>00455               <span class="keywordflow">if</span>( (compt0&lt;3) &amp;&amp; (compt1&lt;3) ) <span class="comment">//!&lt; arete[0-1]</span>
<a name="l00456"></a>00456 <span class="comment"></span>                {
<a name="l00457"></a>00457                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;nbpas; k++)
<a name="l00458"></a>00458                     {
<a name="l00459"></a>00459                       faces_paroi(ip+k,0)=newsom0+k*nbsombord;
<a name="l00460"></a>00460                       faces_paroi(ip+k,1)=newsom0+(k+1)*nbsombord;
<a name="l00461"></a>00461                       faces_paroi(ip+k,2)=newsom1+k*nbsombord;
<a name="l00462"></a>00462                       faces_paroi(ip+k,3)=newsom1+(k+1)*nbsombord;
<a name="l00463"></a>00463                     }
<a name="l00464"></a>00464                   ip+=nbpas;
<a name="l00465"></a>00465                 }
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 
<a name="l00468"></a>00468               <span class="keywordflow">if</span>( (compt1&lt;3) &amp;&amp; (compt3&lt;3) ) <span class="comment">//!&lt; arete[1-3]</span>
<a name="l00469"></a>00469 <span class="comment"></span>                {
<a name="l00470"></a>00470                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;nbpas; k++)
<a name="l00471"></a>00471                     {
<a name="l00472"></a>00472                       faces_paroi(ip+k,0)=newsom1+k*nbsombord;
<a name="l00473"></a>00473                       faces_paroi(ip+k,1)=newsom1+(k+1)*nbsombord;
<a name="l00474"></a>00474                       faces_paroi(ip+k,2)=newsom3+k*nbsombord;
<a name="l00475"></a>00475                       faces_paroi(ip+k,3)=newsom3+(k+1)*nbsombord;
<a name="l00476"></a>00476                     }
<a name="l00477"></a>00477                   ip+=nbpas;
<a name="l00478"></a>00478                 }
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 
<a name="l00481"></a>00481               <span class="keywordflow">if</span>( (compt3&lt;3) &amp;&amp; (compt2&lt;3) ) <span class="comment">//!&lt; arete[3-2]</span>
<a name="l00482"></a>00482 <span class="comment"></span>                {
<a name="l00483"></a>00483                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;nbpas; k++)
<a name="l00484"></a>00484                     {
<a name="l00485"></a>00485                       faces_paroi(ip+k,0)=newsom3+k*nbsombord;
<a name="l00486"></a>00486                       faces_paroi(ip+k,1)=newsom3+(k+1)*nbsombord;
<a name="l00487"></a>00487                       faces_paroi(ip+k,2)=newsom2+k*nbsombord;
<a name="l00488"></a>00488                       faces_paroi(ip+k,3)=newsom2+(k+1)*nbsombord;
<a name="l00489"></a>00489                     }
<a name="l00490"></a>00490                   ip+=nbpas;
<a name="l00491"></a>00491                 }
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 
<a name="l00494"></a>00494               <span class="keywordflow">if</span>( (compt2&lt;3) &amp;&amp; (compt0&lt;3) ) <span class="comment">//!&lt; arete[2-0]</span>
<a name="l00495"></a>00495 <span class="comment"></span>                {
<a name="l00496"></a>00496                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;nbpas; k++)
<a name="l00497"></a>00497                     {
<a name="l00498"></a>00498                       faces_paroi(ip+k,0)=newsom2+k*nbsombord;
<a name="l00499"></a>00499                       faces_paroi(ip+k,1)=newsom2+(k+1)*nbsombord;
<a name="l00500"></a>00500                       faces_paroi(ip+k,2)=newsom0+k*nbsombord;
<a name="l00501"></a>00501                       faces_paroi(ip+k,3)=newsom0+(k+1)*nbsombord;
<a name="l00502"></a>00502                     }
<a name="l00503"></a>00503                   ip+=nbpas;
<a name="l00504"></a>00504                 }
<a name="l00505"></a>00505             }
<a name="l00506"></a>00506 
<a name="l00507"></a>00507           bordparoi.<a class="code" href="classFrontiere.html#a5198fed6a501424c0a72c427e348087f" title="Ajoute une (ou plusieurs) face(s) a la frontiere, la (les) face(s) est (sont) specifiee(s) par un tab...">ajouter_faces</a>(faces_paroi);
<a name="l00508"></a>00508 
<a name="l00509"></a>00509         }<span class="comment">//fin de la condition sur la frontiere a extruder</span>
<a name="l00510"></a>00510     }<span class="comment">//fin de parcours de toutes les frontieres</span>
<a name="l00511"></a>00511   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> mfile=nom_dom_surfacique;
<a name="l00512"></a>00512   mfile+=<span class="stringliteral">&quot;.geom&quot;</span>;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514   {
<a name="l00515"></a>00515     <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> file(mfile);
<a name="l00516"></a>00516     file&lt;&lt;dom_surfacique;
<a name="l00517"></a>00517     file.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l00518"></a>00518   }
<a name="l00519"></a>00519   {
<a name="l00520"></a>00520     <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> file(mfile);
<a name="l00521"></a>00521     file&gt;&gt;dom_surfacique;
<a name="l00522"></a>00522     file.<a class="code" href="classEntree__Fichier__base.html#aca9165bc1712c1057b4d4b91a7ea4fb4">close</a>();
<a name="l00523"></a>00523   }
<a name="l00524"></a>00524 }
<a name="l00525"></a>00525 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:18 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
