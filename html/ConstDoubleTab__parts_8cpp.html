<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Math/ConstDoubleTab_parts.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">src/Kernel/Math/ConstDoubleTab_parts.cpp File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="ConstDoubleTab__parts_8h_source.html">ConstDoubleTab_parts.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="MD__Vector__composite_8h_source.html">MD_Vector_composite.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="IntTab_8h_source.html">IntTab.h</a>&gt;</code><br/>
</div>
<p><a href="ConstDoubleTab__parts_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ConstDoubleTab__parts_8cpp.html#a1478683a291d882a943fd90d84477bf4">init_parts</a> (<a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;vect, <a class="el" href="classVect__DoubleTab.html">Vect_DoubleTab</a> &amp;parts, <a class="el" href="classDoubleTab.html">DoubleTab</a> *dummy_type_ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ConstDoubleTab__parts_8cpp.html#a6a58a896dde7a060b4c07ffd3229f763">init_parts</a> (<a class="el" href="classIntVect.html">IntVect</a> &amp;vect, <a class="el" href="classVect__IntTab.html">Vect_IntTab</a> &amp;parts, <a class="el" href="classIntTab.html">IntTab</a> *dummy_type_ptr)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a1478683a291d882a943fd90d84477bf4"></a><!-- doxytag: member="ConstDoubleTab_parts.cpp::init_parts" ref="a1478683a291d882a943fd90d84477bf4" args="(DoubleVect &amp;vect, Vect_DoubleTab &amp;parts, DoubleTab *dummy_type_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void init_parts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>vect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVect__DoubleTab.html">Vect_DoubleTab</a> &amp;&#160;</td>
          <td class="paramname"><em>parts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDoubleTab.html">DoubleTab</a> *&#160;</td>
          <td class="paramname"><em>dummy_type_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00028">28</a> of file <a class="el" href="ConstDoubleTab__parts_8cpp_source.html">ConstDoubleTab_parts.cpp</a>.</p>

<p>References <a class="el" href="MD__Vector__composite_8h_source.html#l00058">MD_Vector_composite::data_</a>, <a class="el" href="DoubleTab_8h_source.html#l00254">DoubleTab::dimension_tot()</a>, <a class="el" href="DoubleVect_8h_source.html#l00101">DoubleVect::get_md_vector()</a>, <a class="el" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">MD_Vector_base::get_nb_items_tot()</a>, <a class="el" href="DoubleVect_8h_source.html#l00164">DoubleVect::line_size()</a>, <a class="el" href="Double_8h_source.html#l00180">max()</a>, <a class="el" href="DoubleTab_8h_source.html#l00264">DoubleTab::nb_dim()</a>, <a class="el" href="MD__Vector_8h_source.html#l00063">MD_Vector::non_nul()</a>, <a class="el" href="MD__Vector__composite_8h_source.html#l00063">MD_Vector_composite::parts_offsets_</a>, <a class="el" href="DoubleTab_8cpp_source.html#l00211">DoubleTab::ref()</a>, <a class="el" href="DoubleTab_8cpp_source.html#l00274">DoubleTab::ref_array()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="DoubleTab_8cpp_source.html#l00335">DoubleTab::resize()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00248">ArrOfInt::resize()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, <a class="el" href="DoubleTab_8cpp_source.html#l00520">DoubleTab::set_md_vector()</a>, <a class="el" href="MD__Vector__composite_8h_source.html#l00065">MD_Vector_composite::shapes_</a>, <a class="el" href="VectMD__Vector_8h_source.html#l00092">Vect_MD_Vector::size()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>, <a class="el" href="DoubleVect_8h_source.html#l00159">DoubleVect::size_totale()</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, and <a class="el" href="MD__Vector_8h_source.html#l00067">MD_Vector::valeur()</a>.</p>

<p>Referenced by <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00159">ConstDoubleTab_parts::ConstDoubleTab_parts()</a>, <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00198">ConstIntTab_parts::ConstIntTab_parts()</a>, <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00181">DoubleTab_parts::DoubleTab_parts()</a>, <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00225">IntTab_parts::initialize()</a>, <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00206">ConstIntTab_parts::initialize()</a>, <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00186">DoubleTab_parts::initialize()</a>, <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00167">ConstDoubleTab_parts::initialize()</a>, and <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00220">IntTab_parts::IntTab_parts()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md = vect.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>();
  <span class="keywordflow">if</span> (! md.<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>() || !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, md.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>()))
    {
<span class="comment">// Ce n&#39;est pas un tableau a plusieurs sous-parties, on cree juste une</span>
<span class="comment">// partie qui pointe sur vect.</span>
      parts.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(1);
      <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; part = parts[0];
<span class="comment">// On preserve le &#39;shape&#39; du tableau de depart, si c&#39;est un DoubleTab...</span>
      <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>, vect))
        part.<a class="code" href="classDoubleTab.html#afc7cddeeec2c80636e54eaf330ac41ad" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>, vect));
      <span class="keywordflow">else</span>
        part.<a class="code" href="classDoubleTab.html#afc7cddeeec2c80636e54eaf330ac41ad" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(vect);
    }
  <span class="keywordflow">else</span>
    {

      <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> shape;
      <span class="keyword">const</span> <span class="keywordtype">int</span> line_size = vect.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
      <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>, vect))
        {
          <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>, vect);
          <span class="keyword">const</span> <span class="keywordtype">int</span> n = tab.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>();
          shape.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(n);
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
            shape[i] = tab.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(i);
        }
      <span class="keywordflow">else</span>
        {
          <span class="keywordflow">if</span> (line_size == 1)
            {
              shape.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(1);
              shape[0] = vect.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>();
            }
          <span class="keywordflow">else</span>
            {
              shape.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(2);
              shape[0] = vect.<a class="code" href="classDoubleVect.html#ad2d21b364e1c6559771970596a25c006" title="Identique a size_array()">size_totale</a>() / line_size;
              shape[1] = line_size;
            }
        }

      <span class="keyword">const</span> <a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>&amp; mdata = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, md.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>());
      <span class="keyword">const</span> <span class="keywordtype">int</span> n = mdata.<a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>.<a class="code" href="classVect__MD__Vector.html#af5aaad6ccea0d8d0ecb0ff5c6a2f50ee">size</a>();
      parts.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(n);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, j; i &lt; n; i++)
        {
          <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> shape_i;
          <span class="keywordflow">if</span> (mdata.<a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>[i] == 0) shape_i = shape; <span class="comment">//si mdata.shapes_[i] &gt; 0, alors la sous-partie a une dimension mineure en plus</span>
          <span class="keywordflow">else</span> <span class="keywordflow">for</span> (shape_i.<a class="code" href="classArrOfInt.html#a15fc7e3958f02cb38d3106eeb919f6fc" title="appel a ArrOfInt::resize_array()">resize</a>(shape.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() + 1), shape_i(1) = mdata.<a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>[i], j = 1; j &lt; shape.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(); j++) shape_i(j + 1) = shape(j);
          <span class="keyword">const</span> <span class="keywordtype">int</span> offset = mdata.<a class="code" href="classMD__Vector__composite.html#a89577c0a030806e9aa6bd7d4095e55e6">parts_offsets_</a>[i];
          <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_part = mdata.<a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>[i];
          shape_i[0] = md_part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">get_nb_items_tot</a>();
          <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; part = parts[i];
<span class="comment">// Fait pointer la zone de memoire sur le sous-tableau (pour l&#39;instant tableau monodimensionnel)</span>
          part.<a class="code" href="classDoubleTab.html#a8eb99ddb58266d6f9d6e149c6f8c6a1f" title="identique a DoubleVect::ref_array() (cree un tableau monodimensionnel sans structure parallele) Atten...">ref_array</a>(vect, offset * line_size, shape_i[0] * line_size * <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(mdata.<a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>[i], 1));
<span class="comment">// Change le &quot;shape&quot; du tableau pour mettre le nombre de lignes et de colonnes</span>
<span class="comment">// (nombre total d&#39;items inchange, donc resize autorise)</span>
          part.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(shape_i);
<span class="comment">// Associe le md_vector</span>
          part.<a class="code" href="classDoubleTab.html#a2f40241acb678b0dd0dac7ee4f421b1d" title="associe le md_vector au vecteur (voir DoubleVect::set_md_vector()) dimension(0) sera initialise a md_...">set_md_vector</a>(md_part);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a58a896dde7a060b4c07ffd3229f763"></a><!-- doxytag: member="ConstDoubleTab_parts.cpp::init_parts" ref="a6a58a896dde7a060b4c07ffd3229f763" args="(IntVect &amp;vect, Vect_IntTab &amp;parts, IntTab *dummy_type_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void init_parts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>vect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVect__IntTab.html">Vect_IntTab</a> &amp;&#160;</td>
          <td class="paramname"><em>parts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classIntTab.html">IntTab</a> *&#160;</td>
          <td class="paramname"><em>dummy_type_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ConstDoubleTab__parts_8cpp_source.html#l00093">93</a> of file <a class="el" href="ConstDoubleTab__parts_8cpp_source.html">ConstDoubleTab_parts.cpp</a>.</p>

<p>References <a class="el" href="MD__Vector__composite_8h_source.html#l00058">MD_Vector_composite::data_</a>, <a class="el" href="IntTab_8h_source.html#l00244">IntTab::dimension_tot()</a>, <a class="el" href="IntVect_8h_source.html#l00087">IntVect::get_md_vector()</a>, <a class="el" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">MD_Vector_base::get_nb_items_tot()</a>, <a class="el" href="IntVect_8h_source.html#l00150">IntVect::line_size()</a>, <a class="el" href="Double_8h_source.html#l00180">max()</a>, <a class="el" href="IntTab_8h_source.html#l00254">IntTab::nb_dim()</a>, <a class="el" href="MD__Vector_8h_source.html#l00063">MD_Vector::non_nul()</a>, <a class="el" href="MD__Vector__composite_8h_source.html#l00063">MD_Vector_composite::parts_offsets_</a>, <a class="el" href="IntTab_8cpp_source.html#l00229">IntTab::ref()</a>, <a class="el" href="IntTab_8cpp_source.html#l00292">IntTab::ref_array()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="IntTab_8cpp_source.html#l00353">IntTab::resize()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00248">ArrOfInt::resize()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00240">ArrOfInt::resize_array()</a>, <a class="el" href="IntTab_8cpp_source.html#l00553">IntTab::set_md_vector()</a>, <a class="el" href="MD__Vector__composite_8h_source.html#l00065">MD_Vector_composite::shapes_</a>, <a class="el" href="VectMD__Vector_8h_source.html#l00092">Vect_MD_Vector::size()</a>, <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>, <a class="el" href="IntVect_8h_source.html#l00145">IntVect::size_totale()</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, and <a class="el" href="MD__Vector_8h_source.html#l00067">MD_Vector::valeur()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md = vect.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>();
  <span class="keywordflow">if</span> (! md.<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>() || !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, md.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>()))
    {
<span class="comment">// Ce n&#39;est pas un tableau a plusieurs sous-parties, on cree juste une</span>
<span class="comment">// partie qui pointe sur vect.</span>
      parts.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(1);
      <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; part = parts[0];
<span class="comment">// On preserve le &#39;shape&#39; du tableau de depart, si c&#39;est un DoubleTab...</span>
      <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>, vect))
        part.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>, vect));
      <span class="keywordflow">else</span>
        part.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(vect);
    }
  <span class="keywordflow">else</span>
    {

      <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> shape;
      <span class="keyword">const</span> <span class="keywordtype">int</span> line_size = vect.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>();
      <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>, vect))
        {
          <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; tab = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>, vect);
          <span class="keyword">const</span> <span class="keywordtype">int</span> n = tab.<a class="code" href="classIntTab.html#ae307ece7edbe1d5facfbb81953b3e2b1" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>();
          shape.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(n);
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
            shape[i] = tab.<a class="code" href="classIntTab.html#a71e9b9ddc1793094b1b3f109377952b1" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(i);
        }
      <span class="keywordflow">else</span>
        {
          <span class="keywordflow">if</span> (line_size == 1)
            {
              shape.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(1);
              shape[0] = vect.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
            }
          <span class="keywordflow">else</span>
            {
              shape.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(2);
              shape[0] = vect.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>() / line_size;
              shape[1] = line_size;
            }
        }

      <span class="keyword">const</span> <a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>&amp; mdata = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, md.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>());
      <span class="keyword">const</span> <span class="keywordtype">int</span> n = mdata.<a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>.<a class="code" href="classVect__MD__Vector.html#af5aaad6ccea0d8d0ecb0ff5c6a2f50ee">size</a>();
      parts.<a class="code" href="classvect__impl.html#ad841d6b676a796bae26ed2566b7b3b41">dimensionner</a>(n);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, j; i &lt; n; i++)
        {
          <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> shape_i;
          <span class="keywordflow">if</span> (mdata.<a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>[i] == 0) shape_i = shape; <span class="comment">//si mdata.shapes_[i] &gt; 0, alors la sous-partie a une dimension mineure en plus</span>
          <span class="keywordflow">else</span> <span class="keywordflow">for</span> (shape_i.<a class="code" href="classArrOfInt.html#a15fc7e3958f02cb38d3106eeb919f6fc" title="appel a ArrOfInt::resize_array()">resize</a>(shape.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>() + 1), shape_i(1) = mdata.<a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>[i], j = 1; j &lt; shape.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(); j++) shape_i(j + 1) = shape(j);
          <span class="keyword">const</span> <span class="keywordtype">int</span> offset = mdata.<a class="code" href="classMD__Vector__composite.html#a89577c0a030806e9aa6bd7d4095e55e6">parts_offsets_</a>[i];
          <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_part = mdata.<a class="code" href="classMD__Vector__composite.html#a7c8e90a2529e17ad92ae8c3816f0d3a3">data_</a>[i];
          shape_i[0] = md_part.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a27d5ace2aee5ecf1d78accb7b321108d">get_nb_items_tot</a>();
          <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; part = parts[i];
<span class="comment">// Fait pointer la zone de memoire sur le sous-tableau (pour l&#39;instant tableau monodimensionnel)</span>
          part.<a class="code" href="classIntTab.html#a42dfa6b5dafbf88d38adae8872a0be0b" title="identique a DoubleVect::ref_array() (cree un tableau monodimensionnel sans structure parallele) Atten...">ref_array</a>(vect, offset * line_size, shape_i[0] * line_size * <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(mdata.<a class="code" href="classMD__Vector__composite.html#af68c9eb554323384ceb650e0b59ce11d">shapes_</a>[i], 1));
<span class="comment">// Change le &quot;shape&quot; du tableau pour mettre le nombre de lignes et de colonnes</span>
<span class="comment">// (nombre total d&#39;items inchange, donc resize autorise)</span>
          part.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(shape_i);
<span class="comment">// Associe le md_vector</span>
          part.<a class="code" href="classIntTab.html#a02470d5d5921700f4daee05a5b3d2601" title="associe le md_vector au vecteur (voir IntVect::set_md_vector()) dimension(0) sera initialise a md_vec...">set_md_vector</a>(md_part);
        }
    }
}
</pre></div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:51 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
