<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/VDF/Traitement_particulier_NS_Profils_thermo_VDF.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/VDF/Traitement_particulier_NS_Profils_thermo_VDF.cpp</div>  </div>
</div>
<div class="contents">
<a href="Traitement__particulier__NS__Profils__thermo__VDF_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Traitement_particulier_NS_Profils_thermo_VDF.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/VDF</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/20</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Traitement__particulier__NS__Profils__thermo__VDF_8h.html">Traitement_particulier_NS_Profils_thermo_VDF.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VDF_8h.html">Zone_VDF.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="LecFicDistribueBin_8h.html">LecFicDistribueBin.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="EcrFicCollecteBin_8h.html">EcrFicCollecteBin.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Navier__Stokes__std_8h.html">Navier_Stokes_std.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Convection__Diffusion__Temperature_8h.html">Convection_Diffusion_Temperature.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Convection__Diffusion__Chaleur__QC_8h.html">Convection_Diffusion_Chaleur_QC.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="Traitement__particulier__NS__Profils__thermo__VDF_8cpp.html#aea08ac96979ce32179100ce3a1dd3a9b">00033</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html" title="classe Traitement_particulier_NS_Profils_thermo_VDF">Traitement_particulier_NS_Profils_thermo_VDF</a>,<span class="stringliteral">&quot;Traitement_particulier_NS_Profils_thermo_VDF&quot;</span>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html" title="class Trait_part_NS_Profils_VDF This classe enables a particular treatment for computations which hav...">Traitement_particulier_NS_Profils_VDF</a>);
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a8faa4880590f1db97c63ce30bd7d7e74">00035</a> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a8faa4880590f1db97c63ce30bd7d7e74">Traitement_particulier_NS_Profils_thermo_VDF::Traitement_particulier_NS_Profils_thermo_VDF</a>():oui_repr_stats_thermo(0)
<a name="l00036"></a>00036 {
<a name="l00037"></a>00037 }
<a name="l00038"></a>00038 <span class="comment">// Precondition: Il faut traiter un probleme Thermohydraulique</span>
<a name="l00039"></a>00039 <span class="comment">// Parametre: Sortie&amp; is</span>
<a name="l00040"></a>00040 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00041"></a>00041 <span class="comment">// Valeurs par defaut:</span>
<a name="l00042"></a>00042 <span class="comment">// Contraintes:</span>
<a name="l00043"></a>00043 <span class="comment">// Acces: entree/sortie</span>
<a name="l00044"></a>00044 <span class="comment">// Exception:</span>
<a name="l00045"></a>00045 <span class="comment">// Effets de bord:</span>
<a name="l00046"></a>00046 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00047"></a>00047 <span class="comment">//</span><span class="comment"></span>
<a name="l00048"></a>00048 <span class="comment">//! Classe permettant de faire les statistiques sur le champs&lt;br&gt;de temperature avec des profils dans un domaine homogene dans une direction.</span>
<a name="l00049"></a>00049 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00050"></a>00050 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00051"></a>00051 <span class="comment">Contraintes: */</span>
<a name="l00052"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7f9bd596d5cb17f3cef46cff3a628d45">00052</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7f9bd596d5cb17f3cef46cff3a628d45" title="Classe permettant de faire les statistiques sur le champs de temperature avec des profils dans un dom...">Traitement_particulier_NS_Profils_thermo_VDF::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; is)<span class="keyword"> const</span>
<a name="l00053"></a>00053 <span class="keyword"></span>{
<a name="l00054"></a>00054   <span class="keywordflow">return</span> is;
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="comment">// Precondition:</span>
<a name="l00059"></a>00059 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00060"></a>00060 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00061"></a>00061 <span class="comment">// Valeurs par defaut:</span>
<a name="l00062"></a>00062 <span class="comment">// Contraintes:</span>
<a name="l00063"></a>00063 <span class="comment">// Acces: entree/sortie</span>
<a name="l00064"></a>00064 <span class="comment">// Exception:</span>
<a name="l00065"></a>00065 <span class="comment">// Effets de bord:</span>
<a name="l00066"></a>00066 <span class="comment">// Postcondition:</span>
<a name="l00067"></a>00067 <span class="comment">//</span>
<a name="l00068"></a>00068 <span class="comment">//</span><span class="comment"></span>
<a name="l00069"></a>00069 <span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00070"></a>00070 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00071"></a>00071 <span class="comment">Contraintes: */</span>
<a name="l00072"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a12bc7ca989d050b07bbbd64321cd859f">00072</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a12bc7ca989d050b07bbbd64321cd859f">Traitement_particulier_NS_Profils_thermo_VDF::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074   <span class="keywordflow">return</span> is;
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 
<a name="l00080"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a72147e309fd86792180ac850085a5956">00080</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a72147e309fd86792180ac850085a5956">Traitement_particulier_NS_Profils_thermo_VDF::lire</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082   <span class="keywordflow">return</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a72147e309fd86792180ac850085a5956">Traitement_particulier_NS_Profils_VDF::lire</a>(is);
<a name="l00083"></a>00083 }
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aeb2229b53eb28f40b0ff438e6859e77a">00088</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a72147e309fd86792180ac850085a5956">Traitement_particulier_NS_Profils_thermo_VDF::lire</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; motlu, <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00089"></a>00089 {
<a name="l00090"></a>00090 <span class="comment">// Par defaut on ne fait pas de statistiques sur la temperature.</span>
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="keywordflow">if</span> (motlu==<span class="stringliteral">&quot;stats_thermo&quot;</span>)
<a name="l00093"></a>00093     {
<a name="l00094"></a>00094 <span class="comment">// Statistiques sur le champ de temperature</span>
<a name="l00095"></a>00095       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aec115f94db5c384938a7b0bac62502d4">oui_stats_thermo</a> = 1;
<a name="l00096"></a>00096     }
<a name="l00097"></a>00097   <span class="keywordflow">else</span>
<a name="l00098"></a>00098     {
<a name="l00099"></a>00099       <span class="keywordflow">if</span>(motlu==<span class="stringliteral">&quot;reprise_thermo&quot;</span>)
<a name="l00100"></a>00100         {
<a name="l00101"></a>00101 <span class="comment">// Reprise des statistiques pour le champs de temperature</span>
<a name="l00102"></a>00102           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a64213911bf728e149ad10c2e81285e63">oui_repr_stats_thermo</a> = 1; <span class="comment">//!&lt; On veut reprendre les statistiques sur la temperature</span>
<a name="l00103"></a>00103 <span class="comment"></span>          is  &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aeb1860a98f3de6537182fe035a629763">fich_repr_stats_thermo</a> ;  <span class="comment">//!&lt; Indication du nom du fichier de reprise des stats pour le champs de temperature</span>
<a name="l00104"></a>00104 <span class="comment"></span>          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On reprend les statistiques sur le champs thermique&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00105"></a>00105         }
<a name="l00106"></a>00106       <span class="keywordflow">else</span>
<a name="l00107"></a>00107         {
<a name="l00108"></a>00108           <span class="keywordflow">if</span>(motlu==<span class="stringliteral">&quot;tmin_tmax&quot;</span>)
<a name="l00109"></a>00109             {
<a name="l00110"></a>00110 <span class="comment">// On demande les max et min de temperature dans un fichier</span>
<a name="l00111"></a>00111               <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#afde83b5be340474a103752ffbf43b083">tmin_tmax</a> = 1;
<a name="l00112"></a>00112               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;User asked to monitor min and max of temperature&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00113"></a>00113               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;in channel flow computation.&quot;</span> &lt;&lt; finl;
<a name="l00114"></a>00114             }
<a name="l00115"></a>00115           <span class="keywordflow">else</span>
<a name="l00116"></a>00116             {
<a name="l00117"></a>00117               <span class="keywordflow">return</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a72147e309fd86792180ac850085a5956">Traitement_particulier_NS_Profils_VDF::lire</a>(motlu,is);
<a name="l00118"></a>00118             }
<a name="l00119"></a>00119         }
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121   <span class="keywordflow">return</span> is;
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aa33d4c5169655012fc2ef7ba72aa60c1">00128</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aa33d4c5169655012fc2ef7ba72aa60c1">Traitement_particulier_NS_Profils_thermo_VDF::associer_eqn</a>(<span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eq_ns )
<a name="l00129"></a>00129 {
<a name="l00130"></a>00130   <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aa33d4c5169655012fc2ef7ba72aa60c1">Traitement_particulier_NS_Profils_VDF::associer_eqn</a>(eq_ns);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132   <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>();
<a name="l00133"></a>00133   <span class="keywordtype">int</span> flag=0;
<a name="l00134"></a>00134   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;pb.<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00135"></a>00135     {
<a name="l00136"></a>00136       <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classConvection__Diffusion__Temperature.html" title="classe Convection_Diffusion_Temperature Cas particulier de Convection_Diffusion_std quand le scalaire...">Convection_Diffusion_Temperature</a>,pb.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i)))
<a name="l00137"></a>00137         {
<a name="l00138"></a>00138           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7a258d94978c120b20fa15960024e081">mon_equation_NRJ</a> = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classConvection__Diffusion__Temperature.html" title="classe Convection_Diffusion_Temperature Cas particulier de Convection_Diffusion_std quand le scalaire...">Convection_Diffusion_Temperature</a>,pb.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i));
<a name="l00139"></a>00139           flag=1;
<a name="l00140"></a>00140         }
<a name="l00141"></a>00141       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classConvection__Diffusion__Chaleur__QC.html" title="classe Convection_Diffusion_Chaleur_QC Cas particulier de Convection_Diffusion_Chaleur_Fluide_Dilatab...">Convection_Diffusion_Chaleur_QC</a>,pb.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i)))
<a name="l00142"></a>00142         {
<a name="l00143"></a>00143           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7a258d94978c120b20fa15960024e081">mon_equation_NRJ</a> = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classConvection__Diffusion__Chaleur__QC.html" title="classe Convection_Diffusion_Chaleur_QC Cas particulier de Convection_Diffusion_Chaleur_Fluide_Dilatab...">Convection_Diffusion_Chaleur_QC</a>,pb.<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i));
<a name="l00144"></a>00144           flag=1;
<a name="l00145"></a>00145         }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148   <span class="keywordflow">if</span> (flag==0)
<a name="l00149"></a>00149     {
<a name="l00150"></a>00150       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error : Equation of NRJ was not found...&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00151"></a>00151       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;User can not ask for statistics on temperature&quot;</span> &lt;&lt; finl;
<a name="l00152"></a>00152       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;if we do not solve a heat equation.&quot;</span> &lt;&lt; finl;
<a name="l00153"></a>00153       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Try to remove the &#39;_thermo&#39; part at key-word &#39;Profils&#39;&quot;</span> &lt;&lt; finl;
<a name="l00154"></a>00154       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156 }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="comment">// #################### Postraitement Statistique du Champ de Temperature #########</span>
<a name="l00163"></a>00163 
<a name="l00164"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a07b60a649bd0972d1abf845325e93ac6">00164</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a07b60a649bd0972d1abf845325e93ac6">Traitement_particulier_NS_Profils_thermo_VDF::post_traitement_particulier</a>()
<a name="l00165"></a>00165 {
<a name="l00166"></a>00166   <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a07b60a649bd0972d1abf845325e93ac6">Traitement_particulier_NS_Profils_VDF::post_traitement_particulier</a>();
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> Tmoy_m(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00169"></a>00169   Tmoy_m=0.;
<a name="l00170"></a>00170   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> Trms_m(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00171"></a>00171   Trms_m=0.;
<a name="l00172"></a>00172   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> upTp_m(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00173"></a>00173   upTp_m=0.;
<a name="l00174"></a>00174   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> vpTp_m(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00175"></a>00175   vpTp_m=0.;
<a name="l00176"></a>00176   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> wpTp_m(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00177"></a>00177   wpTp_m=0.;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> Tmoy_p(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00180"></a>00180   Tmoy_p=0.;
<a name="l00181"></a>00181   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> Trms_p(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00182"></a>00182   Trms_p=0.;
<a name="l00183"></a>00183   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> upTp_p(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00184"></a>00184   upTp_p=0.;
<a name="l00185"></a>00185   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> vpTp_p(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00186"></a>00186   vpTp_p=0.;
<a name="l00187"></a>00187   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> wpTp_p(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00188"></a>00188   wpTp_p=0.;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <span class="comment">// On ne fait des statistiques sur le champ thermique que si l&#39;on fait des statistiques sur le champ dynamique en meme temps.</span>
<a name="l00194"></a>00194   <span class="keywordflow">if</span> ((<a class="code" href="classTraitement__particulier__NS__Profils.html#a3e6d6c761f5c4c72849d3e19a56b2986">oui_u_inst</a> != 0)&amp;&amp;(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aec115f94db5c384938a7b0bac62502d4">oui_stats_thermo</a> != 0))
<a name="l00195"></a>00195     {
<a name="l00196"></a>00196       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7024eff7390e66ebd294ed3f33655ec3">calculer_moyennes_spatiales_thermo</a>(Tmoy_m,Trms_m,upTp_m,vpTp_m,wpTp_m,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#af63fcebc719662a04accc3ef17677ab7" title="Correspondance numerotation globale -&gt; numerotation locale dans Yxx.">corresp_uv_m</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a4031eb0b77d9d980d1ba96901b5451c8" title="Nombre de points a &quot;meme Y&quot; pour chaque grandeur.">compt_uv_m</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a7fadf8cc84f903e8ea38d3e8d212d3fe">Nuv</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a0771d4feb12c1e0c5204ab09b0c901a5">xUVm</a>);
<a name="l00197"></a>00197       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7024eff7390e66ebd294ed3f33655ec3">calculer_moyennes_spatiales_thermo</a>(Tmoy_p,Trms_p,upTp_p,vpTp_p,wpTp_p,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#ab3b8d654ea383c4a86eb1bdbd8384469">corresp_uv_p</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a77fd16eaacdfa52b66fd2eef0ee30815">compt_uv_p</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a7fadf8cc84f903e8ea38d3e8d212d3fe">Nuv</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#ac6f7f846b4283c0dbd9a8c240fd46961" title="Positions des points juste avant et apres.">xUVp</a>);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199       <span class="keyword">static</span> <span class="keywordtype">double</span> temps_dern_post_inst = -100.;
<a name="l00200"></a>00200       <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(tps-temps_dern_post_inst)&gt;=<a class="code" href="classTraitement__particulier__NS__Profils.html#a96d75c107998653cd87868bb39c7bfe8">dt_post_inst</a>)
<a name="l00201"></a>00201         {
<a name="l00202"></a>00202           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a513659df67a82d461ea505202aa1476f">ecriture_fichier_moy_spat_thermo</a>(Tmoy_m,Trms_m,upTp_m,vpTp_m,wpTp_m,Tmoy_p,Trms_p,upTp_p,vpTp_p,wpTp_p,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#af92dccfa229f0e4801e1e53a3b217263" title="Coordonnees des points ou est definie la vitesse.">Yuv_m</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a7fadf8cc84f903e8ea38d3e8d212d3fe">Nuv</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#ad2550f4f491a5d7dd538cca710491bbf">delta_UVm</a>, <a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a82cea2424eff3f04dd1895d8e58d5bd5" title="Distance (tjrs positive) entre le point avant ou apres et le point du profil, pour faire les interpol...">delta_UVp</a>);
<a name="l00203"></a>00203 
<a name="l00204"></a>00204           temps_dern_post_inst = tps;
<a name="l00205"></a>00205         }
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 <span class="comment">// Moyennes temporelles :</span>
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="comment">// On ne fait des statistiques sur le champ thermique que si l&#39;on fait des statistiques sur le champ dynamique en meme temps.</span>
<a name="l00212"></a>00212   <span class="keywordflow">if</span> ((<a class="code" href="classTraitement__particulier__NS__Profils.html#a3e6d6c761f5c4c72849d3e19a56b2986">oui_u_inst</a> != 0)&amp;&amp;(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aec115f94db5c384938a7b0bac62502d4">oui_stats_thermo</a> != 0)&amp;&amp;(<a class="code" href="classTraitement__particulier__NS__Profils.html#a83b6b78bbef51f861a4e8fca3244e894">oui_stat</a> != 0))
<a name="l00213"></a>00213     {
<a name="l00214"></a>00214       <span class="keywordtype">double</span> tpsbis = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00215"></a>00215       <span class="keywordflow">if</span> ((tpsbis&gt;=<a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a>)&amp;&amp;(tpsbis&lt;=<a class="code" href="classTraitement__particulier__NS__Profils.html#a8758265d6dcac211f89144a30974457d">temps_fin</a>))
<a name="l00216"></a>00216         {
<a name="l00217"></a>00217           <span class="keyword">static</span> <span class="keywordtype">int</span> init_stat_temps = 0;
<a name="l00218"></a>00218           <span class="keywordflow">if</span>((init_stat_temps==0)&amp;&amp;( <a class="code" href="classTraitement__particulier__NS__Profils.html#a0f3642969b930ad2b1f4546ac08319b5">oui_repr</a> != 1))  <span class="comment">//!&lt; si ce n est pas une reprise : sinon valeurs lues dans le fichier</span>
<a name="l00219"></a>00219 <span class="comment"></span>            {
<a name="l00220"></a>00220               <span class="keywordtype">double</span> dt_v = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().pas_de_temps();
<a name="l00221"></a>00221               <a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a> = tpsbis-dt_v;
<a name="l00222"></a>00222               init_stat_temps++;
<a name="l00223"></a>00223             }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a84eb2bcb52d15d615d903ca708d7e648">calculer_integrales_temporelles</a>(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ade8751649e97f17800a76475ec663f93">Tmoy_temp</a>,Tmoy_m,Tmoy_p,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#ad2550f4f491a5d7dd538cca710491bbf">delta_UVm</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a82cea2424eff3f04dd1895d8e58d5bd5" title="Distance (tjrs positive) entre le point avant ou apres et le point du profil, pour faire les interpol...">delta_UVp</a>);
<a name="l00226"></a>00226           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a84eb2bcb52d15d615d903ca708d7e648">calculer_integrales_temporelles</a>(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae38f377ff0ced0a45b39c647f36f1c6a">Trms_temp</a>,Trms_m,Trms_p,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#ad2550f4f491a5d7dd538cca710491bbf">delta_UVm</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a82cea2424eff3f04dd1895d8e58d5bd5" title="Distance (tjrs positive) entre le point avant ou apres et le point du profil, pour faire les interpol...">delta_UVp</a>);
<a name="l00227"></a>00227           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a84eb2bcb52d15d615d903ca708d7e648">calculer_integrales_temporelles</a>(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aac4c4bc11d132b2ad81fa169eeceb846">upTp_temp</a>,upTp_m,upTp_p,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#ad2550f4f491a5d7dd538cca710491bbf">delta_UVm</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a82cea2424eff3f04dd1895d8e58d5bd5" title="Distance (tjrs positive) entre le point avant ou apres et le point du profil, pour faire les interpol...">delta_UVp</a>);
<a name="l00228"></a>00228           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a84eb2bcb52d15d615d903ca708d7e648">calculer_integrales_temporelles</a>(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a76411aa09a7bb18cc76390c420857c19">vpTp_temp</a>,vpTp_m,vpTp_p,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#ad2550f4f491a5d7dd538cca710491bbf">delta_UVm</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a82cea2424eff3f04dd1895d8e58d5bd5" title="Distance (tjrs positive) entre le point avant ou apres et le point du profil, pour faire les interpol...">delta_UVp</a>);
<a name="l00229"></a>00229           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a84eb2bcb52d15d615d903ca708d7e648">calculer_integrales_temporelles</a>(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae48773f775f1b7fedefcb835fe4c702b">wpTp_temp</a>,wpTp_m,wpTp_p,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#ad2550f4f491a5d7dd538cca710491bbf">delta_UVm</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#a82cea2424eff3f04dd1895d8e58d5bd5" title="Distance (tjrs positive) entre le point avant ou apres et le point du profil, pour faire les interpol...">delta_UVp</a>);
<a name="l00230"></a>00230 
<a name="l00231"></a>00231           <span class="keyword">static</span> <span class="keywordtype">double</span> temps_dern_post_stat = -100.;
<a name="l00232"></a>00232           <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(tpsbis-temps_dern_post_stat)&gt;=<a class="code" href="classTraitement__particulier__NS__Profils.html#a589d698d4a9fd1b213a1d47180a9f592">dt_post_stat</a>)
<a name="l00233"></a>00233             {
<a name="l00234"></a>00234               <span class="keywordtype">double</span> dt = tpsbis-<a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a>;
<a name="l00235"></a>00235               <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aaf215f317f00bd72ef5a9955641573cb">ecriture_fichier_moy_temp_thermo</a>(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ade8751649e97f17800a76475ec663f93">Tmoy_temp</a>,<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae38f377ff0ced0a45b39c647f36f1c6a">Trms_temp</a>,<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aac4c4bc11d132b2ad81fa169eeceb846">upTp_temp</a>,<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a76411aa09a7bb18cc76390c420857c19">vpTp_temp</a>,<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae48773f775f1b7fedefcb835fe4c702b">wpTp_temp</a>,<a class="code" href="classTraitement__particulier__NS__Profils__VDF.html#af92dccfa229f0e4801e1e53a3b217263" title="Coordonnees des points ou est definie la vitesse.">Yuv_m</a>,dt,<a class="code" href="classTraitement__particulier__NS__Profils.html#a7fadf8cc84f903e8ea38d3e8d212d3fe">Nuv</a>);
<a name="l00236"></a>00236               temps_dern_post_stat = tpsbis;
<a name="l00237"></a>00237             }
<a name="l00238"></a>00238         }
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="comment">// #################### Calcul Moyennes #################################</span>
<a name="l00247"></a>00247 
<a name="l00248"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7024eff7390e66ebd294ed3f33655ec3">00248</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7024eff7390e66ebd294ed3f33655ec3">Traitement_particulier_NS_Profils_thermo_VDF::calculer_moyennes_spatiales_thermo</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tmoy, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; trms, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; uptp, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vptp, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; wptp, <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; corresp, <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; compt, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; NN, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xUV)
<a name="l00249"></a>00249 {
<a name="l00250"></a>00250 
<a name="l00251"></a>00251   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdisbase=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00252"></a>00252   <span class="keyword">const</span> <a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>&amp; zone_VDF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>, zdisbase);
<a name="l00253"></a>00253   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = zone_VDF.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="comment">// Pour trouver les coordonnees des points de temperature max et min :</span>
<a name="l00256"></a>00256   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xp = zone_VDF.<a class="code" href="classZone__VF.html#a87a29f0223c71256a25ee343c9277599">xp</a>();
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 <span class="comment">// Le nombre d&#39;elements de la zone VDF.</span>
<a name="l00259"></a>00259   <span class="keywordtype">int</span> nb_elems = zone_VDF.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00260"></a>00260 
<a name="l00261"></a>00261 <span class="comment">// On veut acceder aux valeurs des 3 composantes de la vitesse a partir de mon_equation.</span>
<a name="l00262"></a>00262   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vitesse = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().valeurs();
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 <span class="comment">// On veut acceder aux valeurs de la temperature a partir de mon_equation_NRJ.</span>
<a name="l00265"></a>00265   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Temp = <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a7a258d94978c120b20fa15960024e081">mon_equation_NRJ</a>.<a class="code" href="classRef__Convection__Diffusion__std.html#a1513bb18bcebbe98facf4d87d82a7a68">valeur</a>().<a class="code" href="classConvection__Diffusion__std.html#a4fb6e612ed9e8fd56e05b4cdb560ec77">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>();
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 <span class="comment">// Ces 3 vecteurs comportent les valeurs des 3 composantes U, V et W moyennees au centre des elements et sur tout l&#39;espace.</span>
<a name="l00270"></a>00270 <span class="comment">// Ils correspondent a &lt;U&gt;, &lt;V&gt; et &lt;W&gt;.</span>
<a name="l00271"></a>00271   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> u_moy_cent(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00272"></a>00272   u_moy_cent= 0.;
<a name="l00273"></a>00273   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> v_moy_cent(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00274"></a>00274   v_moy_cent= 0.;
<a name="l00275"></a>00275   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> w_moy_cent(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00276"></a>00276   w_moy_cent= 0.;
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 <span class="comment">// t2moy correspond</span>
<a name="l00279"></a>00279   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> t2moy(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00280"></a>00280   t2moy     = 0.;
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 <span class="comment">// vitu, vitv et vitw sont les valeurs des 3 composantes de la vitesse prises au centre de l&#39;element,</span>
<a name="l00283"></a>00283 <span class="comment">// c&#39;est a dire moyennees.</span>
<a name="l00284"></a>00284   <span class="keywordtype">double</span> vitu,vitv,vitw;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="comment">// Pour verification des bornes de temperature en canal plan</span>
<a name="l00287"></a>00287   <span class="keywordtype">double</span> Tmin=1000000000.,Tmax=0.;
<a name="l00288"></a>00288   <span class="keywordtype">int</span> elem_min=0, elem_max=0;
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 <span class="comment">// On se sert de face_ui_j pour avoir le numero de la face portant la composante de la vitesse ui</span>
<a name="l00291"></a>00291 <span class="comment">// et 0 et 1 etant les deux faces qui se font face pour faire une moyenne au centre de l&#39;element.</span>
<a name="l00292"></a>00292 <span class="comment">// On doit procede comme ca entre autre parceque l&#39;on va parcourir les elements.</span>
<a name="l00293"></a>00293   <span class="keywordtype">int</span> face_u_0,face_u_1,face_v_0,face_v_1,face_w_0,face_w_1;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295   <span class="keywordtype">int</span> i,j,deja_fait=0;
<a name="l00296"></a>00296   <span class="keywordtype">int</span> num_elem;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">// tmoy est la moyenne de T : &lt;T&gt;(y,t)</span>
<a name="l00299"></a>00299   tmoy = 0.;
<a name="l00300"></a>00300 <span class="comment">// trms est l&#39;ecart-type de la temperature : sqrt(&lt;Tp^2&gt;)(y,t)=&lt;T^2&gt;-&lt;T&gt;^2</span>
<a name="l00301"></a>00301   trms = 0.;
<a name="l00302"></a>00302 <span class="comment">// uptp : &lt;U&gt;&lt;T&gt;-&lt;UT&gt;</span>
<a name="l00303"></a>00303   uptp = 0.;
<a name="l00304"></a>00304 <span class="comment">// vptp : &lt;V&gt;&lt;T&gt;-&lt;VT&gt;</span>
<a name="l00305"></a>00305   vptp = 0.;
<a name="l00306"></a>00306 <span class="comment">// wptp : &lt;W&gt;&lt;T&gt;-&lt;WT&gt;</span>
<a name="l00307"></a>00307   wptp = 0.;
<a name="l00308"></a>00308 
<a name="l00309"></a>00309   <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>; i++)
<a name="l00310"></a>00310     {
<a name="l00311"></a>00311 <span class="comment">// On parcourt tous les elements pour faire toutes les moyennes au centre des elements.</span>
<a name="l00312"></a>00312       <span class="keywordflow">for</span> (num_elem=0; num_elem&lt;nb_elems; num_elem++)
<a name="l00313"></a>00313         {
<a name="l00314"></a>00314 <span class="comment">// &lt;T&gt;</span>
<a name="l00315"></a>00315           <span class="keywordflow">if</span>(xp(num_elem,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9ab99e33e46dfcd270fd65f52d443d4d">dir_profil</a>)==xUV(i))
<a name="l00316"></a>00316             {
<a name="l00317"></a>00317               tmoy(i,corresp(i,num_elem)) += Temp[num_elem];
<a name="l00318"></a>00318               face_u_0 = elem_faces(num_elem,0);
<a name="l00319"></a>00319               face_u_1 = elem_faces(num_elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00320"></a>00320               vitu = 0.5*(vitesse[face_u_0]+vitesse[face_u_1]);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322               face_v_0 = elem_faces(num_elem,1);
<a name="l00323"></a>00323               face_v_1 = elem_faces(num_elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>+1);
<a name="l00324"></a>00324               vitv = 0.5*(vitesse[face_v_0]+vitesse[face_v_1]);
<a name="l00325"></a>00325 
<a name="l00326"></a>00326               face_w_0 = elem_faces(num_elem,2);
<a name="l00327"></a>00327               face_w_1 = elem_faces(num_elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>+2);
<a name="l00328"></a>00328               vitw = 0.5*(vitesse[face_w_0]+vitesse[face_w_1]);
<a name="l00329"></a>00329 <span class="comment">// &lt;U&gt;</span>
<a name="l00330"></a>00330               u_moy_cent(i,corresp(i,num_elem)) += vitu;
<a name="l00331"></a>00331 <span class="comment">// &lt;V&gt;</span>
<a name="l00332"></a>00332               v_moy_cent(i,corresp(i,num_elem)) += vitv;
<a name="l00333"></a>00333 <span class="comment">// &lt;W&gt;</span>
<a name="l00334"></a>00334               w_moy_cent(i,corresp(i,num_elem)) += vitw;
<a name="l00335"></a>00335 <span class="comment">// Trms : en fait ici on calcul &lt;T^2&gt; mais ensuite on va soustraire la partie &lt;T&gt;^2</span>
<a name="l00336"></a>00336               trms(i,corresp(i,num_elem)) += Temp[num_elem]*Temp[num_elem];
<a name="l00337"></a>00337 <span class="comment">// On calcule &lt;uT&gt;, &lt;vT&gt;, et &lt;wT&gt;</span>
<a name="l00338"></a>00338               uptp(i,corresp(i,num_elem)) += vitu*Temp[num_elem];
<a name="l00339"></a>00339               vptp(i,corresp(i,num_elem)) += vitv*Temp[num_elem];
<a name="l00340"></a>00340               wptp(i,corresp(i,num_elem)) += vitw*Temp[num_elem];
<a name="l00341"></a>00341             }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343 <span class="comment">// Pour trouver les temperatures max et min dans l&#39;ecoulement.</span>
<a name="l00344"></a>00344           <span class="keywordflow">if</span>(Temp[num_elem]&lt;Tmin)
<a name="l00345"></a>00345             {
<a name="l00346"></a>00346               Tmin=Temp[num_elem];
<a name="l00347"></a>00347               elem_min=num_elem;
<a name="l00348"></a>00348             }
<a name="l00349"></a>00349           <span class="keywordflow">if</span>(Temp[num_elem]&gt;Tmax)
<a name="l00350"></a>00350             {
<a name="l00351"></a>00351               Tmax=Temp[num_elem];
<a name="l00352"></a>00352               elem_max=num_elem;
<a name="l00353"></a>00353             }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355         }<span class="comment">//FIN boucle sur les elements</span>
<a name="l00356"></a>00356 
<a name="l00357"></a>00357       <span class="keywordflow">if</span>((<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#afde83b5be340474a103752ffbf43b083">tmin_tmax</a>==1)&amp;&amp;(deja_fait==0))
<a name="l00358"></a>00358         {
<a name="l00359"></a>00359           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic1(<span class="stringliteral">&quot;T_min_max.dat&quot;</span>,ios::app);
<a name="l00360"></a>00360           <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00361"></a>00361           fic1 &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Tmin &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; xp(elem_min,0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; xp(elem_min,1);
<a name="l00362"></a>00362           fic1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Tmax &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; xp(elem_max,0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; xp(elem_max,1) &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00363"></a>00363           fic1.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00364"></a>00364           fic1.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l00365"></a>00365           deja_fait=1;
<a name="l00366"></a>00366         }
<a name="l00367"></a>00367     } <span class="comment">//!&lt; On a parcouru tous les profils</span>
<a name="l00368"></a>00368 <span class="comment"></span>
<a name="l00369"></a>00369 <span class="comment">// NN correspond au nombre de valeurs differentes pour Y, c&#39;est a dire le nombre de points de la courbe finale apres moyenne.</span>
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 <span class="comment">// compt[j] correspond au nombre d&#39;elements qui ont ete utilises pour calculer une meme valeur de temperature moyenne,</span>
<a name="l00372"></a>00372 <span class="comment">// ie le nombre d&#39;elements ayant la meme coordonnee Y.</span>
<a name="l00373"></a>00373 <span class="comment">// POUR LE PARALLELE !!</span>
<a name="l00374"></a>00374   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> compt_p(compt);
<a name="l00375"></a>00375   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(compt_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00376"></a>00376 
<a name="l00377"></a>00377   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> tmoy_p(tmoy);
<a name="l00378"></a>00378   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(tmoy_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00379"></a>00379 
<a name="l00380"></a>00380   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> trms_p(trms);
<a name="l00381"></a>00381   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(trms_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00382"></a>00382 
<a name="l00383"></a>00383   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> uptp_p(uptp);
<a name="l00384"></a>00384   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(uptp_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00385"></a>00385 
<a name="l00386"></a>00386   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> vptp_p(vptp);
<a name="l00387"></a>00387   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(vptp_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00388"></a>00388 
<a name="l00389"></a>00389   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> wptp_p(wptp);
<a name="l00390"></a>00390   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(wptp_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00391"></a>00391 
<a name="l00392"></a>00392   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> u_moy_cent_p(u_moy_cent);
<a name="l00393"></a>00393   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(u_moy_cent_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00394"></a>00394 
<a name="l00395"></a>00395   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> v_moy_cent_p(v_moy_cent);
<a name="l00396"></a>00396   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(v_moy_cent_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00397"></a>00397 
<a name="l00398"></a>00398   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> w_moy_cent_p(w_moy_cent);
<a name="l00399"></a>00399   <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(w_moy_cent_p,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00402"></a>00402     {
<a name="l00403"></a>00403       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> compt_tot(compt);
<a name="l00404"></a>00404       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> tmoy_tot(tmoy);
<a name="l00405"></a>00405       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> trms_tot(trms);
<a name="l00406"></a>00406       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> uptp_tot(uptp);
<a name="l00407"></a>00407       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> vptp_tot(vptp);
<a name="l00408"></a>00408       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> wptp_tot(wptp);
<a name="l00409"></a>00409       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> u_moy_cent_tot(u_moy_cent);
<a name="l00410"></a>00410       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> v_moy_cent_tot(v_moy_cent);
<a name="l00411"></a>00411       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> w_moy_cent_tot(w_moy_cent);
<a name="l00412"></a>00412 
<a name="l00413"></a>00413       compt_tot=0;
<a name="l00414"></a>00414       tmoy_tot=0.;
<a name="l00415"></a>00415       trms_tot=0.;
<a name="l00416"></a>00416       uptp_tot=0.;
<a name="l00417"></a>00417       vptp_tot=0.;
<a name="l00418"></a>00418       wptp_tot=0.;
<a name="l00419"></a>00419       u_moy_cent_tot=0.;
<a name="l00420"></a>00420       v_moy_cent_tot=0.;
<a name="l00421"></a>00421       w_moy_cent_tot=0.;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>(); p++)
<a name="l00424"></a>00424         {
<a name="l00425"></a>00425           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(compt_p,p,0,p);
<a name="l00426"></a>00426           compt_tot+=compt_p;
<a name="l00427"></a>00427 
<a name="l00428"></a>00428           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(tmoy_p,p,0,p);
<a name="l00429"></a>00429           tmoy_tot+=tmoy_p;
<a name="l00430"></a>00430 
<a name="l00431"></a>00431           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(trms_p,p,0,p);
<a name="l00432"></a>00432           trms_tot+=trms_p;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(uptp_p,p,0,p);
<a name="l00435"></a>00435           uptp_tot+=uptp_p;
<a name="l00436"></a>00436 
<a name="l00437"></a>00437           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(vptp_p,p,0,p);
<a name="l00438"></a>00438           vptp_tot+=vptp_p;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(wptp_p,p,0,p);
<a name="l00441"></a>00441           wptp_tot+=wptp_p;
<a name="l00442"></a>00442 
<a name="l00443"></a>00443           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(u_moy_cent_p,p,0,p);
<a name="l00444"></a>00444           u_moy_cent_tot+=u_moy_cent_p;
<a name="l00445"></a>00445 
<a name="l00446"></a>00446           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(v_moy_cent_p,p,0,p);
<a name="l00447"></a>00447           v_moy_cent_tot+=v_moy_cent_p;
<a name="l00448"></a>00448 
<a name="l00449"></a>00449           <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(w_moy_cent_p,p,0,p);
<a name="l00450"></a>00450           w_moy_cent_tot+=w_moy_cent_p;
<a name="l00451"></a>00451 
<a name="l00452"></a>00452 
<a name="l00453"></a>00453         }
<a name="l00454"></a>00454 
<a name="l00455"></a>00455       <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>; i++)
<a name="l00456"></a>00456         {
<a name="l00457"></a>00457           <span class="keywordflow">for</span> (j=0; j&lt;NN(i); j++)
<a name="l00458"></a>00458             {
<a name="l00459"></a>00459               tmoy(i,j) = tmoy_tot(i,j) / compt_tot(i,j);
<a name="l00460"></a>00460               trms(i,j) = trms_tot(i,j) / compt_tot(i,j);
<a name="l00461"></a>00461               uptp(i,j) = uptp_tot(i,j) / compt_tot(i,j);
<a name="l00462"></a>00462               vptp(i,j) = vptp_tot(i,j) / compt_tot(i,j);
<a name="l00463"></a>00463               wptp(i,j) = wptp_tot(i,j) / compt_tot(i,j);
<a name="l00464"></a>00464               u_moy_cent(i,j) = u_moy_cent_tot(i,j) / compt_tot(i,j);
<a name="l00465"></a>00465               v_moy_cent(i,j) = v_moy_cent_tot(i,j) / compt_tot(i,j);
<a name="l00466"></a>00466               w_moy_cent(i,j) = w_moy_cent_tot(i,j) / compt_tot(i,j);
<a name="l00467"></a>00467 
<a name="l00468"></a>00468               trms(i,j) -= tmoy(i,j)*tmoy(i,j);
<a name="l00469"></a>00469               uptp(i,j) -= u_moy_cent(i,j)*tmoy(i,j);
<a name="l00470"></a>00470               vptp(i,j) -= v_moy_cent(i,j)*tmoy(i,j);
<a name="l00471"></a>00471               wptp(i,j) -= w_moy_cent(i,j)*tmoy(i,j);
<a name="l00472"></a>00472             }
<a name="l00473"></a>00473         }<span class="comment">//!&lt; Fin boucle sur les profils</span>
<a name="l00474"></a>00474 <span class="comment"></span>
<a name="l00475"></a>00475     }<span class="comment">//!&lt; FIN Parallele</span>
<a name="l00476"></a>00476 <span class="comment"></span>
<a name="l00477"></a>00477 }
<a name="l00478"></a>00478 
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 
<a name="l00481"></a>00481 <span class="comment">// #################### Calcul Integrale Temporelle ###############################</span>
<a name="l00482"></a>00482 
<a name="l00483"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a84eb2bcb52d15d615d903ca708d7e648">00483</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a84eb2bcb52d15d615d903ca708d7e648">Traitement_particulier_NS_Profils_thermo_VDF::calculer_integrales_temporelles</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; moy_temp, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; moy_spat_m, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; moy_spat_p, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; delta_m, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; delta_p)
<a name="l00484"></a>00484 {
<a name="l00485"></a>00485   <span class="keywordtype">int</span> i,j;
<a name="l00486"></a>00486   <span class="keywordtype">double</span> dt_v = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;schema_temps().pas_de_temps();
<a name="l00487"></a>00487   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> moy(moy_temp);
<a name="l00488"></a>00488   <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>; i++)
<a name="l00489"></a>00489     {
<a name="l00490"></a>00490       <span class="keywordflow">for</span>(j=0; j&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>; j++)
<a name="l00491"></a>00491         {
<a name="l00492"></a>00492           moy(i,j)=moy_spat_m(i,j)*delta_m(i)/(delta_m(i)+delta_p(i));
<a name="l00493"></a>00493           moy(i,j)+=moy_spat_p(i,j)*delta_p(i)/(delta_m(i)+delta_p(i));
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00497"></a>00497 <span class="comment">//</span>
<a name="l00498"></a>00498     moy_temp.<a class="code" href="classDoubleVect.html#a87fba260b7a2a4a051d7a591d19ac11d" title="x+=alpha*y sans echange_espace_virtuel">ajoute_sans_ech_esp_virt</a>(dt_v,moy);
<a name="l00499"></a>00499 
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 
<a name="l00506"></a>00506 <span class="comment">// #################### Ecriture Moyennes Spatiales dans Fichier ##################</span>
<a name="l00507"></a>00507 
<a name="l00508"></a>00508 
<a name="l00509"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a513659df67a82d461ea505202aa1476f">00509</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a513659df67a82d461ea505202aa1476f">Traitement_particulier_NS_Profils_thermo_VDF::ecriture_fichier_moy_spat_thermo</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Tmoy_m, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Trms_m, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; upTp_m, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vpTp_m, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; wpTp_m, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Tmoy_p, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Trms_p, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; upTp_p, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vpTp_p, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; wpTp_p, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Y, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; NN, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; delta_m,  <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; delta_p)
<a name="l00510"></a>00510 {
<a name="l00511"></a>00511 
<a name="l00512"></a>00512   <span class="keywordtype">int</span> i,j;
<a name="l00513"></a>00513   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00514"></a>00514   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> temps = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(tps);
<a name="l00515"></a>00515 
<a name="l00516"></a>00516   <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>; i++)
<a name="l00517"></a>00517     {
<a name="l00518"></a>00518       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fic = <span class="stringliteral">&quot;./Space_Avg/Avg_temp_&quot;</span>;
<a name="l00519"></a>00519       <span class="keywordflow">switch</span>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9ab99e33e46dfcd270fd65f52d443d4d">dir_profil</a>)
<a name="l00520"></a>00520         {
<a name="l00521"></a>00521         <span class="keywordflow">case</span> 0:
<a name="l00522"></a>00522           {
<a name="l00523"></a>00523             nom_fic +=<span class="stringliteral">&quot;X_&quot;</span>;
<a name="l00524"></a>00524             <span class="keywordflow">break</span>;
<a name="l00525"></a>00525           }
<a name="l00526"></a>00526         <span class="keywordflow">case</span> 1:
<a name="l00527"></a>00527           {
<a name="l00528"></a>00528             nom_fic +=<span class="stringliteral">&quot;Y_&quot;</span>;
<a name="l00529"></a>00529             <span class="keywordflow">break</span>;
<a name="l00530"></a>00530           }
<a name="l00531"></a>00531         <span class="keywordflow">case</span> 2:
<a name="l00532"></a>00532           {
<a name="l00533"></a>00533             nom_fic +=<span class="stringliteral">&quot;Z_&quot;</span>;
<a name="l00534"></a>00534             <span class="keywordflow">break</span>;
<a name="l00535"></a>00535           }
<a name="l00536"></a>00536         }
<a name="l00537"></a>00537       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> pos  = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a721fdafae38fb58fdb8a6abaab3a2e85">positions</a>(i));
<a name="l00538"></a>00538       nom_fic += pos;
<a name="l00539"></a>00539       nom_fic += <span class="stringliteral">&quot;_t_&quot;</span>;
<a name="l00540"></a>00540       nom_fic += temps;
<a name="l00541"></a>00541       nom_fic += <span class="stringliteral">&quot;.dat&quot;</span>;
<a name="l00542"></a>00542 
<a name="l00543"></a>00543       <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00544"></a>00544         {
<a name="l00545"></a>00545           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (nom_fic);
<a name="l00546"></a>00546           fic &lt;&lt; <span class="stringliteral">&quot;# Space Averaged Statistics&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00547"></a>00547           fic &lt;&lt; <span class="stringliteral">&quot;# Y       &lt;T&gt;       Trms       &lt;upTp&gt;       -&lt;vpTp&gt;       -&lt;wpTp&gt;&quot;</span> &lt;&lt; finl ;
<a name="l00548"></a>00548 
<a name="l00549"></a>00549           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> Tmoy(Tmoy_m);
<a name="l00550"></a>00550           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> Trms(Trms_m);
<a name="l00551"></a>00551           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> upTp(upTp_m);
<a name="l00552"></a>00552           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> vpTp(vpTp_m);
<a name="l00553"></a>00553           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> wpTp(wpTp_m);
<a name="l00554"></a>00554 
<a name="l00555"></a>00555           <span class="keywordflow">for</span>(j=0; j&lt;NN(i); j++)
<a name="l00556"></a>00556             {
<a name="l00557"></a>00557               Tmoy(i,j)=Tmoy_m(i,j)*delta_m(i)/(delta_m(i)+delta_p(i));
<a name="l00558"></a>00558               Tmoy(i,j)+=Tmoy_p(i,j)*delta_p(i)/(delta_m(i)+delta_p(i));
<a name="l00559"></a>00559               Trms(i,j)=Trms_m(i,j)*delta_m(i)/(delta_m(i)+delta_p(i));
<a name="l00560"></a>00560               Trms(i,j)+=Trms_p(i,j)*delta_p(i)/(delta_m(i)+delta_p(i));
<a name="l00561"></a>00561               upTp(i,j)=upTp_m(i,j)*delta_m(i)/(delta_m(i)+delta_p(i));
<a name="l00562"></a>00562               upTp(i,j)+=upTp_p(i,j)*delta_p(i)/(delta_m(i)+delta_p(i));
<a name="l00563"></a>00563               vpTp(i,j)=vpTp_m(i,j)*delta_m(i)/(delta_m(i)+delta_p(i));
<a name="l00564"></a>00564               vpTp(i,j)+=vpTp_p(i,j)*delta_p(i)/(delta_m(i)+delta_p(i));
<a name="l00565"></a>00565               wpTp(i,j)=wpTp_m(i,j)*delta_m(i)/(delta_m(i)+delta_p(i));
<a name="l00566"></a>00566               wpTp(i,j)+=wpTp_p(i,j)*delta_p(i)/(delta_m(i)+delta_p(i));
<a name="l00567"></a>00567             }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569           <span class="keywordflow">for</span> (j=0; j&lt;NN(i); j++)
<a name="l00570"></a>00570             fic &lt;&lt; Y(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Tmoy(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(Trms(i,j),0)) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; upTp(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; -vpTp(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; -wpTp(i,j) &lt;&lt; finl;
<a name="l00571"></a>00571           fic.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00572"></a>00572           fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l00573"></a>00573         } <span class="comment">//Fin du si je suis maitre</span>
<a name="l00574"></a>00574     }<span class="comment">//FIN de boucle sur les probes</span>
<a name="l00575"></a>00575 }
<a name="l00576"></a>00576 
<a name="l00577"></a>00577 
<a name="l00578"></a>00578 
<a name="l00579"></a>00579 
<a name="l00580"></a>00580 
<a name="l00581"></a>00581 <span class="comment">// #################### Ecriture Moyennes temporelles dans Fichier ################</span>
<a name="l00582"></a>00582 
<a name="l00583"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aaf215f317f00bd72ef5a9955641573cb">00583</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aaf215f317f00bd72ef5a9955641573cb">Traitement_particulier_NS_Profils_thermo_VDF::ecriture_fichier_moy_temp_thermo</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Tmoy, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Trms, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; upTp, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vpTp, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; wpTp, <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; Y, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; NN)
<a name="l00584"></a>00584 {
<a name="l00585"></a>00585 
<a name="l00586"></a>00586   <span class="keywordtype">int</span> i,j;
<a name="l00587"></a>00587   <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>; i++)
<a name="l00588"></a>00588     {
<a name="l00589"></a>00589       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fic = <span class="stringliteral">&quot;./Time_Avg/Avg_time_temp_&quot;</span>;
<a name="l00590"></a>00590       <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00591"></a>00591 
<a name="l00592"></a>00592       <span class="keywordflow">switch</span>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9ab99e33e46dfcd270fd65f52d443d4d">dir_profil</a>)
<a name="l00593"></a>00593         {
<a name="l00594"></a>00594         <span class="keywordflow">case</span> 0:
<a name="l00595"></a>00595           {
<a name="l00596"></a>00596             nom_fic +=<span class="stringliteral">&quot;X_&quot;</span>;
<a name="l00597"></a>00597             <span class="keywordflow">break</span>;
<a name="l00598"></a>00598           }
<a name="l00599"></a>00599         <span class="keywordflow">case</span> 1:
<a name="l00600"></a>00600           {
<a name="l00601"></a>00601             nom_fic +=<span class="stringliteral">&quot;Y_&quot;</span>;
<a name="l00602"></a>00602             <span class="keywordflow">break</span>;
<a name="l00603"></a>00603           }
<a name="l00604"></a>00604         <span class="keywordflow">case</span> 2:
<a name="l00605"></a>00605           {
<a name="l00606"></a>00606             nom_fic +=<span class="stringliteral">&quot;Z_&quot;</span>;
<a name="l00607"></a>00607             <span class="keywordflow">break</span>;
<a name="l00608"></a>00608           }
<a name="l00609"></a>00609         }
<a name="l00610"></a>00610       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> pos  = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a721fdafae38fb58fdb8a6abaab3a2e85">positions</a>(i));
<a name="l00611"></a>00611       nom_fic += pos;
<a name="l00612"></a>00612       nom_fic +=<span class="stringliteral">&quot;_t_&quot;</span>;
<a name="l00613"></a>00613 
<a name="l00614"></a>00614       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> temps = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(tps);
<a name="l00615"></a>00615       nom_fic+= temps;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617       nom_fic+=<span class="stringliteral">&quot;.dat&quot;</span>;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619       <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00620"></a>00620         {
<a name="l00621"></a>00621           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (nom_fic);
<a name="l00622"></a>00622           fic &lt;&lt; <span class="stringliteral">&quot;# Time Averaged Statistics&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> ;
<a name="l00623"></a>00623           fic &lt;&lt; <span class="stringliteral">&quot;# Y       &lt;T&gt;       Trms       &lt;upTp&gt;       -&lt;vpTp&gt;       -&lt;wpTp&gt;&quot;</span> &lt;&lt; finl ;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625 
<a name="l00626"></a>00626           <span class="keywordflow">for</span> (j=0; j&lt;NN(i)  ; j++)
<a name="l00627"></a>00627             fic &lt;&lt; Y(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; Tmoy(i,j)/dt &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; sqrt(<a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>(Trms(i,j)/dt,0)) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; upTp(i,j)/dt &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; -vpTp(i,j)/dt &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; -wpTp(i,j)/dt &lt;&lt; finl;
<a name="l00628"></a>00628           fic.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00629"></a>00629           fic.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l00630"></a>00630         }
<a name="l00631"></a>00631     }<span class="comment">//FIN boucle sur les probes</span>
<a name="l00632"></a>00632 }
<a name="l00633"></a>00633 
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 
<a name="l00636"></a>00636 
<a name="l00637"></a>00637 
<a name="l00638"></a>00638 <span class="comment">// #################### Sauvegarde des statistiques temporelles ###################</span>
<a name="l00639"></a>00639 
<a name="l00640"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a48ad07315394bf8eb3b8ae22ace0a535">00640</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a48ad07315394bf8eb3b8ae22ace0a535">Traitement_particulier_NS_Profils_thermo_VDF::sauver_stat</a>()<span class="keyword"> const</span>
<a name="l00641"></a>00641 <span class="keyword"></span>{
<a name="l00642"></a>00642 
<a name="l00643"></a>00643   <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a48ad07315394bf8eb3b8ae22ace0a535">Traitement_particulier_NS_Profils::sauver_stat</a>();
<a name="l00644"></a>00644   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00645"></a>00645 
<a name="l00646"></a>00646   <span class="keywordflow">if</span> (  (<a class="code" href="classTraitement__particulier__NS__Profils.html#a83b6b78bbef51f861a4e8fca3244e894">oui_stat</a> == 1)&amp;&amp;(tps&gt;=<a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a>)&amp;&amp;(tps&lt;=<a class="code" href="classTraitement__particulier__NS__Profils.html#a8758265d6dcac211f89144a30974457d">temps_fin</a>) )
<a name="l00647"></a>00647     {
<a name="l00648"></a>00648       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;In Traitement_particulier_NS_Profils_thermo_VDF::sauver_stat&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00649"></a>00649 <span class="comment">// On sauve la somme (sans diviser par dt)</span>
<a name="l00650"></a>00650       <span class="keywordtype">int</span> i,j;
<a name="l00651"></a>00651       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> temps = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(tps);
<a name="l00652"></a>00652       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> fich_sauv_temp =<span class="stringliteral">&quot;temperature_field_avg_time_&quot;</span>;
<a name="l00653"></a>00653       fich_sauv_temp+=temps;
<a name="l00654"></a>00654       fich_sauv_temp+=<span class="stringliteral">&quot;.sauv&quot;</span>;
<a name="l00655"></a>00655 
<a name="l00656"></a>00656 <span class="comment">// On sauve u_moy!!</span>
<a name="l00657"></a>00657       <a class="code" href="classEcrFicCollecteBin.html" title="Ecriture dans un fichier au format binaire Cette classe implemente les operateurs et les methodes vir...">EcrFicCollecteBin</a> fict (fich_sauv_temp);
<a name="l00658"></a>00658       fict &lt;&lt; temps &lt;&lt; finl;
<a name="l00659"></a>00659       <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>; i++)
<a name="l00660"></a>00660         {
<a name="l00661"></a>00661           fict &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils.html#a7fadf8cc84f903e8ea38d3e8d212d3fe">Nuv</a>(i) &lt;&lt; finl;
<a name="l00662"></a>00662           <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a7fadf8cc84f903e8ea38d3e8d212d3fe">Nuv</a>(i); j++)
<a name="l00663"></a>00663             {
<a name="l00664"></a>00664               fict &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ade8751649e97f17800a76475ec663f93">Tmoy_temp</a>(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l00665"></a>00665               fict &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae38f377ff0ced0a45b39c647f36f1c6a">Trms_temp</a>(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l00666"></a>00666               fict &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aac4c4bc11d132b2ad81fa169eeceb846">upTp_temp</a>(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l00667"></a>00667               fict &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a76411aa09a7bb18cc76390c420857c19">vpTp_temp</a>(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l00668"></a>00668               fict &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae48773f775f1b7fedefcb835fe4c702b">wpTp_temp</a>(i,j) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; finl;
<a name="l00669"></a>00669             }
<a name="l00670"></a>00670         }
<a name="l00671"></a>00671       fict &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a> &lt;&lt; finl;
<a name="l00672"></a>00672       fict.<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00673"></a>00673       fict.<a class="code" href="classSortie__Fichier__base.html#ac246a47c4438e3183322c20db2a3323c">close</a>();
<a name="l00674"></a>00674       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Temperature statistics saved at t=&quot;</span> &lt;&lt; tps &lt;&lt; finl;
<a name="l00675"></a>00675     }
<a name="l00676"></a>00676 }
<a name="l00677"></a>00677 
<a name="l00678"></a>00678 
<a name="l00679"></a>00679 
<a name="l00680"></a>00680 
<a name="l00681"></a>00681 
<a name="l00682"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#adc2851b8117e65a90d089bb0c5099cf9">00682</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#adc2851b8117e65a90d089bb0c5099cf9">Traitement_particulier_NS_Profils_thermo_VDF::reprendre_stat</a>()
<a name="l00683"></a>00683 {
<a name="l00684"></a>00684   <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#adc2851b8117e65a90d089bb0c5099cf9">Traitement_particulier_NS_Profils::reprendre_stat</a>();
<a name="l00685"></a>00685   <span class="keywordtype">double</span> tps = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().temps();
<a name="l00686"></a>00686   <span class="keywordtype">int</span> i,j;
<a name="l00687"></a>00687   <span class="keywordtype">double</span> ti;
<a name="l00688"></a>00688 <span class="comment">// double ti2;</span>
<a name="l00689"></a>00689   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> temps;
<a name="l00690"></a>00690   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__Profils.html#a83b6b78bbef51f861a4e8fca3244e894">oui_stat</a> == 1)
<a name="l00691"></a>00691     {
<a name="l00692"></a>00692       ifstream fict(<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aeb1860a98f3de6537182fe035a629763">fich_repr_stats_thermo</a>);
<a name="l00693"></a>00693       <span class="keywordflow">if</span> (fict)
<a name="l00694"></a>00694         {
<a name="l00695"></a>00695           <a class="code" href="classLecFicDistribueBin.html" title="Lecture dans un fichier au format binaire. Cette classe implemente les operateurs et les methodes vir...">LecFicDistribueBin</a> fict2 (<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aeb1860a98f3de6537182fe035a629763">fich_repr_stats_thermo</a>);
<a name="l00696"></a>00696           fict2 &gt;&gt; temps;
<a name="l00697"></a>00697           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ade8751649e97f17800a76475ec663f93">Tmoy_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00698"></a>00698           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae38f377ff0ced0a45b39c647f36f1c6a">Trms_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00699"></a>00699           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aac4c4bc11d132b2ad81fa169eeceb846">upTp_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00700"></a>00700           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a76411aa09a7bb18cc76390c420857c19">vpTp_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00701"></a>00701           <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae48773f775f1b7fedefcb835fe4c702b">wpTp_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00702"></a>00702 
<a name="l00703"></a>00703           <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>; i++)
<a name="l00704"></a>00704             {
<a name="l00705"></a>00705               fict2 &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Profils.html#a7fadf8cc84f903e8ea38d3e8d212d3fe">Nuv</a>(i);
<a name="l00706"></a>00706               <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classTraitement__particulier__NS__Profils.html#a7fadf8cc84f903e8ea38d3e8d212d3fe">Nuv</a>(i); j++)
<a name="l00707"></a>00707                 {
<a name="l00708"></a>00708                   fict2 &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ade8751649e97f17800a76475ec663f93">Tmoy_temp</a>(i,j) ;
<a name="l00709"></a>00709                   fict2 &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae38f377ff0ced0a45b39c647f36f1c6a">Trms_temp</a>(i,j);
<a name="l00710"></a>00710                   fict2 &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aac4c4bc11d132b2ad81fa169eeceb846">upTp_temp</a>(i,j) ;
<a name="l00711"></a>00711                   fict2 &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a76411aa09a7bb18cc76390c420857c19">vpTp_temp</a>(i,j) ;
<a name="l00712"></a>00712                   fict2 &gt;&gt; <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae48773f775f1b7fedefcb835fe4c702b">wpTp_temp</a>(i,j) ;
<a name="l00713"></a>00713                 }
<a name="l00714"></a>00714             }
<a name="l00715"></a>00715           fict2 &gt;&gt; ti ;
<a name="l00716"></a>00716           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;ti=&quot;</span> &lt;&lt; ti &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00717"></a>00717           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> chc_ti = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(ti), chc_temps_deb = <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a>);
<a name="l00718"></a>00718           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;chc_ti=&quot;</span> &lt;&lt; chc_ti &lt;&lt; <span class="stringliteral">&quot;   chc_temps_deb=&quot;</span> &lt;&lt; chc_temps_deb &lt;&lt; finl;
<a name="l00719"></a>00719           <span class="keywordflow">if</span> (chc_ti!=chc_temps_deb)
<a name="l00720"></a>00720             {
<a name="l00721"></a>00721               <span class="keywordflow">if</span> (ti &gt; <a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a>)
<a name="l00722"></a>00722                 {
<a name="l00723"></a>00723                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Pb de reprise des stats du champ thermique :&quot;</span> &lt;&lt; finl;
<a name="l00724"></a>00724                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Le temps de debut des stats demande &quot;</span> &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a>  &lt;&lt; finl;
<a name="l00725"></a>00725                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;est inferieur a celui de debut des stats sauvees !&quot;</span> &lt;&lt; ti &lt;&lt; finl;
<a name="l00726"></a>00726                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00727"></a>00727                 }
<a name="l00728"></a>00728               <span class="keywordflow">else</span>
<a name="l00729"></a>00729                 {
<a name="l00730"></a>00730                   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a>&gt;=tps)
<a name="l00731"></a>00731                     {
<a name="l00732"></a>00732                       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On recommence le calcul des stats thermiques a partir de t=&quot;</span> &lt;&lt; <a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a> &lt;&lt; <span class="stringliteral">&quot;s.&quot;</span> &lt;&lt; finl;
<a name="l00733"></a>00733                       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ade8751649e97f17800a76475ec663f93">Tmoy_temp</a> = 0.;
<a name="l00734"></a>00734                       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae38f377ff0ced0a45b39c647f36f1c6a">Trms_temp</a> = 0.;
<a name="l00735"></a>00735                       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aac4c4bc11d132b2ad81fa169eeceb846">upTp_temp</a> = 0.;
<a name="l00736"></a>00736                       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a76411aa09a7bb18cc76390c420857c19">vpTp_temp</a> = 0.;
<a name="l00737"></a>00737                       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae48773f775f1b7fedefcb835fe4c702b">wpTp_temp</a> = 0.;
<a name="l00738"></a>00738                       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a64213911bf728e149ad10c2e81285e63">oui_repr_stats_thermo</a> = 0;
<a name="l00739"></a>00739                     }
<a name="l00740"></a>00740                   <span class="keywordflow">else</span>
<a name="l00741"></a>00741                     {
<a name="l00742"></a>00742                       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On a deja depasse le temps auquel vous voulez commencer les stats thermiques !&quot;</span> &lt;&lt; finl;
<a name="l00743"></a>00743                       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00744"></a>00744                     }
<a name="l00745"></a>00745                 }
<a name="l00746"></a>00746             }
<a name="l00747"></a>00747           <span class="keywordflow">else</span>
<a name="l00748"></a>00748             {
<a name="l00749"></a>00749               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On continue le calcul des stats thermiques, debute a t=&quot;</span> &lt;&lt;  ti &lt;&lt; <span class="stringliteral">&quot;s.&quot;</span> &lt;&lt; finl;
<a name="l00750"></a>00750               <a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a> = ti;
<a name="l00751"></a>00751             }
<a name="l00752"></a>00752         }
<a name="l00753"></a>00753       <span class="keywordflow">else</span>
<a name="l00754"></a>00754         {
<a name="l00755"></a>00755           <span class="keywordflow">if</span> (tps&lt;=<a class="code" href="classTraitement__particulier__NS__Profils.html#a7e970550e4a8a1e8d71aac53bcf30ee6">temps_deb</a>)
<a name="l00756"></a>00756             {
<a name="l00757"></a>00757               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On n a pas encore debute le calcul des stats thermiques.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00758"></a>00758               <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a64213911bf728e149ad10c2e81285e63">oui_repr_stats_thermo</a> = 0;
<a name="l00759"></a>00759             }
<a name="l00760"></a>00760           <span class="keywordflow">else</span>
<a name="l00761"></a>00761             {
<a name="l00762"></a>00762               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Il faut donner le fichier pour reprendre les stats thermiques !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00763"></a>00763               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00764"></a>00764             }
<a name="l00765"></a>00765         }
<a name="l00766"></a>00766     }
<a name="l00767"></a>00767   <span class="keywordflow">else</span>
<a name="l00768"></a>00768     {
<a name="l00769"></a>00769 <span class="comment">// Cerr &lt;&lt; &quot;Pas de calcul des stats commence.&quot; &lt;&lt; finl;</span>
<a name="l00770"></a>00770 <span class="comment">// Cerr &lt;&lt; &quot;Pas de reprise des statistiques thermiques.&quot; &lt;&lt; finl;</span>
<a name="l00771"></a>00771     }
<a name="l00772"></a>00772 }
<a name="l00773"></a>00773 
<a name="l00774"></a>00774 
<a name="l00775"></a>00775 
<a name="l00776"></a>00776 
<a name="l00777"></a>00777 
<a name="l00778"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aafb53b49e89eb7b229a0596be23d8e58">00778</a> <span class="keywordtype">void</span>  <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aafb53b49e89eb7b229a0596be23d8e58">Traitement_particulier_NS_Profils_thermo_VDF::init_calcul_moyenne</a>(<span class="keywordtype">void</span>)
<a name="l00779"></a>00779 {
<a name="l00780"></a>00780   <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aafb53b49e89eb7b229a0596be23d8e58">Traitement_particulier_NS_Profils_VDF::init_calcul_moyenne</a>();
<a name="l00781"></a>00781 }
<a name="l00782"></a>00782 
<a name="l00783"></a>00783 
<a name="l00784"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a26a7ab88eef36bcd7154557cb6cdc99f">00784</a> <span class="keywordtype">void</span>  <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a26a7ab88eef36bcd7154557cb6cdc99f">Traitement_particulier_NS_Profils_thermo_VDF::preparer_calcul_particulier</a>(<span class="keywordtype">void</span>)
<a name="l00785"></a>00785 {
<a name="l00786"></a>00786   <span class="keywordflow">if</span> ((<a class="code" href="classTraitement__particulier__NS__Profils.html#a3e6d6c761f5c4c72849d3e19a56b2986">oui_u_inst</a> != 0)||(<a class="code" href="classTraitement__particulier__NS__Profils.html#acaf9e7d3bc1fde5951c14a8e545d7ef4">oui_profil_nu_t</a> != 0))
<a name="l00787"></a>00787 <span class="comment">// On fait appel uniquement a la methode dans NS_Profils_VDF pour initialiser</span>
<a name="l00788"></a>00788 <span class="comment">// le calcul des moyennes puisque on y fait uniquement la creation des tableaux</span>
<a name="l00789"></a>00789 <span class="comment">// de correspondance et le dimensionnement des grandeurs Yuv et Nuv.</span>
<a name="l00790"></a>00790 
<a name="l00791"></a>00791     <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aafb53b49e89eb7b229a0596be23d8e58">Traitement_particulier_NS_Profils_VDF::init_calcul_moyenne</a>();
<a name="l00792"></a>00792 
<a name="l00793"></a>00793   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__Profils.html#a83b6b78bbef51f861a4e8fca3244e894">oui_stat</a> != 0)
<a name="l00794"></a>00794 <span class="comment">// Par contre, pour debuter le calcul des stats il faut faire un petit traitement</span>
<a name="l00795"></a>00795 <span class="comment">// pour la thermo puisqu&#39;il faut dimensionner les tableaux des moyennes temporelles</span>
<a name="l00796"></a>00796 <span class="comment">// specifiques a la thermo, ainsi que ceux de l&#39;hydraulique classique dans NS_Profils.</span>
<a name="l00797"></a>00797 
<a name="l00798"></a>00798     <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a01885de9bbe31efa541642f5ce0835d2">init_calcul_stats</a>();
<a name="l00799"></a>00799 }
<a name="l00800"></a>00800 
<a name="l00801"></a>00801 
<a name="l00802"></a>00802 
<a name="l00803"></a>00803 
<a name="l00804"></a><a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a01885de9bbe31efa541642f5ce0835d2">00804</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a01885de9bbe31efa541642f5ce0835d2">Traitement_particulier_NS_Profils_thermo_VDF::init_calcul_stats</a>(<span class="keywordtype">void</span>)
<a name="l00805"></a>00805 {
<a name="l00806"></a>00806   <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a01885de9bbe31efa541642f5ce0835d2">Traitement_particulier_NS_Profils::init_calcul_stats</a>();
<a name="l00807"></a>00807 
<a name="l00808"></a>00808   <span class="keywordflow">if</span> (<a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a64213911bf728e149ad10c2e81285e63">oui_repr_stats_thermo</a>!=1)
<a name="l00809"></a>00809     {
<a name="l00810"></a>00810 <span class="comment">// L&#39;utilisateur ne demande pas de reprise, c&#39;est a dire qu&#39;il n&#39;y aura pas de lecture</span>
<a name="l00811"></a>00811 <span class="comment">// dans un fichier et qu&#39;il faut donc dimensionner nos tableaux nous meme pour debuter les statistiques.</span>
<a name="l00812"></a>00812 <span class="comment">// Ces tableaux sont declares dans le Traitement_particulier_NS_Profils_thermo_VDF.h</span>
<a name="l00813"></a>00813 
<a name="l00814"></a>00814       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ade8751649e97f17800a76475ec663f93">Tmoy_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00815"></a>00815       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ade8751649e97f17800a76475ec663f93">Tmoy_temp</a>=0;
<a name="l00816"></a>00816       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae38f377ff0ced0a45b39c647f36f1c6a">Trms_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00817"></a>00817       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae38f377ff0ced0a45b39c647f36f1c6a">Trms_temp</a>=0;
<a name="l00818"></a>00818       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aac4c4bc11d132b2ad81fa169eeceb846">upTp_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00819"></a>00819       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#aac4c4bc11d132b2ad81fa169eeceb846">upTp_temp</a>=0;
<a name="l00820"></a>00820       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a76411aa09a7bb18cc76390c420857c19">vpTp_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00821"></a>00821       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#a76411aa09a7bb18cc76390c420857c19">vpTp_temp</a>=0;
<a name="l00822"></a>00822       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae48773f775f1b7fedefcb835fe4c702b">wpTp_temp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(<a class="code" href="classTraitement__particulier__NS__Profils.html#a9233bce44c39015381692b47d483ee14">n_probes</a>,<a class="code" href="classTraitement__particulier__NS__Profils.html#a9d85258ea8f63fae0c2566ee4ad0db51">Nap</a>);
<a name="l00823"></a>00823       <a class="code" href="classTraitement__particulier__NS__Profils__thermo__VDF.html#ae48773f775f1b7fedefcb835fe4c702b">wpTp_temp</a>=0;
<a name="l00824"></a>00824     }
<a name="l00825"></a>00825 }
<a name="l00826"></a>00826 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:41 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
