<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Champs/Champ_Generique_Interpolation.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Champs/Champ_Generique_Interpolation.cpp</div>  </div>
</div>
<div class="contents">
<a href="Champ__Generique__Interpolation_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Champ_Generique_Interpolation.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Champs</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/29</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Generique__Interpolation_8h.html">Champ_Generique_Interpolation.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Postraitement_8h.html">Postraitement.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Discretisation__base_8h.html">Discretisation_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Synonyme__info_8h.html">Synonyme_info.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Poly__geom__base_8h.html">Poly_geom_base.h</a>&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="Champ__Generique__Interpolation_8cpp.html#a4aefdd194292fd1e3e95ef07e30d3705">00031</a> <a class="code" href="Declare__Inst_8h.html#afcab3f7633508e92f2077d767e19bc60">Implemente_instanciable_sans_constructeur</a>(<a class="code" href="classChamp__Generique__Interpolation.html" title="Un champ generique qui est construit comme une interpolation d&#39;un autre champ generique (interpolatio...">Champ_Generique_Interpolation</a>,<span class="stringliteral">&quot;Interpolation&quot;</span>,<a class="code" href="classChamp__Gen__de__Champs__Gen.html" title="Classe de base des champs generiques ayant comme source d&#39;autres champs generiques L&#39;utilisation des ...">Champ_Gen_de_Champs_Gen</a>);
<a name="l00032"></a>00032 <a class="code" href="Synonyme__info_8h.html#a57e3e6ee466564dbfa5619fb2b33a2c2">Add_synonym</a>(<a class="code" href="classChamp__Generique__Interpolation.html" title="Un champ generique qui est construit comme une interpolation d&#39;un autre champ generique (interpolatio...">Champ_Generique_Interpolation</a>,<span class="stringliteral">&quot;Champ_Post_Interpolation&quot;</span>);
<a name="l00033"></a>00033 <span class="comment"></span>
<a name="l00034"></a>00034 <span class="comment">//! voir reset()</span>
<a name="l00035"></a><a class="code" href="classChamp__Generique__Interpolation.html#adb47f1a0856c310a6add89107bcd5739">00035</a> <span class="comment"></span><a class="code" href="classChamp__Generique__Interpolation.html#adb47f1a0856c310a6add89107bcd5739" title="voir reset()">Champ_Generique_Interpolation::Champ_Generique_Interpolation</a>()
<a name="l00036"></a>00036 {
<a name="l00037"></a>00037 <span class="comment">// valeurs par defaut</span>
<a name="l00038"></a>00038   <a class="code" href="classChamp__Generique__Interpolation.html#a3f8b07440dec0c48169d76625bb58c9c" title="restore la configuration initiale de l&#39;objet localisation non specifiee, source non specifiee...">reset</a>();
<a name="l00039"></a>00039 }
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">// cf Champ_Gen_de_Champs_Gen::readOn</span>
<a name="l00042"></a><a class="code" href="classChamp__Generique__Interpolation.html#aa5bbaef240f2e1a5abcd806c4704ea92">00042</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#aa5bbaef240f2e1a5abcd806c4704ea92" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Champ_Generique_Interpolation::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00043"></a>00043 {
<a name="l00044"></a>00044   <a class="code" href="classChamp__Generique__Interpolation.html#aa5bbaef240f2e1a5abcd806c4704ea92" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Champ_Gen_de_Champs_Gen::readOn</a>(is);
<a name="l00045"></a>00045   <a class="code" href="classChamp__Generique__Interpolation.html#aec41836cb6e4a181199566e3ce754e07" title="Initialisation de la classe: initialisation de la localisation demandee. Parametres valides : elem...">set_localisation</a>(<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>);
<a name="l00046"></a>00046   <a class="code" href="classChamp__Generique__Interpolation.html#abe603e2f6b2e5749eb5dce3b8bcc446e" title="Initialisation de la classe: initialisation de la methode d&#39;interpolation Parametres valides : calcul...">set_methode</a>(<a class="code" href="classChamp__Generique__Interpolation.html#af206f3d750fadc90f5ecbc87dc4584d3" title="calculer_champ_post, etc...">methode_</a>);
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <span class="keywordflow">return</span> is;
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 <span class="comment"></span>
<a name="l00051"></a>00051 <span class="comment">//! appel invalide</span>
<a name="l00052"></a><a class="code" href="classChamp__Generique__Interpolation.html#abaf7c5c6af8336acb608068d06ac1d3b">00052</a> <span class="comment"></span><a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#abaf7c5c6af8336acb608068d06ac1d3b" title="appel invalide">Champ_Generique_Interpolation::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00053"></a>00053 <span class="keyword"></span>{
<a name="l00054"></a>00054   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00055"></a>00055   <span class="keywordflow">return</span> os;
<a name="l00056"></a>00056 }
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="comment">// localisation : localisation de l interpolation (elem ou som)</span>
<a name="l00059"></a>00059 <span class="comment">// domaine          : domaine d interpolation (optionnel)</span>
<a name="l00060"></a>00060 <span class="comment">// methode          : type de methode de calcul &quot;calculer_champ_post&quot; (optionnel, une seule methode disponible)</span>
<a name="l00061"></a><a class="code" href="classChamp__Generique__Interpolation.html#a5c7707c2970a14378746f24bc9f16bf1">00061</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Generique__Interpolation.html#a5c7707c2970a14378746f24bc9f16bf1">Champ_Generique_Interpolation::set_param</a>(<a class="code" href="classParam.html" title="Defined below in this file.">Param</a>&amp; param)
<a name="l00062"></a>00062 {
<a name="l00063"></a>00063 <span class="comment">// XD interpolation champ_post_de_champs_post interpolation -1 To create a field which is an interpolation of the field given by the keyword source.</span>
<a name="l00064"></a>00064   <a class="code" href="classChamp__Generique__Interpolation.html#a5c7707c2970a14378746f24bc9f16bf1">Champ_Gen_de_Champs_Gen::set_param</a>(param);
<a name="l00065"></a>00065   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;localisation&quot;</span>,&amp;<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>); <span class="comment">//!&lt; XD_ADD_P chaine type_loc indicate where is done the interpolation (elem for element or som for node).</span>
<a name="l00066"></a>00066 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;methode&quot;</span>,&amp;<a class="code" href="classChamp__Generique__Interpolation.html#af206f3d750fadc90f5ecbc87dc4584d3" title="calculer_champ_post, etc...">methode_</a>); <span class="comment">//!&lt;  XD_ADD_P chaine The optional keyword methode is limited to calculer_champ_post for the moment.</span>
<a name="l00067"></a>00067 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;domaine&quot;</span>,&amp;<a class="code" href="classChamp__Generique__Interpolation.html#a9df630f505fc3afc7a1be8805a71daa4" title="Nom du domaine lu.">nom_domaine_lu_</a>);  <span class="comment">//!&lt;  XD_ADD_P chaine  the domain name where the interpolation is done (by default, the calculation domain)</span>
<a name="l00068"></a>00068 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;optimisation_sous_maillage&quot;</span>,&amp;<a class="code" href="classChamp__Generique__Interpolation.html#a30c8dba0f49c14ea7430406cc536f8f5">optimisation_demande_</a>); <span class="comment">//!&lt; XD_ADD_P dico not_set</span>
<a name="l00069"></a>00069 <span class="comment"></span>  param.<a class="code" href="classParam.html#a0d5da6b10afd9ae6e7c98f0836fcb3b0" title="Si le dernier parametre ajoute est de type &quot;int&quot;, associe a ce parametre une ou plusieurs chaines de ...">dictionnaire</a>(<span class="stringliteral">&quot;default&quot;</span>,-1); <span class="comment">//!&lt; XD_ADD_DICO not_set</span>
<a name="l00070"></a>00070 <span class="comment"></span>  param.<a class="code" href="classParam.html#a0d5da6b10afd9ae6e7c98f0836fcb3b0" title="Si le dernier parametre ajoute est de type &quot;int&quot;, associe a ce parametre une ou plusieurs chaines de ...">dictionnaire</a>(<span class="stringliteral">&quot;yes&quot;</span>,1);  <span class="comment">//!&lt; XD_ADD_DICO not_set</span>
<a name="l00071"></a>00071 <span class="comment"></span>  param.<a class="code" href="classParam.html#a0d5da6b10afd9ae6e7c98f0836fcb3b0" title="Si le dernier parametre ajoute est de type &quot;int&quot;, associe a ce parametre une ou plusieurs chaines de ...">dictionnaire</a>(<span class="stringliteral">&quot;no&quot;</span>,0); <span class="comment">//!&lt; XD_ADD_DICO not_set</span>
<a name="l00072"></a>00072 <span class="comment"></span>
<a name="l00073"></a>00073 }
<a name="l00074"></a>00074 <span class="comment">//</span><span class="comment"></span>
<a name="l00075"></a>00075 <span class="comment">//! restore la configuration initiale de l&#39;objet&lt;br&gt;localisation non specifiee, source non specifiee, methode=calculer_champ_post, domaine natif</span>
<a name="l00076"></a><a class="code" href="classChamp__Generique__Interpolation.html#a3f8b07440dec0c48169d76625bb58c9c">00076</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classChamp__Generique__Interpolation.html#a3f8b07440dec0c48169d76625bb58c9c" title="restore la configuration initiale de l&#39;objet localisation non specifiee, source non specifiee...">Champ_Generique_Interpolation::reset</a>()
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078   <a class="code" href="classChamp__Generique__Interpolation.html#a9df630f505fc3afc7a1be8805a71daa4" title="Nom du domaine lu.">nom_domaine_lu_</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00079"></a>00079   <a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00080"></a>00080   <a class="code" href="classChamp__Generique__Interpolation.html#af206f3d750fadc90f5ecbc87dc4584d3" title="calculer_champ_post, etc...">methode_</a>      = <span class="stringliteral">&quot;calculer_champ_post&quot;</span>;
<a name="l00081"></a>00081   <a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classRef__.html#aefc8130f02e22c692853dd435cbd1c18" title="Annule la ref.">reset</a>();
<a name="l00082"></a>00082   <a class="code" href="classChamp__Generique__Interpolation.html#a3f8b07440dec0c48169d76625bb58c9c" title="restore la configuration initiale de l&#39;objet localisation non specifiee, source non specifiee...">Champ_Gen_de_Champs_Gen::reset</a>();
<a name="l00083"></a>00083   <a class="code" href="classChamp__Generique__Interpolation.html#aa45802e7b1d87d4cf2d22b2d53ce268a">optimisation_sous_maillage_</a>=-1;
<a name="l00084"></a>00084   <a class="code" href="classChamp__Generique__Interpolation.html#a30c8dba0f49c14ea7430406cc536f8f5">optimisation_demande_</a>=-1;
<a name="l00085"></a>00085 }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="comment">//</span><span class="comment"></span>
<a name="l00088"></a>00088 <span class="comment">//! Initialisation de la classe: initialisation de la localisation&lt;br&gt;demandee. Parametres valides : elem, som.</span>
<a name="l00089"></a><a class="code" href="classChamp__Generique__Interpolation.html#aec41836cb6e4a181199566e3ce754e07">00089</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classChamp__Generique__Interpolation.html#aec41836cb6e4a181199566e3ce754e07" title="Initialisation de la classe: initialisation de la localisation demandee. Parametres valides : elem...">Champ_Generique_Interpolation::set_localisation</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; loc, <span class="keywordtype">int</span> exit_on_error)
<a name="l00090"></a>00090 {
<a name="l00091"></a>00091   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> localisations(3);
<a name="l00092"></a>00092   localisations[0] = <span class="stringliteral">&quot;elem&quot;</span>;
<a name="l00093"></a>00093   localisations[1] = <span class="stringliteral">&quot;som&quot;</span>;
<a name="l00094"></a>00094   localisations[2] = <span class="stringliteral">&quot;faces&quot;</span>;
<a name="l00095"></a>00095   <span class="keywordtype">int</span> ok = 0;
<a name="l00096"></a>00096   <span class="keywordflow">if</span> (localisations.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(loc) &gt;= 0)
<a name="l00097"></a>00097     {
<a name="l00098"></a>00098       <a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a> = loc;
<a name="l00099"></a>00099       ok = 1;
<a name="l00100"></a>00100     }
<a name="l00101"></a>00101   <span class="keywordflow">else</span>
<a name="l00102"></a>00102     {
<a name="l00103"></a>00103       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_Generique_Interpolation::set_localisation\n&quot;</span>
<a name="l00104"></a>00104            &lt;&lt; <span class="stringliteral">&quot; Keyword read : &quot;</span> &lt;&lt; loc &lt;&lt; <span class="stringliteral">&quot;\n The localizations allowed are &quot;</span> &lt;&lt; localisations &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00105"></a>00105       <span class="keywordflow">if</span> (exit_on_error)
<a name="l00106"></a>00106         {
<a name="l00107"></a>00107           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00108"></a>00108         }
<a name="l00109"></a>00109     }
<a name="l00110"></a>00110   <span class="keywordflow">return</span> ok;
<a name="l00111"></a>00111 }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="comment">//</span>
<a name="l00114"></a>00114 <span class="comment">//</span><span class="comment"></span>
<a name="l00115"></a>00115 <span class="comment">//! Initialisation de la classe: initialisation de la methode d&#39;interpolation&lt;br&gt;Parametres valides : calculer_champ_post&lt;br&gt;(Idees pour la suite: affecter, affecter avec integrale...)</span>
<a name="l00116"></a><a class="code" href="classChamp__Generique__Interpolation.html#abe603e2f6b2e5749eb5dce3b8bcc446e">00116</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classChamp__Generique__Interpolation.html#abe603e2f6b2e5749eb5dce3b8bcc446e" title="Initialisation de la classe: initialisation de la methode d&#39;interpolation Parametres valides : calcul...">Champ_Generique_Interpolation::set_methode</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; methode, <span class="keywordtype">int</span> exit_on_error)
<a name="l00117"></a>00117 {
<a name="l00118"></a>00118   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> methodes_interpolation(1);
<a name="l00119"></a>00119   methodes_interpolation[0] = <span class="stringliteral">&quot;calculer_champ_post&quot;</span>;
<a name="l00120"></a>00120   <span class="keywordtype">int</span> ok = 0;
<a name="l00121"></a>00121   <span class="keywordflow">if</span> (methodes_interpolation.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(methode) &gt;= 0)
<a name="l00122"></a>00122     {
<a name="l00123"></a>00123       <a class="code" href="classChamp__Generique__Interpolation.html#af206f3d750fadc90f5ecbc87dc4584d3" title="calculer_champ_post, etc...">methode_</a> = methode;
<a name="l00124"></a>00124       ok = 1;
<a name="l00125"></a>00125     }
<a name="l00126"></a>00126   <span class="keywordflow">else</span>
<a name="l00127"></a>00127     {
<a name="l00128"></a>00128       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_Generique_Interpolation::set_methode\n&quot;</span>
<a name="l00129"></a>00129            &lt;&lt; <span class="stringliteral">&quot; Keyword read : &quot;</span> &lt;&lt; methode &lt;&lt; <span class="stringliteral">&quot;\n The methods allowed are &quot;</span> &lt;&lt; methodes_interpolation &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00130"></a>00130       <span class="keywordflow">if</span> (exit_on_error)
<a name="l00131"></a>00131         {
<a name="l00132"></a>00132           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00133"></a>00133         }
<a name="l00134"></a>00134     }
<a name="l00135"></a>00135   <span class="keywordflow">return</span> ok;
<a name="l00136"></a>00136 }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="comment">//</span><span class="comment"></span>
<a name="l00139"></a>00139 <span class="comment">//! Initialisation de la classe: initialisation du domaine d&#39;interpolation&lt;br&gt;Parametres valides : &quot;&quot; =&gt; domaine natif, ou le nom d&#39;un objet Domaine connu de l&#39;interprete</span>
<a name="l00140"></a><a class="code" href="classChamp__Generique__Interpolation.html#a5d8c6903c2c523c1ff799c0594407056">00140</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classChamp__Generique__Interpolation.html#a5d8c6903c2c523c1ff799c0594407056" title="Initialisation de la classe: initialisation du domaine d&#39;interpolation Parametres valides : &quot;&quot; =&gt; do...">Champ_Generique_Interpolation::set_domaine</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom_domaine, <span class="keywordtype">int</span> exit_on_error)
<a name="l00141"></a>00141 {
<a name="l00142"></a>00142   <span class="keywordtype">int</span> ok = 0;
<a name="l00143"></a>00143   <span class="keywordflow">if</span> (nom_domaine == <span class="stringliteral">&quot;&quot;</span>)
<a name="l00144"></a>00144     {
<a name="l00145"></a>00145       <a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classRef__.html#aefc8130f02e22c692853dd435cbd1c18" title="Annule la ref.">reset</a>(); <span class="comment">//!&lt; reference nulle =&gt; domaine natif du champ</span>
<a name="l00146"></a>00146 <span class="comment"></span>      ok = 1;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148   <span class="keywordflow">else</span>
<a name="l00149"></a>00149     {
<a name="l00150"></a>00150       <span class="keyword">const</span> <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; ob = <a class="code" href="classObjet__U.html#a9b5c13352a6601b5cec65941575f2e9a">interprete</a>().<a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(nom_domaine);
<a name="l00151"></a>00151       <span class="keywordflow">if</span> (!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, ob))
<a name="l00152"></a>00152         {
<a name="l00153"></a>00153           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_Generique_Interpolation::set_domaine(nom_domaine)\n&quot;</span>
<a name="l00154"></a>00154                &lt;&lt; <span class="stringliteral">&quot; The object &quot;</span> &lt;&lt; nom_domaine &lt;&lt; <span class="stringliteral">&quot; is not a domain&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00155"></a>00155           <span class="keywordflow">if</span> (exit_on_error)
<a name="l00156"></a>00156             {
<a name="l00157"></a>00157               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00158"></a>00158             }
<a name="l00159"></a>00159         }
<a name="l00160"></a>00160       <span class="keywordflow">else</span>
<a name="l00161"></a>00161         {
<a name="l00162"></a>00162           <a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a> = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, ob);
<a name="l00163"></a>00163         }
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165   <span class="keywordflow">return</span> ok;
<a name="l00166"></a>00166 }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="comment">// Precondition: localisation et source_[0] sont initialises</span>
<a name="l00169"></a>00169 <span class="comment">//</span><span class="comment"></span>
<a name="l00170"></a>00170 <span class="comment">//! Interpolation du champ source en fonction de la methode, localisation et&lt;br&gt;domaine demandes.</span>
<a name="l00171"></a><a class="code" href="classChamp__Generique__Interpolation.html#afc2e85348f43fceee3eb132c51bbdfe3">00171</a> <span class="comment"></span><span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#afc2e85348f43fceee3eb132c51bbdfe3" title="Interpolation du champ source en fonction de la methode, localisation et domaine demandes.">Champ_Generique_Interpolation::get_champ</a>(<a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a>&amp; espace_stockage)<span class="keyword"> const</span>
<a name="l00172"></a>00172 <span class="keyword"></span>{
<a name="l00173"></a>00173   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a> == <span class="stringliteral">&quot;&quot;</span>)
<a name="l00174"></a>00174     {
<a name="l00175"></a>00175       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_Generique_Interpolation::get_champ()\n&quot;</span>
<a name="l00176"></a>00176            &lt;&lt; <span class="stringliteral">&quot; Localisation has not been initialized&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00177"></a>00177       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#af206f3d750fadc90f5ecbc87dc4584d3" title="calculer_champ_post, etc...">methode_</a> == <span class="stringliteral">&quot;calculer_champ_post&quot;</span>)
<a name="l00181"></a>00181     {
<a name="l00182"></a>00182       <a class="code" href="classChamp__Generique__Interpolation.html#a5bcc3105ce20ab79cd16fcb51fa4fbc7" title="Interpolation du champ source a l&#39;aide de Champ_base::calculer_champ_xxx_post.">get_champ_with_calculer_champ_post</a>(espace_stockage);
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184   <span class="keywordflow">else</span>
<a name="l00185"></a>00185     {
<a name="l00186"></a>00186       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Champ_Generique_Interpolation::get_champ : methode &quot;</span> &lt;&lt; <a class="code" href="classChamp__Generique__Interpolation.html#af206f3d750fadc90f5ecbc87dc4584d3" title="calculer_champ_post, etc...">methode_</a> &lt;&lt; <span class="stringliteral">&quot; uncoded&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00187"></a>00187       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190   <span class="keywordflow">return</span> espace_stockage.<a class="code" href="classDeriv__Champ__base.html#a294750f8ed9550d00377fa6eb31ce67f">valeur</a>();
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00193"></a><a class="code" href="classChamp__Generique__Interpolation.html#aaa98969119352d403e34d22d392d147b">00193</a> <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#aaa98969119352d403e34d22d392d147b">Champ_Generique_Interpolation::get_champ_without_evaluation</a>(<a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a>&amp; espace_stockage)<span class="keyword"> const</span>
<a name="l00194"></a>00194 <span class="keyword"></span>{
<a name="l00195"></a>00195 
<a name="l00196"></a>00196   <a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a> espace_stockage_source;
<a name="l00197"></a>00197   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; source = <a class="code" href="classChamp__Gen__de__Champs__Gen.html#aa0b7717da86103a3b83c66d96f115018">get_source</a>(0).<a class="code" href="classChamp__Generique__base.html#a4de9526413f421f7d03ef6558fc33231">get_champ_without_evaluation</a>(espace_stockage_source);
<a name="l00198"></a>00198 <span class="comment">// Domaine sur lequel on interpole le champ :</span>
<a name="l00199"></a>00199 <span class="comment">// si domaine_ est une ref nulle, on prend le domaine natif du champ.</span>
<a name="l00200"></a>00200 
<a name="l00201"></a>00201   <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> compo = <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;composantes&quot;</span>);
<a name="l00202"></a>00202   <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> nom_champ = <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;nom&quot;</span>);
<a name="l00203"></a>00203   <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> syno = <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;synonyms&quot;</span>);
<a name="l00204"></a>00204 
<a name="l00205"></a>00205   <span class="keywordtype">int</span> ncomp;
<a name="l00206"></a>00206 <span class="comment">// On fixe identifiant_appel_ a nom_champ[0] dans le cas ou il est egal a ??</span>
<a name="l00207"></a>00207   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__base.html#af8f1335251d0b2a5978b70fc54394f6c">identifiant_appel_</a>==<span class="stringliteral">&quot;??&quot;</span>)
<a name="l00208"></a>00208     {
<a name="l00209"></a>00209       ncomp = -1;
<a name="l00210"></a>00210     }
<a name="l00211"></a>00211   <span class="keywordflow">else</span>
<a name="l00212"></a>00212     {
<a name="l00213"></a>00213       ncomp = <a class="code" href="classChamp__Generique__base.html#a2489bebc4ef57531846997e7c755f6b6">Champ_Generique_base::composante</a>(<a class="code" href="classChamp__Generique__base.html#af8f1335251d0b2a5978b70fc54394f6c">identifiant_appel_</a>,nom_champ[0],compo,syno);
<a name="l00214"></a>00214     }
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="comment">// Creation du champ espace_stockage</span>
<a name="l00217"></a>00217   <a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646b" title="This is a base class from which inherit Champ_base and Champ_front_base. It handles all the generic a...">Nature_du_champ</a> nature_source = (ncomp==-1)?source.<a class="code" href="classField__base.html#a75bf4e0a6258589a83801c0383d049cc" title="Renvoie la nature d&#39;un champ (scalaire, multiscalaire, vectoriel).">nature_du_champ</a>():<a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646ba38e43fd39568540207f625e91bfcb6a3">scalaire</a>;
<a name="l00218"></a>00218   nature_source = source.<a class="code" href="classField__base.html#a75bf4e0a6258589a83801c0383d049cc" title="Renvoie la nature d&#39;un champ (scalaire, multiscalaire, vectoriel).">nature_du_champ</a>();
<a name="l00219"></a>00219   <span class="keywordtype">int</span> nb_comp = source.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <a class="code" href="classChamp__Fonc.html" title="classe Champ_Fonc Classe generique de la hierarchie des champs fontions du temps, un objet Champ_Fonc...">Champ_Fonc</a> es_tmp;
<a name="l00222"></a>00222   espace_stockage = <a class="code" href="classChamp__Gen__de__Champs__Gen.html#a771f9104621330d42afb037db0ceab16">creer_espace_stockage</a>(nature_source,nb_comp,es_tmp);
<a name="l00223"></a>00223   <span class="keywordflow">return</span> espace_stockage.<a class="code" href="classDeriv__Champ__base.html#a294750f8ed9550d00377fa6eb31ce67f">valeur</a>();
<a name="l00224"></a>00224 }<span class="comment"></span>
<a name="l00225"></a>00225 <span class="comment">//! Interpolation du champ source a l&#39;aide de Champ_base::calculer_champ_xxx_post</span>
<a name="l00226"></a><a class="code" href="classChamp__Generique__Interpolation.html#a5bcc3105ce20ab79cd16fcb51fa4fbc7">00226</a> <span class="comment"></span><span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#a5bcc3105ce20ab79cd16fcb51fa4fbc7" title="Interpolation du champ source a l&#39;aide de Champ_base::calculer_champ_xxx_post.">Champ_Generique_Interpolation::get_champ_with_calculer_champ_post</a>(<a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a>&amp; espace_stockage)<span class="keyword"> const</span>
<a name="l00227"></a>00227 <span class="keyword"></span>{
<a name="l00228"></a>00228   <a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a> espace_stockage_source;
<a name="l00229"></a>00229   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; source0 = <a class="code" href="classChamp__Gen__de__Champs__Gen.html#aa0b7717da86103a3b83c66d96f115018">get_source</a>(0).<a class="code" href="classChamp__Generique__base.html#a89c71fecd51b71f50702bc2cb270fabd">get_champ</a>(espace_stockage_source);
<a name="l00230"></a>00230   <a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a> source_bis;
<a name="l00231"></a>00231 
<a name="l00232"></a>00232   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#aa45802e7b1d87d4cf2d22b2d53ce268a">optimisation_sous_maillage_</a>==-1)
<a name="l00233"></a>00233     {
<a name="l00234"></a>00234       source_bis=source0;
<a name="l00235"></a>00235 <span class="comment">// source.typer(source0.que_suis_je());</span>
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238   <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; source  = ((<a class="code" href="classChamp__Generique__Interpolation.html#aa45802e7b1d87d4cf2d22b2d53ce268a">optimisation_sous_maillage_</a>==-1)?source_bis.<a class="code" href="classDeriv__Champ__base.html#a294750f8ed9550d00377fa6eb31ce67f">valeur</a>():source0);
<a name="l00239"></a>00239   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_champ_interpole;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 <span class="comment">// Domaine sur lequel on interpole le champ :</span>
<a name="l00242"></a>00242 <span class="comment">// si domaine_ est une ref nulle, on prend le domaine natif du champ.</span>
<a name="l00243"></a>00243   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; domaine = <a class="code" href="classChamp__Generique__Interpolation.html#a9d4943372fe9ce8b9698fff3134ee0f6" title="Renvoie une ref au domaine sur lequel sera evalue l espace de stockage. Par defaut le domaine associe...">get_ref_domain</a>();
<a name="l00244"></a>00244   <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> compo = <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;composantes&quot;</span>);
<a name="l00245"></a>00245   <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> nom_champ = <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;nom&quot;</span>);
<a name="l00246"></a>00246   <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> syno = <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;synonyms&quot;</span>);
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   <span class="keywordtype">int</span> ncomp;
<a name="l00249"></a>00249 <span class="comment">// On fixe identifiant_appel_ a nom_champ[0] dans le cas ou il est egal a ??</span>
<a name="l00250"></a>00250   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__base.html#af8f1335251d0b2a5978b70fc54394f6c">identifiant_appel_</a>==<span class="stringliteral">&quot;??&quot;</span>)
<a name="l00251"></a>00251     {
<a name="l00252"></a>00252       ncomp = -1;
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254   <span class="keywordflow">else</span>
<a name="l00255"></a>00255     {
<a name="l00256"></a>00256       ncomp = <a class="code" href="classChamp__Generique__base.html#a2489bebc4ef57531846997e7c755f6b6">Champ_Generique_base::composante</a>(<a class="code" href="classChamp__Generique__base.html#af8f1335251d0b2a5978b70fc54394f6c">identifiant_appel_</a>,nom_champ[0],compo,syno);
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="comment">// Creation du champ espace_stockage</span>
<a name="l00260"></a>00260   <a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646b" title="This is a base class from which inherit Champ_base and Champ_front_base. It handles all the generic a...">Nature_du_champ</a> nature_source = (ncomp==-1)?source.<a class="code" href="classField__base.html#a75bf4e0a6258589a83801c0383d049cc" title="Renvoie la nature d&#39;un champ (scalaire, multiscalaire, vectoriel).">nature_du_champ</a>():<a class="code" href="Field__base_8h.html#a1b86c8f670a9b34da7f628a821fb646ba38e43fd39568540207f625e91bfcb6a3">scalaire</a>;
<a name="l00261"></a>00261   nature_source = source.<a class="code" href="classField__base.html#a75bf4e0a6258589a83801c0383d049cc" title="Renvoie la nature d&#39;un champ (scalaire, multiscalaire, vectoriel).">nature_du_champ</a>();
<a name="l00262"></a>00262   <span class="keywordtype">int</span> nb_comp = source.<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>();
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <a class="code" href="classChamp__Fonc.html" title="classe Champ_Fonc Classe generique de la hierarchie des champs fontions du temps, un objet Champ_Fonc...">Champ_Fonc</a> es_tmp;
<a name="l00265"></a>00265   espace_stockage = <a class="code" href="classChamp__Gen__de__Champs__Gen.html#a771f9104621330d42afb037db0ceab16">creer_espace_stockage</a>(nature_source,nb_comp,es_tmp);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 <span class="comment">// double default_value=-1e35;</span>
<a name="l00268"></a>00268 <span class="comment">// espace_stockage.valeurs()=default_value;</span>
<a name="l00269"></a>00269   <span class="keywordtype">int</span> decal=10;
<a name="l00270"></a>00270   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#aa45802e7b1d87d4cf2d22b2d53ce268a">optimisation_sous_maillage_</a>==-1)
<a name="l00271"></a>00271     {
<a name="l00272"></a>00272       espace_stockage.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>()=0;
<a name="l00273"></a>00273 <span class="comment">// premier appel avec maillage different (ou on a force) , on essaye de voir si on peut optimiser</span>
<a name="l00274"></a>00274 <span class="comment">// on champ la source on y met val(i)=i, pour recuperer le numero de la maille apres</span>
<a name="l00275"></a>00275       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val=source_bis.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>();
<a name="l00276"></a>00276 
<a name="l00277"></a>00277       <span class="keywordtype">int</span> dim0 = val.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0);
<a name="l00278"></a>00278       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;dim0; i++)
<a name="l00279"></a>00279         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nb_comp; j++)
<a name="l00280"></a>00280           val(i,j) = i+decal;
<a name="l00281"></a>00281     }
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="comment">// Evaluation des valeurs du champ espace_stockage</span>
<a name="l00284"></a>00284   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; espace_valeurs = espace_stockage-&gt;<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>();
<a name="l00285"></a>00285 
<a name="l00286"></a>00286   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#aa45802e7b1d87d4cf2d22b2d53ce268a">optimisation_sous_maillage_</a>==1)
<a name="l00287"></a>00287     {
<a name="l00288"></a>00288       <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_temp= source.<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00289"></a>00289       <span class="keywordtype">int</span> dim0 = espace_valeurs.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00290"></a>00290       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;dim0; i++)
<a name="l00291"></a>00291         <span class="keywordflow">if</span> (ncomp==-1) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nb_comp; j++)
<a name="l00292"></a>00292             {
<a name="l00293"></a>00293               <span class="keywordtype">int</span> n=<a class="code" href="classChamp__Generique__Interpolation.html#a90dcf77796d5850bbdc81522846d890d">renumerotation_maillage_</a>[i];
<a name="l00294"></a>00294               <span class="keywordflow">if</span> (n&gt;=0)
<a name="l00295"></a>00295                 espace_valeurs(i,j) = val_temp(n,j);
<a name="l00296"></a>00296             }
<a name="l00297"></a>00297         <span class="keywordflow">else</span> espace_valeurs(i, ncomp) = val_temp(<a class="code" href="classChamp__Generique__Interpolation.html#a90dcf77796d5850bbdc81522846d890d">renumerotation_maillage_</a>[i]);
<a name="l00298"></a>00298 
<a name="l00299"></a>00299       espace_valeurs.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00300"></a>00300       <span class="keywordflow">return</span> espace_stockage.<a class="code" href="classDeriv__Champ__base.html#a294750f8ed9550d00377fa6eb31ce67f">valeur</a>();
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302 
<a name="l00303"></a>00303   <span class="keywordtype">int</span> imax=0;
<a name="l00304"></a>00304 <span class="comment">// int jmax=0;;</span>
<a name="l00305"></a>00305   imax = espace_valeurs.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00306"></a>00306 <span class="comment">// if (espace_valeurs.nb_dim()==2)</span>
<a name="l00307"></a>00307 <span class="comment">// jmax = espace_valeurs.dimension(1);</span>
<a name="l00308"></a>00308 
<a name="l00309"></a>00309   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a> == <span class="stringliteral">&quot;elem&quot;</span>)
<a name="l00310"></a>00310     {
<a name="l00311"></a>00311       <span class="keyword">const</span> <span class="keywordtype">int</span> nb_elements = domaine.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00312"></a>00312 
<a name="l00313"></a>00313       <span class="keywordflow">if</span> (ncomp==-1)
<a name="l00314"></a>00314         {
<a name="l00315"></a>00315           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> val_temp;
<a name="l00316"></a>00316           source.<a class="code" href="classChamp__base.html#a3f3fda30bcccaf34dd37af8ab73cda29">calculer_valeurs_elem_post</a>(val_temp,
<a name="l00317"></a>00317                                             nb_elements,
<a name="l00318"></a>00318                                             nom_champ_interpole,
<a name="l00319"></a>00319                                             domaine);
<a name="l00320"></a>00320 
<a name="l00321"></a>00321           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i_val=0; i_val&lt;imax; i_val++)
<a name="l00322"></a>00322             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j_val=0; j_val&lt;nb_comp; j_val++)
<a name="l00323"></a>00323               espace_valeurs(i_val,j_val) = val_temp(i_val,j_val);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325         }
<a name="l00326"></a>00326       <span class="keywordflow">else</span>
<a name="l00327"></a>00327 <span class="comment">// On construit un tableau de valeurs a nb_comp composantes meme si ncomp!=-1</span>
<a name="l00328"></a>00328         {
<a name="l00329"></a>00329           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> val_temp;
<a name="l00330"></a>00330           source.<a class="code" href="classChamp__base.html#adde92dea68bfb503462f616ba525490c">calculer_valeurs_elem_compo_post</a>(val_temp,
<a name="l00331"></a>00331                                                   ncomp,
<a name="l00332"></a>00332                                                   nb_elements,
<a name="l00333"></a>00333                                                   nom_champ_interpole,
<a name="l00334"></a>00334                                                   domaine);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336           <span class="keywordtype">int</span> dim0 = val_temp.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00337"></a>00337           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;dim0; i++)
<a name="l00338"></a>00338             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nb_comp; j++)
<a name="l00339"></a>00339               <span class="keywordflow">if</span> (j==ncomp)
<a name="l00340"></a>00340                 espace_valeurs(i,j) = val_temp(i);
<a name="l00341"></a>00341         }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     }
<a name="l00344"></a>00344   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>==<span class="stringliteral">&quot;som&quot;</span>)
<a name="l00345"></a>00345     {
<a name="l00346"></a>00346       <span class="keyword">const</span> <span class="keywordtype">int</span> nb_sommets = domaine.<a class="code" href="classDomaine.html#abc4abc8b8db5bebeb161fae4162a89ce" title="Renvoie le nombre de sommets.">nb_som</a>();
<a name="l00347"></a>00347 <span class="comment">// PL: mise a jour de l&#39;espace virtuel de la source:</span>
<a name="l00348"></a>00348       <a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a> copie_source;
<a name="l00349"></a>00349       copie_source = source;
<a name="l00350"></a>00350       copie_source.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>().<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00351"></a>00351       <span class="keywordflow">if</span> (ncomp==-1)
<a name="l00352"></a>00352         {
<a name="l00353"></a>00353           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> val_temp;
<a name="l00354"></a>00354           copie_source.<a class="code" href="classDeriv__Champ__base.html#a294750f8ed9550d00377fa6eb31ce67f">valeur</a>().<a class="code" href="classChamp__base.html#ad36516accabe5cdaa2c9defda94a09c0">calculer_valeurs_som_post</a>(val_temp,
<a name="l00355"></a>00355                                                           nb_sommets,
<a name="l00356"></a>00356                                                           nom_champ_interpole,
<a name="l00357"></a>00357                                                           domaine);
<a name="l00358"></a>00358           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i_val=0; i_val&lt;imax; i_val++)
<a name="l00359"></a>00359             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j_val=0; j_val&lt;nb_comp; j_val++)
<a name="l00360"></a>00360               espace_valeurs(i_val,j_val) = val_temp(i_val,j_val);
<a name="l00361"></a>00361         }
<a name="l00362"></a>00362       <span class="keywordflow">else</span>
<a name="l00363"></a>00363 <span class="comment">// On construit un tableau de valeurs a nb_comp composantes meme si ncomp!=-1</span>
<a name="l00364"></a>00364         {
<a name="l00365"></a>00365           <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> val_temp;
<a name="l00366"></a>00366           copie_source.<a class="code" href="classDeriv__Champ__base.html#a294750f8ed9550d00377fa6eb31ce67f">valeur</a>().<a class="code" href="classChamp__base.html#a7ec01e19a24f288dccc15a5ff9a03927">calculer_valeurs_som_compo_post</a>(val_temp,
<a name="l00367"></a>00367                                                                 ncomp,
<a name="l00368"></a>00368                                                                 nb_sommets,
<a name="l00369"></a>00369                                                                 nom_champ_interpole,
<a name="l00370"></a>00370                                                                 domaine);
<a name="l00371"></a>00371 
<a name="l00372"></a>00372           <span class="keywordtype">int</span> dim0 = val_temp.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00373"></a>00373           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;dim0; i++)
<a name="l00374"></a>00374             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nb_comp; j++)
<a name="l00375"></a>00375               <span class="keywordflow">if</span> (j==ncomp)
<a name="l00376"></a>00376                 espace_valeurs(i,j) = val_temp(i);
<a name="l00377"></a>00377         }
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379   <span class="keywordflow">else</span>
<a name="l00380"></a>00380     {
<a name="l00381"></a>00381 <span class="comment">// const Nom&amp; nom_source = source.que_suis_je();</span>
<a name="l00382"></a>00382 <span class="comment">// if (((nom_source==&quot;Champ_P1NC&quot;) || (nom_source==&quot;Champ_Fonc_P1NC&quot;)) &amp;&amp; (localisation_==&quot;faces&quot;))</span>
<a name="l00383"></a>00383 <span class="comment">// {</span>
<a name="l00384"></a>00384       espace_stockage-&gt;<a class="code" href="classChamp.html#a0f2ce82ee82925fd893aa58c06b4adc0">affecter</a>(source);
<a name="l00385"></a>00385       <span class="comment">/* else</span>
<a name="l00386"></a>00386 <span class="comment">          {</span>
<a name="l00387"></a>00387 <span class="comment">            Cerr &lt;&lt; &quot;Champ_Generique_Interpolation::get_champ localisation uncoded &quot; &lt;&lt; localisation_ &lt;&lt; &quot; for &quot; &lt;&lt;source.que_suis_je()&lt;&lt;finl;</span>
<a name="l00388"></a>00388 <span class="comment">            exit();</span>
<a name="l00389"></a>00389 <span class="comment">          }</span>
<a name="l00390"></a>00390 <span class="comment">// }</span>
<a name="l00391"></a>00391 <span class="comment">      */</span>
<a name="l00392"></a>00392     }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 
<a name="l00396"></a>00396   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#aa45802e7b1d87d4cf2d22b2d53ce268a">optimisation_sous_maillage_</a>==-1)
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398 <span class="comment">// on recalcule le bon champ</span>
<a name="l00399"></a>00399 
<a name="l00400"></a>00400       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val=espace_valeurs;
<a name="l00401"></a>00401       <span class="keywordtype">int</span> dim0 = val.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0);
<a name="l00402"></a>00402       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; renumerotation_maillage=<a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>, <a class="code" href="classChamp__Generique__Interpolation.html#a90dcf77796d5850bbdc81522846d890d">renumerotation_maillage_</a>);
<a name="l00403"></a>00403       renumerotation_maillage.<a class="code" href="classArrOfInt.html#a9b3afbb46b16870dbd36236c8935b535">resize_array</a>(dim0);
<a name="l00404"></a>00404       <span class="keywordtype">int</span> ok=1;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; (i&lt;dim0)&amp;&amp; ok; i++)
<a name="l00407"></a>00407         {
<a name="l00408"></a>00408           <span class="keywordtype">double</span> v;
<a name="l00409"></a>00409           v=espace_valeurs(i,0) ;
<a name="l00410"></a>00410 
<a name="l00411"></a>00411           <span class="keywordtype">int</span> iproche=-1;
<a name="l00412"></a>00412           <span class="keywordflow">if</span> (v&gt;0)
<a name="l00413"></a>00413             {
<a name="l00414"></a>00414               iproche=int(v+0.1); <span class="comment">//!&lt; on ajoute 0.1 pour le cas ou v vaut i-epsilon</span>
<a name="l00415"></a>00415 <span class="comment"></span>              <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(iproche-v)&gt;1e-5)
<a name="l00416"></a>00416                 {
<a name="l00417"></a>00417                   ok=0;
<a name="l00418"></a>00418                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;nom_champ[0]&lt;&lt;<span class="stringliteral">&quot; optimisation ko &quot;</span>&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00419"></a>00419 
<a name="l00420"></a>00420                 }
<a name="l00421"></a>00421             }
<a name="l00422"></a>00422           renumerotation_maillage[i]=iproche-decal;
<a name="l00423"></a>00423 
<a name="l00424"></a>00424         }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426       <span class="keywordtype">int</span> <a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>=(int)<a class="code" href="classProcess.html#a05de57db7288d95f9e67046af585d5ff" title="Calcule le min de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_min</a>(ok);
<a name="l00427"></a>00427       <span class="keywordflow">if</span> (test)
<a name="l00428"></a>00428         {
<a name="l00429"></a>00429           <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classChamp__Generique__Interpolation.html" title="Un champ generique qui est construit comme une interpolation d&#39;un autre champ generique (interpolatio...">Champ_Generique_Interpolation</a>,(*<span class="keyword">this</span>)).optimisation_sous_maillage_=0;
<a name="l00430"></a>00430           <a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a> espace_stockage_test;
<a name="l00431"></a>00431           <a class="code" href="classChamp__Generique__Interpolation.html#a5bcc3105ce20ab79cd16fcb51fa4fbc7" title="Interpolation du champ source a l&#39;aide de Champ_base::calculer_champ_xxx_post.">get_champ_with_calculer_champ_post</a>(espace_stockage_test);
<a name="l00432"></a>00432           <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classChamp__Generique__Interpolation.html" title="Un champ generique qui est construit comme une interpolation d&#39;un autre champ generique (interpolatio...">Champ_Generique_Interpolation</a>,(*<span class="keyword">this</span>)).optimisation_sous_maillage_=<a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>;
<a name="l00433"></a>00433           <a class="code" href="classChamp__Generique__Interpolation.html#a5bcc3105ce20ab79cd16fcb51fa4fbc7" title="Interpolation du champ source a l&#39;aide de Champ_base::calculer_champ_xxx_post.">get_champ_with_calculer_champ_post</a>(espace_stockage);
<a name="l00434"></a>00434           espace_stockage_test.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>()-=espace_stockage.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>();
<a name="l00435"></a>00435           <span class="keywordtype">double</span> <a class="code" href="Double_8h.html#aec69e4c89b77badf104ae9d6ae393b2c">dmax</a>= <a class="code" href="DoubleVect_8cpp.html#acb21ec8c0b3909c26b20e3f3455e0289">mp_max_abs_vect</a>(espace_stockage_test.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>());
<a name="l00436"></a>00436           <span class="keywordflow">if</span> (dmax &gt; 1e-7)
<a name="l00437"></a>00437             {
<a name="l00438"></a>00438               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;nom_champ[0]&lt;&lt;<span class="stringliteral">&quot; optimisation ko &quot;</span>&lt;&lt; dmax&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00439"></a>00439               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00440"></a>00440             }
<a name="l00441"></a>00441           <span class="keywordflow">else</span>
<a name="l00442"></a>00442             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;nom_champ[0]&lt;&lt;<span class="stringliteral">&quot; optimisation ok &quot;</span>&lt;&lt; dmax&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00443"></a>00443         }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445       <span class="keywordflow">else</span>
<a name="l00446"></a>00446         {
<a name="l00447"></a>00447           <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a30c8dba0f49c14ea7430406cc536f8f5">optimisation_demande_</a>==1)
<a name="l00448"></a>00448             {
<a name="l00449"></a>00449               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;nom_champ[0]&lt;&lt;<span class="stringliteral">&quot; optimisation not allowed &quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00450"></a>00450               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00451"></a>00451             }
<a name="l00452"></a>00452         }
<a name="l00453"></a>00453       <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classChamp__Generique__Interpolation.html" title="Un champ generique qui est construit comme une interpolation d&#39;un autre champ generique (interpolatio...">Champ_Generique_Interpolation</a>,(*<span class="keyword">this</span>)).optimisation_sous_maillage_=<a class="code" href="Op__Grad__EF_8cpp.html#abc0897c211f7aa4541da5833388f868b">test</a>;
<a name="l00454"></a>00454       <span class="keywordflow">return</span> <a class="code" href="classChamp__Generique__Interpolation.html#a5bcc3105ce20ab79cd16fcb51fa4fbc7" title="Interpolation du champ source a l&#39;aide de Champ_base::calculer_champ_xxx_post.">get_champ_with_calculer_champ_post</a>(espace_stockage);
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457   espace_valeurs.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00458"></a>00458   <span class="keywordflow">return</span> espace_stockage.<a class="code" href="classDeriv__Champ__base.html#a294750f8ed9550d00377fa6eb31ce67f">valeur</a>();
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a><a class="code" href="classChamp__Generique__Interpolation.html#a80c62633d79a0f5578d74d986fb23a0c">00461</a> <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#a80c62633d79a0f5578d74d986fb23a0c" title="Renvoie une reference au tableau de valeurs discretes s&#39;il existe en memoire. La reference est valide...">Champ_Generique_Interpolation::get_ref_values</a>()<span class="keyword"> const</span>
<a name="l00462"></a>00462 <span class="keyword"></span>{
<a name="l00463"></a>00463   <a class="code" href="classChamp.html" title="class Champ Cette classe sert a representer n&#39;importe quelle classe derivee de la classe Champ_base...">Champ</a> champ_a_ecrire;
<a name="l00464"></a>00464   <a class="code" href="classChamp__Generique__Interpolation.html#afc2e85348f43fceee3eb132c51bbdfe3" title="Interpolation du champ source en fonction de la methode, localisation et domaine demandes.">get_champ</a>(champ_a_ecrire);
<a name="l00465"></a>00465   <span class="keywordflow">return</span> champ_a_ecrire.<a class="code" href="classChamp.html#a1bd56ec365487b3ad9a2feed268a30fe">valeurs</a>();
<a name="l00466"></a>00466 }
<a name="l00467"></a>00467 
<a name="l00468"></a><a class="code" href="classChamp__Generique__Interpolation.html#a346ace89cc9e4a9d900e967774fa5249">00468</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Generique__Interpolation.html#a346ace89cc9e4a9d900e967774fa5249" title="Remplit le tableau values avec les valeurs discretes du champ (cree une copie). Exceptions: - Generic...">Champ_Generique_Interpolation::get_copy_values</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; values)<span class="keyword"> const</span>
<a name="l00469"></a>00469 <span class="keyword"></span>{
<a name="l00470"></a>00470   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val = <a class="code" href="classChamp__Generique__Interpolation.html#a80c62633d79a0f5578d74d986fb23a0c" title="Renvoie une reference au tableau de valeurs discretes s&#39;il existe en memoire. La reference est valide...">get_ref_values</a>();
<a name="l00471"></a>00471 <span class="comment">// Cree une copie du tableau</span>
<a name="l00472"></a>00472   values = val;
<a name="l00473"></a>00473 }
<a name="l00474"></a>00474 
<a name="l00475"></a><a class="code" href="classChamp__Generique__Interpolation.html#a2c3625da243a0546bfa07e4e88ec3660">00475</a> <a class="code" href="Champ__Generique__base_8h.html#a2228f5f8d54732b2077779d47c6f5ffb">Entity</a> <a class="code" href="classChamp__Generique__Interpolation.html#a2c3625da243a0546bfa07e4e88ec3660" title="Renvoie le type des entites geometriques sur auxquelles les valeurs discretes sont attachees (NODE po...">Champ_Generique_Interpolation::get_localisation</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> index)<span class="keyword"> const</span>
<a name="l00476"></a>00476 <span class="keyword"></span>{
<a name="l00477"></a>00477   <a class="code" href="Champ__Generique__base_8h.html#a2228f5f8d54732b2077779d47c6f5ffb">Entity</a> loc;
<a name="l00478"></a>00478   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>==<span class="stringliteral">&quot;elem&quot;</span>)
<a name="l00479"></a>00479     {
<a name="l00480"></a>00480       loc = <a class="code" href="Champ__Generique__base_8h.html#a2228f5f8d54732b2077779d47c6f5ffba3d10bfe84917127ab3347aa5c6309f33">ELEMENT</a>;
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>==<span class="stringliteral">&quot;som&quot;</span>)
<a name="l00483"></a>00483     {
<a name="l00484"></a>00484       loc = <a class="code" href="Champ__Generique__base_8h.html#a2228f5f8d54732b2077779d47c6f5ffba59a889456a2d742fdca191dccb3e871d">NODE</a>;
<a name="l00485"></a>00485     }
<a name="l00486"></a>00486   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>==<span class="stringliteral">&quot;faces&quot;</span>)
<a name="l00487"></a>00487     {
<a name="l00488"></a>00488       loc = <a class="code" href="Champ__Generique__base_8h.html#a2228f5f8d54732b2077779d47c6f5ffba5cfae78048cf95359061c2e812e7d691">FACE</a>;
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490   <span class="keywordflow">else</span>
<a name="l00491"></a>00491     {
<a name="l00492"></a>00492       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error of type : localisation should be specified to elem or som or faces for the defined field &quot;</span> &lt;&lt; <a class="code" href="classChamp__Generique__base.html#ae62b052dfbd7325d47584487401729e4">nom_post_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00493"></a>00493       <span class="keywordflow">throw</span> <a class="code" href="classChamp__Generique__erreur.html">Champ_Generique_erreur</a>(<span class="stringliteral">&quot;INVALID&quot;</span>);
<a name="l00494"></a>00494     }
<a name="l00495"></a>00495   <span class="keywordflow">return</span> loc;
<a name="l00496"></a>00496 }
<a name="l00497"></a>00497 
<a name="l00498"></a><a class="code" href="classChamp__Generique__Interpolation.html#a9d4943372fe9ce8b9698fff3134ee0f6">00498</a> <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#a9d4943372fe9ce8b9698fff3134ee0f6" title="Renvoie une ref au domaine sur lequel sera evalue l espace de stockage. Par defaut le domaine associe...">Champ_Generique_Interpolation::get_ref_domain</a>()<span class="keyword"> const</span>
<a name="l00499"></a>00499 <span class="keyword"></span>{
<a name="l00500"></a>00500   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00501"></a>00501     {
<a name="l00502"></a>00502       <span class="keywordflow">return</span> <a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classRef__Domaine.html#a89e1c374ada79faa2c7e9a76c3393ad8">valeur</a>();
<a name="l00503"></a>00503     }
<a name="l00504"></a>00504   <span class="keywordflow">else</span>
<a name="l00505"></a>00505     {
<a name="l00506"></a>00506       <span class="keywordflow">return</span> <a class="code" href="classChamp__Gen__de__Champs__Gen.html#aa0b7717da86103a3b83c66d96f115018">get_source</a>(0).<a class="code" href="classChamp__Generique__base.html#a97a45e028a85f80040aae39676e59bf7" title="Renvoie une ref au domaine sur lequel sera evalue l espace de stockage. Par defaut le domaine associe...">get_ref_domain</a>();
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508 }
<a name="l00509"></a>00509 
<a name="l00510"></a><a class="code" href="classChamp__Generique__Interpolation.html#a330c9ff6fb2d075d929e05951c9df2d7">00510</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Generique__Interpolation.html#a330c9ff6fb2d075d929e05951c9df2d7" title="Cree une copie du domaine sur lequel sera evalue l espace de stockage. Par defaut le domaine associe ...">Champ_Generique_Interpolation::get_copy_domain</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; domain)<span class="keyword"> const</span>
<a name="l00511"></a>00511 <span class="keyword"></span>{
<a name="l00512"></a>00512   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom = <a class="code" href="classChamp__Generique__Interpolation.html#a9d4943372fe9ce8b9698fff3134ee0f6" title="Renvoie une ref au domaine sur lequel sera evalue l espace de stockage. Par defaut le domaine associe...">get_ref_domain</a>();
<a name="l00513"></a>00513   domain = dom;
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 
<a name="l00516"></a><a class="code" href="classChamp__Generique__Interpolation.html#ada6c440ba3d6732002dcb18d3e02ec3a">00516</a> <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#ada6c440ba3d6732002dcb18d3e02ec3a" title="Renvoie une reference au tableau des coordonnees des sommets du maillage support du champ...">Champ_Generique_Interpolation::get_ref_coordinates</a>()<span class="keyword"> const</span>
<a name="l00517"></a>00517 <span class="keyword"></span>{
<a name="l00518"></a>00518   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord = <a class="code" href="classChamp__Generique__Interpolation.html#a9d4943372fe9ce8b9698fff3134ee0f6" title="Renvoie une ref au domaine sur lequel sera evalue l espace de stockage. Par defaut le domaine associe...">get_ref_domain</a>().<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00519"></a>00519   <span class="keywordflow">return</span> coord;
<a name="l00520"></a>00520 }
<a name="l00521"></a>00521 
<a name="l00522"></a><a class="code" href="classChamp__Generique__Interpolation.html#a3b5cb05cd7fa9760a1ce37c9e9a1ae40">00522</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Generique__Interpolation.html#a3b5cb05cd7fa9760a1ce37c9e9a1ae40">Champ_Generique_Interpolation::get_copy_coordinates</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coordinates)<span class="keyword"> const</span>
<a name="l00523"></a>00523 <span class="keyword"></span>{
<a name="l00524"></a>00524   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord = <a class="code" href="classChamp__Generique__Interpolation.html#ada6c440ba3d6732002dcb18d3e02ec3a" title="Renvoie une reference au tableau des coordonnees des sommets du maillage support du champ...">get_ref_coordinates</a>();
<a name="l00525"></a>00525   coordinates = coord;
<a name="l00526"></a>00526 }
<a name="l00527"></a>00527 
<a name="l00528"></a><a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1">00528</a> <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">Champ_Generique_Interpolation::get_property</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; query)<span class="keyword"> const</span>
<a name="l00529"></a>00529 <span class="keyword"></span>{
<a name="l00530"></a>00530 
<a name="l00531"></a>00531   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> motcles(2);
<a name="l00532"></a>00532   motcles[0] = <span class="stringliteral">&quot;composantes&quot;</span>;
<a name="l00533"></a>00533   motcles[1] = <span class="stringliteral">&quot;synonyms&quot;</span>;
<a name="l00534"></a>00534   <span class="keywordtype">int</span> rang = motcles.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(query);
<a name="l00535"></a>00535   <span class="keywordflow">switch</span>(rang)
<a name="l00536"></a>00536     {
<a name="l00537"></a>00537 
<a name="l00538"></a>00538     <span class="keywordflow">case</span> 0:
<a name="l00539"></a>00539       {
<a name="l00540"></a>00540         <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> source_compos = <a class="code" href="classChamp__Gen__de__Champs__Gen.html#aa0b7717da86103a3b83c66d96f115018">get_source</a>(0).<a class="code" href="classChamp__Generique__base.html#ab222be354d9b6c15906e0ccc416cf5cd" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;composantes&quot;</span>);
<a name="l00541"></a>00541         <span class="keywordtype">int</span> nb_comp = source_compos.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>();
<a name="l00542"></a>00542         <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> compo(nb_comp);
<a name="l00543"></a>00543 
<a name="l00544"></a>00544         <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#ae83136db08c7912feff9ace99d8854b9">compo_</a>.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>()&gt;1)
<a name="l00545"></a>00545           {
<a name="l00546"></a>00546 <span class="comment">// Le champ a ete cree par macro et on a rempli l attribut compo_ du Champ_Generique</span>
<a name="l00547"></a>00547 <span class="comment">// Cela permet de reproduire les noms de composantes dans les lml</span>
<a name="l00548"></a>00548             compo=<a class="code" href="classChamp__Generique__Interpolation.html#ae83136db08c7912feff9ace99d8854b9">compo_</a>;
<a name="l00549"></a>00549           }
<a name="l00550"></a>00550         <span class="keywordflow">else</span>
<a name="l00551"></a>00551           {
<a name="l00552"></a>00552             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nb_comp; i++)
<a name="l00553"></a>00553               {
<a name="l00554"></a>00554                 <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nume(i);
<a name="l00555"></a>00555                 compo[i] = <a class="code" href="classChamp__Generique__base.html#ae62b052dfbd7325d47584487401729e4">nom_post_</a>+nume;
<a name="l00556"></a>00556               }
<a name="l00557"></a>00557           }
<a name="l00558"></a>00558         <span class="keywordflow">return</span> compo;
<a name="l00559"></a>00559         <span class="keywordflow">break</span>;
<a name="l00560"></a>00560       }
<a name="l00561"></a>00561     <span class="keywordflow">case</span> 1:
<a name="l00562"></a>00562       {
<a name="l00563"></a>00563         <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a66d8e9daa633bb1481a9b9b14cdee711">syno_</a>.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>()&gt;0)
<a name="l00564"></a>00564           {
<a name="l00565"></a>00565             <span class="keywordflow">return</span> <a class="code" href="classChamp__Generique__Interpolation.html#a66d8e9daa633bb1481a9b9b14cdee711">syno_</a>;
<a name="l00566"></a>00566           }
<a name="l00567"></a>00567         <span class="keywordflow">return</span> <a class="code" href="classChamp__Gen__de__Champs__Gen.html#aa0b7717da86103a3b83c66d96f115018">get_source</a>(0).<a class="code" href="classChamp__Generique__base.html#ab222be354d9b6c15906e0ccc416cf5cd" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;synonyms&quot;</span>);
<a name="l00568"></a>00568         <span class="keywordflow">break</span>;
<a name="l00569"></a>00569       }
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573   <span class="keywordflow">return</span> <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">Champ_Gen_de_Champs_Gen::get_property</a>(query);
<a name="l00574"></a>00574 
<a name="l00575"></a>00575 }
<a name="l00576"></a>00576 <span class="comment">// Nomme le champ en tant que source par defaut</span>
<a name="l00577"></a>00577 <span class="comment">// nom_champ_source + &quot;_&quot; + localisation_ + &quot;_&quot; +nom_dom_interp;</span>
<a name="l00578"></a><a class="code" href="classChamp__Generique__Interpolation.html#ae759af5f6fb3562b81b25fa9be40fd14">00578</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Generique__Interpolation.html#ae759af5f6fb3562b81b25fa9be40fd14">Champ_Generique_Interpolation::nommer_source</a>()
<a name="l00579"></a>00579 {
<a name="l00580"></a>00580   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__base.html#ae62b052dfbd7325d47584487401729e4">nom_post_</a>==<span class="stringliteral">&quot;??&quot;</span>)
<a name="l00581"></a>00581     {
<a name="l00582"></a>00582       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_post_source, nom_champ_source, nom_dom_interp;
<a name="l00583"></a>00583       <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> nom = <a class="code" href="classChamp__Gen__de__Champs__Gen.html#aa0b7717da86103a3b83c66d96f115018">get_source</a>(0).<a class="code" href="classChamp__Generique__base.html#ab222be354d9b6c15906e0ccc416cf5cd" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;nom&quot;</span>);
<a name="l00584"></a>00584       nom_champ_source = nom[0];
<a name="l00585"></a>00585       nom_dom_interp = <a class="code" href="classChamp__Generique__Interpolation.html#a9d4943372fe9ce8b9698fff3134ee0f6" title="Renvoie une ref au domaine sur lequel sera evalue l espace de stockage. Par defaut le domaine associe...">get_ref_domain</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00586"></a>00586       nom_post_source = nom_champ_source + <span class="stringliteral">&quot;_&quot;</span> + <a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a> + <span class="stringliteral">&quot;_&quot;</span> +nom_dom_interp;
<a name="l00587"></a>00587       <a class="code" href="classChamp__Generique__base.html#acbc36c368468eb035e9dbb499c655992" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(nom_post_source);
<a name="l00588"></a>00588     }
<a name="l00589"></a>00589 }
<a name="l00590"></a>00590 
<a name="l00591"></a><a class="code" href="classChamp__Generique__Interpolation.html#a0c398d6cca76d9af3e55492b1b6c279b">00591</a> <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#a0c398d6cca76d9af3e55492b1b6c279b">Champ_Generique_Interpolation::fixer_noms_synonyms</a>(<span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms)
<a name="l00592"></a>00592 {
<a name="l00593"></a>00593   <span class="keywordflow">return</span> <a class="code" href="classChamp__Generique__Interpolation.html#a66d8e9daa633bb1481a9b9b14cdee711">syno_</a>=noms;
<a name="l00594"></a>00594 }
<a name="l00595"></a><a class="code" href="classChamp__Generique__Interpolation.html#ad04d2f19bfb6631a9c5771cf602be805">00595</a> <span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#ad04d2f19bfb6631a9c5771cf602be805">Champ_Generique_Interpolation::fixer_noms_compo</a>(<span class="keyword">const</span> <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; noms)
<a name="l00596"></a>00596 {
<a name="l00597"></a>00597   <span class="keywordflow">return</span> <a class="code" href="classChamp__Generique__Interpolation.html#ae83136db08c7912feff9ace99d8854b9">compo_</a>=noms;
<a name="l00598"></a>00598 }
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="classChamp__Generique__Interpolation.html#a1ae37993c44bc63c2b7086b502287c59">00600</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Generique__Interpolation.html#a1ae37993c44bc63c2b7086b502287c59">Champ_Generique_Interpolation::completer</a>(<span class="keyword">const</span> <a class="code" href="classPostraitement__base.html" title="Classe de base pour l&#39;ensemble des postraitements.">Postraitement_base</a>&amp; post)
<a name="l00601"></a>00601 {
<a name="l00602"></a>00602   <a class="code" href="classChamp__Generique__Interpolation.html#a1ae37993c44bc63c2b7086b502287c59">Champ_Gen_de_Champs_Gen::completer</a>(post);
<a name="l00603"></a>00603 <span class="comment">// Verifications:</span>
<a name="l00604"></a>00604   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Gen__de__Champs__Gen.html#a46f4474ad825c357e21defe2ed852b53">get_nb_sources</a>() != 1)
<a name="l00605"></a>00605     {
<a name="l00606"></a>00606       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Champ_Generique_Interpolation::readOn\n&quot;</span>
<a name="l00607"></a>00607            &lt;&lt; <span class="stringliteral">&quot; You must specify exactly 1 \&quot;Source\&quot;.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00608"></a>00608       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00609"></a>00609     }
<a name="l00610"></a>00610 <span class="comment">// Si le domaine lu n&#39;est pas le domaine de calcul, on fixe le domaine</span>
<a name="l00611"></a>00611   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; domaine_calcul = <a class="code" href="classChamp__Gen__de__Champs__Gen.html#aa0b7717da86103a3b83c66d96f115018">get_source</a>(0).<a class="code" href="classChamp__Generique__base.html#a97a45e028a85f80040aae39676e59bf7" title="Renvoie une ref au domaine sur lequel sera evalue l espace de stockage. Par defaut le domaine associe...">get_ref_domain</a>();
<a name="l00612"></a>00612   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a30c8dba0f49c14ea7430406cc536f8f5">optimisation_demande_</a>!=1)
<a name="l00613"></a>00613     <a class="code" href="classChamp__Generique__Interpolation.html#aa45802e7b1d87d4cf2d22b2d53ce268a">optimisation_sous_maillage_</a>=0;
<a name="l00614"></a>00614   <span class="keywordflow">if</span> ( (<a class="code" href="classChamp__Generique__Interpolation.html#a9df630f505fc3afc7a1be8805a71daa4" title="Nom du domaine lu.">nom_domaine_lu_</a>!=<span class="stringliteral">&quot;&quot;</span>) &amp;&amp; (<a class="code" href="classChamp__Generique__Interpolation.html#a9df630f505fc3afc7a1be8805a71daa4" title="Nom du domaine lu.">nom_domaine_lu_</a>!=domaine_calcul.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>()) )
<a name="l00615"></a>00615     {
<a name="l00616"></a>00616       <a class="code" href="classChamp__Generique__Interpolation.html#a5d8c6903c2c523c1ff799c0594407056" title="Initialisation de la classe: initialisation du domaine d&#39;interpolation Parametres valides : &quot;&quot; =&gt; do...">set_domaine</a>(<a class="code" href="classChamp__Generique__Interpolation.html#a9df630f505fc3afc7a1be8805a71daa4" title="Nom du domaine lu.">nom_domaine_lu_</a>);
<a name="l00617"></a>00617     }
<a name="l00618"></a>00618   <span class="keywordflow">else</span>
<a name="l00619"></a>00619     {
<a name="l00620"></a>00620 <span class="comment">// optimisation sous maillage inutile</span>
<a name="l00621"></a>00621       <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a30c8dba0f49c14ea7430406cc536f8f5">optimisation_demande_</a>==-1)
<a name="l00622"></a>00622         <a class="code" href="classChamp__Generique__Interpolation.html#aa45802e7b1d87d4cf2d22b2d53ce268a">optimisation_sous_maillage_</a>=0;
<a name="l00623"></a>00623     }
<a name="l00624"></a>00624 
<a name="l00625"></a>00625   <a class="code" href="classChamp__Generique__Interpolation.html#a4438ec969ce20fd18529c2bdfa35ef95">discretiser_domaine</a>();
<a name="l00626"></a>00626 }
<a name="l00627"></a><a class="code" href="classChamp__Generique__Interpolation.html#a999da2ca37d88f75cdc76975b36591e4">00627</a> <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; <a class="code" href="classChamp__Generique__Interpolation.html#a999da2ca37d88f75cdc76975b36591e4" title="Renvoie une ref a la zone_discretisee du domaine sur lequel sera evalue l espace de stockage...">Champ_Generique_Interpolation::get_ref_zone_dis_base</a>()<span class="keyword"> const</span>
<a name="l00628"></a>00628 <span class="keyword"></span>{
<a name="l00629"></a>00629   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00630"></a>00630     {
<a name="l00631"></a>00631       <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a152db2f53f4a7502ff4f6bb6814a9a1e" title="rempli si domaine d interpolation different du domaine natif ex : Sonde utilise valeur_aux...() qui necessite de disposer d une zone discretisee">le_dom_dis</a>.<a class="code" href="classDomaine__dis.html#a7c216179e61820aa920255386c046a96" title="Renvoie le nombre de zones contenues dans le domaine.">nombre_de_zones</a>()==0)
<a name="l00632"></a>00632         {
<a name="l00633"></a>00633           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Interpolation definition:&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00634"></a>00634           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The domain &quot;</span> &lt;&lt; <a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; is not built.&quot;</span> &lt;&lt; finl;
<a name="l00635"></a>00635           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00636"></a>00636         }
<a name="l00637"></a>00637       <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zone_dis = <a class="code" href="classChamp__Generique__Interpolation.html#a152db2f53f4a7502ff4f6bb6814a9a1e" title="rempli si domaine d interpolation different du domaine natif ex : Sonde utilise valeur_aux...() qui necessite de disposer d une zone discretisee">le_dom_dis</a>.<a class="code" href="classDomaine__dis.html#a00b2c1bece9e5831d170c39800bd79d0" title="Renvoie une reference sur la i-eme zone discretisee du domaine. (version const)">zone_dis</a>(0).<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>();
<a name="l00638"></a>00638       <span class="keywordflow">return</span> zone_dis;
<a name="l00639"></a>00639     }
<a name="l00640"></a>00640   <span class="keywordflow">else</span>
<a name="l00641"></a>00641     {
<a name="l00642"></a>00642       <span class="keywordflow">return</span> <a class="code" href="classChamp__Generique__Interpolation.html#a999da2ca37d88f75cdc76975b36591e4" title="Renvoie une ref a la zone_discretisee du domaine sur lequel sera evalue l espace de stockage...">Champ_Gen_de_Champs_Gen::get_ref_zone_dis_base</a>();
<a name="l00643"></a>00643     }
<a name="l00644"></a>00644 
<a name="l00645"></a>00645 <span class="comment">// Pour compilation</span>
<a name="l00646"></a>00646   <span class="keywordflow">return</span> <a class="code" href="classChamp__Generique__Interpolation.html#a999da2ca37d88f75cdc76975b36591e4" title="Renvoie une ref a la zone_discretisee du domaine sur lequel sera evalue l espace de stockage...">get_ref_zone_dis_base</a>();
<a name="l00647"></a>00647 
<a name="l00648"></a>00648 }
<a name="l00649"></a>00649 
<a name="l00650"></a><a class="code" href="classChamp__Generique__Interpolation.html#a2c4acc7e8a840fdb82e6d9e299e77ff5">00650</a> <span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> <a class="code" href="classChamp__Generique__Interpolation.html#a2c4acc7e8a840fdb82e6d9e299e77ff5">Champ_Generique_Interpolation::get_directive_pour_discr</a>()<span class="keyword"> const</span>
<a name="l00651"></a>00651 <span class="keyword"></span>{
<a name="l00652"></a>00652   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> directive;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>==<span class="stringliteral">&quot;elem&quot;</span>)
<a name="l00655"></a>00655     {
<a name="l00656"></a>00656       directive = <span class="stringliteral">&quot;champ_elem&quot;</span>;
<a name="l00657"></a>00657     }
<a name="l00658"></a>00658   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>==<span class="stringliteral">&quot;som&quot;</span>)
<a name="l00659"></a>00659     {
<a name="l00660"></a>00660       directive = <span class="stringliteral">&quot;champ_sommets&quot;</span>;
<a name="l00661"></a>00661     }
<a name="l00662"></a>00662   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>==<span class="stringliteral">&quot;faces&quot;</span>)
<a name="l00663"></a>00663     {
<a name="l00664"></a>00664       directive = <span class="stringliteral">&quot;champ_face&quot;</span>;
<a name="l00665"></a>00665     }
<a name="l00666"></a>00666   <span class="keywordflow">else</span>
<a name="l00667"></a>00667     {
<a name="l00668"></a>00668       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Localisation &quot;</span>&lt;&lt;<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>&lt;&lt;<span class="stringliteral">&quot; is not recognized by &quot;</span>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00669"></a>00669       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00670"></a>00670     }
<a name="l00671"></a>00671 
<a name="l00672"></a>00672   <span class="keywordflow">return</span> directive;
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00675"></a>00675 <span class="comment">// Discretisation du domaine d interpolation si celui-ci n est pas le domaine de calcul</span>
<a name="l00676"></a>00676 <span class="comment">// Cette discretisation est necessaire pour associer une zone discretisee a l espace de</span>
<a name="l00677"></a>00677 <span class="comment">// stockage dans la methode get_champ()</span>
<a name="l00678"></a><a class="code" href="classChamp__Generique__Interpolation.html#a4438ec969ce20fd18529c2bdfa35ef95">00678</a> <span class="keywordtype">void</span> <a class="code" href="classChamp__Generique__Interpolation.html#a4438ec969ce20fd18529c2bdfa35ef95">Champ_Generique_Interpolation::discretiser_domaine</a>()
<a name="l00679"></a>00679 {
<a name="l00680"></a>00680   <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00681"></a>00681     {
<a name="l00682"></a>00682       <a class="code" href="classChamp__Generique__Interpolation.html#a152db2f53f4a7502ff4f6bb6814a9a1e" title="rempli si domaine d interpolation different du domaine natif ex : Sonde utilise valeur_aux...() qui necessite de disposer d une zone discretisee">le_dom_dis</a>.<a class="code" href="classDomaine__dis.html#add03fcde5334b832f83d7aec6425fa4a" title="Associe un Domaine (non discretise) a l&#39;objet. Dimensionne le tableau des zones discretisees associee...">associer_domaine</a>(<a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classRef__Domaine.html#a89e1c374ada79faa2c7e9a76c3393ad8">valeur</a>());
<a name="l00683"></a>00683       <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; Pb = <a class="code" href="classChamp__Gen__de__Champs__Gen.html#aa9b198ba7d06a6b8ae6073c3f14b0e7b">get_ref_pb_base</a>();
<a name="l00684"></a>00684       <span class="keyword">const</span> <a class="code" href="classDiscretisation__base.html" title="classe Discretisation_base Cette classe represente un schema de discretisation en espace...">Discretisation_base</a>&amp; discr = Pb.<a class="code" href="classProbleme__base.html#ac2bc635ab5b121c1cab78b6f98c0b203" title="Renvoie la discretisation associee au probleme.">discretisation</a>();
<a name="l00685"></a>00685       <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type_discr = discr.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00686"></a>00686 <span class="comment">// on ne cree pas les faces sauf si on veut une interpolation aux faces ou si on a des polyedres</span>
<a name="l00687"></a>00687 <span class="comment">// Nom type = sub_type(Poly_geom_base, domaine_.valeur().zone(0).type_elem().valeur()) ? &quot;Zone_&quot; : &quot;NO_FACE_Zone_&quot;;</span>
<a name="l00688"></a>00688       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> type = <span class="stringliteral">&quot;NO_FACE_Zone_&quot;</span>;
<a name="l00689"></a>00689       <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a723450c9922d7eebeb90c16988b11306" title="localisation d interpolation elem, som">localisation_</a>==<span class="stringliteral">&quot;faces&quot;</span>)
<a name="l00690"></a>00690         {
<a name="l00691"></a>00691           type=<span class="stringliteral">&quot;Zone_&quot;</span>;
<a name="l00692"></a>00692 <span class="comment">// On verifie que la localisation aux faces est possible sur le domaine (sinon elem ou som)</span>
<a name="l00693"></a>00693           <span class="keywordflow">if</span> (<a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classRef__Domaine.html#a89e1c374ada79faa2c7e9a76c3393ad8">valeur</a>().<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>().<a class="code" href="classDeriv__Elem__geom__base.html#a384b487459a33f9f521fb16539ec81de">valeur</a>().<a class="code" href="classElem__geom__base.html#ad6c1fe053cf842b50bc1c0870f4d21f5">nb_som_face</a>()&lt;=2 &amp;&amp; <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l00694"></a>00694             {
<a name="l00695"></a>00695               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;&#39;localisation faces&#39; is not possible in 3D on the 2D surface mesh &quot;</span> &lt;&lt; <a class="code" href="classChamp__Generique__Interpolation.html#a078557ac932202a076fdef1e22f9adfc" title="domaine sur lequel on veut interpoler le champ (domaine natif si reference nulle)">domaine_</a>.<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot; with the field: &quot;</span> &lt;&lt; <a class="code" href="classChamp__Generique__Interpolation.html#a90a570972e35229e3d2334632e2b71e1" title="Renvoie la propriete demandee. Exemples: &quot;DISCRETISATION&quot; : type du champ discret (P0...">get_property</a>(<span class="stringliteral">&quot;NOM&quot;</span>)[0] &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00696"></a>00696               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Please use &#39;localisation elem&#39; instead.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00697"></a>00697               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00698"></a>00698             }
<a name="l00699"></a>00699         }
<a name="l00700"></a>00700       type += type_discr;
<a name="l00701"></a>00701       <a class="code" href="classChamp__Generique__Interpolation.html#a152db2f53f4a7502ff4f6bb6814a9a1e" title="rempli si domaine d interpolation different du domaine natif ex : Sonde utilise valeur_aux...() qui necessite de disposer d une zone discretisee">le_dom_dis</a>.<a class="code" href="classDomaine__dis.html#a43cf38485d8946f80e0e4703522371ad" title="Discretise le domaine. On type et on discretise chaque zone discretisee du domaine discretise grace a...">discretiser</a>(type);
<a name="l00702"></a>00702     }
<a name="l00703"></a>00703 }
<a name="l00704"></a>00704 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:13 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
