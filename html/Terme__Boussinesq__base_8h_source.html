<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Incompressible/Sources/Terme_Boussinesq_base.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Incompressible/Sources/Terme_Boussinesq_base.h</div>  </div>
</div>
<div class="contents">
<a href="Terme__Boussinesq__base_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Terme_Boussinesq_base.h</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Incompressible/Sources</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/25</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#ifndef Terme_Boussinesq_base_included</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#define Terme_Boussinesq_base_included</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Ref__Champ__Don__base_8h.html">Ref_Champ_Don_base.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Ref__Champ__Don_8h.html">Ref_Champ_Don.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Don_8h.html">Champ_Don.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Equation__base_8h.html">Equation_base.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Parser__U_8h.html">Parser_U.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Ref__Convection__Diffusion__std_8h.html">Ref_Convection_Diffusion_std.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Vect__Parser__U_8h.html">Vect_Parser_U.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="Convection__Diffusion__Temperature_8h.html">Convection_Diffusion_Temperature.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">class </span><a class="code" href="classConvection__Diffusion__std.html" title="classe Convection_Diffusion_std Cette classe est la base des equations modelisant le transport d&#39;un s...">Convection_Diffusion_std</a>;
<a name="l00038"></a>00038 <span class="comment">//</span>
<a name="l00039"></a>00039 <span class="comment">//</span>
<a name="l00040"></a>00040 <span class="comment">//</span>
<a name="l00041"></a>00041 <span class="comment">//</span>
<a name="l00042"></a>00042 <span class="comment">//</span>
<a name="l00043"></a>00043 <span class="comment">//</span>
<a name="l00044"></a>00044 <span class="comment">//</span>
<a name="l00045"></a>00045 <span class="comment">//</span>
<a name="l00046"></a>00046 <span class="comment">//</span>
<a name="l00047"></a>00047 <span class="comment">//</span>
<a name="l00048"></a>00048 <span class="comment">//</span>
<a name="l00049"></a>00049 <span class="comment">//</span>
<a name="l00050"></a>00050 <span class="comment">//</span>
<a name="l00051"></a>00051 <span class="comment">//</span>
<a name="l00052"></a>00052 <span class="comment">//</span>
<a name="l00053"></a>00053 <span class="comment">//</span>
<a name="l00054"></a>00054 <span class="comment">//</span>
<a name="l00055"></a>00055 <span class="comment">//</span>
<a name="l00056"></a>00056 <span class="comment">//</span>
<a name="l00057"></a>00057 <span class="comment">//</span><span class="comment"></span>
<a name="l00058"></a>00058 <span class="comment">//! Classe Terme_Boussinesq_base&lt;br&gt;Cette classe represente le terme de gravite qui figure dans l&#39;equation&lt;br&gt;de la dynamique divisee par la masse volumique de reference.&lt;br&gt;On est dans le cadre de l&#39;hypothese de Boussinesq:la masse volumique est&lt;br&gt;supposee constante et egale a sa valeur de reference sauf dans le terme&lt;br&gt;des forces de volumes ou on prend en compte une petite variation de la&lt;br&gt;masse volumique en fonction d&#39;un ou de plusieurs scalaires transportes&lt;br&gt;par l&#39;ecoulement (la temperature et/ou une ou plusieurs concentrations).&lt;br&gt;Cas particulier de Terme_Boussinesq_base pour la temperature&lt;br&gt;Le terme de gravite a pour expression: beta*(T-T0) ou beta&lt;br&gt;represente la dilatabilite de la masse volumique et T0 une valeur&lt;br&gt;de reference pour la temperature&lt;br&gt;Cas particulier de Terme_Boussinesq_base pour une concentration&lt;br&gt;Le terme de gravite a pour expression : beta*(C-C0)&lt;br&gt;ou (beta[0]*(C[0]-C0[0]) + .....+ beta[i]*(C[i]-C0[i])) dans&lt;br&gt;le cas d&#39;un vecteur de concentrations&lt;br&gt;beta represente la variation de la masse volumique en fonction&lt;br&gt;de la concentration du constituant et C0 une valeur de reference&lt;br&gt;pour la concentration</span>
<a name="l00059"></a>00059 <span class="comment"></span><span class="comment">//</span>
<a name="l00060"></a><a class="code" href="classTerme__Boussinesq__base.html">00060</a> <span class="keyword">class </span><a class="code" href="classTerme__Boussinesq__base.html" title="Classe Terme_Boussinesq_base Cette classe represente le terme de gravite qui figure dans l&#39;equation d...">Terme_Boussinesq_base</a> : <span class="keyword">public</span> <a class="code" href="classSource__base.html" title="classe Source_base Un objet Source_base est un terme apparaissant au second membre d&#39;une equation...">Source_base</a>
<a name="l00061"></a>00061 {
<a name="l00062"></a><a class="code" href="classTerme__Boussinesq__base.html#a8f5b67df7dc00702979e50b4ea3e784f">00062</a>   <a class="code" href="Declare__Base_8h.html#aa7e87d01e81d67aa788bb192da63e2c2">Declare_base</a>(<a class="code" href="classTerme__Boussinesq__base.html" title="Classe Terme_Boussinesq_base Cette classe represente le terme de gravite qui figure dans l&#39;equation d...">Terme_Boussinesq_base</a>);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="keyword">public</span> :
<a name="l00065"></a>00065 
<a name="l00066"></a>00066   <span class="keywordtype">void</span> <a class="code" href="classTerme__Boussinesq__base.html#a4012141cbd2917dd98cbe97649762791">associer_pb</a>(<span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb) ;
<a name="l00067"></a><a class="code" href="classTerme__Boussinesq__base.html#a4058d41d47c57602d2ce99fca0734b75">00067</a>   <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classChamp__Don__base.html" title="classe Champ_Don_base classe de base des Champs donnes (non calcules) les proprietes physiques sont d...">Champ_Don_base</a>&amp; <a class="code" href="classTerme__Boussinesq__base.html#a4058d41d47c57602d2ce99fca0734b75">gravite</a>()<span class="keyword"> const</span>
<a name="l00068"></a>00068 <span class="keyword">  </span>{
<a name="l00069"></a>00069     <span class="keywordflow">return</span> <a class="code" href="classTerme__Boussinesq__base.html#a41b13285fab0505157b8e4fb4eff0cb2">la_gravite_</a>.<a class="code" href="classRef__Champ__Don__base.html#aced60d9f9516b96ab681b94cf4c3fde1">valeur</a>();
<a name="l00070"></a>00070   };
<a name="l00071"></a><a class="code" href="classTerme__Boussinesq__base.html#a9e276ea9995f8d89177472377b27022e">00071</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classTerme__Boussinesq__base.html#a9e276ea9995f8d89177472377b27022e">verification</a>()<span class="keyword"> const</span>
<a name="l00072"></a>00072 <span class="keyword">  </span>{
<a name="l00073"></a>00073     <span class="keywordflow">return</span> <a class="code" href="classTerme__Boussinesq__base.html#a52c2b4fd5217211d6ffbff0e30bdd564">verif_</a>;
<a name="l00074"></a>00074   };
<a name="l00075"></a><a class="code" href="classTerme__Boussinesq__base.html#a25cc8dc86f848eb2f7e44e2729462dd4">00075</a>   <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="classTerme__Boussinesq__base.html#a25cc8dc86f848eb2f7e44e2729462dd4">Scalaire0</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const</span>
<a name="l00076"></a>00076 <span class="keyword">  </span>{
<a name="l00077"></a>00077     <span class="keywordflow">return</span> <a class="code" href="classTerme__Boussinesq__base.html#a442806d9d63296cd0e0fd445da52c3cf" title="T0=Scalaire0_(0) ou C0(i)=Scalaire0_(i)">Scalaire0_</a>(i);
<a name="l00078"></a>00078   };
<a name="l00079"></a><a class="code" href="classTerme__Boussinesq__base.html#af7f4ce5e03f6abdab84dd81db9457e1e">00079</a>   <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classChamp__Don.html" title="classe Champ_Don Classe generique de la hierarchie des champs donnes, un objet Champ_Don peut referen...">Champ_Don</a>&amp; <a class="code" href="classTerme__Boussinesq__base.html#af7f4ce5e03f6abdab84dd81db9457e1e">beta</a>()<span class="keyword"> const</span>
<a name="l00080"></a>00080 <span class="keyword">  </span>{
<a name="l00081"></a>00081     <span class="keywordflow">return</span> <a class="code" href="classTerme__Boussinesq__base.html#a78a2528154fca732e4a0856f9854f614">beta_</a>.<a class="code" href="classRef__Champ__Don.html#a567d23b6a969eefd21210613f0d361a6">valeur</a>();
<a name="l00082"></a>00082   } ;
<a name="l00083"></a><a class="code" href="classTerme__Boussinesq__base.html#a9513a15fa114df490aca729e4ef3ed1b">00083</a>   <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classConvection__Diffusion__std.html" title="classe Convection_Diffusion_std Cette classe est la base des equations modelisant le transport d&#39;un s...">Convection_Diffusion_std</a>&amp; <a class="code" href="classTerme__Boussinesq__base.html#a9513a15fa114df490aca729e4ef3ed1b">equation_scalaire</a>()<span class="keyword"> const</span>
<a name="l00084"></a>00084 <span class="keyword">  </span>{
<a name="l00085"></a>00085     <span class="keywordflow">return</span> <a class="code" href="classTerme__Boussinesq__base.html#a68bc713d5cd33c65e7c8164f41b0216d">equation_scalaire_</a>.<a class="code" href="classRef__Convection__Diffusion__std.html#a1513bb18bcebbe98facf4d87d82a7a68">valeur</a>();
<a name="l00086"></a>00086   };
<a name="l00087"></a><a class="code" href="classTerme__Boussinesq__base.html#a21513d8489d498842666d2011a2cb261">00087</a>   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classTerme__Boussinesq__base.html#a21513d8489d498842666d2011a2cb261">calculer</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; resu)<span class="keyword"> const</span>
<a name="l00088"></a>00088 <span class="keyword">  </span>{
<a name="l00089"></a>00089     resu=0;
<a name="l00090"></a>00090     <span class="keywordflow">return</span> <a class="code" href="classSource__base.html#a0cb255c8873be7d138a8589a08931e05">ajouter</a>(resu);
<a name="l00091"></a>00091   };
<a name="l00092"></a><a class="code" href="classTerme__Boussinesq__base.html#a9e23a5110b3d303f79bc434e63c1e2a3">00092</a>   <span class="keywordtype">void</span> <a class="code" href="classTerme__Boussinesq__base.html#a9e23a5110b3d303f79bc434e63c1e2a3" title="NE FAIT RIEN A surcharger dans les classes derivees. Mise a jour en temps du terme source...">mettre_a_jour</a>(<span class="keywordtype">double</span> temps)
<a name="l00093"></a>00093   {
<a name="l00094"></a>00094     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classTerme__Boussinesq__base.html#a442806d9d63296cd0e0fd445da52c3cf" title="T0=Scalaire0_(0) ou C0(i)=Scalaire0_(i)">Scalaire0_</a>.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(); i++)
<a name="l00095"></a>00095       {
<a name="l00096"></a>00096         <a class="code" href="classTerme__Boussinesq__base.html#aa3de870e43b06fb80adb3c7645f4d995">fct_Scalaire0_</a>[i].setVar(0,temps);
<a name="l00097"></a>00097         <a class="code" href="classTerme__Boussinesq__base.html#a442806d9d63296cd0e0fd445da52c3cf" title="T0=Scalaire0_(0) ou C0(i)=Scalaire0_(i)">Scalaire0_</a>[i] = <a class="code" href="classTerme__Boussinesq__base.html#aa3de870e43b06fb80adb3c7645f4d995">fct_Scalaire0_</a>[i].eval();
<a name="l00098"></a>00098       }
<a name="l00099"></a><a class="code" href="classTerme__Boussinesq__base.html#a41b13285fab0505157b8e4fb4eff0cb2">00099</a>   };
<a name="l00100"></a>00100 
<a name="l00101"></a>00101 <span class="keyword">protected</span> :
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Don__base.html" title="classe Champ_Don_base classe de base des Champs donnes (non calcules) les proprietes physiques sont d...">Champ_Don_base</a>) <a class="code" href="classTerme__Boussinesq__base.html#a41b13285fab0505157b8e4fb4eff0cb2">la_gravite_</a>;
<a name="l00104"></a><a class="code" href="classTerme__Boussinesq__base.html#a52c2b4fd5217211d6ffbff0e30bdd564">00104</a>   <span class="keywordtype">int</span> <a class="code" href="classTerme__Boussinesq__base.html#a52c2b4fd5217211d6ffbff0e30bdd564">verif_</a>;
<a name="l00105"></a><a class="code" href="classTerme__Boussinesq__base.html#a442806d9d63296cd0e0fd445da52c3cf">00105</a>   <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> <a class="code" href="classTerme__Boussinesq__base.html#a442806d9d63296cd0e0fd445da52c3cf" title="T0=Scalaire0_(0) ou C0(i)=Scalaire0_(i)">Scalaire0_</a>; <span class="comment">//!&lt; T0=Scalaire0_(0) ou C0(i)=Scalaire0_(i)</span>
<a name="l00106"></a><a class="code" href="classTerme__Boussinesq__base.html#ac864be19ac43046658a92f4e9f9ae412">00106</a> <span class="comment"></span>  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> <a class="code" href="classTerme__Boussinesq__base.html#ac864be19ac43046658a92f4e9f9ae412" title="Temperature ou Concentration.">NomScalaire_</a>; <span class="comment">//!&lt; Temperature ou Concentration</span>
<a name="l00107"></a><a class="code" href="classTerme__Boussinesq__base.html#aa3de870e43b06fb80adb3c7645f4d995">00107</a> <span class="comment"></span>  <a class="code" href="Vect_8h.html#adc7c7b04809c9aec2cb897cd2ef06378">VECT</a>(<a class="code" href="classParser__U.html" title="classe Parser_U Version de la classe Parser, derivant de Objet_U. Elle permet lors de son utilisation...">Parser_U</a>) <a class="code" href="classTerme__Boussinesq__base.html#aa3de870e43b06fb80adb3c7645f4d995">fct_Scalaire0_</a>;
<a name="l00108"></a><a class="code" href="classTerme__Boussinesq__base.html#a78a2528154fca732e4a0856f9854f614">00108</a>   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__Don.html" title="classe Champ_Don Classe generique de la hierarchie des champs donnes, un objet Champ_Don peut referen...">Champ_Don</a>) <a class="code" href="classTerme__Boussinesq__base.html#a78a2528154fca732e4a0856f9854f614">beta_</a>;
<a name="l00109"></a><a class="code" href="classTerme__Boussinesq__base.html#a68bc713d5cd33c65e7c8164f41b0216d">00109</a>   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classConvection__Diffusion__std.html" title="classe Convection_Diffusion_std Cette classe est la base des equations modelisant le transport d&#39;un s...">Convection_Diffusion_std</a>) <a class="code" href="classTerme__Boussinesq__base.html#a68bc713d5cd33c65e7c8164f41b0216d">equation_scalaire_</a>;
<a name="l00110"></a>00110   <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTerme__Boussinesq__base.html#a6bc95515593945daef16f921f9ba6bf1" title="Lit les parametres du terme source a partir d&#39;un flot d&#39;entree.">lire_donnees</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; );
<a name="l00111"></a>00111   inline <span class="keywordtype">void</span> <a class="code" href="classTerme__Boussinesq__base.html#a85ce04f5da4ad9a5270a7ccc4bbb2e7c">check</a>() const;
<a name="l00112"></a>00112 };
<a name="l00113"></a>00113 
<a name="l00114"></a><a class="code" href="classTerme__Boussinesq__base.html#a85ce04f5da4ad9a5270a7ccc4bbb2e7c">00114</a> inline <span class="keywordtype">void</span> <a class="code" href="classTerme__Boussinesq__base.html" title="Classe Terme_Boussinesq_base Cette classe represente le terme de gravite qui figure dans l&#39;equation d...">Terme_Boussinesq_base</a>::<a class="code" href="classTerme__Boussinesq__base.html#a85ce04f5da4ad9a5270a7ccc4bbb2e7c">check</a>()<span class="keyword"> const</span>
<a name="l00115"></a>00115 <span class="keyword"></span>{
<a name="l00116"></a>00116 <span class="comment">// Pas de verification autre qu&#39;au premier pas de temps, si verification pas desactivee et uniquement pour la temperature</span>
<a name="l00117"></a>00117   <span class="keywordflow">if</span> (<a class="code" href="classTerme__Boussinesq__base.html#a9513a15fa114df490aca729e4ef3ed1b">equation_scalaire</a>().probleme().schema_temps().nb_pas_dt()&gt;0 || <a class="code" href="classTerme__Boussinesq__base.html#a9513a15fa114df490aca729e4ef3ed1b">equation_scalaire</a>().probleme().reprise_effectuee() || verif_==0 || !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classConvection__Diffusion__Temperature.html" title="classe Convection_Diffusion_Temperature Cas particulier de Convection_Diffusion_std quand le scalaire...">Convection_Diffusion_Temperature</a>,<a class="code" href="classTerme__Boussinesq__base.html#a9513a15fa114df490aca729e4ef3ed1b">equation_scalaire</a>())) <span class="keywordflow">return</span>;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 <span class="comment">// Nouveau : on verifie que moyenne(T)==T0 au demarrage du calcul uniquement</span>
<a name="l00120"></a>00120   <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; T0 = <a class="code" href="classTerme__Boussinesq__base.html#a25cc8dc86f848eb2f7e44e2729462dd4">Scalaire0</a>(0);
<a name="l00121"></a>00121   <span class="keywordtype">double</span> moyenne_T = <a class="code" href="DoubleVect_8cpp.html#a71135d1749309bf589342004b76df614">mp_moyenne_vect</a>(<a class="code" href="classTerme__Boussinesq__base.html#a9513a15fa114df490aca729e4ef3ed1b">equation_scalaire</a>().inconnue().valeurs());
<a name="l00122"></a>00122   <span class="keywordflow">if</span> (<a class="code" href="Double_8h.html#a5901bfb1e96e24490e63ba2521a9cb13">inf_ou_egal</a>(moyenne_T,T0-10) || <a class="code" href="Double_8h.html#aa94d2a4492697180a3d60541af045e12">sup_ou_egal</a>(moyenne_T,T0+10))
<a name="l00123"></a>00123     {
<a name="l00124"></a>00124       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;New criteria in TRUST for the Boussinesq source term definition:&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00125"></a>00125       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;To avoid an incorrect choice for T0 value&quot;</span> &lt;&lt; finl;
<a name="l00126"></a>00126       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;the initial average temperature on the domain &quot;</span> &lt;&lt; <a class="code" href="classTerme__Boussinesq__base.html#a9513a15fa114df490aca729e4ef3ed1b">equation_scalaire</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &lt;&lt; finl;
<a name="l00127"></a>00127       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;should be between +/-10 degrees around T0 value.&quot;</span> &lt;&lt; finl;
<a name="l00128"></a>00128       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The initial average temperature is : &quot;</span> &lt;&lt; moyenne_T &lt;&lt; finl;
<a name="l00129"></a>00129       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;T0 value is : &quot;</span> &lt;&lt; T0 &lt;&lt; finl;
<a name="l00130"></a>00130       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;So, you need to change T0 or the initial temperature field to respect this criteria defined by default.&quot;</span> &lt;&lt; finl;
<a name="l00131"></a>00131       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;If you want to overcome this criteria, which it is not recommended,&quot;</span> &lt;&lt; finl;
<a name="l00132"></a>00132       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;you can specify, into the Boussinesq source term definition, the option:&quot;</span> &lt;&lt; finl;
<a name="l00133"></a>00133       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;verif_boussinesq 0&quot;</span> &lt;&lt; finl;
<a name="l00134"></a>00134       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136 }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="comment">// Methode de calcul de la valeur sur un champ aux elements d&#39;un champ uniforme ou non a plusieurs composantes</span>
<a name="l00139"></a><a class="code" href="Terme__Boussinesq__base_8h.html#ae3307475c6d97563ca95a41f06492539">00139</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; valeurs, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; elem, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; dim)
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141   <span class="keywordflow">if</span>(valeurs.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>()==1)
<a name="l00142"></a>00142     <span class="keywordflow">return</span> valeurs(elem);
<a name="l00143"></a>00143   <span class="keywordflow">else</span>
<a name="l00144"></a>00144     <span class="keywordflow">return</span> valeurs(elem,dim);
<a name="l00145"></a>00145 }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 <span class="comment">// Methode de calcul de la valeur sur une face encadree par elem1 et elem2 d&#39;un champ uniforme ou non a plusieurs composantes</span>
<a name="l00148"></a><a class="code" href="Terme__Boussinesq__base_8h.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">00148</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; valeurs_champ, <span class="keywordtype">int</span> elem1, <span class="keywordtype">int</span> elem2, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; compo)
<a name="l00149"></a>00149 {
<a name="l00150"></a>00150   <span class="keywordflow">if</span> (valeurs_champ.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0)==1)
<a name="l00151"></a>00151     <span class="keywordflow">return</span> valeurs_champ(0,compo); <span class="comment">//!&lt; Champ uniforme</span>
<a name="l00152"></a>00152 <span class="comment"></span>  <span class="keywordflow">else</span>
<a name="l00153"></a>00153     {
<a name="l00154"></a>00154       <span class="keywordflow">if</span> (elem2&lt;0) elem2 = elem1; <span class="comment">//!&lt; face frontiere</span>
<a name="l00155"></a>00155 <span class="comment"></span>      <span class="keywordflow">if</span> (valeurs_champ.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>()==1)
<a name="l00156"></a>00156         <span class="keywordflow">return</span> 0.5*(valeurs_champ(elem1)+valeurs_champ(elem2));
<a name="l00157"></a>00157       <span class="keywordflow">else</span>
<a name="l00158"></a>00158         <span class="keywordflow">return</span> 0.5*(valeurs_champ(elem1,compo)+valeurs_champ(elem2,compo));
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="preprocessor">#endif</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:35 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
