<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Framework/Source_base.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Framework/Source_base.cpp</div>  </div>
</div>
<div class="contents">
<a href="Source__base_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Source_base.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Framework</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/23</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Source__base_8h.html">Source_base.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Equation__base_8h.html">Equation_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Temps__base_8h.html">Schema_Temps_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="SFichier_8h.html">SFichier.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTabs_8h.html">DoubleTabs.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTrav_8h.html">DoubleTrav.h</a>&gt;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="Source__base_8cpp.html#aa16b15e9fbd86ed035342b2062fc3d48">00034</a> <a class="code" href="Declare__Base_8h.html#ad0be56e3a9cdd8f6dafc3864627fea86">Implemente_base</a>(<a class="code" href="classSource__base.html" title="classe Source_base Un objet Source_base est un terme apparaissant au second membre d&#39;une equation...">Source_base</a>,<span class="stringliteral">&quot;Source_base&quot;</span>,<a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>);
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="comment">// Precondition:</span>
<a name="l00038"></a>00038 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00039"></a>00039 <span class="comment">// Signification: le flot de sortie</span>
<a name="l00040"></a>00040 <span class="comment">// Valeurs par defaut:</span>
<a name="l00041"></a>00041 <span class="comment">// Contraintes:</span>
<a name="l00042"></a>00042 <span class="comment">// Acces: sortie</span>
<a name="l00043"></a>00043 <span class="comment">// Exception:</span>
<a name="l00044"></a>00044 <span class="comment">// Effets de bord: le flot de sortie est modifie</span>
<a name="l00045"></a>00045 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00046"></a>00046 <span class="comment">//</span>
<a name="l00047"></a>00047 <span class="comment">//</span>
<a name="l00048"></a>00048 <span class="comment">//</span><span class="comment"></span>
<a name="l00049"></a>00049 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.&lt;br&gt;Imprime la source sur un flot de sortie.</span>
<a name="l00050"></a>00050 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00051"></a>00051 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00052"></a>00052 <span class="comment">Contraintes: */</span>
<a name="l00053"></a><a class="code" href="classSource__base.html#a64d92e78b4f81aceadb9b02001754e12">00053</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classSource__base.html#a64d92e78b4f81aceadb9b02001754e12" title="NE FAIT RIEN A surcharger dans les classes derivees. Imprime la source sur un flot de sortie...">Source_base::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00054"></a>00054 <span class="keyword"></span>{
<a name="l00055"></a>00055   <span class="keywordflow">return</span> os;
<a name="l00056"></a>00056 }
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="comment">// Precondition:</span>
<a name="l00060"></a>00060 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00061"></a>00061 <span class="comment">// Signification: le flot d&#39;entree</span>
<a name="l00062"></a>00062 <span class="comment">// Valeurs par defaut:</span>
<a name="l00063"></a>00063 <span class="comment">// Contraintes:</span>
<a name="l00064"></a>00064 <span class="comment">// Acces: entree/sortie</span>
<a name="l00065"></a>00065 <span class="comment">// Exception:</span>
<a name="l00066"></a>00066 <span class="comment">// Effets de bord: le flot d&#39;entree est modifie</span>
<a name="l00067"></a>00067 <span class="comment">// Postcondition:</span>
<a name="l00068"></a>00068 <span class="comment">//</span>
<a name="l00069"></a>00069 <span class="comment">//</span>
<a name="l00070"></a>00070 <span class="comment">//</span><span class="comment"></span>
<a name="l00071"></a>00071 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.&lt;br&gt;Lecture d&#39;un terme source sur un flot d&#39;entree.</span>
<a name="l00072"></a>00072 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00073"></a>00073 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00074"></a>00074 <span class="comment">Contraintes: */</span>
<a name="l00075"></a><a class="code" href="classSource__base.html#a59d970b47086fd985f15a5c3ac5ddc49">00075</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classSource__base.html#a59d970b47086fd985f15a5c3ac5ddc49" title="NE FAIT RIEN A surcharger dans les classes derivees. Lecture d&#39;un terme source sur un flot d&#39;entree...">Source_base::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00076"></a>00076 {
<a name="l00077"></a>00077   <span class="keywordflow">return</span> is;
<a name="l00078"></a>00078 }
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">// Precondition:</span>
<a name="l00082"></a>00082 <span class="comment">// Parametre: double</span>
<a name="l00083"></a>00083 <span class="comment">// Signification: le pas de temps de mise a jour</span>
<a name="l00084"></a>00084 <span class="comment">// Valeurs par defaut:</span>
<a name="l00085"></a>00085 <span class="comment">// Contraintes:</span>
<a name="l00086"></a>00086 <span class="comment">// Acces:</span>
<a name="l00087"></a>00087 <span class="comment">// </span>
<a name="l00088"></a>00088 <span class="comment">// Signification:</span>
<a name="l00089"></a>00089 <span class="comment">// Contraintes:</span>
<a name="l00090"></a>00090 <span class="comment">// Exception:</span>
<a name="l00091"></a>00091 <span class="comment">// Effets de bord:</span>
<a name="l00092"></a>00092 <span class="comment">// Postcondition:</span>
<a name="l00093"></a>00093 <span class="comment">//</span>
<a name="l00094"></a>00094 <span class="comment">//</span>
<a name="l00095"></a>00095 <span class="comment">//</span><span class="comment"></span>
<a name="l00096"></a>00096 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.&lt;br&gt;Mise a jour en temps du terme source.</span>
<a name="l00097"></a><a class="code" href="classSource__base.html#a1bdbcf0d3aab63c235a1a8a22574da26">00097</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a1bdbcf0d3aab63c235a1a8a22574da26" title="NE FAIT RIEN A surcharger dans les classes derivees. Mise a jour en temps du terme source...">Source_base::mettre_a_jour</a>(<span class="keywordtype">double</span> )
<a name="l00098"></a>00098 {
<a name="l00099"></a>00099   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00100"></a>00100   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You must to overload the method Source_base::mettre_a_jour() because there&#39;s big&quot;</span> &lt;&lt; finl;
<a name="l00101"></a>00101   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;chances that the source term &quot;</span> &lt;&lt;  <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; must be updated,&quot;</span> &lt;&lt; finl;
<a name="l00102"></a>00102   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;especially if your source has a field, you must update it...&quot;</span> &lt;&lt; finl &lt;&lt; finl;
<a name="l00103"></a>00103   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00104"></a>00104 }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="comment">// Precondition:</span>
<a name="l00108"></a>00108 <span class="comment">// Parametre:</span>
<a name="l00109"></a>00109 <span class="comment">// Signification:</span>
<a name="l00110"></a>00110 <span class="comment">// Valeurs par defaut:</span>
<a name="l00111"></a>00111 <span class="comment">// Contraintes:</span>
<a name="l00112"></a>00112 <span class="comment">// Acces:</span>
<a name="l00113"></a>00113 <span class="comment">// </span>
<a name="l00114"></a>00114 <span class="comment">// Signification:</span>
<a name="l00115"></a>00115 <span class="comment">// Contraintes:</span>
<a name="l00116"></a>00116 <span class="comment">// Exception:</span>
<a name="l00117"></a>00117 <span class="comment">// Effets de bord:</span>
<a name="l00118"></a>00118 <span class="comment">// Postcondition: la source est liee a tous les objets concernes</span>
<a name="l00119"></a>00119 <span class="comment">//</span>
<a name="l00120"></a>00120 <span class="comment">//</span>
<a name="l00121"></a>00121 <span class="comment">//</span>
<a name="l00122"></a>00122 <span class="comment">//</span><span class="comment"></span>
<a name="l00123"></a>00123 <span class="comment">//! Met a jour les references internes a l&#39;objet Source_base.&lt;br&gt;Appelle 2 methodes virtuelles pures protegees:&lt;br&gt;Source_base::associer_zones(const Zone_dis\&amp; ,const Zone_Cl_dis\&amp;)&lt;br&gt;Source_base::associer_pb(const Probleme_base\&amp;)</span>
<a name="l00124"></a><a class="code" href="classSource__base.html#ab78e5efb7493861ded5a6ae9a9a23683">00124</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSource__base.html#ab78e5efb7493861ded5a6ae9a9a23683" title="Met a jour les references internes a l&#39;objet Source_base. Appelle 2 methodes virtuelles pures protege...">Source_base::completer</a>()
<a name="l00125"></a>00125 {
<a name="l00126"></a>00126   <span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn = <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>();
<a name="l00127"></a>00127   <span class="keyword">const</span> <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; zdis= eqn.<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>();
<a name="l00128"></a>00128   <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp; zcldis = eqn.<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>();
<a name="l00129"></a>00129   <a class="code" href="classSource__base.html#a0d0fd4d34b34078311f9324ece2c4e9d">associer_zones</a>(zdis, zcldis);
<a name="l00130"></a>00130   <a class="code" href="classSource__base.html#a1f6610d64520639835ca4493c2c22941">associer_pb</a>(eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>());
<a name="l00131"></a>00131 <span class="comment">// Initialize the bilan_ array:</span>
<a name="l00132"></a>00132   <a class="code" href="classSource__base.html#ad918e2d36e512f1f7ab6b8ecbaa1f80b" title="Vecteur contenant les valeurs du terme source dans le domaine.">bilan_</a>.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classDeriv__Champ__Inc__base.html#a9e0b743a3e124e7114fa977b36b68225">valeur</a>().<a class="code" href="classField__base.html#a16e3abfebaaf9b7ef83acb936c872a91" title="Renvoie le nombre de composantes du champ.">nb_comp</a>());
<a name="l00133"></a>00133   <a class="code" href="classSource__base.html#ad918e2d36e512f1f7ab6b8ecbaa1f80b" title="Vecteur contenant les valeurs du terme source dans le domaine.">bilan_</a>=0;
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="comment">//</span>
<a name="l00137"></a>00137 <span class="comment">//</span>
<a name="l00138"></a>00138 <span class="comment">//</span>
<a name="l00139"></a>00139 <span class="comment">//</span>
<a name="l00140"></a>00140 <span class="comment">//</span>
<a name="l00141"></a>00141 <span class="comment">//</span>
<a name="l00142"></a>00142 <span class="comment">//</span>
<a name="l00143"></a>00143 <span class="comment">//</span>
<a name="l00144"></a>00144 <span class="comment">//</span>
<a name="l00145"></a>00145 <span class="comment">//</span>
<a name="l00146"></a>00146 <span class="comment">//</span>
<a name="l00147"></a>00147 <span class="comment">//</span><span class="comment"></span>
<a name="l00148"></a>00148 <span class="comment">//! Cette methode (ou la methode de la classe derivee) est appelee&lt;br&gt;par Sources::associer_champ_rho pour chaque source de la liste&lt;br&gt;(par exemple, a l&#39;initialisation d&#39;un calcul front-tracking).&lt;br&gt;Cette methode doit etre reimplementee dans les classes derivees&lt;br&gt;utilisees dans les problemes a rho variable.&lt;br&gt;La methode ajouter calcule le terme suivant:&lt;br&gt;INTEGRALE            (terme source)&lt;br&gt;sur volume entrelace&lt;br&gt;Dans les problemes ou rho est variable, &quot;terme source&quot; homogene a rho*v.&lt;br&gt;Sinon, &quot;terme source&quot; est homogene a v.</span>
<a name="l00149"></a><a class="code" href="classSource__base.html#a45bad0218ad7b517f064ef4d55df2260">00149</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a45bad0218ad7b517f064ef4d55df2260" title="Cette methode (ou la methode de la classe derivee) est appelee par Sources::associer_champ_rho pour c...">Source_base::associer_champ_rho</a>(<span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; champ_rho)
<a name="l00150"></a>00150 {
<a name="l00151"></a>00151   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;In Source_base::associer_champ_rho&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00152"></a>00152   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; field : &quot;</span> &lt;&lt; champ_rho.<a class="code" href="classField__base.html#ae1377124eabe8387aced762115b062bb" title="Renvoie le nom du champ.">le_nom</a>() &lt;&lt; finl;
<a name="l00153"></a>00153   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Source of type : &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; finl;
<a name="l00154"></a>00154   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; This source does not support the association of a field rho.&quot;</span> &lt;&lt; finl;
<a name="l00155"></a>00155   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; (method associer_champ_rho must be coded for this source term).&quot;</span> &lt;&lt; finl;
<a name="l00156"></a>00156   assert(0);
<a name="l00157"></a>00157   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">//</span>
<a name="l00161"></a>00161 <span class="comment">//</span><span class="comment"></span>
<a name="l00162"></a>00162 <span class="comment">//! Si la source comprend le motcle &quot;mot&quot;, elle remplit la reference a ch_ref&lt;br&gt;et renvoie 1, sinon renvoie 0 (voir Source_Translation par ex.)</span>
<a name="l00163"></a><a class="code" href="classSource__base.html#af3909d35f22401d1dc9becb7b09c0aa3">00163</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classSource__base.html#af3909d35f22401d1dc9becb7b09c0aa3" title="Si la source comprend le motcle &quot;mot&quot;, elle remplit la reference a ch_ref et renvoie 1...">Source_base::a_pour_Champ_Fonc</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; mot,
<a name="l00164"></a>00164                                    <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>)&amp; ch_ref)<span class="keyword"> const</span>
<a name="l00165"></a>00165 <span class="keyword"></span>{
<a name="l00166"></a>00166 <span class="comment">// La classe de base ne comprend aucun motcle</span>
<a name="l00167"></a>00167   <span class="keywordflow">return</span> 0;
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="classSource__base.html#ae39d679d6cdcfb4d8867a8085fec967b">00170</a> <span class="keywordtype">void</span> <a class="code" href="classSource__base.html#ae39d679d6cdcfb4d8867a8085fec967b">Source_base::creer_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; motlu)
<a name="l00171"></a>00171 {
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a><a class="code" href="classSource__base.html#a4632bbd847ed8ae18dce07c408ad3905">00174</a> <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classSource__base.html#a4632bbd847ed8ae18dce07c408ad3905">Source_base::get_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; nom)<span class="keyword"> const</span>
<a name="l00175"></a>00175 <span class="keyword"></span>{
<a name="l00176"></a>00176   <span class="keywordflow">return</span> <a class="code" href="classSource__base.html#a1f72af14c181d04680467744f5612344">champs_compris_</a>.<a class="code" href="classChamps__compris.html#af38aefe53d102cb5ea2d328df769f85f">get_champ</a>(nom);
<a name="l00177"></a>00177 }
<a name="l00178"></a><a class="code" href="classSource__base.html#aff9469f7b34fd002b124166433696499">00178</a> <span class="keywordtype">bool</span> <a class="code" href="classSource__base.html#aff9469f7b34fd002b124166433696499">Source_base::has_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; nom, <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>)&amp; ref_champ)<span class="keyword"> const</span>
<a name="l00179"></a>00179 <span class="keyword"></span>{
<a name="l00180"></a>00180   <span class="keywordflow">return</span> <a class="code" href="classSource__base.html#a1f72af14c181d04680467744f5612344">champs_compris_</a>.<a class="code" href="classChamps__compris.html#a87773f9fe4d5e2b3901f9587be7fd9ca">has_champ</a>(nom, ref_champ);
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 
<a name="l00183"></a><a class="code" href="classSource__base.html#a3735064d13774a6125a2d73c8da1aa50">00183</a> <span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a3735064d13774a6125a2d73c8da1aa50">Source_base::get_noms_champs_postraitables</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; nom,<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35f">Option</a> opt)<span class="keyword"> const</span>
<a name="l00184"></a>00184 <span class="keyword"></span>{
<a name="l00185"></a>00185   <span class="keywordflow">if</span> (opt==<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35fab6018339139b51a498dc44bd760766fc">DESCRIPTION</a>)
<a name="l00186"></a>00186     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<span class="stringliteral">&quot; : &quot;</span>&lt;&lt;<a class="code" href="classSource__base.html#a1f72af14c181d04680467744f5612344">champs_compris_</a>.<a class="code" href="classChamps__compris.html#a6c706a60f39a30318d2a0dd2a582e50e">liste_noms_compris</a>()&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00187"></a>00187   <span class="keywordflow">else</span>
<a name="l00188"></a>00188     nom.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(<a class="code" href="classSource__base.html#a1f72af14c181d04680467744f5612344">champs_compris_</a>.<a class="code" href="classChamps__compris.html#a6c706a60f39a30318d2a0dd2a582e50e">liste_noms_compris</a>());
<a name="l00189"></a>00189 }
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 <span class="comment">// Precondition:</span>
<a name="l00193"></a>00193 <span class="comment">// Parametre: double</span>
<a name="l00194"></a>00194 <span class="comment">// Signification: le pas de temps de mise a jour</span>
<a name="l00195"></a>00195 <span class="comment">// Valeurs par defaut:</span>
<a name="l00196"></a>00196 <span class="comment">// Contraintes:</span>
<a name="l00197"></a>00197 <span class="comment">// Acces:</span>
<a name="l00198"></a>00198 <span class="comment">// </span>
<a name="l00199"></a>00199 <span class="comment">// Signification:</span>
<a name="l00200"></a>00200 <span class="comment">// Contraintes:</span>
<a name="l00201"></a>00201 <span class="comment">// Exception:</span>
<a name="l00202"></a>00202 <span class="comment">// Effets de bord:</span>
<a name="l00203"></a>00203 <span class="comment">// Postcondition:</span>
<a name="l00204"></a>00204 <span class="comment">//</span>
<a name="l00205"></a>00205 <span class="comment">//</span>
<a name="l00206"></a>00206 <span class="comment">//</span><span class="comment"></span>
<a name="l00207"></a>00207 <span class="comment">//! NE FAIT RIEN&lt;br&gt;A surcharger dans les classes derivees.&lt;br&gt;Mise a jour en temps du terme source.</span>
<a name="l00208"></a><a class="code" href="Source__base_8cpp.html#a9ba7aa0a747e92658d2f2388d73c901b">00208</a> <span class="comment"></span><span class="keyword">static</span> std::map&lt;std::string, int&gt; <a class="code" href="Source__base_8cpp.html#a9ba7aa0a747e92658d2f2388d73c901b" title="NE FAIT RIEN A surcharger dans les classes derivees. Mise a jour en temps du terme source...">counters</a>; <span class="comment">//!&lt; ToDo provisoire</span>
<a name="l00209"></a><a class="code" href="classSource__base.html#ae4e1e0e23f5f3faf4bb9d8b099c0226b">00209</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classSource__base.html#ae4e1e0e23f5f3faf4bb9d8b099c0226b">Source_base::impr</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00210"></a>00210 <span class="keyword"></span>{
<a name="l00211"></a>00211   <span class="keywordflow">if</span> (<a class="code" href="classSource__base.html#ac31044d0278d80bca2ae3f81e5660ed1" title="Nom du fichier .out pour l&#39;impression.">out_</a>==<span class="stringliteral">&quot;??&quot;</span>)
<a name="l00212"></a>00212     {
<a name="l00213"></a>00213 <span class="comment">// Cerr &lt;&lt; &quot;No balance printed for &quot; &lt;&lt; que_suis_je() &lt;&lt; finl;</span>
<a name="l00214"></a>00214     }
<a name="l00215"></a>00215   <span class="keywordflow">else</span>
<a name="l00216"></a>00216     {
<a name="l00217"></a>00217       <span class="keywordtype">int</span> nb_compo=<a class="code" href="classSource__base.html#ad918e2d36e512f1f7ab6b8ecbaa1f80b" title="Vecteur contenant les valeurs du terme source dans le domaine.">bilan_</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00218"></a>00218       <span class="keywordflow">if</span> (nb_compo==0)
<a name="l00219"></a>00219         {
<a name="l00220"></a>00220           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;No balance printed for &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00221"></a>00221           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;cause bilan_ array is not filled.&quot;</span> &lt;&lt; finl;
<a name="l00222"></a>00222         }
<a name="l00223"></a>00223       <span class="keywordflow">else</span>
<a name="l00224"></a>00224         {
<a name="l00225"></a>00225           <span class="keywordtype">int</span> flag=<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>();
<a name="l00226"></a>00226           <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> Flux;
<a name="l00227"></a>00227           <a class="code" href="classSource__base.html#a2dd4c5f50dd97196dc56250ff05f03f3" title="Ouverture/creation d&#39;un fichier d&#39;impression d&#39;un terme source A surcharger dans les classes derivees...">ouvrir_fichier</a>(Flux,<span class="stringliteral">&quot;&quot;</span>,flag);
<a name="l00228"></a>00228           <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb=<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>();
<a name="l00229"></a>00229           <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch=pb.<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>();
<a name="l00230"></a>00230           <span class="keywordtype">double</span> temps=sch.<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>();
<a name="l00231"></a>00231 
<a name="l00232"></a>00232           <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00233"></a>00233             Flux.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>(temps);
<a name="l00234"></a>00234           <a class="code" href="classDoubleVect.html">DoubleVect</a> bilan_p(<a class="code" href="classSource__base.html#ad918e2d36e512f1f7ab6b8ecbaa1f80b" title="Vecteur contenant les valeurs du terme source dans le domaine.">bilan_</a>);
<a name="l00235"></a>00235           <a class="code" href="communications_8cpp.html#a5f15b8a5c15449d3277ff3cde06fa68a">mp_sum_for_each_item</a>(bilan_p);
<a name="l00236"></a>00236           <span class="comment">/*</span>
<a name="l00237"></a>00237 <span class="comment">          for(int k=0; k&lt;nb_compo; k++)</span>
<a name="l00238"></a>00238 <span class="comment">               bilan_(k)=Process::mp_sum(bilan_(k)); */</span>
<a name="l00239"></a>00239 <span class="comment">// Replaced by:</span>
<a name="l00240"></a>00240 <span class="comment">// mp_sum_for_each_item(bilan_); // Fixed bug: double line!</span>
<a name="l00241"></a>00241 
<a name="l00242"></a>00242           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00243"></a>00243             {
<a name="l00244"></a>00244               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;nb_compo; k++)
<a name="l00245"></a>00245                 Flux.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>(bilan_p(k));
<a name="l00246"></a>00246               Flux &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00247"></a>00247             }
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250   <span class="keywordflow">return</span> 1;
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 <span class="comment">//</span>
<a name="l00253"></a>00253 <span class="comment">//</span><span class="comment"></span>
<a name="l00254"></a>00254 <span class="comment">//! Dimensionnement de la matrice implicite des termes sources.&lt;br&gt;Par defaut ne fait rien.</span>
<a name="l00255"></a><a class="code" href="classSource__base.html#af22297b3f14e611bdb20c2018dcc5547">00255</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSource__base.html#af22297b3f14e611bdb20c2018dcc5547" title="Dimensionnement de la matrice implicite des termes sources. Par defaut ne fait rien.">Source_base::dimensionner</a>(<a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; mat)<span class="keyword"> const</span>
<a name="l00256"></a>00256 <span class="keyword"></span>{
<a name="l00257"></a>00257   <span class="keywordflow">if</span> (<a class="code" href="classSource__base.html#a61f83f01f42c202a7356816df1f0b129">has_interface_blocs</a>()) <a class="code" href="classSource__base.html#a929080ddb646bba92916d1b7477f5b18">dimensionner_blocs</a>({{ <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(), &amp;mat }});
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00260"></a><a class="code" href="classSource__base.html#a255422012dc6b83c0d5e64141b11a43d">00260</a> <span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a255422012dc6b83c0d5e64141b11a43d">Source_base::dimensionner_bloc_vitesse</a>(<a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; mat)<span class="keyword"> const</span>
<a name="l00261"></a>00261 <span class="keyword"></span>{
<a name="l00262"></a>00262   <span class="keywordflow">if</span> (<a class="code" href="classSource__base.html#a61f83f01f42c202a7356816df1f0b129">has_interface_blocs</a>()) <a class="code" href="classSource__base.html#a929080ddb646bba92916d1b7477f5b18">dimensionner_blocs</a>({{ <span class="stringliteral">&quot;vitesse&quot;</span>, &amp;mat }});
<a name="l00263"></a>00263 }
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="classSource__base.html#a0cb255c8873be7d138a8589a08931e05">00265</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classSource__base.html#a0cb255c8873be7d138a8589a08931e05">Source_base::ajouter</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; secmem)<span class="keyword"> const</span>
<a name="l00266"></a>00266 <span class="keyword"></span>{
<a name="l00267"></a>00267   <span class="keywordflow">if</span> (<a class="code" href="classSource__base.html#a61f83f01f42c202a7356816df1f0b129">has_interface_blocs</a>()) <a class="code" href="classSource__base.html#a93bf2532a221e5e8b946e946d8da2eed">ajouter_blocs</a>({}, secmem, {});
<a name="l00268"></a>00268   <span class="keywordflow">else</span> <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() + <span class="stringliteral">&quot; : ajouter() not coded!&quot;</span>);
<a name="l00269"></a>00269   <span class="keywordflow">return</span> secmem;
<a name="l00270"></a>00270 }
<a name="l00271"></a>00271 
<a name="l00272"></a><a class="code" href="classSource__base.html#a079b767d93420d8c2233c67fdd3d45bd">00272</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classSource__base.html#a079b767d93420d8c2233c67fdd3d45bd">Source_base::calculer</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; secmem)<span class="keyword"> const</span>
<a name="l00273"></a>00273 <span class="keyword"></span>{
<a name="l00274"></a>00274   secmem = 0;
<a name="l00275"></a>00275   <span class="keywordflow">return</span> <a class="code" href="classSource__base.html#a0cb255c8873be7d138a8589a08931e05">ajouter</a>(secmem);
<a name="l00276"></a>00276 }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 <span class="comment">//</span>
<a name="l00279"></a>00279 <span class="comment">//</span><span class="comment"></span>
<a name="l00280"></a>00280 <span class="comment">//! contribution a la matrice implicite des termes sources&lt;br&gt;par defaut pas de contribution</span>
<a name="l00281"></a><a class="code" href="classSource__base.html#a19bb6ea064d922c59781ab1a4337b718">00281</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a19bb6ea064d922c59781ab1a4337b718" title="contribution a la matrice implicite des termes sources par defaut pas de contribution">Source_base::contribuer_a_avec</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp;, <a class="code" href="classMatrice__Morse.html" title="Classe Matrice_Morse Represente une matrice M (creuse), non necessairement carree stockee au format M...">Matrice_Morse</a>&amp; mat)<span class="keyword"> const</span>
<a name="l00282"></a>00282 <span class="keyword"></span>{
<a name="l00283"></a>00283   <span class="keywordflow">if</span> (!<a class="code" href="classSource__base.html#a61f83f01f42c202a7356816df1f0b129">has_interface_blocs</a>()) <span class="keywordflow">return</span>;
<a name="l00284"></a>00284   <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> secmem(<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().inconnue().valeurs()); <span class="comment">//sera jete</span>
<a name="l00285"></a>00285   <a class="code" href="classSource__base.html#a93bf2532a221e5e8b946e946d8da2eed">ajouter_blocs</a>({{ <a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classO__U__Ptr.html#a5aae0c48048a40339f3847aa14109231" title="Renvoie ref_().le_nom() si le pointeur est non nul ou &quot;Pointeur Nul&quot;.">le_nom</a>().<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>(), &amp;mat}}, secmem, {});
<a name="l00286"></a>00286 }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 <span class="comment">//</span>
<a name="l00289"></a>00289 <span class="comment">//</span>
<a name="l00290"></a>00290 <span class="comment">//</span><span class="comment"></span>
<a name="l00291"></a>00291 <span class="comment">//! contribution au second membres des termes sources en implicite&lt;br&gt;par defaut erreur&lt;br&gt;methode presente par coherence avec Operateur_base</span>
<a name="l00292"></a><a class="code" href="classSource__base.html#a8316abb9b1dfa4845d4e8276557b226f">00292</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a8316abb9b1dfa4845d4e8276557b226f" title="contribution au second membres des termes sources en implicite par defaut erreur methode presente par...">Source_base::contribuer_au_second_membre</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; )<span class="keyword"> const</span>
<a name="l00293"></a>00293 <span class="keyword"></span>{
<a name="l00294"></a>00294   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Source_base::contribuer_au_second_membre(DoubleTab&amp; ) const uncoded&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00295"></a>00295   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00296"></a>00296 }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">/* par defaut erreur */</span>
<a name="l00299"></a>00299 <span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a929080ddb646bba92916d1b7477f5b18">Source_base::dimensionner_blocs</a>(<a class="code" href="Interface__blocs_8h.html#a68e4f5c4505f6b31305de844302660bb">matrices_t</a> matrices, <span class="keyword">const</span> <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a>&amp; semi_impl)<span class="keyword"> const</span>
<a name="l00300"></a>00300 <span class="keyword"></span>{
<a name="l00301"></a>00301   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() + <span class="stringliteral">&quot; : dimensionner_blocs() not coded!&quot;</span>);
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 <span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a93bf2532a221e5e8b946e946d8da2eed">Source_base::ajouter_blocs</a>(<a class="code" href="Interface__blocs_8h.html#a68e4f5c4505f6b31305de844302660bb">matrices_t</a> matrices, <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; secmem, <span class="keyword">const</span> <a class="code" href="Interface__blocs_8h.html#a2d7480bf11fc9f791b1d2839fa30a5c3">tabs_t</a>&amp; semi_impl)<span class="keyword"> const</span>
<a name="l00304"></a>00304 <span class="keyword"></span>{
<a name="l00305"></a>00305   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() + <span class="stringliteral">&quot; : ajouter_blocs() not coded!&quot;</span>);
<a name="l00306"></a>00306 }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="comment">// Precondition:</span>
<a name="l00309"></a>00309 <span class="comment">// Parametre:</span>
<a name="l00310"></a>00310 <span class="comment">// Signification:</span>
<a name="l00311"></a>00311 <span class="comment">// Valeurs par defaut:</span>
<a name="l00312"></a>00312 <span class="comment">// Contraintes:</span>
<a name="l00313"></a>00313 <span class="comment">// Acces:</span>
<a name="l00314"></a>00314 <span class="comment">// </span>
<a name="l00315"></a>00315 <span class="comment">// Signification:</span>
<a name="l00316"></a>00316 <span class="comment">// Contraintes:</span>
<a name="l00317"></a>00317 <span class="comment">// Exception:</span>
<a name="l00318"></a>00318 <span class="comment">// Effets de bord:</span>
<a name="l00319"></a>00319 <span class="comment">// Postcondition:</span>
<a name="l00320"></a>00320 <span class="comment">//</span>
<a name="l00321"></a>00321 <span class="comment">//</span>
<a name="l00322"></a>00322 <span class="comment">//</span>
<a name="l00323"></a>00323 <span class="comment">//</span><span class="comment"></span>
<a name="l00324"></a>00324 <span class="comment">//! Contrairement aux methodes mettre_a_jour, les methodes&lt;br&gt;initialiser des sources ne peuvent pas dependre de l&#39;exterieur&lt;br&gt;(lui-meme peut ne pas etre initialise)&lt;br&gt;Par defaut, mettre_a_jour</span>
<a name="l00325"></a><a class="code" href="classSource__base.html#a71fcb800079667d5019b64a1efdf96f7">00325</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classSource__base.html#a71fcb800079667d5019b64a1efdf96f7" title="Contrairement aux methodes mettre_a_jour, les methodes initialiser des sources ne peuvent pas dependr...">Source_base::initialiser</a>(<span class="keywordtype">double</span> temps)
<a name="l00326"></a>00326 {
<a name="l00327"></a>00327   <a class="code" href="classSource__base.html#a1bdbcf0d3aab63c235a1a8a22574da26" title="NE FAIT RIEN A surcharger dans les classes derivees. Mise a jour en temps du terme source...">mettre_a_jour</a>(temps);
<a name="l00328"></a>00328   <span class="keywordflow">return</span> 1;
<a name="l00329"></a>00329 }
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 <span class="comment">// Precondition:</span>
<a name="l00333"></a>00333 <span class="comment">// Parametre:</span>
<a name="l00334"></a>00334 <span class="comment">// Signification:</span>
<a name="l00335"></a>00335 <span class="comment">// Valeurs par defaut:</span>
<a name="l00336"></a>00336 <span class="comment">// Contraintes:</span>
<a name="l00337"></a>00337 <span class="comment">// Acces:</span>
<a name="l00338"></a>00338 <span class="comment">// </span>
<a name="l00339"></a>00339 <span class="comment">// Signification:</span>
<a name="l00340"></a>00340 <span class="comment">// Contraintes:</span>
<a name="l00341"></a>00341 <span class="comment">// Exception: methode a surcharger</span>
<a name="l00342"></a>00342 <span class="comment">// Effets de bord:</span>
<a name="l00343"></a>00343 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00344"></a>00344 <span class="comment">//</span>
<a name="l00345"></a>00345 <span class="comment">//</span><span class="comment"></span>
<a name="l00346"></a>00346 <span class="comment">//! Ouverture/creation d&#39;un fichier d&#39;impression d&#39;un terme source&lt;br&gt;A surcharger dans les classes derivees.</span>
<a name="l00347"></a><a class="code" href="classSource__base.html#a2dd4c5f50dd97196dc56250ff05f03f3">00347</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a2dd4c5f50dd97196dc56250ff05f03f3" title="Ouverture/creation d&#39;un fichier d&#39;impression d&#39;un terme source A surcharger dans les classes derivees...">Source_base::ouvrir_fichier</a>(<a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a>&amp; os,<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; type, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; flag)<span class="keyword"> const</span>
<a name="l00348"></a>00348 <span class="keyword"></span>{
<a name="l00349"></a>00349 <span class="comment">// flag nul on n&#39;ouvre pas le fichier</span>
<a name="l00350"></a>00350   <span class="keywordflow">if</span> (flag==0)
<a name="l00351"></a>00351     return ;
<a name="l00352"></a>00352 <span class="comment">// ToDo provisoire:</span>
<a name="l00353"></a>00353   counters[type.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>()]++;
<a name="l00354"></a>00354   <span class="keywordflow">if</span> (counters[type.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>()]&gt;1 &amp;&amp; type!=<span class="stringliteral">&quot;&quot;</span>)
<a name="l00355"></a>00355     {
<a name="l00356"></a>00356       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Code should be rewritten to have only one call to Source_base::ouvrir_fichier for &quot;</span> &lt;&lt; type &lt;&lt; <span class="stringliteral">&quot; source and not &quot;</span> &lt;&lt; counters[type.<a class="code" href="classNom.html#a855d8cd96b5c73c2aa55cb7c0a870640">getString</a>()] &lt;&lt; <span class="stringliteral">&quot; times.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00357"></a>00357       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359   <span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb=<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>();
<a name="l00360"></a>00360   <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch=pb.<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>();
<a name="l00361"></a>00361   <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; precision = sch.<a class="code" href="classSchema__Temps__base.html#a340db779c9f9a2645534a79341fdd68b">precision_impr</a>(), wcol = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(<a class="code" href="classSource__base.html#a6eca008a52de9bcea2630a5d0dbfa121">col_width_</a>, sch.<a class="code" href="classSchema__Temps__base.html#a42e834b69662e506a1a33c24353d9e4a">wcol</a>()), gnuplot_header = sch.<a class="code" href="classSchema__Temps__base.html#a82bb81e8be6b45526ee0153aad87d95d">gnuplot_header</a>();
<a name="l00362"></a>00362   os.<a class="code" href="classSortie.html#abe94d93b9b47ea0dda9a961a6eff45c5">set_col_width</a>(wcol);
<a name="l00363"></a>00363 
<a name="l00364"></a>00364   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nomfichier(<a class="code" href="classSource__base.html#ac31044d0278d80bca2ae3f81e5660ed1" title="Nom du fichier .out pour l&#39;impression.">out_</a>);
<a name="l00365"></a>00365   <span class="keywordflow">if</span> (type!=<span class="stringliteral">&quot;&quot;</span>) nomfichier+=(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>)<span class="stringliteral">&quot;_&quot;</span>+type;
<a name="l00366"></a>00366   nomfichier+=<span class="stringliteral">&quot;.out&quot;</span>;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <span class="comment">// On cree le fichier a la premiere impression avec l&#39;en tete</span>
<a name="l00369"></a>00369   <span class="keywordflow">if</span> (sch.<a class="code" href="classSchema__Temps__base.html#a84c5b1a3eb859cd76e245ae0b2d0a9ef" title="Renvoie le nombre d&#39;impressions effectuees.">nb_impr</a>()==1 &amp;&amp; !pb.<a class="code" href="classProbleme__base.html#acafc48b3c050d6c292bb8395a7904a33">reprise_effectuee</a>())
<a name="l00370"></a>00370     {
<a name="l00371"></a>00371       os.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nomfichier);
<a name="l00372"></a>00372       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a>&amp; fic=os;
<a name="l00373"></a>00373       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> espace=<span class="stringliteral">&quot;\t\t&quot;</span>;
<a name="l00374"></a>00374       fic &lt;&lt; (<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>)<span class="stringliteral">&quot;# Printing of the source term &quot;</span>+<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()+<span class="stringliteral">&quot; of the equation &quot;</span>+<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()+<span class="stringliteral">&quot; of the problem &quot;</span>+<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00375"></a>00375       fic &lt;&lt; <span class="stringliteral">&quot;# &quot;</span> &lt;&lt; <a class="code" href="classSource__base.html#a8083ca5a7aef041b9753936a2ba83f3a">description</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00376"></a>00376       <span class="keywordflow">if</span> (!gnuplot_header) fic &lt;&lt; <span class="stringliteral">&quot;#&quot;</span>;
<a name="l00377"></a>00377       os.<a class="code" href="classSortie.html#abe94d93b9b47ea0dda9a961a6eff45c5">set_col_width</a>(wcol - !gnuplot_header);
<a name="l00378"></a>00378       fic.<a class="code" href="classSortie.html#aed397f2acfa499f2c34be9657a724de0">add_col</a>(<span class="stringliteral">&quot;Time&quot;</span>);
<a name="l00379"></a>00379       os.<a class="code" href="classSortie.html#abe94d93b9b47ea0dda9a961a6eff45c5">set_col_width</a>(wcol);
<a name="l00380"></a>00380       fic &lt;&lt; finl;
<a name="l00381"></a>00381     }
<a name="l00382"></a>00382 <span class="comment">// Sinon on l&#39;ouvre</span>
<a name="l00383"></a>00383   <span class="keywordflow">else</span>
<a name="l00384"></a>00384     {
<a name="l00385"></a>00385       os.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(nomfichier,ios::app);
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387   os.<a class="code" href="classSortie__Fichier__base.html#a489ca01946f4e2a7a9aa8f3a3d949b08">precision</a>(precision);
<a name="l00388"></a>00388   os.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l00389"></a>00389 }
<a name="l00390"></a>00390 
<a name="l00391"></a><a class="code" href="classSource__base.html#a0c7ba45384fd8a09c418d72496990a02">00391</a> <span class="keywordtype">void</span> <a class="code" href="classSource__base.html#a0c7ba45384fd8a09c418d72496990a02">Source_base::set_fichier</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom)
<a name="l00392"></a>00392 {
<a name="l00393"></a>00393   <a class="code" href="classSource__base.html#ac31044d0278d80bca2ae3f81e5660ed1" title="Nom du fichier .out pour l&#39;impression.">out_</a>=<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>();
<a name="l00394"></a>00394   <a class="code" href="classSource__base.html#ac31044d0278d80bca2ae3f81e5660ed1" title="Nom du fichier .out pour l&#39;impression.">out_</a>+=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l00395"></a>00395   <a class="code" href="classSource__base.html#ac31044d0278d80bca2ae3f81e5660ed1" title="Nom du fichier .out pour l&#39;impression.">out_</a>+=<a class="code" href="classMorEqn.html#a615dd9abff96edcb625fa0424a489864" title="Renvoie la reference sur l&#39;equation pointe par MorEqn::mon_equation. (version const)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>()+<span class="stringliteral">&quot;_&quot;</span>+nom;
<a name="l00396"></a>00396 }
<a name="l00397"></a>00397 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:17 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
