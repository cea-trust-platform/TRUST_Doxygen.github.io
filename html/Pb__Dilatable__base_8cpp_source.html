<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Dilatable/Common/Problems/Pb_Dilatable_base.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Dilatable/Common/Problems/Pb_Dilatable_base.cpp</div>  </div>
</div>
<div class="contents">
<a href="Pb__Dilatable__base_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment"> * 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment"> * 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment"> * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment"> * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> *****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Pb_Dilatable_base.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Dilatable/Common/Problems</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/19</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Euler__explicite_8h.html">Schema_Euler_explicite.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Euler__Implicite_8h.html">Schema_Euler_Implicite.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Fluide__Dilatable__base_8h.html">Fluide_Dilatable_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Loi__Fermeture__base_8h.html">Loi_Fermeture_base.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Pb__Dilatable__base_8h.html">Pb_Dilatable_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__Couple_8h.html">Probleme_Couple.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Equation__base_8h.html">Equation_base.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="stat__counters_8h.html">stat_counters.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Pred__Cor_8h.html">Pred_Cor.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Debog_8h.html">Debog.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="RRK2_8h.html">RRK2.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="RK3_8h.html">RK3.h</a>&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="Pb__Dilatable__base_8cpp.html#a9a819e67a74613980a6a3982cc6689ce">00037</a> <a class="code" href="Declare__Base_8h.html#ad0be56e3a9cdd8f6dafc3864627fea86">Implemente_base</a>(<a class="code" href="classPb__Dilatable__base.html" title="classe Pb_Dilatable_base Cette classe est censee factoriser ce qui est commun a l&#39;ensemble des proble...">Pb_Dilatable_base</a>,<span class="stringliteral">&quot;Pb_Dilatable_base&quot;</span>,<a class="code" href="classPb__Fluide__base.html" title="classe Pb_Fluide_base Cette classe a pour but de disposer d une classe amont pour la hierarchie des p...">Pb_Fluide_base</a>);
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="classPb__Dilatable__base.html#afc9ec390d9fe6764fc86edbea2145807">00039</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classPb__Dilatable__base.html#afc9ec390d9fe6764fc86edbea2145807" title="Surcharge Objet_U::printOn(Sortie&amp;) Ecriture d&#39;un probleme sur un flot de sortie. !! Attention n&#39;est ...">Pb_Dilatable_base::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classPb__Dilatable__base.html#afc9ec390d9fe6764fc86edbea2145807" title="Surcharge Objet_U::printOn(Sortie&amp;) Ecriture d&#39;un probleme sur un flot de sortie. !! Attention n&#39;est ...">Pb_Fluide_base::printOn</a>(os); }
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="classPb__Dilatable__base.html#a3b7b1c6d264e9cecdc909bc0025605b8">00041</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classPb__Dilatable__base.html#a3b7b1c6d264e9cecdc909bc0025605b8" title="Lecture d&#39;un probleme dans un flot d&#39;entree, et ouverture du flot de sauvegarde. Format: { nom_equati...">Pb_Dilatable_base::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is) { <span class="keywordflow">return</span> <a class="code" href="classPb__Dilatable__base.html#a3b7b1c6d264e9cecdc909bc0025605b8" title="Lecture d&#39;un probleme dans un flot d&#39;entree, et ouverture du flot de sauvegarde. Format: { nom_equati...">Pb_Fluide_base::readOn</a>(is); }
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="classPb__Dilatable__base.html#a57f425a914267c236c587cff4b4a3ca3">00043</a> <span class="keywordtype">void</span> <a class="code" href="classPb__Dilatable__base.html#a57f425a914267c236c587cff4b4a3ca3" title="Associe un milieu physique aux equations du probleme. Choix du milieu physique.">Pb_Dilatable_base::associer_milieu_base</a>(<span class="keyword">const</span> <a class="code" href="classMilieu__base.html" title="classe Milieu_base Cette classe est la base de la hierarchie des milieux (physiques) Elle regroupe le...">Milieu_base</a>&amp; mil)
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045   <a class="code" href="classPb__Dilatable__base.html#a57f425a914267c236c587cff4b4a3ca3" title="Associe un milieu physique aux equations du probleme. Choix du milieu physique.">Pb_Fluide_base::associer_milieu_base</a>(mil);
<a name="l00046"></a>00046   <a class="code" href="classPb__Dilatable__base.html#aae836b47a7948fe2493caeba3caa18cc">le_fluide_</a> =  <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__Dilatable__base.html" title="classe Fluide_Dilatable_base Cette classe represente un d&#39;un fluide dilatable, heritant de fluide bas...">Fluide_Dilatable_base</a>,mil);
<a name="l00047"></a>00047 }
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="classPb__Dilatable__base.html#a0b659236703a104411246196be04ad95">00049</a> <span class="keywordtype">void</span> <a class="code" href="classPb__Dilatable__base.html#a0b659236703a104411246196be04ad95" title="Associe un schema en temps au probleme. Associe ensuite le schema en temps a toutes les equations du ...">Pb_Dilatable_base::associer_sch_tps_base</a>(<span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch)
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051   <span class="keywordflow">if</span> (!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classSchema__Euler__explicite.html" title="classe Schema_Euler_explicite Cette classe represente un schema en temps d&#39;Euler explicite: U(n+1) = ...">Schema_Euler_explicite</a>,sch) &amp;&amp; !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classSchema__Euler__Implicite.html">Schema_Euler_Implicite</a>,sch)
<a name="l00052"></a>00052       &amp;&amp; !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classRRK2.html" title="classe RRK2 Cette classe represente un schema de Runge Kutta rationel d&#39;ordre 2 qui s&#39;ecrit: U(n+1) =...">RRK2</a>,sch) &amp;&amp; !<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classRK3.html" title="classe RK3 Cette classe represente un schema en temps de Runge Kutta d&#39;ordre 3 (cas 7 de Williamson) ...">RK3</a>,sch))
<a name="l00053"></a>00053     {
<a name="l00054"></a>00054       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;TRUST can&#39;t solve a &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; with a &quot;</span> &lt;&lt; sch.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; time scheme.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00055"></a>00055       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00056"></a>00056     }
<a name="l00057"></a>00057   <span class="keywordflow">if</span> ( <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classSchema__Euler__Implicite.html">Schema_Euler_Implicite</a>,sch) &amp;&amp; <a class="code" href="classProbleme__base.html#a4174a07b5fb23615cbdd94909ba26878" title="Flag to indicate it is a part of a coupled problem.">coupled_</a>==1 )
<a name="l00058"></a>00058     {
<a name="l00059"></a>00059       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00060"></a>00060       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Coupled problem with unique Euler implicit time scheme with &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt;  <span class="stringliteral">&quot;fluid are not allowed!&quot;</span> &lt;&lt; finl;
<a name="l00061"></a>00061       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Choose another time scheme or set a time scheme for each of your problems.&quot;</span> &lt;&lt; finl;
<a name="l00062"></a>00062       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00063"></a>00063     }
<a name="l00064"></a>00064   <a class="code" href="classPb__Dilatable__base.html#a0b659236703a104411246196be04ad95" title="Associe un schema en temps au probleme. Associe ensuite le schema en temps a toutes les equations du ...">Pb_Fluide_base::associer_sch_tps_base</a>(sch);
<a name="l00065"></a>00065 }
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="classPb__Dilatable__base.html#aeb1f42ae8e29e5f632ad754b904f8da4">00067</a> <span class="keywordtype">void</span> <a class="code" href="classPb__Dilatable__base.html#aeb1f42ae8e29e5f632ad754b904f8da4" title="Prepare le calcul: initialise les parametres du milieu et prepare le calcul de chacune des equations...">Pb_Dilatable_base::preparer_calcul</a>()
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069   <a class="code" href="classFluide__Dilatable__base.html" title="classe Fluide_Dilatable_base Cette classe represente un d&#39;un fluide dilatable, heritant de fluide bas...">Fluide_Dilatable_base</a>&amp; le_fluide = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__Dilatable__base.html" title="classe Fluide_Dilatable_base Cette classe represente un d&#39;un fluide dilatable, heritant de fluide bas...">Fluide_Dilatable_base</a>,<a class="code" href="classProbleme__base.html#aa51e16d0fb82fdce0019358267307d18" title="Renvoie le milieu physique associe au probleme. (version const) On renvoie le milieu associe a la pre...">milieu</a>());
<a name="l00070"></a>00070   <span class="keywordflow">if</span> (le_fluide.<a class="code" href="classFluide__Dilatable__base.html#af310e9aeafbd35af667d91bb88714537">type_fluide</a>()==<span class="stringliteral">&quot;Gaz_Reel&quot;</span>) <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(1).<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>()-&gt;<a class="code" href="classObjet__U.html#a469dbcad1d4a98a67e4246dce8e264ad" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(<span class="stringliteral">&quot;temperature&quot;</span>);
<a name="l00071"></a>00071   <span class="keywordflow">if</span> (le_fluide.<a class="code" href="classFluide__Dilatable__base.html#af310e9aeafbd35af667d91bb88714537">type_fluide</a>()==<span class="stringliteral">&quot;Melange_Binaire&quot;</span>) <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(1).<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>()-&gt;<a class="code" href="classObjet__U.html#a469dbcad1d4a98a67e4246dce8e264ad" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(<span class="stringliteral">&quot;fraction_massique&quot;</span>);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073   le_fluide.<a class="code" href="classFluide__Dilatable__base.html#af200f2acd5bfa46caedf2a42c5c7b2cf" title="Complete le fluide avec les champs inconnus associes au probleme.">completer</a>(*<span class="keyword">this</span>);
<a name="l00074"></a>00074   le_fluide.<a class="code" href="classFluide__Dilatable__base.html#ada99b348f68585754f323b36f1494969" title="Prepare le fluide au calcul.">preparer_calcul</a>();
<a name="l00075"></a>00075   <a class="code" href="classPb__Dilatable__base.html#aeb1f42ae8e29e5f632ad754b904f8da4" title="Prepare le calcul: initialise les parametres du milieu et prepare le calcul de chacune des equations...">Pb_Fluide_base::preparer_calcul</a>();
<a name="l00076"></a>00076   le_fluide.<a class="code" href="classFluide__Dilatable__base.html#ad14a12413565063ecd63b46422403ddb">calculer_masse_volumique</a>();
<a name="l00077"></a>00077   le_fluide.<a class="code" href="classFluide__Dilatable__base.html#ada99b348f68585754f323b36f1494969" title="Prepare le fluide au calcul.">preparer_calcul</a>();
<a name="l00078"></a>00078 }
<a name="l00079"></a>00079 
<a name="l00080"></a><a class="code" href="classPb__Dilatable__base.html#ac3d1652f58a156a4794eb1d9b58eb127">00080</a> <span class="keywordtype">bool</span> <a class="code" href="classPb__Dilatable__base.html#ac3d1652f58a156a4794eb1d9b58eb127" title="This method allocates and initializes the unknown and given fields for the future time step...">Pb_Dilatable_base::initTimeStep</a>(<span class="keywordtype">double</span> dt)
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082   <span class="keywordtype">bool</span> ok = <a class="code" href="classPb__Dilatable__base.html#ac3d1652f58a156a4794eb1d9b58eb127" title="This method allocates and initializes the unknown and given fields for the future time step...">Pb_Fluide_base::initTimeStep</a>(dt);
<a name="l00083"></a>00083   <a class="code" href="classPb__Dilatable__base.html#aae836b47a7948fe2493caeba3caa18cc">le_fluide_</a>-&gt;preparer_pas_temps();
<a name="l00084"></a>00084   <span class="keywordflow">return</span> ok;
<a name="l00085"></a>00085 }
<a name="l00086"></a>00086 
<a name="l00087"></a><a class="code" href="classPb__Dilatable__base.html#afea65e4ad5fa1763b48bc1aaf68e0e96">00087</a> <span class="keywordtype">void</span> <a class="code" href="classPb__Dilatable__base.html#afea65e4ad5fa1763b48bc1aaf68e0e96" title="Ne met a jour que les postraitements.">Pb_Dilatable_base::mettre_a_jour</a>(<span class="keywordtype">double</span> temps)
<a name="l00088"></a>00088 {
<a name="l00089"></a>00089   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00090"></a>00090   <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(1).<a class="code" href="classEquation__base.html#a62757c897af44f346e3a9e65e38aa122" title="La valeur de l&#39;inconnue sur le pas de temps a ete calculee. Cette methode avance le present jusqu&#39;au ...">mettre_a_jour</a>(temps); <span class="comment">//!&lt; thermique</span>
<a name="l00091"></a>00091 <span class="comment"></span>  <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a62757c897af44f346e3a9e65e38aa122" title="La valeur de l&#39;inconnue sur le pas de temps a ete calculee. Cette methode avance le present jusqu&#39;au ...">mettre_a_jour</a>(temps); <span class="comment">//!&lt; NS</span>
<a name="l00092"></a>00092 <span class="comment"></span>
<a name="l00093"></a>00093   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=2; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++) <span class="comment">//!&lt; if species ...</span>
<a name="l00094"></a>00094 <span class="comment"></span>    <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a62757c897af44f346e3a9e65e38aa122" title="La valeur de l&#39;inconnue sur le pas de temps a ete calculee. Cette methode avance le present jusqu&#39;au ...">mettre_a_jour</a>(temps);
<a name="l00095"></a>00095 
<a name="l00096"></a>00096   <a class="code" href="classProbleme__base.html#a4b8077ec2cee73e64f845e5dc969096f">les_postraitements</a>.<a class="code" href="classPostraitements.html#af73afcb31f834ac13a2912b5b1a5b78e">mettre_a_jour</a>(temps);
<a name="l00097"></a>00097   <a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a6ceaaa22c7b9bab643184b4c7ffbb0e1">mettre_a_jour</a>(temps,<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>(),*<span class="keyword">this</span>);
<a name="l00098"></a>00098   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>)) curseur = <a class="code" href="classProbleme__base.html#a1e93b7ef622940f2042e2c78e65e6681" title="liste des fermetures associees au probleme">liste_loi_fermeture_</a>;
<a name="l00099"></a>00099   <span class="keywordflow">while</span> (curseur)
<a name="l00100"></a>00100     {
<a name="l00101"></a>00101       <a class="code" href="classLoi__Fermeture__base.html" title=": Classe de base des lois de fermetures. Cette classe calcule des champs qui peuvent dependre de plus...">Loi_Fermeture_base</a>&amp; loi=curseur.valeur().valeur();
<a name="l00102"></a>00102       loi.<a class="code" href="classLoi__Fermeture__base.html#add87a45fab4acf2ae285a203f8e869ee" title="Cette methode est appelee par le probleme apres mettre_a_jour() des equations et du milieu...">mettre_a_jour</a>(temps);
<a name="l00103"></a>00103       ++curseur;
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105 }
<a name="l00106"></a>00106 
<a name="l00107"></a><a class="code" href="classPb__Dilatable__base.html#af4d0700e42db63d34c3b9d7f0b0b7cb1">00107</a> <span class="keywordtype">bool</span> <a class="code" href="classPb__Dilatable__base.html#af4d0700e42db63d34c3b9d7f0b0b7cb1" title="In the case solveTimeStep uses an iterative process, this method executes a single iteration...">Pb_Dilatable_base::iterateTimeStep</a>(<span class="keywordtype">bool</span>&amp; converged)
<a name="l00108"></a>00108 {
<a name="l00109"></a>00109   <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>());
<a name="l00110"></a>00110   <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>();
<a name="l00111"></a>00111   <span class="keywordtype">double</span> temps_present=sch.<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>();
<a name="l00112"></a>00112   <span class="keywordtype">double</span> temps_futur=temps_present+sch.<a class="code" href="classSchema__Temps__base.html#a0e4f67ef6086c09434ddc161668077b2" title="Renvoie le pas de temps (delta_t) courant.">pas_de_temps</a>();
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="comment">// 1. Solve all the equations except the first one (Navier Stokes, solved later at //6)</span>
<a name="l00115"></a>00115   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00116"></a>00116     {
<a name="l00117"></a>00117       sch.<a class="code" href="classSchema__Temps__base.html#aaf384ecbdb1555490cad2f1779dd5a9c">faire_un_pas_de_temps_eqn_base</a>(<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i));
<a name="l00118"></a>00118       <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#ad0ff5c8b0553621de2a881e6965b6e52">mettre_a_jour_counter_</a>);
<a name="l00119"></a>00119       <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>().<a class="code" href="classMilieu__base.html#a454266f60ba546bb1946c2394d659804">mettre_a_jour</a>(temps_futur);
<a name="l00120"></a>00120       <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classChamp__Inc.html#aa18fe93c1bb1b1131f31e7ab89da1d02">mettre_a_jour</a>(temps_futur);
<a name="l00121"></a>00121       <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#ad0ff5c8b0553621de2a881e6965b6e52">mettre_a_jour_counter_</a>);
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#ad0ff5c8b0553621de2a881e6965b6e52">mettre_a_jour_counter_</a>);
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 <span class="comment">// 2. Compute temperature-dependent coefficients</span>
<a name="l00127"></a>00127   <a class="code" href="classPb__Dilatable__base.html#aae836b47a7948fe2493caeba3caa18cc">le_fluide_</a>-&gt;calculer_coeff_T();
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 <span class="comment">// 3. Compute volumic mass (update Cp)</span>
<a name="l00130"></a>00130   <a class="code" href="classPb__Dilatable__base.html#aae836b47a7948fe2493caeba3caa18cc">le_fluide_</a>-&gt;calculer_masse_volumique();
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 <span class="comment">// 4. Solve EDO equation (pressure) if needed (ie. QC)</span>
<a name="l00133"></a>00133   <a class="code" href="classPb__Dilatable__base.html#a2a67fb1ba2521dd386c9189122e889d3">solve_pressure_thermo</a>();
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="comment">// 5. Compute volumic mass</span>
<a name="l00136"></a>00136   <a class="code" href="classPb__Dilatable__base.html#aae836b47a7948fe2493caeba3caa18cc">le_fluide_</a>-&gt;calculer_masse_volumique();
<a name="l00137"></a>00137   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#ad0ff5c8b0553621de2a881e6965b6e52">mettre_a_jour_counter_</a>);
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 <span class="comment">// 6. Solve Navier Stokes equation</span>
<a name="l00140"></a>00140   sch.<a class="code" href="classSchema__Temps__base.html#aaf384ecbdb1555490cad2f1779dd5a9c">faire_un_pas_de_temps_eqn_base</a>(<a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0));
<a name="l00141"></a>00141   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#affcd058809786918ed173aaf681d0843">begin_count</a>(<a class="code" href="stat__counters_8cpp.html#ad0ff5c8b0553621de2a881e6965b6e52">mettre_a_jour_counter_</a>);
<a name="l00142"></a>00142   <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a181e9899e2d927eb14c835d9d9334f46">milieu</a>().<a class="code" href="classMilieu__base.html#a454266f60ba546bb1946c2394d659804">mettre_a_jour</a>(temps_futur);
<a name="l00143"></a>00143   <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(0).<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classChamp__Inc.html#aa18fe93c1bb1b1131f31e7ab89da1d02">mettre_a_jour</a>(temps_futur);
<a name="l00144"></a>00144   <a class="code" href="Statistiques_8h.html#a7bb2ce53a9ec088bba93ddcfce2b8cb1">statistiques</a>().<a class="code" href="classStatistiques.html#a0faf52d1b518f5b0b2177f22efcc222d" title="Arret du compteur counter_id. On ajoute quantity a la somme des &#39;quantity&#39; (par defaut 0) stockees po...">end_count</a>(<a class="code" href="stat__counters_8cpp.html#ad0ff5c8b0553621de2a881e6965b6e52">mettre_a_jour_counter_</a>);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="comment">// Update pressure fields (total/thermo/hydro) if necessary</span>
<a name="l00147"></a>00147   <a class="code" href="classPb__Dilatable__base.html#ad90d2a9358b8862ae5db72f288e9bc5f">update_pressure_fields</a>(temps_futur);
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="comment">// on recule les inconnues (le pb mettra a jour les equations)</span>
<a name="l00150"></a>00150   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00151"></a>00151     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classChamp__Inc.html#a241a2a375658a606c3d659600a991bb5" title="Appel a l&#39;objet sous-jacent Recule le temps courant du champ de i pas de temps.">reculer</a>();
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <span class="comment">// Calculs coeffs echange sur l&#39;instant sur lequel doivent agir les operateurs.</span>
<a name="l00154"></a>00154   <span class="keywordtype">double</span> tps=<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#ade057f30f3f9cf15a3e1feb74dd36058">temps_defaut</a>();
<a name="l00155"></a>00155   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classProbleme__base.html#abefceb0ac0d0b35d42a4daaa82a95f59">nombre_d_equations</a>(); i++)
<a name="l00156"></a>00156     <a class="code" href="classProbleme__base.html#ae97586575b7e510d7945ce3a894b806a">equation</a>(i).<a class="code" href="classEquation__base.html#af265fe0ea30868eb2176a0c887e4efab" title="Renvoie la zone des conditions aux limite discretisee associee a l&#39;equation.">zone_Cl_dis</a>()-&gt;calculer_coeffs_echange(tps);
<a name="l00157"></a>00157 
<a name="l00158"></a>00158   converged=<span class="keyword">true</span>;
<a name="l00159"></a>00159   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00162"></a><a class="code" href="classPb__Dilatable__base.html#ad90d2a9358b8862ae5db72f288e9bc5f">00162</a> <span class="keywordtype">void</span> <a class="code" href="classPb__Dilatable__base.html#ad90d2a9358b8862ae5db72f288e9bc5f">Pb_Dilatable_base::update_pressure_fields</a>(<span class="keywordtype">double</span> t)
<a name="l00163"></a>00163 {
<a name="l00164"></a>00164   <a class="code" href="classPb__Dilatable__base.html#aae836b47a7948fe2493caeba3caa18cc">le_fluide_</a>-&gt;update_pressure_fields(t);
<a name="l00165"></a>00165 }
<a name="l00166"></a>00166 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:31 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
