<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/Tetraedriser_homogene_fin.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/Tetraedriser_homogene_fin.cpp</div>  </div>
</div>
<div class="contents">
<a href="Tetraedriser__homogene__fin_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Tetraedriser_homogene_fin.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Geometrie</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/18</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Tetraedriser__homogene__fin_8h.html">Tetraedriser_homogene_fin.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00025"></a>00025 
<a name="l00026"></a><a class="code" href="Tetraedriser__homogene__fin_8cpp.html#a37d1fbd543231fe5f8b6d650b11a4699">00026</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classTetraedriser__homogene__fin.html">Tetraedriser_homogene_fin</a>,<span class="stringliteral">&quot;Tetraedriser_homogene_fin&quot;</span>,<a class="code" href="classTriangulation__base.html" title="Triangulation_base Classe destinee a factoriser l&#39;action de triangulation des interpretes de type Tri...">Triangulation_base</a>);
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="classTetraedriser__homogene__fin.html#ab3555b5fa13720db8653fd8a139c6e10">00028</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classTetraedriser__homogene__fin.html#ab3555b5fa13720db8653fd8a139c6e10" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Tetraedriser_homogene_fin::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00029"></a>00029 <span class="keyword"></span>{
<a name="l00030"></a>00030   <span class="keywordflow">return</span> <a class="code" href="classTetraedriser__homogene__fin.html#ab3555b5fa13720db8653fd8a139c6e10" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Interprete::printOn</a>(os);
<a name="l00031"></a>00031 }
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="classTetraedriser__homogene__fin.html#a53b29b24ebee8797a2ffa8c632994b3f">00033</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTetraedriser__homogene__fin.html#a53b29b24ebee8797a2ffa8c632994b3f" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Tetraedriser_homogene_fin::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035   <span class="keywordflow">return</span> <a class="code" href="classTetraedriser__homogene__fin.html#a53b29b24ebee8797a2ffa8c632994b3f" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Interprete::readOn</a>(is);
<a name="l00036"></a>00036 }
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="comment">// Traitement des faces</span>
<a name="l00039"></a>00039 <span class="comment">// </span>
<a name="l00040"></a><a class="code" href="classTetraedriser__homogene__fin.html#acf0858c1423555d27eef83db651f86af">00040</a> <span class="keywordtype">void</span> <a class="code" href="classTetraedriser__homogene__fin.html#acf0858c1423555d27eef83db651f86af">Tetraedriser_homogene_fin::decoupe</a>(<a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone, <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; faces, <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; new_soms_old_elems,<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; fait_sommet, <span class="keywordtype">int</span> nface, <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; fait_sommet_arete, <span class="keywordtype">int</span> narete)<span class="keyword"> const</span>
<a name="l00041"></a>00041 <span class="keyword"></span>{
<a name="l00042"></a>00042   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; sommets=faces.<a class="code" href="classFaces.html#a07b8d8db9e3d656b93a21a49c063430c">les_sommets</a>();
<a name="l00043"></a>00043   <span class="keywordtype">int</span> nb_faces=sommets.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00044"></a>00044   assert(sommets.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1)==4);
<a name="l00045"></a>00045   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> nouveaux(8*nb_faces, 3);
<a name="l00046"></a>00046   faces.<a class="code" href="classFaces.html#af49c4448e67aa7c732c2cc1dc237b442" title="Renvoie le tableau des voisins (des faces).">voisins</a>().<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(8*nb_faces, 2);
<a name="l00047"></a>00047   faces.<a class="code" href="classFaces.html#af49c4448e67aa7c732c2cc1dc237b442" title="Renvoie le tableau des voisins (des faces).">voisins</a>()=-1;
<a name="l00048"></a>00048   <a class="code" href="classIntVect.html">IntVect</a> indice(5);
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a>00051   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nb_faces; i++)
<a name="l00052"></a>00052     {
<a name="l00053"></a>00053       indice(0) = sommets(i,0);
<a name="l00054"></a>00054       indice(1) = sommets(i,1);
<a name="l00055"></a>00055       indice(2) = sommets(i,2);
<a name="l00056"></a>00056       indice(3) = sommets(i,3);
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="comment">// on remet un peu d&#39;ordre dans les indices</span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060       <span class="keywordtype">int</span> permut,ind;
<a name="l00061"></a>00061 
<a name="l00062"></a>00062       <span class="keywordflow">do</span>
<a name="l00063"></a>00063         {
<a name="l00064"></a>00064           permut=0;
<a name="l00065"></a>00065           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=1; j&lt;4; j++)
<a name="l00066"></a>00066             {
<a name="l00067"></a>00067               <span class="keywordflow">if</span>( indice[j]&lt;indice[j-1] )
<a name="l00068"></a>00068                 {
<a name="l00069"></a>00069                   ind=indice[j-1];
<a name="l00070"></a>00070                   indice[j-1]=indice[j];
<a name="l00071"></a>00071                   indice[j]=ind;
<a name="l00072"></a>00072                   permut++;
<a name="l00073"></a>00073                 }
<a name="l00074"></a>00074             }
<a name="l00075"></a>00075         }
<a name="l00076"></a>00076       <span class="keywordflow">while</span>(permut);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00079"></a>00079       <span class="keywordtype">int</span> i0=indice(0);
<a name="l00080"></a>00080       <span class="keywordtype">int</span> i1=indice(1);
<a name="l00081"></a>00081       <span class="keywordtype">int</span> i2=indice(2);
<a name="l00082"></a>00082       <span class="keywordtype">int</span> i3=indice(3);
<a name="l00083"></a>00083       <span class="keywordtype">int</span> i4=-1;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0 ; ii&lt;nface ; ii++)
<a name="l00086"></a>00086         {
<a name="l00087"></a>00087           <span class="keywordflow">if</span> ( fait_sommet(ii,0)==i0 &amp;&amp; fait_sommet(ii,1)==i1 &amp;&amp; fait_sommet(ii,2)==i2 )
<a name="l00088"></a>00088             {
<a name="l00089"></a>00089               i4=fait_sommet(ii,3);
<a name="l00090"></a>00090               <span class="keywordflow">break</span>;
<a name="l00091"></a>00091             }
<a name="l00092"></a>00092         }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094       <span class="keywordflow">if</span>(i4&lt;0)
<a name="l00095"></a>00095         {
<a name="l00096"></a>00096           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; FALSE &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00097"></a>00097           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00098"></a>00098         }
<a name="l00099"></a>00099       assert(i4&gt;=0);
<a name="l00100"></a>00100 
<a name="l00101"></a>00101       <span class="keywordtype">int</span> jj=0;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0 ; ii&lt;narete ; ii++)
<a name="l00104"></a>00104         {
<a name="l00105"></a>00105           <span class="keywordflow">if</span> ( fait_sommet_arete(ii,0)==i0 &amp;&amp; fait_sommet_arete(ii,1)==i1)
<a name="l00106"></a>00106             {
<a name="l00107"></a>00107               nouveaux(jj*nb_faces+i,0) = i0;
<a name="l00108"></a>00108               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00109"></a>00109               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00110"></a>00110               jj++;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112               nouveaux(jj*nb_faces+i,0) = i1;
<a name="l00113"></a>00113               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00114"></a>00114               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00115"></a>00115               jj++;
<a name="l00116"></a>00116             }
<a name="l00117"></a>00117 
<a name="l00118"></a>00118           <span class="keywordflow">if</span> ( fait_sommet_arete(ii,0)==i0 &amp;&amp; fait_sommet_arete(ii,1)==i2)
<a name="l00119"></a>00119             {
<a name="l00120"></a>00120               nouveaux(jj*nb_faces+i,0) = i0;
<a name="l00121"></a>00121               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00122"></a>00122               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00123"></a>00123               jj++;
<a name="l00124"></a>00124 
<a name="l00125"></a>00125               nouveaux(jj*nb_faces+i,0) = i2;
<a name="l00126"></a>00126               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00127"></a>00127               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00128"></a>00128               jj++;
<a name="l00129"></a>00129             }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131           <span class="keywordflow">if</span> ( fait_sommet_arete(ii,0)==i0 &amp;&amp; fait_sommet_arete(ii,1)==i3)
<a name="l00132"></a>00132             {
<a name="l00133"></a>00133               nouveaux(jj*nb_faces+i,0) = i0;
<a name="l00134"></a>00134               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00135"></a>00135               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00136"></a>00136               jj++;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138               nouveaux(jj*nb_faces+i,0) = i3;
<a name="l00139"></a>00139               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00140"></a>00140               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00141"></a>00141               jj++;
<a name="l00142"></a>00142             }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144           <span class="keywordflow">if</span> ( fait_sommet_arete(ii,0)==i1 &amp;&amp; fait_sommet_arete(ii,1)==i2)
<a name="l00145"></a>00145             {
<a name="l00146"></a>00146               nouveaux(jj*nb_faces+i,0) = i1;
<a name="l00147"></a>00147               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00148"></a>00148               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00149"></a>00149               jj++;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151               nouveaux(jj*nb_faces+i,0) = i2;
<a name="l00152"></a>00152               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00153"></a>00153               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00154"></a>00154               jj++;
<a name="l00155"></a>00155             }
<a name="l00156"></a>00156 
<a name="l00157"></a>00157           <span class="keywordflow">if</span> ( fait_sommet_arete(ii,0)==i1 &amp;&amp; fait_sommet_arete(ii,1)==i3)
<a name="l00158"></a>00158             {
<a name="l00159"></a>00159               nouveaux(jj*nb_faces+i,0) = i1;
<a name="l00160"></a>00160               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00161"></a>00161               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00162"></a>00162               jj++;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164               nouveaux(jj*nb_faces+i,0) = i3;
<a name="l00165"></a>00165               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00166"></a>00166               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00167"></a>00167               jj++;
<a name="l00168"></a>00168             }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170           <span class="keywordflow">if</span> ( fait_sommet_arete(ii,0)==i2 &amp;&amp; fait_sommet_arete(ii,1)==i3)
<a name="l00171"></a>00171             {
<a name="l00172"></a>00172               nouveaux(jj*nb_faces+i,0) = i2;
<a name="l00173"></a>00173               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00174"></a>00174               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00175"></a>00175               jj++;
<a name="l00176"></a>00176 
<a name="l00177"></a>00177               nouveaux(jj*nb_faces+i,0) = i3;
<a name="l00178"></a>00178               nouveaux(jj*nb_faces+i,1) = fait_sommet_arete(ii,2);
<a name="l00179"></a>00179               nouveaux(jj*nb_faces+i,2) = i4;
<a name="l00180"></a>00180               jj++;
<a name="l00181"></a>00181             }
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 <span class="comment">// if(jj!=8)</span>
<a name="l00185"></a>00185 <span class="comment">// {</span>
<a name="l00186"></a>00186 <span class="comment">// Cerr &lt;&lt; &quot; il manque des nouvelles faces &quot; &lt;&lt; finl;</span>
<a name="l00187"></a>00187 <span class="comment">// exit();</span>
<a name="l00188"></a>00188 <span class="comment">// }</span>
<a name="l00189"></a>00189       assert(jj==8);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     }
<a name="l00193"></a>00193   sommets.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(nouveaux);
<a name="l00194"></a>00194 }
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">00196</a> <span class="keywordtype">int</span> <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">Tetraedriser_homogene_fin::creer_sommet</a> (
<a name="l00197"></a>00197   <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom,
<a name="l00198"></a>00198   <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone,
<a name="l00199"></a>00199   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; new_soms,
<a name="l00200"></a>00200   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_traite,
<a name="l00201"></a>00201   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; new_soms_old_elems,
<a name="l00202"></a>00202   <span class="keywordtype">int</span> NbSom, <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; sommets,
<a name="l00203"></a>00203   <span class="keywordtype">int</span>&amp; <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>,
<a name="l00204"></a>00204   <span class="keywordtype">int</span> oldnbsom, <span class="keywordtype">int</span>&amp; nbnewsoms,<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; fait_sommet, <span class="keywordtype">int</span>&amp; nface,<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; fait_sommet_arete, <span class="keywordtype">int</span>&amp; narete )<span class="keyword"> const</span>
<a name="l00205"></a>00205 <span class="keyword"></span>{
<a name="l00206"></a>00206 
<a name="l00207"></a>00207   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_sommets=dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00208"></a>00208 <span class="comment">// int nb_zones = dom.nb_zones();</span>
<a name="l00209"></a>00209   <span class="keywordtype">int</span> _out;
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 
<a name="l00212"></a>00212   <span class="keywordflow">if</span>(NbSom==4) <span class="comment">//!&lt; On verifie que le sommet rattache a une face n&#39;a pas ete cree ulterieurement</span>
<a name="l00213"></a>00213 <span class="comment"></span>    {
<a name="l00214"></a>00214       <span class="keywordtype">int</span> permut,som;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216       <span class="keywordflow">do</span>
<a name="l00217"></a>00217         {
<a name="l00218"></a>00218           permut=0;
<a name="l00219"></a>00219           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=1; j&lt;4; j++)
<a name="l00220"></a>00220             {
<a name="l00221"></a>00221               <span class="keywordflow">if</span>( sommets[j]&lt;sommets[j-1] )
<a name="l00222"></a>00222                 {
<a name="l00223"></a>00223                   som=sommets[j-1];
<a name="l00224"></a>00224                   sommets[j-1]=sommets[j];
<a name="l00225"></a>00225                   sommets[j]=som;
<a name="l00226"></a>00226                   permut++;
<a name="l00227"></a>00227                 }
<a name="l00228"></a>00228             }
<a name="l00229"></a>00229         }
<a name="l00230"></a>00230       <span class="keywordflow">while</span>(permut);
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234   <span class="keywordflow">if</span>(NbSom==2) <span class="comment">//!&lt; On verifie que le sommet rattache a une arete n&#39;a pas ete cree ulterieurement</span>
<a name="l00235"></a>00235 <span class="comment"></span>    {
<a name="l00236"></a>00236       <span class="keywordtype">int</span> permut,som;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238       <span class="keywordflow">do</span>
<a name="l00239"></a>00239         {
<a name="l00240"></a>00240           permut=0;
<a name="l00241"></a>00241           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=1; j&lt;2; j++)
<a name="l00242"></a>00242             {
<a name="l00243"></a>00243               <span class="keywordflow">if</span>( sommets[j]&lt;sommets[j-1] )
<a name="l00244"></a>00244                 {
<a name="l00245"></a>00245                   som=sommets[j-1];
<a name="l00246"></a>00246                   sommets[j-1]=sommets[j];
<a name="l00247"></a>00247                   sommets[j]=som;
<a name="l00248"></a>00248                   permut++;
<a name="l00249"></a>00249                 }
<a name="l00250"></a>00250             }
<a name="l00251"></a>00251         }
<a name="l00252"></a>00252       <span class="keywordflow">while</span>(permut);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256   <span class="keywordtype">double</span> x=0,y=0,z=0;
<a name="l00257"></a>00257 <span class="comment">// x = 0.5*(coord_sommets(i1,0)+coord_sommets(i2,0));</span>
<a name="l00258"></a>00258 <span class="comment">// y = 0.5*(coord_sommets(i1,1)+coord_sommets(i2,1));</span>
<a name="l00259"></a>00259 <span class="comment">// z = 0.5*(coord_sommets(i1,2)+coord_sommets(i2,2));</span>
<a name="l00260"></a>00260   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0 ; ii&lt;NbSom ; ii++)
<a name="l00261"></a>00261     {
<a name="l00262"></a>00262       x += coord_sommets(sommets(ii),0);
<a name="l00263"></a>00263       y += coord_sommets(sommets(ii),1);
<a name="l00264"></a>00264       z += coord_sommets(sommets(ii),2);
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266   x /= NbSom;
<a name="l00267"></a>00267   y /= NbSom;
<a name="l00268"></a>00268   z /= NbSom;
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="keywordtype">int</span> trouve = -1;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   trouve = zone.<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(x,y,z);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <span class="keywordflow">if</span> (trouve&lt;0)
<a name="l00275"></a>00275     {
<a name="l00276"></a>00276       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0 ; ii&lt;NbSom ; ii++)
<a name="l00277"></a>00277         {
<a name="l00278"></a>00278           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;i&quot;</span>&lt;&lt;ii&lt;&lt;<span class="stringliteral">&quot;=&quot;</span>&lt;&lt;sommets(ii)&lt;&lt;<span class="stringliteral">&quot; coord=&quot;</span>&lt;&lt;coord_sommets(sommets(ii),0)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;coord_sommets(sommets(ii),1)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;coord_sommets(sommets(ii),2)&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;x=&quot;</span>&lt;&lt;x&lt;&lt;<span class="stringliteral">&quot; y=&quot;</span>&lt;&lt;y&lt;&lt;<span class="stringliteral">&quot; z=&quot;</span>&lt;&lt;z&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00281"></a>00281       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;-----&quot;</span>&lt;&lt;finl;
<a name="l00282"></a>00282       assert(trouve&gt;=0);
<a name="l00283"></a>00283     }
<a name="l00284"></a>00284 
<a name="l00285"></a>00285   <span class="keywordflow">if</span> (elem_traite(trouve))
<a name="l00286"></a>00286     {
<a name="l00287"></a>00287       _out = -1;
<a name="l00288"></a>00288       <span class="keywordtype">int</span> j = 0;
<a name="l00289"></a>00289       <span class="keywordtype">double</span> epsilon = <a class="code" href="classObjet__U.html#a7447e25c68cc8d3a1c06cf99f0565cff">Objet_U::precision_geom</a>;
<a name="l00290"></a>00290       <span class="keywordflow">do</span>
<a name="l00291"></a>00291         {
<a name="l00292"></a>00292 
<a name="l00293"></a>00293           <span class="keywordflow">if</span> ((<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(coord_sommets(new_soms_old_elems(trouve, j), 0)-x)&lt;epsilon) &amp;&amp;
<a name="l00294"></a>00294               (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(coord_sommets(new_soms_old_elems(trouve, j), 1)-y)&lt;epsilon)&amp;&amp;
<a name="l00295"></a>00295               (<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(coord_sommets(new_soms_old_elems(trouve, j), 2)-z)&lt;epsilon))
<a name="l00296"></a>00296 
<a name="l00297"></a>00297             {
<a name="l00298"></a>00298               _out = new_soms_old_elems(trouve, j);
<a name="l00299"></a>00299             }
<a name="l00300"></a>00300           j++;
<a name="l00301"></a>00301         }
<a name="l00302"></a>00302       <span class="keywordflow">while</span> ((_out == -1) &amp;&amp; (j&lt;19));
<a name="l00303"></a>00303       <span class="keywordflow">if</span> (_out&lt;0)
<a name="l00304"></a>00304         {
<a name="l00305"></a>00305           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error, not found !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00306"></a>00306           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;found=&quot;</span>&lt;&lt;trouve&lt;&lt;<span class="stringliteral">&quot; x=&quot;</span>&lt;&lt;x&lt;&lt;<span class="stringliteral">&quot; y=&quot;</span>&lt;&lt;y&lt;&lt;<span class="stringliteral">&quot; z=&quot;</span>&lt;&lt;z&lt;&lt;finl;
<a name="l00307"></a>00307           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0 ; ii&lt;NbSom ; ii++)
<a name="l00308"></a>00308             {
<a name="l00309"></a>00309               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;i&quot;</span>&lt;&lt;ii&lt;&lt;<span class="stringliteral">&quot;=&quot;</span>&lt;&lt;sommets(ii)&lt;&lt;<span class="stringliteral">&quot; coord=&quot;</span>&lt;&lt;coord_sommets(sommets(ii),0)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;coord_sommets(sommets(ii),1)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>&lt;&lt;coord_sommets(sommets(ii),2)&lt;&lt;finl;
<a name="l00310"></a>00310             }
<a name="l00311"></a>00311           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00312"></a>00312         }
<a name="l00313"></a>00313     }
<a name="l00314"></a>00314   <span class="keywordflow">else</span>
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316 
<a name="l00317"></a>00317       _out = oldnbsom + nbnewsoms;
<a name="l00318"></a>00318       new_soms(compteur, 0) = x;
<a name="l00319"></a>00319       new_soms(compteur, 1) = y;
<a name="l00320"></a>00320       new_soms(compteur, 2) = z;
<a name="l00321"></a>00321       nbnewsoms++;
<a name="l00322"></a>00322       compteur++;
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 
<a name="l00325"></a>00325       <span class="keywordflow">if</span>(NbSom==4)
<a name="l00326"></a>00326         {
<a name="l00327"></a>00327           fait_sommet(nface,  0)=sommets[0];
<a name="l00328"></a>00328           fait_sommet(nface,  1)=sommets[1];
<a name="l00329"></a>00329           fait_sommet(nface,  2)=sommets[2];
<a name="l00330"></a>00330           fait_sommet(nface,  3)=_out;
<a name="l00331"></a>00331 <span class="comment">// Cerr &lt;&lt; sommets(0) &lt;&lt; &quot; &quot; &lt;&lt; sommets(1) &lt;&lt; &quot; &quot; &lt;&lt; sommets(2) &lt;&lt; &quot; &quot; &lt;&lt; _out &lt;&lt; finl;</span>
<a name="l00332"></a>00332           nface++;
<a name="l00333"></a>00333         }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335       <span class="keywordflow">if</span>(NbSom==2)
<a name="l00336"></a>00336         {
<a name="l00337"></a>00337           fait_sommet_arete(narete,  0)=sommets[0];
<a name="l00338"></a>00338           fait_sommet_arete(narete,  1)=sommets[1];
<a name="l00339"></a>00339           fait_sommet_arete(narete,  2)=_out;
<a name="l00340"></a>00340 <span class="comment">// Cerr &lt;&lt; sommets(0) &lt;&lt; &quot; &quot; &lt;&lt; sommets(1) &lt;&lt; &quot; &quot; &lt;&lt; _out &lt;&lt; finl;</span>
<a name="l00341"></a>00341           narete++;
<a name="l00342"></a>00342         }
<a name="l00343"></a>00343     }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345   <span class="keywordflow">if</span>(_out&lt;0)
<a name="l00346"></a>00346     {
<a name="l00347"></a>00347       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Problem at the creation of node&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00348"></a>00348       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00349"></a>00349     }
<a name="l00350"></a>00350   <span class="keywordflow">return</span> _out;
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 
<a name="l00355"></a><a class="code" href="classTetraedriser__homogene__fin.html#a71860b8fde9a0a85fe154ce798374bf5">00355</a> <span class="keywordtype">void</span> <a class="code" href="classTetraedriser__homogene__fin.html#a71860b8fde9a0a85fe154ce798374bf5">Tetraedriser_homogene_fin::trianguler</a>(<a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone)<span class="keyword"> const</span>
<a name="l00356"></a>00356 <span class="keyword"></span>{
<a name="l00357"></a>00357   <span class="keywordflow">if</span>  ((zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Hexaedre&quot;</span>)
<a name="l00358"></a>00358        ||(zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() == <span class="stringliteral">&quot;Hexaedre_VEF&quot;</span>))
<a name="l00359"></a>00359     {
<a name="l00360"></a>00360       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; les_elems = zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>();
<a name="l00361"></a>00361       <span class="keywordtype">int</span> oldsz = les_elems.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00362"></a>00362       <span class="keywordtype">int</span> nbs = zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>();
<a name="l00363"></a>00363       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> elem_traite(oldsz);
<a name="l00364"></a>00364       <span class="keywordtype">int</span> oldnbsom = zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>();
<a name="l00365"></a>00365       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> new_elems(48*oldsz, 4);
<a name="l00366"></a>00366 <span class="comment">// pour chaque cube, liste des nouveaux sommets qu&#39;il contient :</span>
<a name="l00367"></a>00367       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> new_soms_old_elems(oldsz,19);
<a name="l00368"></a>00368       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> sommets(8);
<a name="l00369"></a>00369       <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom = zone.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>();
<a name="l00370"></a>00370       <span class="keywordtype">int</span> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a> = 0;
<a name="l00371"></a>00371       <span class="keywordtype">int</span> nbnewsoms = 0;
<a name="l00372"></a>00372       <span class="keywordtype">int</span> nface = 0;
<a name="l00373"></a>00373       <span class="keywordtype">int</span> narete = 0;
<a name="l00374"></a>00374       <span class="keywordtype">int</span> i;
<a name="l00375"></a>00375 
<a name="l00376"></a>00376       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; NB ELEM : &quot;</span> &lt;&lt; oldsz &lt;&lt; <span class="stringliteral">&quot; NB NODE : &quot;</span> &lt;&lt; nbs &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00377"></a>00377       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> fait_sommet(3*nbs,4); <span class="comment">//!&lt; PQ : 04-03 : dimensionnement de fait_sommet a 3*nbs (a revoir si insuffisant)</span>
<a name="l00378"></a>00378 <span class="comment"></span>      <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> fait_sommet_arete(3*nbs,3); <span class="comment">//!&lt; PQ : 02-05 : dimensionnement de fait_sommet_arete a 3*nbs (a revoir si insuffisant)</span>
<a name="l00379"></a>00379 <span class="comment"></span>      fait_sommet=-1;
<a name="l00380"></a>00380       fait_sommet_arete=-1;
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 <span class="comment">// Construction de l&#39;Octree sur la grille &quot;VDF&quot; de base</span>
<a name="l00384"></a>00384       zone.<a class="code" href="classZone.html#a492c53ea54616079fb65c18f7726ebc9">construit_octree</a>();
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 <span class="comment">// On dimensionne une premiere fois le tableau des sommets avec la dimension maximun</span>
<a name="l00387"></a>00387 <span class="comment">// puis on redimensionnera seulement a la fin par la dimension exacte</span>
<a name="l00388"></a>00388 
<a name="l00389"></a>00389       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; sommets_dom = dom.<a class="code" href="classDomaine.html#a0846ac03a10b65c4df911fe35a19c02f" title="Renvoie le nombre total de sommets.">les_sommets</a>();
<a name="l00390"></a>00390 <span class="comment">// int dim_som_max=19*oldsz*40;</span>
<a name="l00391"></a>00391 <span class="comment">// 19 pour les nouveaux sommets et 8 pour les anciens sommets = 27</span>
<a name="l00392"></a>00392       <span class="keywordtype">int</span> dim_som_max=27*oldsz;
<a name="l00393"></a>00393       <span class="keywordtype">int</span> dim_som_old=sommets_dom.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00394"></a>00394       sommets_dom.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dim_som_max,3);
<a name="l00395"></a>00395 
<a name="l00396"></a>00396       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> indice(19);
<a name="l00397"></a>00397       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> new_soms(19,3);
<a name="l00398"></a>00398 
<a name="l00399"></a>00399       <span class="keywordflow">for</span>(i=0; i&lt; oldsz; i++)
<a name="l00400"></a>00400         {
<a name="l00401"></a>00401           <span class="keywordflow">if</span> (nface&gt;=3*nbs)
<a name="l00402"></a>00402             {
<a name="l00403"></a>00403               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; The sizing of the array fait_sommet in Tetraedriser_homogene_fin::Trianguler is inappropriate &quot;</span> &lt;&lt; finl;
<a name="l00404"></a>00404               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00405"></a>00405             }
<a name="l00406"></a>00406           <span class="keywordflow">if</span> (narete&gt;=3*nbs)
<a name="l00407"></a>00407             {
<a name="l00408"></a>00408               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; The sizing of the array fait_sommet_arete in Tetraedriser_homogene_fin::Trianguler is inappropriate &quot;</span> &lt;&lt; finl;
<a name="l00409"></a>00409               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00410"></a>00410             }
<a name="l00411"></a>00411 
<a name="l00412"></a>00412           <span class="keywordtype">int</span> i0=les_elems(i,0);
<a name="l00413"></a>00413           <span class="keywordtype">int</span> i1=les_elems(i,1);
<a name="l00414"></a>00414           <span class="keywordtype">int</span> i2=les_elems(i,2);
<a name="l00415"></a>00415           <span class="keywordtype">int</span> i3=les_elems(i,3);
<a name="l00416"></a>00416           <span class="keywordtype">int</span> i4=les_elems(i,4);
<a name="l00417"></a>00417           <span class="keywordtype">int</span> i5=les_elems(i,5);
<a name="l00418"></a>00418           <span class="keywordtype">int</span> i6=les_elems(i,6);
<a name="l00419"></a>00419           <span class="keywordtype">int</span> i7=les_elems(i,7);
<a name="l00420"></a>00420 
<a name="l00421"></a>00421           compteur = 0;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 <span class="comment">// Definition des nouveaux sommets : creation des barycentres</span>
<a name="l00424"></a>00424 <span class="comment">// centre de l&#39;hexaedre</span>
<a name="l00425"></a>00425 
<a name="l00426"></a>00426           sommets(0)=i0;
<a name="l00427"></a>00427           sommets(1)=i1;
<a name="l00428"></a>00428           sommets(2)=i2;
<a name="l00429"></a>00429           sommets(3)=i3;
<a name="l00430"></a>00430           sommets(4)=i4;
<a name="l00431"></a>00431           sommets(5)=i5;
<a name="l00432"></a>00432           sommets(6)=i6;
<a name="l00433"></a>00433           sommets(7)=i7;
<a name="l00434"></a>00434           indice(0)  =
<a name="l00435"></a>00435             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 8,
<a name="l00436"></a>00436                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00437"></a>00437 
<a name="l00438"></a>00438 <span class="comment">// centres des faces bas (0-1-3-2)</span>
<a name="l00439"></a>00439           sommets(0)=i0;
<a name="l00440"></a>00440           sommets(1)=i1;
<a name="l00441"></a>00441           sommets(2)=i3;
<a name="l00442"></a>00442           sommets(3)=i2;
<a name="l00443"></a>00443           indice(1)  =
<a name="l00444"></a>00444             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4,
<a name="l00445"></a>00445                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 <span class="comment">// centres des faces haut (4-5-7-6)</span>
<a name="l00448"></a>00448           sommets(0)=i4;
<a name="l00449"></a>00449           sommets(1)=i5;
<a name="l00450"></a>00450           sommets(2)=i7;
<a name="l00451"></a>00451           sommets(3)=i6;
<a name="l00452"></a>00452           indice(4)  =
<a name="l00453"></a>00453             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4,
<a name="l00454"></a>00454                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 <span class="comment">// centres des faces avant (0-1-5-4)</span>
<a name="l00457"></a>00457           sommets(0)=i0;
<a name="l00458"></a>00458           sommets(1)=i1;
<a name="l00459"></a>00459           sommets(2)=i5;
<a name="l00460"></a>00460           sommets(3)=i4;
<a name="l00461"></a>00461           indice(3)  =
<a name="l00462"></a>00462             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4,
<a name="l00463"></a>00463                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00464"></a>00464 
<a name="l00465"></a>00465 <span class="comment">// centres des faces arriere (2-3-7-6)</span>
<a name="l00466"></a>00466           sommets(0)=i2;
<a name="l00467"></a>00467           sommets(1)=i3;
<a name="l00468"></a>00468           sommets(2)=i7;
<a name="l00469"></a>00469           sommets(3)=i6;
<a name="l00470"></a>00470           indice(6)  =
<a name="l00471"></a>00471             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4,
<a name="l00472"></a>00472                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 <span class="comment">// centres des faces gauche (0-2-6-4)</span>
<a name="l00475"></a>00475           sommets(0)=i0;
<a name="l00476"></a>00476           sommets(1)=i2;
<a name="l00477"></a>00477           sommets(2)=i6;
<a name="l00478"></a>00478           sommets(3)=i4;
<a name="l00479"></a>00479           indice(2)  =
<a name="l00480"></a>00480             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4,
<a name="l00481"></a>00481                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00482"></a>00482 
<a name="l00483"></a>00483 <span class="comment">// centres des faces droite (1-3-7-5)</span>
<a name="l00484"></a>00484           sommets(0)=i1;
<a name="l00485"></a>00485           sommets(1)=i3;
<a name="l00486"></a>00486           sommets(2)=i7;
<a name="l00487"></a>00487           sommets(3)=i5;
<a name="l00488"></a>00488           indice(5)  =
<a name="l00489"></a>00489             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 4,
<a name="l00490"></a>00490                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 <span class="comment">// centres des aretes (0-1)</span>
<a name="l00493"></a>00493           sommets(0)=i0;
<a name="l00494"></a>00494           sommets(1)=i1;
<a name="l00495"></a>00495           indice(7)  =
<a name="l00496"></a>00496             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00497"></a>00497                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00498"></a>00498 
<a name="l00499"></a>00499 <span class="comment">// centres des aretes (1-3)</span>
<a name="l00500"></a>00500           sommets(0)=i1;
<a name="l00501"></a>00501           sommets(1)=i3;
<a name="l00502"></a>00502           indice(8)  =
<a name="l00503"></a>00503             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00504"></a>00504                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00505"></a>00505 
<a name="l00506"></a>00506 <span class="comment">// centres des aretes (3-2)</span>
<a name="l00507"></a>00507           sommets(0)=i3;
<a name="l00508"></a>00508           sommets(1)=i2;
<a name="l00509"></a>00509           indice(9)  =
<a name="l00510"></a>00510             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00511"></a>00511                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00512"></a>00512 
<a name="l00513"></a>00513 <span class="comment">// centres des aretes (2-0)</span>
<a name="l00514"></a>00514           sommets(0)=i2;
<a name="l00515"></a>00515           sommets(1)=i0;
<a name="l00516"></a>00516           indice(10)  =
<a name="l00517"></a>00517             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00518"></a>00518                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00519"></a>00519 
<a name="l00520"></a>00520 <span class="comment">// centres des aretes (1-5)</span>
<a name="l00521"></a>00521           sommets(0)=i1;
<a name="l00522"></a>00522           sommets(1)=i5;
<a name="l00523"></a>00523           indice(11)  =
<a name="l00524"></a>00524             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00525"></a>00525                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 <span class="comment">// centres des aretes (3-7)</span>
<a name="l00528"></a>00528           sommets(0)=i3;
<a name="l00529"></a>00529           sommets(1)=i7;
<a name="l00530"></a>00530           indice(12)  =
<a name="l00531"></a>00531             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00532"></a>00532                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534 <span class="comment">// centres des aretes (2-6)</span>
<a name="l00535"></a>00535           sommets(0)=i2;
<a name="l00536"></a>00536           sommets(1)=i6;
<a name="l00537"></a>00537           indice(13)  =
<a name="l00538"></a>00538             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00539"></a>00539                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 <span class="comment">// centres des aretes (0-4)</span>
<a name="l00542"></a>00542           sommets(0)=i0;
<a name="l00543"></a>00543           sommets(1)=i4;
<a name="l00544"></a>00544           indice(14)  =
<a name="l00545"></a>00545             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00546"></a>00546                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 <span class="comment">// centres des aretes (4-5)</span>
<a name="l00549"></a>00549           sommets(0)=i4;
<a name="l00550"></a>00550           sommets(1)=i5;
<a name="l00551"></a>00551           indice(15)  =
<a name="l00552"></a>00552             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00553"></a>00553                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 <span class="comment">// centres des aretes (5-7)</span>
<a name="l00556"></a>00556           sommets(0)=i5;
<a name="l00557"></a>00557           sommets(1)=i7;
<a name="l00558"></a>00558           indice(16)  =
<a name="l00559"></a>00559             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00560"></a>00560                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 <span class="comment">// centres des aretes (7-6)</span>
<a name="l00563"></a>00563           sommets(0)=i7;
<a name="l00564"></a>00564           sommets(1)=i6;
<a name="l00565"></a>00565           indice(17)  =
<a name="l00566"></a>00566             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00567"></a>00567                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00568"></a>00568 
<a name="l00569"></a>00569 <span class="comment">// centres des aretes (6-4)</span>
<a name="l00570"></a>00570           sommets(0)=i6;
<a name="l00571"></a>00571           sommets(1)=i4;
<a name="l00572"></a>00572           indice(18)  =
<a name="l00573"></a>00573             <a class="code" href="classTetraedriser__homogene__fin.html#a17fba428891db225c106f55f346e834a">creer_sommet</a>(dom, zone, new_soms, elem_traite, new_soms_old_elems, 2,
<a name="l00574"></a>00574                          sommets, compteur, oldnbsom, nbnewsoms, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00575"></a>00575 
<a name="l00576"></a>00576 <span class="comment">// Liste des nouveaux sommets pour cet ancien cube</span>
<a name="l00577"></a>00577           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t=0; t&lt;19; t++)
<a name="l00578"></a>00578             {
<a name="l00579"></a>00579               new_soms_old_elems(i, t) = indice(t);
<a name="l00580"></a>00580               <span class="keywordflow">if</span>(indice(t)&lt;0)
<a name="l00581"></a>00581                 {
<a name="l00582"></a>00582                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error negative index&quot;</span> &lt;&lt; finl;
<a name="l00583"></a>00583                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00584"></a>00584                 }
<a name="l00585"></a>00585               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> s=0; s&lt;t; s++)
<a name="l00586"></a>00586                 <span class="keywordflow">if</span>(indice(s)==indice(t))
<a name="l00587"></a>00587                   {
<a name="l00588"></a>00588                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error repeated index&quot;</span> &lt;&lt; finl;
<a name="l00589"></a>00589                     <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00590"></a>00590                   }
<a name="l00591"></a>00591             }
<a name="l00592"></a>00592 
<a name="l00593"></a>00593 
<a name="l00594"></a>00594           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>; j++)
<a name="l00595"></a>00595             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;3; k++)
<a name="l00596"></a>00596               sommets_dom(dim_som_old+j,k)=new_soms(j,k) ;
<a name="l00597"></a>00597           dim_som_old += <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599 <span class="comment">// L&#39;element en cours a ete &quot;traite&quot; en entier</span>
<a name="l00600"></a>00600           elem_traite(i) = 1;
<a name="l00601"></a>00601 
<a name="l00602"></a>00602 <span class="comment">// pyramide bas (base : 0-1-3-2)</span>
<a name="l00603"></a>00603 
<a name="l00604"></a>00604           new_elems(i, 0) = les_elems(i,0);
<a name="l00605"></a>00605           new_elems(i, 1) = indice(7);
<a name="l00606"></a>00606           new_elems(i, 2) = indice(1);
<a name="l00607"></a>00607           new_elems(i, 3) = indice(0);
<a name="l00608"></a>00608 
<a name="l00609"></a>00609           new_elems(i+oldsz, 0) = indice(7);
<a name="l00610"></a>00610           new_elems(i+oldsz, 1) = les_elems(i,1);
<a name="l00611"></a>00611           new_elems(i+oldsz, 2) = indice(1);
<a name="l00612"></a>00612           new_elems(i+oldsz, 3) = indice(0);
<a name="l00613"></a>00613           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+oldsz,1);
<a name="l00614"></a>00614 
<a name="l00615"></a>00615           new_elems(i+2*oldsz, 0) = les_elems(i,1);
<a name="l00616"></a>00616           new_elems(i+2*oldsz, 1) = indice(8);
<a name="l00617"></a>00617           new_elems(i+2*oldsz, 2) = indice(1);
<a name="l00618"></a>00618           new_elems(i+2*oldsz, 3) = indice(0);
<a name="l00619"></a>00619           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+2*oldsz,1);
<a name="l00620"></a>00620 
<a name="l00621"></a>00621           new_elems(i+3*oldsz, 0) = indice(8);
<a name="l00622"></a>00622           new_elems(i+3*oldsz, 1) = les_elems(i,3);
<a name="l00623"></a>00623           new_elems(i+3*oldsz, 2) = indice(1);
<a name="l00624"></a>00624           new_elems(i+3*oldsz, 3) = indice(0);
<a name="l00625"></a>00625           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+3*oldsz,1);
<a name="l00626"></a>00626 
<a name="l00627"></a>00627           new_elems(i+4*oldsz, 0) = les_elems(i,3);
<a name="l00628"></a>00628           new_elems(i+4*oldsz, 1) = indice(9);
<a name="l00629"></a>00629           new_elems(i+4*oldsz, 2) = indice(1);
<a name="l00630"></a>00630           new_elems(i+4*oldsz, 3) = indice(0);
<a name="l00631"></a>00631           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+4*oldsz,1);
<a name="l00632"></a>00632 
<a name="l00633"></a>00633           new_elems(i+5*oldsz, 0) = indice(9);
<a name="l00634"></a>00634           new_elems(i+5*oldsz, 1) = les_elems(i,2);
<a name="l00635"></a>00635           new_elems(i+5*oldsz, 2) = indice(1);
<a name="l00636"></a>00636           new_elems(i+5*oldsz, 3) = indice(0);
<a name="l00637"></a>00637           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+5*oldsz,1);
<a name="l00638"></a>00638 
<a name="l00639"></a>00639           new_elems(i+6*oldsz, 0) = les_elems(i,2);
<a name="l00640"></a>00640           new_elems(i+6*oldsz, 1) = indice(10);
<a name="l00641"></a>00641           new_elems(i+6*oldsz, 2) = indice(1);
<a name="l00642"></a>00642           new_elems(i+6*oldsz, 3) = indice(0);
<a name="l00643"></a>00643           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+6*oldsz,1);
<a name="l00644"></a>00644 
<a name="l00645"></a>00645           new_elems(i+7*oldsz, 0) = indice(10);
<a name="l00646"></a>00646           new_elems(i+7*oldsz, 1) = les_elems(i,0);
<a name="l00647"></a>00647           new_elems(i+7*oldsz, 2) = indice(1);
<a name="l00648"></a>00648           new_elems(i+7*oldsz, 3) = indice(0);
<a name="l00649"></a>00649           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+7*oldsz,1);
<a name="l00650"></a>00650 
<a name="l00651"></a>00651 
<a name="l00652"></a>00652 <span class="comment">// pyramide haut (base : 4-5-7-6)</span>
<a name="l00653"></a>00653 
<a name="l00654"></a>00654           new_elems(i+8*oldsz, 0) = les_elems(i,4);
<a name="l00655"></a>00655           new_elems(i+8*oldsz, 1) = indice(15);
<a name="l00656"></a>00656           new_elems(i+8*oldsz, 2) = indice(4);
<a name="l00657"></a>00657           new_elems(i+8*oldsz, 3) = indice(0);
<a name="l00658"></a>00658           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+8*oldsz,1);
<a name="l00659"></a>00659 
<a name="l00660"></a>00660           new_elems(i+9*oldsz, 0) = indice(15);
<a name="l00661"></a>00661           new_elems(i+9*oldsz, 1) = les_elems(i,5);
<a name="l00662"></a>00662           new_elems(i+9*oldsz, 2) = indice(4);
<a name="l00663"></a>00663           new_elems(i+9*oldsz, 3) = indice(0);
<a name="l00664"></a>00664           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+9*oldsz,1);
<a name="l00665"></a>00665 
<a name="l00666"></a>00666           new_elems(i+10*oldsz, 0) = les_elems(i,5);
<a name="l00667"></a>00667           new_elems(i+10*oldsz, 1) = indice(16);
<a name="l00668"></a>00668           new_elems(i+10*oldsz, 2) = indice(4);
<a name="l00669"></a>00669           new_elems(i+10*oldsz, 3) = indice(0);
<a name="l00670"></a>00670           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+10*oldsz,1);
<a name="l00671"></a>00671 
<a name="l00672"></a>00672           new_elems(i+11*oldsz, 0) = indice(16);
<a name="l00673"></a>00673           new_elems(i+11*oldsz, 1) = les_elems(i,7);
<a name="l00674"></a>00674           new_elems(i+11*oldsz, 2) = indice(4);
<a name="l00675"></a>00675           new_elems(i+11*oldsz, 3) = indice(0);
<a name="l00676"></a>00676           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+11*oldsz,1);
<a name="l00677"></a>00677 
<a name="l00678"></a>00678           new_elems(i+12*oldsz, 0) = les_elems(i,7);
<a name="l00679"></a>00679           new_elems(i+12*oldsz, 1) = indice(17);
<a name="l00680"></a>00680           new_elems(i+12*oldsz, 2) = indice(4);
<a name="l00681"></a>00681           new_elems(i+12*oldsz, 3) = indice(0);
<a name="l00682"></a>00682           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+12*oldsz,1);
<a name="l00683"></a>00683 
<a name="l00684"></a>00684           new_elems(i+13*oldsz, 0) = indice(17);
<a name="l00685"></a>00685           new_elems(i+13*oldsz, 1) = les_elems(i,6);
<a name="l00686"></a>00686           new_elems(i+13*oldsz, 2) = indice(4);
<a name="l00687"></a>00687           new_elems(i+13*oldsz, 3) = indice(0);
<a name="l00688"></a>00688           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+13*oldsz,1);
<a name="l00689"></a>00689 
<a name="l00690"></a>00690           new_elems(i+14*oldsz, 0) = les_elems(i,6);
<a name="l00691"></a>00691           new_elems(i+14*oldsz, 1) = indice(18);
<a name="l00692"></a>00692           new_elems(i+14*oldsz, 2) = indice(4);
<a name="l00693"></a>00693           new_elems(i+14*oldsz, 3) = indice(0);
<a name="l00694"></a>00694           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+14*oldsz,1);
<a name="l00695"></a>00695 
<a name="l00696"></a>00696           new_elems(i+15*oldsz, 0) = indice(18);
<a name="l00697"></a>00697           new_elems(i+15*oldsz, 1) = les_elems(i,4);
<a name="l00698"></a>00698           new_elems(i+15*oldsz, 2) = indice(4);
<a name="l00699"></a>00699           new_elems(i+15*oldsz, 3) = indice(0);
<a name="l00700"></a>00700           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+15*oldsz,1);
<a name="l00701"></a>00701 
<a name="l00702"></a>00702 <span class="comment">// pyramide avant (base : 0-1-5-4)</span>
<a name="l00703"></a>00703 
<a name="l00704"></a>00704           new_elems(i+16*oldsz, 0) = les_elems(i,0);
<a name="l00705"></a>00705           new_elems(i+16*oldsz, 1) = indice(7);
<a name="l00706"></a>00706           new_elems(i+16*oldsz, 2) = indice(3);
<a name="l00707"></a>00707           new_elems(i+16*oldsz, 3) = indice(0);
<a name="l00708"></a>00708           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+16*oldsz,1);
<a name="l00709"></a>00709 
<a name="l00710"></a>00710           new_elems(i+17*oldsz, 0) = indice(7);
<a name="l00711"></a>00711           new_elems(i+17*oldsz, 1) = les_elems(i,1);
<a name="l00712"></a>00712           new_elems(i+17*oldsz, 2) = indice(3);
<a name="l00713"></a>00713           new_elems(i+17*oldsz, 3) = indice(0);
<a name="l00714"></a>00714           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+17*oldsz,1);
<a name="l00715"></a>00715 
<a name="l00716"></a>00716           new_elems(i+18*oldsz, 0) = les_elems(i,1);
<a name="l00717"></a>00717           new_elems(i+18*oldsz, 1) = indice(11);
<a name="l00718"></a>00718           new_elems(i+18*oldsz, 2) = indice(3);
<a name="l00719"></a>00719           new_elems(i+18*oldsz, 3) = indice(0);
<a name="l00720"></a>00720           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+18*oldsz,1);
<a name="l00721"></a>00721 
<a name="l00722"></a>00722           new_elems(i+19*oldsz, 0) = indice(11);
<a name="l00723"></a>00723           new_elems(i+19*oldsz, 1) = les_elems(i,5);
<a name="l00724"></a>00724           new_elems(i+19*oldsz, 2) = indice(3);
<a name="l00725"></a>00725           new_elems(i+19*oldsz, 3) = indice(0);
<a name="l00726"></a>00726           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+19*oldsz,1);
<a name="l00727"></a>00727 
<a name="l00728"></a>00728           new_elems(i+20*oldsz, 0) = les_elems(i,5);
<a name="l00729"></a>00729           new_elems(i+20*oldsz, 1) = indice(15);
<a name="l00730"></a>00730           new_elems(i+20*oldsz, 2) = indice(3);
<a name="l00731"></a>00731           new_elems(i+20*oldsz, 3) = indice(0);
<a name="l00732"></a>00732           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+20*oldsz,1);
<a name="l00733"></a>00733 
<a name="l00734"></a>00734           new_elems(i+21*oldsz, 0) = indice(15);
<a name="l00735"></a>00735           new_elems(i+21*oldsz, 1) = les_elems(i,4);
<a name="l00736"></a>00736           new_elems(i+21*oldsz, 2) = indice(3);
<a name="l00737"></a>00737           new_elems(i+21*oldsz, 3) = indice(0);
<a name="l00738"></a>00738           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+21*oldsz,1);
<a name="l00739"></a>00739 
<a name="l00740"></a>00740           new_elems(i+22*oldsz, 0) = les_elems(i,4);
<a name="l00741"></a>00741           new_elems(i+22*oldsz, 1) = indice(14);
<a name="l00742"></a>00742           new_elems(i+22*oldsz, 2) = indice(3);
<a name="l00743"></a>00743           new_elems(i+22*oldsz, 3) = indice(0);
<a name="l00744"></a>00744           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+22*oldsz,1);
<a name="l00745"></a>00745 
<a name="l00746"></a>00746           new_elems(i+23*oldsz, 0) = indice(14);
<a name="l00747"></a>00747           new_elems(i+23*oldsz, 1) = les_elems(i,0);
<a name="l00748"></a>00748           new_elems(i+23*oldsz, 2) = indice(3);
<a name="l00749"></a>00749           new_elems(i+23*oldsz, 3) = indice(0);
<a name="l00750"></a>00750           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+23*oldsz,1);
<a name="l00751"></a>00751 
<a name="l00752"></a>00752 <span class="comment">// pyramide arriere (base : 2-3-7-6)</span>
<a name="l00753"></a>00753 
<a name="l00754"></a>00754           new_elems(i+24*oldsz, 0) = les_elems(i,2);
<a name="l00755"></a>00755           new_elems(i+24*oldsz, 1) = indice(9);
<a name="l00756"></a>00756           new_elems(i+24*oldsz, 2) = indice(6);
<a name="l00757"></a>00757           new_elems(i+24*oldsz, 3) = indice(0);
<a name="l00758"></a>00758           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+24*oldsz,1);
<a name="l00759"></a>00759 
<a name="l00760"></a>00760           new_elems(i+25*oldsz, 0) = indice(9);
<a name="l00761"></a>00761           new_elems(i+25*oldsz, 1) = les_elems(i,3);
<a name="l00762"></a>00762           new_elems(i+25*oldsz, 2) = indice(6);
<a name="l00763"></a>00763           new_elems(i+25*oldsz, 3) = indice(0);
<a name="l00764"></a>00764           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+25*oldsz,1);
<a name="l00765"></a>00765 
<a name="l00766"></a>00766           new_elems(i+26*oldsz, 0) = les_elems(i,3);
<a name="l00767"></a>00767           new_elems(i+26*oldsz, 1) = indice(12);
<a name="l00768"></a>00768           new_elems(i+26*oldsz, 2) = indice(6);
<a name="l00769"></a>00769           new_elems(i+26*oldsz, 3) = indice(0);
<a name="l00770"></a>00770           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+26*oldsz,1);
<a name="l00771"></a>00771 
<a name="l00772"></a>00772           new_elems(i+27*oldsz, 0) = indice(12);
<a name="l00773"></a>00773           new_elems(i+27*oldsz, 1) = les_elems(i,7);
<a name="l00774"></a>00774           new_elems(i+27*oldsz, 2) = indice(6);
<a name="l00775"></a>00775           new_elems(i+27*oldsz, 3) = indice(0);
<a name="l00776"></a>00776           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+27*oldsz,1);
<a name="l00777"></a>00777 
<a name="l00778"></a>00778           new_elems(i+28*oldsz, 0) = les_elems(i,7);
<a name="l00779"></a>00779           new_elems(i+28*oldsz, 1) = indice(17);
<a name="l00780"></a>00780           new_elems(i+28*oldsz, 2) = indice(6);
<a name="l00781"></a>00781           new_elems(i+28*oldsz, 3) = indice(0);
<a name="l00782"></a>00782           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+28*oldsz,1);
<a name="l00783"></a>00783 
<a name="l00784"></a>00784           new_elems(i+29*oldsz, 0) = indice(17);
<a name="l00785"></a>00785           new_elems(i+29*oldsz, 1) = les_elems(i,6);
<a name="l00786"></a>00786           new_elems(i+29*oldsz, 2) = indice(6);
<a name="l00787"></a>00787           new_elems(i+29*oldsz, 3) = indice(0);
<a name="l00788"></a>00788           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+29*oldsz,1);
<a name="l00789"></a>00789 
<a name="l00790"></a>00790           new_elems(i+30*oldsz, 0) = les_elems(i,6);
<a name="l00791"></a>00791           new_elems(i+30*oldsz, 1) = indice(13);
<a name="l00792"></a>00792           new_elems(i+30*oldsz, 2) = indice(6);
<a name="l00793"></a>00793           new_elems(i+30*oldsz, 3) = indice(0);
<a name="l00794"></a>00794           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+30*oldsz,1);
<a name="l00795"></a>00795 
<a name="l00796"></a>00796           new_elems(i+31*oldsz, 0) = indice(13);
<a name="l00797"></a>00797           new_elems(i+31*oldsz, 1) = les_elems(i,2);
<a name="l00798"></a>00798           new_elems(i+31*oldsz, 2) = indice(6);
<a name="l00799"></a>00799           new_elems(i+31*oldsz, 3) = indice(0);
<a name="l00800"></a>00800           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+31*oldsz,1);
<a name="l00801"></a>00801 
<a name="l00802"></a>00802 <span class="comment">// pyramide gauche (base : 0-2-6-4)</span>
<a name="l00803"></a>00803 
<a name="l00804"></a>00804           new_elems(i+32*oldsz, 0) = les_elems(i,0);
<a name="l00805"></a>00805           new_elems(i+32*oldsz, 1) = indice(10);
<a name="l00806"></a>00806           new_elems(i+32*oldsz, 2) = indice(2);
<a name="l00807"></a>00807           new_elems(i+32*oldsz, 3) = indice(0);
<a name="l00808"></a>00808           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+32*oldsz,1);
<a name="l00809"></a>00809 
<a name="l00810"></a>00810           new_elems(i+33*oldsz, 0) = indice(10);
<a name="l00811"></a>00811           new_elems(i+33*oldsz, 1) = les_elems(i,2);
<a name="l00812"></a>00812           new_elems(i+33*oldsz, 2) = indice(2);
<a name="l00813"></a>00813           new_elems(i+33*oldsz, 3) = indice(0);
<a name="l00814"></a>00814           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+33*oldsz,1);
<a name="l00815"></a>00815 
<a name="l00816"></a>00816           new_elems(i+34*oldsz, 0) = les_elems(i,2);
<a name="l00817"></a>00817           new_elems(i+34*oldsz, 1) = indice(13);
<a name="l00818"></a>00818           new_elems(i+34*oldsz, 2) = indice(2);
<a name="l00819"></a>00819           new_elems(i+34*oldsz, 3) = indice(0);
<a name="l00820"></a>00820           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+34*oldsz,1);
<a name="l00821"></a>00821 
<a name="l00822"></a>00822           new_elems(i+35*oldsz, 0) = indice(13);
<a name="l00823"></a>00823           new_elems(i+35*oldsz, 1) = les_elems(i,6);
<a name="l00824"></a>00824           new_elems(i+35*oldsz, 2) = indice(2);
<a name="l00825"></a>00825           new_elems(i+35*oldsz, 3) = indice(0);
<a name="l00826"></a>00826           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+35*oldsz,1);
<a name="l00827"></a>00827 
<a name="l00828"></a>00828           new_elems(i+36*oldsz, 0) = les_elems(i,6);
<a name="l00829"></a>00829           new_elems(i+36*oldsz, 1) = indice(18);
<a name="l00830"></a>00830           new_elems(i+36*oldsz, 2) = indice(2);
<a name="l00831"></a>00831           new_elems(i+36*oldsz, 3) = indice(0);
<a name="l00832"></a>00832           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+36*oldsz,1);
<a name="l00833"></a>00833 
<a name="l00834"></a>00834           new_elems(i+37*oldsz, 0) = indice(18);
<a name="l00835"></a>00835           new_elems(i+37*oldsz, 1) = les_elems(i,4);
<a name="l00836"></a>00836           new_elems(i+37*oldsz, 2) = indice(2);
<a name="l00837"></a>00837           new_elems(i+37*oldsz, 3) = indice(0);
<a name="l00838"></a>00838           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+37*oldsz,1);
<a name="l00839"></a>00839 
<a name="l00840"></a>00840           new_elems(i+38*oldsz, 0) = les_elems(i,4);
<a name="l00841"></a>00841           new_elems(i+38*oldsz, 1) = indice(14);
<a name="l00842"></a>00842           new_elems(i+38*oldsz, 2) = indice(2);
<a name="l00843"></a>00843           new_elems(i+38*oldsz, 3) = indice(0);
<a name="l00844"></a>00844           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+38*oldsz,1);
<a name="l00845"></a>00845 
<a name="l00846"></a>00846           new_elems(i+39*oldsz, 0) = indice(14);
<a name="l00847"></a>00847           new_elems(i+39*oldsz, 1) = les_elems(i,0);
<a name="l00848"></a>00848           new_elems(i+39*oldsz, 2) = indice(2);
<a name="l00849"></a>00849           new_elems(i+39*oldsz, 3) = indice(0);
<a name="l00850"></a>00850           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+39*oldsz,1);
<a name="l00851"></a>00851 
<a name="l00852"></a>00852 <span class="comment">// pyramide droite (base : 1-3-7-5)</span>
<a name="l00853"></a>00853 
<a name="l00854"></a>00854           new_elems(i+40*oldsz, 0) = les_elems(i,1);
<a name="l00855"></a>00855           new_elems(i+40*oldsz, 1) = indice(8);
<a name="l00856"></a>00856           new_elems(i+40*oldsz, 2) = indice(5);
<a name="l00857"></a>00857           new_elems(i+40*oldsz, 3) = indice(0);
<a name="l00858"></a>00858           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+40*oldsz,1);
<a name="l00859"></a>00859 
<a name="l00860"></a>00860           new_elems(i+41*oldsz, 0) = indice(8);
<a name="l00861"></a>00861           new_elems(i+41*oldsz, 1) = les_elems(i,3);
<a name="l00862"></a>00862           new_elems(i+41*oldsz, 2) = indice(5);
<a name="l00863"></a>00863           new_elems(i+41*oldsz, 3) = indice(0);
<a name="l00864"></a>00864           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+41*oldsz,1);
<a name="l00865"></a>00865 
<a name="l00866"></a>00866           new_elems(i+42*oldsz, 0) = les_elems(i,3);
<a name="l00867"></a>00867           new_elems(i+42*oldsz, 1) = indice(12);
<a name="l00868"></a>00868           new_elems(i+42*oldsz, 2) = indice(5);
<a name="l00869"></a>00869           new_elems(i+42*oldsz, 3) = indice(0);
<a name="l00870"></a>00870           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+42*oldsz,1);
<a name="l00871"></a>00871 
<a name="l00872"></a>00872           new_elems(i+43*oldsz, 0) = indice(12);
<a name="l00873"></a>00873           new_elems(i+43*oldsz, 1) = les_elems(i,7);
<a name="l00874"></a>00874           new_elems(i+43*oldsz, 2) = indice(5);
<a name="l00875"></a>00875           new_elems(i+43*oldsz, 3) = indice(0);
<a name="l00876"></a>00876           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+43*oldsz,1);
<a name="l00877"></a>00877 
<a name="l00878"></a>00878           new_elems(i+44*oldsz, 0) = les_elems(i,7);
<a name="l00879"></a>00879           new_elems(i+44*oldsz, 1) = indice(16);
<a name="l00880"></a>00880           new_elems(i+44*oldsz, 2) = indice(5);
<a name="l00881"></a>00881           new_elems(i+44*oldsz, 3) = indice(0);
<a name="l00882"></a>00882           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+44*oldsz,1);
<a name="l00883"></a>00883 
<a name="l00884"></a>00884           new_elems(i+45*oldsz, 0) = indice(16);
<a name="l00885"></a>00885           new_elems(i+45*oldsz, 1) = les_elems(i,5);
<a name="l00886"></a>00886           new_elems(i+45*oldsz, 2) = indice(5);
<a name="l00887"></a>00887           new_elems(i+45*oldsz, 3) = indice(0);
<a name="l00888"></a>00888           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+45*oldsz,1);
<a name="l00889"></a>00889 
<a name="l00890"></a>00890           new_elems(i+46*oldsz, 0) = les_elems(i,5);
<a name="l00891"></a>00891           new_elems(i+46*oldsz, 1) = indice(11);
<a name="l00892"></a>00892           new_elems(i+46*oldsz, 2) = indice(5);
<a name="l00893"></a>00893           new_elems(i+46*oldsz, 3) = indice(0);
<a name="l00894"></a>00894           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+46*oldsz,1);
<a name="l00895"></a>00895 
<a name="l00896"></a>00896           new_elems(i+47*oldsz, 0) = indice(11);
<a name="l00897"></a>00897           new_elems(i+47*oldsz, 1) = les_elems(i,1);
<a name="l00898"></a>00898           new_elems(i+47*oldsz, 2) = indice(5);
<a name="l00899"></a>00899           new_elems(i+47*oldsz, 3) = indice(0);
<a name="l00900"></a>00900           <a class="code" href="classInterprete__geometrique__base.html#a1d3f3df07d1a9abf7f5c55a5c4fbacff">mettre_a_jour_sous_zone</a>(zone,i,i+47*oldsz,1);
<a name="l00901"></a>00901 
<a name="l00902"></a>00902         }
<a name="l00903"></a>00903       sommets_dom.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(dim_som_old,3);
<a name="l00904"></a>00904       les_elems.<a class="code" href="classIntTab.html#ae9ae8fefb1fda4a5c035229ab420a96d" title="fait pointer le tableau sur le vecteur v et en associant la meme structure parallele. Attention, si line_size du vecteur v est different de 1, on cree un tableau bidimensionnel (on peut avoir un vecteur de ce type si on copie un Tab dans un Vect puis on prend une ref sur ce Vect).">ref</a>(new_elems);
<a name="l00905"></a>00905 
<a name="l00906"></a>00906 <span class="comment">// Reconstruction de l&#39;octree</span>
<a name="l00907"></a>00907       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We have split the cubes...&quot;</span> &lt;&lt; finl;
<a name="l00908"></a>00908       zone.<a class="code" href="classZone.html#a8ee51194c663be29651925c88f904d76">invalide_octree</a>();
<a name="l00909"></a>00909       zone.<a class="code" href="classZone.html#ac1ff391994a372815b7f88c3fdc39f55" title="Type les elements de la zone avec le nom passe en parametre. Et associe le type d&#39;element a la zone...">typer</a>(<span class="stringliteral">&quot;Tetraedre&quot;</span>);
<a name="l00910"></a>00910       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;  Reconstruction of the Octree&quot;</span> &lt;&lt; finl;
<a name="l00911"></a>00911       zone.<a class="code" href="classZone.html#a492c53ea54616079fb65c18f7726ebc9">construit_octree</a>();
<a name="l00912"></a>00912       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;  Octree rebuilt&quot;</span> &lt;&lt; finl;
<a name="l00913"></a>00913 
<a name="l00914"></a>00914       {
<a name="l00915"></a>00915         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Splitting of the boundaries&quot;</span> &lt;&lt; finl;
<a name="l00916"></a>00916         <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a>) curseur(zone.<a class="code" href="classZone.html#a4bc04163903c004c5c1383eaa5fa844d" title="Renvoie la liste des bords de la zone. (version const)">faces_bord</a>());;;
<a name="l00917"></a>00917         <span class="keywordflow">while</span>(curseur)
<a name="l00918"></a>00918           {
<a name="l00919"></a>00919             <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; les_faces=curseur-&gt;faces();
<a name="l00920"></a>00920             les_faces.<a class="code" href="classFaces.html#a503fe687811445373b75dd8ac0991ec2" title="Type les faces.">typer</a>(<a class="code" href="classFaces.html#a62b7dbd959f99b997dc8111210ec8458a8d0ad1b612ea277393c4ce895b4ce0af">Faces::triangle_3D</a>);
<a name="l00921"></a>00921             <a class="code" href="classTetraedriser__homogene__fin.html#acf0858c1423555d27eef83db651f86af">decoupe</a>(zone, les_faces, new_soms_old_elems, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00922"></a>00922             ++curseur;
<a name="l00923"></a>00923           }
<a name="l00924"></a>00924       }
<a name="l00925"></a>00925 
<a name="l00926"></a>00926 
<a name="l00927"></a>00927       {
<a name="l00928"></a>00928 <span class="comment">// Les Raccords</span>
<a name="l00929"></a>00929         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Splitting of the connectors&quot;</span> &lt;&lt; finl;
<a name="l00930"></a>00930         <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="classRaccord.html" title="Classe Raccord Classe generique de la hierarchie des raccords, un objet Raccord peut referencer n&#39;imp...">Raccord</a>) curseur(zone.<a class="code" href="classZone.html#ac2a20fe8fa5529c7eefd418b43c0131c" title="Renvoie la liste des racoords de la zone. (version const)">faces_raccord</a>());;;
<a name="l00931"></a>00931         <span class="keywordflow">while</span>(curseur)
<a name="l00932"></a>00932           {
<a name="l00933"></a>00933             <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; les_faces=curseur.valeur()-&gt;faces();
<a name="l00934"></a>00934             les_faces.<a class="code" href="classFaces.html#a503fe687811445373b75dd8ac0991ec2" title="Type les faces.">typer</a>(<a class="code" href="classFaces.html#a62b7dbd959f99b997dc8111210ec8458a8d0ad1b612ea277393c4ce895b4ce0af">Faces::triangle_3D</a>);
<a name="l00935"></a>00935             <a class="code" href="classTetraedriser__homogene__fin.html#acf0858c1423555d27eef83db651f86af">decoupe</a>(zone, les_faces, new_soms_old_elems, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00936"></a>00936             ++curseur;
<a name="l00937"></a>00937           }
<a name="l00938"></a>00938       }
<a name="l00939"></a>00939 
<a name="l00940"></a>00940       {
<a name="l00941"></a>00941 <span class="comment">// Les Faces internes</span>
<a name="l00942"></a>00942         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Splitting of the internal faces&quot;</span> &lt;&lt; finl;
<a name="l00943"></a>00943         <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="classFaces__Interne.html" title="Classe Faces_Interne La classe sert a representer un ensemble de faces qui sont internes d&#39;un point d...">Faces_Interne</a>) curseur(zone.<a class="code" href="classZone.html#ad1d5f91adfa5e56003ce778cab9610e8" title="Renvoie la liste des faces internes de la zone. (version const)">faces_int</a>());;;
<a name="l00944"></a>00944         <span class="keywordflow">while</span>(curseur)
<a name="l00945"></a>00945           {
<a name="l00946"></a>00946             <a class="code" href="classFaces.html" title="enum Type_Face Les differents types geometriques de faces.">Faces</a>&amp; les_faces=curseur-&gt;faces();
<a name="l00947"></a>00947             les_faces.<a class="code" href="classFaces.html#a503fe687811445373b75dd8ac0991ec2" title="Type les faces.">typer</a>(<a class="code" href="classFaces.html#a62b7dbd959f99b997dc8111210ec8458a8d0ad1b612ea277393c4ce895b4ce0af">Faces::triangle_3D</a>);
<a name="l00948"></a>00948             <a class="code" href="classTetraedriser__homogene__fin.html#acf0858c1423555d27eef83db651f86af">decoupe</a>(zone, les_faces, new_soms_old_elems, fait_sommet, nface, fait_sommet_arete, narete);
<a name="l00949"></a>00949             ++curseur;
<a name="l00950"></a>00950           }
<a name="l00951"></a>00951       }
<a name="l00952"></a>00952       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;END of Tetraedriser_homogene_fin...&quot;</span>&lt;&lt;finl;
<a name="l00953"></a>00953       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;  1 NbElem=&quot;</span>&lt;&lt;zone.<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>().<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0)&lt;&lt;<span class="stringliteral">&quot;  NbNod=&quot;</span>&lt;&lt;zone.<a class="code" href="classZone.html#ad340f571f81fa5c2e028b88c00b5c2ca" title="Renvoie le nombre de sommets de la zone.">nb_som</a>()&lt;&lt;finl;
<a name="l00954"></a>00954     }
<a name="l00955"></a>00955   <span class="keywordflow">else</span>
<a name="l00956"></a>00956     {
<a name="l00957"></a>00957       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;We do not yet know how to Tetraedriser_homogene_fin the &quot;</span>
<a name="l00958"></a>00958            &lt;&lt; zone.<a class="code" href="classZone.html#a18cf83cd0f9c368dcfa32fb802a0ac94" title="Renvoie un element geometrique du type de ceux qui constituent la zone. (version const)">type_elem</a>()-&gt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt;<span class="stringliteral">&quot;s&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00959"></a>00959     }
<a name="l00960"></a>00960 }
<a name="l00961"></a>00961 
<a name="l00962"></a>00962 
<a name="l00963"></a>00963 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:21 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
