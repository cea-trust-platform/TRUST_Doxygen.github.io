<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/VEF/Sources/Terme_Source_Canal_RANS_LES_VEF_Face.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/VEF/Sources/Terme_Source_Canal_RANS_LES_VEF_Face.cpp</div>  </div>
</div>
<div class="contents">
<a href="Terme__Source__Canal__RANS__LES__VEF__Face_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2015 - 2016, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Terme_Source_Canal_RANS_LES_VEF_Face.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/VEF/Sources</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/17</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Terme__Source__Canal__RANS__LES__VEF__Face_8h.html">Terme_Source_Canal_RANS_LES_VEF_Face.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Champ__Uniforme_8h.html">Champ_Uniforme.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VEF_8h.html">Zone_VEF.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Temps__base_8h.html">Schema_Temps_base.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="EFichier_8h.html">EFichier.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Champ__P1NC_8h.html">Champ_P1NC.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="SFichier_8h.html">SFichier.h</a>&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a><a class="code" href="Terme__Source__Canal__RANS__LES__VEF__Face_8cpp.html#a41f7e84d99d5886aed6838cb5c2fe614">00032</a> <a class="code" href="Declare__Inst_8h.html#acc0aee837ea82cfdb264285a980747e9">Implemente_instanciable_sans_destructeur</a>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html">Terme_Source_Canal_RANS_LES_VEF_Face</a>,<span class="stringliteral">&quot;Source_Canal_RANS_LES_VEF_P1NC&quot;</span>,<a class="code" href="classSource__base.html" title="classe Source_base Un objet Source_base est un terme apparaissant au second membre d&#39;une equation...">Source_base</a>);
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="comment">// Terme_Source_Canal_RANS_LES_VEF_Face::Terme_Source_Canal_RANS_LES_VEF_Face()</span>
<a name="l00035"></a>00035 <span class="comment">// {</span>
<a name="l00036"></a>00036 <span class="comment">// dernier_tps_calc = new double();</span>
<a name="l00037"></a>00037 <span class="comment">// }</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment">// Terme_Source_Canal_RANS_LES_VEF_Face::~Terme_Source_Canal_RANS_LES_VEF_Face()</span>
<a name="l00040"></a>00040 <span class="comment">// {</span>
<a name="l00041"></a>00041 <span class="comment">// delete dernier_tps_calc;</span>
<a name="l00042"></a>00042 <span class="comment">// }</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a73723763b240aff5ca519ae9ff9a4c88">00045</a> <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a73723763b240aff5ca519ae9ff9a4c88">Terme_Source_Canal_RANS_LES_VEF_Face::~Terme_Source_Canal_RANS_LES_VEF_Face</a>()
<a name="l00046"></a>00046 {
<a name="l00047"></a>00047 <span class="comment">// Le destructeur est appele a l&#39;initialisation alors</span>
<a name="l00048"></a>00048 <span class="comment">// la sauvegarde du champ se fait hors initialisation</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050   <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()!=0)
<a name="l00051"></a>00051     {
<a name="l00052"></a>00052       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (<span class="stringliteral">&quot;utemp.dat&quot;</span>);
<a name="l00053"></a>00053       fic &lt;&lt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>;
<a name="l00054"></a>00054     }
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 <span class="comment"></span>
<a name="l00057"></a>00057 <span class="comment">////!&lt; printOn </span>
<a name="l00058"></a>00058 <span class="comment"></span><span class="comment">//</span>
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac06331299ef653d76c58d655b1171d40">00060</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac06331299ef653d76c58d655b1171d40" title="NE FAIT RIEN A surcharger dans les classes derivees. Imprime la source sur un flot de sortie...">Terme_Source_Canal_RANS_LES_VEF_Face::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s )<span class="keyword"> const</span>
<a name="l00061"></a>00061 <span class="keyword"></span>{
<a name="l00062"></a>00062   <span class="keywordflow">return</span> s &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() ;
<a name="l00063"></a>00063 }
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment"></span>
<a name="l00066"></a>00066 <span class="comment">////!&lt; readOn </span>
<a name="l00067"></a>00067 <span class="comment"></span><span class="comment">//</span>
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a10dd76cf2227a4e9aa57e513730fc425">00069</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a10dd76cf2227a4e9aa57e513730fc425" title="NE FAIT RIEN A surcharger dans les classes derivees. Lecture d&#39;un terme source sur un flot d&#39;entree...">Terme_Source_Canal_RANS_LES_VEF_Face::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is )
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071   <span class="keywordtype">int</span> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a> = 0;
<a name="l00072"></a>00072   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> mot_lu;
<a name="l00073"></a>00073   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> acc_ouverte(<span class="stringliteral">&quot;{&quot;</span>);
<a name="l00074"></a>00074   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> acc_fermee(<span class="stringliteral">&quot;}&quot;</span>);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#aa2e29305589ed479cef9aee2f274679e">u_target</a> = 0;
<a name="l00077"></a>00077   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a68e54475082123cf2d5ca5abe8d1a15c">f_start</a> = 0.;
<a name="l00078"></a>00078   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3653658968c03b99f9643a5dc619019a">moyenne</a> = 0;<span class="comment">//valeur par defaut</span>
<a name="l00079"></a>00079 <span class="comment">// 0 =&gt; moyenne spatiale</span>
<a name="l00080"></a>00080 <span class="comment">// 1 =&gt; moyenne temporelle glissante (moyenne en alpha)</span>
<a name="l00081"></a>00081 <span class="comment">// 2 =&gt; moyenne temporelle</span>
<a name="l00082"></a>00082 <span class="comment">// 3 =&gt; moyenne temporelle t=0</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_mots(11);
<a name="l00085"></a>00085   {
<a name="l00086"></a>00086     les_mots[0]=<span class="stringliteral">&quot;alpha_tau&quot;</span>;   <span class="comment">//coeff de relaxation du terme source</span>
<a name="l00087"></a>00087     les_mots[1]=<span class="stringliteral">&quot;Ly&quot;</span>;          <span class="comment">//Hauteur du canal plan (utile pour la moyenne spatiale)</span>
<a name="l00088"></a>00088     les_mots[2]=<span class="stringliteral">&quot;t_moy_start&quot;</span>; <span class="comment">//temps de demarrage de la moyenne</span>
<a name="l00089"></a>00089     les_mots[3]=<span class="stringliteral">&quot;f_start&quot;</span>;     <span class="comment">//temps a partir duquel le terme source commence a etre active (pondere)</span>
<a name="l00090"></a>00090     les_mots[4]=<span class="stringliteral">&quot;f_tot&quot;</span>;       <span class="comment">//temps a partir duquel le terme source est totalement applique</span>
<a name="l00091"></a>00091     les_mots[5]=<span class="stringliteral">&quot;type_moyenne&quot;</span>;<span class="comment">//!&lt; 0: moyenne spatiale 1: moyenne temp. glissante 2: moyenne temporelle</span>
<a name="l00092"></a>00092 <span class="comment"></span>    les_mots[6]=<span class="stringliteral">&quot;dir&quot;</span>;         <span class="comment">//!&lt; direction de forcage de l&#39;ecoulement</span>
<a name="l00093"></a>00093 <span class="comment"></span>    les_mots[7]=<span class="stringliteral">&quot;u_tau&quot;</span>;       <span class="comment">//!&lt; vitesse de frottement theorique</span>
<a name="l00094"></a>00094 <span class="comment"></span>    les_mots[8]=<span class="stringliteral">&quot;nu&quot;</span>;          <span class="comment">//!&lt; viscosite moleculaire</span>
<a name="l00095"></a>00095 <span class="comment"></span>    les_mots[9]=<span class="stringliteral">&quot;rayon&quot;</span>;       <span class="comment">//!&lt; rayon du cylindre</span>
<a name="l00096"></a>00096 <span class="comment"></span>    les_mots[10]=<span class="stringliteral">&quot;u_target&quot;</span>;   <span class="comment">//!&lt; cle pour  champ target  : 1=stockage 2=lecture</span>
<a name="l00097"></a>00097 <span class="comment"></span>  }
<a name="l00098"></a>00098   is &gt;&gt; mot_lu;
<a name="l00099"></a>00099   <span class="keywordflow">if</span>(mot_lu != acc_ouverte)
<a name="l00100"></a>00100     {
<a name="l00101"></a>00101       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait { a la place de &quot;</span> &lt;&lt; mot_lu
<a name="l00102"></a>00102            &lt;&lt; <span class="stringliteral">&quot; lors de la lecture des parametres de la loi de paroi &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00103"></a>00103     }
<a name="l00104"></a>00104   is &gt;&gt; mot_lu;
<a name="l00105"></a>00105   <span class="keywordflow">while</span>(mot_lu != acc_fermee)
<a name="l00106"></a>00106     {
<a name="l00107"></a>00107       <span class="keywordtype">int</span> rang=les_mots.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(mot_lu);
<a name="l00108"></a>00108       <span class="keywordflow">switch</span>(rang)
<a name="l00109"></a>00109         {
<a name="l00110"></a>00110         <span class="keywordflow">case</span> 0 :
<a name="l00111"></a>00111           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3b133ca0cc561eada3bd24257f2f16d6">alpha_tau</a>;
<a name="l00112"></a>00112           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;alpha_tau = &quot;</span> &lt;&lt; alpha_tau &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00113"></a>00113           compteur++;
<a name="l00114"></a>00114           <span class="keywordflow">break</span>;
<a name="l00115"></a>00115         <span class="keywordflow">case</span> 1  :
<a name="l00116"></a>00116           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a18cd47cc5c7bbc92da088058f572d6fc">Ly</a>;
<a name="l00117"></a>00117           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Ly = &quot;</span>&lt;&lt; Ly &lt;&lt; finl;
<a name="l00118"></a>00118           compteur++;
<a name="l00119"></a>00119           <span class="keywordflow">break</span>;
<a name="l00120"></a>00120         <span class="keywordflow">case</span> 2  :
<a name="l00121"></a>00121           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a72351903880ff7c4cb74c3cde61f3485">t_moy_start</a>;
<a name="l00122"></a>00122           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; t_moy_start = &quot;</span>&lt;&lt; t_moy_start &lt;&lt; finl;
<a name="l00123"></a>00123           compteur++;
<a name="l00124"></a>00124           <span class="keywordflow">break</span>;
<a name="l00125"></a>00125         <span class="keywordflow">case</span> 3  :
<a name="l00126"></a>00126           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a68e54475082123cf2d5ca5abe8d1a15c">f_start</a>;
<a name="l00127"></a>00127           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; f_start = &quot;</span>&lt;&lt; f_start &lt;&lt; finl;
<a name="l00128"></a>00128           compteur++;
<a name="l00129"></a>00129           <span class="keywordflow">break</span>;
<a name="l00130"></a>00130         <span class="keywordflow">case</span> 4  :
<a name="l00131"></a>00131           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a28d6bfd991f2d306f304b5fe679953f1">f_tot</a>;
<a name="l00132"></a>00132           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; f_tot = &quot;</span>&lt;&lt; f_tot &lt;&lt; finl;
<a name="l00133"></a>00133           compteur++;
<a name="l00134"></a>00134           <span class="keywordflow">break</span>;
<a name="l00135"></a>00135         <span class="keywordflow">case</span> 5  :
<a name="l00136"></a>00136           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3653658968c03b99f9643a5dc619019a">moyenne</a>;
<a name="l00137"></a>00137           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;type_moyenne : &quot;</span> &lt;&lt; moyenne &lt;&lt; finl;
<a name="l00138"></a>00138           <span class="keywordflow">if</span>(moyenne==0)
<a name="l00139"></a>00139             {
<a name="l00140"></a>00140               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Pertinence de la moyenne spatiale en VEF ? -&gt; ARRET (non code)&quot;</span> &lt;&lt; finl;
<a name="l00141"></a>00141               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00142"></a>00142             }
<a name="l00143"></a>00143           <span class="keywordflow">if</span>(moyenne==1)
<a name="l00144"></a>00144             {
<a name="l00145"></a>00145               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; YOUNES, YOUNES !!! !&quot;</span>  &lt;&lt; finl;
<a name="l00146"></a>00146               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; YOUNES EST PARTI !!!&quot;</span>  &lt;&lt; finl;
<a name="l00147"></a>00147               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00148"></a>00148             }
<a name="l00149"></a>00149           compteur++;
<a name="l00150"></a>00150           <span class="keywordflow">break</span>;
<a name="l00151"></a>00151         <span class="keywordflow">case</span> 6  :
<a name="l00152"></a>00152           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0629b1e7221ae392065e19e1db2b17e5" title="axe">dir_nom</a>;
<a name="l00153"></a>00153           <span class="keywordflow">if</span>     ( (dir_nom==<span class="stringliteral">&quot;-X&quot;</span>) || (dir_nom==<span class="stringliteral">&quot;+X&quot;</span>) ) <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a862cba6cfddc75715fab887d9bd13563">dir</a>=0;
<a name="l00154"></a>00154           <span class="keywordflow">else</span> <span class="keywordflow">if</span>( (dir_nom==<span class="stringliteral">&quot;-Y&quot;</span>) || (dir_nom==<span class="stringliteral">&quot;+Y&quot;</span>) ) <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a862cba6cfddc75715fab887d9bd13563">dir</a>=1;
<a name="l00155"></a>00155           <span class="keywordflow">else</span> <span class="keywordflow">if</span>( (dir_nom==<span class="stringliteral">&quot;-Z&quot;</span>) || (dir_nom==<span class="stringliteral">&quot;+Z&quot;</span>) ) <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a862cba6cfddc75715fab887d9bd13563">dir</a>=2;
<a name="l00156"></a>00156           <span class="keywordflow">else</span>
<a name="l00157"></a>00157             {
<a name="l00158"></a>00158               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; ERROR when reading direction for forcing term &quot;</span> &lt;&lt; finl;
<a name="l00159"></a>00159               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; &#39;dir&#39; parameter has to be selected among following list : +X, -X, +Y, -Y, +Z or -Z &quot;</span> &lt;&lt; finl;
<a name="l00160"></a>00160               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00161"></a>00161             }
<a name="l00162"></a>00162           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; forcage suivant l&#39;axe : &quot;</span> &lt;&lt; dir_nom &lt;&lt; <span class="stringliteral">&quot; -&gt; composante : &quot;</span> &lt;&lt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a862cba6cfddc75715fab887d9bd13563">dir</a> &lt;&lt;finl;
<a name="l00163"></a>00163           compteur++;
<a name="l00164"></a>00164           <span class="keywordflow">break</span>;
<a name="l00165"></a>00165         <span class="keywordflow">case</span> 7  :
<a name="l00166"></a>00166           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a7d582f1d4a3e458b5b4d16f4555ed71c">u_tau</a>;
<a name="l00167"></a>00167           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;vitesse de frottement : &quot;</span> &lt;&lt; u_tau &lt;&lt; finl;
<a name="l00168"></a>00168           compteur++;
<a name="l00169"></a>00169           <span class="keywordflow">break</span>;
<a name="l00170"></a>00170         <span class="keywordflow">case</span> 8  :
<a name="l00171"></a>00171           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a8efac4e0099e239e85e7772cc17cfd43">nu</a>;
<a name="l00172"></a>00172           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;viscosite moleculaire : &quot;</span> &lt;&lt; nu &lt;&lt; finl;
<a name="l00173"></a>00173           compteur++;
<a name="l00174"></a>00174           <span class="keywordflow">break</span>;
<a name="l00175"></a>00175         <span class="keywordflow">case</span> 9  :
<a name="l00176"></a>00176           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a34be15e284d813bc2fba1e5f17eac004">rayon</a>;
<a name="l00177"></a>00177           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;rayon : &quot;</span> &lt;&lt; rayon &lt;&lt; finl;
<a name="l00178"></a>00178           compteur++;
<a name="l00179"></a>00179           <span class="keywordflow">break</span>;
<a name="l00180"></a>00180         <span class="keywordflow">case</span> 10  :
<a name="l00181"></a>00181           is &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#aa2e29305589ed479cef9aee2f274679e">u_target</a>;
<a name="l00182"></a>00182           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; u_target: &quot;</span> &lt;&lt; u_target &lt;&lt; finl;
<a name="l00183"></a>00183           compteur++;
<a name="l00184"></a>00184           <span class="keywordflow">break</span>;
<a name="l00185"></a>00185         <span class="keywordflow">default</span> :
<a name="l00186"></a>00186           {
<a name="l00187"></a>00187             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; mot_lu &lt;&lt; <span class="stringliteral">&quot; n&#39;est pas un mot compris par Source_Canal_RANS_LES_VEF_P1NC&quot;</span> &lt;&lt; finl;
<a name="l00188"></a>00188             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Les mots compris sont : &quot;</span> &lt;&lt; les_mots &lt;&lt; finl;
<a name="l00189"></a>00189             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00190"></a>00190           }
<a name="l00191"></a>00191         }
<a name="l00192"></a>00192       is &gt;&gt; mot_lu;
<a name="l00193"></a>00193     }
<a name="l00194"></a>00194   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; compteur &lt;&lt; <span class="stringliteral">&quot; motcles ont ete lus dans le readOn de Source_Canal_RANS_LES_VEF_P1NC&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a9e215b619f9d16e46f1e24fcbee73914">init</a>();
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <span class="keywordflow">return</span> is;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 }
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ab5453af7cc1a1875e7b3a72712f6e0bd">00202</a> <span class="keywordtype">void</span> <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ab5453af7cc1a1875e7b3a72712f6e0bd">Terme_Source_Canal_RANS_LES_VEF_Face::associer_zones</a>(<span class="keyword">const</span> <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; zone_dis,
<a name="l00203"></a>00203                                                           <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp; zone_Cl_dis)
<a name="l00204"></a>00204 {
<a name="l00205"></a>00205   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a5eef3f9d5d1010b5c459bffe031f3af4">la_zone_VEF</a> = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, zone_dis.<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>());
<a name="l00206"></a>00206   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#af5c782e3ab75fe92ca26cb680176d091">la_zone_Cl_VEF</a> = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__Cl__VEF.html">Zone_Cl_VEF</a>, zone_Cl_dis.<a class="code" href="classDeriv__Zone__Cl__dis__base.html#a6b56880f00b604e1f13970ec6d5bc077">valeur</a>());
<a name="l00207"></a>00207 }
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a1f2867c45b9269edd9d57dcf6400f86b">00209</a> <span class="keywordtype">void</span> <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a1f2867c45b9269edd9d57dcf6400f86b">Terme_Source_Canal_RANS_LES_VEF_Face::associer_pb</a>(<span class="keyword">const</span> <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb)
<a name="l00210"></a>00210 {
<a name="l00211"></a>00211   ;
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00214"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a9e215b619f9d16e46f1e24fcbee73914">00214</a> <span class="keywordtype">void</span> <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a9e215b619f9d16e46f1e24fcbee73914">Terme_Source_Canal_RANS_LES_VEF_Face::init</a>()
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdisbase=<a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00217"></a>00217   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zone_VEF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>, zdisbase);
<a name="l00218"></a>00218   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vitesse = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;inconnue().valeurs();
<a name="l00219"></a>00219   <span class="keywordtype">int</span> nb_faces = zone_VEF.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
<a name="l00220"></a>00220   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv = zone_VEF.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00221"></a>00221   <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; tps = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;schema_temps().temps_courant();
<a name="l00222"></a>00222 
<a name="l00223"></a>00223   <span class="keywordtype">double</span> x1,x2;
<a name="l00224"></a>00224   <span class="keywordtype">int</span> comp1=0;
<a name="l00225"></a>00225   <span class="keywordtype">int</span> comp2=0;
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces,3);
<a name="l00229"></a>00229   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>=0.;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces,3);
<a name="l00232"></a>00232   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a> = 0.;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a4d7e40e06282a054287bebfe6c75cba8">utemp_sum</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_faces,3);
<a name="l00235"></a>00235   <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a4d7e40e06282a054287bebfe6c75cba8">utemp_sum</a> = 0.;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237   <span class="keywordflow">if</span> (tps &gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a72351903880ff7c4cb74c3cde61f3485">t_moy_start</a> )
<a name="l00238"></a>00238     {
<a name="l00239"></a>00239       <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> fic1 (<span class="stringliteral">&quot;utemp.dat&quot;</span>);
<a name="l00240"></a>00240 
<a name="l00241"></a>00241       fic1 &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>;
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="comment">// int trash;</span>
<a name="l00244"></a>00244 <span class="comment">// fic1 &gt;&gt; trash;</span>
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="comment">// for(int num_face = 0 ; num_face&lt;nb_faces ; num_face++)</span>
<a name="l00247"></a>00247 <span class="comment">// {</span>
<a name="l00248"></a>00248 <span class="comment">// fic1 &gt;&gt; utemp(num_face,0) &gt;&gt; utemp(num_face,1) &gt;&gt; utemp(num_face,2);</span>
<a name="l00249"></a>00249 <span class="comment">// }</span>
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#aa2e29305589ed479cef9aee2f274679e">u_target</a>==1) <span class="comment">//!&lt; Ecriture du champ target</span>
<a name="l00254"></a>00254 <span class="comment"></span>    {
<a name="l00255"></a>00255       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic (<span class="stringliteral">&quot;utarget.dat&quot;</span>);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face=0 ; num_face&lt;nb_faces ; num_face++)
<a name="l00258"></a>00258         {
<a name="l00259"></a>00259           fic &lt;&lt; vitesse(num_face,0) &lt;&lt; vitesse(num_face,1) &lt;&lt; vitesse(num_face,2);
<a name="l00260"></a>00260         }
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262   <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#aa2e29305589ed479cef9aee2f274679e">u_target</a>==2) <span class="comment">//!&lt; Lecture du champ target</span>
<a name="l00263"></a>00263 <span class="comment"></span>    {
<a name="l00264"></a>00264       <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> fic (<span class="stringliteral">&quot;vitesse_RANS.dat&quot;</span>);
<a name="l00265"></a>00265       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> ficv (<span class="stringliteral">&quot;verif_target.dat&quot;</span>);
<a name="l00266"></a>00266 
<a name="l00267"></a>00267       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face=0 ; num_face&lt;nb_faces ; num_face++)
<a name="l00268"></a>00268         {
<a name="l00269"></a>00269           fic &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0) &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,1) &gt;&gt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,2);
<a name="l00270"></a>00270           ficv &lt;&lt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,2) &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00271"></a>00271         }
<a name="l00272"></a>00272     }
<a name="l00273"></a>00273   <span class="keywordflow">else</span> <span class="comment">//!&lt; champ target : fonction analytique</span>
<a name="l00274"></a>00274 <span class="comment"></span>    {
<a name="l00275"></a>00275       <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a862cba6cfddc75715fab887d9bd13563">dir</a>==0)
<a name="l00276"></a>00276         {
<a name="l00277"></a>00277           comp1=1 ;
<a name="l00278"></a>00278           comp2=2 ;
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280       <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a862cba6cfddc75715fab887d9bd13563">dir</a>==1)
<a name="l00281"></a>00281         {
<a name="l00282"></a>00282           comp1=0 ;
<a name="l00283"></a>00283           comp2=2 ;
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285       <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a862cba6cfddc75715fab887d9bd13563">dir</a>==2)
<a name="l00286"></a>00286         {
<a name="l00287"></a>00287           comp1=0 ;
<a name="l00288"></a>00288           comp2=1 ;
<a name="l00289"></a>00289         }
<a name="l00290"></a>00290 
<a name="l00291"></a>00291       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face=0 ; num_face&lt;nb_faces ; num_face++)
<a name="l00292"></a>00292         {
<a name="l00293"></a>00293           x1=xv(num_face,comp1);
<a name="l00294"></a>00294           x2=xv(num_face,comp2);
<a name="l00295"></a>00295 
<a name="l00296"></a>00296           <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a862cba6cfddc75715fab887d9bd13563">dir</a>)= <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a7d582f1d4a3e458b5b4d16f4555ed71c">u_tau</a>*(2.44*log((<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a34be15e284d813bc2fba1e5f17eac004">rayon</a>-sqrt(x1*x1+x2*x2))*<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a7d582f1d4a3e458b5b4d16f4555ed71c">u_tau</a>/<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a8efac4e0099e239e85e7772cc17cfd43">nu</a>)+5.32) ;
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">// FAT : HOT : U_RANS(num_face)= 0.1145*(2.44*log((0.077-sqrt(y*y+z*z))*0.1145/1.52e-7)+5.1) ;</span>
<a name="l00299"></a>00299 <span class="comment">// FAT : COLD: U_RANS(num_face)= 0.029*(2.44*log((0.077-sqrt(y*y+x*x))*0.029/6.45e-7)+5.1) ;</span>
<a name="l00300"></a>00300         }
<a name="l00301"></a>00301       <span class="keywordflow">if</span>( <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0629b1e7221ae392065e19e1db2b17e5" title="axe">dir_nom</a>==<span class="stringliteral">&quot;-X&quot;</span> || <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0629b1e7221ae392065e19e1db2b17e5" title="axe">dir_nom</a>==<span class="stringliteral">&quot;-Y&quot;</span> || <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0629b1e7221ae392065e19e1db2b17e5" title="axe">dir_nom</a>==<span class="stringliteral">&quot;-Z&quot;</span>) <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>*=-1.;
<a name="l00302"></a>00302     }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304 }<span class="comment">//fin init</span>
<a name="l00305"></a>00305 
<a name="l00306"></a>00306 
<a name="l00307"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a43ebc5a3fb277cc86dbb3ec121a57741">00307</a> <span class="keywordtype">void</span> <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a43ebc5a3fb277cc86dbb3ec121a57741" title="NE FAIT RIEN A surcharger dans les classes derivees. Mise a jour en temps du terme source...">Terme_Source_Canal_RANS_LES_VEF_Face::mettre_a_jour</a>(<span class="keywordtype">double</span> temps)
<a name="l00308"></a>00308 {
<a name="l00309"></a>00309 <span class="comment">// Cerr &lt;&lt; &quot;Je suis dans le mettre_a_jour&quot; &lt;&lt; finl;</span>
<a name="l00310"></a>00310 
<a name="l00311"></a>00311   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zone_VEF = <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a5eef3f9d5d1010b5c459bffe031f3af4">la_zone_VEF</a>.<a class="code" href="classRef__Zone__VEF.html#aafd9a5ee1a76f290c9c6b5447b0c8d30">valeur</a>();
<a name="l00312"></a>00312 <span class="comment">// const DoubleTab&amp; xv = zone_VEF.xv();</span>
<a name="l00313"></a>00313 
<a name="l00314"></a>00314   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vitesse = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;inconnue().valeurs();
<a name="l00315"></a>00315   <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;schema_temps().pas_de_temps();
<a name="l00316"></a>00316   <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt_min = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;schema_temps().pas_temps_min();
<a name="l00317"></a>00317   <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; tps = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;schema_temps().temps_courant();
<a name="l00318"></a>00318   <span class="keywordtype">int</span> nb_faces = zone_VEF.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
<a name="l00319"></a>00319 
<a name="l00320"></a>00320   <span class="keyword">static</span> <span class="keywordtype">int</span> cpt=0;
<a name="l00321"></a>00321 
<a name="l00322"></a>00322   <span class="keyword">static</span> <span class="keywordtype">double</span> duree=0;
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3653658968c03b99f9643a5dc619019a">moyenne</a>==1)
<a name="l00325"></a>00325     {
<a name="l00326"></a>00326 
<a name="l00327"></a>00327       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;code en VDF, necessite codage VEF ? &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00328"></a>00328       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00329"></a>00329 
<a name="l00330"></a>00330     }<span class="comment">//!&lt; fin moyenne = 1</span>
<a name="l00331"></a>00331 <span class="comment"></span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3653658968c03b99f9643a5dc619019a">moyenne</a>==2)
<a name="l00332"></a>00332     {
<a name="l00333"></a>00333       <span class="comment">//******************************************************</span>
<a name="l00334"></a>00334       <span class="comment">//*************** MOYENNE TEMPORELLE *******************</span>
<a name="l00335"></a>00335       <span class="comment">//******************************************************</span>
<a name="l00336"></a>00336 
<a name="l00337"></a>00337 
<a name="l00338"></a>00338       <span class="keywordflow">if</span>(tps&gt;=<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a72351903880ff7c4cb74c3cde61f3485">t_moy_start</a>)
<a name="l00339"></a>00339         {
<a name="l00340"></a>00340           <span class="keywordtype">double</span> DT_moy=(tps-dt)-<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a72351903880ff7c4cb74c3cde61f3485">t_moy_start</a>;
<a name="l00341"></a>00341 
<a name="l00342"></a>00342           <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>*=DT_moy;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_face=0; num_face&lt;nb_faces; num_face++)
<a name="l00345"></a>00345             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> comp=0; comp&lt;3; comp++)
<a name="l00346"></a>00346               {
<a name="l00347"></a>00347                 <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>(num_face,comp) += dt*vitesse(num_face,comp);
<a name="l00348"></a>00348               }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350           <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>/=(DT_moy+dt);
<a name="l00351"></a>00351 
<a name="l00352"></a>00352           <span class="comment">//           int face=123;</span>
<a name="l00353"></a>00353           <span class="comment">//           SFichier fic_temp(&quot;utemp.dat&quot;, ios::app);</span>
<a name="l00354"></a>00354           <span class="comment">//           SFichier fic_inst(&quot;uinst.dat&quot;, ios::app);</span>
<a name="l00355"></a>00355           <span class="comment">//           fic_temp &lt;&lt; tps &lt;&lt; &quot;  &quot; &lt;&lt;  utemp(face,0) &lt;&lt; &quot;  &quot;</span>
<a name="l00356"></a>00356           <span class="comment">//                    &lt;&lt; xv(face,0) &lt;&lt; &quot;  &quot; &lt;&lt; xv(face,1) &lt;&lt; &quot;  &quot; &lt;&lt;  xv(face,2) &lt;&lt; finl;</span>
<a name="l00357"></a>00357           <span class="comment">//           fic_inst &lt;&lt; tps &lt;&lt; &quot;  &quot; &lt;&lt; vitesse(face,0) &lt;&lt; finl;</span>
<a name="l00358"></a>00358         }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 
<a name="l00361"></a>00361       <span class="comment">//***********************************************************</span>
<a name="l00362"></a>00362       <span class="comment">//*************** FIN MOYENNE TEMPORELLE  ***************</span>
<a name="l00363"></a>00363       <span class="comment">//*******************************************************</span>
<a name="l00364"></a>00364     }
<a name="l00365"></a>00365   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3653658968c03b99f9643a5dc619019a">moyenne</a>==3)
<a name="l00366"></a>00366     {
<a name="l00367"></a>00367       <span class="comment">//********************************************************************************</span>
<a name="l00368"></a>00368       <span class="comment">//*************** MOYENNE TEMPORELLE (debut t=0 ou presque...) *******************</span>
<a name="l00369"></a>00369       <span class="comment">//********************************************************************************</span>
<a name="l00370"></a>00370 
<a name="l00371"></a>00371       <span class="keywordflow">if</span>(tps&gt;0)
<a name="l00372"></a>00372         {
<a name="l00373"></a>00373           <span class="keywordflow">if</span>(cpt==0)
<a name="l00374"></a>00374             {
<a name="l00375"></a>00375               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_face=0; num_face&lt;nb_faces; num_face++)
<a name="l00376"></a>00376                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> comp=0; comp&lt;3; comp++)
<a name="l00377"></a>00377                   {
<a name="l00378"></a>00378                     duree=400*dt;
<a name="l00379"></a>00379                     <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a4d7e40e06282a054287bebfe6c75cba8">utemp_sum</a>(num_face,comp) = <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,comp)*duree;
<a name="l00380"></a>00380                     duree-=dt;
<a name="l00381"></a>00381                     <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>(num_face,comp) = <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a4d7e40e06282a054287bebfe6c75cba8">utemp_sum</a>(num_face,comp)/(tps-dt_min+duree);
<a name="l00382"></a>00382 
<a name="l00383"></a>00383                     <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a4d7e40e06282a054287bebfe6c75cba8">utemp_sum</a>(num_face,comp) += dt*vitesse(num_face,comp);
<a name="l00384"></a>00384                     <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>(num_face,comp) = vitesse(num_face,comp);
<a name="l00385"></a>00385                   }
<a name="l00386"></a>00386               cpt++;
<a name="l00387"></a>00387 
<a name="l00388"></a>00388             }
<a name="l00389"></a>00389           <span class="keywordflow">else</span>
<a name="l00390"></a>00390             {
<a name="l00391"></a>00391               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> num_face=0; num_face&lt;nb_faces; num_face++)
<a name="l00392"></a>00392                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> comp=0; comp&lt;3; comp++)
<a name="l00393"></a>00393                   {
<a name="l00394"></a>00394                     <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a4d7e40e06282a054287bebfe6c75cba8">utemp_sum</a>(num_face,comp) += dt*vitesse(num_face,comp);
<a name="l00395"></a>00395                     <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>(num_face,comp) = <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a4d7e40e06282a054287bebfe6c75cba8">utemp_sum</a>(num_face,comp)/(tps-dt_min+dt+duree);
<a name="l00396"></a>00396                   }
<a name="l00397"></a>00397             }
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     }
<a name="l00401"></a>00401   <span class="keywordflow">else</span>
<a name="l00402"></a>00402     {
<a name="l00403"></a>00403       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;moyenne = &quot;</span> &lt;&lt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3653658968c03b99f9643a5dc619019a">moyenne</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00404"></a>00404       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Probleme pour le choix du type de moyenne&quot;</span> &lt;&lt; finl;
<a name="l00405"></a>00405     }
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 
<a name="l00408"></a>00408 }<span class="comment">//fin mettre_a_jour</span>
<a name="l00409"></a>00409 
<a name="l00410"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a9f708a612ac682fe093e9a7f130d7524">00410</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a9f708a612ac682fe093e9a7f130d7524">Terme_Source_Canal_RANS_LES_VEF_Face::ajouter</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; resu)<span class="keyword"> const</span>
<a name="l00411"></a>00411 <span class="keyword"></span>{
<a name="l00412"></a>00412   <span class="keyword">const</span> <a class="code" href="classZone__VEF.html" title="class Zone_VEF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VEF</a>&amp; zone_VEF = <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a5eef3f9d5d1010b5c459bffe031f3af4">la_zone_VEF</a>.<a class="code" href="classRef__Zone__VEF.html#aafd9a5ee1a76f290c9c6b5447b0c8d30">valeur</a>();
<a name="l00413"></a>00413   <span class="keywordtype">int</span> nb_faces = zone_VEF.<a class="code" href="classZone__VF.html#aede27992d9f2eedd52c24d4a80ff7ffb" title="renvoie le nombre global de faces.">nb_faces</a>();
<a name="l00414"></a>00414   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; porosite_surf = zone_VEF.<a class="code" href="classZone__VF.html#ad9d74d1d9da9f50ab26768dbbca7711b">porosite_face</a>();
<a name="l00415"></a>00415   <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; volumes_entrelaces = zone_VEF.<a class="code" href="classZone__VF.html#a64f0b549e5aea1656855113e3510f418">volumes_entrelaces</a>();
<a name="l00416"></a>00416   <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; tps = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;schema_temps().temps_courant();
<a name="l00417"></a>00417   <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;schema_temps().pas_de_temps();
<a name="l00418"></a>00418   <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; dt_min = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;schema_temps().pas_temps_min();
<a name="l00419"></a>00419 
<a name="l00420"></a>00420   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vitesse = <a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;inconnue().valeurs();
<a name="l00421"></a>00421 
<a name="l00422"></a>00422   <span class="comment">//   DoubleTab resu_old(U_RANS);</span>
<a name="l00423"></a>00423   <span class="comment">//   DoubleTab utemp_bar(utemp);</span>
<a name="l00424"></a>00424 
<a name="l00425"></a>00425   <span class="comment">//   if (sub_type(Champ_P1NC,mon_equation-&gt;inconnue().valeur()))</span>
<a name="l00426"></a>00426   <span class="comment">//   {</span>
<a name="l00427"></a>00427   <span class="comment">//    const Champ_P1NC&amp; Ch = ref_cast(Champ_P1NC,mon_equation-&gt;inconnue().valeur());</span>
<a name="l00428"></a>00428   <span class="comment">//    Ch.filtrer_L2(U_RANS_bar);</span>
<a name="l00429"></a>00429   <span class="comment">//    Ch.filtrer_L2(utemp_bar);</span>
<a name="l00430"></a>00430   <span class="comment">//   }</span>
<a name="l00431"></a>00431 
<a name="l00432"></a>00432   <span class="keywordtype">double</span> vol = 0.;
<a name="l00433"></a>00433   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic_f(<span class="stringliteral">&quot;forcing_term.dat&quot;</span>, ios::app);
<a name="l00434"></a>00434   <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> fic_finst(<span class="stringliteral">&quot;finst.dat&quot;</span>, ios::app);
<a name="l00435"></a>00435   <span class="keywordtype">double</span> mbf0 = 0.; <span class="comment">// mean body force</span>
<a name="l00436"></a>00436   <span class="keywordtype">double</span> mbf1 = 0.; <span class="comment">// mean body force</span>
<a name="l00437"></a>00437   <span class="keywordtype">double</span> mbf2 = 0.; <span class="comment">// mean body force</span>
<a name="l00438"></a>00438   <span class="keywordtype">double</span> mbf = 0.; <span class="comment">//body force</span>
<a name="l00439"></a>00439   <span class="keyword">static</span> <span class="keywordtype">int</span> cpt = 0;
<a name="l00440"></a>00440   <span class="keywordtype">double</span> coef=1.;
<a name="l00441"></a>00441   <span class="keywordtype">double</span> scaling=0.;
<a name="l00442"></a>00442 
<a name="l00443"></a>00443   <span class="keywordflow">if</span>((tps&gt;<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a68e54475082123cf2d5ca5abe8d1a15c">f_start</a>)||((<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3653658968c03b99f9643a5dc619019a">moyenne</a>==3)&amp;&amp;(tps&gt;dt_min)&amp;&amp;(tps&gt;<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a68e54475082123cf2d5ca5abe8d1a15c">f_start</a>)))
<a name="l00444"></a>00444     {
<a name="l00445"></a>00445       cpt++;
<a name="l00446"></a>00446       <span class="keywordflow">if</span> (tps &lt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a28d6bfd991f2d306f304b5fe679953f1">f_tot</a>) coef*=(tps-<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a68e54475082123cf2d5ca5abe8d1a15c">f_start</a>)/(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a28d6bfd991f2d306f304b5fe679953f1">f_tot</a>-<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a68e54475082123cf2d5ca5abe8d1a15c">f_start</a>);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> num_face = 0 ; num_face&lt;nb_faces ; num_face++)
<a name="l00449"></a>00449         {
<a name="l00450"></a>00450           vol = volumes_entrelaces(num_face)*porosite_surf(num_face);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> comp=0; comp&lt;3; comp++)
<a name="l00453"></a>00453             {
<a name="l00454"></a>00454               scaling=<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,comp)/((<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0)*<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0)
<a name="l00455"></a>00455                                               +<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,1)*<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,1)
<a name="l00456"></a>00456                                               +<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,2)*<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,2))+1e-10);
<a name="l00457"></a>00457               <span class="comment">//                    if(cpt &gt; 150)</span>
<a name="l00458"></a>00458               <span class="comment">//                      resu(num_face,comp)=resu_old(num_face,comp);</span>
<a name="l00459"></a>00459               <span class="comment">//                    else</span>
<a name="l00460"></a>00460               <span class="comment">//                      {</span>
<a name="l00461"></a>00461               resu(num_face,comp) = scaling*coef*((<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,comp)-<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>(num_face,comp))/(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3b133ca0cc561eada3bd24257f2f16d6">alpha_tau</a>*dt))*vol;
<a name="l00462"></a>00462               <span class="comment">//f(num_face,comp) = /*coef**/((U_RANS_bar(num_face,comp)-utemp_bar(num_face,comp))/(alpha_tau*dt))*vol;</span>
<a name="l00463"></a>00463               <span class="comment">//                        resu_old(num_face,comp)=resu(num_face,comp);</span>
<a name="l00464"></a>00464               <span class="comment">//                      }</span>
<a name="l00465"></a>00465             }
<a name="l00466"></a>00466 
<a name="l00467"></a>00467           mbf0 += resu(num_face,0);
<a name="l00468"></a>00468           mbf1 += resu(num_face,1);
<a name="l00469"></a>00469           mbf2 += resu(num_face,2);
<a name="l00470"></a>00470         }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472       mbf0/=nb_faces;
<a name="l00473"></a>00473       mbf1/=nb_faces;
<a name="l00474"></a>00474       mbf2/=nb_faces;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476       <span class="keywordtype">int</span> num_face=123;
<a name="l00477"></a>00477 
<a name="l00478"></a>00478       scaling=<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0)/((<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0)*<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0)
<a name="l00479"></a>00479                                    +<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,1)*<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,1)
<a name="l00480"></a>00480                                    +<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,2)*<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,2))+1e-10);
<a name="l00481"></a>00481 
<a name="l00482"></a>00482       mbf = scaling*((<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0)-<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>(num_face,0))/(<a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a3b133ca0cc561eada3bd24257f2f16d6">alpha_tau</a>*dt))*vol;
<a name="l00483"></a>00483 
<a name="l00484"></a>00484       fic_finst &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; mbf &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt;  <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a0c77f45c7552c1f7af92e3b637818a0a">U_RANS</a>(num_face,0)
<a name="l00485"></a>00485                 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#ac3a325d1c40e3ccd2f41ccad44a82741">utemp</a>(num_face,0) &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; vitesse(num_face,0)
<a name="l00486"></a>00486                 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; scaling &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00487"></a>00487 
<a name="l00488"></a>00488       fic_f &lt;&lt; tps &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; mbf0 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; mbf1 &lt;&lt;<span class="stringliteral">&quot; &quot;</span> &lt;&lt; mbf2 &lt;&lt; finl;
<a name="l00489"></a>00489 
<a name="l00490"></a>00490       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classChamp__P1NC.html">Champ_P1NC</a>,<a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;inconnue().<a class="code" href="classRef__Equation__base.html#a7bb6fb60cb55bef0eef1b0e8718300a4">valeur</a>()))
<a name="l00491"></a>00491         {
<a name="l00492"></a>00492           <span class="keyword">const</span> <a class="code" href="classChamp__P1NC.html">Champ_P1NC</a>&amp; Ch = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classChamp__P1NC.html">Champ_P1NC</a>,<a class="code" href="classMorEqn.html#a47b12fa29b57783a8a5897f7611e2176">mon_equation</a>-&gt;inconnue().<a class="code" href="classRef__Equation__base.html#a7bb6fb60cb55bef0eef1b0e8718300a4">valeur</a>());
<a name="l00493"></a>00493           Ch.<a class="code" href="classChamp__P1NC.html#a518597ace3e16644867a6798b3a4025a">filtrer_resu</a>(resu);
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 
<a name="l00497"></a>00497     }<span class="comment">//fin if f_start</span>
<a name="l00498"></a>00498 
<a name="l00499"></a>00499   <span class="keywordflow">return</span> resu;
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a><a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a275d958bd18587e1820adca4160134a6">00502</a> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a275d958bd18587e1820adca4160134a6">Terme_Source_Canal_RANS_LES_VEF_Face::calculer</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; resu)<span class="keyword"> const</span>
<a name="l00503"></a>00503 <span class="keyword"></span>{
<a name="l00504"></a>00504   resu = 0;
<a name="l00505"></a>00505   <span class="keywordflow">return</span> <a class="code" href="classTerme__Source__Canal__RANS__LES__VEF__Face.html#a9f708a612ac682fe093e9a7f130d7524">ajouter</a>(resu);
<a name="l00506"></a>00506 }
<a name="l00507"></a>00507 
<a name="l00508"></a>00508 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:44 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
