<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: Perte_Charge_Singuliere Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Perte_Charge_Singuliere Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Perte_Charge_Singuliere" --><!-- doxytag: inherits="Perte_Charge" -->
<p>Classe <a class="el" href="classPerte__Charge__Singuliere.html" title="Classe Perte_Charge_Singuliere Cette classe derivee de Perte_Charge est utilisee lorsque l&#39;on veut mo...">Perte_Charge_Singuliere</a><br/>
Cette classe derivee de <a class="el" href="classPerte__Charge.html" title="Classe Perte_Charge Cette classe represente un terme de perte de charge quiest introduit dans les equ...">Perte_Charge</a> est utilisee lorsque l'on veut<br/>
modeliser une perte de charge sur une surface (passage d'une grille par exemple)<br/>
par exemple)  
 <a href="classPerte__Charge__Singuliere.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Perte_Charge_Singuliere:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classPerte__Charge__Singuliere.png" usemap="#Perte_Charge_Singuliere_map" alt=""/>
  <map id="Perte_Charge_Singuliere_map" name="Perte_Charge_Singuliere_map">
<area href="classPerte__Charge.html" title="Classe Perte_Charge Cette classe represente un terme de perte de charge quiest introduit dans les equ..." alt="Perte_Charge" shape="rect" coords="657,0,910,24"/>
<area href="classDP__Impose.html" title="Classe DP_Impose Cette classe derivee de Perte_Charge_Singuliere est utilisee lorsque l&#39;on veut impos..." alt="DP_Impose" shape="rect" coords="131,112,384,136"/>
<area href="classPerte__Charge__Singuliere__CoviMAC__Face.html" title="class Perte_Charge_Singuliere_CoviMAC_Face" alt="Perte_Charge_Singuliere_CoviMAC_Face" shape="rect" coords="394,112,647,136"/>
<area href="classPerte__Charge__Singuliere__PolyMAC__Face.html" title="class Perte_Charge_Singuliere_PolyMAC_Face" alt="Perte_Charge_Singuliere_PolyMAC_Face" shape="rect" coords="657,112,910,136"/>
<area href="classPerte__Charge__Singuliere__VDF__Face.html" title="class Perte_Charge_Singuliere_VDF_Face" alt="Perte_Charge_Singuliere_VDF_Face" shape="rect" coords="920,112,1173,136"/>
<area href="classPerte__Charge__Singuliere__VEF__Face.html" title="class Perte_Charge_Singuliere_VEF_Face" alt="Perte_Charge_Singuliere_VEF_Face" shape="rect" coords="1183,112,1436,136"/>
<area href="classDP__Impose__CoviMAC__Face.html" title="class DP_Impose_CoviMAC_Face" alt="DP_Impose_CoviMAC_Face" shape="rect" coords="0,168,253,192"/>
<area href="classDP__Impose__PolyMAC__Face.html" title="class DP_Impose_PolyMAC_Face" alt="DP_Impose_PolyMAC_Face" shape="rect" coords="263,168,516,192"/>
<area href="classPerte__Charge__Singuliere__QC__VDF__Face.html" alt="Perte_Charge_Singuliere_QC_VDF_Face" shape="rect" coords="920,168,1173,192"/>
<area href="classPerte__Charge__Singuliere__QC__VEF__P1NC.html" alt="Perte_Charge_Singuliere_QC_VEF_P1NC" shape="rect" coords="1183,168,1436,192"/>
</map>
 </div></div>

<p><a href="classPerte__Charge__Singuliere-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#a60b77f688193fa460b216f9ce61e3ef4">~Perte_Charge_Singuliere</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEntree.html">Entree</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#ae921dbe17585e57646c74ad8e470ee25">lire_donnees</a> (<a class="el" href="classEntree.html">Entree</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Lit les specifications d'une perte de charge singuliere<br/>
a partir d'un flot d'entree.  <a href="#ae921dbe17585e57646c74ad8e470ee25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#a275c6676236eb5795b6bdbb7df96ead1">lire_surfaces</a> (<a class="el" href="classEntree.html">Entree</a> &amp;, const <a class="el" href="classDomaine.html">Domaine</a> &amp;, const <a class="el" href="classZone__dis__base.html">Zone_dis_base</a> &amp;, <a class="el" href="classIntVect.html">IntVect</a> &amp;, <a class="el" href="classIntVect.html">IntVect</a> &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#afaf981464141eb2195574825b00ab859">K</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#a6b86b1caad93e60bb9143e70148b5f80">calculate_Q</a> (const <a class="el" href="classEquation__base.html">Equation_base</a> &amp;eqn, const <a class="el" href="classIntVect.html">IntVect</a> &amp;num_faces, const <a class="el" href="classIntVect.html">IntVect</a> &amp;sgn) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#a1bef4417d1f467e8377b54d57ecb01ac">update_K</a> (const <a class="el" href="classEquation__base.html">Equation_base</a> &amp;eqn, double deb, <a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;bilan)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#aed3c4c0e855ea65d7f5afd0fcdbeabc2">K_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNom.html">Nom</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#a822dfa85ad27c35b884854e9c4e3f244">identifiant_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#a036910a1edb3b5e13a16071cc7c4211e">regul_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classParser__U.html">Parser_U</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#acb6602b31e6bdb514583b5f50e770d21">deb_cible_</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classParser__U.html">Parser_U</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerte__Charge__Singuliere.html#a28f54fe2cfaad225aa3216315ed40d25">eps_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Classe <a class="el" href="classPerte__Charge__Singuliere.html" title="Classe Perte_Charge_Singuliere Cette classe derivee de Perte_Charge est utilisee lorsque l&#39;on veut mo...">Perte_Charge_Singuliere</a><br/>
Cette classe derivee de <a class="el" href="classPerte__Charge.html" title="Classe Perte_Charge Cette classe represente un terme de perte de charge quiest introduit dans les equ...">Perte_Charge</a> est utilisee lorsque l'on veut<br/>
modeliser une perte de charge sur une surface (passage d'une grille par exemple)<br/>
par exemple) </p>

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00049">49</a> of file <a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a60b77f688193fa460b216f9ce61e3ef4"></a><!-- doxytag: member="Perte_Charge_Singuliere::~Perte_Charge_Singuliere" ref="a60b77f688193fa460b216f9ce61e3ef4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual Perte_Charge_Singuliere::~Perte_Charge_Singuliere </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00054">54</a> of file <a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>.</p>
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6b86b1caad93e60bb9143e70148b5f80"></a><!-- doxytag: member="Perte_Charge_Singuliere::calculate_Q" ref="a6b86b1caad93e60bb9143e70148b5f80" args="(const Equation_base &amp;eqn, const IntVect &amp;num_faces, const IntVect &amp;sgn) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Perte_Charge_Singuliere::calculate_Q </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classEquation__base.html">Equation_base</a> &amp;&#160;</td>
          <td class="paramname"><em>eqn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>num_faces</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>sgn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>&lt; get_champ pour flica5 car la masse volumique n'est pas dans le milieu... </p>
</p>

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00382">382</a> of file <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html">Perte_Charge_Singuliere.cpp</a>.</p>

<p>References <a class="el" href="Zone__VF_8cpp_source.html#l00623">Zone_VF::creer_tableau_faces()</a>, <a class="el" href="Objet__U_8h_source.html#l00079">Objet_U::dimension</a>, <a class="el" href="classZone__VF.html#a547ab50904dc51bee39fed54a20934b2">Zone_VF::face_normales()</a>, <a class="el" href="Zone__VF_8h_source.html#l00054">Zone_VF::face_surfaces()</a>, <a class="el" href="Zone__VF_8h_source.html#l00458">Zone_VF::face_voisins()</a>, <a class="el" href="Probleme__base_8cpp_source.html#l01630">Probleme_base::get_champ()</a>, <a class="el" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">Equation_base::inconnue()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00597">mp_somme_vect()</a>, <a class="el" href="Zone__VF_8h_source.html#l00285">Zone_VF::porosite_face()</a>, <a class="el" href="Equation__base_8cpp_source.html#l00964">Equation_base::probleme()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="Op__Conv__Muscl__old__VEF__Face_8cpp_source.html#l00053">sgn</a>, <a class="el" href="IntVect_8h_source.html#l00139">IntVect::size()</a>, <a class="el" href="Cast_8h_source.html#l00054">sub_type</a>, <a class="el" href="Zone__dis_8h_source.html#l00029">Deriv_Zone_dis_base::valeur()</a>, <a class="el" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">Champ_Proto::valeurs()</a>, <a class="el" href="Champ__Inc_8cpp_source.html#l00245">Champ_Inc::valeurs()</a>, and <a class="el" href="Equation__base_8cpp_source.html#l00091">Equation_base::zone_dis()</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere__VEF__Face_8cpp_source.html#l00157">Perte_Charge_Singuliere_VEF_Face::mettre_a_jour()</a>, <a class="el" href="Perte__Charge__Singuliere__VDF__Face_8cpp_source.html#l00192">Perte_Charge_Singuliere_VDF_Face::mettre_a_jour()</a>, <a class="el" href="Perte__Charge__Singuliere__PolyMAC__Face_8cpp_source.html#l00122">Perte_Charge_Singuliere_PolyMAC_Face::mettre_a_jour()</a>, <a class="el" href="DP__Impose__PolyMAC__Face_8cpp_source.html#l00134">DP_Impose_PolyMAC_Face::mettre_a_jour()</a>, <a class="el" href="Perte__Charge__Singuliere__CoviMAC__Face_8cpp_source.html#l00113">Perte_Charge_Singuliere_CoviMAC_Face::mettre_a_jour()</a>, and <a class="el" href="DP__Impose__CoviMAC__Face_8cpp_source.html#l00117">DP_Impose_CoviMAC_Face::mettre_a_jour()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, eqn.<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>());
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vit = eqn.<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classChamp__Inc.html#a28ef3d411d12cb5684ac5e799efb7d24" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs au temps courant.">valeurs</a>(),
                   &amp;fac = <a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classPb__Multiphase.html" title="classe Pb_Multiphase Cette classe represente un probleme de thermohydraulique multiphase de type &quot;3*...">Pb_Multiphase</a>, eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>()) ? <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classPb__Multiphase.html" title="classe Pb_Multiphase Cette classe represente un probleme de thermohydraulique multiphase de type &quot;3*...">Pb_Multiphase</a>, eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>()).eq_masse.champ_conserve().passe()
                          : eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#acc8deeeb73b31eaa3d0ecd4f9644ba77">get_champ</a>(<span class="stringliteral">&quot;masse_volumique&quot;</span>).<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>(); <span class="comment">//!&lt; get_champ pour flica5 car la masse volumique n&#39;est pas dans le milieu...</span>
<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; pf = zvf.<a class="code" href="classZone__VF.html#ad9d74d1d9da9f50ab26768dbbca7711b">porosite_face</a>(), &amp;fs = zvf.<a class="code" href="classZone__VF.html#a40c3382b189a4fc508cf1c3e37b04b21">face_surfaces</a>();
  <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; f_e = zvf.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
  <span class="keywordtype">int</span> cF = fac.dimension_tot(0) == 1, i, n, N = fac.line_size(), d, D = <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>;

  <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> deb_vect;
  zvf.<a class="code" href="classZone__VF.html#a8e02e68f236356f72728b82536538ac5">creer_tableau_faces</a>(deb_vect); <span class="comment">//pour bien sommer les debits en parallele</span>
  <span class="keywordflow">for</span> (i = 0; i &lt; num_faces.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>(); i++)
    {
      <span class="keywordtype">int</span> f = num_faces(i), e = f_e(f, f_e(f, 0) &lt; 0); <span class="comment">//todo : evaluer fac du bon cote</span>
      <span class="keywordflow">if</span> (vit.line_size() &gt; N) <span class="keywordflow">for</span> (d = 0; d &lt; D; d++) <span class="keywordflow">for</span> (n = 0; n &lt; N; n++) deb_vect(f) += zvf.<a class="code" href="classZone__VF.html#a547ab50904dc51bee39fed54a20934b2">face_normales</a>(f, d) * vit(f, N * d + n) * fac(!cF * e, n); <span class="comment">//vecteur complet : v . nf</span>
      <span class="keywordflow">else</span> <span class="keywordflow">for</span> (n = 0; n &lt; N; n++) deb_vect(f) += fs(f) * vit(f, n) * fac(!cF * e, n); <span class="comment">//normale aux faces seule</span>
      deb_vect(f) *= pf(f) * (sgn.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>() ? <a class="code" href="Op__Conv__Muscl__old__VEF__Face_8cpp.html#ae1b5a554c1d4d97654c06032a92f800a">sgn</a>(i) : deb_vect(f) &gt; 0 ? 1 : -1) ; <span class="comment">//produit par la porosite + orientation (si elle n&#39;est pas definie, on compte tout en positif)</span>
    }
  <span class="keywordflow">return</span> <a class="code" href="DoubleVect_8cpp.html#a07dd5e25d47ad3892ae0fa4e997ed011">mp_somme_vect</a>(deb_vect);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afaf981464141eb2195574825b00ab859"></a><!-- doxytag: member="Perte_Charge_Singuliere::K" ref="afaf981464141eb2195574825b00ab859" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Perte_Charge_Singuliere::K </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>double<br/>
 Signification:<br/>
 Contraintes: </dd></dl>

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00085">85</a> of file <a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>.</p>

<p>References <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00063">K_</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere__VEF__Face_8cpp_source.html#l00090">Perte_Charge_Singuliere_VEF_Face::ajouter()</a>, <a class="el" href="Perte__Charge__Singuliere__PolyMAC__Face_8cpp_source.html#l00086">Perte_Charge_Singuliere_PolyMAC_Face::ajouter()</a>, <a class="el" href="Perte__Charge__Singuliere__VDF__Face_8cpp_source.html#l00147">Perte_Charge_Singuliere_VDF_Face::ajouter_()</a>, <a class="el" href="Perte__Charge__Singuliere__VEF__Face_8cpp_source.html#l00126">Perte_Charge_Singuliere_VEF_Face::contribuer_a_avec()</a>, <a class="el" href="Perte__Charge__Singuliere__VDF__Face_8cpp_source.html#l00098">Perte_Charge_Singuliere_VDF_Face::contribuer_a_avec()</a>, and <a class="el" href="Perte__Charge__Singuliere__PolyMAC__Face_8cpp_source.html#l00108">Perte_Charge_Singuliere_PolyMAC_Face::contribuer_a_avec()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="classPerte__Charge__Singuliere.html#aed3c4c0e855ea65d7f5afd0fcdbeabc2">K_</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae921dbe17585e57646c74ad8e470ee25"></a><!-- doxytag: member="Perte_Charge_Singuliere::lire_donnees" ref="ae921dbe17585e57646c74ad8e470ee25" args="(Entree &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEntree.html">Entree</a> &amp; Perte_Charge_Singuliere::lire_donnees </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEntree.html">Entree</a> &amp;&#160;</td>
          <td class="paramname"><em>is</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Lit les specifications d'une perte de charge singuliere<br/>
a partir d'un flot d'entree. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp;<br/>
 Signification: le flot d'entree modifie<br/>
 Contraintes: </dd></dl>

<p>Reimplemented in <a class="el" href="classDP__Impose.html#af4405f33790e968d09f51332f5c1fd63">DP_Impose</a>.</p>

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00059">59</a> of file <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html">Perte_Charge_Singuliere.cpp</a>.</p>

<p>References <a class="el" href="Parser__U_8h_source.html#l00154">Parser_U::addVar()</a>, <a class="el" href="Param_8cpp_source.html#l00386">Param::ajouter()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Entree_8cpp_source.html#l00232">convert_to()</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00068">deb_cible_</a>, <a class="el" href="Perte__Charge_8h_source.html#l00055">Perte_Charge::direction_perte_charge_</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00068">eps_</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00063">K_</a>, <a class="el" href="Param_8h_source.html#l00083">Param::lire_avec_accolades()</a>, <a class="el" href="Parser__U_8h_source.html#l00111">Parser_U::parseString()</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00067">regul_</a>, <a class="el" href="Param_8h_source.html#l00048">Param::REQUIRED</a>, <a class="el" href="Motcle_8cpp_source.html#l00538">Motcles::search()</a>, <a class="el" href="Parser__U_8h_source.html#l00145">Parser_U::setNbVar()</a>, and <a class="el" href="Parser__U_8h_source.html#l00165">Parser_U::setString()</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere__VEF__Face_8cpp_source.html#l00044">Perte_Charge_Singuliere_VEF_Face::readOn()</a>, <a class="el" href="Perte__Charge__Singuliere__VDF__Face_8cpp_source.html#l00045">Perte_Charge_Singuliere_VDF_Face::readOn()</a>, <a class="el" href="Perte__Charge__Singuliere__PolyMAC__Face_8cpp_source.html#l00045">Perte_Charge_Singuliere_PolyMAC_Face::readOn()</a>, and <a class="el" href="Perte__Charge__Singuliere__CoviMAC__Face_8cpp_source.html#l00048">Perte_Charge_Singuliere_CoviMAC_Face::readOn()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu;
  <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> acc_ouverte(<span class="stringliteral">&quot;{&quot;</span>);
  <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_motcles(4);
  les_motcles[0] = <span class="stringliteral">&quot;KX&quot;</span>;
  les_motcles[1] = <span class="stringliteral">&quot;KY&quot;</span>;
  les_motcles[2] = <span class="stringliteral">&quot;KZ&quot;</span>;
  les_motcles[3] = <span class="stringliteral">&quot;K&quot;</span>;
  <a class="code" href="classPerte__Charge__Singuliere.html#a036910a1edb3b5e13a16071cc7c4211e">regul_</a> = 0;
  is &gt;&gt; motlu;
  <span class="keywordflow">if</span> (motlu != acc_ouverte)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait le mot cle&quot;</span> &lt;&lt; acc_ouverte &lt;&lt; <span class="stringliteral">&quot; a la place de &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  is &gt;&gt; motlu;
  <span class="keywordflow">if</span> (motlu != <span class="stringliteral">&quot;dir&quot;</span>)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait le mot cle dir a la place de &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="keywordflow">else</span>
    {
      is &gt;&gt; motlu;
      <span class="keywordtype">int</span> rang = les_motcles.search(motlu);
      <span class="keywordflow">if</span> (rang == -1)
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Erreur a la lecture des donnees de Perte_Charge_Singuliere&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait l&#39;un des mots cles &quot;</span> &lt;&lt; les_motcles &lt;&lt; finl;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;a la place de &quot;</span> &lt;&lt; motlu &lt;&lt; finl;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
      <a class="code" href="classPerte__Charge.html#a5ad009a63cf1d99d839fadce076f1ccf">direction_perte_charge_</a> = rang == 3 ? -1 : rang;

    }
  is &gt;&gt; motlu;
  <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;regul&quot;</span>)
    {
      <a class="code" href="classPerte__Charge__Singuliere.html#a036910a1edb3b5e13a16071cc7c4211e">regul_</a> = 1;
      <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> eps_str, deb_str;
      <a class="code" href="classParam.html" title="Defined below in this file.">Param</a> param(<span class="stringliteral">&quot;regul&quot;</span>);
      param.ajouter(<span class="stringliteral">&quot;K0&quot;</span>, &amp;<a class="code" href="classPerte__Charge__Singuliere.html#aed3c4c0e855ea65d7f5afd0fcdbeabc2">K_</a>, <a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
      param.ajouter(<span class="stringliteral">&quot;deb&quot;</span>, &amp;deb_str, <a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
      param.ajouter(<span class="stringliteral">&quot;eps&quot;</span>, &amp;eps_str, <a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
      param.lire_avec_accolades(is);
      <a class="code" href="classPerte__Charge__Singuliere.html#acb6602b31e6bdb514583b5f50e770d21">deb_cible_</a>.<a class="code" href="classParser__U.html#a3ff44eabf641cbcea9ca59f84167e2c1">setNbVar</a>(1), <a class="code" href="classPerte__Charge__Singuliere.html#a28f54fe2cfaad225aa3216315ed40d25">eps_</a>.<a class="code" href="classParser__U.html#a3ff44eabf641cbcea9ca59f84167e2c1">setNbVar</a>(1);
      <a class="code" href="classPerte__Charge__Singuliere.html#acb6602b31e6bdb514583b5f50e770d21">deb_cible_</a>.<a class="code" href="classParser__U.html#a25d581b85688da391aa64117abf0a073">setString</a>(deb_str), <a class="code" href="classPerte__Charge__Singuliere.html#a28f54fe2cfaad225aa3216315ed40d25">eps_</a>.<a class="code" href="classParser__U.html#a25d581b85688da391aa64117abf0a073">setString</a>(eps_str);
      <a class="code" href="classPerte__Charge__Singuliere.html#acb6602b31e6bdb514583b5f50e770d21">deb_cible_</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;t&quot;</span>), <a class="code" href="classPerte__Charge__Singuliere.html#a28f54fe2cfaad225aa3216315ed40d25">eps_</a>.<a class="code" href="classParser__U.html#ae216b7daee6c4bb756423ffed5674293">addVar</a>(<span class="stringliteral">&quot;t&quot;</span>);
      <a class="code" href="classPerte__Charge__Singuliere.html#acb6602b31e6bdb514583b5f50e770d21">deb_cible_</a>.<a class="code" href="classParser__U.html#a441c2fd29f5d4370c0c7b6a1cdfe56d5">parseString</a>(), <a class="code" href="classPerte__Charge__Singuliere.html#a28f54fe2cfaad225aa3216315ed40d25">eps_</a>.<a class="code" href="classParser__U.html#a441c2fd29f5d4370c0c7b6a1cdfe56d5">parseString</a>();
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;coeff&quot;</span>)
    {
      is &gt;&gt; motlu;
      <a class="code" href="Avanc_8cpp.html#a98c8f11a2783c4bdf1a9484db0dc3c3b">convert_to</a>(motlu.getChar(), <a class="code" href="classPerte__Charge__Singuliere.html#aed3c4c0e855ea65d7f5afd0fcdbeabc2">K_</a>);
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait le mot cle coeff ou regul a la place de &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }

  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; direction_perte_charge_ &quot;</span> &lt;&lt; <a class="code" href="classPerte__Charge.html#a5ad009a63cf1d99d839fadce076f1ccf">direction_perte_charge_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
  <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; perte de charge K_ &quot;</span> &lt;&lt; <a class="code" href="classPerte__Charge__Singuliere.html#aed3c4c0e855ea65d7f5afd0fcdbeabc2">K_</a> &lt;&lt; finl;

  <span class="keywordflow">return</span> is;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a275c6676236eb5795b6bdbb7df96ead1"></a><!-- doxytag: member="Perte_Charge_Singuliere::lire_surfaces" ref="a275c6676236eb5795b6bdbb7df96ead1" args="(Entree &amp;, const Domaine &amp;, const Zone_dis_base &amp;, IntVect &amp;, IntVect &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Perte_Charge_Singuliere::lire_surfaces </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classEntree.html">Entree</a> &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classDomaine.html">Domaine</a> &amp;&#160;</td>
          <td class="paramname"><em>le_domaine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classZone__dis__base.html">Zone_dis_base</a> &amp;&#160;</td>
          <td class="paramname"><em>zone_dis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>les_faces</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classIntVect.html">IntVect</a> &amp;&#160;</td>
          <td class="paramname"><em>sgn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00127">127</a> of file <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html">Perte_Charge_Singuliere.cpp</a>.</p>

<p>References <a class="el" href="Zone_8h_source.html#l00660">Zone::calculer_centres_gravite()</a>, <a class="el" href="EntreeSortie_8h_source.html#l00032">Cerr</a>, <a class="el" href="Memoire_8cpp_source.html#l00026">compteur</a>, <a class="el" href="Zone_8cpp_source.html#l01571">Zone::construit_octree()</a>, <a class="el" href="Domaine_8h_source.html#l00500">Domaine::coord_sommets()</a>, <a class="el" href="Zone__VF_8cpp_source.html#l00623">Zone_VF::creer_tableau_faces()</a>, <a class="el" href="Nom_8cpp_source.html#l00453">Nom::debute_par()</a>, <a class="el" href="Objet__U_8h_source.html#l00079">Objet_U::dimension</a>, <a class="el" href="Perte__Charge_8h_source.html#l00074">Perte_Charge::direction_perte_charge()</a>, <a class="el" href="Zone__VF_8h_source.html#l00574">Zone_VF::elem_faces()</a>, <a class="el" href="Double_8h_source.html#l00273">est_egal()</a>, <a class="el" href="Process_8cpp_source.html#l00223">Process::exit()</a>, <a class="el" href="classZone__VF.html#a547ab50904dc51bee39fed54a20934b2">Zone_VF::face_normales()</a>, <a class="el" href="Zone__VF_8h_source.html#l00609">Zone_VF::face_sommets()</a>, <a class="el" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00066">identifiant_</a>, <a class="el" href="Objet__U_8cpp_source.html#l00417">Objet_U::interprete()</a>, <a class="el" href="DoubleVect_8cpp_source.html#l00597">mp_somme_vect()</a>, <a class="el" href="Zone_8h_source.html#l00319">Zone::nb_elem_tot()</a>, <a class="el" href="Sous__Zone_8h_source.html#l00167">Sous_Zone::nb_elem_tot()</a>, <a class="el" href="Zone_8h_source.html#l00469">Zone::nb_faces_elem()</a>, <a class="el" href="Zone_8h_source.html#l00445">Zone::nb_som_elem()</a>, <a class="el" href="Domaine_8h_source.html#l00242">Domaine::nb_zones()</a>, <a class="el" href="Interprete_8cpp_source.html#l00048">Interprete::objet()</a>, <a class="el" href="Objet__U_8cpp_source.html#l00132">Objet_U::que_suis_je()</a>, <a class="el" href="Octree_8cpp_source.html#l01543">OctreeRoot::rang_elems_sommet()</a>, <a class="el" href="Cast_8h_source.html#l00059">ref_cast</a>, <a class="el" href="IntVect_8h_source.html#l00179">IntVect::resize()</a>, <a class="el" href="Op__Conv__Muscl__old__VEF__Face_8cpp_source.html#l00053">sgn</a>, <a class="el" href="ArrOfInt_8h_source.html#l00342">ArrOfInt::size_array()</a>, <a class="el" href="Zone_8h_source.html#l00344">Zone::sommet_elem()</a>, <a class="el" href="Domaine_8h_source.html#l00373">Domaine::ss_zone()</a>, <a class="el" href="Zone__VF_8h_source.html#l00650">Zone_VF::xv()</a>, <a class="el" href="Domaine_8h_source.html#l00272">Domaine::zone()</a>, and <a class="el" href="Zone__dis__base_8h_source.html#l00106">Zone_dis_base::zone()</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere__VEF__Face_8cpp_source.html#l00066">Perte_Charge_Singuliere_VEF_Face::remplir_num_faces()</a>, <a class="el" href="Perte__Charge__Singuliere__VDF__Face_8cpp_source.html#l00067">Perte_Charge_Singuliere_VDF_Face::remplir_num_faces()</a>, <a class="el" href="Perte__Charge__Singuliere__PolyMAC__Face_8cpp_source.html#l00067">Perte_Charge_Singuliere_PolyMAC_Face::remplir_num_faces()</a>, <a class="el" href="DP__Impose__PolyMAC__Face_8cpp_source.html#l00065">DP_Impose_PolyMAC_Face::remplir_num_faces()</a>, <a class="el" href="Perte__Charge__Singuliere__CoviMAC__Face_8cpp_source.html#l00070">Perte_Charge_Singuliere_CoviMAC_Face::remplir_num_faces()</a>, and <a class="el" href="DP__Impose__CoviMAC__Face_8cpp_source.html#l00065">DP_Impose_CoviMAC_Face::remplir_num_faces()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>,zone_dis);
  <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = zvf.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
  <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv = zvf.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
  <span class="keywordtype">int</span> nfe = zvf.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a548fbc7518be2f122b1a5c9589a443c2" title="Renvoie le nombre de face de type i des elements geometriques constituants la zone. Ex: les objets de la classe Prisme ont 2 types de faces: triangle ou quadrangle.">nb_faces_elem</a>();
  <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> face_tab; <span class="comment">//1 for faces in the surface</span>
  zvf.<a class="code" href="classZone__VF.html#a8e02e68f236356f72728b82536538ac5">creer_tableau_faces</a>(face_tab);
  <a class="code" href="classChamp__Don.html" title="classe Champ_Don Classe generique de la hierarchie des champs donnes, un objet Champ_Don peut referen...">Champ_Don</a> orientation;

  <span class="keywordtype">int</span> algo=-1;
  <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> method;

  <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu;
  <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> acc_ouverte(<span class="stringliteral">&quot;{&quot;</span>);
  <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> acc_fermee(<span class="stringliteral">&quot;}&quot;</span>);

  <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_ss_zone, nom_surface;
  <span class="keywordtype">double</span> position;

  <span class="comment">/* Read plan */</span>
  is &gt;&gt; motlu;
  <span class="keywordflow">if</span> (motlu != <span class="stringliteral">&quot;surface&quot;</span>)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait le mot cle surface a la place de &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  is &gt;&gt; motlu;
  <span class="keywordflow">if</span> (motlu != acc_ouverte)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait le mot cle&quot;</span> &lt;&lt; acc_ouverte &lt;&lt; <span class="stringliteral">&quot; a la place de &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  is &gt;&gt; method;
  <span class="keywordflow">if</span> (method==<span class="stringliteral">&quot;X&quot;</span> || method==<span class="stringliteral">&quot;Y&quot;</span> || method==<span class="stringliteral">&quot;Z&quot;</span>)
    {
      <span class="comment">/* Subzone algorithm */</span>
      algo=0;
      <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> direction=method, egal;
      <span class="keywordflow">if</span> (  ((direction==<span class="stringliteral">&quot;X&quot;</span>) &amp;&amp; (<a class="code" href="classPerte__Charge.html#ac3b3e387597c27257ef1ec8f3dce5779" title="Renvoie la direction de perte de charge. (X,Y ou Z), ou -1 si toutes les directions.">direction_perte_charge</a>()!=0))
            || ((direction==<span class="stringliteral">&quot;Y&quot;</span>) &amp;&amp; (<a class="code" href="classPerte__Charge.html#ac3b3e387597c27257ef1ec8f3dce5779" title="Renvoie la direction de perte de charge. (X,Y ou Z), ou -1 si toutes les directions.">direction_perte_charge</a>()!=1))
            || ((direction==<span class="stringliteral">&quot;Z&quot;</span>) &amp;&amp; (<a class="code" href="classPerte__Charge.html#ac3b3e387597c27257ef1ec8f3dce5779" title="Renvoie la direction de perte de charge. (X,Y ou Z), ou -1 si toutes les directions.">direction_perte_charge</a>()!=2)))
        {
          <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> dir,sect;
          <span class="keywordflow">if</span> (<a class="code" href="classPerte__Charge.html#ac3b3e387597c27257ef1ec8f3dce5779" title="Renvoie la direction de perte de charge. (X,Y ou Z), ou -1 si toutes les directions.">direction_perte_charge</a>() == 0)
            {
              dir=<span class="stringliteral">&quot;KX&quot;</span>;
              sect=<span class="stringliteral">&quot;X&quot;</span>;
            }
          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPerte__Charge.html#ac3b3e387597c27257ef1ec8f3dce5779" title="Renvoie la direction de perte de charge. (X,Y ou Z), ou -1 si toutes les directions.">direction_perte_charge</a>() == 1)
            {
              dir=<span class="stringliteral">&quot;KY&quot;</span>;
              sect=<span class="stringliteral">&quot;Y&quot;</span>;
            }
          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classPerte__Charge.html#ac3b3e387597c27257ef1ec8f3dce5779" title="Renvoie la direction de perte de charge. (X,Y ou Z), ou -1 si toutes les directions.">direction_perte_charge</a>() == 2)
            {
              dir=<span class="stringliteral">&quot;KZ&quot;</span>;
              sect=<span class="stringliteral">&quot;Z&quot;</span>;
            }
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The section specified &quot;</span> &lt;&lt; direction &lt;&lt; <span class="stringliteral">&quot; is not coherent with the coefficient pressure loss direction indicated by &quot;</span> &lt;&lt; dir &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Here the section to specify is &quot;</span> &lt;&lt; sect &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; finl;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();

        }
      is &gt;&gt; egal &gt;&gt; position;
      is &gt;&gt; nom_ss_zone;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; position &quot;</span> &lt;&lt; direction &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; position &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classPerte__Charge__Singuliere.html#a822dfa85ad27c35b884854e9c4e3f244">identifiant_</a> = nom_ss_zone + <span class="stringliteral">&quot;_&quot;</span> + direction + <span class="stringliteral">&quot;=&quot;</span> + <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(position);
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method==<span class="stringliteral">&quot;Surface&quot;</span>)
    {
      <span class="comment">/* Surface algorithm */</span>
      algo=1;
      <span class="comment">/*</span>
<span class="comment">            if (zvf.dimension!=3)</span>
<span class="comment">              {</span>
<span class="comment">                Cerr &lt;&lt; &quot;Error in Perte_Charge_Singuliere::lire_surfaces&quot; &lt;&lt; finl;</span>
<span class="comment">                Cerr &lt;&lt; &quot;The keyword &quot; &lt;&lt; method &lt;&lt; &quot; specified for plan definition is only possible in 3D !&quot; &lt;&lt; finl;</span>
<span class="comment">                Cerr &lt;&lt; &quot;You must used the method of intersection between subzone and location of plane.&quot; &lt;&lt; finl;</span>
<span class="comment">                Process::exit();</span>
<span class="comment">              }</span>
<span class="comment">      */</span>
      <span class="keywordflow">if</span> (zone_dis.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>().<a class="code" href="classNom.html#a41b0ba18fb90d481c0828ed4372de8ee">debute_par</a>(<span class="stringliteral">&quot;Zone_VDF&quot;</span>))
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Perte_Charge_Singuliere::lire_surfaces&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The keyword &quot;</span> &lt;&lt; method &lt;&lt; <span class="stringliteral">&quot; specified for plan definition is only possible in VEF discretization !&quot;</span> &lt;&lt; finl;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You must used the method of intersection between subzone and location of plane.&quot;</span> &lt;&lt; finl;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
      is &gt;&gt; nom_surface;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; surface &quot;</span> &lt;&lt; nom_surface &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classPerte__Charge__Singuliere.html#a822dfa85ad27c35b884854e9c4e3f244">identifiant_</a> = nom_surface;
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Perte_Charge_Singuliere::lire_surfaces&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The keyword &quot;</span> &lt;&lt; method &lt;&lt; <span class="stringliteral">&quot; specified for plan definition is not coherent !&quot;</span> &lt;&lt; finl;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  is &gt;&gt; motlu;
  <span class="keywordflow">if</span> (motlu == <span class="stringliteral">&quot;orientation&quot;</span>) is &gt;&gt; orientation, is &gt;&gt; motlu; <span class="comment">//on lit un champ pour orienter la surface</span>

  <span class="keywordflow">if</span> (motlu != acc_fermee)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait le mot cle&quot;</span> &lt;&lt; acc_fermee &lt;&lt; <span class="stringliteral">&quot; a la place de &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  is &gt;&gt; motlu;
  <span class="keywordflow">if</span> (motlu != acc_fermee)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;On attendait le mot cle&quot;</span> &lt;&lt; acc_fermee &lt;&lt; <span class="stringliteral">&quot; a la place de &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="comment">/* Found faces */</span>
  <span class="keywordtype">int</span> <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>=0;

  <span class="keywordflow">if</span> (algo==0)
    {
      <span class="comment">/* Subzone algorithm */</span>
      <span class="keyword">const</span> <a class="code" href="classSous__Zone.html" title="Classe Sous_Zone Represente une sous zone volumique i.e un sous ensemble de polyedres d&#39;un objet de t...">Sous_Zone</a>&amp; ssz = le_domaine.<a class="code" href="classDomaine.html#ad38f4fc3c0e1b44dc9fdc947985178a5" title="Renvoie la i-ieme sous-zone. (version const)">ss_zone</a>(nom_ss_zone);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> poly=0; poly&lt;ssz.<a class="code" href="classSous__Zone.html#a4266863124b1b4ce971ac57a6ec746e9" title="Returns the subzone number of elements (real+virtual elements in parallel)">nb_elem_tot</a>(); poly++)
        {
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nfe; j++)
            {
              <span class="keywordtype">int</span> numfa = elem_faces(ssz(poly),j);
<span class="comment">// numfa might be negative in case of polyhedron where number of faces for an elem varies (padding)</span>
              <span class="keywordflow">if</span> (numfa &gt;= 0 &amp;&amp; <a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(xv(numfa,<a class="code" href="classPerte__Charge.html#ac3b3e387597c27257ef1ec8f3dce5779" title="Renvoie la direction de perte de charge. (X,Y ou Z), ou -1 si toutes les directions.">direction_perte_charge</a>()),position) )
                {
                  <span class="keywordtype">bool</span> trouve=0;
                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>; i++)
                    <span class="keywordflow">if</span> (les_faces[i]==numfa)
                      {
                        trouve=1;
                        <span class="keywordflow">break</span>;
                      }
                  <span class="keywordflow">if</span> (trouve==0) les_faces[compteur++] = numfa, face_tab(numfa) = 1;
                }
            }
        }
    }

  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (algo==1)
    {
      <span class="comment">/* Surface algorithm */</span>
      <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; le_domaine2D = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>,le_domaine.<a class="code" href="classObjet__U.html#a9b5c13352a6601b5cec65941575f2e9a">interprete</a>().<a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(nom_surface));
      <span class="keywordflow">if</span> (le_domaine2D.<a class="code" href="classDomaine.html#a9f3fc389a1310d1fc8b4b27976855376" title="Renvoie le nombre de zone du domaine.">nb_zones</a>() == 0)
        {
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Perte_Charge_Singuliere::lire_surfaces&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
          <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;You must correct your data file because the &quot;</span> &lt;&lt; nom_surface &lt;&lt; <span class="stringliteral">&quot; surface is not well defined in parallel !&quot;</span> &lt;&lt; finl;
          <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
        }
      <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone_2D = le_domaine2D.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
      <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_sommets_2D=le_domaine2D.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();

      <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> xv2D;
      zone_2D.<a class="code" href="classZone.html#ad8104f9be27f9c357e345b281a79064e" title="Calcule les centres de gravites des elements de la zone.">calculer_centres_gravite</a>(xv2D);
      <span class="keyword">const</span> <span class="keywordtype">int</span> nb_elem_2D = zone_2D.<a class="code" href="classZone.html#aa3a33e8b723618b9092460007153e42d" title="Renvoie le nombre total d&#39;elements de la zone.">nb_elem_tot</a>();
      <span class="keywordtype">int</span> nse2D = zone_2D.<a class="code" href="classZone.html#ae0b34a93b9ae8146df2d1884157afe9f" title="Renvoie le nombre de sommets des elements geometriques constituants la zone. Tous les elements de la ...">nb_som_elem</a>();

      <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_sommets=le_domaine.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
      <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; face_sommets = zvf.<a class="code" href="classZone__VF.html#a298e73b18e17da55f421b1fb0879bd46" title="renvoie le numero du ieme sommet de la face num_face.">face_sommets</a>();
      <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone_vol = le_domaine.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
      <span class="keyword">const</span> <a class="code" href="classOctreeRoot.html" title="Classe OctreeRoot.">OctreeRoot</a>&amp; octree_vol = zone_vol.<a class="code" href="classZone.html#a492c53ea54616079fb65c18f7726ebc9">construit_octree</a>();

<span class="comment">// Loop on faces on the surface domain</span>
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; Surface &quot;</span> &lt;&lt; nom_surface &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; nb_elem_2D &lt;&lt; <span class="stringliteral">&quot; faces&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_face=0; ind_face&lt;nb_elem_2D; ind_face++)
        {
<span class="comment">// Fill elem_list_vol by elements surrounding the center of gravity</span>
          <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> elem_list_vol;
          <span class="keywordtype">double</span> zv2d=0;
          <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>&gt;2)
            zv2d=xv2D(ind_face,2);
          octree_vol.<a class="code" href="classOctreeRoot.html#aadb775575739c59baabc8bb13e48335c">rang_elems_sommet</a>(elem_list_vol,xv2D(ind_face,0),xv2D(ind_face,1),zv2d);
          <span class="keywordtype">int</span> nb_elem_vol = elem_list_vol.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<span class="comment">// Loop on elements on the volume domain</span>
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ind_elem=0; ind_elem&lt;nb_elem_vol; ind_elem++)
            {
              <span class="keywordtype">int</span> elem = elem_list_vol(ind_elem);
<span class="comment">// Loop on faces of each element on the volume domain</span>
              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0, numfa; j &lt; nfe &amp;&amp; (numfa = elem_faces(elem,j)) &gt;= 0; j++)
                {
<span class="comment">// Test if the same face between surface domain and volum domain</span>
                  <span class="keywordtype">int</span> coincide=0;
<span class="comment">// Loop on vertex of each face of each element on the volume domain</span>
                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k&lt;nse2D; k++)
                    {
                      <span class="keywordtype">int</span> numso = face_sommets(numfa,k);
                      <span class="keywordtype">double</span> xcoord_vol=coord_sommets(numso,0);
                      <span class="keywordtype">double</span> ycoord_vol=coord_sommets(numso,1);
<span class="comment">// double zcoord_vol=coord_sommets(numso,2);</span>
                      <span class="keywordtype">double</span>  zcoord_vol=0;
                      <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>&gt;2)
                        zcoord_vol=coord_sommets(numso,2);

                      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nse2D ; i++)
                        {
                          <span class="keywordtype">int</span> numso2D = zone_2D.<a class="code" href="classZone.html#aa164c00997bc77a365a6da57bbec29ce" title="Renvoie le numero (global) j-ieme sommet du i-ieme element.">sommet_elem</a>(ind_face,i);
                          <span class="keywordtype">double</span> xcoord_2D=coord_sommets_2D(numso2D,0);
                          <span class="keywordtype">double</span> ycoord_2D=coord_sommets_2D(numso2D,1);
                          <span class="keywordtype">double</span> zcoord_2D=0;
                          <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>&gt;2)
                            zcoord_2D=coord_sommets_2D(numso2D,2);
                          <span class="keywordflow">if</span> ( <a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(xcoord_vol,xcoord_2D)
                               &amp;&amp; <a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(ycoord_vol,ycoord_2D)
                               &amp;&amp; <a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(zcoord_vol,zcoord_2D))
                            {
                              coincide=coincide+1;
                              <span class="keywordflow">break</span>;
                            }
                        }
                    }
                  <span class="keywordflow">if</span> (coincide==nse2D)
                    {
                      <span class="keywordtype">bool</span> trouve=0;
                      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a> ; i++)
                        <span class="keywordflow">if</span> (les_faces[i]==numfa)
                          {
                            trouve=1;
                            <span class="keywordflow">break</span>;
                          }
                      <span class="keywordflow">if</span> (trouve==0) les_faces[compteur++] = numfa, face_tab(numfa) = 1;
                    }
                }
            }
        }
    }

  <span class="keywordtype">int</span> faces_found=<a class="code" href="DoubleVect_8cpp.html#a07dd5e25d47ad3892ae0fa4e997ed011">mp_somme_vect</a>(face_tab);
  <span class="keywordflow">if</span> (faces_found==0)
    {
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Perte_Charge_Singuliere::lire_surfaces&quot;</span> &lt;&lt; finl;
      <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;No faces has been found !&quot;</span> &lt;&lt; finl;
      <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
    }
  <span class="keywordflow">else</span>
    <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; faces_found &lt;&lt; <span class="stringliteral">&quot; faces have been found for the section.&quot;</span> &lt;&lt; finl;

  les_faces.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(compteur);
  <span class="keywordflow">if</span> (orientation.non_nul())
    {
      sgn.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(compteur);
      <a class="code" href="classDoubleTrav.html" title="Tableau de travail a n entrees pour n&lt;= 4 C&#39;est un DoubleTab avec allocation dans un pool de memoire g...">DoubleTrav</a> xvf(compteur, <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>), ori(compteur, <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>; i++) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">Objet_U::dimension</a>; j++) xvf(i, j) = xv(les_faces(i), j);
      orientation.valeur().valeur_aux(xvf, ori);
      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="Memoire_8cpp.html#ade857a99d48bcb8cfaa57c4cd8d7d2e8">compteur</a>; i++)
        {
          <span class="keywordtype">double</span> scal = 0;
          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; Objet_U::dimension; j++) scal += ori(i, j) * zvf.<a class="code" href="classZone__VF.html#a547ab50904dc51bee39fed54a20934b2">face_normales</a>(les_faces(i), j);
          <a class="code" href="Op__Conv__Muscl__old__VEF__Face_8cpp.html#ae1b5a554c1d4d97654c06032a92f800a">sgn</a>(i) = (scal &gt; 0 ? 1 : -1);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1bef4417d1f467e8377b54d57ecb01ac"></a><!-- doxytag: member="Perte_Charge_Singuliere::update_K" ref="a1bef4417d1f467e8377b54d57ecb01ac" args="(const Equation_base &amp;eqn, double deb, DoubleVect &amp;bilan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Perte_Charge_Singuliere::update_K </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classEquation__base.html">Equation_base</a> &amp;&#160;</td>
          <td class="paramname"><em>eqn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>deb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDoubleVect.html">DoubleVect</a> &amp;&#160;</td>
          <td class="paramname"><em>bilan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00404">404</a> of file <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html">Perte_Charge_Singuliere.cpp</a>.</p>

<p>References <a class="el" href="Double_8h_source.html#l00255">dabs()</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00068">deb_cible_</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00068">eps_</a>, <a class="el" href="Parser__U_8h_source.html#l00120">Parser_U::eval()</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00063">K_</a>, <a class="el" href="Double_8h_source.html#l00180">max()</a>, <a class="el" href="Process_8cpp_source.html#l00117">Process::me()</a>, <a class="el" href="Double_8h_source.html#l00199">min()</a>, <a class="el" href="Schema__Temps__base_8h_source.html#l00576">Schema_Temps_base::pas_de_temps()</a>, <a class="el" href="Equation__base_8cpp_source.html#l00964">Equation_base::probleme()</a>, <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00067">regul_</a>, <a class="el" href="Probleme__base_8cpp_source.html#l01342">Probleme_base::schema_temps()</a>, <a class="el" href="Parser__U_8h_source.html#l00128">Parser_U::setVar()</a>, and <a class="el" href="Schema__Temps__base_8h_source.html#l00676">Schema_Temps_base::temps_courant()</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere__VEF__Face_8cpp_source.html#l00157">Perte_Charge_Singuliere_VEF_Face::mettre_a_jour()</a>, <a class="el" href="Perte__Charge__Singuliere__VDF__Face_8cpp_source.html#l00192">Perte_Charge_Singuliere_VDF_Face::mettre_a_jour()</a>, <a class="el" href="Perte__Charge__Singuliere__PolyMAC__Face_8cpp_source.html#l00122">Perte_Charge_Singuliere_PolyMAC_Face::mettre_a_jour()</a>, and <a class="el" href="Perte__Charge__Singuliere__CoviMAC__Face_8cpp_source.html#l00113">Perte_Charge_Singuliere_CoviMAC_Face::mettre_a_jour()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (!<a class="code" href="classPerte__Charge__Singuliere.html#a036910a1edb3b5e13a16071cc7c4211e">regul_</a>) <span class="keywordflow">return</span>;
  <span class="keywordtype">double</span> t = eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>(), dt = eqn.<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a0cf6c541e30cd21c3da32fc122cb0e2b" title="Renvoie le schema en temps associe au probleme. (si il est non nul) (version const)">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a0e4f67ef6086c09434ddc161668077b2" title="Renvoie le pas de temps (delta_t) courant.">pas_de_temps</a>();
  <a class="code" href="classPerte__Charge__Singuliere.html#acb6602b31e6bdb514583b5f50e770d21">deb_cible_</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(0, t), <a class="code" href="classPerte__Charge__Singuliere.html#a28f54fe2cfaad225aa3216315ed40d25">eps_</a>.<a class="code" href="classParser__U.html#a13c377b32b6c3ced39a14f83f94a8828">setVar</a>(0, t);
  <span class="keywordtype">double</span> deb_cible = <a class="code" href="classPerte__Charge__Singuliere.html#acb6602b31e6bdb514583b5f50e770d21">deb_cible_</a>.<a class="code" href="classParser__U.html#a61605bc1b85e466f884f1739e811b6b4">eval</a>(), eps = <a class="code" href="classPerte__Charge__Singuliere.html#a28f54fe2cfaad225aa3216315ed40d25">eps_</a>.<a class="code" href="classParser__U.html#a61605bc1b85e466f884f1739e811b6b4">eval</a>(), f_min = std::pow(1 - eps, dt), f_max = std::pow(1 + eps, dt); <span class="comment">//bande de variation de K</span>
  <a class="code" href="classPerte__Charge__Singuliere.html#aed3c4c0e855ea65d7f5afd0fcdbeabc2">K_</a> *= <a class="code" href="Double_8h.html#a2f8edc4561e9744ed4233b205fa7ec32">min</a>(<a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(std::pow(<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(deb) / deb_cible, 2), f_min), f_max);

<span class="comment">// pour le fichier de suivi : seulement sur le maitre, car Source_base::imprimer() fait une somme sur les procs</span>
  <span class="keywordflow">if</span> (!<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>()) bilan(0) = <a class="code" href="classPerte__Charge__Singuliere.html#aed3c4c0e855ea65d7f5afd0fcdbeabc2">K_</a>, bilan(1) = deb, bilan(2) = deb_cible;
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="acb6602b31e6bdb514583b5f50e770d21"></a><!-- doxytag: member="Perte_Charge_Singuliere::deb_cible_" ref="acb6602b31e6bdb514583b5f50e770d21" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classParser__U.html">Parser_U</a> <a class="el" href="classPerte__Charge__Singuliere.html#acb6602b31e6bdb514583b5f50e770d21">Perte_Charge_Singuliere::deb_cible_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00068">68</a> of file <a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00059">lire_donnees()</a>, and <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00404">update_K()</a>.</p>

</div>
</div>
<a class="anchor" id="a28f54fe2cfaad225aa3216315ed40d25"></a><!-- doxytag: member="Perte_Charge_Singuliere::eps_" ref="a28f54fe2cfaad225aa3216315ed40d25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classParser__U.html">Parser_U</a> <a class="el" href="classPerte__Charge__Singuliere.html#a28f54fe2cfaad225aa3216315ed40d25">Perte_Charge_Singuliere::eps_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00068">68</a> of file <a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00059">lire_donnees()</a>, and <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00404">update_K()</a>.</p>

</div>
</div>
<a class="anchor" id="a822dfa85ad27c35b884854e9c4e3f244"></a><!-- doxytag: member="Perte_Charge_Singuliere::identifiant_" ref="a822dfa85ad27c35b884854e9c4e3f244" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNom.html">Nom</a> <a class="el" href="classPerte__Charge__Singuliere.html#a822dfa85ad27c35b884854e9c4e3f244">Perte_Charge_Singuliere::identifiant_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00066">66</a> of file <a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00127">lire_surfaces()</a>, <a class="el" href="Perte__Charge__Singuliere__VEF__Face_8cpp_source.html#l00044">Perte_Charge_Singuliere_VEF_Face::readOn()</a>, <a class="el" href="Perte__Charge__Singuliere__VDF__Face_8cpp_source.html#l00045">Perte_Charge_Singuliere_VDF_Face::readOn()</a>, <a class="el" href="Perte__Charge__Singuliere__PolyMAC__Face_8cpp_source.html#l00045">Perte_Charge_Singuliere_PolyMAC_Face::readOn()</a>, <a class="el" href="DP__Impose__PolyMAC__Face_8cpp_source.html#l00044">DP_Impose_PolyMAC_Face::readOn()</a>, <a class="el" href="Perte__Charge__Singuliere__CoviMAC__Face_8cpp_source.html#l00048">Perte_Charge_Singuliere_CoviMAC_Face::readOn()</a>, and <a class="el" href="DP__Impose__CoviMAC__Face_8cpp_source.html#l00044">DP_Impose_CoviMAC_Face::readOn()</a>.</p>

</div>
</div>
<a class="anchor" id="aed3c4c0e855ea65d7f5afd0fcdbeabc2"></a><!-- doxytag: member="Perte_Charge_Singuliere::K_" ref="aed3c4c0e855ea65d7f5afd0fcdbeabc2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classPerte__Charge__Singuliere.html#aed3c4c0e855ea65d7f5afd0fcdbeabc2">Perte_Charge_Singuliere::K_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00063">63</a> of file <a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00085">K()</a>, <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00059">lire_donnees()</a>, and <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00404">update_K()</a>.</p>

</div>
</div>
<a class="anchor" id="a036910a1edb3b5e13a16071cc7c4211e"></a><!-- doxytag: member="Perte_Charge_Singuliere::regul_" ref="a036910a1edb3b5e13a16071cc7c4211e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classPerte__Charge__Singuliere.html#a036910a1edb3b5e13a16071cc7c4211e">Perte_Charge_Singuliere::regul_</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Perte__Charge__Singuliere_8h_source.html#l00067">67</a> of file <a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a>.</p>

<p>Referenced by <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00059">lire_donnees()</a>, <a class="el" href="DP__Impose_8cpp_source.html#l00040">DP_Impose::lire_donnees()</a>, <a class="el" href="Perte__Charge__Singuliere__VEF__Face_8cpp_source.html#l00044">Perte_Charge_Singuliere_VEF_Face::readOn()</a>, <a class="el" href="Perte__Charge__Singuliere__VDF__Face_8cpp_source.html#l00045">Perte_Charge_Singuliere_VDF_Face::readOn()</a>, <a class="el" href="Perte__Charge__Singuliere__PolyMAC__Face_8cpp_source.html#l00045">Perte_Charge_Singuliere_PolyMAC_Face::readOn()</a>, <a class="el" href="Perte__Charge__Singuliere__CoviMAC__Face_8cpp_source.html#l00048">Perte_Charge_Singuliere_CoviMAC_Face::readOn()</a>, and <a class="el" href="Perte__Charge__Singuliere_8cpp_source.html#l00404">update_K()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/ThHyd/Incompressible/Sources/<a class="el" href="Perte__Charge__Singuliere_8h_source.html">Perte_Charge_Singuliere.h</a></li>
<li>src/ThHyd/Incompressible/Sources/<a class="el" href="Perte__Charge__Singuliere_8cpp_source.html">Perte_Charge_Singuliere.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:37:36 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
