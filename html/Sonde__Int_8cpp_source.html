<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Framework/Sonde_Int.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Framework/Sonde_Int.cpp</div>  </div>
</div>
<div class="contents">
<a href="Sonde__Int_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2015 - 2016, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Sonde_Int.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Framework</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/23</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Sonde__Int_8h.html">Sonde_Int.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Postraitement_8h.html">Postraitement.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="Sonde__Int_8cpp.html#ae668c1fc21de7f12f3890416513ab78f">00028</a> <a class="code" href="Declare__Inst_8h.html#a1a414570e3c7a7f9787a0eba4e9366e8">Implemente_instanciable_sans_constructeur_ni_destructeur</a>(<a class="code" href="classSonde__Int.html" title="classe Sonde_Int Cette classe permet d&#39;effectuer l&#39;evolution d&#39;un champ au cours du temps...">Sonde_Int</a>,<span class="stringliteral">&quot;Sonde_Int&quot;</span>,<a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>);
<a name="l00029"></a><a class="code" href="classSonde__Int.html#a4fc5d4d09cba3f23430c2a17cbebe9e2">00029</a> <a class="code" href="classSonde__Int.html#a4fc5d4d09cba3f23430c2a17cbebe9e2">Sonde_Int::Sonde_Int</a>():le_fichier(0) { }
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">// Precondition:</span>
<a name="l00033"></a>00033 <span class="comment">// Parametre: Sortie&amp; s</span>
<a name="l00034"></a>00034 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00035"></a>00035 <span class="comment">// Valeurs par defaut:</span>
<a name="l00036"></a>00036 <span class="comment">// Contraintes:</span>
<a name="l00037"></a>00037 <span class="comment">// Acces: entree/sortie</span>
<a name="l00038"></a>00038 <span class="comment">// Exception:</span>
<a name="l00039"></a>00039 <span class="comment">// Effets de bord:</span>
<a name="l00040"></a>00040 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00041"></a>00041 <span class="comment">//</span><span class="comment"></span>
<a name="l00042"></a>00042 <span class="comment">//! Imprime le type de l&#39;objet sur un flot de sortie.</span>
<a name="l00043"></a>00043 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00044"></a>00044 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00045"></a>00045 <span class="comment">Contraintes: */</span>
<a name="l00046"></a><a class="code" href="classSonde__Int.html#aeb69e998bed4dcee687d3d76fbec4fe7">00046</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classSonde__Int.html#aeb69e998bed4dcee687d3d76fbec4fe7" title="Imprime le type de l&#39;objet sur un flot de sortie.">Sonde_Int::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s )<span class="keyword"> const</span>
<a name="l00047"></a>00047 <span class="keyword"></span>{
<a name="l00048"></a>00048   <span class="keywordflow">return</span> s &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="comment">// Precondition: le postraitement doit avoir ete associe</span>
<a name="l00053"></a>00053 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00054"></a>00054 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00055"></a>00055 <span class="comment">// Valeurs par defaut:</span>
<a name="l00056"></a>00056 <span class="comment">// Contraintes:</span>
<a name="l00057"></a>00057 <span class="comment">// Acces: entree/sortie</span>
<a name="l00058"></a>00058 <span class="comment">// Exception: donnees de la sonde non definies</span>
<a name="l00059"></a>00059 <span class="comment">// Exception: erreur de format, mot clef inconnus</span>
<a name="l00060"></a>00060 <span class="comment">// Exception: donnees de la sonde pas definies correctement</span>
<a name="l00061"></a>00061 <span class="comment">// Effets de bord:</span>
<a name="l00062"></a>00062 <span class="comment">// Postcondition:</span>
<a name="l00063"></a>00063 <span class="comment">//</span>
<a name="l00064"></a>00064 <span class="comment">//</span>
<a name="l00065"></a>00065 <span class="comment">//</span>
<a name="l00066"></a>00066 <span class="comment">//</span>
<a name="l00067"></a>00067 <span class="comment">//</span>
<a name="l00068"></a>00068 <span class="comment">//</span>
<a name="l00069"></a>00069 <span class="comment">//</span>
<a name="l00070"></a>00070 <span class="comment">//</span><span class="comment"></span>
<a name="l00071"></a>00071 <span class="comment">//! Lit les specifications d&#39;une sonde a partir d&#39;un flot d&#39;entree.&lt;br&gt;Format:&lt;br&gt;Sonde_Ints&lt;br&gt;{&lt;br&gt;[nom_sonde nom_champ Periode dts Points n x1 y1 [z1] ... xn yn [zn]&lt;br&gt;[nom_sonde nom_champ Periode dts Segment ns x1 y1 [z1] x2 y2 [z2]&lt;br&gt;...&lt;br&gt;}</span>
<a name="l00072"></a>00072 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00073"></a>00073 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00074"></a>00074 <span class="comment">Contraintes: */</span>
<a name="l00075"></a><a class="code" href="classSonde__Int.html#a20dc4ddc6ef12f37000c3de37dde75f7">00075</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classSonde__Int.html#a20dc4ddc6ef12f37000c3de37dde75f7" title="Lit les specifications d&#39;une sonde a partir d&#39;un flot d&#39;entree. Format: Sonde_Ints { [nom_sonde nom_c...">Sonde_Int::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is )
<a name="l00076"></a>00076 {
<a name="l00077"></a>00077   assert(<a class="code" href="classSonde__Int.html#a55ecb56c55f5a33d438650b866d01875">mon_post</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>());
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb = <a class="code" href="classSonde__Int.html#a55ecb56c55f5a33d438650b866d01875">mon_post</a>-&gt;probleme();
<a name="l00080"></a>00080   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu;
<a name="l00081"></a>00081   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> accolade_ouverte(<span class="stringliteral">&quot;{&quot;</span>);
<a name="l00082"></a>00082   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> accolade_fermee(<span class="stringliteral">&quot;}&quot;</span>);
<a name="l00083"></a>00083   <span class="keywordtype">int</span> nbre_points;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">// initialisation de periode par defaut</span>
<a name="l00086"></a>00086 
<a name="l00087"></a>00087   <a class="code" href="classSonde__Int.html#ad63e107bb33144f8e79e938d99f20dfa" title="periode d&#39;echantillonnage">periode</a> = 1.e10;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="comment">// Recherche du tableau sonde</span>
<a name="l00090"></a>00090 <span class="comment">// Remplissage de la reference au tableau</span>
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   is &gt;&gt; motlu;
<a name="l00093"></a>00093   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> liste_noms;
<a name="l00094"></a>00094   pb.get_noms_champs_postraitables(liste_noms);
<a name="l00095"></a>00095 <span class="comment">//</span>
<a name="l00096"></a>00096 <span class="comment">// if (liste_noms.contient(motlu))</span>
<a name="l00097"></a>00097   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;liste_noms.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); i++)
<a name="l00098"></a>00098     {
<a name="l00099"></a>00099       <span class="keywordflow">if</span> (liste_noms[i]==motlu)
<a name="l00100"></a>00100         {
<a name="l00101"></a>00101           <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classIntVect.html">IntVect</a>) ref_tab;
<a name="l00102"></a>00102 <span class="comment">//</span>
<a name="l00103"></a>00103           <span class="keywordflow">if</span> (pb.a_pour_IntVect(motlu,ref_tab))
<a name="l00104"></a>00104             <a class="code" href="classSonde__Int.html#a5e1f47920749d84f907d83a34218dbfc" title="Le tableau sonde.">mon_tableau</a> = ref_tab;
<a name="l00105"></a>00105           <span class="keywordflow">else</span>
<a name="l00106"></a>00106             {
<a name="l00107"></a>00107               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The problem does not have the array &quot;</span> &lt;&lt; motlu &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00108"></a>00108               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00109"></a>00109             }
<a name="l00110"></a>00110         }
<a name="l00111"></a>00111     }
<a name="l00112"></a>00112   <span class="comment">/*</span>
<a name="l00113"></a>00113 <span class="comment">      else</span>
<a name="l00114"></a>00114 <span class="comment">      if (!ref_tab.non_nul())</span>
<a name="l00115"></a>00115 <span class="comment">      {</span>
<a name="l00116"></a>00116 <span class="comment">      Cerr &lt;&lt; &quot;The array name &quot; &lt;&lt; motlu &lt;&lt; &quot; is not understood by the problem&quot; &lt;&lt; finl;</span>
<a name="l00117"></a>00117 <span class="comment">      exit();</span>
<a name="l00118"></a>00118 <span class="comment">      }</span>
<a name="l00119"></a>00119 <span class="comment">  */</span>
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">// Lecture des caracteristiques de la sonde</span>
<a name="l00122"></a>00122 
<a name="l00123"></a>00123   <a class="code" href="classIntVect.html">IntVect</a> fait(2);
<a name="l00124"></a>00124 
<a name="l00125"></a>00125   <a class="code" href="classMotcles.html" title="Un tableau d&#39;objets de la classe Motcle.">Motcles</a> les_motcles(6);
<a name="l00126"></a>00126   {
<a name="l00127"></a>00127     les_motcles[0] = <span class="stringliteral">&quot;periode&quot;</span>;
<a name="l00128"></a>00128     les_motcles[1] = <span class="stringliteral">&quot;point&quot;</span>;
<a name="l00129"></a>00129     les_motcles[2] = <span class="stringliteral">&quot;points&quot;</span>;
<a name="l00130"></a>00130     les_motcles[3] = <span class="stringliteral">&quot;segment&quot;</span>;
<a name="l00131"></a>00131     les_motcles[4] = <span class="stringliteral">&quot;plan&quot;</span>;
<a name="l00132"></a>00132     les_motcles[5] = <span class="stringliteral">&quot;volume&quot;</span>;
<a name="l00133"></a>00133   }
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   <span class="keywordflow">while</span> ((fait(0) != 1) || (fait(1) != 1))
<a name="l00136"></a>00136     {
<a name="l00137"></a>00137       is &gt;&gt; motlu;
<a name="l00138"></a>00138       <span class="keywordflow">if</span> (motlu == accolade_fermee)
<a name="l00139"></a>00139         {
<a name="l00140"></a>00140           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading the probe &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00141"></a>00141           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The data of the probe were not defined&quot;</span> &lt;&lt; finl;
<a name="l00142"></a>00142           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00143"></a>00143         }
<a name="l00144"></a>00144       <span class="keywordtype">int</span> rang=les_motcles.<a class="code" href="classMotcles.html#afecd68f73e904bc129022a236ff6ab15">search</a>(motlu);
<a name="l00145"></a>00145       <span class="keywordflow">if</span> (rang == -1)
<a name="l00146"></a>00146         {
<a name="l00147"></a>00147           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading the probe &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00148"></a>00148           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot; is not understood; the keywords understood are : &quot;</span> &lt;&lt; finl;
<a name="l00149"></a>00149           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; les_motcles;
<a name="l00150"></a>00150           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00151"></a>00151         }
<a name="l00152"></a>00152 
<a name="l00153"></a>00153       <span class="keywordflow">switch</span>(rang)
<a name="l00154"></a>00154         {
<a name="l00155"></a>00155         <span class="keywordflow">case</span> 0:
<a name="l00156"></a>00156           {
<a name="l00157"></a>00157             is &gt;&gt; <a class="code" href="classSonde__Int.html#ad63e107bb33144f8e79e938d99f20dfa" title="periode d&#39;echantillonnage">periode</a>;
<a name="l00158"></a>00158             <span class="keywordflow">break</span>;
<a name="l00159"></a>00159           }
<a name="l00160"></a>00160         <span class="keywordflow">case</span> 1:
<a name="l00161"></a>00161         <span class="keywordflow">case</span> 2:
<a name="l00162"></a>00162           {
<a name="l00163"></a>00163             rang = 1;
<a name="l00164"></a>00164             <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a> = 0;
<a name="l00165"></a>00165             is &gt;&gt; nbre_points;
<a name="l00166"></a>00166             <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbre_points,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbre_points; i++)
<a name="l00169"></a>00169               <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; j++)
<a name="l00170"></a>00170                 is &gt;&gt; <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>(i,j);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172             <span class="keywordflow">break</span>;
<a name="l00173"></a>00173           }
<a name="l00174"></a>00174         <span class="keywordflow">case</span> 3:
<a name="l00175"></a>00175           {
<a name="l00176"></a>00176             rang = 1;
<a name="l00177"></a>00177             <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a> = 1;
<a name="l00178"></a>00178             <a class="code" href="classDoubleVect.html">DoubleVect</a> origine(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00179"></a>00179             <a class="code" href="classDoubleVect.html">DoubleVect</a> extremite(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00180"></a>00180             <a class="code" href="classDoubleVect.html">DoubleVect</a> dx(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00181"></a>00181             <span class="keywordtype">int</span> i=0,j=0;
<a name="l00182"></a>00182             is &gt;&gt; nbre_points;
<a name="l00183"></a>00183             <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbre_points,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00184"></a>00184 
<a name="l00185"></a>00185             <span class="keywordflow">for</span> (; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00186"></a>00186               is &gt;&gt; origine(i);
<a name="l00187"></a>00187             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00188"></a>00188               is &gt;&gt; extremite(i);
<a name="l00189"></a>00189             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00190"></a>00190               dx(i)=(extremite(i)-origine(i))/(nbre_points-1);
<a name="l00191"></a>00191             <span class="keywordflow">for</span> (i=0; i&lt;nbre_points; i++)
<a name="l00192"></a>00192               <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; j++)
<a name="l00193"></a>00193                 <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>(i,j)=origine(j)+i*dx(j);
<a name="l00194"></a>00194             <span class="keywordflow">break</span>;
<a name="l00195"></a>00195           }
<a name="l00196"></a>00196         <span class="keywordflow">case</span> 4:
<a name="l00197"></a>00197           {
<a name="l00198"></a>00198             rang = 1;
<a name="l00199"></a>00199             <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a> = 2;
<a name="l00200"></a>00200             <a class="code" href="classDoubleVect.html">DoubleVect</a> origine(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00201"></a>00201             <a class="code" href="classDoubleVect.html">DoubleVect</a> extremite1(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00202"></a>00202             <a class="code" href="classDoubleVect.html">DoubleVect</a> extremite2(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00203"></a>00203             <a class="code" href="classDoubleVect.html">DoubleVect</a> dx1(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00204"></a>00204             <a class="code" href="classDoubleVect.html">DoubleVect</a> dx2(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00205"></a>00205             <span class="keywordtype">int</span> i=0,j=0,k=0;
<a name="l00206"></a>00206             is &gt;&gt; <a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>;
<a name="l00207"></a>00207             is &gt;&gt; <a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>;
<a name="l00208"></a>00208             nbre_points=nbre_points1*<a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>;
<a name="l00209"></a>00209             <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbre_points,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211             <span class="keywordflow">for</span> (; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00212"></a>00212               is &gt;&gt; origine(i);
<a name="l00213"></a>00213             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00214"></a>00214               is &gt;&gt; extremite1(i);
<a name="l00215"></a>00215             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00216"></a>00216               is &gt;&gt; extremite2(i);
<a name="l00217"></a>00217             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00218"></a>00218               dx1(i)=(extremite1(i)-origine(i))/(nbre_points1-1);
<a name="l00219"></a>00219             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00220"></a>00220               dx2(i)=(extremite2(i)-origine(i))/(nbre_points2-1);
<a name="l00221"></a>00221             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>; i++)
<a name="l00222"></a>00222               <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>; j++)
<a name="l00223"></a>00223                 <span class="keywordflow">for</span> (k=0; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; k++)
<a name="l00224"></a>00224                   <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>(i*nbre_points2+j,k)=origine(k)+i*dx1(k)+j*dx2(k);
<a name="l00225"></a>00225             <span class="keywordflow">break</span>;
<a name="l00226"></a>00226           }
<a name="l00227"></a>00227         <span class="keywordflow">case</span> 5:
<a name="l00228"></a>00228           {
<a name="l00229"></a>00229             rang = 1;
<a name="l00230"></a>00230             <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a> = 3;
<a name="l00231"></a>00231             <a class="code" href="classDoubleVect.html">DoubleVect</a> origine(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00232"></a>00232             <a class="code" href="classDoubleVect.html">DoubleVect</a> extremite1(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00233"></a>00233             <a class="code" href="classDoubleVect.html">DoubleVect</a> extremite2(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00234"></a>00234             <a class="code" href="classDoubleVect.html">DoubleVect</a> extremite3(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00235"></a>00235             <a class="code" href="classDoubleVect.html">DoubleVect</a> dx1(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00236"></a>00236             <a class="code" href="classDoubleVect.html">DoubleVect</a> dx2(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00237"></a>00237             <a class="code" href="classDoubleVect.html">DoubleVect</a> dx3(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00238"></a>00238             <span class="keywordtype">int</span> i=0,j=0,k=0;
<a name="l00239"></a>00239             is &gt;&gt; <a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>;
<a name="l00240"></a>00240             is &gt;&gt; <a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>;
<a name="l00241"></a>00241             is &gt;&gt; <a class="code" href="classSonde__Int.html#a934f5cae644b17f5ffb3d73d5e3649a4" title="faire des sonde_segment,sonde_plan,etc...">nbre_points3</a>;
<a name="l00242"></a>00242             nbre_points=nbre_points1*nbre_points2*<a class="code" href="classSonde__Int.html#a934f5cae644b17f5ffb3d73d5e3649a4" title="faire des sonde_segment,sonde_plan,etc...">nbre_points3</a>;
<a name="l00243"></a>00243             <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ae83b4d31205c53d9c8d2b43da178ce75" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbre_points,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00244"></a>00244 
<a name="l00245"></a>00245             <span class="keywordflow">for</span> (; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00246"></a>00246               is &gt;&gt; origine(i);
<a name="l00247"></a>00247             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00248"></a>00248               is &gt;&gt; extremite1(i);
<a name="l00249"></a>00249             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00250"></a>00250               is &gt;&gt; extremite2(i);
<a name="l00251"></a>00251             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00252"></a>00252               is &gt;&gt; extremite3(i);
<a name="l00253"></a>00253             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00254"></a>00254               dx1(i)=(extremite1(i)-origine(i))/(nbre_points1-1);
<a name="l00255"></a>00255             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00256"></a>00256               dx2(i)=(extremite2(i)-origine(i))/(nbre_points2-1);
<a name="l00257"></a>00257             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; i++)
<a name="l00258"></a>00258               dx3(i)=(extremite3(i)-origine(i))/(nbre_points3-1);
<a name="l00259"></a>00259             <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>; i++)
<a name="l00260"></a>00260               <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>; j++)
<a name="l00261"></a>00261                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m=0; m&lt;<a class="code" href="classSonde__Int.html#a934f5cae644b17f5ffb3d73d5e3649a4" title="faire des sonde_segment,sonde_plan,etc...">nbre_points3</a>; m++)
<a name="l00262"></a>00262                   <span class="keywordflow">for</span> (k=0; k&lt;<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>; k++)
<a name="l00263"></a>00263                     <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>(i*nbre_points2*nbre_points1+j*nbre_points1+m,k)=origine(k)+i*dx1(k)+j*dx2(k)+m*dx3(k);
<a name="l00264"></a>00264             <span class="keywordflow">break</span>;
<a name="l00265"></a>00265           }
<a name="l00266"></a>00266         <span class="keywordflow">default</span>:
<a name="l00267"></a>00267           {
<a name="l00268"></a>00268             <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; motlu &lt;&lt;<span class="stringliteral">&quot;is not yet understood!&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00269"></a>00269             <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00270"></a>00270           }
<a name="l00271"></a>00271         }
<a name="l00272"></a>00272       fait(rang) = 1;
<a name="l00273"></a>00273     }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275   <span class="keywordflow">if</span> ( (fait[0] == 0) || (fait[1] == 0) )
<a name="l00276"></a>00276     {
<a name="l00277"></a>00277       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error while reading the probe &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00278"></a>00278       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The data of the probe have not been properly defined&quot;</span> &lt;&lt; finl;
<a name="l00279"></a>00279       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282   <span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; la_zone =pb.<a class="code" href="classZone.html#a379ad2206b5a13a4f4f3df6d44c7546a" title="Renvoie le domaine dont la zone fait partie. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00283"></a>00283   <a class="code" href="classSonde__Int.html#a4ec7f69eb5880599f3a2e1404a5ecf75" title="Initialise la sonde. Dimensionne les tableaux, de valeurs, verifie si les points specifies sont bien ...">initialiser</a>(la_zone);
<a name="l00284"></a>00284   <span class="keywordflow">return</span> is;
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 <span class="comment">// Precondition:</span>
<a name="l00289"></a>00289 <span class="comment">// Parametre: Postraitement&amp; le_post</span>
<a name="l00290"></a>00290 <span class="comment">// Signification: le postraitement a associer</span>
<a name="l00291"></a>00291 <span class="comment">// Valeurs par defaut:</span>
<a name="l00292"></a>00292 <span class="comment">// Contraintes: reference constante</span>
<a name="l00293"></a>00293 <span class="comment">// Acces: entree</span>
<a name="l00294"></a>00294 <span class="comment">// </span>
<a name="l00295"></a>00295 <span class="comment">// Signification:</span>
<a name="l00296"></a>00296 <span class="comment">// Contraintes:</span>
<a name="l00297"></a>00297 <span class="comment">// Exception:</span>
<a name="l00298"></a>00298 <span class="comment">// Effets de bord:</span>
<a name="l00299"></a>00299 <span class="comment">// Postcondition: la sonde a un postraitement associe</span>
<a name="l00300"></a>00300 <span class="comment">//</span><span class="comment"></span>
<a name="l00301"></a>00301 <span class="comment">//! Associer le postraitement a la sonde.</span>
<a name="l00302"></a><a class="code" href="classSonde__Int.html#a437f00fde8ea9776723e0fa2d10618fe">00302</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSonde__Int.html#a437f00fde8ea9776723e0fa2d10618fe" title="Associer le postraitement a la sonde.">Sonde_Int::associer_post</a>(<span class="keyword">const</span> <a class="code" href="classPostraitement.html" title="classe Postraitement La classe est dotee -d une liste de champs generiques champs_post_complet_ qui c...">Postraitement</a>&amp; le_post)
<a name="l00303"></a>00303 {
<a name="l00304"></a>00304   <a class="code" href="classSonde__Int.html#a55ecb56c55f5a33d438650b866d01875">mon_post</a>=le_post;
<a name="l00305"></a>00305   <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#a55ecb56c55f5a33d438650b866d01875">mon_post</a>-&gt;noms_fichiers_sondes().contient(<a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>)==0)
<a name="l00306"></a>00306     <a class="code" href="classSonde__Int.html#a55ecb56c55f5a33d438650b866d01875">mon_post</a>-&gt;noms_fichiers_sondes().add(<a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>);
<a name="l00307"></a>00307   <span class="keywordflow">else</span>
<a name="l00308"></a>00308     {
<a name="l00309"></a>00309       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The filename &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt; <span class="stringliteral">&quot; is used several times for probes.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00310"></a>00310       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;A probe must have a unique filename to avoid writing conflicts.&quot;</span> &lt;&lt; finl;
<a name="l00311"></a>00311       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="comment">// Precondition:</span>
<a name="l00318"></a>00318 <span class="comment">// Parametre: Zone&amp; zone_geom</span>
<a name="l00319"></a>00319 <span class="comment">// Signification: la zone de calcul qui sera sondee</span>
<a name="l00320"></a>00320 <span class="comment">// Valeurs par defaut:</span>
<a name="l00321"></a>00321 <span class="comment">// Contraintes: reference constante</span>
<a name="l00322"></a>00322 <span class="comment">// Acces: entree</span>
<a name="l00323"></a>00323 <span class="comment">// </span>
<a name="l00324"></a>00324 <span class="comment">// Signification:</span>
<a name="l00325"></a>00325 <span class="comment">// Contraintes:</span>
<a name="l00326"></a>00326 <span class="comment">// Exception: point de sondage en dehors de la zone de calcul</span>
<a name="l00327"></a>00327 <span class="comment">// Effets de bord:</span>
<a name="l00328"></a>00328 <span class="comment">// Postcondition: la sonde est initialisee</span>
<a name="l00329"></a>00329 <span class="comment">//</span>
<a name="l00330"></a>00330 <span class="comment">//</span>
<a name="l00331"></a>00331 <span class="comment">//</span><span class="comment"></span>
<a name="l00332"></a>00332 <span class="comment">//! Initialise la sonde. Dimensionne les tableaux,&lt;br&gt;de valeurs, verifie si les points specifies sont&lt;br&gt;bien dans la zone de calcul.</span>
<a name="l00333"></a><a class="code" href="classSonde__Int.html#a4ec7f69eb5880599f3a2e1404a5ecf75">00333</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSonde__Int.html#a4ec7f69eb5880599f3a2e1404a5ecf75" title="Initialise la sonde. Dimensionne les tableaux, de valeurs, verifie si les points specifies sont bien ...">Sonde_Int::initialiser</a>(<span class="keyword">const</span> <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone_geom)
<a name="l00334"></a>00334 {
<a name="l00335"></a>00335   <a class="code" href="classSonde__Int.html#acbbe80edbde8dfb589aba5039c206b71">nb_bip</a> = 0.;
<a name="l00336"></a>00336   <span class="keywordtype">int</span> nbre_points = <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00337"></a>00337   <a class="code" href="classSonde__Int.html#add305f62ffdb3389b5f64a5812e2608b" title="les elements contenant les sondes ponctuelles">elem_</a>.<a class="code" href="classIntVect.html#a5900779fd9a3f9a82c68007a42b87d98" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbre_points);
<a name="l00338"></a>00338   zone_geom.<a class="code" href="classZone.html#aec585e7983082c3df305d75fd13a6b9e">chercher_elements</a>(<a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>,<a class="code" href="classSonde__Int.html#add305f62ffdb3389b5f64a5812e2608b" title="les elements contenant les sondes ponctuelles">elem_</a>);
<a name="l00339"></a>00339   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbre_points; i++)
<a name="l00340"></a>00340     <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a1e9d9f9899b71927cfafae14c7bd048d" title="Calcule le max de x sur tous les processeurs du groupe courant. Remarques : Cette methode doit etre a...">mp_max</a>(<a class="code" href="classSonde__Int.html#add305f62ffdb3389b5f64a5812e2608b" title="les elements contenant les sondes ponctuelles">elem_</a>[i])==-1 &amp;&amp; <a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00341"></a>00341       {
<a name="l00342"></a>00342         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The point number &quot;</span> &lt;&lt; i+1 &lt;&lt; <span class="stringliteral">&quot; of probe &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00343"></a>00343         <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;is outside of the computational domain&quot;</span> &lt;&lt; finl;
<a name="l00344"></a>00344       }
<a name="l00345"></a>00345   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>,<a class="code" href="classSonde__Int.html#a5e1f47920749d84f907d83a34218dbfc" title="Le tableau sonde.">mon_tableau</a>.<a class="code" href="classRef__IntVect.html#a1c7959efd862b8dd91818c78820c31b2">valeur</a>()))
<a name="l00346"></a>00346     {
<a name="l00347"></a>00347       <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; tab_val = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>,<a class="code" href="classSonde__Int.html#a5e1f47920749d84f907d83a34218dbfc" title="Le tableau sonde.">mon_tableau</a>.<a class="code" href="classRef__IntVect.html#a1c7959efd862b8dd91818c78820c31b2">valeur</a>());
<a name="l00348"></a>00348       <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbre_points,tab_val.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1));
<a name="l00349"></a>00349     }
<a name="l00350"></a>00350   <span class="keywordflow">else</span>
<a name="l00351"></a>00351     <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nbre_points);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="comment">// Precondition:</span>
<a name="l00357"></a>00357 <span class="comment">// Parametre:</span>
<a name="l00358"></a>00358 <span class="comment">// Signification:</span>
<a name="l00359"></a>00359 <span class="comment">// Valeurs par defaut:</span>
<a name="l00360"></a>00360 <span class="comment">// Contraintes:</span>
<a name="l00361"></a>00361 <span class="comment">// Acces:</span>
<a name="l00362"></a>00362 <span class="comment">// </span>
<a name="l00363"></a>00363 <span class="comment">// Signification:</span>
<a name="l00364"></a>00364 <span class="comment">// Contraintes:</span>
<a name="l00365"></a>00365 <span class="comment">// Exception:</span>
<a name="l00366"></a>00366 <span class="comment">// Effets de bord:</span>
<a name="l00367"></a>00367 <span class="comment">// Postcondition: le fichier associe est ouvert</span>
<a name="l00368"></a>00368 <span class="comment">//</span><span class="comment"></span>
<a name="l00369"></a>00369 <span class="comment">//! Ouvre le fichier associe a la sonde. (*.son)</span>
<a name="l00370"></a><a class="code" href="classSonde__Int.html#a335ab805ae386ec71bc32de75d5f1f25">00370</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSonde__Int.html#a335ab805ae386ec71bc32de75d5f1f25" title="Ouvre le fichier associe a la sonde. (*.son)">Sonde_Int::ouvrir_fichier</a>()
<a name="l00371"></a>00371 {
<a name="l00372"></a>00372   <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00373"></a>00373     {
<a name="l00374"></a>00374       <span class="keywordflow">if</span>( <a class="code" href="classSonde__Int.html#a29f0ca85a3524bb6e971911b0ee5c9e9">le_fichier</a>)
<a name="l00375"></a>00375         <span class="keyword">delete</span> <a class="code" href="classSonde__Int.html#a29f0ca85a3524bb6e971911b0ee5c9e9">le_fichier</a>;
<a name="l00376"></a>00376       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fich(<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">nom_du_cas</a>());
<a name="l00377"></a>00377       nom_fich += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00378"></a>00378       nom_fich += <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>;
<a name="l00379"></a>00379       nom_fich += <span class="stringliteral">&quot;.son&quot;</span>;
<a name="l00380"></a>00380       <a class="code" href="classSonde__Int.html#a29f0ca85a3524bb6e971911b0ee5c9e9">le_fichier</a>=<span class="keyword">new</span> <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a>(nom_fich);
<a name="l00381"></a>00381       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a>&amp; s = *<a class="code" href="classSonde__Int.html#a29f0ca85a3524bb6e971911b0ee5c9e9">le_fichier</a>;
<a name="l00382"></a>00382       s.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l00383"></a>00383       s.<a class="code" href="classSortie__Fichier__base.html#a489ca01946f4e2a7a9aa8f3a3d949b08">precision</a>(8);
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 <span class="comment">// Ecriture de l&#39;en tete des fichiers sondes :</span>
<a name="l00386"></a>00386       <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==0 || <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==1)
<a name="l00387"></a>00387         {
<a name="l00388"></a>00388           <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; p=<a class="code" href="classSonde__Int.html#ab15a3a4c5f8bd72c66b9eb3d30ba2db8" title="Renvoie le tableau des positions du champ qui sont sondees.">les_positions</a>();
<a name="l00389"></a>00389           <span class="keywordtype">int</span> nbre_points = <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00390"></a>00390           s &lt;&lt; <span class="stringliteral">&quot;# &quot;</span> &lt;&lt; nom_fich &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00391"></a>00391           s &lt;&lt; <span class="stringliteral">&quot;# Temps&quot;</span>;
<a name="l00392"></a>00392           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nbre_points; i++)
<a name="l00393"></a>00393             {
<a name="l00394"></a>00394               s &lt;&lt; <span class="stringliteral">&quot; x=&quot;</span> &lt;&lt; p(i,0) &lt;&lt; <span class="stringliteral">&quot; y=&quot;</span> &lt;&lt; p(i,1) ;
<a name="l00395"></a>00395               <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3) <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot; z=&quot;</span> &lt;&lt; p(i,2) ;
<a name="l00396"></a>00396             }
<a name="l00397"></a>00397           s &lt;&lt; finl;
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399       <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==2)
<a name="l00400"></a>00400         {
<a name="l00401"></a>00401           s &lt;&lt; <span class="stringliteral">&quot;TRUST   Version1  01/09/96&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00402"></a>00402           s &lt;&lt; <a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">nom_du_cas</a>() &lt;&lt; finl;
<a name="l00403"></a>00403           s &lt;&lt; <span class="stringliteral">&quot;TRUST&quot;</span> &lt;&lt; finl;
<a name="l00404"></a>00404           s &lt;&lt; <span class="stringliteral">&quot;GRILLE&quot;</span> &lt;&lt; finl;
<a name="l00405"></a>00405           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_grille(<span class="stringliteral">&quot;Grille&quot;</span>);
<a name="l00406"></a>00406           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_topologie(<span class="stringliteral">&quot;Topologie&quot;</span>);
<a name="l00407"></a>00407           nom_grille += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00408"></a>00408           nom_grille += <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>;
<a name="l00409"></a>00409           nom_topologie += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00410"></a>00410           nom_topologie += <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>;
<a name="l00411"></a>00411           <span class="keywordtype">int</span> k,kn;
<a name="l00412"></a>00412           <span class="keywordtype">int</span> nbre_points = <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00413"></a>00413           <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; p=<a class="code" href="classSonde__Int.html#ab15a3a4c5f8bd72c66b9eb3d30ba2db8" title="Renvoie le tableau des positions du champ qui sont sondees.">les_positions</a>();
<a name="l00414"></a>00414           <span class="keywordtype">double</span> xn,yn,zn,<a class="code" href="Double_8h.html#ac842198e9490fae75825cab2a03eed2d">norme</a>;
<a name="l00415"></a>00415           <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l00416"></a>00416             {
<a name="l00417"></a>00417               xn=(p(1,2)-p(0,2))*(p(<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>,1)
<a name="l00418"></a>00418                                   -p(0,1))-(p(1,1)-p(0,1))*(p(<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>,2)-p(0,2));
<a name="l00419"></a>00419               yn=(p(1,0)-p(0,0))*(p(<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>,2)-p(0,2))
<a name="l00420"></a>00420                  -(p(1,2)-p(0,2))*(p(<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>,0)-p(0,0));
<a name="l00421"></a>00421             }
<a name="l00422"></a>00422           <span class="keywordflow">else</span><span class="comment">//!&lt; if (dimension==2)</span>
<a name="l00423"></a>00423 <span class="comment"></span>            {
<a name="l00424"></a>00424               assert(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==2);
<a name="l00425"></a>00425               xn=0.;
<a name="l00426"></a>00426               yn=0.;
<a name="l00427"></a>00427             }
<a name="l00428"></a>00428           zn=(p(1,1)-p(0,1))*(p(<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>,0)-p(0,0))
<a name="l00429"></a>00429              -(p(1,0)-p(0,0))*(p(<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>,1)-p(0,1));
<a name="l00430"></a>00430           norme=<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(xn)+<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(yn)+<a class="code" href="Double_8h.html#aaecd4ca8a2fe69cc6568af2938b94d2e">dabs</a>(zn);
<a name="l00431"></a>00431           xn/=<a class="code" href="Double_8h.html#ac842198e9490fae75825cab2a03eed2d">norme</a>;
<a name="l00432"></a>00432           yn/=<a class="code" href="Double_8h.html#ac842198e9490fae75825cab2a03eed2d">norme</a>;
<a name="l00433"></a>00433           zn/=<a class="code" href="Double_8h.html#ac842198e9490fae75825cab2a03eed2d">norme</a>;
<a name="l00434"></a>00434           s &lt;&lt; nom_grille &lt;&lt; <span class="stringliteral">&quot; 3 &quot;</span> &lt;&lt; 2*nbre_points &lt;&lt; finl;
<a name="l00435"></a>00435           <span class="keywordtype">int</span> i;
<a name="l00436"></a>00436           <span class="keywordflow">for</span>(i=0; i&lt;nbre_points; i++)
<a name="l00437"></a>00437             {
<a name="l00438"></a>00438               s &lt;&lt; p(i,0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p(i,1) ;
<a name="l00439"></a>00439               <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3) <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p(i,2) &lt;&lt; finl;
<a name="l00440"></a>00440               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==2) s &lt;&lt; <span class="stringliteral">&quot; 0.&quot;</span> &lt;&lt; finl;
<a name="l00441"></a>00441             }
<a name="l00442"></a>00442           <span class="keywordflow">for</span>(i=0; i&lt;nbre_points; i++)
<a name="l00443"></a>00443             {
<a name="l00444"></a>00444               s &lt;&lt; p(i,0)+xn &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p(i,1)+yn ;
<a name="l00445"></a>00445               <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3) s &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p(i,2)+zn &lt;&lt; finl;
<a name="l00446"></a>00446               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==2) s &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; zn &lt;&lt; finl;
<a name="l00447"></a>00447             }
<a name="l00448"></a>00448           s &lt;&lt; <span class="stringliteral">&quot;TOPOLOGIE&quot;</span> &lt;&lt; finl;
<a name="l00449"></a>00449           s &lt;&lt; nom_topologie &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nom_grille &lt;&lt; finl;
<a name="l00450"></a>00450           s &lt;&lt; <span class="stringliteral">&quot;MAILLE&quot;</span> &lt;&lt; finl;
<a name="l00451"></a>00451           s &lt;&lt; (<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>-1)*(<a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>-1) &lt;&lt; finl;
<a name="l00452"></a>00452           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>-1; j++)
<a name="l00453"></a>00453             <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>-1; i++)
<a name="l00454"></a>00454               {
<a name="l00455"></a>00455                 k=j*nbre_points1+i+1;
<a name="l00456"></a>00456                 kn=k+nbre_points;
<a name="l00457"></a>00457                 s &lt;&lt; <span class="stringliteral">&quot;VOXEL8 &quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; k+1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00458"></a>00458                 s &lt;&lt; k+nbre_points1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; k+nbre_points1+1;
<a name="l00459"></a>00459                 s &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kn &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kn+1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kn+<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>;
<a name="l00460"></a>00460                 s &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kn+nbre_points1+1 &lt;&lt; finl;
<a name="l00461"></a>00461               }
<a name="l00462"></a>00462           s &lt;&lt; <span class="stringliteral">&quot;FACE&quot;</span> &lt;&lt; finl;
<a name="l00463"></a>00463           s &lt;&lt; <span class="stringliteral">&quot;0&quot;</span> &lt;&lt; finl;
<a name="l00464"></a>00464         }
<a name="l00465"></a>00465       <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==3)
<a name="l00466"></a>00466         {
<a name="l00467"></a>00467           s &lt;&lt; <span class="stringliteral">&quot;TRUST   Version1  01/09/96&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00468"></a>00468           s &lt;&lt; <a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">nom_du_cas</a>() &lt;&lt; finl;
<a name="l00469"></a>00469           s &lt;&lt; <span class="stringliteral">&quot;TRUST&quot;</span> &lt;&lt; finl;
<a name="l00470"></a>00470           s &lt;&lt; <span class="stringliteral">&quot;GRILLE&quot;</span> &lt;&lt; finl;
<a name="l00471"></a>00471           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_grille(<span class="stringliteral">&quot;Grille&quot;</span>);
<a name="l00472"></a>00472           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_topologie(<span class="stringliteral">&quot;Topologie&quot;</span>);
<a name="l00473"></a>00473           nom_grille += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00474"></a>00474           nom_grille += <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>;
<a name="l00475"></a>00475           nom_topologie += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00476"></a>00476           nom_topologie += <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>;
<a name="l00477"></a>00477           <span class="keywordtype">int</span> k,kn;
<a name="l00478"></a>00478           <span class="keywordtype">int</span> nbre_points = <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00479"></a>00479           <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; p=<a class="code" href="classSonde__Int.html#ab15a3a4c5f8bd72c66b9eb3d30ba2db8" title="Renvoie le tableau des positions du champ qui sont sondees.">les_positions</a>();
<a name="l00480"></a>00480           s &lt;&lt; nom_grille &lt;&lt; <span class="stringliteral">&quot; 3 &quot;</span> &lt;&lt; nbre_points &lt;&lt; finl;
<a name="l00481"></a>00481           <span class="keywordtype">int</span> i;
<a name="l00482"></a>00482           <span class="keywordflow">for</span>(i=0; i&lt;nbre_points; i++)
<a name="l00483"></a>00483             {
<a name="l00484"></a>00484               s &lt;&lt; p(i,0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p(i,1) ;
<a name="l00485"></a>00485               s &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; p(i,2) &lt;&lt; finl;
<a name="l00486"></a>00486             }
<a name="l00487"></a>00487           s &lt;&lt; <span class="stringliteral">&quot;TOPOLOGIE&quot;</span> &lt;&lt; finl;
<a name="l00488"></a>00488           s &lt;&lt; nom_topologie &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nom_grille &lt;&lt; finl;
<a name="l00489"></a>00489           s &lt;&lt; <span class="stringliteral">&quot;MAILLE&quot;</span> &lt;&lt; finl;
<a name="l00490"></a>00490           s &lt;&lt; (<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>-1)*(<a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>-1)*(<a class="code" href="classSonde__Int.html#a934f5cae644b17f5ffb3d73d5e3649a4" title="faire des sonde_segment,sonde_plan,etc...">nbre_points3</a>-1) &lt;&lt; finl;
<a name="l00491"></a>00491           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> m=0; m&lt;<a class="code" href="classSonde__Int.html#a934f5cae644b17f5ffb3d73d5e3649a4" title="faire des sonde_segment,sonde_plan,etc...">nbre_points3</a>-1; m++)
<a name="l00492"></a>00492             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classSonde__Int.html#a7d8db98fcb071eae58d5098f194ae26b">nbre_points2</a>-1; j++)
<a name="l00493"></a>00493               <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>-1; i++)
<a name="l00494"></a>00494                 {
<a name="l00495"></a>00495                   k=m*nbre_points2*nbre_points1+j*nbre_points1+i+1;
<a name="l00496"></a>00496                   kn=k+nbre_points2*<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>;
<a name="l00497"></a>00497                   s &lt;&lt; <span class="stringliteral">&quot;VOXEL8 &quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; k+1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00498"></a>00498                   s &lt;&lt; k+nbre_points1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; k+nbre_points1+1;
<a name="l00499"></a>00499                   s &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kn &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kn+1 &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kn+<a class="code" href="classSonde__Int.html#ad8ab163e08b5b25b45fa161fbcdf34e1">nbre_points1</a>;
<a name="l00500"></a>00500                   s &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; kn+nbre_points1+1 &lt;&lt; finl;
<a name="l00501"></a>00501                 }
<a name="l00502"></a>00502           s &lt;&lt; <span class="stringliteral">&quot;FACE&quot;</span> &lt;&lt; finl;
<a name="l00503"></a>00503           s &lt;&lt; <span class="stringliteral">&quot;0&quot;</span> &lt;&lt; finl;
<a name="l00504"></a>00504         }
<a name="l00505"></a>00505     }
<a name="l00506"></a>00506 }
<a name="l00507"></a>00507 
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 <span class="comment">// Precondition:</span>
<a name="l00510"></a>00510 <span class="comment">// Parametre: double temps</span>
<a name="l00511"></a>00511 <span class="comment">// Signification: le temps de mise a jour</span>
<a name="l00512"></a>00512 <span class="comment">// Valeurs par defaut:</span>
<a name="l00513"></a>00513 <span class="comment">// Contraintes:</span>
<a name="l00514"></a>00514 <span class="comment">// Acces:</span>
<a name="l00515"></a>00515 <span class="comment">// Parametre: double tinit</span>
<a name="l00516"></a>00516 <span class="comment">// Signification: le temps initial de la sonde</span>
<a name="l00517"></a>00517 <span class="comment">// Valeurs par defaut:</span>
<a name="l00518"></a>00518 <span class="comment">// Contraintes:</span>
<a name="l00519"></a>00519 <span class="comment">// Acces:</span>
<a name="l00520"></a>00520 <span class="comment">// </span>
<a name="l00521"></a>00521 <span class="comment">// Signification:</span>
<a name="l00522"></a>00522 <span class="comment">// Contraintes:</span>
<a name="l00523"></a>00523 <span class="comment">// Exception:</span>
<a name="l00524"></a>00524 <span class="comment">// Effets de bord:</span>
<a name="l00525"></a>00525 <span class="comment">// Postcondition:</span>
<a name="l00526"></a>00526 <span class="comment">//</span>
<a name="l00527"></a>00527 <span class="comment">//</span><span class="comment"></span>
<a name="l00528"></a>00528 <span class="comment">//! Effectue une mise a jour en temps de la sonde&lt;br&gt;effectue le postraitement.</span>
<a name="l00529"></a><a class="code" href="classSonde__Int.html#aba0ae1baf838148918a2de9a9bdbf5eb">00529</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSonde__Int.html#aba0ae1baf838148918a2de9a9bdbf5eb" title="Effectue une mise a jour en temps de la sonde effectue le postraitement.">Sonde_Int::mettre_a_jour</a>(<span class="keywordtype">double</span> un_temps, <span class="keywordtype">double</span> tinit)
<a name="l00530"></a>00530 {
<a name="l00531"></a>00531   <span class="keywordtype">double</span> nb;
<a name="l00532"></a>00532   modf((un_temps-tinit)/<a class="code" href="classSonde__Int.html#ad63e107bb33144f8e79e938d99f20dfa" title="periode d&#39;echantillonnage">periode</a>, &amp;nb);
<a name="l00533"></a>00533   <span class="keywordflow">if</span> (nb&gt;<a class="code" href="classSonde__Int.html#acbbe80edbde8dfb589aba5039c206b71">nb_bip</a>)
<a name="l00534"></a>00534     {
<a name="l00535"></a>00535       <a class="code" href="classSonde__Int.html#acbbe80edbde8dfb589aba5039c206b71">nb_bip</a>=nb;
<a name="l00536"></a>00536       <a class="code" href="classSonde__Int.html#adffd46225cdeb329ecad48fe001284af" title="Effectue un postraitement. Imprime les valeurs du tableau aux positions demandees sur le fichier asso...">postraiter</a>(un_temps);
<a name="l00537"></a>00537     }
<a name="l00538"></a>00538 }
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 <span class="comment">// Precondition:</span>
<a name="l00542"></a>00542 <span class="comment">// Parametre:</span>
<a name="l00543"></a>00543 <span class="comment">// Signification:</span>
<a name="l00544"></a>00544 <span class="comment">// Valeurs par defaut:</span>
<a name="l00545"></a>00545 <span class="comment">// Contraintes:</span>
<a name="l00546"></a>00546 <span class="comment">// Acces:</span>
<a name="l00547"></a>00547 <span class="comment">// </span>
<a name="l00548"></a>00548 <span class="comment">// Signification:</span>
<a name="l00549"></a>00549 <span class="comment">// Contraintes:</span>
<a name="l00550"></a>00550 <span class="comment">// Exception:</span>
<a name="l00551"></a>00551 <span class="comment">// Effets de bord:</span>
<a name="l00552"></a>00552 <span class="comment">// Postcondition:</span>
<a name="l00553"></a>00553 <span class="comment">//</span>
<a name="l00554"></a>00554 <span class="comment">//</span>
<a name="l00555"></a>00555 <span class="comment">//</span><span class="comment"></span>
<a name="l00556"></a>00556 <span class="comment">//! Effectue un postraitement.&lt;br&gt;Imprime les valeurs du tableau aux positions demandees&lt;br&gt;sur le fichier associe.</span>
<a name="l00557"></a><a class="code" href="classSonde__Int.html#adffd46225cdeb329ecad48fe001284af">00557</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classSonde__Int.html#adffd46225cdeb329ecad48fe001284af" title="Effectue un postraitement. Imprime les valeurs du tableau aux positions demandees sur le fichier asso...">Sonde_Int::postraiter</a>(<span class="keywordtype">double</span> un_temps)
<a name="l00558"></a>00558 {
<a name="l00559"></a>00559   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>,<a class="code" href="classSonde__Int.html#a5e1f47920749d84f907d83a34218dbfc" title="Le tableau sonde.">mon_tableau</a>.<a class="code" href="classRef__IntVect.html#a1c7959efd862b8dd91818c78820c31b2">valeur</a>()))
<a name="l00560"></a>00560     {
<a name="l00561"></a>00561       <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; val_tab= <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>,<a class="code" href="classSonde__Int.html#a5e1f47920749d84f907d83a34218dbfc" title="Le tableau sonde.">mon_tableau</a>.<a class="code" href="classRef__IntVect.html#a1c7959efd862b8dd91818c78820c31b2">valeur</a>());
<a name="l00562"></a>00562       <span class="keywordtype">int</span> nval = val_tab.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00563"></a>00563 <span class="comment">// int i,j;</span>
<a name="l00564"></a>00564 <span class="comment">// int nb_compo=valeurs.nb_dim();</span>
<a name="l00565"></a>00565       <span class="keywordtype">int</span> nbre_points = <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbre_points; i++)
<a name="l00568"></a>00568         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;nval; j++)
<a name="l00569"></a>00569           <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i,j) = val_tab(<a class="code" href="classSonde__Int.html#add305f62ffdb3389b5f64a5812e2608b" title="les elements contenant les sondes ponctuelles">elem_</a>(i),j);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571       <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00572"></a>00572         {
<a name="l00573"></a>00573           <span class="keywordtype">int</span> p;
<a name="l00574"></a>00574           <span class="keywordtype">int</span> nbproc = <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>();
<a name="l00575"></a>00575           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> valeurs_pe;
<a name="l00576"></a>00576           <span class="keywordtype">int</span> val_max;
<a name="l00577"></a>00577           <span class="keywordflow">for</span>(p=1; p&lt;nbproc; p++)
<a name="l00578"></a>00578             {
<a name="l00579"></a>00579               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(valeurs_pe,p,0,p);
<a name="l00580"></a>00580               <span class="keywordtype">int</span> n1=<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00581"></a>00581               <span class="keywordtype">int</span> n2=<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00582"></a>00582               <span class="keywordtype">int</span> k;
<a name="l00583"></a>00583               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;n1; i++)
<a name="l00584"></a>00584                 <span class="keywordflow">for</span>(k=0; k&lt;n2; k++)
<a name="l00585"></a>00585                   {
<a name="l00586"></a>00586 <span class="preprocessor">#ifdef INT_is_64_</span>
<a name="l00587"></a>00587 <span class="preprocessor"></span>                    val_max = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(labs(<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i,k)),labs(valeurs_pe(i,k)));
<a name="l00588"></a>00588                     <span class="keywordflow">if</span>(val_max==(labs(valeurs_pe(i,k))))
<a name="l00589"></a>00589                       <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i,k)=valeurs_pe(i,k);
<a name="l00590"></a>00590 <span class="preprocessor">#else</span>
<a name="l00591"></a>00591 <span class="preprocessor"></span>                    val_max = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(abs(<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i,k)),abs(valeurs_pe(i,k)));
<a name="l00592"></a>00592                     <span class="keywordflow">if</span>(val_max==(abs(valeurs_pe(i,k))))
<a name="l00593"></a>00593                       <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i,k)=valeurs_pe(i,k);
<a name="l00594"></a>00594 <span class="preprocessor">#endif</span>
<a name="l00595"></a>00595 <span class="preprocessor"></span>                  }
<a name="l00596"></a>00596             }
<a name="l00597"></a>00597 
<a name="l00598"></a>00598           <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==0 || <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==1)
<a name="l00599"></a>00599             {
<a name="l00600"></a>00600               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; un_temps;
<a name="l00601"></a>00601               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0); i++)
<a name="l00602"></a>00602                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1); k++)
<a name="l00603"></a>00603                   <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i,k);
<a name="l00604"></a>00604               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00605"></a>00605             }
<a name="l00606"></a>00606 
<a name="l00607"></a>00607 <span class="comment">// Pour les sondes type plan, impression au format lml :</span>
<a name="l00608"></a>00608 <span class="comment">// num_sommet comp1 [comp2] [comp3]</span>
<a name="l00609"></a>00609 <span class="comment">// et dans la troisieme direction :</span>
<a name="l00610"></a>00610           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==2 || <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==3)
<a name="l00611"></a>00611             {
<a name="l00612"></a>00612               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> unite;
<a name="l00613"></a>00613               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_topologie(<span class="stringliteral">&quot;Topologie&quot;</span>);
<a name="l00614"></a>00614               nom_topologie += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00615"></a>00615               nom_topologie += <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>;
<a name="l00616"></a>00616               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;TEMPS &quot;</span> &lt;&lt; un_temps &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00617"></a>00617               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;CHAMPOINT &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nom_topologie
<a name="l00618"></a>00618                         &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; un_temps &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00619"></a>00619               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nval &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; unite &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00620"></a>00620               <span class="keywordtype">int</span> nbp=nbre_points;
<a name="l00621"></a>00621               <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==2) nbp*=2;
<a name="l00622"></a>00622               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;type1 &quot;</span> &lt;&lt; nbp &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00623"></a>00623               <span class="keywordtype">int</span> i;
<a name="l00624"></a>00624               <span class="keywordflow">for</span>(i=0; i&lt;nbre_points; i++)
<a name="l00625"></a>00625                 {
<a name="l00626"></a>00626                   <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; i+1;
<a name="l00627"></a>00627                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1); j++)
<a name="l00628"></a>00628                     <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i,j);
<a name="l00629"></a>00629 <span class="comment">// Pour ne pas flusher :</span>
<a name="l00630"></a>00630                   <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00631"></a>00631                 }
<a name="l00632"></a>00632 <span class="comment">// Pour le 2D, on rajoute une direction</span>
<a name="l00633"></a>00633               <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==2)
<a name="l00634"></a>00634                 {
<a name="l00635"></a>00635                   <span class="keywordflow">for</span>(i=0; i&lt;nbre_points; i++)
<a name="l00636"></a>00636                     {
<a name="l00637"></a>00637                       <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; nbre_points+i+1;
<a name="l00638"></a>00638                       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1); j++)
<a name="l00639"></a>00639                         <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i,j);
<a name="l00640"></a>00640 <span class="comment">// Pour ne pas flusher :</span>
<a name="l00641"></a>00641                       <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00642"></a>00642                     }
<a name="l00643"></a>00643                 }
<a name="l00644"></a>00644             }
<a name="l00645"></a>00645           <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>().<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00646"></a>00646         }
<a name="l00647"></a>00647       <span class="keywordflow">else</span>
<a name="l00648"></a>00648         <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00649"></a>00649     }
<a name="l00650"></a>00650   <span class="keywordflow">else</span>
<a name="l00651"></a>00651     {
<a name="l00652"></a>00652       <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; val_tab= <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classIntVect.html">IntVect</a>,<a class="code" href="classSonde__Int.html#a5e1f47920749d84f907d83a34218dbfc" title="Le tableau sonde.">mon_tableau</a>.<a class="code" href="classRef__IntVect.html#a1c7959efd862b8dd91818c78820c31b2">valeur</a>());
<a name="l00653"></a>00653       <span class="keywordtype">int</span> nval =1;
<a name="l00654"></a>00654 
<a name="l00655"></a>00655 
<a name="l00656"></a>00656 <span class="comment">// int nb_compo=valeurs.nb_dim();</span>
<a name="l00657"></a>00657       <span class="keywordtype">int</span> nbre_points = <a class="code" href="classSonde__Int.html#a09aebb3164ff82ee59ce90bc8697e9a2" title="les coordonnees des sondes ponctuelles">les_positions_</a>.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00658"></a>00658 
<a name="l00659"></a>00659       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nbre_points; i++)
<a name="l00660"></a>00660         <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i) = val_tab(<a class="code" href="classSonde__Int.html#add305f62ffdb3389b5f64a5812e2608b" title="les elements contenant les sondes ponctuelles">elem_</a>(i));
<a name="l00661"></a>00661 
<a name="l00662"></a>00662       <span class="keywordflow">if</span>(<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00663"></a>00663         {
<a name="l00664"></a>00664           <span class="keywordtype">int</span> p;
<a name="l00665"></a>00665           <span class="keywordtype">int</span> nbproc = <a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>();
<a name="l00666"></a>00666           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> valeurs_pe;
<a name="l00667"></a>00667           <span class="keywordtype">int</span> val_max;
<a name="l00668"></a>00668           <span class="keywordflow">for</span>(p=1; p&lt;nbproc; p++)
<a name="l00669"></a>00669             {
<a name="l00670"></a>00670               <a class="code" href="communications_8cpp.html#a729d9499913e22a5f0db62ef07b9793f">recevoir</a>(valeurs_pe,p,0,p);
<a name="l00671"></a>00671 
<a name="l00672"></a>00672               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0); i++)
<a name="l00673"></a>00673                 {
<a name="l00674"></a>00674 <span class="preprocessor">#ifdef INT_is_64_</span>
<a name="l00675"></a>00675 <span class="preprocessor"></span>                  val_max = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(labs(<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i)),labs(valeurs_pe(i)));
<a name="l00676"></a>00676                   <span class="keywordflow">if</span>(val_max==(labs(valeurs_pe(i))))
<a name="l00677"></a>00677                     <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i)=valeurs_pe(i);
<a name="l00678"></a>00678 <span class="preprocessor">#else</span>
<a name="l00679"></a>00679 <span class="preprocessor"></span>                  val_max = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(abs(<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i)),abs(valeurs_pe(i)));
<a name="l00680"></a>00680                   <span class="keywordflow">if</span>(val_max==(abs(valeurs_pe(i))))
<a name="l00681"></a>00681                     <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i)=valeurs_pe(i);
<a name="l00682"></a>00682 <span class="preprocessor">#endif</span>
<a name="l00683"></a>00683 <span class="preprocessor"></span>                }
<a name="l00684"></a>00684             }
<a name="l00685"></a>00685           <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==0 || <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==1)
<a name="l00686"></a>00686             {
<a name="l00687"></a>00687               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; un_temps;
<a name="l00688"></a>00688               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0); i++)
<a name="l00689"></a>00689                 <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i);
<a name="l00690"></a>00690               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00691"></a>00691             }
<a name="l00692"></a>00692 
<a name="l00693"></a>00693 <span class="comment">// Pour les sondes type plan, impression au format lml :</span>
<a name="l00694"></a>00694 <span class="comment">// num_sommet comp1 [comp2] [comp3]</span>
<a name="l00695"></a>00695 <span class="comment">// et dans la troisieme direction :</span>
<a name="l00696"></a>00696           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==2 || <a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==3)
<a name="l00697"></a>00697             {
<a name="l00698"></a>00698               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> unite;
<a name="l00699"></a>00699               <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_topologie(<span class="stringliteral">&quot;Topologie&quot;</span>);
<a name="l00700"></a>00700               nom_topologie += <span class="stringliteral">&quot;_&quot;</span>;
<a name="l00701"></a>00701               nom_topologie += <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a>;
<a name="l00702"></a>00702               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;TEMPS &quot;</span> &lt;&lt; un_temps &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00703"></a>00703               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;CHAMPOINT &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nom_topologie
<a name="l00704"></a>00704                         &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; un_temps &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00705"></a>00705               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <a class="code" href="classSonde__Int.html#a5ab73f356058c23c29907d204a62ead6" title="le nom de la sonde">nom_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; nval &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; unite &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00706"></a>00706               <span class="keywordtype">int</span> nbp=nbre_points;
<a name="l00707"></a>00707               <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==2) nbp*=2;
<a name="l00708"></a>00708               <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;type0 &quot;</span> &lt;&lt; nbp &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00709"></a>00709 <span class="comment">// int i;</span>
<a name="l00710"></a>00710               <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nbre_points; i++)
<a name="l00711"></a>00711                 {
<a name="l00712"></a>00712                   <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; i+1;
<a name="l00713"></a>00713                   <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i);
<a name="l00714"></a>00714 <span class="comment">// Pour ne pas flusher :</span>
<a name="l00715"></a>00715                   <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00716"></a>00716                 }
<a name="l00717"></a>00717 <span class="comment">// Pour le 2D, on rajoute une direction</span>
<a name="l00718"></a>00718               <span class="keywordflow">if</span> (<a class="code" href="classSonde__Int.html#ad9eb54f052eb3cea78984de58cec77d0" title="la dimension de la sone (point:0,segment:1,plan:2,volume:3)">dim</a>==2)
<a name="l00719"></a>00719                 {
<a name="l00720"></a>00720                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;nbre_points; i++)
<a name="l00721"></a>00721                     {
<a name="l00722"></a>00722                       <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; nbre_points+i+1;
<a name="l00723"></a>00723                       <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>(i);
<a name="l00724"></a>00724 <span class="comment">// Pour ne pas flusher :</span>
<a name="l00725"></a>00725                       <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00726"></a>00726                     }
<a name="l00727"></a>00727                 }
<a name="l00728"></a>00728             }
<a name="l00729"></a>00729           <a class="code" href="classSonde__Int.html#a10be5e25a254147f2d6232d7b2c525b2" title="Renvoie un flot de sortie Fichier, pointant sur le fichier de sortie utilise par la sonde...">fichier</a>().<a class="code" href="classSortie__Fichier__base.html#a8efa6533c9a25aa6c4ee3c5f8783f5f7" title="Force l&#39;ecriture sur disque des donnees dans le tampon Utilise l&#39;implementation de la classe ofstream...">flush</a>();
<a name="l00730"></a>00730         }
<a name="l00731"></a>00731       <span class="keywordflow">else</span>
<a name="l00732"></a>00732         <a class="code" href="communications_8cpp.html#af9feb6405277b375b2ebcbfaec9f8af3">envoyer</a>(<a class="code" href="classSonde__Int.html#a6e2f8eb308155efd096e3ee0af129fbb" title="les valeurs de mon_tableau pour les indices donnes par elem_">valeurs</a>,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>(),0,<a class="code" href="classProcess.html#ab55ba07167ec807ed3a145cac0f5dca4" title="renvoie mon rang dans le groupe de communication courant. Voir Comm_Group::rank() et PE_Groups::curre...">Process::me</a>());
<a name="l00733"></a>00733     }
<a name="l00734"></a>00734 
<a name="l00735"></a>00735 }
<a name="l00736"></a>00736 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:17 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
