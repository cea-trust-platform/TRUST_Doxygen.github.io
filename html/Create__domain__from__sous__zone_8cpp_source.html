<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Geometrie/Create_domain_from_sous_zone.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Geometrie/Create_domain_from_sous_zone.cpp</div>  </div>
</div>
<div class="contents">
<a href="Create__domain__from__sous__zone_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2019, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Create_domain_from_sous_zone.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Geometrie</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/6</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Create__domain__from__sous__zone_8h.html">Create_domain_from_sous_zone.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="DomaineCutter_8h.html">DomaineCutter.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Scatter_8h.html">Scatter.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Sous__Zone_8h.html">Sous_Zone.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="SFichier_8h.html">SFichier.h</a>&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="Create__domain__from__sous__zone_8cpp.html#af4e74735825dc044ef0091847fda0810">00031</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classCreate__domain__from__sous__zone.html" title="Classe Create_domain_from_sous_zone Lecture d&#39;un fichier.">Create_domain_from_sous_zone</a>,<span class="stringliteral">&quot;Create_domain_from_sous_zone&quot;</span>,<a class="code" href="classInterprete__geometrique__base.html" title="classe Interprete_geometrique_base .">Interprete_geometrique_base</a>);
<a name="l00032"></a>00032 <span class="comment">// XD create_domain_from_sous_zone interprete_geometrique_base create_domain_from_sous_zone 1 This keyword fills the domain domaine_final with the subzone par_sous_zone from the domain domaine_init. It is very useful when meshing several mediums with Gmsh. Each medium will be defined as a subzone into Gmsh. A MED mesh file will be saved from Gmsh and read with Lire_Med keyword by the TRUST data file. And with this keyword, a domain will be created for each medium in the TRUST data file.</span>
<a name="l00033"></a>00033 <span class="comment">// 16/10/2017: desactivation du mot-cle par_sous_zones</span>
<a name="l00034"></a>00034 <span class="comment">// create_domain_from_sous_zone interprete_geometrique_base create_domain_from_sous_zone 1 This keyword fills the domain domaine_final with the subzone par_sous_zone or with several subzones par_sous_zones from the domain domaine_init. It is very useful when meshing several mediums with Gmsh. Each medium will be defined as a subzone into Gmsh. A MED mesh file will be saved from Gmsh and read with Lire_Med keyword by the TRUST data file. And with this keyword, a domain will be created for each medium in the TRUST data file.</span>
<a name="l00035"></a>00035 
<a name="l00036"></a><a class="code" href="classCreate__domain__from__sous__zone.html#a01e978cc5cc428c2052e5f0524e0ba4e">00036</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classCreate__domain__from__sous__zone.html#a01e978cc5cc428c2052e5f0524e0ba4e" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Create_domain_from_sous_zone::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00037"></a>00037 <span class="keyword"></span>{
<a name="l00038"></a>00038   <span class="keywordflow">return</span> <a class="code" href="classCreate__domain__from__sous__zone.html#a01e978cc5cc428c2052e5f0524e0ba4e" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Interprete::printOn</a>(os);
<a name="l00039"></a>00039 }
<a name="l00040"></a><a class="code" href="classCreate__domain__from__sous__zone.html#afb524d3dfb4ccd88c9476754665e4db9">00040</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classCreate__domain__from__sous__zone.html#afb524d3dfb4ccd88c9476754665e4db9" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Create_domain_from_sous_zone::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00041"></a>00041 {
<a name="l00042"></a>00042   <span class="keywordflow">return</span> <a class="code" href="classCreate__domain__from__sous__zone.html#afb524d3dfb4ccd88c9476754665e4db9" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Interprete::readOn</a>(is);
<a name="l00043"></a>00043 }
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="classCreate__domain__from__sous__zone.html#aa406b3e363b1e22deea5fa76cb202337">00045</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classCreate__domain__from__sous__zone.html#aa406b3e363b1e22deea5fa76cb202337">Create_domain_from_sous_zone::interpreter_</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00046"></a>00046 {
<a name="l00047"></a>00047   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_dom,nom_dom_org;
<a name="l00048"></a>00048   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_sous_zone;
<a name="l00049"></a>00049   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> vec_nom_ssz;
<a name="l00050"></a>00050 
<a name="l00051"></a>00051   <a class="code" href="classParam.html" title="Defined below in this file.">Param</a> param(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00052"></a>00052   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;domaine_final&quot;</span>,&amp;nom_dom,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>); <span class="comment">//!&lt; XD_ADD_P ref_domaine new domain in which faces are stored</span>
<a name="l00053"></a>00053 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;par_sous_zone&quot;</span>,&amp;nom_sous_zone,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>); <span class="comment">//!&lt; XD_ADD_P chaine a sub-area allowing to choose the elements</span>
<a name="l00054"></a>00054 <span class="comment"></span>  param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;domaine_init&quot;</span>,&amp;nom_dom_org,<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>); <span class="comment">//!&lt; XD_ADD_P ref_domaine initial domain 16/10/2017: desactivation du mot-cle par_sous_zones param.ajouter(&quot;par_sous_zones&quot;,&amp;vec_nom_ssz); // listchaine several sub-zones allowing to choose the elements param.ajouter_condition(&quot;is_read_par_sous_zone_or_is_read_par_sous_zones&quot;,&quot;Interpreter Create_domain_from_sous_zone: one of the keywords par_sous_zone or par_sous_zones must be specified.&quot;);</span>
<a name="l00055"></a>00055 <span class="comment"></span><span class="comment">//</span>
<a name="l00056"></a>00056 <span class="comment">//</span>
<a name="l00057"></a>00057 <span class="comment">//</span>
<a name="l00058"></a>00058   param.<a class="code" href="classParam.html#aa9d44fc51b4a08b357733a97dc7acaad" title="Read the is input with the parameters (defined with the Param object) inside: { ... } Example, to read: { a 1 b 2 } Param param(que_suis_je()); int a,b; param.ajouter(&quot;a&quot;,&amp;a); param.ajouter(&quot;b&quot;,&amp;b); param.lire_avec_accolades_depuis(is);.">lire_avec_accolades_depuis</a>(is);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060   <a class="code" href="classInterprete__geometrique__base.html#ac0d2fd316a4bb1585ec579f473684caa">associer_domaine</a>(nom_dom);
<a name="l00061"></a>00061   <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classInterprete__geometrique__base.html#adeeb544dc732989761fb466c0d9cbcbe">domaine</a>();
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">nproc</a>()&gt;1)
<a name="l00064"></a>00064     {
<a name="l00065"></a>00065       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Options par_sous_zone and par_sous_zones of  &quot;</span>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<span class="stringliteral">&quot; are for sequential.&quot;</span> &lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00066"></a>00066       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00067"></a>00067     }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; domaine_org=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>, <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(nom_dom_org));
<a name="l00070"></a>00070   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> marq_elem(domaine_org.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>());
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <span class="keywordflow">if</span> (vec_nom_ssz.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>()==0)
<a name="l00073"></a>00073     vec_nom_ssz.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(nom_sous_zone));
<a name="l00074"></a>00074   <span class="keywordflow">else</span>
<a name="l00075"></a>00075     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;\nWARNING: par_sous_zones option only available for subzones that do not touch each other!!\n&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077   <span class="keywordtype">int</span> nb_poly = 0;
<a name="l00078"></a>00078   <a class="code" href="classDomaineCutter.html" title="Classe outil permettant de generer des sous-domaines pour un calcul parallele a partir d&#39;un domaine d...">DomaineCutter</a> cutter;
<a name="l00079"></a>00079   <a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a> vide;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0; i&lt;vec_nom_ssz.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>(); i++ )
<a name="l00082"></a>00082     {
<a name="l00083"></a>00083       <span class="keyword">const</span> <a class="code" href="classSous__Zone.html" title="Classe Sous_Zone Represente une sous zone volumique i.e un sous ensemble de polyedres d&#39;un objet de t...">Sous_Zone</a>&amp; ssz=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classSous__Zone.html" title="Classe Sous_Zone Represente une sous zone volumique i.e un sous ensemble de polyedres d&#39;un objet de t...">Sous_Zone</a>,<a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(vec_nom_ssz(i)));
<a name="l00084"></a>00084       nb_poly=ssz.<a class="code" href="classSous__Zone.html#a4266863124b1b4ce971ac57a6ec746e9" title="Returns the subzone number of elements (real+virtual elements in parallel)">nb_elem_tot</a>();
<a name="l00085"></a>00085       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pol=0; pol&lt;nb_poly; pol++)
<a name="l00086"></a>00086         marq_elem(ssz[pol])=1;
<a name="l00087"></a>00087     }
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   cutter.<a class="code" href="classDomaineCutter.html#a700d1294c0ad188e96dcfbd5903ae974" title="Prepare les structures de donnees pour la construction des sous-domaines en fonction d&#39;un decoupage f...">initialiser</a>(domaine_org,marq_elem,2,1,vide,1);
<a name="l00090"></a>00090   cutter.<a class="code" href="classDomaineCutter.html#a151d632d05724329525a5b05385ac2c1" title="Remplit la structure &quot;correspondance&quot; et le &quot;sous_domaine&quot; pour la partie &quot;part&quot;. On cherche les somm...">construire_sous_domaine</a>(1,dom);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00093"></a>00093   <a class="code" href="classBords.html" title="Classe Bords Cette classe represente une liste d&#39;objets de type Bord.">Bords</a>&amp; bords=zone.<a class="code" href="classZone.html#a4bc04163903c004c5c1383eaa5fa844d" title="Renvoie la liste des bords de la zone. (version const)">faces_bord</a>();
<a name="l00094"></a>00094 
<a name="l00095"></a>00095   <span class="keywordflow">if</span> (cutter.<a class="code" href="classDomaineCutter.html#aad518dae11c71eb4205ddf214fe348b5">bords_internes</a>().<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>()&gt;0)
<a name="l00096"></a>00096     zone.<a class="code" href="classZone.html#a16f273a76321d31435995cdad664285a" title="Renvoie la liste des joints de la zone. (version const)">faces_joint</a>().<a class="code" href="classliste.html#a6cf18c012f5c03fd88aafac2d263883e" title="Vide la liste.">vide</a>();
<a name="l00097"></a>00097   <span class="keywordflow">else</span>
<a name="l00098"></a>00098     {
<a name="l00099"></a>00099 <span class="comment">// on transforme les joints en bord</span>
<a name="l00100"></a>00100       <a class="code" href="classJoints.html" title="Classe Joints Cette classe represente une liste d&#39;objet de type Joint.">Joints</a>&amp; joints= zone.<a class="code" href="classZone.html#a16f273a76321d31435995cdad664285a" title="Renvoie la liste des joints de la zone. (version const)">faces_joint</a>();
<a name="l00101"></a>00101       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=joints.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>()-1; j&gt;=0; j--)
<a name="l00102"></a>00102         {
<a name="l00103"></a>00103           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt;<span class="stringliteral">&quot;The joint&quot;</span>&lt;&lt;j&lt;&lt;<span class="stringliteral">&quot; becomes a boundary&quot;</span>&lt;&lt;finl;
<a name="l00104"></a>00104           <a class="code" href="classBord.html" title="Classe Bord Cette classe represente un bord d&#39;une zone, c&#39;est un type de frontiere&lt;br&gt;(derive de Fronti...">Bord</a> b;
<a name="l00105"></a>00105           <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>,b)=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>,joints(j));
<a name="l00106"></a>00106           b.<a class="code" href="classFrontiere.html#a714e3cc26d7e59f3a65d80de23ea21ac" title="Donne un nom a la frontiere.">nommer</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;Couture_&quot;</span>)+<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(j));
<a name="l00107"></a>00107           bords.<a class="code" href="classList__Bord.html#a61386a2f94d915253bcec812ce0735c3">add</a>(b);
<a name="l00108"></a>00108 
<a name="l00109"></a>00109           joints.<a class="code" href="classList__Joint.html#ac8fbd384f936049f360038d8c73241de">suppr</a>(joints(j));
<a name="l00110"></a>00110         }
<a name="l00111"></a>00111     }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b=bords.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>()-1; b&gt;=0; b--)
<a name="l00114"></a>00114     <span class="keywordflow">if</span> (bords(b).<a class="code" href="classBords.html#ac9ac781941c3254fd04512d310c7344f" title="Renvoie le nombre total de faces de tous les bords de la liste.">nb_faces</a>()==0)
<a name="l00115"></a>00115       {
<a name="l00116"></a>00116         <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; bords(b).<a class="code" href="classObjet__U.html#a70413a8785d36bf5105fced1c89d0d2b" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>()&lt;&lt;<span class="stringliteral">&quot; deleted&quot;</span>&lt;&lt;finl;
<a name="l00117"></a>00117         bords.<a class="code" href="classList__Bord.html#a05bc51286c67f7362d4097435109aaf9">suppr</a>(bords(b));
<a name="l00118"></a>00118       }
<a name="l00119"></a>00119   <a class="code" href="classRaccords.html" title="Classe Raccords Cette represente une liste d&#39;objets de type Raccord.">Raccords</a>&amp; listrac=zone.<a class="code" href="classZone.html#ac2a20fe8fa5529c7eefd418b43c0131c" title="Renvoie la liste des racoords de la zone. (version const)">faces_raccord</a>();
<a name="l00120"></a>00120 
<a name="l00121"></a>00121   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b=bords.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>()-1; b&gt;=0; b--)
<a name="l00122"></a>00122     {
<a name="l00123"></a>00123       <span class="keywordflow">if</span> (cutter.<a class="code" href="classDomaineCutter.html#aad518dae11c71eb4205ddf214fe348b5">bords_internes</a>().<a class="code" href="classNoms.html#a78080f3ce94b418a3490e1b4c13c8142">rang</a>(bords(b).<a class="code" href="classObjet__U.html#a70413a8785d36bf5105fced1c89d0d2b" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>())&gt;=0)
<a name="l00124"></a>00124         {
<a name="l00125"></a>00125           <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; bords(b).<a class="code" href="classObjet__U.html#a70413a8785d36bf5105fced1c89d0d2b" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>() &lt;&lt;<span class="stringliteral">&quot; becomes a connection &quot;</span>&lt;&lt;finl;
<a name="l00126"></a>00126           <a class="code" href="classRaccord.html" title="Classe Raccord Classe generique de la hierarchie des raccords, un objet Raccord peut referencer n&#39;imp...">Raccord</a> racc_base;
<a name="l00127"></a>00127           racc_base.<a class="code" href="classDeriv__.html#ad1d33400ed15b6ff96579ed82d9e2719" title="Essaie de creer une instance du type &quot;type&quot;. si type n&#39;est pas un type ou type n&#39;est pas instanciab...">typer</a>(<span class="stringliteral">&quot;Raccord_local_homogene&quot;</span>);
<a name="l00128"></a>00128           <a class="code" href="classRaccord__base.html" title="Classe Raccord_base Cette classe est simplement une frontiere, c&#39;est la classe de base de la hierarch...">Raccord_base</a>&amp; racc=racc_base.<a class="code" href="classDeriv__Raccord__base.html#a00893b6e21deda193b9f429651361f14">valeur</a>();
<a name="l00129"></a>00129 <span class="comment">// on caste en Frontiere pour pouvoir faire la copie ...</span>
<a name="l00130"></a>00130           <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>,racc)=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>,bords(b));
<a name="l00131"></a>00131           listrac.<a class="code" href="classList__Raccord.html#ac995f4b0d89ff514917a9a1c5c213fd7">add</a>(racc_base);
<a name="l00132"></a>00132 
<a name="l00133"></a>00133           bords.<a class="code" href="classList__Bord.html#a05bc51286c67f7362d4097435109aaf9">suppr</a>(bords(b));
<a name="l00134"></a>00134         }
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">// et les sous-zones?</span>
<a name="l00138"></a>00138   <span class="keyword">const</span> <a class="code" href="List_8h.html#a3149526fb499ddb08728c87daa32c5ad">LIST</a>(<a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classSous__Zone.html" title="Classe Sous_Zone Represente une sous zone volumique i.e un sous ensemble de polyedres d&#39;un objet de t...">Sous_Zone</a>)) &amp; liste_sous_zones = domaine_org.<a class="code" href="classDomaine.html#a6499cd6407eb6e5ac5e12891bd1afcb1">ss_zones</a>();
<a name="l00139"></a>00139   <span class="keywordtype">int</span> nb_sous_zones = liste_sous_zones.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00140"></a>00140   <span class="keyword">const</span> <a class="code" href="classSous__Zone.html" title="Classe Sous_Zone Represente une sous zone volumique i.e un sous ensemble de polyedres d&#39;un objet de t...">Sous_Zone</a>&amp; ssz=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classSous__Zone.html" title="Classe Sous_Zone Represente une sous zone volumique i.e un sous ensemble de polyedres d&#39;un objet de t...">Sous_Zone</a>,<a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">objet</a>(vec_nom_ssz(0)));
<a name="l00141"></a>00141   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> rev_ssz(domaine_org.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>());
<a name="l00142"></a>00142   rev_ssz = -1;
<a name="l00143"></a>00143   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_poly; i++)
<a name="l00144"></a>00144     rev_ssz(ssz[i]) = i;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> jdd(<span class="stringliteral">&quot; &quot;</span>), jdd_par(<span class="stringliteral">&quot; &quot;</span>);
<a name="l00147"></a>00147   <span class="keywordtype">int</span> ecr_jdd = 0;
<a name="l00148"></a>00148   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_sous_zones; i++)
<a name="l00149"></a>00149     <span class="keywordflow">if</span> (liste_sous_zones[i]-&gt;<a class="code" href="classObjet__U.html#a70413a8785d36bf5105fced1c89d0d2b" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>() != nom_sous_zone)
<a name="l00150"></a>00150       {
<a name="l00151"></a>00151 <span class="comment">// liste des elements de la sous-sous-zone</span>
<a name="l00152"></a>00152         <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> polys;
<a name="l00153"></a>00153         polys.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00154"></a>00154         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0, k; j &lt; liste_sous_zones[i]-&gt;nb_elem_tot(); j++)
<a name="l00155"></a>00155           <span class="keywordflow">if</span> ((k = rev_ssz[liste_sous_zones[i].<a class="code" href="Source__Generique__Face__PolyMAC_8cpp.html#a7d7b5d77a3caa1af70f5e1c9108de5a1">valeur</a>()[j]]) &gt;= 0)
<a name="l00156"></a>00156             polys.<a class="code" href="classArrOfInt.html#a3f39d0966599416e7b1f7cd8159d8d01" title="Ajoute une case en fin de tableau et y stocke la &quot;valeur&quot;.">append_array</a>(k);
<a name="l00157"></a>00157 
<a name="l00158"></a>00158         <span class="keywordflow">if</span> (!polys.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>())
<a name="l00159"></a>00159           <span class="keywordflow">continue</span>; <span class="comment">//sous-sous-zone vide!</span>
<a name="l00160"></a>00160 
<a name="l00161"></a>00161         <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_ssz(nom_dom + <span class="stringliteral">&quot;_&quot;</span> + liste_sous_zones[i]-&gt;<a class="code" href="classObjet__U.html#a70413a8785d36bf5105fced1c89d0d2b" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>()), file_ssz(nom_ssz + <span class="stringliteral">&quot;.file&quot;</span>);
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 <span class="comment">// contribution aux JDDs des sous-sous-zones</span>
<a name="l00164"></a>00164         jdd += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;export Sous_Zone &quot;</span>) + nom_ssz + <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00165"></a>00165         jdd += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;Associer &quot;</span>) + nom_ssz + <span class="stringliteral">&quot; &quot;</span> + nom_dom + <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00166"></a>00166         jdd += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;Lire &quot;</span>) + nom_ssz + <span class="stringliteral">&quot; { fichier &quot;</span> + file_ssz + <span class="stringliteral">&quot; }&quot;</span> + <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00167"></a>00167         jdd_par += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;export Sous_Zone &quot;</span>) + nom_ssz + <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00168"></a>00168         jdd_par += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;Associer &quot;</span>) + nom_ssz + <span class="stringliteral">&quot; &quot;</span> + nom_dom + <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00169"></a>00169         jdd_par += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;Lire &quot;</span>) + nom_ssz + <span class="stringliteral">&quot; { fichier &quot;</span> + nom_ssz + <span class="stringliteral">&quot;.ssz }&quot;</span> + <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00170"></a>00170         ecr_jdd = 1;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">// fichier de la sous-sous-zone</span>
<a name="l00173"></a>00173         <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> f_ssz(file_ssz);
<a name="l00174"></a>00174         f_ssz &lt;&lt; polys;
<a name="l00175"></a>00175       }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   <span class="keywordflow">if</span> (ecr_jdd)
<a name="l00178"></a>00178     {
<a name="l00179"></a>00179       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> f_jdd(nom_dom + <span class="stringliteral">&quot;_ssz.geo&quot;</span>);
<a name="l00180"></a>00180       <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> f_jdd_par(nom_dom + <span class="stringliteral">&quot;_ssz_par.geo&quot;</span>);
<a name="l00181"></a>00181       f_jdd &lt;&lt; jdd;
<a name="l00182"></a>00182       f_jdd_par &lt;&lt; jdd_par;
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185   dom.<a class="code" href="classDomaine.html#ae5d7a1cb2b05368fbb9a7ebec7793911" title="Donne un nom au domaine.">nommer</a>(nom_dom);
<a name="l00186"></a>00186   <a class="code" href="classScatter.html#a1874139ffd29d5a68191bc7828d3a5bd" title="cree des descripteurs sequentiels pour les tableaux sommets et elements du domaine (necessaire car Sc...">Scatter::init_sequential_domain</a>(dom);
<a name="l00187"></a>00187 
<a name="l00188"></a>00188   <span class="keywordflow">return</span> is;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 }
<a name="l00191"></a>00191 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:17 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
