<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/VDF/Traitement_particulier_NS_canal_VDF.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/VDF/Traitement_particulier_NS_canal_VDF.cpp</div>  </div>
</div>
<div class="contents">
<a href="Traitement__particulier__NS__canal__VDF_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Traitement_particulier_NS_canal_VDF.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/VDF</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/29</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Traitement__particulier__NS__canal__VDF_8h.html">Traitement_particulier_NS_canal_VDF.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VDF_8h.html">Zone_VDF.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Pave_8h.html">Pave.h</a>&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Fluide__base_8h.html">Fluide_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Navier__Stokes__std_8h.html">Navier_Stokes_std.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Mod__turb__hyd__base_8h.html">Mod_turb_hyd_base.h</a>&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="Traitement__particulier__NS__canal__VDF_8cpp.html#ac2aba40c6a1395a68ae0f61daf76eb56">00031</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classTraitement__particulier__NS__canal__VDF.html" title="classe Traitement_particulier_NS_canal_VDF Cette classe permet de faire les traitements particuliers ...">Traitement_particulier_NS_canal_VDF</a>,<span class="stringliteral">&quot;Traitement_particulier_NS_canal_VDF&quot;</span>,<a class="code" href="classTraitement__particulier__NS__canal.html" title="classe Traitement_particulier_NS_canal Cette classe permet de faire les traitements particuliers pour...">Traitement_particulier_NS_canal</a>);
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="comment">// Precondition:</span>
<a name="l00035"></a>00035 <span class="comment">// Parametre: Sortie&amp; is</span>
<a name="l00036"></a>00036 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00037"></a>00037 <span class="comment">// Valeurs par defaut:</span>
<a name="l00038"></a>00038 <span class="comment">// Contraintes:</span>
<a name="l00039"></a>00039 <span class="comment">// Acces: entree/sortie</span>
<a name="l00040"></a>00040 <span class="comment">// Exception:</span>
<a name="l00041"></a>00041 <span class="comment">// Effets de bord:</span>
<a name="l00042"></a>00042 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00043"></a>00043 <span class="comment">//</span>
<a name="l00044"></a>00044 <span class="comment">//</span><span class="comment"></span>
<a name="l00045"></a>00045 <span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00046"></a>00046 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00047"></a>00047 <span class="comment">Contraintes: */</span>
<a name="l00048"></a><a class="code" href="classTraitement__particulier__NS__canal__VDF.html#a5a35509fa21bf3f15558ad74f97d19b9">00048</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#a5a35509fa21bf3f15558ad74f97d19b9">Traitement_particulier_NS_canal_VDF::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; is)<span class="keyword"> const</span>
<a name="l00049"></a>00049 <span class="keyword"></span>{
<a name="l00050"></a>00050   <span class="keywordflow">return</span> is;
<a name="l00051"></a>00051 }
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">// Precondition:</span>
<a name="l00055"></a>00055 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00056"></a>00056 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00057"></a>00057 <span class="comment">// Valeurs par defaut:</span>
<a name="l00058"></a>00058 <span class="comment">// Contraintes:</span>
<a name="l00059"></a>00059 <span class="comment">// Acces: entree/sortie</span>
<a name="l00060"></a>00060 <span class="comment">// Exception:</span>
<a name="l00061"></a>00061 <span class="comment">// Effets de bord:</span>
<a name="l00062"></a>00062 <span class="comment">// Postcondition:</span>
<a name="l00063"></a>00063 <span class="comment">//</span>
<a name="l00064"></a>00064 <span class="comment">//</span><span class="comment"></span>
<a name="l00065"></a>00065 <span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00066"></a>00066 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00067"></a>00067 <span class="comment">Contraintes: */</span>
<a name="l00068"></a><a class="code" href="classTraitement__particulier__NS__canal__VDF.html#ab6b469de18975388e36c77a2dab23936">00068</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#ab6b469de18975388e36c77a2dab23936">Traitement_particulier_NS_canal_VDF::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070   <span class="keywordflow">return</span> is;
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="classTraitement__particulier__NS__canal__VDF.html#a23f5f7ee7c0b8de5fae0da2d53800995">00073</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#a5c4a714725f5155fa3b4ea6748ff31d9">Traitement_particulier_NS_canal_VDF::lire</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00074"></a>00074 {
<a name="l00075"></a>00075   <span class="keywordflow">return</span> <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#a5c4a714725f5155fa3b4ea6748ff31d9">Traitement_particulier_NS_canal::lire</a>(is);
<a name="l00076"></a>00076 }
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="classTraitement__particulier__NS__canal__VDF.html#a303064aa6793860364f56c5124923dc0">00078</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#a303064aa6793860364f56c5124923dc0">Traitement_particulier_NS_canal_VDF::remplir_Y</a>(<a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; tab_Y,  <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; tab_compt, <span class="keywordtype">int</span>&amp; nNy)<span class="keyword"> const</span>
<a name="l00079"></a>00079 <span class="keyword"></span>{
<a name="l00080"></a>00080 <span class="comment">// On va initialiser les differents parametres membres de la classe</span>
<a name="l00081"></a>00081 <span class="comment">// utiles au calcul des differentes moyennes</span>
<a name="l00082"></a>00082 <span class="comment">// Initialisation de : Y, compt</span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdisbase = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00085"></a>00085   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zone_VF = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, zdisbase);
<a name="l00086"></a>00086   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xp = zone_VF.<a class="code" href="classZone__VF.html#a87a29f0223c71256a25ee343c9277599">xp</a>();
<a name="l00087"></a>00087   <span class="keywordtype">int</span> nb_elems = zone_VF.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00088"></a>00088   <span class="keywordtype">int</span> num_elem,j,indic,trouve;
<a name="l00089"></a>00089   <span class="keywordtype">double</span> y;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091   j=0;
<a name="l00092"></a>00092   indic = 0;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094   tab_Y.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1);
<a name="l00095"></a>00095   tab_compt.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(1);
<a name="l00096"></a>00096   tab_Y = -100.;
<a name="l00097"></a>00097   tab_compt = 0;
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="comment">// Remplissage du tableau Y</span>
<a name="l00100"></a>00100 <span class="comment">//</span>
<a name="l00101"></a>00101 
<a name="l00102"></a>00102   <span class="keywordflow">for</span> (num_elem=0; num_elem&lt;nb_elems; num_elem++)
<a name="l00103"></a>00103     {
<a name="l00104"></a>00104       y = xp(num_elem,1);
<a name="l00105"></a>00105       trouve = 0;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107       <span class="keywordflow">for</span> (j=0; j&lt;indic+1; j++)
<a name="l00108"></a>00108         {
<a name="l00109"></a>00109           <span class="keywordflow">if</span>(<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(y,tab_Y[j]))
<a name="l00110"></a>00110             {
<a name="l00111"></a>00111               tab_compt[j] ++;
<a name="l00112"></a>00112               j=indic+1;
<a name="l00113"></a>00113               trouve = 1;
<a name="l00114"></a>00114               <span class="keywordflow">break</span>;
<a name="l00115"></a>00115             }
<a name="l00116"></a>00116         }
<a name="l00117"></a>00117       <span class="keywordflow">if</span> (trouve==0)
<a name="l00118"></a>00118         {
<a name="l00119"></a>00119           tab_Y[indic]=y;
<a name="l00120"></a>00120           tab_compt[indic] ++;
<a name="l00121"></a>00121           indic++;
<a name="l00122"></a>00122 
<a name="l00123"></a>00123           tab_Y.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(indic+1);
<a name="l00124"></a>00124           tab_Y(indic)=-100.;
<a name="l00125"></a>00125           tab_compt.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(indic+1);
<a name="l00126"></a>00126         }
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00129"></a>00129   nNy = indic;
<a name="l00130"></a>00130 
<a name="l00131"></a>00131   tab_Y.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nNy);
<a name="l00132"></a>00132   tab_compt.<a class="code" href="classDoubleVect.html#ac55a86eea7b2f06b084b88b16042b67b" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nNy);
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="comment">// Ajout F.A 15/02/11 on va faire un changement,</span>
<a name="l00136"></a>00136 <span class="comment">// l&#39;objectif est de reunir des operations faites et refaite pour profiter pleinement de l&#39;espace memoire (boucles)</span>
<a name="l00137"></a>00137 <span class="comment">// par la creation d&#39;un tableau de grande taille (+/- 7M par proc mais qui ne s&#39;echange pas)</span>
<a name="l00138"></a>00138 <span class="comment">// le tableau aura la structure suivant : La ligne est le numero de l&#39;elemennt</span>
<a name="l00139"></a>00139 <span class="comment">// numero de l&#39;element au dessus, numero de l&#39;element au dessous,position dans le vecteur Y.</span>
<a name="l00140"></a>00140 <span class="comment">// soit un tableau de nelem x 3.</span>
<a name="l00141"></a>00141 <span class="comment">// pour cela apres remplir_Y on va appeller la fonction qui fais les differenent calculs,</span>
<a name="l00142"></a>00142 <span class="comment">// en utilisant le tableau comme argument de la fonction.</span>
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="classTraitement__particulier__NS__canal__VDF.html#accea6afb283f06322cecca47f4e5d5e5">00144</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#accea6afb283f06322cecca47f4e5d5e5">Traitement_particulier_NS_canal_VDF::remplir_Tab_recap</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; Tab_rec)<span class="keyword"> const</span>
<a name="l00145"></a>00145 <span class="keyword"></span>{
<a name="l00146"></a>00146   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdisbase=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00147"></a>00147   <span class="keyword">const</span> <a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>&amp; zone_VDF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>, zdisbase);
<a name="l00148"></a>00148   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xp = zone_VDF.<a class="code" href="classZone__VF.html#a87a29f0223c71256a25ee343c9277599">xp</a>();
<a name="l00149"></a>00149   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = zone_VDF.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00150"></a>00150 
<a name="l00151"></a>00151   <span class="keywordtype">int</span> face; <span class="comment">//recepteur des faces</span>
<a name="l00152"></a>00152   <span class="keywordtype">int</span> elem_test,elem_test2; <span class="comment">//!&lt; element de test pour les ficitfs</span>
<a name="l00153"></a>00153 <span class="comment"></span>  <span class="keywordtype">int</span> nb_elem_tot = zone_VDF.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#aa3a33e8b723618b9092460007153e42d" title="Renvoie le nombre total d&#39;elements de la zone.">nb_elem_tot</a>(); <span class="comment">//!&lt; nombre total d&#39;elements (reel + fict)</span>
<a name="l00154"></a>00154 <span class="comment"></span>  <span class="keywordtype">int</span> nb_elems = zone_VDF.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00155"></a>00155 
<a name="l00156"></a>00156   <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> trouve(1);<span class="comment">//!&lt; tableau des elements deja effectue</span>
<a name="l00157"></a>00157 <span class="comment"></span>  <span class="keywordtype">double</span> y=0;
<a name="l00158"></a>00158   <span class="keywordtype">int</span> i,num_elem; <span class="comment">//!&lt; compteurs</span>
<a name="l00159"></a>00159 <span class="comment"></span>  <span class="keywordtype">int</span> q=1; <span class="comment">//Curseur pour les tableau haut</span>
<a name="l00160"></a>00160   trouve[0]=0;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 
<a name="l00163"></a>00163   Tab_rec.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(nb_elems,3); <span class="comment">//!&lt; On dimenssione le tableau.</span>
<a name="l00164"></a>00164 <span class="comment"></span>
<a name="l00165"></a>00165   <span class="keywordflow">for</span> (num_elem=nb_elems; num_elem&lt;nb_elem_tot; num_elem++) <span class="comment">//!&lt; boucle sur les elements fictifs</span>
<a name="l00166"></a>00166 <span class="comment"></span>    {
<a name="l00167"></a>00167       face = elem_faces(num_elem,1+<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00168"></a>00168       elem_test=zone_VDF.<a class="code" href="classZone__VDF.html#ae5f5e9a891e45879378b613ef0a315f9">elem_voisin</a>(num_elem,face,0);
<a name="l00169"></a>00169       face = elem_faces(num_elem,1);
<a name="l00170"></a>00170       elem_test2=zone_VDF.<a class="code" href="classZone__VDF.html#ae5f5e9a891e45879378b613ef0a315f9">elem_voisin</a>(num_elem,face,1);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172       <span class="keywordflow">if</span> ((elem_test&gt;0) &amp;&amp; (elem_test&lt;nb_elems)) <span class="comment">//!&lt; si l&#39;element en dessus est un element reel alors</span>
<a name="l00173"></a>00173 <span class="comment"></span>        {
<a name="l00174"></a>00174           trouve[q-1]=elem_test;
<a name="l00175"></a>00175           q =q +1;
<a name="l00176"></a>00176           trouve.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(q);
<a name="l00177"></a>00177 
<a name="l00178"></a>00178           Tab_rec(elem_test,0)=num_elem; <span class="comment">//!&lt; on affecte la meme valeur aux deux case haut et bas</span>
<a name="l00179"></a>00179 <span class="comment"></span>          Tab_rec(elem_test,1)=num_elem; <span class="comment">//ainsi la fonction qui calcul les valeurs voie un element normal.</span>
<a name="l00180"></a>00180 
<a name="l00181"></a>00181           y=xp(elem_test,1);
<a name="l00182"></a>00182           <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#af2aa8fb7ba7f2098eed13ec4a063d024">Ny</a>; i++)
<a name="l00183"></a>00183             {
<a name="l00184"></a>00184               <span class="keywordflow">if</span>(<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(y,<a class="code" href="classTraitement__particulier__NS__canal.html#acdd101ab13e27f8aa4a9c5473a10abe6">Y</a>[i]))
<a name="l00185"></a>00185                 <span class="keywordflow">break</span>;
<a name="l00186"></a>00186             }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188           Tab_rec(elem_test,2)=i; <span class="comment">//!&lt; on garde la valeur de i pour ne pas reefectuer la boucle a chaque pas de temps.</span>
<a name="l00189"></a>00189 <span class="comment"></span>        }
<a name="l00190"></a>00190       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((elem_test2&lt;nb_elems)&amp;&amp;(elem_test2&gt;0)) <span class="comment">//sinon si l&#39;element en dessous est un element reel alors</span>
<a name="l00191"></a>00191         {
<a name="l00192"></a>00192           trouve[q-1]=elem_test2;
<a name="l00193"></a>00193           q =q +1;
<a name="l00194"></a>00194           trouve.<a class="code" href="classIntTab.html#a22e6bed6826b3688d4d0181cbf3b7a38" title="Change la taille du vecteur (identique a resize_array() pour le traitement des anciennes valeurs et d...">resize</a>(q);
<a name="l00195"></a>00195 
<a name="l00196"></a>00196           Tab_rec(elem_test2,0)=num_elem; <span class="comment">//!&lt; on affecte la meme valeur aux deux case haut et bas</span>
<a name="l00197"></a>00197 <span class="comment"></span>          Tab_rec(elem_test2,1)=num_elem; <span class="comment">//ainsi la fonction qui calcul les valeurs voie un element normal.</span>
<a name="l00198"></a>00198 
<a name="l00199"></a>00199           y=xp(elem_test2,1);
<a name="l00200"></a>00200           <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#af2aa8fb7ba7f2098eed13ec4a063d024">Ny</a>; i++)
<a name="l00201"></a>00201             {
<a name="l00202"></a>00202               <span class="keywordflow">if</span>(<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(y,<a class="code" href="classTraitement__particulier__NS__canal.html#acdd101ab13e27f8aa4a9c5473a10abe6">Y</a>[i]))
<a name="l00203"></a>00203                 <span class="keywordflow">break</span>;
<a name="l00204"></a>00204             }
<a name="l00205"></a>00205           Tab_rec(elem_test2,2)=i; <span class="comment">//!&lt; on garde la valeur de i pour ne pas reefectuer la boucle a chaque pas de temps.</span>
<a name="l00206"></a>00206 <span class="comment"></span>
<a name="l00207"></a>00207         }
<a name="l00208"></a>00208 <span class="comment">// sinon rien</span>
<a name="l00209"></a>00209     }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Traitement particulier canal : Il y a une amelioration a apporter aux face de bord !! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00212"></a>00212   <span class="keywordflow">for</span> (num_elem=0; num_elem&lt;nb_elems; num_elem++)
<a name="l00213"></a>00213     {
<a name="l00214"></a>00214       q=0;<span class="comment">//!&lt; on utilise le compteur q qui ne nous sert plus pour verifier si on a trouver un equivalent.</span>
<a name="l00215"></a>00215 <span class="comment"></span>      <span class="keywordflow">for</span>(i=0; i&lt;(trouve.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>()-1); i++) <span class="comment">//!&lt; trouve est une case trop grand, mais plutot que de le redimentionner on utilise le critere taille -1</span>
<a name="l00216"></a>00216 <span class="comment"></span>        <span class="keywordflow">if</span>(num_elem==trouve[i])
<a name="l00217"></a>00217           {
<a name="l00218"></a>00218             q = 0;  <span class="comment">//!&lt; on met fixe q qui ne peu repondre au prochain test. // correction on fixe q =0 car c&#39;etais un faux probleme.</span>
<a name="l00219"></a>00219 <span class="comment"></span>            <span class="keywordflow">break</span>;
<a name="l00220"></a>00220           }
<a name="l00221"></a>00221 <span class="comment">// en realite lambda explose a l&#39;interface.</span>
<a name="l00222"></a>00222       <span class="keywordflow">if</span>(q==0) <span class="comment">//</span>
<a name="l00223"></a>00223         {
<a name="l00224"></a>00224           face=elem_faces(num_elem,1); <span class="comment">//face inferieure</span>
<a name="l00225"></a>00225           elem_test=zone_VDF.<a class="code" href="classZone__VDF.html#ae5f5e9a891e45879378b613ef0a315f9">elem_voisin</a>(num_elem,face,1);
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228           <span class="keywordflow">if</span> (elem_test+1)
<a name="l00229"></a>00229             {
<a name="l00230"></a>00230               Tab_rec(num_elem,1)=elem_test; <span class="comment">//!&lt; faux si elem_test=-1 sinon remplit avec l&#39;element en dessous</span>
<a name="l00231"></a>00231 <span class="comment"></span>            }
<a name="l00232"></a>00232           <span class="keywordflow">else</span>
<a name="l00233"></a>00233             {
<a name="l00234"></a>00234               Tab_rec(num_elem,1)=zone_VDF.<a class="code" href="classZone__VDF.html#ae5f5e9a891e45879378b613ef0a315f9">elem_voisin</a>(num_elem,elem_faces(num_elem,1+<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>),0); <span class="comment">//!&lt; on le traite alors comme un virtuel</span>
<a name="l00235"></a>00235 <span class="comment"></span>            }
<a name="l00236"></a>00236 
<a name="l00237"></a>00237           face= elem_faces(num_elem,1+<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>); <span class="comment">//face superieure</span>
<a name="l00238"></a>00238           elem_test=zone_VDF.<a class="code" href="classZone__VDF.html#ae5f5e9a891e45879378b613ef0a315f9">elem_voisin</a>(num_elem,face,0);
<a name="l00239"></a>00239 
<a name="l00240"></a>00240           <span class="keywordflow">if</span> (elem_test+1)
<a name="l00241"></a>00241             {
<a name="l00242"></a>00242               Tab_rec(num_elem,0)=elem_test; <span class="comment">//!&lt; faux si elem_test=-1 sinon remplit avec l&#39;element au dessus</span>
<a name="l00243"></a>00243 <span class="comment"></span>            }
<a name="l00244"></a>00244           <span class="keywordflow">else</span>
<a name="l00245"></a>00245             {
<a name="l00246"></a>00246               Tab_rec(num_elem,0)=zone_VDF.<a class="code" href="classZone__VDF.html#ae5f5e9a891e45879378b613ef0a315f9">elem_voisin</a>(num_elem,elem_faces(num_elem,1),1); <span class="comment">//!&lt; on le traite alors comme un virtuel</span>
<a name="l00247"></a>00247 <span class="comment"></span>            }
<a name="l00248"></a>00248 
<a name="l00249"></a>00249           y = xp(num_elem,1);
<a name="l00250"></a>00250           <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="classTraitement__particulier__NS__canal.html#af2aa8fb7ba7f2098eed13ec4a063d024">Ny</a>; i++)
<a name="l00251"></a>00251             <span class="keywordflow">if</span>(<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(y,<a class="code" href="classTraitement__particulier__NS__canal.html#acdd101ab13e27f8aa4a9c5473a10abe6">Y</a>[i])) <span class="keywordflow">break</span>;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253           Tab_rec(num_elem,2)=i;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255         }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00260"></a><a class="code" href="classTraitement__particulier__NS__canal__VDF.html#add375dc6eddf280190458b2827f0fd3d">00260</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#add375dc6eddf280190458b2827f0fd3d">Traitement_particulier_NS_canal_VDF::calculer_moyenne_spatiale_vitesse_rho_mu</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_moy)<span class="keyword"> const</span>
<a name="l00261"></a>00261 <span class="keyword"></span>{
<a name="l00262"></a>00262   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdisbase=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00263"></a>00263   <span class="keyword">const</span> <a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>&amp; zone_VDF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>, zdisbase);
<a name="l00264"></a>00264 <span class="comment">// const DoubleTab&amp; xp = zone_VDF.xp();</span>
<a name="l00265"></a>00265   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = zone_VDF.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00266"></a>00266   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vitesse = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().valeurs();
<a name="l00267"></a>00267   <span class="keywordtype">double</span> u,v,wl;
<a name="l00268"></a>00268   <span class="keywordtype">int</span> nb_elems = zone_VDF.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00269"></a>00269   <span class="keywordtype">int</span> num_elem,i;
<a name="l00270"></a>00270   <span class="keywordtype">int</span> face_x_0,face_y_0,face_y_1,face_z_0;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272   <span class="keyword">const</span> <a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>&amp; le_fluide = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classFluide__base.html" title="classe Fluide_base Cette classe represente un d&#39;un fluide incompressible ainsi que ses proprietes: - ...">Fluide_base</a>,<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;milieu());
<a name="l00273"></a>00273   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; visco_dyn = le_fluide.<a class="code" href="classFluide__base.html#ae9d2bcde48c733b8b7652a32c6a80e49" title="Renvoie la viscosite dynamique, mu. (version const)">viscosite_dynamique</a>();
<a name="l00274"></a>00274   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab_rho_elem = le_fluide.<a class="code" href="classMilieu__base.html#a46a9a4bfb046ed22d0f267b6c052889f" title="Renvoie la masse volumique du milieu. (version const)">masse_volumique</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00275"></a>00275   <span class="keywordtype">int</span> taille_mu=visco_dyn.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00276"></a>00276   <span class="keywordtype">int</span> taille_rho=tab_rho_elem.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(0);
<a name="l00277"></a>00277 
<a name="l00278"></a>00278   <span class="keywordflow">for</span> (num_elem=0; num_elem&lt;nb_elems; num_elem++)
<a name="l00279"></a>00279     {
<a name="l00280"></a>00280 <span class="comment">// y=xp(num_elem,1);</span>
<a name="l00281"></a>00281 
<a name="l00282"></a>00282       face_x_0 = elem_faces(num_elem,0);
<a name="l00283"></a>00283 <span class="comment">// face_x_1 = elem_faces(num_elem,dimension);</span>
<a name="l00284"></a>00284       face_y_0 = elem_faces(num_elem,1);
<a name="l00285"></a>00285       face_y_1 = elem_faces(num_elem,1+<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287 <span class="comment">// PQ : 12/10 : pour eviter de moyenner localement la vitesse u et w</span>
<a name="l00288"></a>00288 <span class="comment">// on fait le choix de &quot;deplacer&quot; celles-ci</span>
<a name="l00289"></a>00289 <span class="comment">// du centre de la face au centre de l&#39;element</span>
<a name="l00290"></a>00290 <span class="comment">// en se basant sur le principe que l&#39;ecoulement est homogene</span>
<a name="l00291"></a>00291 <span class="comment">// suivant les plans xz</span>
<a name="l00292"></a>00292 <span class="comment">// Pour v, la moyenne s&#39;impose si l&#39;on veut revenir au centre des elements</span>
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="comment">// u = .5*(vitesse[face_x_0]+vitesse[face_x_1]);</span>
<a name="l00295"></a>00295       u = vitesse[face_x_0];
<a name="l00296"></a>00296       v = .5*(vitesse[face_y_0]+vitesse[face_y_1]);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298       i= <a class="code" href="classTraitement__particulier__NS__canal.html#a5262d8b05922271b91ce8fec60e919ff">Tab_recap</a>(num_elem,2);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300       val_moy(i,0) += u;
<a name="l00301"></a>00301       val_moy(i,1) += v;
<a name="l00302"></a>00302       val_moy(i,3) += u*u;
<a name="l00303"></a>00303       val_moy(i,4) += v*v;
<a name="l00304"></a>00304       val_moy(i,6) += u*v;
<a name="l00305"></a>00305 
<a name="l00306"></a>00306       <span class="keywordflow">if</span>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==2)   val_moy(i,9) += sqrt(u*u);      <span class="comment">//vitesse tangentielle pour calcul du frottement</span>
<a name="l00307"></a>00307 
<a name="l00308"></a>00308       <span class="keywordflow">if</span>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l00309"></a>00309         {
<a name="l00310"></a>00310           face_z_0 = elem_faces(num_elem,2);
<a name="l00311"></a>00311 <span class="comment">// face_z_1 = elem_faces(num_elem,2+dimension);</span>
<a name="l00312"></a>00312 
<a name="l00313"></a>00313 <span class="comment">// w = .5*(vitesse[face_z_0]+vitesse[face_z_1]);</span>
<a name="l00314"></a>00314           wl = vitesse[face_z_0];
<a name="l00315"></a>00315 
<a name="l00316"></a>00316           val_moy(i,2) += wl;
<a name="l00317"></a>00317           val_moy(i,5) += wl*wl;
<a name="l00318"></a>00318           val_moy(i,7) += u*wl;
<a name="l00319"></a>00319           val_moy(i,8) += v*wl;
<a name="l00320"></a>00320           val_moy(i,9) += sqrt(u*u+wl*wl);      <span class="comment">//vitesse tangentielle pour calcul du frottement</span>
<a name="l00321"></a>00321         }
<a name="l00322"></a>00322 
<a name="l00323"></a>00323       <span class="keywordflow">if</span> (taille_rho==1)  val_moy(i,10) += tab_rho_elem(0,0);
<a name="l00324"></a>00324       <span class="keywordflow">else</span>                val_moy(i,10) += tab_rho_elem[num_elem];
<a name="l00325"></a>00325 
<a name="l00326"></a>00326 
<a name="l00327"></a>00327       <span class="keywordflow">if</span> (taille_mu==1)   val_moy(i,11) += visco_dyn(0,0);
<a name="l00328"></a>00328       <span class="keywordflow">else</span>                val_moy(i,11) += visco_dyn[num_elem];
<a name="l00329"></a>00329     }
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="classTraitement__particulier__NS__canal__VDF.html#ad6458b810a8773eeea44e7d6ce5fd08d">00332</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#ad6458b810a8773eeea44e7d6ce5fd08d">Traitement_particulier_NS_canal_VDF::calculer_moyenne_spatiale_nut</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_moy)<span class="keyword"> const</span>
<a name="l00333"></a>00333 <span class="keyword"></span>{
<a name="l00334"></a>00334   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdisbase=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00335"></a>00335   <span class="keyword">const</span> <a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>&amp; zone_VDF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>, zdisbase);
<a name="l00336"></a>00336 <span class="comment">// const DoubleTab&amp; xp = zone_VDF.xp();</span>
<a name="l00337"></a>00337   <span class="keyword">const</span> <a class="code" href="classRef__Objet__U.html">RefObjU</a>&amp; modele_turbulence = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>.<a class="code" href="classRef__Navier__Stokes__std.html#a7cb24862c019165f3841afc64fe94c81">valeur</a>().<a class="code" href="classEquation__base.html#ab0bb5d06bdc91e131dc9d5f9d7b57095">get_modele</a>(<a class="code" href="Equation__base_8h.html#a2c9d34b2cc47e5b2b18347de20a77db5a0fecbd75e0b8b4c37ffd696e173a14c7">TURBULENCE</a>);
<a name="l00338"></a>00338   <span class="keyword">const</span> <a class="code" href="classMod__turb__hyd__base.html" title="Classe Mod_turb_hyd_base Cette classe sert de base a la hierarchie des classes qui representent un mo...">Mod_turb_hyd_base</a>&amp; mod_turb = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classMod__turb__hyd__base.html" title="Classe Mod_turb_hyd_base Cette classe sert de base a la hierarchie des classes qui representent un mo...">Mod_turb_hyd_base</a>,modele_turbulence.<a class="code" href="classRef__Objet__U.html#ad875112c0fd275aa0c0aa710481ab11e">valeur</a>());
<a name="l00339"></a>00339   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; nu_t = mod_turb.<a class="code" href="classMod__turb__hyd__base.html#a10bc51357037ef84800c74ed5e3302d0" title="Renvoie la viscosite turbulente.">viscosite_turbulente</a>()-&gt;<a class="code" href="classChamp__Fonc.html#a60b75eadb0987d488884e24fcb72d1e5" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>();
<a name="l00340"></a>00340 
<a name="l00341"></a>00341   <span class="keywordtype">int</span> nb_elems = zone_VDF.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00342"></a>00342   <span class="keywordtype">int</span> num_elem,i;
<a name="l00343"></a>00343 <span class="comment">// double y;</span>
<a name="l00344"></a>00344 
<a name="l00345"></a>00345   <span class="keywordflow">for</span> (num_elem=0; num_elem&lt;nb_elems; num_elem++)
<a name="l00346"></a>00346     {
<a name="l00347"></a>00347 <span class="comment">// y=xp(num_elem,1);</span>
<a name="l00348"></a>00348 
<a name="l00349"></a>00349       i= <a class="code" href="classTraitement__particulier__NS__canal.html#a5262d8b05922271b91ce8fec60e919ff">Tab_recap</a>(num_elem,2);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351       val_moy(i,12) += nu_t[num_elem];
<a name="l00352"></a>00352     }
<a name="l00353"></a>00353 }
<a name="l00354"></a>00354 
<a name="l00355"></a><a class="code" href="classTraitement__particulier__NS__canal__VDF.html#afd72939b382f84fa7ec69233e4ad26c4">00355</a> <span class="keywordtype">void</span> <a class="code" href="classTraitement__particulier__NS__canal__VDF.html#afd72939b382f84fa7ec69233e4ad26c4">Traitement_particulier_NS_canal_VDF::calculer_moyenne_spatiale_Temp</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; val_moy)<span class="keyword"> const</span>
<a name="l00356"></a>00356 <span class="keyword"></span>{
<a name="l00357"></a>00357   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zdisbase=<a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().zone_dis_base();
<a name="l00358"></a>00358   <span class="keyword">const</span> <a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>&amp; zone_VDF=<a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VDF.html" title="class Zone_VDF Classe instanciable qui derive de Zone_VF. Cette classe contient les informations geom...">Zone_VDF</a>, zdisbase);
<a name="l00359"></a>00359 <span class="comment">// const DoubleTab&amp; xp = zone_VDF.xp();</span>
<a name="l00360"></a>00360   <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; elem_faces = zone_VDF.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00361"></a>00361   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; temperature = <a class="code" href="classTraitement__particulier__NS__canal.html#ae70d0037644f9ea8145977f97633f515">Temp</a>.<a class="code" href="classRef__Champ__base.html#a0cda53fe61d4f24bc8861720d525b32a">valeur</a>().<a class="code" href="classChamp__Proto.html#a9d8c69f11d1b0a8e378cc6ca41793614">valeurs</a>();
<a name="l00362"></a>00362   <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; vitesse = <a class="code" href="classTraitement__particulier__NS__base.html#a82ae9a6fa79c277da3c8d7fd5c6d41e7">mon_equation</a>-&gt;inconnue().valeurs();
<a name="l00363"></a>00363   <span class="keywordtype">double</span> u,v,wl,T;
<a name="l00364"></a>00364   <span class="keywordtype">int</span> nb_elems = zone_VDF.<a class="code" href="classZone__dis__base.html#a0bb3a4512e111f91fa2c352de44653a4" title="Renvoie la Zone associee a l&#39;objet. (version const)">zone</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00365"></a>00365   <span class="keywordtype">int</span> num_elem,i;
<a name="l00366"></a>00366   <span class="keywordtype">int</span> face_x_0,face_x_1,face_y_0,face_y_1,face_z_0,face_z_1;
<a name="l00367"></a>00367 
<a name="l00368"></a>00368   <span class="keywordflow">for</span> (num_elem=0; num_elem&lt;nb_elems; num_elem++)
<a name="l00369"></a>00369     {
<a name="l00370"></a>00370 <span class="comment">// y=xp(num_elem,1);</span>
<a name="l00371"></a>00371 
<a name="l00372"></a>00372       T = temperature[num_elem];
<a name="l00373"></a>00373 
<a name="l00374"></a>00374       face_x_0 = elem_faces(num_elem,0);
<a name="l00375"></a>00375       face_x_1 = elem_faces(num_elem,<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00376"></a>00376       face_y_0 = elem_faces(num_elem,1);
<a name="l00377"></a>00377       face_y_1 = elem_faces(num_elem,1+<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00378"></a>00378 
<a name="l00379"></a>00379       u = .5*(vitesse[face_x_0]+vitesse[face_x_1]);
<a name="l00380"></a>00380       v = .5*(vitesse[face_y_0]+vitesse[face_y_1]);
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 
<a name="l00383"></a>00383       i=<a class="code" href="classTraitement__particulier__NS__canal.html#a5262d8b05922271b91ce8fec60e919ff">Tab_recap</a>(num_elem,2);
<a name="l00384"></a>00384 <span class="comment">// for (i=0; i&lt;Ny; i++)     if(est_egal(y,Y[i])) break;</span>
<a name="l00385"></a>00385 
<a name="l00386"></a>00386       val_moy(i,13) += T;
<a name="l00387"></a>00387       val_moy(i,14) += T*T;
<a name="l00388"></a>00388       val_moy(i,15) += u*T;
<a name="l00389"></a>00389       val_moy(i,16) += v*T;
<a name="l00390"></a>00390 
<a name="l00391"></a>00391       <span class="keywordflow">if</span>(<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>==3)
<a name="l00392"></a>00392         {
<a name="l00393"></a>00393           face_z_0 = elem_faces(num_elem,2);
<a name="l00394"></a>00394           face_z_1 = elem_faces(num_elem,2+<a class="code" href="classObjet__U.html#a3e23491c01f2f39245fb6f3b6d6d9b17">dimension</a>);
<a name="l00395"></a>00395 
<a name="l00396"></a>00396           wl = .5*(vitesse[face_z_0]+vitesse[face_z_1]);
<a name="l00397"></a>00397 
<a name="l00398"></a>00398           val_moy(i,17) += wl*T;
<a name="l00399"></a>00399         }
<a name="l00400"></a>00400     }
<a name="l00401"></a>00401 }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:41 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
