<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/ThHyd/Modele_turbulence_base/Mod_turb_hyd_base.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/ThHyd/Modele_turbulence_base/Mod_turb_hyd_base.cpp</div>  </div>
</div>
<div class="contents">
<a href="Mod__turb__hyd__base_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Mod_turb_hyd_base.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/ThHyd/Modele_turbulence_base</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/54</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Mod__turb__hyd__base_8h.html">Mod_turb_hyd_base.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Equation__base_8h.html">Equation_base.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="Schema__Temps__base_8h.html">Schema_Temps_base.h</a>&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Discretisation__base_8h.html">Discretisation_base.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="EcritureLectureSpecial_8h.html">EcritureLectureSpecial.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Operateur__Diff__base_8h.html">Operateur_Diff_base.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Operateur__Conv__base_8h.html">Operateur_Conv_base.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Operateur_8h.html">Operateur.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="Debog_8h.html">Debog.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="EcrFicPartage_8h.html">EcrFicPartage.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="Mod__turb__hyd__base_8cpp.html#a4de6aa2369fe2b3650f9efa686174e3a">00039</a> <a class="code" href="Declare__Base_8h.html#a279604f97959498f17b67e986dfd4486">Implemente_base_sans_constructeur</a>(<a class="code" href="classMod__turb__hyd__base.html" title="Classe Mod_turb_hyd_base Cette classe sert de base a la hierarchie des classes qui representent un mo...">Mod_turb_hyd_base</a>,<span class="stringliteral">&quot;Mod_turb_hyd_base&quot;</span>,<a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">// Precondition:</span>
<a name="l00042"></a>00042 <span class="comment">// Parametre: Sortie&amp; s</span>
<a name="l00043"></a>00043 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00044"></a>00044 <span class="comment">// Valeurs par defaut:</span>
<a name="l00045"></a>00045 <span class="comment">// Contraintes:</span>
<a name="l00046"></a>00046 <span class="comment">// Acces: entree/sortie</span>
<a name="l00047"></a>00047 <span class="comment">// Exception:</span>
<a name="l00048"></a>00048 <span class="comment">// Effets de bord:</span>
<a name="l00049"></a>00049 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00050"></a>00050 <span class="comment">//</span><span class="comment"></span>
<a name="l00051"></a>00051 <span class="comment">//! Ecrit le type et le nom de l&#39;objet sur un flot de sortie</span>
<a name="l00052"></a>00052 <span class="comment"></span><span class="comment">/** \return Sortie\&amp;&lt;br&gt;</span>
<a name="l00053"></a>00053 <span class="comment">Signification: le flot de sortie modifie&lt;br&gt;</span>
<a name="l00054"></a>00054 <span class="comment">Contraintes: */</span>
<a name="l00055"></a><a class="code" href="classMod__turb__hyd__base.html#a88915f2f9d14763c0b6c876875ddb380">00055</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classMod__turb__hyd__base.html#a88915f2f9d14763c0b6c876875ddb380" title="Ecrit le type et le nom de l&#39;objet sur un flot de sortie.">Mod_turb_hyd_base::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; s )<span class="keyword"> const</span>
<a name="l00056"></a>00056 <span class="keyword"></span>{
<a name="l00057"></a>00057   <span class="keywordflow">return</span> s &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#a70413a8785d36bf5105fced1c89d0d2b" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>();
<a name="l00058"></a>00058 }
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">// Precondition:</span>
<a name="l00062"></a>00062 <span class="comment">// Parametre: Entree&amp; is</span>
<a name="l00063"></a>00063 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00064"></a>00064 <span class="comment">// Valeurs par defaut:</span>
<a name="l00065"></a>00065 <span class="comment">// Contraintes:</span>
<a name="l00066"></a>00066 <span class="comment">// Acces: entree/sortie</span>
<a name="l00067"></a>00067 <span class="comment">// Exception: accolade ouvrante attendue</span>
<a name="l00068"></a>00068 <span class="comment">// Exception: loi de paroi incompatible avec le probleme</span>
<a name="l00069"></a>00069 <span class="comment">// Effets de bord:</span>
<a name="l00070"></a>00070 <span class="comment">// Postcondition:</span>
<a name="l00071"></a>00071 <span class="comment">//</span>
<a name="l00072"></a>00072 <span class="comment">//</span>
<a name="l00073"></a>00073 <span class="comment">//</span>
<a name="l00074"></a>00074 <span class="comment">//</span>
<a name="l00075"></a>00075 <span class="comment">//</span>
<a name="l00076"></a>00076 <span class="comment">//</span>
<a name="l00077"></a>00077 <span class="comment">//</span>
<a name="l00078"></a>00078 <span class="comment">//</span><span class="comment"></span>
<a name="l00079"></a>00079 <span class="comment">//! Lit les specifications d&#39;un modele de turbulence&lt;br&gt;a partir d&#39;un flot d&#39;entree.&lt;br&gt;Format:&lt;br&gt;Modele_turbulence type_modele&lt;br&gt;{&lt;br&gt;[Turbulence_paroi la_loi_de_paroi]&lt;br&gt;bloc de lecture specifique du type de turbulence&lt;br&gt;}</span>
<a name="l00080"></a>00080 <span class="comment"></span><span class="comment">/** \return Entree\&amp;&lt;br&gt;</span>
<a name="l00081"></a>00081 <span class="comment">Signification: le flot d&#39;entree modifie&lt;br&gt;</span>
<a name="l00082"></a>00082 <span class="comment">Contraintes: */</span>
<a name="l00083"></a><a class="code" href="classMod__turb__hyd__base.html#a98c4731f7637cb4e9fab8798b12110a8">00083</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classMod__turb__hyd__base.html#a98c4731f7637cb4e9fab8798b12110a8" title="Lit les specifications d&#39;un modele de turbulence a partir d&#39;un flot d&#39;entree. Format: Modele_turbulen...">Mod_turb_hyd_base::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Reading of data for a &quot;</span>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<span class="stringliteral">&quot; hydraulic turbulence model&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00086"></a>00086   <a class="code" href="classParam.html" title="Defined below in this file.">Param</a> param(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00087"></a>00087   <a class="code" href="classMod__turb__hyd__base.html#a0aaf4791ffb74de8ff8058e7ab3c7c0a">set_param</a>(param);
<a name="l00088"></a>00088   param.<a class="code" href="classParam.html#aa9d44fc51b4a08b357733a97dc7acaad" title="Read the is input with the parameters (defined with the Param object) inside: { ... } Example, to read: { a 1 b 2 } Param param(que_suis_je()); int a,b; param.ajouter(&quot;a&quot;,&amp;a); param.ajouter(&quot;b&quot;,&amp;b); param.lire_avec_accolades_depuis(is);.">lire_avec_accolades_depuis</a>(is);
<a name="l00089"></a>00089 <span class="comment">// Verifications</span>
<a name="l00090"></a>00090 <span class="comment">// Cas ou Correction_visco_turb_pour_controle_pas_de_temps_parametre est lu sans Correction_visco_turb_pour_controle_pas_de_temps</span>
<a name="l00091"></a>00091   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#ae635e7c4caad7f8967fa332c82122d76">dt_diff_sur_dt_conv_</a>!=-1)
<a name="l00092"></a>00092     <a class="code" href="classMod__turb__hyd__base.html#a4a4da011e96afb7c978c5bb58bbda26c">calcul_borne_locale_visco_turb_</a>=1;
<a name="l00093"></a>00093 <span class="comment">// Cas ou Correction_visco_turb_pour_controle_pas_de_temps sans Correction_visco_turb_pour_controle_pas_de_temps_parametre</span>
<a name="l00094"></a>00094   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a4a4da011e96afb7c978c5bb58bbda26c">calcul_borne_locale_visco_turb_</a>)
<a name="l00095"></a>00095     <a class="code" href="classMod__turb__hyd__base.html#ae635e7c4caad7f8967fa332c82122d76">dt_diff_sur_dt_conv_</a>=1;
<a name="l00096"></a>00096 <span class="comment">// Cas ou Correction_visco_turb_pour_controle_pas_de_temps_parametre est incorrectement fixe</span>
<a name="l00097"></a>00097   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#ae635e7c4caad7f8967fa332c82122d76">dt_diff_sur_dt_conv_</a>&lt;=0 &amp;&amp; <a class="code" href="classMod__turb__hyd__base.html#a4a4da011e96afb7c978c5bb58bbda26c">calcul_borne_locale_visco_turb_</a>)
<a name="l00098"></a>00098     {
<a name="l00099"></a>00099       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Parameter value Correction_visco_turb_pour_controle_pas_de_temps_parametre must be strictly positive.&quot;</span> &lt;&lt; finl;
<a name="l00100"></a>00100       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102   <span class="keywordflow">return</span> is;
<a name="l00103"></a>00103 }
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="classMod__turb__hyd__base.html#a0aaf4791ffb74de8ff8058e7ab3c7c0a">00105</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a0aaf4791ffb74de8ff8058e7ab3c7c0a">Mod_turb_hyd_base::set_param</a>(<a class="code" href="classParam.html" title="Defined below in this file.">Param</a>&amp; param)
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;turbulence_paroi&quot;</span>,(<span class="keyword">this</span>),<a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
<a name="l00108"></a>00108   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;dt_impr_ustar&quot;</span>,(<span class="keyword">this</span>));
<a name="l00109"></a>00109   param.<a class="code" href="classParam.html#a8d8bcddfd8087e577ffbb170c68e4f88">ajouter_non_std</a>(<span class="stringliteral">&quot;dt_impr_ustar_mean_only&quot;</span>,(<span class="keyword">this</span>));
<a name="l00110"></a>00110   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;nut_max&quot;</span>,&amp;<a class="code" href="classMod__turb__hyd__base.html#a35009f534e5190ea13e8aa2c27b49edc">XNUTM</a>);
<a name="l00111"></a>00111   param.<a class="code" href="classParam.html#ae3d50612a0014a9d58e6e035a65f20e5">ajouter_flag</a>(<span class="stringliteral">&quot;Correction_visco_turb_pour_controle_pas_de_temps&quot;</span>,&amp;<a class="code" href="classMod__turb__hyd__base.html#a4a4da011e96afb7c978c5bb58bbda26c">calcul_borne_locale_visco_turb_</a>);
<a name="l00112"></a>00112   param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;Correction_visco_turb_pour_controle_pas_de_temps_parametre&quot;</span>,&amp;<a class="code" href="classMod__turb__hyd__base.html#ae635e7c4caad7f8967fa332c82122d76">dt_diff_sur_dt_conv_</a>);
<a name="l00113"></a>00113 <span class="comment">// param.ajouter_condition(&quot;not(is_read_dt_impr_ustar_mean_only_and_is_read_dt_impr_ustar)&quot;,&quot;only one of dt_impr_ustar_mean_only and dt_impr_ustar can be used&quot;);</span>
<a name="l00114"></a>00114 }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 
<a name="l00117"></a><a class="code" href="classMod__turb__hyd__base.html#abfceaa35a8f370853289add443056711">00117</a> <span class="keywordtype">int</span> <a class="code" href="classMod__turb__hyd__base.html#abfceaa35a8f370853289add443056711" title="Lecture des parametres de type non simple d&#39;un objet_U a partir d&#39;un flot d&#39;entree.">Mod_turb_hyd_base::lire_motcle_non_standard</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; mot, <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00118"></a>00118 {
<a name="l00119"></a>00119   <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a> motlu;
<a name="l00120"></a>00120   <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;turbulence_paroi&quot;</span>)
<a name="l00121"></a>00121     {
<a name="l00122"></a>00122       <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classTurbulence__paroi.html#a18e8ccf0f480127dfa15af2be025d738" title="Associe un modele de turbulence a l&#39;objet.">associer_modele</a>(*<span class="keyword">this</span>);
<a name="l00123"></a>00123       is &gt;&gt; <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>;
<a name="l00124"></a>00124       is &gt;&gt; loipar.valeur();
<a name="l00125"></a>00125       <span class="keywordflow">return</span> 1;
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classDeriv__Turbulence__paroi__base.html#a1b9b427f98d020deb994533e07c381cb">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()!=<span class="stringliteral">&quot;negligeable_VDF&quot;</span> &amp;&amp; <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classDeriv__Turbulence__paroi__base.html#a1b9b427f98d020deb994533e07c381cb">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()!=<span class="stringliteral">&quot;negligeable_VEF&quot;</span> &amp;&amp; <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classDeriv__Turbulence__paroi__base.html#a1b9b427f98d020deb994533e07c381cb">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()!=<span class="stringliteral">&quot;negligeable_PolyMAC&quot;</span> &amp;&amp; <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classDeriv__Turbulence__paroi__base.html#a1b9b427f98d020deb994533e07c381cb">valeur</a>().<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()!=<span class="stringliteral">&quot;negligeable_CoviMAC&quot;</span>)
<a name="l00128"></a>00128     {
<a name="l00129"></a>00129       <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;dt_impr_ustar&quot;</span>)
<a name="l00130"></a>00130         {
<a name="l00131"></a>00131           is &gt;&gt;  <a class="code" href="classMod__turb__hyd__base.html#a15ded52bfbd6d901308639d0748465e4">dt_impr_ustar</a>;
<a name="l00132"></a>00132         }
<a name="l00133"></a>00133       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mot==<span class="stringliteral">&quot;dt_impr_ustar_mean_only&quot;</span>)
<a name="l00134"></a>00134         {
<a name="l00135"></a>00135           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> accolade_ouverte=<span class="stringliteral">&quot;{&quot;</span>;
<a name="l00136"></a>00136           <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> accolade_fermee=<span class="stringliteral">&quot;}&quot;</span>;
<a name="l00137"></a>00137           <a class="code" href="classMod__turb__hyd__base.html#a7152de029d8be962de32da9d0958922d">nom_fichier_</a>=<a class="code" href="classObjet__U.html#a7c27c4f80259eeef76ff8fe2d3bc61f7" title="Renvoie une reference constante vers le nom du cas. Cette methode est statique.">Objet_U::nom_du_cas</a>()+<span class="stringliteral">&quot;_&quot;</span>+<a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a58bc0b101f3f3f1d8522a9f41f1fad7b" title="surcharge Objet_U::le_nom() Renvoie le nom du probleme">le_nom</a>()+<span class="stringliteral">&quot;_ustar_mean_only&quot;</span>;
<a name="l00138"></a>00138           <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom=<a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>();
<a name="l00139"></a>00139           <a class="code" href="classZone.html" title="classe Zone Une Zone est un maillage compose d&#39;un ensemble d&#39;elements geometriques de meme type...">Zone</a>&amp; zone=dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0);
<a name="l00140"></a>00140           <a class="code" href="List_8h.html#a3149526fb499ddb08728c87daa32c5ad">LIST</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>) nlistbord_dom;                      <span class="comment">//!&lt; liste stockant tous les noms de frontiere du domaine</span>
<a name="l00141"></a>00141 <span class="comment"></span>          <span class="keywordtype">int</span> nbfr=zone.<a class="code" href="classZone.html#a9bf185c52ad1809d954bba670d9aed8a" title="Renvoie le nombre de bords + le nombre de raccords + le nombre de faces frontieres internes...">nb_front_Cl</a>();
<a name="l00142"></a>00142           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b=0; b&lt;nbfr; b++)
<a name="l00143"></a>00143             {
<a name="l00144"></a>00144               <a class="code" href="classFrontiere.html" title="Classe Frontiere. Une Frontiere decrit une partie de la frontiere d&#39;une Zone, elle possede un Nom...">Frontiere</a>&amp; org=zone.<a class="code" href="classZone.html#ac338b119d4b0bc4f510a223b9086fe5e">frontiere</a>(b);
<a name="l00145"></a>00145               nlistbord_dom.<a class="code" href="classFrontiere.html#a89e30e9143bdb821e32b37f07de88fe7" title="Ajoute les sommets (et faces) de la frontiere passee en parametre a l&#39;objet (Frontiere).">add</a>(org.<a class="code" href="classFrontiere.html#a2868774681d6f050479a95cbc7cd6fc9" title="Renvoie le nom de la frontiere.">le_nom</a>());
<a name="l00146"></a>00146             }
<a name="l00147"></a>00147           is &gt;&gt; motlu;
<a name="l00148"></a>00148           <span class="keywordflow">if</span> ( motlu != accolade_ouverte )
<a name="l00149"></a>00149             {
<a name="l00150"></a>00150               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot; is not a keyword understood by &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; in lire_motcle_non_standard&quot;</span>&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00151"></a>00151               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;A specification of kind : dt_impr_ustar_mean_only { dt_impr periode [boundaries nb_boundaries boundary_name1 boundary_name2 ... ] } was expected.&quot;</span>&lt;&lt;finl;
<a name="l00152"></a>00152               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00153"></a>00153             }
<a name="l00154"></a>00154           is &gt;&gt; motlu;
<a name="l00155"></a>00155           <span class="keywordflow">if</span> (motlu!=<span class="stringliteral">&quot;dt_impr&quot;</span>)
<a name="l00156"></a>00156             {
<a name="l00157"></a>00157               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;We expected dt_impr...&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00158"></a>00158               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00159"></a>00159             }
<a name="l00160"></a>00160           is &gt;&gt;  <a class="code" href="classMod__turb__hyd__base.html#a46323c387b427cc8197879cd2500354b">dt_impr_ustar_mean_only</a>;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162           is &gt;&gt; motlu; <span class="comment">//!&lt; boundaries ou accolade_fermee ou pasbon</span>
<a name="l00163"></a>00163 <span class="comment"></span>          <span class="keywordflow">if</span> ( motlu != accolade_fermee )
<a name="l00164"></a>00164             {
<a name="l00165"></a>00165               <span class="keywordflow">if</span> ( motlu == <span class="stringliteral">&quot;boundaries&quot;</span> )
<a name="l00166"></a>00166                 {
<a name="l00167"></a>00167                   <a class="code" href="classMod__turb__hyd__base.html#a6084000aff9a96929ee88fc0df10db0f">boundaries_</a>=1;
<a name="l00168"></a>00168                   <span class="keywordtype">int</span> nb_bords=0;
<a name="l00169"></a>00169                   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_bord_lu;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 <span class="comment">// read boundaries number</span>
<a name="l00172"></a>00172                   is &gt;&gt; nb_bords;
<a name="l00173"></a>00173                   <span class="keywordflow">if</span> ( nb_bords != 0 )
<a name="l00174"></a>00174                     {
<a name="l00175"></a>00175 <span class="comment">// read boundaries</span>
<a name="l00176"></a>00176                       <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=0; i&lt;nb_bords; i++ )
<a name="l00177"></a>00177                         {
<a name="l00178"></a>00178                           is &gt;&gt; nom_bord_lu;
<a name="l00179"></a>00179                           <a class="code" href="classMod__turb__hyd__base.html#abc87b165dc95fff45676fff5efb05858">boundaries_list</a>.<a class="code" href="classList__Nom.html#a04f3490bcde0edc6b0ce0dcf3509a640">add</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(nom_bord_lu));
<a name="l00180"></a>00180 <span class="comment">// verif nom bords</span>
<a name="l00181"></a>00181                           <span class="keywordflow">if</span> (!nlistbord_dom.contient(<a class="code" href="classMod__turb__hyd__base.html#abc87b165dc95fff45676fff5efb05858">boundaries_list</a>[i]))
<a name="l00182"></a>00182                             {
<a name="l00183"></a>00183                               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Problem in the dt_impr_ustar_mean_only instruction:&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00184"></a>00184                               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;The boundary named &#39;&quot;</span> &lt;&lt; <a class="code" href="classMod__turb__hyd__base.html#abc87b165dc95fff45676fff5efb05858">boundaries_list</a>[i] &lt;&lt; <span class="stringliteral">&quot;&#39; is not a boundary of the domain &quot;</span> &lt;&lt; dom.<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; finl;
<a name="l00185"></a>00185                               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00186"></a>00186                             }
<a name="l00187"></a>00187                         }
<a name="l00188"></a>00188                     }
<a name="l00189"></a>00189 <span class="comment">// lecture accolade fermee</span>
<a name="l00190"></a>00190                   is &gt;&gt; motlu;
<a name="l00191"></a>00191                   <span class="keywordflow">if</span> ( motlu != accolade_fermee )
<a name="l00192"></a>00192                     {
<a name="l00193"></a>00193                       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Problem in the dt_impr_ustar_mean_only instruction:&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00194"></a>00194                       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;TRUST wants to read a &#39;&quot;</span> &lt;&lt; accolade_fermee &lt;&lt; <span class="stringliteral">&quot;&#39; but find &#39;&quot;</span> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot;&#39;!!&quot;</span> &lt;&lt; finl;
<a name="l00195"></a>00195                       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00196"></a>00196                     }
<a name="l00197"></a>00197                 }
<a name="l00198"></a>00198               <span class="keywordflow">else</span>
<a name="l00199"></a>00199                 {
<a name="l00200"></a>00200                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; motlu &lt;&lt; <span class="stringliteral">&quot; is not a keyword understood by &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; in lire_motcle_non_standard&quot;</span>&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00201"></a>00201                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;A specification of kind : dt_impr_ustar_mean_only { dt_impr periode [boundaries nb_boundaries boundary_name1 boundary_name2 ... ] } was expected.&quot;</span>&lt;&lt;finl;
<a name="l00202"></a>00202                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00203"></a>00203                 }
<a name="l00204"></a>00204             }
<a name="l00205"></a>00205         } <span class="comment">//!&lt; fin dt_impr_ustar_mean_only</span>
<a name="l00206"></a>00206 <span class="comment"></span>      <span class="keywordflow">else</span>
<a name="l00207"></a>00207         {
<a name="l00208"></a>00208           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Please remove dt_impr_ustar option if the wall law is of Negligeable type.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00209"></a>00209           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00210"></a>00210         }
<a name="l00211"></a>00211     } <span class="comment">//!&lt; fin loi paroi negligeable</span>
<a name="l00212"></a>00212 <span class="comment"></span>
<a name="l00213"></a>00213   <span class="keywordflow">else</span>
<a name="l00214"></a>00214     {
<a name="l00215"></a>00215       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; mot &lt;&lt; <span class="stringliteral">&quot; is not a keyword understood by &quot;</span> &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; <span class="stringliteral">&quot; in lire_motcle_non_standard&quot;</span>&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00216"></a>00216       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00217"></a>00217     }
<a name="l00218"></a>00218   <span class="keywordflow">return</span> -1;
<a name="l00219"></a>00219 }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 <span class="comment">// Precondition:</span>
<a name="l00222"></a>00222 <span class="comment">// Parametre: Equation_base&amp; eqn</span>
<a name="l00223"></a>00223 <span class="comment">// Signification: l&#39;equation a laquelle l&#39;objet s&#39;associe</span>
<a name="l00224"></a>00224 <span class="comment">// Valeurs par defaut:</span>
<a name="l00225"></a>00225 <span class="comment">// Contraintes: reference constante</span>
<a name="l00226"></a>00226 <span class="comment">// Acces: entree</span>
<a name="l00227"></a>00227 <span class="comment">// </span>
<a name="l00228"></a>00228 <span class="comment">// Signification:</span>
<a name="l00229"></a>00229 <span class="comment">// Contraintes:</span>
<a name="l00230"></a>00230 <span class="comment">// Exception:</span>
<a name="l00231"></a>00231 <span class="comment">// Effets de bord:</span>
<a name="l00232"></a>00232 <span class="comment">// Postcondition: le modele de turbulence a une equation associee</span>
<a name="l00233"></a>00233 <span class="comment">//</span><span class="comment"></span>
<a name="l00234"></a>00234 <span class="comment">//! Associe l&#39;equation passe en parametre au modele de turbulence.</span>
<a name="l00235"></a><a class="code" href="classMod__turb__hyd__base.html#a180fe8f1bb6963049aa74b841017920b">00235</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a180fe8f1bb6963049aa74b841017920b" title="Associe l&#39;equation passe en parametre au modele de turbulence.">Mod_turb_hyd_base::associer_eqn</a>(<span class="keyword">const</span> <a class="code" href="classEquation__base.html">Equation_base</a>&amp; eqn)
<a name="l00236"></a>00236 {
<a name="l00237"></a>00237   <a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a> = eqn;
<a name="l00238"></a>00238 }
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 <span class="comment">// Precondition:</span>
<a name="l00242"></a>00242 <span class="comment">// Parametre: Zone_dis&amp;</span>
<a name="l00243"></a>00243 <span class="comment">// Signification: une zone discretisee</span>
<a name="l00244"></a>00244 <span class="comment">// Valeurs par defaut:</span>
<a name="l00245"></a>00245 <span class="comment">// Contraintes: reference constante</span>
<a name="l00246"></a>00246 <span class="comment">// Acces: NON ACCEDE</span>
<a name="l00247"></a>00247 <span class="comment">// Parametre: Zone_Cl_dis&amp;</span>
<a name="l00248"></a>00248 <span class="comment">// Signification: une zone de conditions aux limites discretisees</span>
<a name="l00249"></a>00249 <span class="comment">// Valeurs par defaut:</span>
<a name="l00250"></a>00250 <span class="comment">// Contraintes: reference constante</span>
<a name="l00251"></a>00251 <span class="comment">// Acces: NON ACCEDE</span>
<a name="l00252"></a>00252 <span class="comment">// </span>
<a name="l00253"></a>00253 <span class="comment">// Signification:</span>
<a name="l00254"></a>00254 <span class="comment">// Contraintes:</span>
<a name="l00255"></a>00255 <span class="comment">// Exception:</span>
<a name="l00256"></a>00256 <span class="comment">// Effets de bord:</span>
<a name="l00257"></a>00257 <span class="comment">// Postcondition:</span>
<a name="l00258"></a>00258 <span class="comment">//</span>
<a name="l00259"></a>00259 <span class="comment">//</span>
<a name="l00260"></a>00260 <span class="comment">//</span>
<a name="l00261"></a>00261 <span class="comment">//</span><span class="comment"></span>
<a name="l00262"></a>00262 <span class="comment">//! NE FAIT RIEN&lt;br&gt;a surcharger dans les classes derivees.&lt;br&gt;Associe la zone discretisee et la zone des conditions&lt;br&gt;aux limites discretisees au modele de turbulence.</span>
<a name="l00263"></a><a class="code" href="classMod__turb__hyd__base.html#a4c79d1c29662aa49f03187977c7e7b2a">00263</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a4c79d1c29662aa49f03187977c7e7b2a" title="NE FAIT RIEN a surcharger dans les classes derivees. Associe la zone discretisee et la zone des condi...">Mod_turb_hyd_base::associer</a>(<span class="keyword">const</span> <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; , <span class="keyword">const</span> <a class="code" href="classZone__Cl__dis.html" title="classe Zone_Cl_dis Classe generique de la hierarchie des conditions aux limites discretisees. Un objet Zone_Cl_dis peut referencer n&#39;importe quel derivant de Zone_Cl_dis_base. La plupart des methodes appellent les methodes de l&#39;objet Probleme sous-jacent via la methode valeur() declaree grace a la macro Declare_deriv().;">Zone_Cl_dis</a>&amp;  )
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265   ;
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 <span class="comment">// Precondition:</span>
<a name="l00270"></a>00270 <span class="comment">// Parametre:</span>
<a name="l00271"></a>00271 <span class="comment">// Signification:</span>
<a name="l00272"></a>00272 <span class="comment">// Valeurs par defaut:</span>
<a name="l00273"></a>00273 <span class="comment">// Contraintes:</span>
<a name="l00274"></a>00274 <span class="comment">// Acces:</span>
<a name="l00275"></a>00275 <span class="comment">// </span>
<a name="l00276"></a>00276 <span class="comment">// Signification:</span>
<a name="l00277"></a>00277 <span class="comment">// Contraintes:</span>
<a name="l00278"></a>00278 <span class="comment">// Exception:</span>
<a name="l00279"></a>00279 <span class="comment">// Effets de bord:</span>
<a name="l00280"></a>00280 <span class="comment">// Postcondition:</span>
<a name="l00281"></a>00281 <span class="comment">//</span><span class="comment"></span>
<a name="l00282"></a>00282 <span class="comment">//! NE FAIT RIEN</span>
<a name="l00283"></a><a class="code" href="classMod__turb__hyd__base.html#a3a5774b6fc741bcea5018eb079b60095">00283</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a3a5774b6fc741bcea5018eb079b60095" title="NE FAIT RIEN.">Mod_turb_hyd_base::completer</a>()
<a name="l00284"></a>00284 {
<a name="l00285"></a>00285   ;
<a name="l00286"></a>00286 }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 <span class="comment">// Precondition:</span>
<a name="l00290"></a>00290 <span class="comment">// Parametre:</span>
<a name="l00291"></a>00291 <span class="comment">// Signification:</span>
<a name="l00292"></a>00292 <span class="comment">// Valeurs par defaut:</span>
<a name="l00293"></a>00293 <span class="comment">// Contraintes:</span>
<a name="l00294"></a>00294 <span class="comment">// Acces:</span>
<a name="l00295"></a>00295 <span class="comment">// </span>
<a name="l00296"></a>00296 <span class="comment">// Signification:</span>
<a name="l00297"></a>00297 <span class="comment">// Contraintes:</span>
<a name="l00298"></a>00298 <span class="comment">// Exception:</span>
<a name="l00299"></a>00299 <span class="comment">// Effets de bord:</span>
<a name="l00300"></a>00300 <span class="comment">// Postcondition: le modele de turbulence est discretise</span>
<a name="l00301"></a>00301 <span class="comment">//</span><span class="comment"></span>
<a name="l00302"></a>00302 <span class="comment">//! Discretise le modele de turbulence.</span>
<a name="l00303"></a><a class="code" href="classMod__turb__hyd__base.html#a45ce631c792583ff373c2b26d83ddce8">00303</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a45ce631c792583ff373c2b26d83ddce8" title="Discretise le modele de turbulence.">Mod_turb_hyd_base::discretiser</a>()
<a name="l00304"></a>00304 {
<a name="l00305"></a>00305   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Turbulence hydraulic model discretization&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00306"></a>00306   <a class="code" href="classMod__turb__hyd__base.html#a31a22c81875adaf13e5d8408e72c6bcd">discretiser_visc_turb</a>(<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps(),<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;zone_dis(),
<a name="l00307"></a>00307                         <a class="code" href="classMod__turb__hyd__base.html#a914a881c50bc2e8f6d9b8288084541b8">la_viscosite_turbulente</a>);
<a name="l00308"></a>00308   <a class="code" href="classMod__turb__hyd__base.html#a5019aff6fb50bd480e7c23ecf0880a93">champs_compris_</a>.<a class="code" href="classChamps__compris.html#aae00ca562b7d89ff638fae94d6973fcf">ajoute_champ</a>(<a class="code" href="classMod__turb__hyd__base.html#a914a881c50bc2e8f6d9b8288084541b8">la_viscosite_turbulente</a>);
<a name="l00309"></a>00309 
<a name="l00310"></a>00310   <a class="code" href="classMod__turb__hyd__base.html#a3ce50ed79f0fd42a7440ea268b76320a">discretiser_corr_visc_turb</a>(<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps(),<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;zone_dis(),<a class="code" href="classMod__turb__hyd__base.html#a8a7000f6224311de17be1804de5857cc">corr_visco_turb</a>);
<a name="l00311"></a>00311   <a class="code" href="classMod__turb__hyd__base.html#a5019aff6fb50bd480e7c23ecf0880a93">champs_compris_</a>.<a class="code" href="classChamps__compris.html#aae00ca562b7d89ff638fae94d6973fcf">ajoute_champ</a>(<a class="code" href="classMod__turb__hyd__base.html#a8a7000f6224311de17be1804de5857cc">corr_visco_turb</a>);
<a name="l00312"></a>00312 }
<a name="l00313"></a>00313 
<a name="l00314"></a><a class="code" href="classMod__turb__hyd__base.html#a31a22c81875adaf13e5d8408e72c6bcd">00314</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a31a22c81875adaf13e5d8408e72c6bcd">Mod_turb_hyd_base::discretiser_visc_turb</a>(<span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch,
<a name="l00315"></a>00315                                               <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; z, <a class="code" href="classChamp__Fonc.html" title="classe Champ_Fonc Classe generique de la hierarchie des champs fontions du temps, un objet Champ_Fonc...">Champ_Fonc</a>&amp; ch)<span class="keyword"> const</span>
<a name="l00316"></a>00316 <span class="keyword"></span>{
<a name="l00317"></a>00317   <span class="keywordtype">int</span> is_dilat = <a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#a4ef1cb4c4eed0aab75358ab7a91e29db">is_dilatable</a>();
<a name="l00318"></a>00318   <span class="keywordflow">if</span> (!is_dilat)
<a name="l00319"></a>00319     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Turbulent viscosity field discretization&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00320"></a>00320   <span class="keywordflow">else</span>
<a name="l00321"></a>00321     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Turbulent dynamic viscosity field discretization&quot;</span> &lt;&lt; finl;
<a name="l00322"></a>00322   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom = (is_dilat==1) ? <span class="stringliteral">&quot;viscosite_dynamique_turbulente&quot;</span> : <span class="stringliteral">&quot;viscosite_turbulente&quot;</span>;
<a name="l00323"></a>00323   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> unite = (is_dilat==1) ? <span class="stringliteral">&quot;kg/(m.s)&quot;</span> : <span class="stringliteral">&quot;m2/s&quot;</span>;
<a name="l00324"></a>00324   <span class="keyword">const</span> <a class="code" href="classDiscretisation__base.html" title="classe Discretisation_base Cette classe represente un schema de discretisation en espace...">Discretisation_base</a>&amp; dis = <a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;discretisation();
<a name="l00325"></a>00325   dis.<a class="code" href="classDiscretisation__base.html#a03257807e08369739ccc39eba02f74b5">discretiser_champ</a>(<span class="stringliteral">&quot;champ_elem&quot;</span>,z.<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>(),nom,unite,1,sch.<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>(),ch);
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a><a class="code" href="classMod__turb__hyd__base.html#a3ce50ed79f0fd42a7440ea268b76320a">00328</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a3ce50ed79f0fd42a7440ea268b76320a">Mod_turb_hyd_base::discretiser_corr_visc_turb</a>(<span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch,
<a name="l00329"></a>00329                                                    <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; z, <a class="code" href="classChamp__Fonc.html" title="classe Champ_Fonc Classe generique de la hierarchie des champs fontions du temps, un objet Champ_Fonc...">Champ_Fonc</a>&amp; ch)<span class="keyword"> const</span>
<a name="l00330"></a>00330 <span class="keyword"></span>{
<a name="l00331"></a>00331   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Turbulent viscosity correction field discretization&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00332"></a>00332   <span class="keyword">const</span> <a class="code" href="classDiscretisation__base.html" title="classe Discretisation_base Cette classe represente un schema de discretisation en espace...">Discretisation_base</a>&amp; dis = <a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;discretisation();
<a name="l00333"></a>00333   dis.<a class="code" href="classDiscretisation__base.html#a03257807e08369739ccc39eba02f74b5">discretiser_champ</a>(<span class="stringliteral">&quot;champ_elem&quot;</span>,z.<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>(),<span class="stringliteral">&quot;corr_visco_turb&quot;</span>,<span class="stringliteral">&quot;adimensionnel&quot;</span>,1,sch.<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>(),ch);
<a name="l00334"></a>00334 }
<a name="l00335"></a>00335 
<a name="l00336"></a><a class="code" href="classMod__turb__hyd__base.html#acbea994ba98a841be76cd1010b66df7b">00336</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#acbea994ba98a841be76cd1010b66df7b" title="Utilise par les modeles de tubulence dans TrioCFD.">Mod_turb_hyd_base::discretiser_K</a>(<span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch,
<a name="l00337"></a>00337                                       <a class="code" href="classZone__dis.html" title="classe Zone_dis Classe generique de la hierarchie des zones discretisees. Un objet de type Zone_dis p...">Zone_dis</a>&amp; z, <a class="code" href="classChamp__Fonc.html" title="classe Champ_Fonc Classe generique de la hierarchie des champs fontions du temps, un objet Champ_Fonc...">Champ_Fonc</a>&amp; ch)<span class="keyword"> const</span>
<a name="l00338"></a>00338 <span class="keyword"></span>{
<a name="l00339"></a>00339   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Kinetic turbulent energy field discretisation&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00340"></a>00340   <span class="keyword">const</span> <a class="code" href="classDiscretisation__base.html" title="classe Discretisation_base Cette classe represente un schema de discretisation en espace...">Discretisation_base</a>&amp; dis = <a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;discretisation();
<a name="l00341"></a>00341   dis.<a class="code" href="classDiscretisation__base.html#a03257807e08369739ccc39eba02f74b5">discretiser_champ</a>(<span class="stringliteral">&quot;champ_elem&quot;</span>,z.<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>(),<span class="stringliteral">&quot;K&quot;</span>,<span class="stringliteral">&quot;m2/s2&quot;</span>,1,sch.<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>(),ch);
<a name="l00342"></a>00342 }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 <span class="comment">// Precondition:</span>
<a name="l00345"></a>00345 <span class="comment">// Parametre:</span>
<a name="l00346"></a>00346 <span class="comment">// Signification:</span>
<a name="l00347"></a>00347 <span class="comment">// Valeurs par defaut:</span>
<a name="l00348"></a>00348 <span class="comment">// Contraintes:</span>
<a name="l00349"></a>00349 <span class="comment">// Acces:</span>
<a name="l00350"></a>00350 <span class="comment">// Exception:</span>
<a name="l00351"></a>00351 <span class="comment">// Effets de bord:</span>
<a name="l00352"></a>00352 <span class="comment">// Postcondition:</span>
<a name="l00353"></a>00353 <span class="comment">//</span>
<a name="l00354"></a>00354 <span class="comment">//</span><span class="comment"></span>
<a name="l00355"></a>00355 <span class="comment">//! Prepare le calcul.&lt;br&gt;Initialise la loi de paroi.</span>
<a name="l00356"></a>00356 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00357"></a>00357 <span class="comment">Signification: code de retour de Turbulence_paroi::init_lois_paroi()&lt;br&gt;</span>
<a name="l00358"></a>00358 <span class="comment">Contraintes: */</span>
<a name="l00359"></a><a class="code" href="classMod__turb__hyd__base.html#a20cfd8609b70a2ac7b184b02fb72e013">00359</a> <span class="keywordtype">int</span> <a class="code" href="classMod__turb__hyd__base.html#a20cfd8609b70a2ac7b184b02fb72e013" title="Prepare le calcul. Initialise la loi de paroi.">Mod_turb_hyd_base::preparer_calcul</a>()
<a name="l00360"></a>00360 {
<a name="l00361"></a>00361   <span class="keywordtype">int</span> res = 1;
<a name="l00362"></a>00362   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00363"></a>00363     res = <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classTurbulence__paroi.html#af1f38a1a3094c18c5507124acb4dbc67" title="Appel a l&#39;objet sous-jacent. Initialise les lois de parois.">init_lois_paroi</a>();
<a name="l00364"></a>00364   <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classTurbulence__paroi.html#a8942dd612e20c5bd49ef2663eb9f3f6f">imprimer_premiere_ligne_ustar</a>(<a class="code" href="classMod__turb__hyd__base.html#a6084000aff9a96929ee88fc0df10db0f">boundaries_</a>, <a class="code" href="classMod__turb__hyd__base.html#abc87b165dc95fff45676fff5efb05858">boundaries_list</a>, <a class="code" href="classMod__turb__hyd__base.html#a7152de029d8be962de32da9d0958922d">nom_fichier_</a>);
<a name="l00365"></a>00365   <span class="keywordflow">return</span> res;
<a name="l00366"></a>00366 }
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="classMod__turb__hyd__base.html#a3aed1bca07c375094bb83c1e1d70879a">00368</a> <span class="keywordtype">bool</span> <a class="code" href="classMod__turb__hyd__base.html#a3aed1bca07c375094bb83c1e1d70879a">Mod_turb_hyd_base::initTimeStep</a>(<span class="keywordtype">double</span> dt)
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00371"></a>00371 }
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="classMod__turb__hyd__base.html#a7d38364d1e63bb6a08d413ea3800241e">00373</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a7d38364d1e63bb6a08d413ea3800241e">Mod_turb_hyd_base::creer_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; motlu)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00376"></a>00376     {
<a name="l00377"></a>00377       <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>-&gt;creer_champ(motlu);
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379 }
<a name="l00380"></a>00380 
<a name="l00381"></a><a class="code" href="classMod__turb__hyd__base.html#a2913d7559aef5bf2279134dcb7aea60f">00381</a> <span class="keyword">const</span> <a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>&amp; <a class="code" href="classMod__turb__hyd__base.html#a2913d7559aef5bf2279134dcb7aea60f">Mod_turb_hyd_base::get_champ</a>(<span class="keyword">const</span> <a class="code" href="classMotcle.html" title="Une chaine de caractere (Nom) en majuscules.">Motcle</a>&amp; nom)<span class="keyword"> const</span>
<a name="l00382"></a>00382 <span class="keyword"></span>{
<a name="l00383"></a>00383   <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classChamp__base.html" title="classe Champ_base Cette classe est la base de la hierarchie des champs. Ses membres sont les attribut...">Champ_base</a>) ref_champ;
<a name="l00384"></a>00384   <span class="keywordflow">try</span>
<a name="l00385"></a>00385     {
<a name="l00386"></a>00386       <span class="keywordflow">return</span> <a class="code" href="classMod__turb__hyd__base.html#a5019aff6fb50bd480e7c23ecf0880a93">champs_compris_</a>.<a class="code" href="classChamps__compris.html#af38aefe53d102cb5ea2d328df769f85f">get_champ</a>(nom);
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388   <span class="keywordflow">catch</span> (<a class="code" href="classChamps__compris__erreur.html">Champs_compris_erreur</a>)
<a name="l00389"></a>00389     {
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00393"></a>00393     {
<a name="l00394"></a>00394       <span class="keywordflow">try</span>
<a name="l00395"></a>00395         {
<a name="l00396"></a>00396           <span class="keywordflow">return</span> <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>-&gt;get_champ(nom);
<a name="l00397"></a>00397         }
<a name="l00398"></a>00398       <span class="keywordflow">catch</span> (<a class="code" href="classChamps__compris__erreur.html">Champs_compris_erreur</a>)
<a name="l00399"></a>00399         {
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401     }
<a name="l00402"></a>00402 
<a name="l00403"></a>00403   <span class="keywordflow">throw</span> <a class="code" href="classChamps__compris__erreur.html">Champs_compris_erreur</a>();
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 }
<a name="l00406"></a><a class="code" href="classMod__turb__hyd__base.html#adc3387667e87830f62ecd9cc5c748919">00406</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#adc3387667e87830f62ecd9cc5c748919">Mod_turb_hyd_base::get_noms_champs_postraitables</a>(<a class="code" href="classNoms.html" title="Un tableau de chaine de caracteres (VECT(Nom))">Noms</a>&amp; nom,<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35f">Option</a> opt)<span class="keyword"> const</span>
<a name="l00407"></a>00407 <span class="keyword"></span>{
<a name="l00408"></a>00408   <span class="keywordflow">if</span> (opt==<a class="code" href="Champs__compris__interface_8h.html#a0e65ad13124ea2cb5e255b640464e35fab6018339139b51a498dc44bd760766fc">DESCRIPTION</a>)
<a name="l00409"></a>00409     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>()&lt;&lt;<span class="stringliteral">&quot; : &quot;</span>&lt;&lt;<a class="code" href="classMod__turb__hyd__base.html#a5019aff6fb50bd480e7c23ecf0880a93">champs_compris_</a>.<a class="code" href="classChamps__compris.html#a6c706a60f39a30318d2a0dd2a582e50e">liste_noms_compris</a>()&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00410"></a>00410   <span class="keywordflow">else</span>
<a name="l00411"></a>00411     nom.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(<a class="code" href="classMod__turb__hyd__base.html#a5019aff6fb50bd480e7c23ecf0880a93">champs_compris_</a>.<a class="code" href="classChamps__compris.html#a6c706a60f39a30318d2a0dd2a582e50e">liste_noms_compris</a>());
<a name="l00412"></a>00412 
<a name="l00413"></a>00413   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00414"></a>00414     <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>-&gt;get_noms_champs_postraitables(nom,opt);
<a name="l00415"></a>00415 }
<a name="l00416"></a>00416 
<a name="l00417"></a>00417 <span class="comment">// Precondition:</span>
<a name="l00418"></a>00418 <span class="comment">// Parametre:</span>
<a name="l00419"></a>00419 <span class="comment">// Signification:</span>
<a name="l00420"></a>00420 <span class="comment">// Valeurs par defaut:</span>
<a name="l00421"></a>00421 <span class="comment">// Contraintes:</span>
<a name="l00422"></a>00422 <span class="comment">// Acces:</span>
<a name="l00423"></a>00423 <span class="comment">// Exception:</span>
<a name="l00424"></a>00424 <span class="comment">// Effets de bord:</span>
<a name="l00425"></a>00425 <span class="comment">// Postcondition:</span>
<a name="l00426"></a>00426 <span class="comment">//</span><span class="comment"></span>
<a name="l00427"></a>00427 <span class="comment">//! Effectue l&#39;impression si cela est necessaire.</span>
<a name="l00428"></a>00428 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00429"></a>00429 <span class="comment">Signification: renvoie toujours 1&lt;br&gt;</span>
<a name="l00430"></a>00430 <span class="comment">Contraintes: */</span>
<a name="l00431"></a><a class="code" href="classMod__turb__hyd__base.html#a8d74d9e5ad54160bdfea28c75c7600d4">00431</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a8d74d9e5ad54160bdfea28c75c7600d4" title="Effectue l&#39;impression si cela est necessaire.">Mod_turb_hyd_base::imprimer</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00432"></a>00432 <span class="keyword"></span>{
<a name="l00433"></a>00433   <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch = <a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps();
<a name="l00434"></a>00434   <span class="keywordtype">double</span> temps_courant = sch.<a class="code" href="classSchema__Temps__base.html#a5054df01edb6d4f7baec7e612d423834" title="Renvoie le temps courant.">temps_courant</a>();
<a name="l00435"></a>00435   <span class="keywordtype">double</span> dt= sch.<a class="code" href="classSchema__Temps__base.html#a0e4f67ef6086c09434ddc161668077b2" title="Renvoie le pas de temps (delta_t) courant.">pas_de_temps</a>() ;
<a name="l00436"></a>00436   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>() &amp;&amp; <a class="code" href="classMod__turb__hyd__base.html#ac12fa00797c62ecb4063a1bc2021d615">limpr_ustar</a>(temps_courant,sch.<a class="code" href="classSchema__Temps__base.html#a1b56536ec25b9973c3909576db10252d" title="Renvoie le temps courant.">temps_precedent</a>(),dt,<a class="code" href="classMod__turb__hyd__base.html#a15ded52bfbd6d901308639d0748465e4">dt_impr_ustar</a>) )
<a name="l00437"></a>00437     <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classTurbulence__paroi.html#a54d44a186f411959c9e52cdfbea3b60e" title="Appel a l&#39;objet sous-jacent. Imprime les u* de la loi de paroi.">imprimer_ustar</a>(os);
<a name="l00438"></a>00438   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>() &amp;&amp; <a class="code" href="classMod__turb__hyd__base.html#ac12fa00797c62ecb4063a1bc2021d615">limpr_ustar</a>(temps_courant,sch.<a class="code" href="classSchema__Temps__base.html#a1b56536ec25b9973c3909576db10252d" title="Renvoie le temps courant.">temps_precedent</a>(),dt,<a class="code" href="classMod__turb__hyd__base.html#a46323c387b427cc8197879cd2500354b">dt_impr_ustar_mean_only</a>) )
<a name="l00439"></a>00439     <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classTurbulence__paroi.html#a7c271b76728ebc50cfecf3927866962a">imprimer_ustar_mean_only</a>(os, <a class="code" href="classMod__turb__hyd__base.html#a6084000aff9a96929ee88fc0df10db0f">boundaries_</a>, <a class="code" href="classMod__turb__hyd__base.html#abc87b165dc95fff45676fff5efb05858">boundaries_list</a>, <a class="code" href="classMod__turb__hyd__base.html#a7152de029d8be962de32da9d0958922d">nom_fichier_</a>);
<a name="l00440"></a>00440 }
<a name="l00441"></a>00441 
<a name="l00442"></a><a class="code" href="classMod__turb__hyd__base.html#ac12fa00797c62ecb4063a1bc2021d615">00442</a> <span class="keywordtype">int</span> <a class="code" href="classMod__turb__hyd__base.html#ac12fa00797c62ecb4063a1bc2021d615">Mod_turb_hyd_base::limpr_ustar</a>(<span class="keywordtype">double</span> temps_courant, <span class="keywordtype">double</span> temps_prec, <span class="keywordtype">double</span> dt, <span class="keywordtype">double</span> dt_ustar)<span class="keyword"> const</span>
<a name="l00443"></a>00443 <span class="keyword"></span>{
<a name="l00444"></a>00444   <span class="keyword">const</span> <a class="code" href="classSchema__Temps__base.html" title="classe Schema_Temps_base">Schema_Temps_base</a>&amp; sch = <a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps();
<a name="l00445"></a>00445   <span class="keywordflow">if</span> (sch.<a class="code" href="classSchema__Temps__base.html#a247769eddf9c0bfcaabc50b8dd90d401" title="Renvoie le nombre de pas de temps effectues.">nb_pas_dt</a>()==0)
<a name="l00446"></a>00446     <span class="keywordflow">return</span> 0;
<a name="l00447"></a>00447   <span class="keywordflow">if</span> (dt_ustar&lt;=dt || (( sch.<a class="code" href="classSchema__Temps__base.html#aedf8fd836c4a89a9eb076371c800a93b">temps_cpu_max_atteint</a>() || (!<a class="code" href="Process_8cpp.html#a793f0cea0b470888001917e7bc49d680" title="Returns the disable_stop_ flag (Disable or not the writing of the .stop file)">get_disable_stop</a>() &amp;&amp; sch.<a class="code" href="classSchema__Temps__base.html#a753a697da5c097060eab9d3bff2d40d8" title="Renvoie 1 si le fichier (d&#39;extension) .stop contient un 1 Renvoie 0 sinon.">stop_lu</a>()) || sch.<a class="code" href="classSchema__Temps__base.html#afe5bc179eeb8a6d0d49c0b1bf01723f6" title="Renvoie 1 si le temps final est atteint (ou depasse). Renvoie 1 si temps_courant_ &gt;= tmax Renvoie 0 s...">temps_final_atteint</a>() || sch.<a class="code" href="classSchema__Temps__base.html#a36f08917939a3f349477a214db3c19d3" title="Renvoie 1 si (le nombre de pas de temps &gt;= nombre de pas de temps maximum). Renvoie 0 sinon...">nb_pas_dt_max_atteint</a>() || sch.<a class="code" href="classSchema__Temps__base.html#a247769eddf9c0bfcaabc50b8dd90d401" title="Renvoie le nombre de pas de temps effectues.">nb_pas_dt</a>()==1 || sch.<a class="code" href="classSchema__Temps__base.html#ad1db51fa43b81e76b63df2163c4702e6">stationnaire_atteint</a>()) &amp;&amp; !<a class="code" href="Double_8h.html#ac86f5f350b0f95fd8c34b0ac8d720f6f">est_egal</a>(dt_ustar,1.e20) ) )
<a name="l00448"></a>00448     <span class="keywordflow">return</span> 1;
<a name="l00449"></a>00449   <span class="keywordflow">else</span>
<a name="l00450"></a>00450     {
<a name="l00451"></a>00451 <span class="comment">// Voir Schema_Temps_base::limpr pour information sur epsilon et modf</span>
<a name="l00452"></a>00452       <span class="keywordtype">double</span> i, j, epsilon = 1.e-8;
<a name="l00453"></a>00453       modf(temps_courant/dt_ustar + epsilon, &amp;i);
<a name="l00454"></a>00454       modf(temps_prec/dt_ustar + epsilon, &amp;j);
<a name="l00455"></a>00455       <span class="keywordflow">return</span> ( i&gt;j );
<a name="l00456"></a>00456     }
<a name="l00457"></a>00457 }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 <span class="comment">// Precondition:</span>
<a name="l00461"></a>00461 <span class="comment">// Parametre: Sortie&amp; os</span>
<a name="l00462"></a>00462 <span class="comment">// Signification: un flot de sortie</span>
<a name="l00463"></a>00463 <span class="comment">// Valeurs par defaut:</span>
<a name="l00464"></a>00464 <span class="comment">// Contraintes:</span>
<a name="l00465"></a>00465 <span class="comment">// Acces: entree/sortie</span>
<a name="l00466"></a>00466 <span class="comment">// Exception:</span>
<a name="l00467"></a>00467 <span class="comment">// Effets de bord:</span>
<a name="l00468"></a>00468 <span class="comment">// Postcondition: la methode ne modifie pas l&#39;objet</span>
<a name="l00469"></a>00469 <span class="comment">//</span>
<a name="l00470"></a>00470 <span class="comment">//</span><span class="comment"></span>
<a name="l00471"></a>00471 <span class="comment">//! Sauvegarde le modele de turbulence sur un flot de sortie.&lt;br&gt;Sauvegarde le type de l&#39;objet.</span>
<a name="l00472"></a>00472 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00473"></a>00473 <span class="comment">Signification: renvoie toujours 1&lt;br&gt;</span>
<a name="l00474"></a>00474 <span class="comment">Contraintes: */</span>
<a name="l00475"></a><a class="code" href="classMod__turb__hyd__base.html#a8bb934fbc0785ea078bb8059711c4ad8">00475</a> <span class="keywordtype">int</span> <a class="code" href="classMod__turb__hyd__base.html#a8bb934fbc0785ea078bb8059711c4ad8" title="Sauvegarde le modele de turbulence sur un flot de sortie. Sauvegarde le type de l&#39;objet.">Mod_turb_hyd_base::sauvegarder</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00476"></a>00476 <span class="keyword"></span>{
<a name="l00477"></a>00477   <a class="code" href="classMod__turb__hyd__base.html#a39cf0da006fd4860a0455689793f76b2" title="Effectue l&#39;ecriture d&#39;une identite si cela est necessaire.">a_faire</a>(os);
<a name="l00478"></a>00478   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00479"></a>00479     {
<a name="l00480"></a>00480       <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>-&gt;<a class="code" href="classObjet__U.html#aecd2ef304acbb3485874434e845af638" title="Sauvegarde d&#39;un Objet_U sur un flot de sortie Methode a surcharger : retourne toujours 1 dans cette i...">sauvegarder</a>(os);
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482   <span class="keywordflow">else</span>  <span class="comment">//!&lt; OC: pour le bas Re, on ecrit negligeable =&gt; pas de pb a faire ceci ?</span>
<a name="l00483"></a>00483 <span class="comment"></span>    {
<a name="l00484"></a>00484       <span class="keyword">const</span> <a class="code" href="classDiscretisation__base.html" title="classe Discretisation_base Cette classe represente un schema de discretisation en espace...">Discretisation_base</a>&amp; discr=<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;discretisation();
<a name="l00485"></a>00485       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_discr=discr.<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>();
<a name="l00486"></a>00486       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> type = <span class="stringliteral">&quot;negligeable_&quot;</span>;
<a name="l00487"></a>00487       type+=nom_discr.<a class="code" href="classNom.html#afff639e5c03094b361d5902ee66e9f03" title="Retourne un nom selon la commande usuelle substr ATTENTION : deb = 1 =&gt; premier caractere de la chain...">substr_old</a>(1,3);
<a name="l00488"></a>00488       os &lt;&lt; type &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490 <span class="comment">// Verification que l&#39;appel a bien ete fait a Mod_turb_hyd_base::limiter_viscosite_turbulente()</span>
<a name="l00491"></a>00491   assert(<a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(<a class="code" href="classMod__turb__hyd__base.html#a1ee5665cfd5c3f9dc2317e0f9044f854">borne_visco_turb</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>())!=0);
<a name="l00492"></a>00492   <span class="keywordflow">return</span> 0;
<a name="l00493"></a>00493 }
<a name="l00494"></a>00494 <span class="comment">// Precondition:</span>
<a name="l00495"></a>00495 <span class="comment">// Parametre: Entree&amp;</span>
<a name="l00496"></a>00496 <span class="comment">// Signification: un flot d&#39;entree</span>
<a name="l00497"></a>00497 <span class="comment">// Valeurs par defaut:</span>
<a name="l00498"></a>00498 <span class="comment">// Contraintes:</span>
<a name="l00499"></a>00499 <span class="comment">// Acces: NON ACCEDE</span>
<a name="l00500"></a>00500 <span class="comment">// Exception:</span>
<a name="l00501"></a>00501 <span class="comment">// Effets de bord:</span>
<a name="l00502"></a>00502 <span class="comment">// Postcondition:</span>
<a name="l00503"></a>00503 <span class="comment">//</span><span class="comment"></span>
<a name="l00504"></a>00504 <span class="comment">//! Reprend la loi de paroi</span>
<a name="l00505"></a>00505 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00506"></a>00506 <span class="comment">Signification: renvoie toujours 0&lt;br&gt;</span>
<a name="l00507"></a>00507 <span class="comment">Contraintes: */</span>
<a name="l00508"></a><a class="code" href="classMod__turb__hyd__base.html#a1755e8037465a666c47035d661971f86">00508</a> <span class="keywordtype">int</span> <a class="code" href="classMod__turb__hyd__base.html#a1755e8037465a666c47035d661971f86" title="Reprend la loi de paroi.">Mod_turb_hyd_base::reprendre</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00509"></a>00509 {
<a name="l00510"></a>00510   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>.<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>())
<a name="l00511"></a>00511     <a class="code" href="classMod__turb__hyd__base.html#a9bbad20e2c15207e599f4f60cd149d06">loipar</a>-&gt;<a class="code" href="classObjet__U.html#aa52bb63c6241025381b63a9fb2be7574" title="Reprise d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger : retourne toujours 1 dans cette imple...">reprendre</a>(is);
<a name="l00512"></a>00512   <span class="keywordflow">return</span> 0;
<a name="l00513"></a>00513 }
<a name="l00514"></a>00514 
<a name="l00515"></a>00515 <span class="comment">// Precondition:</span>
<a name="l00516"></a>00516 <span class="comment">// Parametre:</span>
<a name="l00517"></a>00517 <span class="comment">// Signification:</span>
<a name="l00518"></a>00518 <span class="comment">// Valeurs par defaut:</span>
<a name="l00519"></a>00519 <span class="comment">// Contraintes:</span>
<a name="l00520"></a>00520 <span class="comment">// Acces:</span>
<a name="l00521"></a>00521 <span class="comment">// Exception:</span>
<a name="l00522"></a>00522 <span class="comment">// Effets de bord:</span>
<a name="l00523"></a>00523 <span class="comment">// Postcondition:</span>
<a name="l00524"></a>00524 <span class="comment">//</span><span class="comment"></span>
<a name="l00525"></a>00525 <span class="comment">//! Effectue l&#39;ecriture d&#39;une identite si cela est necessaire.</span>
<a name="l00526"></a>00526 <span class="comment"></span><span class="comment">/** \return int&lt;br&gt;</span>
<a name="l00527"></a>00527 <span class="comment">Signification:&lt;br&gt;</span>
<a name="l00528"></a>00528 <span class="comment">Contraintes: */</span>
<a name="l00529"></a><a class="code" href="classMod__turb__hyd__base.html#a39cf0da006fd4860a0455689793f76b2">00529</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a39cf0da006fd4860a0455689793f76b2" title="Effectue l&#39;ecriture d&#39;une identite si cela est necessaire.">Mod_turb_hyd_base::a_faire</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00530"></a>00530 <span class="keyword"></span>{
<a name="l00531"></a>00531   <span class="keywordtype">int</span> afaire,special;
<a name="l00532"></a>00532   <a class="code" href="classEcritureLectureSpecial.html#a449e40a68eeabf8e552f23d8e4c32bcf" title="indique si le format special a ete demande en lecture active par sauvegarde xyz .... si le mode ecriture est special c.a.d si format de sauvegarde xyz alors special =1 a_faire=je_suis_maitre sinon special=0 , a_faire=1">EcritureLectureSpecial::is_ecriture_special</a>(special,afaire);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534   <span class="keywordflow">if</span> (afaire)
<a name="l00535"></a>00535     {
<a name="l00536"></a>00536       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> mon_ident(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00537"></a>00537       mon_ident += <a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().<a class="code" href="classEquation__base.html#aa8151a96f63719523bf50ddd832e0f8f" title="Renvoie le probleme associe a l&#39;equation.">probleme</a>().<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>().<a class="code" href="classDomaine.html#a87e2cdc035a26565e6fe481446aa4cd3" title="Renvoie le nom du domaine.">le_nom</a>();
<a name="l00538"></a>00538       <span class="keywordtype">double</span> temps = <a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().<a class="code" href="classEquation__base.html#a5a1fce9487b9a8dd17020914100c2c89">inconnue</a>().<a class="code" href="classChamp__Inc.html#a38da91792d3b4d3ab725a6edf7f62b5a" title="Appel a l&#39;objet sous-jacent Renvoie le temps courant.">temps</a>();
<a name="l00539"></a>00539       mon_ident += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(temps,<span class="stringliteral">&quot;%e&quot;</span>);
<a name="l00540"></a>00540       os &lt;&lt; mon_ident &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00541"></a>00541       os &lt;&lt; <a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>() &lt;&lt; finl;
<a name="l00542"></a>00542       os.<a class="code" href="classSortie.html#a2456baf1997d9a7a6310349929bccf30">flush</a>();
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544 }
<a name="l00545"></a>00545 
<a name="l00546"></a><a class="code" href="classMod__turb__hyd__base.html#a2583b69235a417f7c1e1b1c0745490af">00546</a> <span class="keywordtype">void</span> <a class="code" href="classMod__turb__hyd__base.html#a2583b69235a417f7c1e1b1c0745490af">Mod_turb_hyd_base::limiter_viscosite_turbulente</a>()
<a name="l00547"></a>00547 {
<a name="l00548"></a>00548 <span class="comment">// On initialise</span>
<a name="l00549"></a>00549   <span class="keywordtype">int</span> size = <a class="code" href="classMod__turb__hyd__base.html#a10bc51357037ef84800c74ed5e3302d0" title="Renvoie la viscosite turbulente.">viscosite_turbulente</a>().<a class="code" href="classChamp__Fonc.html#a60b75eadb0987d488884e24fcb72d1e5" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>().<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>();
<a name="l00550"></a>00550   <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; visco_turb = <a class="code" href="classMod__turb__hyd__base.html#a914a881c50bc2e8f6d9b8288084541b8">la_viscosite_turbulente</a>.<a class="code" href="classChamp__Fonc.html#a60b75eadb0987d488884e24fcb72d1e5" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>();
<a name="l00551"></a>00551   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a1ee5665cfd5c3f9dc2317e0f9044f854">borne_visco_turb</a>.<a class="code" href="classDoubleVect.html#a392c1f20b462563365389d28e0853867" title="Identique a size_reelle()">size</a>()==0)
<a name="l00552"></a>00552     <a class="code" href="classMod__turb__hyd__base.html#a1ee5665cfd5c3f9dc2317e0f9044f854">borne_visco_turb</a>=visco_turb; <span class="comment">//.resize(size);</span>
<a name="l00553"></a>00553   <a class="code" href="classMod__turb__hyd__base.html#a1ee5665cfd5c3f9dc2317e0f9044f854">borne_visco_turb</a> = <a class="code" href="classMod__turb__hyd__base.html#a35009f534e5190ea13e8aa2c27b49edc">XNUTM</a>;
<a name="l00554"></a>00554   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a4a4da011e96afb7c978c5bb58bbda26c">calcul_borne_locale_visco_turb_</a> &amp;&amp; <a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().<a class="code" href="classEquation__base.html#abc11e51aa75b4c7aa55c27f71eb2f2c4" title="Renvoie le schema en temps associe a l&#39;equation.">schema_temps</a>().<a class="code" href="classSchema__Temps__base.html#a247769eddf9c0bfcaabc50b8dd90d401" title="Renvoie le nombre de pas de temps effectues.">nb_pas_dt</a>() != 0)
<a name="l00555"></a>00555     {
<a name="l00556"></a>00556 <span class="comment">// On recalcule les bornes de la viscosite turbulente apres le premier pas de temps</span>
<a name="l00557"></a>00557       <span class="keyword">const</span> <a class="code" href="classOperateur__Diff__base.html" title="classe Operateur_Diff_base Cette classe est la base de la hierarchie des operateurs representant un t...">Operateur_Diff_base</a>&amp; op_diff = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classOperateur__Diff__base.html" title="classe Operateur_Diff_base Cette classe est la base de la hierarchie des operateurs representant un t...">Operateur_Diff_base</a>,<a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().operateur(0).l_op_base());
<a name="l00558"></a>00558       <span class="keyword">const</span> <a class="code" href="classOperateur__Conv__base.html" title="classe Operateur_Conv_base Cette classe est la base de la hierarchie des operateurs representant un t...">Operateur_Conv_base</a>&amp; op_conv = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classOperateur__Conv__base.html" title="classe Operateur_Conv_base Cette classe est la base de la hierarchie des operateurs representant un t...">Operateur_Conv_base</a>,<a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().operateur(1).l_op_base());
<a name="l00559"></a>00559       op_diff.<a class="code" href="classOperateur__Diff__base.html#a120ba0bfb0014c73bf3b809d4f9bd393">calculer_borne_locale</a>(<a class="code" href="classMod__turb__hyd__base.html#a1ee5665cfd5c3f9dc2317e0f9044f854">borne_visco_turb</a>, op_conv.<a class="code" href="classOperateur__Conv__base.html#a13cb02d4e31a7e61f7993282dae2268a">dt_stab_conv</a>(), <a class="code" href="classMod__turb__hyd__base.html#ae635e7c4caad7f8967fa332c82122d76">dt_diff_sur_dt_conv_</a>);
<a name="l00560"></a>00560     }
<a name="l00561"></a>00561 <span class="comment">// On borne la viscosite turbulente</span>
<a name="l00562"></a>00562   <span class="keywordtype">int</span> nb_elem = <a class="code" href="classMod__turb__hyd__base.html#a3e245f52b88a7261cbbf9a0cbc914f88" title="Renvoie l&#39;equation associee au modele de turbulence. (c&#39;est une equation du type Equation_base)">equation</a>().<a class="code" href="classEquation__base.html#a12d97ae801edc18f614523677921346e" title="Renvoie la zone discretisee associee a l&#39;equation.">zone_dis</a>().<a class="code" href="classZone__dis.html#a544a4bbef7158ed91f3dc33970340889" title="Appel a l&#39;objet sous-jacent. Renvoie la zone associee. (version const)">zone</a>().<a class="code" href="classZone.html#a7f249429803b27139a1c54436f6164a5" title="Renvoie le nombre d&#39;elements de la zone.">nb_elem</a>();
<a name="l00563"></a>00563   assert(nb_elem==size);
<a name="l00564"></a>00564   <span class="keywordtype">int</span> compt=0;
<a name="l00565"></a>00565   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;Mod_turb_hyd_base::limiter_viscosite_turbulente la_viscosite_turbulente before&quot;</span>,<a class="code" href="classMod__turb__hyd__base.html#a914a881c50bc2e8f6d9b8288084541b8">la_viscosite_turbulente</a>.<a class="code" href="classChamp__Fonc.html#a60b75eadb0987d488884e24fcb72d1e5" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>());
<a name="l00566"></a>00566 <span class="comment">// Debog::verifier(&quot;Mod_turb_hyd_base::limiter_viscosite_turbulente visco_turb before&quot;,visco_turb);</span>
<a name="l00567"></a>00567 <span class="comment">// Debog::verifier(&quot;Mod_turb_hyd_base::limiter_viscosite_turbulente borne_visco_turb&quot;,borne_visco_turb);</span>
<a name="l00568"></a>00568 <span class="comment">// Debog::verifier(&quot;Mod_turb_hyd_base::limiter_viscosite_turbulente corr_visco_turb before&quot;,corr_visco_turb);</span>
<a name="l00569"></a>00569   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> elem=0; elem&lt;nb_elem; elem++)
<a name="l00570"></a>00570     {
<a name="l00571"></a>00571       <span class="keywordflow">if</span> (visco_turb(elem) &gt; <a class="code" href="classMod__turb__hyd__base.html#a1ee5665cfd5c3f9dc2317e0f9044f854">borne_visco_turb</a>(elem))
<a name="l00572"></a>00572         {
<a name="l00573"></a>00573           compt++;
<a name="l00574"></a>00574           <a class="code" href="classMod__turb__hyd__base.html#a8a7000f6224311de17be1804de5857cc">corr_visco_turb</a>.<a class="code" href="classChamp__Fonc.html#a60b75eadb0987d488884e24fcb72d1e5" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>()(elem) = <a class="code" href="classMod__turb__hyd__base.html#a1ee5665cfd5c3f9dc2317e0f9044f854">borne_visco_turb</a>(elem) / visco_turb(elem);
<a name="l00575"></a>00575           visco_turb(elem) = <a class="code" href="classMod__turb__hyd__base.html#a1ee5665cfd5c3f9dc2317e0f9044f854">borne_visco_turb</a>(elem);
<a name="l00576"></a>00576         }
<a name="l00577"></a>00577       <span class="keywordflow">else</span>
<a name="l00578"></a>00578         <a class="code" href="classMod__turb__hyd__base.html#a8a7000f6224311de17be1804de5857cc">corr_visco_turb</a>.<a class="code" href="classChamp__Fonc.html#a60b75eadb0987d488884e24fcb72d1e5" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>()(elem) = 1.;
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580   <a class="code" href="classMod__turb__hyd__base.html#a8a7000f6224311de17be1804de5857cc">corr_visco_turb</a>.<a class="code" href="classChamp__Fonc.html#a8f5d4559f1ea29cfb8ba1eafae745c7f" title="Appel a l&#39;objet sous-jacent Change le temps courant du champ, et le renvoie.">changer_temps</a>(<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;inconnue().temps());
<a name="l00581"></a>00581   visco_turb.<a class="code" href="classDoubleVect.html#abfebbc2f685ce7bc4b80c720d7da9bf3">echange_espace_virtuel</a>();
<a name="l00582"></a>00582 <span class="comment">// Debog::verifier(&quot;Mod_turb_hyd_base::limiter_viscosite_turbulente corr_visco_turb after&quot;,corr_visco_turb);</span>
<a name="l00583"></a>00583 <span class="comment">// Debog::verifier(&quot;Mod_turb_hyd_base::limiter_viscosite_turbulente visco_turb after&quot;,visco_turb);</span>
<a name="l00584"></a>00584   <a class="code" href="Op__Div__VEFP1B__Elem_8cpp.html#a45261662b3b88d5db461b3fc99246e5a">Debog::verifier</a>(<span class="stringliteral">&quot;Mod_turb_hyd_base::limiter_viscosite_turbulente la_viscosite_turbulente after&quot;</span>,<a class="code" href="classMod__turb__hyd__base.html#a914a881c50bc2e8f6d9b8288084541b8">la_viscosite_turbulente</a>.<a class="code" href="classChamp__Fonc.html#a60b75eadb0987d488884e24fcb72d1e5" title="Appel a l&#39;objet sous-jacent Renvoie le tableau des valeurs du champ.">valeurs</a>());
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 <span class="comment">// On imprime</span>
<a name="l00587"></a>00587   <span class="keywordtype">int</span> imprimer_compt=0;
<a name="l00588"></a>00588   <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps().temps_impr() &lt;= <a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps().pas_de_temps())
<a name="l00589"></a>00589     imprimer_compt=1;
<a name="l00590"></a>00590   <span class="keywordflow">else</span>
<a name="l00591"></a>00591     {
<a name="l00592"></a>00592       <span class="keywordflow">if</span> (<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps().nb_pas_dt()==0)
<a name="l00593"></a>00593         imprimer_compt=0;
<a name="l00594"></a>00594       <span class="keywordflow">else</span>
<a name="l00595"></a>00595         {
<a name="l00596"></a>00596 <span class="comment">// Voir Schema_Temps_base::limpr pour information sur epsilon et modf</span>
<a name="l00597"></a>00597           <span class="keywordtype">double</span> i, j, epsilon = 1.e-8;
<a name="l00598"></a>00598           modf(<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps().temps_courant()/<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps().temps_impr()+epsilon, &amp;i);
<a name="l00599"></a>00599           modf((<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps().temps_courant()-<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps().pas_de_temps())/<a class="code" href="classMod__turb__hyd__base.html#a22206d9179f4dd21d4de2b73d2004e48">mon_equation</a>-&gt;schema_temps().temps_impr()+epsilon, &amp;j);
<a name="l00600"></a>00600           <span class="keywordflow">if</span> ( i&gt;j )
<a name="l00601"></a>00601             imprimer_compt=1;
<a name="l00602"></a>00602         }
<a name="l00603"></a>00603     }
<a name="l00604"></a>00604   <span class="keywordflow">if</span> (imprimer_compt)
<a name="l00605"></a>00605     {
<a name="l00606"></a>00606 <span class="comment">// PL: optimization to avoid 2 mp_sum instead 1:</span>
<a name="l00607"></a>00607       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> tmp(2);
<a name="l00608"></a>00608       tmp(0)=compt;
<a name="l00609"></a>00609       tmp(1)=size;
<a name="l00610"></a>00610       <a class="code" href="communications_8cpp.html#a5f15b8a5c15449d3277ff3cde06fa68a">mp_sum_for_each_item</a>(tmp);
<a name="l00611"></a>00611       <span class="comment">/*      compt=mp_sum(compt);</span>
<a name="l00612"></a>00612 <span class="comment">            size=mp_sum(size); */</span>
<a name="l00613"></a>00613       <span class="keywordtype">double</span> pourcent = 100*(float(tmp[0])/tmp[1]);
<a name="l00614"></a>00614       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>() &amp;&amp; pourcent&gt;0)
<a name="l00615"></a>00615         <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a>&lt;&lt;<span class="stringliteral">&quot;\nTurbulent viscosity has been limited on &quot;</span>&lt;&lt;pourcent&lt;&lt;<span class="stringliteral">&quot; % of cells mesh.&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00616"></a>00616     }
<a name="l00617"></a>00617 }
<a name="l00618"></a>00618 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:35 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
