<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Math/Parser.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Math/Parser.cpp</div>  </div>
</div>
<div class="contents">
<a href="Parser_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2021, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Parser.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Math</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/41</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="Parser_8h.html">Parser.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="StdFunction_8h.html">StdFunction.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="StringTokenizer_8h.html">StringTokenizer.h</a>&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="keywordtype">void</span> <a class="code" href="Parser_8cpp.html#aa7f696ea7248915c3f9093a8cf534f3d">debug</a>(<a class="code" href="classStringTokenizer.html">StringTokenizer</a>*);
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <a class="code" href="classConstante.html">Constante</a> <a class="code" href="classParser.html#a3c98e709ec1a34e4f02adcdce31fc641">Parser::c_pi</a>;
<a name="l00030"></a>00030 <a class="code" href="classListUnaryFunction.html">ListUnaryFunction</a> <a class="code" href="classParser.html#ab3c8b96987664e614e3cf3cc5db69fff">Parser::unary_func</a>;
<a name="l00031"></a>00031 <a class="code" href="classListeConstantes.html">ListeConstantes</a> <a class="code" href="classParser.html#adb2ee58716b992029b5f312733b03409">Parser::les_cst</a>;
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="comment">/* Les identificateurs suivants doivent etre definis de maniere unique pour chaque fonction */</span>
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="classParser.html#a12234f6cd36b61af4b50c94a179422c1">00035</a> <a class="code" href="classParser.html#a12234f6cd36b61af4b50c94a179422c1">Parser::Parser</a>()
<a name="l00036"></a>00036 {
<a name="l00037"></a>00037   <a class="code" href="classParser.html#a598564d3ce9cebcc8b0a4f406a1c4bd4">init_parser</a>();
<a name="l00038"></a>00038   <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a>=0;
<a name="l00039"></a>00039   <a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a>=NULL;
<a name="l00040"></a>00040   <a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a>=<span class="keyword">new</span> <a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a>(<span class="stringliteral">&quot;0&quot;</span>);
<a name="l00041"></a>00041   <a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>=1;
<a name="l00042"></a>00042   <a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>=0;
<a name="l00043"></a>00043   <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a> = <span class="keyword">new</span> <a class="code" href="classVariable.html">Variable</a>*[<a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>];
<a name="l00044"></a>00044   <a class="code" href="classParser.html#a85e1bbfed250632c058f795ed6a1b7fa">impuls_tn</a> = -1.;
<a name="l00045"></a>00045   <a class="code" href="classParser.html#a71ebfa16fcbd901cc6d76017a624bff3">impuls_T</a> = 1.;
<a name="l00046"></a>00046   <a class="code" href="classParser.html#a30a29e23680321ec5f19d7e65f75c09e">impuls_t0</a> = 0.;
<a name="l00047"></a>00047   <a class="code" href="classParser.html#a927b49772bf8b70779447624428a0495">impuls_tempo</a> = 0.;
<a name="l00048"></a>00048 }
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="classParser.html#acf58c19ff11509154be1606a4cf48a6c">00050</a> <a class="code" href="classParser.html#a12234f6cd36b61af4b50c94a179422c1">Parser::Parser</a>(<span class="keyword">const</span> <a class="code" href="classParser.html">Parser</a>&amp; p)
<a name="l00051"></a>00051 {
<a name="l00052"></a>00052   <a class="code" href="classParser.html#a598564d3ce9cebcc8b0a4f406a1c4bd4">init_parser</a>();
<a name="l00053"></a>00053   <a class="code" href="classParser.html#a85e1bbfed250632c058f795ed6a1b7fa">impuls_tn</a> = p.<a class="code" href="classParser.html#a85e1bbfed250632c058f795ed6a1b7fa">impuls_tn</a>;
<a name="l00054"></a>00054   <a class="code" href="classParser.html#a71ebfa16fcbd901cc6d76017a624bff3">impuls_T</a> = p.<a class="code" href="classParser.html#a71ebfa16fcbd901cc6d76017a624bff3">impuls_T</a>;
<a name="l00055"></a>00055   <a class="code" href="classParser.html#a30a29e23680321ec5f19d7e65f75c09e">impuls_t0</a> = p.<a class="code" href="classParser.html#a30a29e23680321ec5f19d7e65f75c09e">impuls_t0</a>;
<a name="l00056"></a>00056   <a class="code" href="classParser.html#a927b49772bf8b70779447624428a0495">impuls_tempo</a> = p.<a class="code" href="classParser.html#a927b49772bf8b70779447624428a0495">impuls_tempo</a>;
<a name="l00057"></a>00057 
<a name="l00058"></a>00058   <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a>=p.<a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a>;
<a name="l00059"></a>00059   <a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>=p.<a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>;
<a name="l00060"></a>00060   <a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>=p.<a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>;
<a name="l00061"></a>00061 
<a name="l00062"></a>00062   <a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a>=NULL;
<a name="l00063"></a>00063 
<a name="l00064"></a>00064   <a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a>=<span class="keyword">new</span> <a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a>(p.<a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a>);
<a name="l00065"></a>00065 
<a name="l00066"></a>00066   <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a> = <span class="keyword">new</span> <a class="code" href="classVariable.html">Variable</a>*[<a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>];
<a name="l00067"></a>00067   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>; i++)
<a name="l00068"></a>00068     {
<a name="l00069"></a>00069       <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>[i] = <span class="keyword">new</span> <a class="code" href="classVariable.html">Variable</a>(*(p.<a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>[i]));
<a name="l00070"></a>00070     }
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <a class="code" href="classParser.html#aeb17e3560dffd7374626ed4577a30a7b">parseString</a>();
<a name="l00073"></a>00073 }
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a><a class="code" href="classParser.html#a351bf1e1eef403634967bdfb8f26719f">00076</a> <a class="code" href="classParser.html#a12234f6cd36b61af4b50c94a179422c1">Parser::Parser</a>(<a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a>&amp; s,<span class="keywordtype">int</span> n)
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078   <a class="code" href="classParser.html#a598564d3ce9cebcc8b0a4f406a1c4bd4">init_parser</a>();
<a name="l00079"></a>00079   <a class="code" href="classParser.html#a85e1bbfed250632c058f795ed6a1b7fa">impuls_tn</a> = -1.;
<a name="l00080"></a>00080   <a class="code" href="classParser.html#a71ebfa16fcbd901cc6d76017a624bff3">impuls_T</a> = 1.;
<a name="l00081"></a>00081   <a class="code" href="classParser.html#a30a29e23680321ec5f19d7e65f75c09e">impuls_t0</a> = 0.;
<a name="l00082"></a>00082   <a class="code" href="classParser.html#a927b49772bf8b70779447624428a0495">impuls_tempo</a> = 0.;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a>=0;
<a name="l00085"></a>00085   <a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a>=NULL;
<a name="l00086"></a>00086   <a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a>=<span class="keyword">new</span> <a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a>(s);
<a name="l00087"></a>00087   <a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>=n;
<a name="l00088"></a>00088   <a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>=0;
<a name="l00089"></a>00089   <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a> = <span class="keyword">new</span> <a class="code" href="classVariable.html">Variable</a>*[<a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>];
<a name="l00090"></a>00090 }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="classParser.html#a598564d3ce9cebcc8b0a4f406a1c4bd4">00093</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#a598564d3ce9cebcc8b0a4f406a1c4bd4">Parser::init_parser</a>()
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095   srand48(1);
<a name="l00096"></a>00096   <span class="keywordflow">if</span> (<a class="code" href="classParser.html#ab3c8b96987664e614e3cf3cc5db69fff">unary_func</a>.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>()==0)
<a name="l00097"></a>00097     {
<a name="l00098"></a>00098       <a class="code" href="classSin.html">Sin</a> SIN;
<a name="l00099"></a>00099       <a class="code" href="classAsin.html">Asin</a> ASIN;
<a name="l00100"></a>00100       <a class="code" href="classCos.html">Cos</a> COS;
<a name="l00101"></a>00101       <a class="code" href="classAcos.html">Acos</a> ACOS;
<a name="l00102"></a>00102       <a class="code" href="classTan.html">Tan</a> TAN;
<a name="l00103"></a>00103       <a class="code" href="classAtan.html">Atan</a> ATAN;
<a name="l00104"></a>00104       <a class="code" href="classLn.html">Ln</a> LN;
<a name="l00105"></a>00105       <a class="code" href="classExp.html">Exp</a> EXP;
<a name="l00106"></a>00106       <a class="code" href="classSqrt.html">Sqrt</a> SQRT;
<a name="l00107"></a>00107       <a class="code" href="classInt.html">Int</a> INT;
<a name="l00108"></a>00108       <a class="code" href="classErf.html">Erf</a> ERF;
<a name="l00109"></a>00109       <a class="code" href="classRnd.html">Rnd</a> RND;
<a name="l00110"></a>00110       <a class="code" href="classCosh.html">Cosh</a> COSH;
<a name="l00111"></a>00111       <a class="code" href="classSinh.html">Sinh</a> SINH;
<a name="l00112"></a>00112       <a class="code" href="classTanh.html">Tanh</a> TANH;
<a name="l00113"></a>00113       <a class="code" href="classAtanh.html">Atanh</a> ATANH;
<a name="l00114"></a>00114       <a class="code" href="classNot.html">Not</a> NOT;
<a name="l00115"></a>00115       <a class="code" href="classAbs.html">Abs</a> ABS;
<a name="l00116"></a>00116       <a class="code" href="classSgn.html">Sgn</a> SGN;
<a name="l00117"></a>00117       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(SIN);
<a name="l00118"></a>00118       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(ASIN);
<a name="l00119"></a>00119       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(COS);
<a name="l00120"></a>00120       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(ACOS);
<a name="l00121"></a>00121       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(TAN);
<a name="l00122"></a>00122       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(ATAN);
<a name="l00123"></a>00123       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(LN);
<a name="l00124"></a>00124       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(EXP);
<a name="l00125"></a>00125       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(SQRT);
<a name="l00126"></a>00126       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(INT);
<a name="l00127"></a>00127       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(ERF);
<a name="l00128"></a>00128       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(RND);
<a name="l00129"></a>00129       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(COSH);
<a name="l00130"></a>00130       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(SINH);
<a name="l00131"></a>00131       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(TANH);
<a name="l00132"></a>00132       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(NOT);
<a name="l00133"></a>00133       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(ABS);
<a name="l00134"></a>00134       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(SGN);
<a name="l00135"></a>00135       <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">addFunc</a>(ATANH);
<a name="l00136"></a>00136       <a class="code" href="classParser.html#a3c98e709ec1a34e4f02adcdce31fc641">c_pi</a>.<a class="code" href="classConstante.html#ad5eb7eb68924558ec9d2d155371f78f8" title="Donne un nom a l&#39;Objet_U Methode virtuelle a surcharger.">nommer</a>(<a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(<span class="stringliteral">&quot;PI&quot;</span>));
<a name="l00137"></a>00137       <a class="code" href="classParser.html#a3c98e709ec1a34e4f02adcdce31fc641">c_pi</a>.<a class="code" href="classConstante.html#ab957ce7f67d0a172695412703e475b40">setValue</a>(2*asin(1.));
<a name="l00138"></a>00138       <a class="code" href="classParser.html#af26ac7e95897cc2a6c3099958af6af54">addCst</a>(<a class="code" href="classParser.html#a3c98e709ec1a34e4f02adcdce31fc641">c_pi</a>);
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140 }
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="Parser_8cpp.html#afa76c6206bfd05d74517be491c6d34e8">00143</a> <span class="keywordtype">void</span> <a class="code" href="Parser_8cpp.html#afa76c6206bfd05d74517be491c6d34e8">destroy</a>(<a class="code" href="classPNode.html">PNode</a>* p)
<a name="l00144"></a>00144 {
<a name="l00145"></a>00145   <span class="keywordflow">if</span> (p!=NULL)
<a name="l00146"></a>00146     {
<a name="l00147"></a>00147       <span class="keywordflow">if</span> (p-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a>!=NULL) <a class="code" href="Parser_8cpp.html#afa76c6206bfd05d74517be491c6d34e8">destroy</a>(p-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a>);
<a name="l00148"></a>00148       <span class="keywordflow">if</span> (p-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a>!=NULL) <a class="code" href="Parser_8cpp.html#afa76c6206bfd05d74517be491c6d34e8">destroy</a>(p-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a>);
<a name="l00149"></a>00149       <span class="keyword">delete</span> p;
<a name="l00150"></a>00150       p=NULL;
<a name="l00151"></a>00151     }
<a name="l00152"></a>00152 }
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="classParser.html#a3e658b5917a93a3ef648050d060e3a93">00154</a> <a class="code" href="classParser.html#a3e658b5917a93a3ef648050d060e3a93">Parser::~Parser</a>()
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156   <span class="keywordflow">if</span> (<a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a> !=NULL) <a class="code" href="Parser_8cpp.html#afa76c6206bfd05d74517be491c6d34e8">destroy</a>(<a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a>);
<a name="l00157"></a>00157   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i =0; i&lt;<a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>; i++)
<a name="l00158"></a>00158     <span class="keyword">delete</span> <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>[i];
<a name="l00159"></a>00159   <span class="keyword">delete</span> <a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a>;
<a name="l00160"></a>00160   <span class="keyword">delete</span>[] <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>;
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 
<a name="l00164"></a><a class="code" href="classParser.html#a1d736281fec758c5581a0d7ee7852643">00164</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#a1d736281fec758c5581a0d7ee7852643">Parser::setNbVar</a>(<span class="keywordtype">int</span> nvar)
<a name="l00165"></a>00165 {
<a name="l00166"></a>00166   <span class="keywordflow">if</span> (<a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>&gt;0)
<a name="l00167"></a>00167     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i =0; i&lt;<a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>; i++)
<a name="l00168"></a>00168       <span class="keyword">delete</span> <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>[i];
<a name="l00169"></a>00169   <span class="keyword">delete</span>[] <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>;
<a name="l00170"></a>00170   <a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>=nvar;
<a name="l00171"></a>00171   ivar=0;
<a name="l00172"></a>00172   <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a> = <span class="keyword">new</span> <a class="code" href="classVariable.html">Variable</a>*[<a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>];
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 
<a name="l00175"></a><a class="code" href="classParser.html#aeb17e3560dffd7374626ed4577a30a7b">00175</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#aeb17e3560dffd7374626ed4577a30a7b">Parser::parseString</a>()
<a name="l00176"></a>00176 {
<a name="l00177"></a>00177   <span class="keywordflow">if</span> (<a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a>!=NULL) <a class="code" href="Parser_8cpp.html#afa76c6206bfd05d74517be491c6d34e8">destroy</a>(<a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a>);
<a name="l00178"></a>00178   <a class="code" href="Stack_8h.html#a498e52420bf33abacef3463251f54d48">PSTACK</a>(<a class="code" href="classPNode.html">PNode</a>) st_ob(20);
<a name="l00179"></a>00179   <a class="code" href="Stack_8h.html#af7fdefcd63ccbabb1f42ca43b6f8ba75">STACK</a>(<span class="keywordtype">int</span>) st_op(20);
<a name="l00180"></a>00180   <a class="code" href="classStringTokenizer.html">StringTokenizer</a> tok(*<a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a>);
<a name="l00181"></a>00181   <span class="keywordflow">if</span> (!tok.<a class="code" href="classStringTokenizer.html#a999cdb95393f479df83c1be95e4941cf">check_GRP</a>())
<a name="l00182"></a>00182     {
<a name="l00183"></a>00183       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Expression &quot;</span> &lt;&lt; *<a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a> &lt;&lt; <span class="stringliteral">&quot; does not contain the same number of opening and closing parenthesis.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00184"></a>00184       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00185"></a>00185     }
<a name="l00186"></a>00186 
<a name="l00187"></a>00187   <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 0;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="keywordflow">while</span> ( (tok.<a class="code" href="classStringTokenizer.html#adebe7434de91ba80e7c921e37f57d65b">nextToken</a>()) != <a class="code" href="classStringTokenizer.html#a482db4ea8618f02f6734f369466ab856">StringTokenizer::EOS</a>)
<a name="l00190"></a>00190     {
<a name="l00191"></a>00191       <span class="keywordflow">switch</span> (<a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a>)
<a name="l00192"></a>00192         {
<a name="l00193"></a>00193         <span class="keywordflow">case</span> 0:
<a name="l00194"></a>00194           <a class="code" href="classParser.html#a275a83a3e2483da3a3d497e27cb68a6a">parserState0</a>(&amp;tok,&amp;st_ob,&amp;st_op);
<a name="l00195"></a>00195           <span class="keywordflow">break</span>;
<a name="l00196"></a>00196         <span class="keywordflow">case</span> 1:
<a name="l00197"></a>00197           <a class="code" href="classParser.html#a50c9be41675cf6bdfe5369f695f7e9da">parserState1</a>(&amp;tok,&amp;st_ob,&amp;st_op);
<a name="l00198"></a>00198           <span class="keywordflow">break</span>;
<a name="l00199"></a>00199         <span class="keywordflow">case</span> 2:
<a name="l00200"></a>00200           <a class="code" href="classParser.html#a536499958b245210394be9e04910a774">parserState2</a>(&amp;tok,&amp;st_ob,&amp;st_op);
<a name="l00201"></a>00201           <span class="keywordflow">break</span>;
<a name="l00202"></a>00202         <span class="keywordflow">case</span> 3:
<a name="l00203"></a>00203           <span class="keywordflow">break</span>;
<a name="l00204"></a>00204         <span class="keywordflow">default</span> :
<a name="l00205"></a>00205           <span class="keywordflow">break</span>;
<a name="l00206"></a>00206         }
<a name="l00207"></a>00207     }
<a name="l00208"></a>00208   <a class="code" href="classParser.html#a536499958b245210394be9e04910a774">parserState2</a>(&amp;tok,&amp;st_ob,&amp;st_op);
<a name="l00209"></a>00209   <a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a> = (<a class="code" href="classPNode.html">PNode</a>*) *st_ob.getBase();
<a name="l00210"></a>00210 }
<a name="l00211"></a>00211 
<a name="l00212"></a><a class="code" href="classParser.html#a8c5bb9c0595d2149df2c2310026fdba7">00212</a> <span class="keywordtype">double</span> <a class="code" href="classParser.html#a8c5bb9c0595d2149df2c2310026fdba7">Parser::evalFunc</a>(<a class="code" href="classPNode.html">PNode</a>* node)
<a name="l00213"></a>00213 {
<a name="l00214"></a>00214   <span class="comment">/* OC : Nouvelle version : */</span>
<a name="l00215"></a>00215   <span class="keywordflow">if</span> (node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>&lt;=0)
<a name="l00216"></a>00216     {
<a name="l00217"></a>00217       <a class="code" href="classUnaryFunction.html" title="Definit une constante dans le jeu de donnees.">UnaryFunction</a>&amp; f = <a class="code" href="classParser.html#ab3c8b96987664e614e3cf3cc5db69fff">unary_func</a>[-node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>-1]; <span class="comment">//!&lt; OC attention, dans node-&gt;value c est l&#39;oppose de l&#39;indice de la func dans la liste afin de distinguer operateur binaire (&gt;0) et fonctions unaires (&lt;0&gt; Il est donc necessaire de prendre -node-&gt;value ici pour referencer un element de la liste De plus, on rajoute +1 car le zero ne doit pas etre utiliser pour les fonctions</span>
<a name="l00218"></a>00218 <span class="comment"></span><span class="comment">//</span>
<a name="l00219"></a>00219 <span class="comment">//</span>
<a name="l00220"></a>00220 <span class="comment">//</span>
<a name="l00221"></a>00221       <span class="keywordflow">return</span> f.<a class="code" href="classUnaryFunction.html#a3c4fbe2e08a22f69903753d809abd675">eval</a>(<a class="code" href="classParser.html#ab239c68e7987963005bc131b7db294cf">eval</a>(node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a>));
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223   <span class="keywordflow">else</span>
<a name="l00224"></a>00224     {
<a name="l00225"></a>00225       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;method evalFunc : Unknown func !!!&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00226"></a>00226       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00227"></a>00227       <span class="keywordflow">return</span> -1;
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229 }
<a name="l00230"></a>00230 
<a name="l00231"></a>00231 <span class="comment">// Ne pas inliner car sinon Parser::eval(PNode* node) plus souvent appelee encore</span>
<a name="l00232"></a>00232 <span class="comment">// ne sera peut etre pas inlinee...</span>
<a name="l00233"></a><a class="code" href="classParser.html#a02a55d31701b49f11d84009a6d9deabd">00233</a> <span class="keywordtype">double</span> <a class="code" href="classParser.html#a02a55d31701b49f11d84009a6d9deabd">Parser::evalOp</a>(<a class="code" href="classPNode.html">PNode</a>* node)
<a name="l00234"></a>00234 {
<a name="l00235"></a>00235 <span class="comment">// PL 12/11/2010, reecriture avec switch pour optimisation</span>
<a name="l00236"></a>00236   <span class="keywordtype">double</span> x = (node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a>  != NULL ? <a class="code" href="classParser.html#ab239c68e7987963005bc131b7db294cf">eval</a>(node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a>)  : 0);
<a name="l00237"></a>00237   <span class="keywordtype">double</span> y = (node-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a> != NULL ? <a class="code" href="classParser.html#ab239c68e7987963005bc131b7db294cf">eval</a>(node-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a>) : 0);
<a name="l00238"></a>00238   <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>)
<a name="l00239"></a>00239     {
<a name="l00240"></a>00240     <span class="keywordflow">case</span> 0: <span class="comment">//!&lt; ADD</span>
<a name="l00241"></a>00241 <span class="comment"></span>      <span class="keywordflow">return</span> x + y;
<a name="l00242"></a>00242     <span class="keywordflow">case</span> 1: <span class="comment">//!&lt; SUBTRACT</span>
<a name="l00243"></a>00243 <span class="comment"></span>      <span class="keywordflow">return</span>  x - y;
<a name="l00244"></a>00244     <span class="keywordflow">case</span> 2: <span class="comment">//!&lt; MULTIPLY</span>
<a name="l00245"></a>00245 <span class="comment"></span>      <span class="keywordflow">return</span> x * y;
<a name="l00246"></a>00246     <span class="keywordflow">case</span> 3: <span class="comment">//!&lt; DIVIDE</span>
<a name="l00247"></a>00247 <span class="comment"></span>      <span class="keywordflow">if</span> (y==0)
<a name="l00248"></a>00248         {
<a name="l00249"></a>00249           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in the Parser : x/y calculated with y equals 0. You are using a formulae with a division per 0.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00250"></a>00250           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00251"></a>00251         }
<a name="l00252"></a>00252       <span class="keywordflow">return</span> x/y;
<a name="l00253"></a>00253     <span class="keywordflow">case</span> 4: <span class="comment">//!&lt; POWER</span>
<a name="l00254"></a>00254 <span class="comment"></span>      <span class="keywordflow">if</span> (y != (<span class="keywordtype">int</span>)(y) &amp;&amp; x&lt;0)
<a name="l00255"></a>00255         {
<a name="l00256"></a>00256           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in the Parser : x^y calculated with negative value for x and y real.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00257"></a>00257           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00258"></a>00258         }
<a name="l00259"></a>00259       <span class="keywordflow">return</span> pow(x,y);
<a name="l00260"></a>00260     <span class="keywordflow">case</span> 5: <span class="comment">//!&lt; LT</span>
<a name="l00261"></a>00261 <span class="comment"></span>      <span class="keywordflow">return</span> (x&lt;y)?1:0;
<a name="l00262"></a>00262     <span class="keywordflow">case</span> 6: <span class="comment">//!&lt; GT</span>
<a name="l00263"></a>00263 <span class="comment"></span>      <span class="keywordflow">return</span> (x&gt;y)?1:0;
<a name="l00264"></a>00264     <span class="keywordflow">case</span> 7: <span class="comment">//!&lt; LE</span>
<a name="l00265"></a>00265 <span class="comment"></span>      <span class="keywordflow">return</span> (x&lt;=y)?1:0;
<a name="l00266"></a>00266     <span class="keywordflow">case</span> 8: <span class="comment">//!&lt; GE</span>
<a name="l00267"></a>00267 <span class="comment"></span>      <span class="keywordflow">return</span> (x&gt;=y)?1:0;
<a name="l00268"></a>00268     <span class="keywordflow">case</span> 9: <span class="comment">//!&lt; MOD</span>
<a name="l00269"></a>00269 <span class="comment"></span>      <span class="keywordflow">return</span> ((<span class="keywordtype">int</span>)(x))%((int)(y));
<a name="l00270"></a>00270     <span class="keywordflow">case</span> 10: <span class="comment">//!&lt; MAX</span>
<a name="l00271"></a>00271 <span class="comment"></span>      <span class="keywordflow">return</span> (x&gt;y)?x:y;
<a name="l00272"></a>00272     <span class="keywordflow">case</span> 11: <span class="comment">//!&lt; MIN</span>
<a name="l00273"></a>00273 <span class="comment"></span>      <span class="keywordflow">return</span> (x&lt;y)?x:y;
<a name="l00274"></a>00274     <span class="keywordflow">case</span> 12: <span class="comment">//!&lt; AND</span>
<a name="l00275"></a>00275 <span class="comment"></span>      <span class="keywordflow">return</span> x &amp;&amp; y;
<a name="l00276"></a>00276     <span class="keywordflow">case</span> 13: <span class="comment">//!&lt; OR</span>
<a name="l00277"></a>00277 <span class="comment"></span>      <span class="keywordflow">return</span> x || y;
<a name="l00278"></a>00278     <span class="keywordflow">case</span> 14: <span class="comment">//!&lt; EQ</span>
<a name="l00279"></a>00279 <span class="comment"></span>      <span class="keywordflow">return</span> (x == y);
<a name="l00280"></a>00280     <span class="keywordflow">case</span> 15: <span class="comment">//!&lt; NEQ</span>
<a name="l00281"></a>00281 <span class="comment"></span>      <span class="keywordflow">return</span> (x != y);
<a name="l00282"></a>00282     <span class="keywordflow">default</span>:
<a name="l00283"></a>00283       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Method evalOp : Unknown op &quot;</span> &lt;&lt; (int)node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a> &lt;&lt; <span class="stringliteral">&quot;!!!&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00284"></a>00284       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00285"></a>00285       <span class="keywordflow">return</span> 0;
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287 }
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 
<a name="l00290"></a><a class="code" href="classParser.html#ae4a246d6aaa49225b7d05d75bf398b9f">00290</a> <span class="keywordtype">int</span> <a class="code" href="classParser.html#ae4a246d6aaa49225b7d05d75bf398b9f">Parser::precedence</a>(<span class="keywordtype">int</span> op)
<a name="l00291"></a>00291 {
<a name="l00292"></a>00292   <span class="keywordtype">int</span> p=100;
<a name="l00293"></a>00293   <span class="keywordflow">if</span> (op == <a class="code" href="classStringTokenizer.html#af054f2588d2b256680836ecf6fda39fa">StringTokenizer::ADD</a>)
<a name="l00294"></a>00294     p=1;
<a name="l00295"></a>00295   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op == <a class="code" href="classStringTokenizer.html#ae8a4564f543a385d0be243a790cd9e8d">StringTokenizer::SUBTRACT</a>)
<a name="l00296"></a>00296     p=2;
<a name="l00297"></a>00297   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#ac6e742fcb1335226f67370b63b432190">StringTokenizer::DIVIDE</a>)
<a name="l00298"></a>00298     p=3;
<a name="l00299"></a>00299   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#a5f7c0440698c64a8bbfaeef871f53158">StringTokenizer::MULTIPLY</a>)
<a name="l00300"></a>00300     p=3;
<a name="l00301"></a>00301   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#aa16b624d07d9001e051805b20712acd4">StringTokenizer::POWER</a>)
<a name="l00302"></a>00302     p=5;
<a name="l00303"></a>00303   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#aa7b9bf93a60008ae21e6645f9661a086">StringTokenizer::LT</a>)
<a name="l00304"></a>00304     p=0;
<a name="l00305"></a>00305   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#a91e6890abb8a36e6cd19df6205344f65">StringTokenizer::GT</a>)
<a name="l00306"></a>00306     p=0;
<a name="l00307"></a>00307   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#ab1f46669f879f9d761df606719b9f2d1">StringTokenizer::LE</a>)
<a name="l00308"></a>00308     p=0;
<a name="l00309"></a>00309   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#aa7243c09d6687bde2b0cb953229533be">StringTokenizer::GE</a>)
<a name="l00310"></a>00310     p=0;
<a name="l00311"></a>00311   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#abdc36f6e49e953af9008ed5aeec015ec">StringTokenizer::MOD</a>)
<a name="l00312"></a>00312     p=0;
<a name="l00313"></a>00313   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#af93fce247ccdc8ebbd155106e9588ef6">StringTokenizer::MAX</a>)
<a name="l00314"></a>00314     p=0;
<a name="l00315"></a>00315   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#a74f4778bb362e63b43f9762ad236091f">StringTokenizer::MIN</a>)
<a name="l00316"></a>00316     p=0;
<a name="l00317"></a>00317   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#a034f1b0e3a04d52ff6f6f6078bd1ac8c">StringTokenizer::AND</a>)
<a name="l00318"></a>00318     p=0;
<a name="l00319"></a>00319   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#af59aaf08d0a0b638d7c6a76c78883365">StringTokenizer::OR</a>)
<a name="l00320"></a>00320     p=0;
<a name="l00321"></a>00321   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#ad6c53e846893d92fedd3f6fbffb3b9e6">StringTokenizer::EQ</a>)
<a name="l00322"></a>00322     p=0;
<a name="l00323"></a>00323   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#afe8a2913da000de2c7775c1a41915c97">StringTokenizer::NEQ</a>)
<a name="l00324"></a>00324     p=0;
<a name="l00325"></a>00325   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a>)
<a name="l00326"></a>00326     p=-1;
<a name="l00327"></a>00327   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op ==  <a class="code" href="classStringTokenizer.html#adfae8a077061ef4ae4e815a355d8e1c1">StringTokenizer::ENDGRP</a>)
<a name="l00328"></a>00328     p=-1;
<a name="l00329"></a>00329   <span class="keywordflow">return</span> p;
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="classParser.html#a275a83a3e2483da3a3d497e27cb68a6a">00332</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#a275a83a3e2483da3a3d497e27cb68a6a">Parser::parserState0</a>(<a class="code" href="classStringTokenizer.html">StringTokenizer</a>* tokenizer, <a class="code" href="Stack_8h.html#a498e52420bf33abacef3463251f54d48">PSTACK</a>(<a class="code" href="classPNode.html">PNode</a>)* ob, <a class="code" href="Stack_8h.html#af7fdefcd63ccbabb1f42ca43b6f8ba75">STACK</a>(<span class="keywordtype">int</span>)* op)
<a name="l00333"></a>00333 {
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> == <a class="code" href="classStringTokenizer.html#a53b88292d51bd88ff964529ff7550faf">StringTokenizer::STRING</a>)
<a name="l00336"></a>00336     {
<a name="l00337"></a>00337       <span class="keywordtype">int</span> trouv = <a class="code" href="classParser.html#aa4ea2c8e8d28d1b83f213cc24deaa774">searchVar</a>(tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a46dddfffe9a4d8c4caf34dd41fccc9c9">getSValue</a>());
<a name="l00338"></a>00338 
<a name="l00339"></a>00339       <span class="keywordflow">if</span> (trouv&gt;-1)
<a name="l00340"></a>00340         {
<a name="l00341"></a>00341           <a class="code" href="classPNode.html">PNode</a> *node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00342"></a>00342           node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#ad42296d50bd08fab314776603f6e9a08">PNode::VAR</a>;
<a name="l00343"></a>00343           node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a> = trouv;
<a name="l00344"></a>00344           ob-&gt;push(node);
<a name="l00345"></a>00345           <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 2;
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347       <span class="keywordflow">else</span>
<a name="l00348"></a>00348         {
<a name="l00349"></a>00349           <span class="keyword">const</span> <a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a>&amp; func = tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a46dddfffe9a4d8c4caf34dd41fccc9c9">getSValue</a>();
<a name="l00350"></a>00350           trouv = <a class="code" href="classParser.html#aa4730d42fcd262c96e03d71aeb700a1e">searchFunc</a>(func);
<a name="l00351"></a>00351           <span class="keywordflow">if</span> (trouv&gt;-1)
<a name="l00352"></a>00352             {
<a name="l00353"></a>00353               op-&gt;push(-trouv); <span class="comment">//!&lt; OC 01/2005 : Attention, on stocke l&#39;oppose de l&#39;indice trouve afin de bien dissocier les operateurs binaires des fonctions unaires.</span>
<a name="l00354"></a>00354 <span class="comment"></span>              <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 0;
<a name="l00355"></a>00355             }
<a name="l00356"></a>00356           <span class="keywordflow">else</span>
<a name="l00357"></a>00357             {
<a name="l00358"></a>00358               trouv = <a class="code" href="classParser.html#a95d95890ee3ecf5dae64ecf90d818d55">searchCst</a>(func);
<a name="l00359"></a>00359               <span class="keywordflow">if</span> (trouv&gt;=0)
<a name="l00360"></a>00360                 {
<a name="l00361"></a>00361                   <a class="code" href="classPNode.html">PNode</a> *node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00362"></a>00362                   node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a3ef3d712e5aa0bd99805004d9b45c2f2">PNode::VALUE</a>;
<a name="l00363"></a>00363                   node-&gt;<a class="code" href="classPNode.html#a6e45a5164dd6ac5e87214494acd1083b">nvalue</a> = <a class="code" href="classParser.html#adb2ee58716b992029b5f312733b03409">les_cst</a>(trouv).getValue();
<a name="l00364"></a>00364                   ob-&gt;push(node);
<a name="l00365"></a>00365                   <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 2;
<a name="l00366"></a>00366                 }
<a name="l00367"></a>00367               <span class="keywordflow">else</span>
<a name="l00368"></a>00368                 {
<a name="l00369"></a>00369                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Parser::parserState0 during interpretation of the following string :\n &quot;</span>;
<a name="l00370"></a>00370                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; *<a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00371"></a>00371                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; identifier &quot;</span> &lt;&lt; func &lt;&lt; <span class="stringliteral">&quot; unknown &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00372"></a>00372 <span class="comment">// permet d avoir 0 erreur valgrind avec cppunit</span>
<a name="l00373"></a>00373                   <a class="code" href="classParser.html#a783f09f37300c35f6f45eaa008ca3ca3">root</a>=(<a class="code" href="classPNode.html">PNode</a>*) *(ob-&gt;getBase());
<a name="l00374"></a>00374                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;List of known var &quot;</span>&lt;&lt;finl;
<a name="l00375"></a>00375                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>; i++)
<a name="l00376"></a>00376                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>[i]-&gt;<a class="code" href="classParser.html#aedaf3ee8f457439c3955facd75ba9ad5">getString</a>()&lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00377"></a>00377                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;finl;
<a name="l00378"></a>00378                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00379"></a>00379                 }
<a name="l00380"></a>00380 
<a name="l00381"></a>00381             }
<a name="l00382"></a>00382 
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384 
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386 
<a name="l00387"></a>00387   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> == <a class="code" href="classStringTokenizer.html#a355ad502645427eed066b51a33e5b29f">StringTokenizer::NUMBER</a>)
<a name="l00388"></a>00388     {
<a name="l00389"></a>00389       <a class="code" href="classPNode.html">PNode</a>* node;
<a name="l00390"></a>00390       node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00391"></a>00391       node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a3ef3d712e5aa0bd99805004d9b45c2f2">PNode::VALUE</a>;
<a name="l00392"></a>00392 <span class="comment">// Cout &lt;&lt; &quot;NODE NUMBER = &quot; &lt;&lt; PNode::VALUE &lt;&lt; finl;</span>
<a name="l00393"></a>00393       node-&gt;<a class="code" href="classPNode.html#a6e45a5164dd6ac5e87214494acd1083b">nvalue</a> = tokenizer-&gt;<a class="code" href="classStringTokenizer.html#aec2e9b24765ee0bfd5448740ecf6740e">getNValue</a>();
<a name="l00394"></a>00394       ob-&gt;push(node);
<a name="l00395"></a>00395       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 2;
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> ==  <a class="code" href="classStringTokenizer.html#af054f2588d2b256680836ecf6fda39fa">StringTokenizer::ADD</a> )
<a name="l00398"></a>00398     {
<a name="l00399"></a>00399       <a class="code" href="classPNode.html">PNode</a>* node;
<a name="l00400"></a>00400       op-&gt;push(<a class="code" href="classStringTokenizer.html#af054f2588d2b256680836ecf6fda39fa">StringTokenizer::ADD</a>);
<a name="l00401"></a>00401       node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00402"></a>00402       node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a3ef3d712e5aa0bd99805004d9b45c2f2">PNode::VALUE</a>;
<a name="l00403"></a>00403       node-&gt;<a class="code" href="classPNode.html#a6e45a5164dd6ac5e87214494acd1083b">nvalue</a> = 0.;
<a name="l00404"></a>00404       ob-&gt;push(node);
<a name="l00405"></a>00405       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 1;
<a name="l00406"></a>00406     }
<a name="l00407"></a>00407   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> ==  <a class="code" href="classStringTokenizer.html#ae8a4564f543a385d0be243a790cd9e8d">StringTokenizer::SUBTRACT</a>)
<a name="l00408"></a>00408     {
<a name="l00409"></a>00409       <a class="code" href="classPNode.html">PNode</a>* node;
<a name="l00410"></a>00410       op-&gt;push(<a class="code" href="classStringTokenizer.html#ae8a4564f543a385d0be243a790cd9e8d">StringTokenizer::SUBTRACT</a>);
<a name="l00411"></a>00411       node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00412"></a>00412       node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a3ef3d712e5aa0bd99805004d9b45c2f2">PNode::VALUE</a>;
<a name="l00413"></a>00413       node-&gt;<a class="code" href="classPNode.html#a6e45a5164dd6ac5e87214494acd1083b">nvalue</a> = 0.;
<a name="l00414"></a>00414       ob-&gt;push(node);
<a name="l00415"></a>00415       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 1;
<a name="l00416"></a>00416     }
<a name="l00417"></a>00417   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> ==  <a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a> )
<a name="l00418"></a>00418     {
<a name="l00419"></a>00419       op-&gt;push(<a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a>);
<a name="l00420"></a>00420       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 0;
<a name="l00421"></a>00421     }
<a name="l00422"></a>00422 }
<a name="l00423"></a>00423 
<a name="l00424"></a><a class="code" href="classParser.html#a50c9be41675cf6bdfe5369f695f7e9da">00424</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#a50c9be41675cf6bdfe5369f695f7e9da">Parser::parserState1</a>(<a class="code" href="classStringTokenizer.html">StringTokenizer</a>* tokenizer, <a class="code" href="Stack_8h.html#a498e52420bf33abacef3463251f54d48">PSTACK</a>(<a class="code" href="classPNode.html">PNode</a>)* ob, <a class="code" href="Stack_8h.html#af7fdefcd63ccbabb1f42ca43b6f8ba75">STACK</a>(<span class="keywordtype">int</span>)* op)
<a name="l00425"></a>00425 {
<a name="l00426"></a>00426   <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> == <a class="code" href="classStringTokenizer.html#a53b88292d51bd88ff964529ff7550faf">StringTokenizer::STRING</a>)
<a name="l00427"></a>00427     {
<a name="l00428"></a>00428 
<a name="l00429"></a>00429       <span class="keywordtype">int</span> trouv = <a class="code" href="classParser.html#aa4ea2c8e8d28d1b83f213cc24deaa774">searchVar</a>(tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a46dddfffe9a4d8c4caf34dd41fccc9c9">getSValue</a>());
<a name="l00430"></a>00430 
<a name="l00431"></a>00431       <span class="keywordflow">if</span> (trouv&gt;-1)
<a name="l00432"></a>00432         {
<a name="l00433"></a>00433 <span class="comment">// Cerr &lt;&lt; &quot;variable = &quot; &lt;&lt; trouv &lt;&lt; &quot; &quot; &lt;&lt; tokenizer-&gt;getSValue() &lt;&lt; finl;</span>
<a name="l00434"></a>00434           <a class="code" href="classPNode.html">PNode</a> *node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00435"></a>00435           node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#ad42296d50bd08fab314776603f6e9a08">PNode::VAR</a>;
<a name="l00436"></a>00436           node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a> = trouv;
<a name="l00437"></a>00437           ob-&gt;push(node);
<a name="l00438"></a>00438           <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 2;
<a name="l00439"></a>00439         }
<a name="l00440"></a>00440       <span class="keywordflow">else</span>
<a name="l00441"></a>00441         {
<a name="l00442"></a>00442           <span class="keyword">const</span> <a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a>&amp; func = tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a46dddfffe9a4d8c4caf34dd41fccc9c9">getSValue</a>();
<a name="l00443"></a>00443           trouv = <a class="code" href="classParser.html#aa4730d42fcd262c96e03d71aeb700a1e">searchFunc</a>(func);
<a name="l00444"></a>00444           <span class="keywordflow">if</span> (trouv&gt;-1)
<a name="l00445"></a>00445             {
<a name="l00446"></a>00446               op-&gt;push(-trouv);
<a name="l00447"></a>00447               <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 0;
<a name="l00448"></a>00448             }
<a name="l00449"></a>00449           <span class="keywordflow">else</span>
<a name="l00450"></a>00450             {
<a name="l00451"></a>00451               trouv = <a class="code" href="classParser.html#a95d95890ee3ecf5dae64ecf90d818d55">searchCst</a>(func);
<a name="l00452"></a>00452               <span class="keywordflow">if</span> (trouv&gt;=0)
<a name="l00453"></a>00453                 {
<a name="l00454"></a>00454                   <a class="code" href="classPNode.html">PNode</a> *node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00455"></a>00455                   node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a3ef3d712e5aa0bd99805004d9b45c2f2">PNode::VALUE</a>;
<a name="l00456"></a>00456                   node-&gt;<a class="code" href="classPNode.html#a6e45a5164dd6ac5e87214494acd1083b">nvalue</a> = <a class="code" href="classParser.html#adb2ee58716b992029b5f312733b03409">les_cst</a>(trouv).getValue();
<a name="l00457"></a>00457                   ob-&gt;push(node);
<a name="l00458"></a>00458                   <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 2;
<a name="l00459"></a>00459                 }
<a name="l00460"></a>00460               <span class="keywordflow">else</span>
<a name="l00461"></a>00461                 {
<a name="l00462"></a>00462                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Parser::parserState1 during interpretation of the following string :\n &quot;</span>;
<a name="l00463"></a>00463                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <a class="code" href="classParser.html#a0ecfc31d32d4202a3c1ac6b9405428ec">str</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00464"></a>00464                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; identifier &quot;</span> &lt;&lt; func &lt;&lt; <span class="stringliteral">&quot; unknown !! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00465"></a>00465                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;List of known var &quot;</span>&lt;&lt;finl;
<a name="l00466"></a>00466                   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>; i++)
<a name="l00467"></a>00467                     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>[i]-&gt;<a class="code" href="classParser.html#aedaf3ee8f457439c3955facd75ba9ad5">getString</a>()&lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00468"></a>00468                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;finl;
<a name="l00469"></a>00469                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00470"></a>00470                 }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472             }
<a name="l00473"></a>00473         }
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> == <a class="code" href="classStringTokenizer.html#a355ad502645427eed066b51a33e5b29f">StringTokenizer::NUMBER</a> )
<a name="l00476"></a>00476     {
<a name="l00477"></a>00477       <a class="code" href="classPNode.html">PNode</a>* node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00478"></a>00478       node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a3ef3d712e5aa0bd99805004d9b45c2f2">PNode::VALUE</a>;
<a name="l00479"></a>00479       node-&gt;<a class="code" href="classPNode.html#a6e45a5164dd6ac5e87214494acd1083b">nvalue</a> = tokenizer-&gt;<a class="code" href="classStringTokenizer.html#aec2e9b24765ee0bfd5448740ecf6740e">getNValue</a>();
<a name="l00480"></a>00480       ob-&gt;push(node);
<a name="l00481"></a>00481       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 2;
<a name="l00482"></a>00482     }
<a name="l00483"></a>00483   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> ==<a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a>)
<a name="l00484"></a>00484     {
<a name="l00485"></a>00485       op-&gt;push(<a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a>);
<a name="l00486"></a>00486       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 0;
<a name="l00487"></a>00487     }
<a name="l00488"></a>00488   <span class="keywordflow">else</span>
<a name="l00489"></a>00489     {
<a name="l00490"></a>00490       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;state 1 error !! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00491"></a>00491       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00492"></a>00492     }
<a name="l00493"></a>00493 
<a name="l00494"></a>00494 }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 
<a name="l00497"></a>00497 
<a name="l00498"></a><a class="code" href="classParser.html#ac82a87f3a0f159e820939dade2687955">00498</a> <span class="keywordtype">int</span> <a class="code" href="classParser.html#ac82a87f3a0f159e820939dade2687955">Parser::test_op_binaire</a>(<span class="keywordtype">int</span> type)
<a name="l00499"></a>00499 {
<a name="l00500"></a>00500   <span class="keywordflow">return</span> ((type == <a class="code" href="classStringTokenizer.html#af054f2588d2b256680836ecf6fda39fa">StringTokenizer::ADD</a> )||( type == <a class="code" href="classStringTokenizer.html#ae8a4564f543a385d0be243a790cd9e8d">StringTokenizer::SUBTRACT</a> )||( type == <a class="code" href="classStringTokenizer.html#a5f7c0440698c64a8bbfaeef871f53158">StringTokenizer::MULTIPLY</a> )||( type == <a class="code" href="classStringTokenizer.html#ac6e742fcb1335226f67370b63b432190">StringTokenizer::DIVIDE</a> )||( type == <a class="code" href="classStringTokenizer.html#aa16b624d07d9001e051805b20712acd4">StringTokenizer::POWER</a> )||( type == <a class="code" href="classStringTokenizer.html#aa7b9bf93a60008ae21e6645f9661a086">StringTokenizer::LT</a> )||( type == <a class="code" href="classStringTokenizer.html#a91e6890abb8a36e6cd19df6205344f65">StringTokenizer::GT</a> )||( type == <a class="code" href="classStringTokenizer.html#ab1f46669f879f9d761df606719b9f2d1">StringTokenizer::LE</a> )||( type == <a class="code" href="classStringTokenizer.html#aa7243c09d6687bde2b0cb953229533be">StringTokenizer::GE</a> )||( type == <a class="code" href="classStringTokenizer.html#abdc36f6e49e953af9008ed5aeec015ec">StringTokenizer::MOD</a>) || ( type == <a class="code" href="classStringTokenizer.html#af93fce247ccdc8ebbd155106e9588ef6">StringTokenizer::MAX</a>) || ( type == <a class="code" href="classStringTokenizer.html#a74f4778bb362e63b43f9762ad236091f">StringTokenizer::MIN</a>) || ( type == <a class="code" href="classStringTokenizer.html#a034f1b0e3a04d52ff6f6f6078bd1ac8c">StringTokenizer::AND</a>)||( type == <a class="code" href="classStringTokenizer.html#af59aaf08d0a0b638d7c6a76c78883365">StringTokenizer::OR</a>)||( type == <a class="code" href="classStringTokenizer.html#ad6c53e846893d92fedd3f6fbffb3b9e6">StringTokenizer::EQ</a>)||( type == <a class="code" href="classStringTokenizer.html#afe8a2913da000de2c7775c1a41915c97">StringTokenizer::NEQ</a>));
<a name="l00501"></a>00501 }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 
<a name="l00504"></a><a class="code" href="classParser.html#a536499958b245210394be9e04910a774">00504</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#a536499958b245210394be9e04910a774">Parser::parserState2</a>(<a class="code" href="classStringTokenizer.html">StringTokenizer</a>* tokenizer, <a class="code" href="Stack_8h.html#a498e52420bf33abacef3463251f54d48">PSTACK</a>(<a class="code" href="classPNode.html">PNode</a>)* ob, <a class="code" href="Stack_8h.html#af7fdefcd63ccbabb1f42ca43b6f8ba75">STACK</a>(<span class="keywordtype">int</span>)* op)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506   <span class="keywordtype">int</span> op_read;
<a name="l00507"></a>00507   <span class="keywordflow">if</span> (<a class="code" href="classParser.html#ac82a87f3a0f159e820939dade2687955">test_op_binaire</a>( tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a>))
<a name="l00508"></a>00508     {
<a name="l00509"></a>00509 <span class="comment">// case   StringTokenizer::ADD: case StringTokenizer::SUBTRACT : case StringTokenizer::MULTIPLY: case StringTokenizer::DIVIDE: case StringTokenizer::POWER:</span>
<a name="l00510"></a>00510       op_read = tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a>;
<a name="l00511"></a>00511 <span class="comment">// Cerr &lt;&lt; &quot;op read = &quot; &lt;&lt; (char) op_read &lt;&lt; finl;</span>
<a name="l00512"></a>00512       <span class="keywordflow">if</span> (!op-&gt;isEmpty())
<a name="l00513"></a>00513         {
<a name="l00514"></a>00514           <span class="keywordtype">int</span> tmpi =  op-&gt;peek();
<a name="l00515"></a>00515 <span class="comment">// Cerr &lt;&lt; &quot;op tmpi = &quot; &lt;&lt;  (char) tmpi &lt;&lt; finl;</span>
<a name="l00516"></a>00516           <span class="keywordflow">while</span> (<a class="code" href="classParser.html#ae4a246d6aaa49225b7d05d75bf398b9f">precedence</a>(tmpi) &gt;= <a class="code" href="classParser.html#ae4a246d6aaa49225b7d05d75bf398b9f">precedence</a>(op_read) )
<a name="l00517"></a>00517             {
<a name="l00518"></a>00518               <span class="keywordtype">int</span> tmp = op-&gt;pop();
<a name="l00519"></a>00519 <span class="comment">// Cerr &lt;&lt; &quot;op tmp = &quot; &lt;&lt;  (char) tmp &lt;&lt; finl;</span>
<a name="l00520"></a>00520               <span class="keywordflow">if</span> (<a class="code" href="classParser.html#ac82a87f3a0f159e820939dade2687955">test_op_binaire</a>( tmp))  <span class="comment">//!&lt; c est un operateur binaire</span>
<a name="l00521"></a>00521 <span class="comment"></span>                {
<a name="l00522"></a>00522                   <a class="code" href="classPNode.html">PNode</a>* deux = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00523"></a>00523                   <a class="code" href="classPNode.html">PNode</a>* un = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00524"></a>00524                   <a class="code" href="classPNode.html">PNode</a>* node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00525"></a>00525                   node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a088d4ae853499d1d90ab57a112844f8c">PNode::OP</a>;
<a name="l00526"></a>00526                   node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>=tmp;
<a name="l00527"></a>00527                   node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a> = un;
<a name="l00528"></a>00528                   node-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a> = deux;
<a name="l00529"></a>00529                   ob-&gt;push(node);
<a name="l00530"></a>00530                 }
<a name="l00531"></a>00531               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp&lt;=0) <span class="comment">//!&lt; c est une fonction unaire</span>
<a name="l00532"></a>00532 <span class="comment"></span>                {
<a name="l00533"></a>00533                   <a class="code" href="classPNode.html">PNode</a>* un = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00534"></a>00534                   <a class="code" href="classPNode.html">PNode</a>* node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00535"></a>00535                   node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a>=<a class="code" href="classPNode.html#a8871e453b1f34a048e34b8f06f0bd5e5">PNode::FUNCTION</a>;
<a name="l00536"></a>00536                   node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>=tmp;
<a name="l00537"></a>00537                   node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a> = un;
<a name="l00538"></a>00538                   node-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a>=NULL;
<a name="l00539"></a>00539                   ob-&gt;push(node);
<a name="l00540"></a>00540                 }
<a name="l00541"></a>00541               <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (tmp == <a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a>) || (tmp == <a class="code" href="classStringTokenizer.html#adfae8a077061ef4ae4e815a355d8e1c1">StringTokenizer::ENDGRP</a>) )
<a name="l00542"></a>00542                 {
<a name="l00543"></a>00543                 }
<a name="l00544"></a>00544               <span class="keywordflow">else</span>
<a name="l00545"></a>00545                 {
<a name="l00546"></a>00546                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Unknown operation !!! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00547"></a>00547                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00548"></a>00548                   <span class="keywordflow">break</span>;
<a name="l00549"></a>00549                 }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551               <span class="keywordflow">if</span> (!op-&gt;isEmpty()) tmpi =  op-&gt;peek();
<a name="l00552"></a>00552               <span class="keywordflow">else</span> break ;
<a name="l00553"></a>00553             }
<a name="l00554"></a>00554         }
<a name="l00555"></a>00555       op-&gt;push(op_read);
<a name="l00556"></a>00556       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> =1;
<a name="l00557"></a>00557     }
<a name="l00558"></a>00558   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> ==  <a class="code" href="classStringTokenizer.html#adfae8a077061ef4ae4e815a355d8e1c1">StringTokenizer::ENDGRP</a>)
<a name="l00559"></a>00559     {
<a name="l00560"></a>00560       op_read = tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a>;
<a name="l00561"></a>00561       <span class="keywordflow">if</span> (!op-&gt;isEmpty())
<a name="l00562"></a>00562         {
<a name="l00563"></a>00563           <span class="keywordtype">int</span> tmp = op-&gt;pop();
<a name="l00564"></a>00564           <span class="keywordflow">while</span> (tmp != <a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a> )
<a name="l00565"></a>00565             {
<a name="l00566"></a>00566               <span class="keywordflow">if</span> (<a class="code" href="classParser.html#ac82a87f3a0f159e820939dade2687955">test_op_binaire</a>(tmp))  <span class="comment">//!&lt; c est un operateur binaire</span>
<a name="l00567"></a>00567 <span class="comment"></span>                {
<a name="l00568"></a>00568                   <a class="code" href="classPNode.html">PNode</a>* deux = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00569"></a>00569                   <a class="code" href="classPNode.html">PNode</a>* un = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00570"></a>00570                   <a class="code" href="classPNode.html">PNode</a>* node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00571"></a>00571                   node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a088d4ae853499d1d90ab57a112844f8c">PNode::OP</a>;
<a name="l00572"></a>00572                   node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>=tmp;
<a name="l00573"></a>00573                   node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a> = un;
<a name="l00574"></a>00574                   node-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a>=deux;
<a name="l00575"></a>00575                   ob-&gt;push(node);
<a name="l00576"></a>00576                 }
<a name="l00577"></a>00577               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp&lt;=0) <span class="comment">//!&lt; c est une fonction unaire</span>
<a name="l00578"></a>00578 <span class="comment"></span>                {
<a name="l00579"></a>00579                   <a class="code" href="classPNode.html">PNode</a>* un = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00580"></a>00580                   <a class="code" href="classPNode.html">PNode</a>* node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00581"></a>00581                   node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a>=<a class="code" href="classPNode.html#a8871e453b1f34a048e34b8f06f0bd5e5">PNode::FUNCTION</a>;
<a name="l00582"></a>00582                   node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>=tmp;
<a name="l00583"></a>00583                   node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a> = un;
<a name="l00584"></a>00584                   node-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a>=NULL;
<a name="l00585"></a>00585                   ob-&gt;push(node);
<a name="l00586"></a>00586                 }
<a name="l00587"></a>00587               <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (tmp == <a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a>) || (tmp == <a class="code" href="classStringTokenizer.html#adfae8a077061ef4ae4e815a355d8e1c1">StringTokenizer::ENDGRP</a>) )
<a name="l00588"></a>00588                 {
<a name="l00589"></a>00589                 }
<a name="l00590"></a>00590               <span class="keywordflow">else</span>
<a name="l00591"></a>00591                 {
<a name="l00592"></a>00592                   <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Unknown operation !!! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00593"></a>00593                   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00594"></a>00594                   <span class="keywordflow">break</span>;
<a name="l00595"></a>00595                 }
<a name="l00596"></a>00596 
<a name="l00597"></a>00597               <span class="keywordflow">if</span> (!op-&gt;isEmpty()) tmp =  op-&gt;pop();
<a name="l00598"></a>00598               <span class="keywordflow">else</span> break ;
<a name="l00599"></a>00599             }
<a name="l00600"></a>00600         }
<a name="l00601"></a>00601       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 2;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603     }
<a name="l00604"></a>00604   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> == <a class="code" href="classStringTokenizer.html#a482db4ea8618f02f6734f369466ab856">StringTokenizer::EOS</a>)
<a name="l00605"></a>00605     {
<a name="l00606"></a>00606       <span class="keywordflow">while</span> (!op-&gt;isEmpty())
<a name="l00607"></a>00607         {
<a name="l00608"></a>00608 <span class="comment">// Cout &lt;&lt; &quot;fin&quot; &lt;&lt; finl;</span>
<a name="l00609"></a>00609           <span class="keywordtype">int</span> tmp =  op-&gt;pop();
<a name="l00610"></a>00610           <span class="keywordflow">if</span> (<a class="code" href="classParser.html#ac82a87f3a0f159e820939dade2687955">test_op_binaire</a>(tmp))<span class="comment">//!&lt; c est un operateur binaire</span>
<a name="l00611"></a>00611 <span class="comment"></span>            {
<a name="l00612"></a>00612               <a class="code" href="classPNode.html">PNode</a>* deux = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00613"></a>00613               <a class="code" href="classPNode.html">PNode</a>* un = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00614"></a>00614               <a class="code" href="classPNode.html">PNode</a>* node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00615"></a>00615               node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a> = <a class="code" href="classPNode.html#a088d4ae853499d1d90ab57a112844f8c">PNode::OP</a>;
<a name="l00616"></a>00616               node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>=tmp;
<a name="l00617"></a>00617               node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a> = un;
<a name="l00618"></a>00618               node-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a>=deux;
<a name="l00619"></a>00619               ob-&gt;push(node);
<a name="l00620"></a>00620             }
<a name="l00621"></a>00621           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp&lt;=0) <span class="comment">//!&lt; c est une fonction unaire</span>
<a name="l00622"></a>00622 <span class="comment"></span>            {
<a name="l00623"></a>00623               <a class="code" href="classPNode.html">PNode</a>* un = (<a class="code" href="classPNode.html">PNode</a>*) ob-&gt;pop();
<a name="l00624"></a>00624               <a class="code" href="classPNode.html">PNode</a>* node = <span class="keyword">new</span> <a class="code" href="classPNode.html">PNode</a>();
<a name="l00625"></a>00625               node-&gt;<a class="code" href="classPNode.html#a0917d1a51959847f0949ba8ae5934ee8">type</a>=<a class="code" href="classPNode.html#a8871e453b1f34a048e34b8f06f0bd5e5">PNode::FUNCTION</a>;
<a name="l00626"></a>00626               node-&gt;<a class="code" href="classPNode.html#a098eecf25eb49c528c0b8d5c88c5790f">value</a>=tmp;
<a name="l00627"></a>00627               node-&gt;<a class="code" href="classPNode.html#a3d5312c8c3ef5e8f6079ecd8cab9553e">left</a> = un;
<a name="l00628"></a>00628               node-&gt;<a class="code" href="classPNode.html#aa3ceaca187dbd9520f5f6837a8a47c84">right</a>=NULL;
<a name="l00629"></a>00629               ob-&gt;push(node);
<a name="l00630"></a>00630             }
<a name="l00631"></a>00631           <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (tmp == <a class="code" href="classStringTokenizer.html#aa500886800fd24d00d305b84121f8337">StringTokenizer::GRP</a>) || (tmp == <a class="code" href="classStringTokenizer.html#adfae8a077061ef4ae4e815a355d8e1c1">StringTokenizer::ENDGRP</a>) )
<a name="l00632"></a>00632             {
<a name="l00633"></a>00633             }
<a name="l00634"></a>00634           <span class="keywordflow">else</span>
<a name="l00635"></a>00635             {
<a name="l00636"></a>00636               <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Unknown operation !!! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00637"></a>00637               <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00638"></a>00638               <span class="keywordflow">break</span>;
<a name="l00639"></a>00639             }
<a name="l00640"></a>00640         }
<a name="l00641"></a>00641       <a class="code" href="classParser.html#ab2db6ac01258de30d36103ea49542df6">state</a> = 0;
<a name="l00642"></a>00642     }
<a name="l00643"></a>00643   <span class="keywordflow">else</span>
<a name="l00644"></a>00644     {
<a name="l00645"></a>00645       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error state 2 !!! &quot;</span> &lt;&lt;tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a>&lt;&lt;<span class="stringliteral">&quot;  &quot;</span>&lt;&lt;tokenizer-&gt;<a class="code" href="classStringTokenizer.html#a46dddfffe9a4d8c4caf34dd41fccc9c9">getSValue</a>()&lt;&lt;<span class="stringliteral">&quot;  &quot;</span>&lt;&lt;tokenizer-&gt;<a class="code" href="classStringTokenizer.html#aec2e9b24765ee0bfd5448740ecf6740e">getNValue</a>()&lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00646"></a>00646       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::ADD &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#af054f2588d2b256680836ecf6fda39fa">StringTokenizer::ADD</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::SUBTRACT &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#ae8a4564f543a385d0be243a790cd9e8d">StringTokenizer::SUBTRACT</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::MULTIPLY &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#a5f7c0440698c64a8bbfaeef871f53158">StringTokenizer::MULTIPLY</a>;
<a name="l00647"></a>00647       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::DIVIDE &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#ac6e742fcb1335226f67370b63b432190">StringTokenizer::DIVIDE</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::POWER &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#aa16b624d07d9001e051805b20712acd4">StringTokenizer::POWER</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::LT &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#aa7b9bf93a60008ae21e6645f9661a086">StringTokenizer::LT</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::GT &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#a91e6890abb8a36e6cd19df6205344f65">StringTokenizer::GT</a>;
<a name="l00648"></a>00648       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::LE &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#ab1f46669f879f9d761df606719b9f2d1">StringTokenizer::LE</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::GE &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#aa7243c09d6687bde2b0cb953229533be">StringTokenizer::GE</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::MOD &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#abdc36f6e49e953af9008ed5aeec015ec">StringTokenizer::MOD</a>&lt;&lt;<span class="stringliteral">&quot; ENDStringTokenizer::GRP &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#adfae8a077061ef4ae4e815a355d8e1c1">StringTokenizer::ENDGRP</a>;
<a name="l00649"></a>00649       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::EOS &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#a482db4ea8618f02f6734f369466ab856">StringTokenizer::EOS</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::NUMBER &quot;</span>;
<a name="l00650"></a>00650       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<a class="code" href="classStringTokenizer.html#a355ad502645427eed066b51a33e5b29f">StringTokenizer::NUMBER</a>&lt;&lt;<span class="stringliteral">&quot; StringTokenizer::STRING &quot;</span>&lt;&lt;<a class="code" href="classStringTokenizer.html#a53b88292d51bd88ff964529ff7550faf">StringTokenizer::STRING</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00651"></a>00651       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00652"></a>00652     }
<a name="l00653"></a>00653 }
<a name="l00654"></a>00654 
<a name="l00655"></a><a class="code" href="classParser.html#a0f04fd67f90acd8301940430b83154b5">00655</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#a0f04fd67f90acd8301940430b83154b5">Parser::addVar</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *vv)
<a name="l00656"></a>00656 {
<a name="l00657"></a>00657   <span class="keywordflow">if</span> (<a class="code" href="classParser.html#aa4ea2c8e8d28d1b83f213cc24deaa774">searchVar</a>(vv)!=-1)
<a name="l00658"></a>00658     {
<a name="l00659"></a>00659       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;Warning in Parser::addVar &quot;</span>&lt;&lt; vv &lt;&lt; <span class="stringliteral">&quot; already in Parser&quot;</span>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00660"></a>00660       <span class="keywordflow">if</span> (strcmp(vv,<span class="stringliteral">&quot;x&quot;</span>)==0 || strcmp(vv,<span class="stringliteral">&quot;y&quot;</span>)==0 || strcmp(vv,<span class="stringliteral">&quot;z&quot;</span>)==0 || strcmp(vv,<span class="stringliteral">&quot;t&quot;</span>)==0
<a name="l00661"></a>00661           || strcmp(vv,<span class="stringliteral">&quot;X&quot;</span>)==0 || strcmp(vv,<span class="stringliteral">&quot;Y&quot;</span>)==0 || strcmp(vv,<span class="stringliteral">&quot;Z&quot;</span>)==0 || strcmp(vv,<span class="stringliteral">&quot;T&quot;</span>)==0)
<a name="l00662"></a>00662         {
<a name="l00663"></a>00663           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00664"></a>00664         }
<a name="l00665"></a>00665     }
<a name="l00666"></a>00666   <span class="keywordflow">if</span> (<a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>&lt;<a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a>)
<a name="l00667"></a>00667     <a class="code" href="classParser.html#afad439d912ae80b5f421564823fca563">les_var</a>[<a class="code" href="classParser.html#a16b23998bc6c5fb6977c2866015001ec">ivar</a>++] = <span class="keyword">new</span> <a class="code" href="classVariable.html">Variable</a>(vv);
<a name="l00668"></a>00668   <span class="keywordflow">else</span>
<a name="l00669"></a>00669     {
<a name="l00670"></a>00670       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Maximum &quot;</span> &lt;&lt; <a class="code" href="classParser.html#a57822107b635f169010b5453fee847c9">maxvar</a> &lt;&lt; <span class="stringliteral">&quot; variables !! &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00671"></a>00671       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00672"></a>00672     }
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00675"></a><a class="code" href="classParser.html#a95d95890ee3ecf5dae64ecf90d818d55">00675</a> <span class="keywordtype">int</span> <a class="code" href="classParser.html#a95d95890ee3ecf5dae64ecf90d818d55">Parser::searchCst</a>(<span class="keyword">const</span> <a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a>&amp; v)
<a name="l00676"></a>00676 {
<a name="l00677"></a>00677   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="classConstante.html">Constante</a>) curseur(<a class="code" href="classParser.html#adb2ee58716b992029b5f312733b03409">les_cst</a>);
<a name="l00678"></a>00678   <span class="keywordtype">int</span> i=0;
<a name="l00679"></a>00679   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nv(v.<a class="code" href="classString2.html#a8ea95a7e185f2a27a2a0c4ba87289627">toChar</a>());
<a name="l00680"></a>00680   <span class="keywordflow">while</span>(curseur)
<a name="l00681"></a>00681     {
<a name="l00682"></a>00682       <a class="code" href="classConstante.html">Constante</a>&amp; cst = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classConstante.html">Constante</a>,curseur.valeur());
<a name="l00683"></a>00683       <span class="keyword">const</span> <a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a> ss(cst.<a class="code" href="classConstante.html#a70efacc141a9c5cdab9a2d33298ab066" title="Donne le nom de l&#39;Objet_U Methode a surcharger : renvoie &quot;neant&quot; dans cette implementation.">le_nom</a>());
<a name="l00684"></a>00684       <span class="keywordflow">if</span> (nv == <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(ss.toChar())) <span class="keywordflow">return</span> i;
<a name="l00685"></a>00685       ++curseur;
<a name="l00686"></a>00686       i++;
<a name="l00687"></a>00687     }
<a name="l00688"></a>00688   <span class="keywordflow">return</span> -1;
<a name="l00689"></a>00689 }
<a name="l00690"></a>00690 
<a name="l00691"></a>00691 
<a name="l00692"></a><a class="code" href="classParser.html#aa4730d42fcd262c96e03d71aeb700a1e">00692</a> <span class="keywordtype">int</span> <a class="code" href="classParser.html#aa4730d42fcd262c96e03d71aeb700a1e">Parser::searchFunc</a>(<span class="keyword">const</span> <a class="code" href="classString2.html" title=": class String2 Cette classe encapsule une chaine de caracteres simple. Contrairement a &quot;Nom&quot;...">String2</a>&amp; v)
<a name="l00693"></a>00693 {
<a name="l00694"></a>00694   <a class="code" href="List_8h.html#a300f34d06c3e9d9918e439ede00ad7f4">LIST_CURSEUR</a>(<a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classUnaryFunction.html" title="Definit une constante dans le jeu de donnees.">UnaryFunction</a>)) curseur(<a class="code" href="classParser.html#ab3c8b96987664e614e3cf3cc5db69fff">unary_func</a>);
<a name="l00695"></a>00695   <span class="keywordtype">int</span> i=0;
<a name="l00696"></a>00696   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nv(v.<a class="code" href="classString2.html#a8ea95a7e185f2a27a2a0c4ba87289627">toChar</a>());
<a name="l00697"></a>00697   nv.<a class="code" href="classNom.html#aa7ed1cd0c30f7c698120b2e48e2c1bae" title="Transforme le nom en majuscules Seules les lettres &#39;a&#39;-&#39;z&#39; sont modifiees.">majuscule</a>();
<a name="l00698"></a>00698   <span class="keywordflow">while</span>(curseur)
<a name="l00699"></a>00699     {
<a name="l00700"></a>00700       <a class="code" href="classUnaryFunction.html" title="Definit une constante dans le jeu de donnees.">UnaryFunction</a>&amp; f = curseur.valeur().valeur();
<a name="l00701"></a>00701       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> n2(f.<a class="code" href="classUnaryFunction.html#ab1b2d235cff0503ee8d45f7552a20fcf">getName</a>());
<a name="l00702"></a>00702       n2.<a class="code" href="classNom.html#aa7ed1cd0c30f7c698120b2e48e2c1bae" title="Transforme le nom en majuscules Seules les lettres &#39;a&#39;-&#39;z&#39; sont modifiees.">majuscule</a>();
<a name="l00703"></a>00703       <span class="keywordflow">if</span> (nv == n2) <span class="keywordflow">return</span> i+1 ; <span class="comment">//!&lt; OC: pour ne pas utiliser le zero car sinon conflit avec la nouvelle numerotation des operateurs binaires.</span>
<a name="l00704"></a>00704 <span class="comment"></span>      ++curseur;
<a name="l00705"></a>00705       i++;
<a name="l00706"></a>00706     }
<a name="l00707"></a>00707   <span class="keywordflow">return</span> -1;
<a name="l00708"></a>00708 }
<a name="l00709"></a>00709 
<a name="l00710"></a><a class="code" href="classParser.html#af26ac7e95897cc2a6c3099958af6af54">00710</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#af26ac7e95897cc2a6c3099958af6af54">Parser::addCst</a>(<span class="keyword">const</span> <a class="code" href="classConstante.html">Constante</a>&amp; cst)
<a name="l00711"></a>00711 {
<a name="l00712"></a>00712   <a class="code" href="classParser.html#adb2ee58716b992029b5f312733b03409">les_cst</a>.<a class="code" href="classList__Constante.html#aa282e55859a66da4378c1a2e6d3f315e">add</a>(cst);
<a name="l00713"></a>00713 }
<a name="l00714"></a>00714 
<a name="l00715"></a><a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">00715</a> <span class="keywordtype">void</span> <a class="code" href="classParser.html#ac51165ac7972161fd16f2830afd071c3">Parser::addFunc</a>(<span class="keyword">const</span> <a class="code" href="classUnaryFunction.html" title="Definit une constante dans le jeu de donnees.">UnaryFunction</a>&amp; f)
<a name="l00716"></a>00716 {
<a name="l00717"></a>00717   <span class="keywordtype">int</span> size = <a class="code" href="classParser.html#ab3c8b96987664e614e3cf3cc5db69fff">unary_func</a>.<a class="code" href="classliste.html#ab47f280662ff68f9aa2e00e50431c5dc" title="Renvoie la taille de la liste Une liste vide est de taille nulle.">size</a>();
<a name="l00718"></a>00718   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;size; i++)
<a name="l00719"></a>00719     {
<a name="l00720"></a>00720       <span class="keywordflow">if</span> (<a class="code" href="classParser.html#ab3c8b96987664e614e3cf3cc5db69fff">unary_func</a>[i]-&gt;getName() == f.<a class="code" href="classUnaryFunction.html#ab1b2d235cff0503ee8d45f7552a20fcf">getName</a>())
<a name="l00721"></a>00721         {
<a name="l00722"></a>00722           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Function &quot;</span> &lt;&lt;  f.<a class="code" href="classUnaryFunction.html#ab1b2d235cff0503ee8d45f7552a20fcf">getName</a>() &lt;&lt; <span class="stringliteral">&quot; has already been defined !&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00723"></a>00723           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00724"></a>00724         }
<a name="l00725"></a>00725     }
<a name="l00726"></a>00726   <a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classUnaryFunction.html" title="Definit une constante dans le jeu de donnees.">UnaryFunction</a>)&amp; df = <a class="code" href="classParser.html#ab3c8b96987664e614e3cf3cc5db69fff">unary_func</a>.<a class="code" href="classList__Deriv__UnaryFunction.html#a1a114289728724543887b81dc566e2be">add</a>(<a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classUnaryFunction.html" title="Definit une constante dans le jeu de donnees.">UnaryFunction</a>)());
<a name="l00727"></a>00727   df = f;
<a name="l00728"></a>00728 }
<a name="l00729"></a>00729 
<a name="l00730"></a><a class="code" href="Parser_8cpp.html#aa7f696ea7248915c3f9093a8cf534f3d">00730</a> <span class="keywordtype">void</span> <a class="code" href="Parser_8cpp.html#aa7f696ea7248915c3f9093a8cf534f3d">debug</a>(<a class="code" href="classStringTokenizer.html">StringTokenizer</a> * t)
<a name="l00731"></a>00731 {
<a name="l00732"></a>00732   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> == <a class="code" href="classStringTokenizer.html#a53b88292d51bd88ff964529ff7550faf">StringTokenizer::STRING</a>)
<a name="l00733"></a>00733     <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;STRING : &quot;</span> &lt;&lt; t-&gt;<a class="code" href="classStringTokenizer.html#a46dddfffe9a4d8c4caf34dd41fccc9c9">getSValue</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00734"></a>00734   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> == <a class="code" href="classStringTokenizer.html#a355ad502645427eed066b51a33e5b29f">StringTokenizer::NUMBER</a>)
<a name="l00735"></a>00735     <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;NUMBER : &quot;</span> &lt;&lt; t-&gt;<a class="code" href="classStringTokenizer.html#aec2e9b24765ee0bfd5448740ecf6740e">getNValue</a>() &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00736"></a>00736   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> == <a class="code" href="classStringTokenizer.html#a482db4ea8618f02f6734f369466ab856">StringTokenizer::EOS</a>)
<a name="l00737"></a>00737     <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;END &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00738"></a>00738   <span class="keywordflow">else</span>
<a name="l00739"></a>00739     <a class="code" href="EntreeSortie_8h.html#a1007c2f57f1c8fc7334a3f62aab08414">Cout</a> &lt;&lt; <span class="stringliteral">&quot;OP : &quot;</span> &lt;&lt; (int)t-&gt;<a class="code" href="classStringTokenizer.html#a85f97a453a77e58f6712f53a1de981e3">type</a> &lt;&lt; finl;
<a name="l00740"></a>00740 }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742 
<a name="l00743"></a>00743 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:23 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
