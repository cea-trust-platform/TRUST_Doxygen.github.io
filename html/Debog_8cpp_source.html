<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TRUST: src/Kernel/Framework/Debog.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TRUST&#160;<span id="projectnumber">1.8.4</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">src/Kernel/Framework/Debog.cpp</div>  </div>
</div>
<div class="contents">
<a href="Debog_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (c) 2015 - 2016, CEA</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
<a name="l00006"></a>00006 <span class="comment">* 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
<a name="l00007"></a>00007 <span class="comment">* 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
<a name="l00008"></a>00008 <span class="comment">* 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
<a name="l00009"></a>00009 <span class="comment">*</span>
<a name="l00010"></a>00010 <span class="comment">* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span>
<a name="l00011"></a>00011 <span class="comment">* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;</span>
<a name="l00012"></a>00012 <span class="comment">* OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00013"></a>00013 <span class="comment">*</span>
<a name="l00014"></a>00014 <span class="comment">*****************************************************************************/</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// </span>
<a name="l00017"></a>00017 <span class="comment">// File:        Debog.cpp</span>
<a name="l00018"></a>00018 <span class="comment">// Directory:   $TRUST_ROOT/src/Kernel/Framework</span>
<a name="l00019"></a>00019 <span class="comment">// Version:     /main/14</span>
<a name="l00020"></a>00020 <span class="comment">// </span>
<a name="l00021"></a>00021 <span class="comment">//</span>
<a name="l00022"></a>00022 <span class="comment">// </span>
<a name="l00023"></a>00023 <span class="comment">// WARNING: DO NOT EDIT THIS FILE! Only edit the template file Debog.cpp.P</span>
<a name="l00024"></a>00024 <span class="comment">// </span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Debog__Pb_8h.html">Debog_Pb.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="Debog_8h.html">Debog.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;<a class="code" href="Probleme__base_8h.html">Probleme_base.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="Equation_8h.html">Equation.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="Zone__VF_8h.html">Zone_VF.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="Domaine_8h.html">Domaine.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="Param_8h.html">Param.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="MD__Vector__std_8h.html">MD_Vector_std.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="MD__Vector__composite_8h.html">MD_Vector_composite.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="MD__Vector__tools_8h.html">MD_Vector_tools.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="Octree__Double_8h.html">Octree_Double.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="ConstDoubleTab__parts_8h.html">ConstDoubleTab_parts.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="PE__Groups_8h.html">PE_Groups.h</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="Interprete__bloc_8h.html">Interprete_bloc.h</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="EChaine_8h.html">EChaine.h</a>&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="Old__Debog_8h.html">Old_Debog.h</a>&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="Matrice__Base_8h.html">Matrice_Base.h</a>&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="communications_8h.html">communications.h</a>&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;<a class="code" href="DoubleTab_8h.html">DoubleTab.h</a>&gt;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;<a class="code" href="IntTab_8h.html">IntTab.h</a>&gt;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <a class="code" href="Ref_8h.html#aab5720a5c34da14028d0745e386aaa01">REF</a>(<a class="code" href="classDebog__Pb.html">Debog_Pb</a>) <a class="code" href="classDebog__Pb.html">Debog_Pb</a>::instance_debog_;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="comment">// Dans gdb: mettre le numero du message entre parentheses dans cette variable</span>
<a name="l00053"></a>00053 <span class="comment">// avec &quot;set msg_debog_breakpoint=x&quot;</span>
<a name="l00054"></a>00054 <span class="comment">// et un point d&#39;arret dans la methode debog_breakpoint()</span>
<a name="l00055"></a><a class="code" href="Debog_8cpp.html#a323aaa8e396e6ee29b67d48cca97064d">00055</a> static <span class="keywordtype">int</span> <a class="code" href="Debog_8cpp.html#a323aaa8e396e6ee29b67d48cca97064d">msg_debog_breakpoint</a> = 0;
<a name="l00056"></a><a class="code" href="Debog_8cpp.html#ad2501a84f8bd4703ce16292c3666cf45">00056</a> static <span class="keywordtype">void</span> <a class="code" href="Debog_8cpp.html#ad2501a84f8bd4703ce16292c3666cf45">debog_breakpoint</a>()
<a name="l00057"></a>00057 {
<a name="l00058"></a>00058 }
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="Debog_8cpp.html#a5d4370767e286c0cf2af58db7d6bc483">00060</a> <span class="keywordtype">void</span> <a class="code" href="Debog_8cpp.html#a5d4370767e286c0cf2af58db7d6bc483">debog_break_test</a>(<span class="keywordtype">int</span> msg)
<a name="l00061"></a>00061 {
<a name="l00062"></a>00062   <span class="keywordflow">if</span> (msg == <a class="code" href="Debog_8cpp.html#a323aaa8e396e6ee29b67d48cca97064d">msg_debog_breakpoint</a>)
<a name="l00063"></a>00063     <a class="code" href="Debog_8cpp.html#ad2501a84f8bd4703ce16292c3666cf45">debog_breakpoint</a>();
<a name="l00064"></a>00064 }
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="comment">//</span><span class="comment"></span>
<a name="l00067"></a>00067 <span class="comment">//! methode appelee des qu&#39;une erreur est trouvee dans l&#39;espace reel.&lt;br&gt;(utile pour poser un breakpoint dans gdb)</span>
<a name="l00068"></a><a class="code" href="classDebog__Pb.html#a8674931254697863f85c3c9446f17347">00068</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a8674931254697863f85c3c9446f17347" title="methode appelee des qu&#39;une erreur est trouvee dans l&#39;espace reel. (utile pour poser un breakpoint dan...">Debog_Pb::error_function</a>()
<a name="l00069"></a>00069 {
<a name="l00070"></a>00070   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a84bfc2d9eeeb34d731d8689525634cc1">exit_on_error_</a>)
<a name="l00071"></a>00071     {
<a name="l00072"></a>00072       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error found in Debog_Pb (see debog.log files)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00073"></a>00073       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00074"></a>00074     }
<a name="l00075"></a>00075 }
<a name="l00076"></a>00076 
<a name="l00077"></a><a class="code" href="Debog_8cpp.html#af28efe9267a19c4a53279ab4b9b6654b">00077</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classDebog__Pb.html">Debog_Pb</a>,<span class="stringliteral">&quot;Debog_pb&quot;</span>,<a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>);
<a name="l00078"></a>00078 <span class="comment">// Interprete compatible avec l&#39;ancienne syntaxe</span>
<a name="l00079"></a><a class="code" href="Debog_8cpp.html#ab0f0d83daa0f17dcb3eb141c197c4f4d">00079</a> <a class="code" href="Op__Diff__CoviMAC__Face_8cpp.html#aa86ec8ba612a969d9b4370b775037144">Implemente_instanciable</a>(<a class="code" href="classOld__Debog.html">Old_Debog</a>,<span class="stringliteral">&quot;Debog&quot;</span>,<a class="code" href="classInterprete.html" title="Classe de base des objets &quot;interprete&quot;. Ces objets definissent des actions a realiser lorsqu&#39;on les...">Interprete</a>);
<a name="l00080"></a><a class="code" href="Debog_8cpp.html#a6676d7baee13e59ad43d6d4ff09e0997">00080</a> <a class="code" href="MacRef_8h.html#a67b571ae2caa2f388a7d532cf57553fe">Implemente_ref</a>(<a class="code" href="classDebog__Pb.html">Debog_Pb</a>);
<a name="l00081"></a>00081 
<a name="l00082"></a><a class="code" href="classOld__Debog.html#af39ae2abc001242eb166e9420feea27c">00082</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classOld__Debog.html#af39ae2abc001242eb166e9420feea27c" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Old_Debog::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00083"></a>00083 <span class="keyword"></span>{
<a name="l00084"></a>00084   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00085"></a>00085   <span class="keywordflow">return</span> os;
<a name="l00086"></a>00086 }
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="classOld__Debog.html#a707663b05c89055da6bbdb1293e9900a">00088</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classOld__Debog.html#a707663b05c89055da6bbdb1293e9900a" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Old_Debog::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00089"></a>00089 {
<a name="l00090"></a>00090   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00091"></a>00091   <span class="keywordflow">return</span> is;
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="classOld__Debog.html#a848f7d0ba3e97a46bc3800f191e4803e">00094</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classOld__Debog.html#a848f7d0ba3e97a46bc3800f191e4803e">Old_Debog::interpreter</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00095"></a>00095 {
<a name="l00096"></a>00096   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_pb;
<a name="l00097"></a>00097   is &gt;&gt; nom_pb;
<a name="l00098"></a>00098   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> nom_fic, nom_fic_faces;
<a name="l00099"></a>00099   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> seuil;
<a name="l00100"></a>00100   <span class="keywordtype">int</span> mode_db;
<a name="l00101"></a>00101   is &gt;&gt; nom_fic &gt;&gt; nom_fic_faces &gt;&gt; seuil &gt;&gt; mode_db;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> n(<span class="stringliteral">&quot;Debog_pb debog Lire debog { nom_pb &quot;</span>);
<a name="l00104"></a>00104   n += nom_pb;
<a name="l00105"></a>00105   n += <span class="stringliteral">&quot; fichier_domaine &quot;</span>;
<a name="l00106"></a>00106   n += nom_fic;
<a name="l00107"></a>00107   n += <span class="stringliteral">&quot; fichier_faces &quot;</span>;
<a name="l00108"></a>00108   n += nom_fic_faces;
<a name="l00109"></a>00109   n += <span class="stringliteral">&quot; fichier_debog DEBOG&quot;</span>;
<a name="l00110"></a>00110   n += <span class="stringliteral">&quot; seuil_absolu &quot;</span>;
<a name="l00111"></a>00111   n += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(seuil);
<a name="l00112"></a>00112   n += <span class="stringliteral">&quot; seuil_relatif &quot;</span>;
<a name="l00113"></a>00113   n += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(seuil);
<a name="l00114"></a>00114   n += <span class="stringliteral">&quot; mode_db &quot;</span>;
<a name="l00115"></a>00115   <span class="keywordflow">if</span> (mode_db == 0)
<a name="l00116"></a>00116     n += <span class="stringliteral">&quot;write&quot;</span>;
<a name="l00117"></a>00117   <span class="keywordflow">else</span>
<a name="l00118"></a>00118     n += <span class="stringliteral">&quot;read&quot;</span>;
<a name="l00119"></a>00119   n += <span class="stringliteral">&quot;  }&quot;</span>;
<a name="l00120"></a>00120 
<a name="l00121"></a>00121   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">je_suis_maitre</a>())
<a name="l00122"></a>00122     <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Old_Debog: convert to new syntax: &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a> &lt;&lt; n &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00123"></a>00123 
<a name="l00124"></a>00124   <a class="code" href="classEChaine.html" title="Une entree dont la source est une chaine de caracteres. Le constructeur cree sa propre copie de la ch...">EChaine</a> echaine(n);
<a name="l00125"></a>00125   <a class="code" href="classInterprete__bloc.html#a7c4cb0474e21ba03265a06f9bfc196a2" title="renvoie l&#39;interprete_bloc en train d&#39;etre lu dans le jeu de donnees. On change d&#39;interprete courant q...">Interprete_bloc::interprete_courant</a>().<a class="code" href="classInterprete__bloc.html#a30e3dd349fa1745d8024cdd7399a014e" title="Interpretation d&#39;un bloc d&#39;instructions prises dans l&#39;entree is. Si le bloc commence par {...">interpreter_bloc</a>(echaine, <a class="code" href="classInterprete__bloc.html#a807531b5c02ef81c528d31d963474997a2940e6dc338c0c6755aa5198f9f0f90d">Interprete_bloc::BLOC_EOF</a>,
<a name="l00126"></a>00126                                                          0 <span class="comment">/* verifie_sans_interpreter */</span>);
<a name="l00127"></a>00127   <span class="keywordflow">return</span> is;
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="classDebog__Pb.html#a07f978a5fce13bf8a6d61133a1d23762">00130</a> <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; <a class="code" href="classDebog__Pb.html#a07f978a5fce13bf8a6d61133a1d23762" title="Ecriture de l&#39;objet sur un flot de sortie Methode a surcharger.">Debog_Pb::printOn</a>(<a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os)<span class="keyword"> const</span>
<a name="l00131"></a>00131 <span class="keyword"></span>{
<a name="l00132"></a>00132   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00133"></a>00133   <span class="keywordflow">return</span> os;
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a><a class="code" href="classDebog__Pb.html#aa06be419c414930bde9dae3601a6e1db">00136</a> <a class="code" href="classDebog__Pb.html#a14cbc26681ef74d41a7578428cb3d98c">Debog_Pb::Debog_Pb</a>(<span class="keyword">const</span> <a class="code" href="classDebog__Pb.html">Debog_Pb</a>&amp;): <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>()
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138   <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>(); <span class="comment">//!&lt; invalide</span>
<a name="l00139"></a>00139 <span class="comment"></span>}
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="classDebog__Pb.html#a156067e616c6a350c33558e7f2ee0bab">00141</a> <a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; <a class="code" href="classDebog__Pb.html#a156067e616c6a350c33558e7f2ee0bab" title="Lecture d&#39;un Objet_U sur un flot d&#39;entree Methode a surcharger.">Debog_Pb::readOn</a>(<a class="code" href="classEntree.html" title="Classe de definition des operateurs et methodes pour toute lecture dans un flot d&#39;entree (fichier...">Entree</a>&amp; is)
<a name="l00142"></a>00142 {
<a name="l00143"></a>00143   <a class="code" href="classDebog__Pb.html#aad34779976be704c4f49d431fd807b91">fichier_domaine_</a> = <span class="stringliteral">&quot;dom.debog&quot;</span>;
<a name="l00144"></a>00144   <a class="code" href="classDebog__Pb.html#a8edf20d0486f7aa335701bcedc7ee8ed">fichier_faces_</a> = <span class="stringliteral">&quot;faces.debog&quot;</span>;
<a name="l00145"></a>00145   <a class="code" href="classDebog__Pb.html#a7178671bb1b944be3be33990b2e6631a" title="fichier contenant les valeurs a relire">fichier_debog_</a> = <span class="stringliteral">&quot;DEBOG&quot;</span>;
<a name="l00146"></a>00146   <a class="code" href="classDebog__Pb.html#a24f92722263b4bec494764dbd1c41426">seuil_relatif_</a> = 1e-10;
<a name="l00147"></a>00147   <a class="code" href="classDebog__Pb.html#a9b6b9875e094067921e831fea4c10364">seuil_absolu_</a> = 1e-10;
<a name="l00148"></a>00148   <a class="code" href="classDebog__Pb.html#a84bfc2d9eeeb34d731d8689525634cc1">exit_on_error_</a> = 0;
<a name="l00149"></a>00149   {
<a name="l00150"></a>00150     <a class="code" href="classParam.html" title="Defined below in this file.">Param</a> param(<a class="code" href="classObjet__U.html#aa58e9a81c0ddc2c1149053b8f96698ac" title="renvoie la chaine identifiant la classe.">que_suis_je</a>());
<a name="l00151"></a>00151     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;nom_pb&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#a768ef4d12da1b93db516c5c8d751a69e">nom_pb_</a>, <a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
<a name="l00152"></a>00152     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;fichier_domaine&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#aad34779976be704c4f49d431fd807b91">fichier_domaine_</a>);
<a name="l00153"></a>00153     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;fichier_faces&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#a8edf20d0486f7aa335701bcedc7ee8ed">fichier_faces_</a>);
<a name="l00154"></a>00154     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;fichier_debog&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#a7178671bb1b944be3be33990b2e6631a" title="fichier contenant les valeurs a relire">fichier_debog_</a>);
<a name="l00155"></a>00155     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;seuil_absolu&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#a9b6b9875e094067921e831fea4c10364">seuil_absolu_</a>);
<a name="l00156"></a>00156     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;seuil_relatif&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#a24f92722263b4bec494764dbd1c41426">seuil_relatif_</a>);
<a name="l00157"></a>00157     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;ignorer_messages&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#a7baeae938a77806d3927b25fb7f6c422">msg_a_ignorer_</a>);
<a name="l00158"></a>00158     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;mode_db&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#a5e5f898c0cca38b4a39b9aebe329d5be">mode_db_</a>, <a class="code" href="classParam.html#aa4ad0ca1d49bc5f2ebc5fc83ee9df384aaf5b6dfac1c5970478525407cc6ac572">Param::REQUIRED</a>);
<a name="l00159"></a>00159     param.<a class="code" href="classParam.html#a0d5da6b10afd9ae6e7c98f0836fcb3b0" title="Si le dernier parametre ajoute est de type &quot;int&quot;, associe a ce parametre une ou plusieurs chaines de ...">dictionnaire</a>(<span class="stringliteral">&quot;write&quot;</span>, 0);
<a name="l00160"></a>00160     param.<a class="code" href="classParam.html#a0d5da6b10afd9ae6e7c98f0836fcb3b0" title="Si le dernier parametre ajoute est de type &quot;int&quot;, associe a ce parametre une ou plusieurs chaines de ...">dictionnaire</a>(<span class="stringliteral">&quot;read&quot;</span>, 1);
<a name="l00161"></a>00161     param.<a class="code" href="classParam.html#affb8a0102361201ba896bac7ca8bc21c">ajouter</a>(<span class="stringliteral">&quot;exit_on_error&quot;</span>, &amp;<a class="code" href="classDebog__Pb.html#a84bfc2d9eeeb34d731d8689525634cc1">exit_on_error_</a>);
<a name="l00162"></a>00162     param.<a class="code" href="classParam.html#aea52f16d3b74c59c48cb5708ff48f14a">lire_avec_accolades</a>(is);
<a name="l00163"></a>00163   }
<a name="l00164"></a>00164 
<a name="l00165"></a>00165   <a class="code" href="classObjet__U.html" title="classe Objet_U Cette classe est la classe de base des Objets de TRUST Dans les classes derivees de Ob...">Objet_U</a>&amp; obj = <a class="code" href="classInterprete.html#a3ca248609f0b72eac68baca14621b4ee" title="Voir Interprete_bloc::objet_global() BM: la classe Interprete n&#39;est pas le meilleur endroit pour cett...">Interprete::objet</a>(<a class="code" href="classDebog__Pb.html#a768ef4d12da1b93db516c5c8d751a69e">nom_pb_</a>);
<a name="l00166"></a>00166   <span class="keywordflow">if</span> (!<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>, obj))
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog::interpreter: &quot;</span> &lt;&lt; obj &lt;&lt; <span class="stringliteral">&quot; is not a Problem_base object&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00169"></a>00169       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172   <a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>&amp; pb = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classProbleme__base.html" title="classe Probleme_base C&#39;est un Probleme_U qui n&#39;est pas un couplage. Le role d&#39;un Probleme_base est la...">Probleme_base</a>, obj);
<a name="l00173"></a>00173   <span class="keywordflow">if</span> (pb.<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>().<a class="code" href="classDomaine__dis.html#a7c216179e61820aa920255386c046a96" title="Renvoie le nombre de zones contenues dans le domaine.">nombre_de_zones</a>() == 0)
<a name="l00174"></a>00174     {
<a name="l00175"></a>00175       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00176"></a>00176       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;WARNING, problem in Debog&quot;</span>&lt;&lt;finl;
<a name="l00177"></a>00177       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;It&#39;s maybe because you have put&quot;</span>&lt;&lt;finl;
<a name="l00178"></a>00178       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;the command line Debog before to have associated&quot;</span>&lt;&lt;finl;
<a name="l00179"></a>00179       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a>&lt;&lt;<span class="stringliteral">&quot;the discretization to the problem.&quot;</span>&lt;&lt;finl;
<a name="l00180"></a>00180     }
<a name="l00181"></a>00181   <a class="code" href="classDebog__Pb.html#a339b21b8d9d7427975ae10f4614d9fe2">ref_pb_</a> = pb;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a5e5f898c0cca38b4a39b9aebe329d5be">mode_db_</a> == 0)
<a name="l00184"></a>00184     {
<a name="l00185"></a>00185 <span class="comment">// Ecriture:</span>
<a name="l00186"></a>00186       <a class="code" href="classDebog__Pb.html#a966d0cafbbb37de308e28f009afbf2fc">write_geometry_data</a>();
<a name="l00187"></a>00187       <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(<a class="code" href="classDebog__Pb.html#a7178671bb1b944be3be33990b2e6631a" title="fichier contenant les valeurs a relire">fichier_debog_</a>);
<a name="l00188"></a>00188       <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>.<a class="code" href="classSortie__Fichier__base.html#a5ddd834ca9c766c24cc608cd03ef0e96">setf</a>(ios::scientific);
<a name="l00189"></a>00189       <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>.<a class="code" href="classSortie__Fichier__base.html#a489ca01946f4e2a7a9aa8f3a3d949b08">precision</a>(20);
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191   <span class="keywordflow">else</span>
<a name="l00192"></a>00192     {
<a name="l00193"></a>00193       <a class="code" href="classDebog__Pb.html#ad05c07457c72a0b5fedb38f8435066b3">read_geometry_data</a>();
<a name="l00194"></a>00194       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a>.<a class="code" href="classEntree__Fichier__base.html#a8e34b235668e94f335cc9ab18dd4e427">ouvrir</a>(<a class="code" href="classDebog__Pb.html#a7178671bb1b944be3be33990b2e6631a" title="fichier contenant les valeurs a relire">fichier_debog_</a>);
<a name="l00195"></a>00195       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a>.<a class="code" href="classEntree.html#a955e06069e0554f46804134964371716" title="Change le comportement en cas d&#39;erreur de l&#39;entree, voir error_handle_() et get_error_action()">set_error_action</a>(<a class="code" href="classEntree.html#a92919bfab8dfa0cfdf8cf8e3dc13b078a3680fe7027fd3fe92932f46bd8967fba">Entree::ERROR_EXIT</a>);
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00199"></a>00199     <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a>.<a class="code" href="classSortie__Fichier__base.html#a7e75e18ed580cd4d45912ec202caa2b2">ouvrir</a>(<span class="stringliteral">&quot;debog.log&quot;</span>);
<a name="l00200"></a>00200   <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a>.<a class="code" href="classEcrFicCollecte.html#aa5cf109ccd38b11522fe516567b088cd" title="Ouvre le fichier avec les parametres mode et prot donnes Ces parametres sont les parametres de la met...">ouvrir</a>(<span class="stringliteral">&quot;debog_detail.log&quot;</span>);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202   <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> = 0;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204   <a class="code" href="classDebog__Pb.html#ada30a5c29ef6cc5e66f8d71c21064445">instance_debog_</a> = *<span class="keyword">this</span>;
<a name="l00205"></a>00205   <span class="keywordflow">return</span> is;
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="classDebog__Pb.html#af45cac5b4bd1cbe2531ceed340a543ef">00209</a> <span class="keywordtype">int</span> <a class="code" href="classDebog__Pb.html#af45cac5b4bd1cbe2531ceed340a543ef">Debog_Pb::test_ignore_msg</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg)
<a name="l00210"></a>00210 {
<a name="l00211"></a>00211   <span class="keywordflow">return</span> <a class="code" href="classDebog__Pb.html#a7baeae938a77806d3927b25fb7f6c422">msg_a_ignorer_</a>.<a class="code" href="classMotcles.html#a79f1b0c557e31eece226b045ea412cd6">rang</a>(msg) &gt;= 0;
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00214"></a><a class="code" href="classDebog__Pb.html#a5eabeb121aabb29c95272254a3822c3b">00214</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a5eabeb121aabb29c95272254a3822c3b">Debog_Pb::goto_msg</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="Reordonner__faces__periodiques_8cpp.html#a137d78a01e63d3b66d1b2ed0de0f4c4c">message</a>)
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216   assert(<a class="code" href="classDebog__Pb.html#a5e5f898c0cca38b4a39b9aebe329d5be">mode_db_</a>==1);
<a name="l00217"></a>00217   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> dummy;
<a name="l00218"></a>00218   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> n;
<a name="l00219"></a>00219   <span class="keywordtype">int</span> num;
<a name="l00220"></a>00220   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> msg(message); <span class="comment">//!&lt; copie sans les espaces avant/apres</span>
<a name="l00221"></a>00221 <span class="comment"></span>  <span class="keywordflow">while</span> (msg.<a class="code" href="classNom.html#a41b0ba18fb90d481c0828ed4372de8ee">debute_par</a>(<span class="stringliteral">&quot; &quot;</span>))
<a name="l00222"></a>00222     msg.<a class="code" href="classNom.html#acdb0a56b1654b0c37050be0ca9435706" title="extraction de suffix : Nom x(&quot;azerty&quot;); x.suffix(&quot;aze&quot;) x contient &quot;rty&quot;.">suffix</a>(<span class="stringliteral">&quot; &quot;</span>);
<a name="l00223"></a>00223   <span class="keywordflow">while</span> (msg.<a class="code" href="classNom.html#afc0e84c6c4f4b7b65bfb8f46f3ced45b">finit_par</a>(<span class="stringliteral">&quot; &quot;</span>))
<a name="l00224"></a>00224     msg.<a class="code" href="classNom.html#aa296fc70f7abcf978968e09582d8fb06">prefix</a>(<span class="stringliteral">&quot; &quot;</span>);
<a name="l00225"></a>00225   <span class="keywordflow">while</span>(1)
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227 <span class="comment">// read until we find a &quot;msg&quot; word:</span>
<a name="l00228"></a>00228       <span class="keywordflow">do</span>
<a name="l00229"></a>00229         {
<a name="l00230"></a>00230           <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; dummy;
<a name="l00231"></a>00231         }
<a name="l00232"></a>00232       <span class="keywordflow">while</span> (dummy != <span class="stringliteral">&quot;msg&quot;</span>);
<a name="l00233"></a>00233 
<a name="l00234"></a>00234       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; dummy;
<a name="l00235"></a>00235       <span class="keywordflow">if</span> (dummy != <span class="stringliteral">&quot;:&quot;</span>)
<a name="l00236"></a>00236         {
<a name="l00237"></a>00237           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog_Pb::goto_msg(&quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)\n invalid data in DEBOG file&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00238"></a>00238           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00239"></a>00239         }
<a name="l00240"></a>00240       num = -1;
<a name="l00241"></a>00241       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; num;
<a name="l00242"></a>00242       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; dummy;
<a name="l00243"></a>00243       <span class="keywordflow">if</span> (dummy != <span class="stringliteral">&quot;:&quot;</span>)
<a name="l00244"></a>00244         {
<a name="l00245"></a>00245           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog_Pb::goto_msg(&quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)\n invalid data in DEBOG file&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00246"></a>00246           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00247"></a>00247         }
<a name="l00248"></a>00248       n = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00249"></a>00249       <span class="keywordflow">while</span>(1)
<a name="l00250"></a>00250         {
<a name="l00251"></a>00251           <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; dummy;
<a name="l00252"></a>00252           <span class="keywordflow">if</span> (dummy == <span class="stringliteral">&quot;FinMsg&quot;</span>)
<a name="l00253"></a>00253             <span class="keywordflow">break</span>;
<a name="l00254"></a>00254           n += dummy;
<a name="l00255"></a>00255           n += <span class="stringliteral">&quot; &quot;</span>;
<a name="l00256"></a>00256         }
<a name="l00257"></a>00257       <span class="keywordflow">if</span> (n.<a class="code" href="classNom.html#a41b0ba18fb90d481c0828ed4372de8ee">debute_par</a>(msg))
<a name="l00258"></a>00258         <span class="keywordflow">break</span>;
<a name="l00259"></a>00259       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00260"></a>00260         {
<a name="l00261"></a>00261           <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot;Skipping message &quot;</span> &lt;&lt; n &lt;&lt; <span class="stringliteral">&quot; (looking for &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00262"></a>00262         }
<a name="l00263"></a>00263     }
<a name="l00264"></a>00264   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00265"></a>00265     {
<a name="l00266"></a>00266       <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot;Reading message &quot;</span> &lt;&lt; num &lt;&lt; <span class="stringliteral">&quot;(file) &quot;</span>
<a name="l00267"></a>00267                 &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot;(current) &quot;</span> &lt;&lt; msg &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00268"></a>00268     }
<a name="l00269"></a>00269   <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot;Reading message &quot;</span> &lt;&lt; num &lt;&lt; <span class="stringliteral">&quot;(file) &quot;</span>
<a name="l00270"></a>00270                      &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot;(current) &quot;</span> &lt;&lt; msg &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00271"></a>00271 }
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="classDebog__Pb.html#a966d0cafbbb37de308e28f009afbf2fc">00273</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a966d0cafbbb37de308e28f009afbf2fc">Debog_Pb::write_geometry_data</a>()
<a name="l00274"></a>00274 {
<a name="l00275"></a>00275   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#a6bf692ce58d9578aa62ac3c07b8caaa1" title="renvoie le nombre de processeurs dans le groupe courant Voir Comm_Group::nproc() et PE_Groups::curren...">Process::nproc</a>() &gt; 1)
<a name="l00276"></a>00276     {
<a name="l00277"></a>00277       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog.cpp: cannot write geometry data in parallel.&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00278"></a>00278       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom = <a class="code" href="classDebog__Pb.html#a339b21b8d9d7427975ae10f4614d9fe2">ref_pb_</a>.<a class="code" href="classRef__Probleme__base.html#ae8c315c3e3321e765a5ca9c27e6322b5">valeur</a>().<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>();
<a name="l00281"></a>00281   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zd = <a class="code" href="classDebog__Pb.html#a339b21b8d9d7427975ae10f4614d9fe2">ref_pb_</a>.<a class="code" href="classRef__Probleme__base.html#ae8c315c3e3321e765a5ca9c27e6322b5">valeur</a>().<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>().<a class="code" href="classDomaine__dis.html#a00b2c1bece9e5831d170c39800bd79d0" title="Renvoie une reference sur la i-eme zone discretisee du domaine. (version const)">zone_dis</a>(0).<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>();
<a name="l00282"></a>00282   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, zd);
<a name="l00283"></a>00283   {
<a name="l00284"></a>00284     <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> f(<a class="code" href="classDebog__Pb.html#aad34779976be704c4f49d431fd807b91">fichier_domaine_</a>);
<a name="l00285"></a>00285     f.<a class="code" href="classSortie__Fichier__base.html#a489ca01946f4e2a7a9aa8f3a3d949b08">precision</a>(20);
<a name="l00286"></a>00286     f &lt;&lt; dom;
<a name="l00287"></a>00287   }
<a name="l00288"></a>00288   {
<a name="l00289"></a>00289     <a class="code" href="classSFichier.html" title="Cette classe est a la classe C++ ofstream ce que la classe Sortie est a la classe C++ ostream Elle re...">SFichier</a> f(<a class="code" href="classDebog__Pb.html#a8edf20d0486f7aa335701bcedc7ee8ed">fichier_faces_</a>);
<a name="l00290"></a>00290     f.<a class="code" href="classSortie__Fichier__base.html#a489ca01946f4e2a7a9aa8f3a3d949b08">precision</a>(20);
<a name="l00291"></a>00291     f &lt;&lt; zvf.<a class="code" href="classZone__VF.html#a067e462dcd3ab92b0f6d945b19e4eb37" title="renvoie le numero de le ieme face de la maille num_elem la facon dont ces faces sont numerotees est l...">elem_faces</a>();
<a name="l00292"></a>00292     f &lt;&lt; zvf.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00293"></a>00293     f &lt;&lt; zvf.<a class="code" href="classZone__VF.html#a49d4322f5585a8fa95748ca785b70702" title="renvoie l&#39;element voisin de numface dans la direction i. i=0 : dans le sens oppose de l&#39;axe orthogona...">face_voisins</a>();
<a name="l00294"></a>00294     <span class="keywordflow">if</span> (zvf.<a class="code" href="classZone__VF.html#a6ad5a2a03fc2cba4247a6ebe662b1320">xa</a>().dimension(0) &gt; 0)
<a name="l00295"></a>00295       f &lt;&lt; zvf.<a class="code" href="classZone__VF.html#a6ad5a2a03fc2cba4247a6ebe662b1320">xa</a>();
<a name="l00296"></a>00296   }
<a name="l00297"></a>00297   <a class="code" href="classDebog__Pb.html#a83d92b0a379583d10321e606198fa7ff">register_item</a>(dom.<a class="code" href="classDomaine.html#a94843a61bbc3e432cf87ef40c440fb80">md_vector_sommets</a>(), <span class="stringliteral">&quot;SOM&quot;</span>);
<a name="l00298"></a>00298   <a class="code" href="classDebog__Pb.html#a83d92b0a379583d10321e606198fa7ff">register_item</a>(dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ab4c6e0d58001c0cc98d4f06e98086544" title="renvoie le descripteur parallele des tableaux aux elements de la zone">md_vector_elements</a>(), <span class="stringliteral">&quot;ELEM&quot;</span>);
<a name="l00299"></a>00299   <a class="code" href="classDebog__Pb.html#a83d92b0a379583d10321e606198fa7ff">register_item</a>(zvf.<a class="code" href="classZone__VF.html#abe1f45dce7441b402b8c54b5a407367b">md_vector_faces</a>(), <span class="stringliteral">&quot;FACE&quot;</span>);
<a name="l00300"></a>00300   <span class="keywordflow">if</span> (zvf.<a class="code" href="classZone__VF.html#a93f73d93187a780a1b927be5b3d5c2a2">md_vector_aretes</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
<a name="l00301"></a>00301     <a class="code" href="classDebog__Pb.html#a83d92b0a379583d10321e606198fa7ff">register_item</a>(zvf.<a class="code" href="classZone__VF.html#a93f73d93187a780a1b927be5b3d5c2a2">md_vector_aretes</a>(), <span class="stringliteral">&quot;ARETES&quot;</span>);
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 
<a name="l00304"></a><a class="code" href="classDebog__Pb.html#a83d92b0a379583d10321e606198fa7ff">00304</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a83d92b0a379583d10321e606198fa7ff">Debog_Pb::register_item</a>(<span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md,
<a name="l00305"></a>00305                              <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; <span class="keywordtype">id</span>)
<a name="l00306"></a>00306 {
<a name="l00307"></a>00307   <a class="code" href="classDebog__Pb.html#a56003c9d98149fc62c2c3754bc86b5f7">known_md_</a>.<a class="code" href="classVect__MD__Vector.html#a91e4477aed5f6bf0a98b9d1b5c60a23d">add</a>(md);
<a name="l00308"></a>00308   <a class="code" href="classDebog__Pb.html#a9c83c33f990c305602017f565863f723">renum_id_</a>.<a class="code" href="classVect__Nom.html#ae20c0d0842c00756c1a2610fe0ca471f">add</a>(<span class="keywordtype">id</span>);
<a name="l00309"></a>00309 }
<a name="l00310"></a>00310 
<a name="l00311"></a><a class="code" href="classDebog__Pb.html#a2b2f14db5cc534df3cf4085591891808">00311</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a2b2f14db5cc534df3cf4085591891808">Debog_Pb::add_renum_item</a>(<span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_ref,
<a name="l00312"></a>00312                               <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_par,
<a name="l00313"></a>00313                               <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md,
<a name="l00314"></a>00314                               <span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; <span class="keywordtype">id</span>)
<a name="l00315"></a>00315 {
<a name="l00316"></a>00316   <a class="code" href="classDebog__Pb.html#a83d92b0a379583d10321e606198fa7ff">register_item</a>(md, <span class="keywordtype">id</span>);
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <span class="keyword">const</span> <span class="keywordtype">double</span> epsilon = <a class="code" href="classObjet__U.html#a7447e25c68cc8d3a1c06cf99f0565cff">Objet_U::precision_geom</a>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 <span class="comment">// On cree un octree contenant les points du domaine de reference</span>
<a name="l00321"></a>00321 <span class="comment">// et on cherche chaque point du domaine local dans cet octree.</span>
<a name="l00322"></a>00322   <a class="code" href="classOctree__Double.html" title=": Un octree permettant de chercher dans l&#39;espace des elements ou des points decrits par des coordonne...">Octree_Double</a> octree;
<a name="l00323"></a>00323   octree.<a class="code" href="classOctree__Double.html#a0b66bd315e7f45a024695b6a2764e7d4" title="construit un octree contenant les points de coordonnees coords. Si include_virtual=1, on stocke coords.dimension_tot(0) elements, sinon on en stocke coords.dimension(0) Si epsilon = 0, on construit un octree de points de taille nulle (chaque point se trouve dans un seul octree_floor) Sinon, on construit un octree d&#39;elements cubiques centres sur les coords, de demie-largeur epsilon. Un point peut alors se trouver dans plusieurs octree_floor.">build_nodes</a>(coord_ref, 1 <span class="comment">/* include_virtual_items */</span>);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325 <span class="comment">// Add a new renum array:</span>
<a name="l00326"></a>00326   <a class="code" href="classDebog__Pb.html#a0a5b31462afe107e498d6c5e136739ed">renum_array_</a>.<a class="code" href="classVect__IntVect.html#a29c65ce40e82e5aa75a39054792647b5">add</a>(<a class="code" href="classIntVect.html">IntVect</a>());
<a name="l00327"></a>00327   <a class="code" href="classIntVect.html">IntVect</a>&amp; renum = <a class="code" href="classDebog__Pb.html#a0a5b31462afe107e498d6c5e136739ed">renum_array_</a>[<a class="code" href="classDebog__Pb.html#a0a5b31462afe107e498d6c5e136739ed">renum_array_</a>.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>()-1];
<a name="l00328"></a>00328   <a class="code" href="MD__Vector__tools_8cpp.html#aff1ed2791dba1a76fdb300920147cfdf">MD_Vector_tools::creer_tableau_distribue</a>(md, renum, <a class="code" href="classArray__base.html#abee342aa9ac59623c4c782dc9d7877ffaf6ae9ba7eb51c5f298ce693345b3ec68">Array_base::NOCOPY_NOINIT</a>);
<a name="l00329"></a>00329 
<a name="l00330"></a>00330   <span class="keywordflow">if</span> (renum.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>() != coord_par.<a class="code" href="classDoubleTab.html#a3eadd63f3ba20c1b454d760b430acbf7" title="Returns the total dimensions of the multi-dimensionnal array, including virtual items (used in parall...">dimension_tot</a>(0))
<a name="l00331"></a>00331     {
<a name="l00332"></a>00332       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Internal error in Debog::add_renum_item: coordinate array does not match md descriptor&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00333"></a>00333       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00334"></a>00334     }
<a name="l00335"></a>00335   <span class="keyword">const</span> <span class="keywordtype">int</span> dim = coord_par.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(1);
<a name="l00336"></a>00336   <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a> center(dim);
<a name="l00337"></a>00337   <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> elements;
<a name="l00338"></a>00338   elements.<a class="code" href="classArrOfInt.html#a22d744bcd452d039580d1d9186f02b4e" title="Change le mode l&#39;allocation memoire: reallocation d&#39;un tableau a chaque changement de taille (flag = ...">set_smart_resize</a>(1);
<a name="l00339"></a>00339   <span class="keyword">const</span> <span class="keywordtype">int</span> n = renum.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
<a name="l00340"></a>00340   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
<a name="l00341"></a>00341     {
<a name="l00342"></a>00342       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; dim; j++)
<a name="l00343"></a>00343         center[j] = coord_par(i,j);
<a name="l00344"></a>00344       octree.<a class="code" href="classOctree__Double.html#a1dffcace51ca06cb52ff6e2330ab4b2e" title="cherche tous les elements ou points ayant potentiellement une intersection non vide avec la boite don...">search_elements_box</a>(center, epsilon, elements);
<a name="l00345"></a>00345 <span class="comment">// la premiere recherche renvoie tous les sommets potentiellement proches.</span>
<a name="l00346"></a>00346 <span class="comment">// il faut faire ensuite un test sur chaque sommet:</span>
<a name="l00347"></a>00347       octree.<a class="code" href="classOctree__Double.html#a8ba1f6ceba5dae2af587d2f9a766aac2" title="Methode hors classe Cherche parmi les sommets de la liste node_list ceux qui sont a une distance infe...">search_nodes_close_to</a>(center, coord_ref, elements, epsilon);
<a name="l00348"></a>00348       <span class="keyword">const</span> <span class="keywordtype">int</span> k = elements.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00349"></a>00349       <span class="keywordflow">if</span> (k != 1)
<a name="l00350"></a>00350         {
<a name="l00351"></a>00351           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Debog::add_renum_item: Error. Id=&quot;</span> &lt;&lt; <span class="keywordtype">id</span>
<a name="l00352"></a>00352                &lt;&lt; <span class="stringliteral">&quot;\n Item with following coordinates was found &quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; times within epsilon=&quot;</span> &lt;&lt; epsilon
<a name="l00353"></a>00353                &lt;&lt; <span class="stringliteral">&quot;\n in the reference geometry: &quot;</span> &lt;&lt; center &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00354"></a>00354           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356 <span class="comment">// renum[i] is the index of the i-th local item in the reference geometry</span>
<a name="l00357"></a>00357       renum[i] = elements[0];
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359 }
<a name="l00360"></a>00360 
<a name="l00361"></a><a class="code" href="classDebog__Pb.html#ad05c07457c72a0b5fedb38f8435066b3">00361</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#ad05c07457c72a0b5fedb38f8435066b3">Debog_Pb::read_geometry_data</a>()
<a name="l00362"></a>00362 {
<a name="l00363"></a>00363   <span class="keyword">const</span> <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a>&amp; dom = <a class="code" href="classDebog__Pb.html#a339b21b8d9d7427975ae10f4614d9fe2">ref_pb_</a>.<a class="code" href="classRef__Probleme__base.html#ae8c315c3e3321e765a5ca9c27e6322b5">valeur</a>().<a class="code" href="classProbleme__base.html#afa73c54a5b6b111e0f08cd1ab3608178" title="Renvoie le domaine associe au probleme. (version const)">domaine</a>();
<a name="l00364"></a>00364   <span class="keyword">const</span> <a class="code" href="classZone__dis__base.html" title="classe Zone_dis_base Cette classe est la base de la hierarchie des zones discretisees. Un objet Zone est associe a la zone discretise. A chaque methode numerique de Trio U correspond une classe derivant de Zone_dis_base implementant les outils necessaires a la methode.">Zone_dis_base</a>&amp; zd = <a class="code" href="classDebog__Pb.html#a339b21b8d9d7427975ae10f4614d9fe2">ref_pb_</a>.<a class="code" href="classRef__Probleme__base.html#ae8c315c3e3321e765a5ca9c27e6322b5">valeur</a>().<a class="code" href="classProbleme__base.html#afa9db69423a68eb887b94ed19293bd6f" title="Renvoie le domaine discretise associe au probleme. (version const)">domaine_dis</a>().<a class="code" href="classDomaine__dis.html#a00b2c1bece9e5831d170c39800bd79d0" title="Renvoie une reference sur la i-eme zone discretisee du domaine. (version const)">zone_dis</a>(0).<a class="code" href="classDeriv__Zone__dis__base.html#a30ff47fc0684fe134e8c74c35b268941">valeur</a>();
<a name="l00365"></a>00365   <span class="keyword">const</span> <a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>&amp; zvf = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classZone__VF.html" title="class Zone_VF Cette classe abstraite contient les informations geometriques communes aux methodes de ...">Zone_VF</a>, zd);
<a name="l00366"></a>00366   {
<a name="l00367"></a>00367     <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> coord_som_seq; <span class="comment">//!&lt; sommets</span>
<a name="l00368"></a>00368 <span class="comment"></span>    <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> xp_seq; <span class="comment">//!&lt; centres des elements Il faut passer dans un groupe monoprocesseur pour Domaine::readOn:</span>
<a name="l00369"></a>00369 <span class="comment"></span><span class="comment">//</span>
<a name="l00370"></a>00370     {
<a name="l00371"></a>00371       <a class="code" href="Deriv_8h.html#a4b39337b42cbf2fddeba7868ced6f860" title="Soit une classe Type_base qui derive de Objet_U. DERIV(T) est une petite classe contenant un pointeur...">DERIV</a>(<a class="code" href="classComm__Group.html" title=": Cette classe decrit un groupe de processeurs sur lesquels une portion de code s&#39;execute simultaneme...">Comm_Group</a>) group;
<a name="l00372"></a>00372       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> liste_procs(1); <span class="comment">//!&lt; Liste de 1 processeur contenant le proc 0</span>
<a name="l00373"></a>00373 <span class="comment"></span>      <a class="code" href="classPE__Groups.html#a9882412c8e813c12d2fce5dbb2996430" title="Creation d&#39;un nouveau groupe de processeurs (utilisation possible n&#39;importe ou dans le code) Il faut ...">PE_Groups::create_group</a>(liste_procs, group, 1);
<a name="l00374"></a>00374       <span class="keywordflow">if</span> (<a class="code" href="classPE__Groups.html#a1df95ab36f35005ab28fd5c134794772" title="Si le processeur local appartient au groupe, le groupe courant pour ce processeur devient &quot;group&quot; e...">PE_Groups::enter_group</a>(group.valeur()))
<a name="l00375"></a>00375         {
<a name="l00376"></a>00376           <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> f(<a class="code" href="classDebog__Pb.html#aad34779976be704c4f49d431fd807b91">fichier_domaine_</a>);
<a name="l00377"></a>00377           <a class="code" href="classDomaine.html" title="Classe Domaine Un Domaine represente le domaine (spatial) de resolution d&#39;un Probleme. Un Domaine a un Nom, il est constitue d&#39;une ou plusieurs Zone qui peuvent etre eventuellement decoupees en Sous_Zone. Un Domaine porte l&#39;ensemble des sommets utilises par ses Zones. On peut vouloir resoudre des problemes de type different sur plusieurs domaines, geometriquement les domaines sont alors couples par des surfaces qu&#39;on appelle Raccord.">Domaine</a> dom_seq;
<a name="l00378"></a>00378           f &gt;&gt; dom_seq;
<a name="l00379"></a>00379           coord_som_seq = dom_seq.coord_sommets();
<a name="l00380"></a>00380           <span class="keyword">const</span> <a class="code" href="classElem__geom__base.html" title="Classe Elem_geom_base Cette classe est la classe de base pour la definition d&#39;elements geometriques c...">Elem_geom_base</a>&amp; elem = dom_seq.zone(0).type_elem().valeur();
<a name="l00381"></a>00381           elem.<a class="code" href="classElem__geom__base.html#ac9133f37aeb3c878b2a70e4b51565f5b" title="Calcule les centres de gravites de tous les elements de la zone associee a l&#39;element goemetrique...">calculer_centres_gravite</a>(xp_seq);
<a name="l00382"></a>00382           <a class="code" href="classPE__Groups.html#af49cb26695386d2e0de890aadc39057e" title="Retourne dans le groupe ou l&#39;on etait avant le dernier enter_group() reussi (dont le resultat a ete 1...">PE_Groups::exit_group</a>();
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384     }
<a name="l00385"></a>00385 <span class="comment">// Tous les processeurs recoivent les coordonnees des sommets de reference</span>
<a name="l00386"></a>00386 <span class="comment">// (detruire le descripteur sinon printOn refuse d&#39;envoyer le vecteur)</span>
<a name="l00387"></a>00387     coord_som_seq.<a class="code" href="classDoubleTab.html#a2f40241acb678b0dd0dac7ee4f421b1d" title="associe le md_vector au vecteur (voir DoubleVect::set_md_vector()) dimension(0) sera initialise a md_...">set_md_vector</a>(<a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>());
<a name="l00388"></a>00388     <a class="code" href="communications_8cpp.html#a2335b36078ae87e23dab400a6e129a3c">envoyer_broadcast</a>(coord_som_seq, 0);
<a name="l00389"></a>00389 <span class="comment">// Idem avec les centres des elements</span>
<a name="l00390"></a>00390     xp_seq.<a class="code" href="classDoubleTab.html#a2f40241acb678b0dd0dac7ee4f421b1d" title="associe le md_vector au vecteur (voir DoubleVect::set_md_vector()) dimension(0) sera initialise a md_...">set_md_vector</a>(<a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>());
<a name="l00391"></a>00391     <a class="code" href="communications_8cpp.html#a2335b36078ae87e23dab400a6e129a3c">envoyer_broadcast</a>(xp_seq, 0);
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 <span class="comment">// Calculer les renumerotations:</span>
<a name="l00394"></a>00394     <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; coord_som = dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>();
<a name="l00395"></a>00395     <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_som = dom.<a class="code" href="classDomaine.html#aecd32c3eecc15cce7d1a0e468dadbf96" title="Renvoie le tableau des coordonnees des noeuds (sommets). (acces en lecture)">coord_sommets</a>().<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>();
<a name="l00396"></a>00396     <a class="code" href="classDebog__Pb.html#a2b2f14db5cc534df3cf4085591891808">add_renum_item</a>(coord_som_seq, coord_som, md_som, <span class="stringliteral">&quot;SOM&quot;</span>);
<a name="l00397"></a>00397     <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xp = zvf.<a class="code" href="classZone__VF.html#a87a29f0223c71256a25ee343c9277599">xp</a>();
<a name="l00398"></a>00398 <span class="comment">// Le tableau xp n&#39;a pas de structure parallele, on la prend dans les elements...</span>
<a name="l00399"></a>00399     <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_elem = dom.<a class="code" href="classDomaine.html#a0e62f2bc829542fafa29e3f2c614159c" title="Renvoie la i-ieme zone du domaine. (version const)">zone</a>(0).<a class="code" href="classZone.html#ac115e8342be89afb882b7b61cc343267" title="Renvoie le tableau des sommets des elements.">les_elems</a>().<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>();
<a name="l00400"></a>00400     <a class="code" href="classDebog__Pb.html#a2b2f14db5cc534df3cf4085591891808">add_renum_item</a>(xp_seq, xp, md_elem, <span class="stringliteral">&quot;ELEM&quot;</span>);
<a name="l00401"></a>00401   }
<a name="l00402"></a>00402   {
<a name="l00403"></a>00403     <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> xv_seq;
<a name="l00404"></a>00404     <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> xa_seq;
<a name="l00405"></a>00405     <span class="keywordtype">int</span> avec_aretes = 1;
<a name="l00406"></a>00406     <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00407"></a>00407       {
<a name="l00408"></a>00408         <a class="code" href="classEFichier.html" title="Fichier en lecture Cette classe est a la classe C++ ifstream ce que la classe Entree est a la classe ...">EFichier</a> f(<a class="code" href="classDebog__Pb.html#a8edf20d0486f7aa335701bcedc7ee8ed">fichier_faces_</a>);
<a name="l00409"></a>00409         f.<a class="code" href="classEntree__Fichier__base.html#a709975c8fba5b6ee448077db91d83bc3">precision</a>(20);
<a name="l00410"></a>00410         {
<a name="l00411"></a>00411           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> elem_faces;
<a name="l00412"></a>00412           f &gt;&gt; elem_faces; <span class="comment">//!&lt; non utilise</span>
<a name="l00413"></a>00413 <span class="comment"></span>        }
<a name="l00414"></a>00414         f &gt;&gt; xv_seq;
<a name="l00415"></a>00415         {
<a name="l00416"></a>00416           <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> face_voisins;
<a name="l00417"></a>00417           f &gt;&gt; face_voisins; <span class="comment">//!&lt; non utilise</span>
<a name="l00418"></a>00418 <span class="comment"></span>        }
<a name="l00419"></a>00419         f.<a class="code" href="classEntree.html#a955e06069e0554f46804134964371716" title="Change le comportement en cas d&#39;erreur de l&#39;entree, voir error_handle_() et get_error_action()">set_error_action</a>(<a class="code" href="classEntree.html#a92919bfab8dfa0cfdf8cf8e3dc13b078a088520a49895e1e1fb6c59bc3b5b8c84">Entree::ERROR_EXCEPTION</a>);
<a name="l00420"></a>00420         <span class="keywordflow">try</span>
<a name="l00421"></a>00421           {
<a name="l00422"></a>00422             f &gt;&gt; xa_seq;
<a name="l00423"></a>00423           }
<a name="l00424"></a>00424         <span class="keywordflow">catch</span> (<a class="code" href="classEntree__Sortie__Error.html">Entree_Sortie_Error</a>)
<a name="l00425"></a>00425           {
<a name="l00426"></a>00426             avec_aretes = 0;
<a name="l00427"></a>00427           }
<a name="l00428"></a>00428       }
<a name="l00429"></a>00429     <a class="code" href="communications_8cpp.html#a2335b36078ae87e23dab400a6e129a3c">envoyer_broadcast</a>(xv_seq, 0);
<a name="l00430"></a>00430     <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xv = zvf.<a class="code" href="classZone__VF.html#a918c0885a9b67317fcce3a0535306542">xv</a>();
<a name="l00431"></a>00431     <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_face = zvf.<a class="code" href="classZone__VF.html#abe1f45dce7441b402b8c54b5a407367b">md_vector_faces</a>();
<a name="l00432"></a>00432     <a class="code" href="classDebog__Pb.html#a2b2f14db5cc534df3cf4085591891808">add_renum_item</a>(xv_seq, xv, md_face, <span class="stringliteral">&quot;FACE&quot;</span>);
<a name="l00433"></a>00433 
<a name="l00434"></a>00434     <a class="code" href="communications_8cpp.html#a2335b36078ae87e23dab400a6e129a3c">envoyer_broadcast</a>(avec_aretes, 0);
<a name="l00435"></a>00435     <span class="keywordflow">if</span> (avec_aretes)
<a name="l00436"></a>00436       {
<a name="l00437"></a>00437         <a class="code" href="communications_8cpp.html#a2335b36078ae87e23dab400a6e129a3c">envoyer_broadcast</a>(xa_seq, 0);
<a name="l00438"></a>00438         <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; xa = zvf.<a class="code" href="classZone__VF.html#a6ad5a2a03fc2cba4247a6ebe662b1320">xa</a>();
<a name="l00439"></a>00439         <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_arete = zvf.<a class="code" href="classZone__VF.html#a93f73d93187a780a1b927be5b3d5c2a2">md_vector_aretes</a>();
<a name="l00440"></a>00440         <a class="code" href="classDebog__Pb.html#a2b2f14db5cc534df3cf4085591891808">add_renum_item</a>(xa_seq, xa, md_arete, <span class="stringliteral">&quot;ARETE&quot;</span>);
<a name="l00441"></a>00441       }
<a name="l00442"></a>00442   }
<a name="l00443"></a>00443 }
<a name="l00444"></a>00444 
<a name="l00445"></a><a class="code" href="Debog_8cpp.html#aa72f62dd2495491b192ae555417a2f16a86313b9c1508b01c96dea421e4c07416">00445</a> <span class="keyword">enum</span> <a class="code" href="Debog_8cpp.html#aa72f62dd2495491b192ae555417a2f16">Debog_Exceptions</a> { <a class="code" href="Debog_8cpp.html#aa72f62dd2495491b192ae555417a2f16a86313b9c1508b01c96dea421e4c07416">RENUM_ARRAY_NOT_FOUND</a> };
<a name="l00446"></a>00446 
<a name="l00447"></a><a class="code" href="classDebog__Pb.html#a456bb2ea6106b40cc880b7b0ae1c2116">00447</a> <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; <a class="code" href="classDebog__Pb.html#a456bb2ea6106b40cc880b7b0ae1c2116">Debog_Pb::find_renum_vector</a>(<span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; mdv, <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; <span class="keywordtype">id</span>)<span class="keyword"> const</span>
<a name="l00448"></a>00448 <span class="keyword"></span>{
<a name="l00449"></a>00449   <span class="keyword">const</span> <span class="keywordtype">int</span> n = <a class="code" href="classDebog__Pb.html#a0a5b31462afe107e498d6c5e136739ed">renum_array_</a>.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>();
<a name="l00450"></a>00450   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
<a name="l00451"></a>00451     {
<a name="l00452"></a>00452       <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; renum = <a class="code" href="classDebog__Pb.html#a0a5b31462afe107e498d6c5e136739ed">renum_array_</a>[i];
<a name="l00453"></a>00453       <span class="keywordflow">if</span> (renum.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>() == mdv)
<a name="l00454"></a>00454         {
<a name="l00455"></a>00455           <span class="keywordtype">id</span> = <a class="code" href="classDebog__Pb.html#a9c83c33f990c305602017f565863f723">renum_id_</a>[i];
<a name="l00456"></a>00456           <span class="keywordflow">return</span> renum;
<a name="l00457"></a>00457         }
<a name="l00458"></a>00458     }
<a name="l00459"></a>00459   <span class="keywordflow">throw</span> <a class="code" href="Debog_8cpp.html#aa72f62dd2495491b192ae555417a2f16a86313b9c1508b01c96dea421e4c07416">RENUM_ARRAY_NOT_FOUND</a>;
<a name="l00460"></a>00460 }
<a name="l00461"></a>00461 
<a name="l00462"></a><a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">00462</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">Debog_Pb::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> *ref_value)
<a name="l00463"></a>00463 {
<a name="l00464"></a>00464   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a768ef4d12da1b93db516c5c8d751a69e">nom_pb_</a> != <a class="code" href="classDebog__Pb.html#a4ed6a6aa71d1e3d5bcb115820c5b4a3c">nom_pb_actuel_</a>)
<a name="l00465"></a>00465     <span class="keywordflow">return</span>;
<a name="l00466"></a>00466 
<a name="l00467"></a>00467   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#af45cac5b4bd1cbe2531ceed340a543ef">test_ignore_msg</a>(msg))
<a name="l00468"></a>00468     {
<a name="l00469"></a>00469 <span class="comment">// Ignorer ce test</span>
<a name="l00470"></a>00470       <span class="keywordflow">return</span>;
<a name="l00471"></a>00471     }
<a name="l00472"></a>00472   <a class="code" href="Debog_8cpp.html#a5d4370767e286c0cf2af58db7d6bc483">debog_break_test</a>(<a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a>);
<a name="l00473"></a>00473   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a5e5f898c0cca38b4a39b9aebe329d5be">mode_db_</a> == 0)
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475 <span class="comment">// write</span>
<a name="l00476"></a>00476       <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os = <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>;
<a name="l00477"></a>00477       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;DEBOG: writing scalar, message &quot;</span> &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; msg &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00478"></a>00478       os &lt;&lt; <span class="stringliteral">&quot;msg : &quot;</span> &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; FinMsg &quot;</span> &lt;&lt; finl;
<a name="l00479"></a>00479       os &lt;&lt; x &lt;&lt; finl;
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481   <span class="keywordflow">else</span>
<a name="l00482"></a>00482     {
<a name="l00483"></a>00483 <span class="comment">// read and compare</span>
<a name="l00484"></a>00484       <a class="code" href="classDebog__Pb.html#a5eabeb121aabb29c95272254a3822c3b">goto_msg</a>(msg);
<a name="l00485"></a>00485       <span class="keywordtype">double</span> y;
<a name="l00486"></a>00486       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; y;
<a name="l00487"></a>00487       <span class="keyword">const</span> <span class="keywordtype">double</span> adim = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(fabs(x), fabs(y));
<a name="l00488"></a>00488       <span class="keyword">const</span> <span class="keywordtype">double</span> delta = fabs(x-y);
<a name="l00489"></a>00489       <span class="keywordtype">double</span> err = 0;
<a name="l00490"></a>00490       <span class="keywordflow">if</span> (delta &gt;= <a class="code" href="classDebog__Pb.html#a9b6b9875e094067921e831fea4c10364">seuil_absolu_</a> &amp;&amp; delta / adim &gt;= <a class="code" href="classDebog__Pb.html#a24f92722263b4bec494764dbd1c41426">seuil_relatif_</a>)
<a name="l00491"></a>00491         {
<a name="l00492"></a>00492           err = delta;
<a name="l00493"></a>00493           <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot; ECART (double) reference=&quot;</span> &lt;&lt; y
<a name="l00494"></a>00494                              &lt;&lt; <span class="stringliteral">&quot; calcul=&quot;</span> &lt;&lt; x
<a name="l00495"></a>00495                              &lt;&lt; <span class="stringliteral">&quot; relative error=&quot;</span> &lt;&lt; delta
<a name="l00496"></a>00496                              &lt;&lt; <span class="stringliteral">&quot; (adim=&quot;</span> &lt;&lt; adim &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00497"></a>00497         }
<a name="l00498"></a>00498       err = <a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(err);
<a name="l00499"></a>00499       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00500"></a>00500         {
<a name="l00501"></a>00501           <span class="keyword">const</span> <span class="keywordtype">char</span> *ok = (err &gt; 0.) ? <span class="stringliteral">&quot; ERROR       &quot;</span> : <span class="stringliteral">&quot; OK           &quot;</span>;
<a name="l00502"></a>00502           <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; ok &lt;&lt; <span class="stringliteral">&quot; : comparing double: reference=&quot;</span> &lt;&lt; y &lt;&lt; <span class="stringliteral">&quot; deltamax=&quot;</span> &lt;&lt; err &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00503"></a>00503           <span class="keywordflow">if</span> (err &gt; 0.)
<a name="l00504"></a>00504             <a class="code" href="classDebog__Pb.html#a8674931254697863f85c3c9446f17347" title="methode appelee des qu&#39;une erreur est trouvee dans l&#39;espace reel. (utile pour poser un breakpoint dan...">error_function</a>();
<a name="l00505"></a>00505         }
<a name="l00506"></a>00506       <span class="keywordflow">if</span> (ref_value)
<a name="l00507"></a>00507         {
<a name="l00508"></a>00508           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00509"></a>00509             <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot;                Request reference value&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00510"></a>00510           *ref_value = y;
<a name="l00511"></a>00511         }
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513   <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a>++;
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 
<a name="l00516"></a><a class="code" href="classDebog__Pb.html#a98448b502de01495a8f395e72f61bb8b">00516</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">Debog_Pb::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> *ref_value)
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a768ef4d12da1b93db516c5c8d751a69e">nom_pb_</a> != <a class="code" href="classDebog__Pb.html#a4ed6a6aa71d1e3d5bcb115820c5b4a3c">nom_pb_actuel_</a>)
<a name="l00519"></a>00519     <span class="keywordflow">return</span>;
<a name="l00520"></a>00520 
<a name="l00521"></a>00521   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#af45cac5b4bd1cbe2531ceed340a543ef">test_ignore_msg</a>(msg))
<a name="l00522"></a>00522     {
<a name="l00523"></a>00523 <span class="comment">// Ignorer ce test</span>
<a name="l00524"></a>00524       <span class="keywordflow">return</span>;
<a name="l00525"></a>00525     }
<a name="l00526"></a>00526   <a class="code" href="Debog_8cpp.html#a5d4370767e286c0cf2af58db7d6bc483">debog_break_test</a>(<a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a>);
<a name="l00527"></a>00527   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a5e5f898c0cca38b4a39b9aebe329d5be">mode_db_</a> == 0)
<a name="l00528"></a>00528     {
<a name="l00529"></a>00529 <span class="comment">// write</span>
<a name="l00530"></a>00530       <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os = <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>;
<a name="l00531"></a>00531       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;DEBOG: writing scalar, message &quot;</span> &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; msg &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00532"></a>00532       os &lt;&lt; <span class="stringliteral">&quot;msg : &quot;</span> &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; FinMsg &quot;</span> &lt;&lt; finl;
<a name="l00533"></a>00533       os &lt;&lt; x &lt;&lt; finl;
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535   <span class="keywordflow">else</span>
<a name="l00536"></a>00536     {
<a name="l00537"></a>00537 <span class="comment">// read and compare</span>
<a name="l00538"></a>00538       <a class="code" href="classDebog__Pb.html#a5eabeb121aabb29c95272254a3822c3b">goto_msg</a>(msg);
<a name="l00539"></a>00539       <span class="keywordtype">int</span> y;
<a name="l00540"></a>00540       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; y;
<a name="l00541"></a>00541       <span class="keywordtype">int</span> err = ((x - y) != 0);
<a name="l00542"></a>00542       <span class="keywordflow">if</span> (err)
<a name="l00543"></a>00543         {
<a name="l00544"></a>00544           <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot; ECART (int) reference=&quot;</span> &lt;&lt; y
<a name="l00545"></a>00545                              &lt;&lt; <span class="stringliteral">&quot; calcul=&quot;</span> &lt;&lt; x &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00546"></a>00546         }
<a name="l00547"></a>00547       err = <a class="code" href="classProcess.html#a7d23bc1ef94b3f0623fbc79d034c27fd" title="Calcule la somme de x sur tous les processeurs du groupe courant. Voir aussi mp_max()">mp_sum</a>(err);
<a name="l00548"></a>00548       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00549"></a>00549         {
<a name="l00550"></a>00550           <span class="keyword">const</span> <span class="keywordtype">char</span> *ok = (err &gt; 0.) ? <span class="stringliteral">&quot; ERROR       &quot;</span> : <span class="stringliteral">&quot; OK           &quot;</span>;
<a name="l00551"></a>00551           <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; ok &lt;&lt; <span class="stringliteral">&quot; : comparing int: reference=&quot;</span> &lt;&lt; y &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00552"></a>00552           <span class="keywordflow">if</span> (err)
<a name="l00553"></a>00553             <a class="code" href="classDebog__Pb.html#a8674931254697863f85c3c9446f17347" title="methode appelee des qu&#39;une erreur est trouvee dans l&#39;espace reel. (utile pour poser un breakpoint dan...">error_function</a>();
<a name="l00554"></a>00554         }
<a name="l00555"></a>00555       <span class="keywordflow">if</span> (ref_value)
<a name="l00556"></a>00556         {
<a name="l00557"></a>00557           <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00558"></a>00558             <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot;                Request reference value&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00559"></a>00559           *ref_value = y;
<a name="l00560"></a>00560         }
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562   <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a>++;
<a name="l00563"></a>00563 }
<a name="l00564"></a>00564 
<a name="l00565"></a><a class="code" href="classDebog__Pb.html#a8e48b408f6bf1f3ca7c361304111b525">00565</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a8e48b408f6bf1f3ca7c361304111b525">Debog_Pb::set_nom_pb_actuel</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom)
<a name="l00566"></a>00566 {
<a name="l00567"></a>00567   <a class="code" href="classDebog__Pb.html#a4ed6a6aa71d1e3d5bcb115820c5b4a3c">nom_pb_actuel_</a> = nom;
<a name="l00568"></a>00568 }
<a name="l00569"></a>00569 
<a name="l00570"></a><a class="code" href="classDebog.html#aa228f7e951ef67b9e9bb31ced928652f">00570</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#aa228f7e951ef67b9e9bb31ced928652f">Debog::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keywordtype">double</span> x)
<a name="l00571"></a>00571 {
<a name="l00572"></a>00572   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00573"></a>00573     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x);
<a name="l00574"></a>00574 }
<a name="l00575"></a>00575 
<a name="l00576"></a><a class="code" href="classDebog.html#a68939a636009d49a3e1b873a19cd59f3">00576</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#aa228f7e951ef67b9e9bb31ced928652f">Debog::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keywordtype">int</span> x)
<a name="l00577"></a>00577 {
<a name="l00578"></a>00578   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00579"></a>00579     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x);
<a name="l00580"></a>00580 }
<a name="l00581"></a>00581 
<a name="l00582"></a><a class="code" href="classDebog.html#a0d9fcc28f2e84db3e71517a35d89272f">00582</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#a0d9fcc28f2e84db3e71517a35d89272f">Debog::verifier_bord</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; arr, <span class="keywordtype">int</span> num_deb)
<a name="l00583"></a>00583 {
<a name="l00584"></a>00584 <span class="comment">// Ne fait rien</span>
<a name="l00585"></a>00585 }
<a name="l00586"></a>00586 
<a name="l00587"></a><a class="code" href="classDebog.html#a5b91668f6738d04e5b30bdc8f733ee57">00587</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#aa228f7e951ef67b9e9bb31ced928652f">Debog::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classChamp__Inc.html">Champ_Inc</a>&amp; x)
<a name="l00588"></a>00588 {
<a name="l00589"></a>00589   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00590"></a>00590     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x.<a class="code" href="classDeriv__Champ__Inc__base.html#a9e0b743a3e124e7114fa977b36b68225">valeur</a>().<a class="code" href="classChamp__Inc__base.html#adb537f43f1649e103a8980314c7ed175" title="Renvoie le tableau des valeurs du champ au temps courant.">valeurs</a>());
<a name="l00591"></a>00591 }
<a name="l00592"></a>00592 
<a name="l00593"></a><a class="code" href="classDebog.html#a8a6e07988905a2355473e3361a26d346">00593</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#aa228f7e951ef67b9e9bb31ced928652f">Debog::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classChamp__Inc__base.html" title="Classe Champ_Inc_base Classe de base des champs inconnues qui sont les champs calcules par une equati...">Champ_Inc_base</a>&amp; x)
<a name="l00594"></a>00594 {
<a name="l00595"></a>00595   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00596"></a>00596     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x.<a class="code" href="classChamp__Inc__base.html#adb537f43f1649e103a8980314c7ed175" title="Renvoie le tableau des valeurs du champ au temps courant.">valeurs</a>());
<a name="l00597"></a>00597 }
<a name="l00598"></a>00598 
<a name="l00599"></a><a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">00599</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#a4426d847fc0bc1e99141e5d8a71c8592">Debog::set_nom_pb_actuel</a>(<span class="keyword">const</span> <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>&amp; nom)
<a name="l00600"></a>00600 {
<a name="l00601"></a>00601   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00602"></a>00602     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#a8e48b408f6bf1f3ca7c361304111b525">set_nom_pb_actuel</a>(nom);
<a name="l00603"></a>00603 }
<a name="l00604"></a>00604 
<a name="l00605"></a>00605 <span class="comment">//</span>
<a name="l00606"></a>00606 <span class="comment">//</span>
<a name="l00607"></a>00607 <span class="comment">//</span>
<a name="l00608"></a>00608 <span class="comment">//</span><span class="comment"></span>
<a name="l00609"></a>00609 <span class="comment">//! teste le contenu du vecteur v en supposant qu&#39;il contient des&lt;br&gt;indices d&#39;items associes au descripteur md. Exemple: face_keps_imposee_&lt;br&gt;Les valeurs negatives doivent etre identiques a la reference,&lt;br&gt;les valeurs positives ou nulles sont interpretees comme un indice et&lt;br&gt;doivent etre egale a l&#39;indice de reference apres renumerotation.</span>
<a name="l00610"></a><a class="code" href="classDebog.html#a45e9031473a651560a4d3843e41164ce">00610</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog.html#a45e9031473a651560a4d3843e41164ce" title="teste le contenu du vecteur v en supposant qu&#39;il contient des indices d&#39;items associes au descripteur...">Debog::verifier_indices_items</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; v)
<a name="l00611"></a>00611 {
<a name="l00612"></a>00612 <span class="comment">// pas code</span>
<a name="l00613"></a>00613 }
<a name="l00614"></a>00614 <span class="comment"></span>
<a name="l00615"></a>00615 <span class="comment">//! renvoie 1 si on est en mode Debog, 0 sinon</span>
<a name="l00616"></a><a class="code" href="classDebog.html#a76d8a5030a2cb72e4b4639a1ce97dc90">00616</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="classDebog.html#a76d8a5030a2cb72e4b4639a1ce97dc90" title="renvoie 1 si on est en mode Debog, 0 sinon">Debog::active</a>()
<a name="l00617"></a>00617 {
<a name="l00618"></a>00618   <span class="keywordflow">return</span> <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classO__U__Ptr.html#a16f216b2d169e885876419182658ddcc" title="Renvoie 1 si le pointeur est non_nul Renvoie 0 sinon.">non_nul</a>();
<a name="l00619"></a>00619 }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 <span class="comment">//</span><span class="comment"></span>
<a name="l00622"></a>00622 <span class="comment">//! like verifier(), but, in &quot;read\&amp;compare&quot; mode, put the reference&lt;br&gt;value found in the file in the ref variable.</span>
<a name="l00623"></a><a class="code" href="classDebog.html#a52ab9548f200a42da12cb62a4440266b">00623</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog.html#a52ab9548f200a42da12cb62a4440266b" title="like verifier(), but, in &quot;read\&amp;compare&quot; mode, put the reference value found in the file in the ref v...">Debog::verifier_getref</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keywordtype">double</span> x, <span class="keywordtype">double</span>&amp; ref)
<a name="l00624"></a>00624 {
<a name="l00625"></a>00625   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00626"></a>00626     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x, &amp;ref);
<a name="l00627"></a>00627 }
<a name="l00628"></a>00628 
<a name="l00629"></a>00629 <span class="comment">//</span><span class="comment"></span>
<a name="l00630"></a>00630 <span class="comment">//! like verifier(), but, in &quot;read\&amp;compare&quot; mode, put the reference&lt;br&gt;value found in the file in the ref variable.</span>
<a name="l00631"></a><a class="code" href="classDebog.html#a8a94a0b2faf9225639b5f52450052846">00631</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog.html#a52ab9548f200a42da12cb62a4440266b" title="like verifier(), but, in &quot;read\&amp;compare&quot; mode, put the reference value found in the file in the ref v...">Debog::verifier_getref</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span>&amp; ref)
<a name="l00632"></a>00632 {
<a name="l00633"></a>00633   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00634"></a>00634     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x, &amp;ref);
<a name="l00635"></a>00635 }
<a name="l00636"></a>00636 
<a name="l00637"></a>00637 <span class="keywordtype">void</span> <a class="code" href="Debog_8cpp.html#a5d4370767e286c0cf2af58db7d6bc483">debog_break_test</a>(<span class="keywordtype">int</span> msg);
<a name="l00638"></a>00638 
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 
<a name="l00641"></a>00641 
<a name="l00642"></a>00642 
<a name="l00643"></a><a class="code" href="classDebog__Pb.html#a3260eefc8a5ec20d26d5e9acaf216e3b">00643</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a3260eefc8a5ec20d26d5e9acaf216e3b">Debog_Pb::ecrire_partie</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; arr)
<a name="l00644"></a>00644 {
<a name="l00645"></a>00645   <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; md = arr.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
<a name="l00646"></a>00646   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, md))
<a name="l00647"></a>00647     {
<a name="l00648"></a>00648       <span class="keyword">const</span> <span class="keywordtype">int</span> ls = arr.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00649"></a>00649       <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>.<a class="code" href="classSortie.html#aa3f46aaccaff0f83c018784b50d8ea24" title="Methode de bas niveau pour ecrire un tableau d&#39;ints ou reels dans le stream. Dans l&#39;implementation de...">put</a>(arr.<a class="code" href="classArrOfDouble.html#a95357a1390c11dbd481d385257f2e983" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>(), arr.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(), ls);
<a name="l00650"></a>00650     }
<a name="l00651"></a>00651   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, md))
<a name="l00652"></a>00652     {
<a name="l00653"></a>00653 <span class="comment">// This way, each processor writes each part sequentially</span>
<a name="l00654"></a>00654 <span class="comment">// part1proc1, part1proc2, ... part2proc1, part2proc2, etc...</span>
<a name="l00655"></a>00655       <a class="code" href="classConstDoubleTab__parts.html" title="This class allows to acces to individual sub-parts of const DoubleTab objects that have a MD_Vector_c...">ConstDoubleTab_parts</a> parts(arr);
<a name="l00656"></a>00656       <span class="keyword">const</span> <span class="keywordtype">int</span> n = parts.<a class="code" href="classConstDoubleTab__parts.html#a9c573a25a8c3cf148c914bd7a00b52c0">size</a>();
<a name="l00657"></a>00657       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
<a name="l00658"></a>00658         {
<a name="l00659"></a>00659           <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; t = parts[i];
<a name="l00660"></a>00660           <a class="code" href="classDebog__Pb.html#a3260eefc8a5ec20d26d5e9acaf216e3b">ecrire_partie</a>(t);
<a name="l00661"></a>00661         }
<a name="l00662"></a>00662     }
<a name="l00663"></a>00663 }
<a name="l00664"></a>00664 
<a name="l00665"></a><a class="code" href="classDebog__Pb.html#aa01fc3f495df669f2b59b8358c553da9">00665</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#aa01fc3f495df669f2b59b8358c553da9">Debog_Pb::ecrire_gen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; arr, <span class="keywordtype">int</span> num_deb)
<a name="l00666"></a>00666 {
<a name="l00667"></a>00667   <span class="keywordflow">if</span> (!arr.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
<a name="l00668"></a>00668     {
<a name="l00669"></a>00669       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;WARNING in Debog::ecrire: array has no parallel metadata&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00670"></a>00670       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; (message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; finl;
<a name="l00671"></a>00671       <span class="keywordflow">return</span>;
<a name="l00672"></a>00672     }
<a name="l00673"></a>00673   <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os = <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>;
<a name="l00674"></a>00674   <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; md = arr.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
<a name="l00675"></a>00675   <span class="keyword">const</span> <span class="keywordtype">int</span> ls = arr.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00676"></a>00676   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00677"></a>00677     {
<a name="l00678"></a>00678       os &lt;&lt; <span class="stringliteral">&quot;msg : &quot;</span> &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; FinMsg &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00679"></a>00679       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;DEBOG: writing array, message &quot;</span> &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; msg &lt;&lt; finl;
<a name="l00680"></a>00680       <span class="keywordflow">if</span> (num_deb &gt;= 0)
<a name="l00681"></a>00681         os &lt;&lt; num_deb &lt;&lt; finl;
<a name="l00682"></a>00682 <span class="comment">// Dump array header:</span>
<a name="l00683"></a>00683       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>, arr))
<a name="l00684"></a>00684         {
<a name="l00685"></a>00685 <span class="comment">// Header for DoubleTab:</span>
<a name="l00686"></a>00686           <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; tab = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>, arr);
<a name="l00687"></a>00687           <span class="keyword">const</span> <span class="keywordtype">int</span> n =  tab.<a class="code" href="classDoubleTab.html#ae6dda48778e7107e1beb723beef1f75b" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>();
<a name="l00688"></a>00688           os &lt;&lt; n &lt;&lt; finl;
<a name="l00689"></a>00689 <span class="comment">// total number of lines:</span>
<a name="l00690"></a>00690           os &lt;&lt; md.<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>();
<a name="l00691"></a>00691 <span class="comment">// other dimensions:</span>
<a name="l00692"></a>00692           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; n; i++)
<a name="l00693"></a>00693             os &lt;&lt; <a class="code" href="EntreeSortie_8h.html#ae67efc620265981e3385b5f75837d3ef">space</a> &lt;&lt; tab.<a class="code" href="classDoubleTab.html#ac3805e2637a3b880ba2d3e650c69dac4" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(i);
<a name="l00694"></a>00694           os &lt;&lt; finl;
<a name="l00695"></a>00695         }
<a name="l00696"></a>00696 <span class="comment">// Header of ArrayOfDouble:</span>
<a name="l00697"></a>00697       os &lt;&lt; md.<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>() * ls &lt;&lt; finl;
<a name="l00698"></a>00698     }
<a name="l00699"></a>00699 
<a name="l00700"></a>00700   <a class="code" href="classDebog__Pb.html#a3260eefc8a5ec20d26d5e9acaf216e3b">ecrire_partie</a>(arr);
<a name="l00701"></a>00701 }
<a name="l00702"></a>00702 
<a name="l00703"></a>00703 <span class="comment">// Si arr_reference != 0, on ecrit dans ce tableau la valeur de reference renumerotee</span>
<a name="l00704"></a>00704 <span class="comment">// (il faut que arr_reference et arr aient meme descripteur et meme line_size)</span>
<a name="l00705"></a><a class="code" href="classDebog__Pb.html#a2c6cec4ca9c5dc5cceb1b433f5c6c802">00705</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a2c6cec4ca9c5dc5cceb1b433f5c6c802">Debog_Pb::verifier_partie_std</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; reference,
<a name="l00706"></a>00706                                    <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; arr,
<a name="l00707"></a>00707                                    <a class="code" href="classDoubleVect.html">DoubleVect</a> *arr_reference)
<a name="l00708"></a>00708 {
<a name="l00709"></a>00709   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> identificateur;
<a name="l00710"></a>00710 <span class="comment">// Recherche du descripteur du tableau arr parmi les descripteurs connus</span>
<a name="l00711"></a>00711   <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; renum = <a class="code" href="classDebog__Pb.html#a456bb2ea6106b40cc880b7b0ae1c2116">find_renum_vector</a>(arr.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>(), identificateur);
<a name="l00712"></a>00712 <span class="comment">// Calcul d&#39;une valeur de reference pour adimensionnaliser:</span>
<a name="l00713"></a>00713 <span class="comment">// Le tableau reference est sequentiel: tous les processeurs ont le meme</span>
<a name="l00714"></a>00714   <span class="keyword">const</span> <span class="keywordtype">double</span> adim1 = <a class="code" href="DoubleVect_8cpp.html#aad339141fa6027fa3b627825a2407c12">local_max_abs_vect</a>(reference);
<a name="l00715"></a>00715 <span class="comment">// Le tableau arr est parallele. On calcule la reference en utilisant uniquement</span>
<a name="l00716"></a>00716 <span class="comment">// la partie reele (eventuellement la partie virtuelle a le droit de ne pas etre a jour)</span>
<a name="l00717"></a>00717   <span class="keyword">const</span> <span class="keywordtype">double</span> adim2 = <a class="code" href="DoubleVect_8cpp.html#acb21ec8c0b3909c26b20e3f3455e0289">mp_max_abs_vect</a>(arr, <a class="code" href="MD__Vector_8h.html#a3616a15fe105ad6150819554ee8b11caab47906d8d2e6c20f8ba32e4acb6edbe0">VECT_REAL_ITEMS</a>);
<a name="l00718"></a>00718   <span class="keyword">const</span> <span class="keywordtype">double</span> adim = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(adim1, adim2);
<a name="l00719"></a>00719   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a9b6b9875e094067921e831fea4c10364">seuil_absolu_</a> &lt;= 0.)
<a name="l00720"></a>00720     {
<a name="l00721"></a>00721       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog.cpp verifier_partie_std: seuil_absolu &lt;= 0&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00722"></a>00722       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00723"></a>00723     }
<a name="l00724"></a>00724   <span class="keywordflow">if</span> (adim &lt; <a class="code" href="classDebog__Pb.html#a9b6b9875e094067921e831fea4c10364">seuil_absolu_</a>)
<a name="l00725"></a>00725     {
<a name="l00726"></a>00726 <span class="comment">// Toutes les valeurs sont inferieures au seuil absolu =&gt; ok</span>
<a name="l00727"></a>00727       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00728"></a>00728         {
<a name="l00729"></a>00729           <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot; OK            : All values below seuil_absolu_ (&quot;</span>
<a name="l00730"></a>00730                     &lt;&lt; <a class="code" href="classDebog__Pb.html#a9b6b9875e094067921e831fea4c10364">seuil_absolu_</a> &lt;&lt; <span class="stringliteral">&quot;) id=&quot;</span> &lt;&lt; identificateur &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00731"></a>00731           <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot; OK            : All values below seuil_absolu_ (&quot;</span>
<a name="l00732"></a>00732                              &lt;&lt; <a class="code" href="classDebog__Pb.html#a9b6b9875e094067921e831fea4c10364">seuil_absolu_</a> &lt;&lt; <span class="stringliteral">&quot;) id=&quot;</span> &lt;&lt; identificateur &lt;&lt; finl;
<a name="l00733"></a>00733         }
<a name="l00734"></a>00734       <span class="keywordflow">return</span>;
<a name="l00735"></a>00735     }
<a name="l00736"></a>00736 
<a name="l00737"></a>00737   <span class="keyword">const</span> <span class="keywordtype">int</span> ls = arr.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00738"></a>00738   <span class="keywordtype">int</span> i = 0;
<a name="l00739"></a>00739   <span class="keywordtype">double</span> max_err_items_reels = 0;
<a name="l00740"></a>00740   <span class="keywordtype">double</span> max_err_items_virt = 0;
<a name="l00741"></a>00741   <span class="keywordtype">int</span> outbounds = 0;
<a name="l00742"></a>00742 <span class="comment">// items reels, puis items virtuels</span>
<a name="l00743"></a>00743   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> step = 0; step &lt; 2; step++)
<a name="l00744"></a>00744     {
<a name="l00745"></a>00745       <span class="keywordtype">int</span> n;
<a name="l00746"></a>00746       <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="Reordonner__faces__periodiques_8cpp.html#a137d78a01e63d3b66d1b2ed0de0f4c4c">message</a>;
<a name="l00747"></a>00747       <span class="keywordflow">if</span> (step == 0)
<a name="l00748"></a>00748         {
<a name="l00749"></a>00749           n = renum.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>();
<a name="l00750"></a>00750           message = <span class="stringliteral">&quot; (item reel)&quot;</span>;
<a name="l00751"></a>00751         }
<a name="l00752"></a>00752       <span class="keywordflow">else</span>
<a name="l00753"></a>00753         {
<a name="l00754"></a>00754           n = renum.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
<a name="l00755"></a>00755           message = <span class="stringliteral">&quot; (item virtuel)&quot;</span>;
<a name="l00756"></a>00756         }
<a name="l00757"></a>00757       <span class="keywordtype">double</span> max_err = 0;
<a name="l00758"></a>00758       <span class="keyword">const</span> <span class="keywordtype">double</span> *arr_ptr = arr.<a class="code" href="classArrOfDouble.html#a95357a1390c11dbd481d385257f2e983" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>();
<a name="l00759"></a>00759       <span class="keywordflow">for</span> (; i &lt; n; i++)
<a name="l00760"></a>00760         {
<a name="l00761"></a>00761           <span class="keyword">const</span> <span class="keywordtype">int</span> i1 = i * ls; <span class="comment">//!&lt; indice dans &quot;arr&quot;</span>
<a name="l00762"></a>00762 <span class="comment"></span>          <span class="keyword">const</span> <span class="keywordtype">int</span> i2 = renum[i] * ls; <span class="comment">//!&lt; indice dans &quot;reference&quot;</span>
<a name="l00763"></a>00763 <span class="comment"></span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; ls; j++)
<a name="l00764"></a>00764             {
<a name="l00765"></a>00765               <span class="keyword">const</span> <span class="keywordtype">double</span> x = arr_ptr[i1+j]; <span class="comment">//!&lt; ne pas passer par operator[] pour ne pas planter sur DMAXFLOAT</span>
<a name="l00766"></a>00766 <span class="comment"></span>              <span class="keyword">const</span> <span class="keywordtype">double</span> y = reference[i2+j];
<a name="l00767"></a>00767 <span class="comment">// Comparaison de x et y</span>
<a name="l00768"></a>00768               <span class="keyword">const</span> <span class="keywordtype">double</span> delta = fabs(x-y) / adim;
<a name="l00769"></a>00769               max_err = <a class="code" href="Double_8h.html#a1c45761573e6cbc97cfacac78d905016">max</a>(max_err, delta);
<a name="l00770"></a>00770 <span class="comment">// pour les items reels, indiquer si on est hors bornes:</span>
<a name="l00771"></a>00771               <span class="keywordflow">if</span> (step==0 &amp;&amp; !(x&gt;=-<a class="code" href="Double_8h.html#ae0ee0cebfad5968da0ad6cc7a49e16b6">DMAXFLOAT</a> &amp;&amp; x&lt;=<a class="code" href="Double_8h.html#ae0ee0cebfad5968da0ad6cc7a49e16b6">DMAXFLOAT</a>))
<a name="l00772"></a>00772                 outbounds = 1;
<a name="l00773"></a>00773               <span class="keywordflow">if</span> (delta &gt; <a class="code" href="classDebog__Pb.html#a24f92722263b4bec494764dbd1c41426">seuil_relatif_</a>)
<a name="l00774"></a>00774                 {
<a name="l00775"></a>00775                   <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot; ECART reference[&quot;</span> &lt;&lt; i2+j &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span> &lt;&lt; y
<a name="l00776"></a>00776                                      &lt;&lt; <span class="stringliteral">&quot; calcul[&quot;</span> &lt;&lt; i1+j &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span> &lt;&lt; x;
<a name="l00777"></a>00777                   <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot; relative error=&quot;</span> &lt;&lt; delta
<a name="l00778"></a>00778                                      &lt;&lt; <span class="stringliteral">&quot; (adim=&quot;</span> &lt;&lt; adim &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; message &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00779"></a>00779                 }
<a name="l00780"></a>00780             }
<a name="l00781"></a>00781         }
<a name="l00782"></a>00782       max_err = <a class="code" href="classProcess.html#a1e9d9f9899b71927cfafae14c7bd048d" title="Calcule le max de x sur tous les processeurs du groupe courant. Remarques : Cette methode doit etre a...">Process::mp_max</a>(max_err);
<a name="l00783"></a>00783       <span class="keywordflow">if</span> (step == 0)
<a name="l00784"></a>00784         max_err_items_reels = max_err;
<a name="l00785"></a>00785       <span class="keywordflow">else</span>
<a name="l00786"></a>00786         max_err_items_virt = max_err;
<a name="l00787"></a>00787     }
<a name="l00788"></a>00788 
<a name="l00789"></a>00789   <span class="keyword">const</span> <span class="keywordtype">char</span> * resu = 0;
<a name="l00790"></a>00790   <span class="keywordtype">int</span> call_error_function = 0;
<a name="l00791"></a>00791   <span class="keywordtype">double</span> seuil = <a class="code" href="classDebog__Pb.html#a24f92722263b4bec494764dbd1c41426">seuil_relatif_</a>;
<a name="l00792"></a>00792   <span class="keywordflow">if</span> (max_err_items_reels &lt;= seuil)
<a name="l00793"></a>00793     {
<a name="l00794"></a>00794       <span class="keywordflow">if</span> (max_err_items_virt &lt;= seuil)
<a name="l00795"></a>00795         resu = <span class="stringliteral">&quot;OK           &quot;</span>;
<a name="l00796"></a>00796       <span class="keywordflow">else</span>
<a name="l00797"></a>00797         resu = <span class="stringliteral">&quot;OK REAL ONLY &quot;</span>;
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799   <span class="keywordflow">else</span>
<a name="l00800"></a>00800     {
<a name="l00801"></a>00801       call_error_function = 1;
<a name="l00802"></a>00802       <span class="keywordflow">if</span> (!outbounds)
<a name="l00803"></a>00803         resu = <span class="stringliteral">&quot;ERROR        &quot;</span>;
<a name="l00804"></a>00804       <span class="keywordflow">else</span>
<a name="l00805"></a>00805         resu = <span class="stringliteral">&quot;ERROR(DMAXFLT)&quot;</span>;
<a name="l00806"></a>00806     }
<a name="l00807"></a>00807   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00808"></a>00808     {
<a name="l00809"></a>00809       <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; resu &lt;&lt; <span class="stringliteral">&quot; : Max relative error &quot;</span> &lt;&lt; max_err_items_reels
<a name="l00810"></a>00810                 &lt;&lt; <span class="stringliteral">&quot; (max ref value=&quot;</span> &lt;&lt; adim &lt;&lt; <span class="stringliteral">&quot;) id=&quot;</span> &lt;&lt; identificateur &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00811"></a>00811     }
<a name="l00812"></a>00812   <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; resu &lt;&lt; <span class="stringliteral">&quot; : Max relative error &quot;</span> &lt;&lt; max_err_items_reels
<a name="l00813"></a>00813                      &lt;&lt; <span class="stringliteral">&quot; (max ref value=&quot;</span> &lt;&lt; adim &lt;&lt; <span class="stringliteral">&quot;) id=&quot;</span> &lt;&lt; identificateur &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00814"></a>00814   <span class="keywordflow">if</span> (call_error_function)
<a name="l00815"></a>00815     <a class="code" href="classDebog__Pb.html#a8674931254697863f85c3c9446f17347" title="methode appelee des qu&#39;une erreur est trouvee dans l&#39;espace reel. (utile pour poser un breakpoint dan...">error_function</a>();
<a name="l00816"></a>00816   <span class="keywordflow">if</span> (arr_reference)
<a name="l00817"></a>00817     {
<a name="l00818"></a>00818       <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; arr_ref = *arr_reference;
<a name="l00819"></a>00819       <span class="keywordflow">if</span> (arr_ref.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>() != ls || !(arr_ref.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>() == arr.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>()))
<a name="l00820"></a>00820         {
<a name="l00821"></a>00821           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog_Pb::verifier_partie_std: the array provided to store the reference value\n&quot;</span>
<a name="l00822"></a>00822                &lt;&lt; <span class="stringliteral">&quot; does not have the same size/descriptor as the source array&quot;</span> &lt;&lt; finl;
<a name="l00823"></a>00823           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l00824"></a>00824         }
<a name="l00825"></a>00825       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00826"></a>00826         <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot;                 Return reference value (including virtual items)&quot;</span> &lt;&lt; finl;
<a name="l00827"></a>00827       <span class="keyword">const</span> <span class="keywordtype">int</span> n = renum.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
<a name="l00828"></a>00828       <span class="keywordtype">double</span> *arr_ptr = arr_ref.<a class="code" href="classArrOfDouble.html#a95357a1390c11dbd481d385257f2e983" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>();
<a name="l00829"></a>00829       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ibis = 0; ibis &lt; n; ibis++)
<a name="l00830"></a>00830         {
<a name="l00831"></a>00831           <span class="keyword">const</span> <span class="keywordtype">int</span> i1 = ibis * ls; <span class="comment">//!&lt; indice dans &quot;arr&quot;</span>
<a name="l00832"></a>00832 <span class="comment"></span>          <span class="keyword">const</span> <span class="keywordtype">int</span> i2 = renum[ibis] * ls; <span class="comment">//!&lt; indice dans &quot;reference&quot;</span>
<a name="l00833"></a>00833 <span class="comment"></span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; ls; j++)
<a name="l00834"></a>00834             {
<a name="l00835"></a>00835               <span class="keyword">const</span> <span class="keywordtype">double</span> y = reference[i2+j];
<a name="l00836"></a>00836               arr_ptr[i1+j] = y; <span class="comment">//!&lt; ne pas passer par operator[] pour ne pas planter sur DMAXFLOAT</span>
<a name="l00837"></a>00837 <span class="comment"></span>            }
<a name="l00838"></a>00838         }
<a name="l00839"></a>00839     }
<a name="l00840"></a>00840 }
<a name="l00841"></a>00841 
<a name="l00842"></a>00842 <span class="comment">// arr_ref is passed to Debog_Pb::verifier_partie_std()</span>
<a name="l00843"></a><a class="code" href="classDebog__Pb.html#a5f99a56501abf359305f96e89e74bc90">00843</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a5f99a56501abf359305f96e89e74bc90">Debog_Pb::verifier_partie</a>(<span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; reference, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; arr, <a class="code" href="classDoubleVect.html">DoubleVect</a> *arr_ref)
<a name="l00844"></a>00844 {
<a name="l00845"></a>00845   <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; md = arr.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
<a name="l00846"></a>00846   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, md))
<a name="l00847"></a>00847     {
<a name="l00848"></a>00848       <a class="code" href="classDebog__Pb.html#a2c6cec4ca9c5dc5cceb1b433f5c6c802">verifier_partie_std</a>(reference, arr, arr_ref);
<a name="l00849"></a>00849     }
<a name="l00850"></a>00850   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, md))
<a name="l00851"></a>00851     {
<a name="l00852"></a>00852 <span class="comment">// This way, each processor writes each part sequentially</span>
<a name="l00853"></a>00853 <span class="comment">// part1proc1, part1proc2, ... part2proc1, part2proc2, etc...</span>
<a name="l00854"></a>00854       <a class="code" href="classConstDoubleTab__parts.html" title="This class allows to acces to individual sub-parts of const DoubleTab objects that have a MD_Vector_c...">ConstDoubleTab_parts</a> parts(arr);
<a name="l00855"></a>00855       <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a> ref_part;
<a name="l00856"></a>00856       <span class="keyword">const</span> <span class="keywordtype">int</span> n = parts.<a class="code" href="classConstDoubleTab__parts.html#a9c573a25a8c3cf148c914bd7a00b52c0">size</a>();
<a name="l00857"></a>00857       <span class="keywordtype">int</span> index = 0;
<a name="l00858"></a>00858       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
<a name="l00859"></a>00859         {
<a name="l00860"></a>00860 <span class="comment">// Construction de la sous-partie de reference:</span>
<a name="l00861"></a>00861 <span class="comment">// (le tableau de reference contient toutes les valeurs sequentielles, sous-partie</span>
<a name="l00862"></a>00862 <span class="comment">// par sous-partie, la taille de la sous-partie est egale au nombre total</span>
<a name="l00863"></a>00863 <span class="comment">// d&#39;items sequentiels multiplie par le linesize de la sous-partie)</span>
<a name="l00864"></a>00864 <span class="comment">// Attention, toutes les sous-parties n&#39;ont pas forcement la meme linesize</span>
<a name="l00865"></a>00865           <span class="keyword">const</span> <a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>&amp; part = parts[i];
<a name="l00866"></a>00866           <span class="keyword">const</span> <span class="keywordtype">int</span> sequential_size = part.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>();
<a name="l00867"></a>00867           <span class="keyword">const</span> <span class="keywordtype">int</span> line_size = part.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00868"></a>00868 <span class="comment">// ref_array() veut un tableau non const, mais on va l&#39;utiliser uniquement en const...</span>
<a name="l00869"></a>00869           <a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>&amp; cast_array = <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classArrOfDouble.html" title="Represente un tableau d&#39;elements de type double. L&#39;etat du tableau est caracterise par la valeur de p...">ArrOfDouble</a>, reference);
<a name="l00870"></a>00870           ref_part.<a class="code" href="classDoubleTab.html#a8eb99ddb58266d6f9d6e149c6f8c6a1f" title="identique a DoubleVect::ref_array() (cree un tableau monodimensionnel sans structure parallele) Atten...">ref_array</a>(cast_array, index, sequential_size * line_size);
<a name="l00871"></a>00871 <span class="comment">// Appel recursif pour la sous-partie:</span>
<a name="l00872"></a>00872           <a class="code" href="classDebog__Pb.html#a5f99a56501abf359305f96e89e74bc90">verifier_partie</a>(ref_part, part, arr_ref);
<a name="l00873"></a>00873           index += sequential_size * line_size;
<a name="l00874"></a>00874         }
<a name="l00875"></a>00875     }
<a name="l00876"></a>00876 }
<a name="l00877"></a>00877 
<a name="l00878"></a>00878 <span class="comment">// arr_ref is passed to Debog_Pb::verifier_partie()</span>
<a name="l00879"></a><a class="code" href="classDebog__Pb.html#ad55b5f2d8c833fa81bfb5c242f6c2952">00879</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#ad55b5f2d8c833fa81bfb5c242f6c2952">Debog_Pb::verifier_gen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; arr, <a class="code" href="classDoubleVect.html">DoubleVect</a> *arr_ref)
<a name="l00880"></a>00880 {
<a name="l00881"></a>00881   <span class="keywordflow">if</span> (!arr.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
<a name="l00882"></a>00882     {
<a name="l00883"></a>00883       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;WARNING in Debog::verifier_gen: array has no parallel metadata. Not checked\n (message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00884"></a>00884       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00885"></a>00885         <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot;WARNING in Debog::verifier_gen: array has no parallel metadata. Not checked\n (message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; finl;
<a name="l00886"></a>00886       <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot;WARNING in Debog::verifier_gen: array has no parallel metadata. Not checked\n (message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; finl;
<a name="l00887"></a>00887       <span class="keywordflow">return</span>;
<a name="l00888"></a>00888     }
<a name="l00889"></a>00889   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#af45cac5b4bd1cbe2531ceed340a543ef">test_ignore_msg</a>(msg))
<a name="l00890"></a>00890     {
<a name="l00891"></a>00891 <span class="comment">// Ignorer ce test</span>
<a name="l00892"></a>00892       <span class="keywordflow">return</span>;
<a name="l00893"></a>00893     }
<a name="l00894"></a>00894   <a class="code" href="classDebog__Pb.html#a5eabeb121aabb29c95272254a3822c3b">goto_msg</a>(msg);
<a name="l00895"></a>00895   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classDoubleTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un DoubleVect avec calculs de l&#39;indice corespondant Voir les...">DoubleTab</a>, arr))
<a name="l00896"></a>00896     {
<a name="l00897"></a>00897 <span class="comment">// read tab header</span>
<a name="l00898"></a>00898       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> dims;
<a name="l00899"></a>00899       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; dims;
<a name="l00900"></a>00900     }
<a name="l00901"></a>00901   <a class="code" href="classDoubleVect.html">DoubleVect</a> reference;
<a name="l00902"></a>00902   <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; reference;
<a name="l00903"></a>00903 
<a name="l00904"></a>00904   <span class="keyword">const</span> <span class="keywordtype">int</span> n = reference.<a class="code" href="classArrOfDouble.html#a3c3b33bea0e88b87315c21ee94bee05f" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l00905"></a>00905   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_items_seq = arr.<a class="code" href="classDoubleVect.html#a0d16d30580c90526e4895388fb44be5d">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>();
<a name="l00906"></a>00906   <span class="keyword">const</span> <span class="keywordtype">int</span> ls = arr.<a class="code" href="classDoubleVect.html#ab02d01cd1bdab66fbd66f9a47cc29e10">line_size</a>();
<a name="l00907"></a>00907   <span class="keywordflow">if</span> (n != nb_items_seq * ls)
<a name="l00908"></a>00908     {
<a name="l00909"></a>00909       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog_Pb::verifier_gen : wrong sequential size &quot;</span> &lt;&lt; n
<a name="l00910"></a>00910            &lt;&lt; <span class="stringliteral">&quot; (expected &quot;</span> &lt;&lt; nb_items_seq * ls &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00911"></a>00911       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l00912"></a>00912     }
<a name="l00913"></a>00913 
<a name="l00914"></a>00914   <a class="code" href="classDebog__Pb.html#a5f99a56501abf359305f96e89e74bc90">verifier_partie</a>(reference, arr, arr_ref);
<a name="l00915"></a>00915 }
<a name="l00916"></a>00916 
<a name="l00917"></a>00917 <span class="comment">//</span><span class="comment"></span>
<a name="l00918"></a>00918 <span class="comment">//! if arr_ref is not null and if mode_db_ is &quot;read\&amp;compare&quot;, we put the reference&lt;br&gt;value found in the file in arr_ref. arr_ref and arr can point to the same object.</span>
<a name="l00919"></a><a class="code" href="classDebog__Pb.html#a2386eb7c9bf144d8311a5a7f82f08844">00919</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">Debog_Pb::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; arr, <a class="code" href="classDoubleVect.html">DoubleVect</a> *arr_ref)
<a name="l00920"></a>00920 {
<a name="l00921"></a>00921   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a768ef4d12da1b93db516c5c8d751a69e">nom_pb_</a> != <a class="code" href="classDebog__Pb.html#a4ed6a6aa71d1e3d5bcb115820c5b4a3c">nom_pb_actuel_</a>)
<a name="l00922"></a>00922     <span class="keywordflow">return</span>;
<a name="l00923"></a>00923 
<a name="l00924"></a>00924   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#af45cac5b4bd1cbe2531ceed340a543ef">test_ignore_msg</a>(msg))
<a name="l00925"></a>00925     {
<a name="l00926"></a>00926 <span class="comment">// Ignorer ce test</span>
<a name="l00927"></a>00927       <span class="keywordflow">return</span>;
<a name="l00928"></a>00928     }
<a name="l00929"></a>00929   <a class="code" href="Debog_8cpp.html#a5d4370767e286c0cf2af58db7d6bc483">debog_break_test</a>(<a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a>);
<a name="l00930"></a>00930   <span class="keywordflow">if</span>(<a class="code" href="classDebog__Pb.html#a5e5f898c0cca38b4a39b9aebe329d5be">mode_db_</a> == 0)
<a name="l00931"></a>00931     {
<a name="l00932"></a>00932       <a class="code" href="classDebog__Pb.html#aa01fc3f495df669f2b59b8358c553da9">ecrire_gen</a>(msg, arr);
<a name="l00933"></a>00933     }
<a name="l00934"></a>00934   <span class="keywordflow">else</span>
<a name="l00935"></a>00935     {
<a name="l00936"></a>00936       <a class="code" href="classDebog__Pb.html#ad55b5f2d8c833fa81bfb5c242f6c2952">verifier_gen</a>(msg, arr, arr_ref);
<a name="l00937"></a>00937     }
<a name="l00938"></a>00938   <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a>++;
<a name="l00939"></a>00939 }
<a name="l00940"></a>00940 
<a name="l00941"></a><a class="code" href="classDebog.html#a36ff23ccf0ed9b524eaa9ba10f384432">00941</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#aa228f7e951ef67b9e9bb31ced928652f">Debog::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; x)
<a name="l00942"></a>00942 {
<a name="l00943"></a>00943   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00944"></a>00944     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x);
<a name="l00945"></a>00945 }
<a name="l00946"></a>00946 
<a name="l00947"></a>00947 <span class="comment">//</span><span class="comment"></span>
<a name="l00948"></a>00948 <span class="comment">//! like verifier(), but, in &quot;read\&amp;compare&quot; mode, put the reference&lt;br&gt;value found in the file in the ref variable. x and ref can point to the same object.</span>
<a name="l00949"></a><a class="code" href="classDebog.html#a865092e1b56cf3d1b982dee3b06671eb">00949</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog.html#a52ab9548f200a42da12cb62a4440266b" title="like verifier(), but, in &quot;read\&amp;compare&quot; mode, put the reference value found in the file in the ref v...">Debog::verifier_getref</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; x, <a class="code" href="classDoubleVect.html">DoubleVect</a>&amp; ref)
<a name="l00950"></a>00950 {
<a name="l00951"></a>00951   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l00952"></a>00952     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x, &amp;ref);
<a name="l00953"></a>00953 }
<a name="l00954"></a>00954 
<a name="l00955"></a>00955 
<a name="l00956"></a><a class="code" href="classDebog__Pb.html#a3437b6793b1cea876f59b7f367f7e91b">00956</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a3260eefc8a5ec20d26d5e9acaf216e3b">Debog_Pb::ecrire_partie</a>(<span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; arr)
<a name="l00957"></a>00957 {
<a name="l00958"></a>00958   <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; md = arr.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
<a name="l00959"></a>00959   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, md))
<a name="l00960"></a>00960     {
<a name="l00961"></a>00961       <span class="keyword">const</span> <span class="keywordtype">int</span> ls = arr.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>();
<a name="l00962"></a>00962       <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>.<a class="code" href="classSortie.html#aa3f46aaccaff0f83c018784b50d8ea24" title="Methode de bas niveau pour ecrire un tableau d&#39;ints ou reels dans le stream. Dans l&#39;implementation de...">put</a>(arr.<a class="code" href="classArrOfInt.html#ad0b31250e60cd9040ea60be55db73c3d" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>(), arr.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>(), ls);
<a name="l00963"></a>00963     }
<a name="l00964"></a>00964   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, md))
<a name="l00965"></a>00965     {
<a name="l00966"></a>00966 <span class="comment">// This way, each processor writes each part sequentially</span>
<a name="l00967"></a>00967 <span class="comment">// part1proc1, part1proc2, ... part2proc1, part2proc2, etc...</span>
<a name="l00968"></a>00968       <a class="code" href="classConstIntTab__parts.html">ConstIntTab_parts</a> parts(arr);
<a name="l00969"></a>00969       <span class="keyword">const</span> <span class="keywordtype">int</span> n = parts.<a class="code" href="classConstIntTab__parts.html#a348aa2ba04c711425802a67876121bb7">size</a>();
<a name="l00970"></a>00970       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
<a name="l00971"></a>00971         {
<a name="l00972"></a>00972           <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; t = parts[i];
<a name="l00973"></a>00973           <a class="code" href="classDebog__Pb.html#a3260eefc8a5ec20d26d5e9acaf216e3b">ecrire_partie</a>(t);
<a name="l00974"></a>00974         }
<a name="l00975"></a>00975     }
<a name="l00976"></a>00976 }
<a name="l00977"></a>00977 
<a name="l00978"></a><a class="code" href="classDebog__Pb.html#ac44d3aac5b96005ea61a557ecc7bbd71">00978</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#aa01fc3f495df669f2b59b8358c553da9">Debog_Pb::ecrire_gen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; arr, <span class="keywordtype">int</span> num_deb)
<a name="l00979"></a>00979 {
<a name="l00980"></a>00980   <span class="keywordflow">if</span> (!arr.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
<a name="l00981"></a>00981     {
<a name="l00982"></a>00982       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;WARNING in Debog::ecrire: array has no parallel metadata&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00983"></a>00983       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot; (message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; finl;
<a name="l00984"></a>00984       <span class="keywordflow">return</span>;
<a name="l00985"></a>00985     }
<a name="l00986"></a>00986   <a class="code" href="classSortie.html" title="Classe de base des flux de sortie. Elle sait ecrire des types simples&lt;br&gt;(entiers, flottants) et des Ob...">Sortie</a>&amp; os = <a class="code" href="classDebog__Pb.html#a2721bb6fb159d3c88904f23110420958">write_debog_data_file_</a>;
<a name="l00987"></a>00987   <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; md = arr.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
<a name="l00988"></a>00988   <span class="keyword">const</span> <span class="keywordtype">int</span> ls = arr.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>();
<a name="l00989"></a>00989   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l00990"></a>00990     {
<a name="l00991"></a>00991       os &lt;&lt; <span class="stringliteral">&quot;msg : &quot;</span> &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot; FinMsg &quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l00992"></a>00992       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;DEBOG: writing array, message &quot;</span> &lt;&lt; <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a> &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; msg &lt;&lt; finl;
<a name="l00993"></a>00993       <span class="keywordflow">if</span> (num_deb &gt;= 0)
<a name="l00994"></a>00994         os &lt;&lt; num_deb &lt;&lt; finl;
<a name="l00995"></a>00995 <span class="comment">// Dump array header:</span>
<a name="l00996"></a>00996       <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>, arr))
<a name="l00997"></a>00997         {
<a name="l00998"></a>00998 <span class="comment">// Header for DoubleTab:</span>
<a name="l00999"></a>00999           <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; tab = <a class="code" href="Cast_8h.html#ad116a7acb85c9c91e5687c44941a0d0c">ref_cast</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>, arr);
<a name="l01000"></a>01000           <span class="keyword">const</span> <span class="keywordtype">int</span> n =  tab.<a class="code" href="classIntTab.html#ae307ece7edbe1d5facfbb81953b3e2b1" title="Returns the number of dimensions of the array (&gt;= 1)">nb_dim</a>();
<a name="l01001"></a>01001           os &lt;&lt; n &lt;&lt; finl;
<a name="l01002"></a>01002 <span class="comment">// total number of lines:</span>
<a name="l01003"></a>01003           os &lt;&lt; md.<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>();
<a name="l01004"></a>01004 <span class="comment">// other dimensions:</span>
<a name="l01005"></a>01005           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; n; i++)
<a name="l01006"></a>01006             os &lt;&lt; <a class="code" href="EntreeSortie_8h.html#ae67efc620265981e3385b5f75837d3ef">space</a> &lt;&lt; tab.<a class="code" href="classIntTab.html#abc3b32c94925a82f69d5b153a356e359" title="Returns one of the &quot;real&quot; dimensions of the multi-dimensionnal array, as defined by: dimension(0) = s...">dimension</a>(i);
<a name="l01007"></a>01007           os &lt;&lt; finl;
<a name="l01008"></a>01008         }
<a name="l01009"></a>01009 <span class="comment">// Header of ArrayOfDouble:</span>
<a name="l01010"></a>01010       os &lt;&lt; md.<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>() * ls &lt;&lt; finl;
<a name="l01011"></a>01011     }
<a name="l01012"></a>01012 
<a name="l01013"></a>01013   <a class="code" href="classDebog__Pb.html#a3260eefc8a5ec20d26d5e9acaf216e3b">ecrire_partie</a>(arr);
<a name="l01014"></a>01014 }
<a name="l01015"></a>01015 
<a name="l01016"></a>01016 <span class="comment">// Si arr_reference != 0, on ecrit dans ce tableau la valeur de reference renumerotee</span>
<a name="l01017"></a>01017 <span class="comment">// (il faut que arr_reference et arr aient meme descripteur et meme line_size)</span>
<a name="l01018"></a><a class="code" href="classDebog__Pb.html#a59ecec9739df0b8563d60ac1f68ad297">01018</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a2c6cec4ca9c5dc5cceb1b433f5c6c802">Debog_Pb::verifier_partie_std</a>(<span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; reference,
<a name="l01019"></a>01019                                    <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; arr,
<a name="l01020"></a>01020                                    <a class="code" href="classIntVect.html">IntVect</a> *arr_reference)
<a name="l01021"></a>01021 {
<a name="l01022"></a>01022   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> identificateur;
<a name="l01023"></a>01023 <span class="comment">// Recherche du descripteur du tableau arr parmi les descripteurs connus</span>
<a name="l01024"></a>01024   <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; renum = <a class="code" href="classDebog__Pb.html#a456bb2ea6106b40cc880b7b0ae1c2116">find_renum_vector</a>(arr.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>(), identificateur);
<a name="l01025"></a>01025 
<a name="l01026"></a>01026   <span class="keyword">const</span> <span class="keywordtype">int</span> ls = arr.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>();
<a name="l01027"></a>01027   <span class="keywordtype">int</span> i = 0;
<a name="l01028"></a>01028   <span class="keywordtype">int</span> max_err_items_reels = 0;
<a name="l01029"></a>01029   <span class="keywordtype">int</span> max_err_items_virt = 0;
<a name="l01030"></a>01030   <span class="keywordtype">int</span> outbounds = 0;
<a name="l01031"></a>01031 <span class="comment">// items reels, puis items virtuels</span>
<a name="l01032"></a>01032   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> step = 0; step &lt; 2; step++)
<a name="l01033"></a>01033     {
<a name="l01034"></a>01034       <span class="keywordtype">int</span> n;
<a name="l01035"></a>01035       <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="Reordonner__faces__periodiques_8cpp.html#a137d78a01e63d3b66d1b2ed0de0f4c4c">message</a>;
<a name="l01036"></a>01036       <span class="keywordflow">if</span> (step == 0)
<a name="l01037"></a>01037         {
<a name="l01038"></a>01038           n = renum.<a class="code" href="classIntVect.html#ad90cfd411cbbd631ccf1935bb36f7c40" title="Identique a size_reelle()">size</a>();
<a name="l01039"></a>01039           message = <span class="stringliteral">&quot; (item reel)&quot;</span>;
<a name="l01040"></a>01040         }
<a name="l01041"></a>01041       <span class="keywordflow">else</span>
<a name="l01042"></a>01042         {
<a name="l01043"></a>01043           n = renum.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
<a name="l01044"></a>01044           message = <span class="stringliteral">&quot; (item virtuel)&quot;</span>;
<a name="l01045"></a>01045         }
<a name="l01046"></a>01046       <span class="keywordtype">int</span> max_err = 0;
<a name="l01047"></a>01047       <span class="keyword">const</span> <span class="keywordtype">int</span> *arr_ptr = arr.<a class="code" href="classArrOfInt.html#ad0b31250e60cd9040ea60be55db73c3d" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>();
<a name="l01048"></a>01048       <span class="keywordflow">for</span> (; i &lt; n; i++)
<a name="l01049"></a>01049         {
<a name="l01050"></a>01050           <span class="keyword">const</span> <span class="keywordtype">int</span> i1 = i * ls; <span class="comment">//!&lt; indice dans &quot;arr&quot;</span>
<a name="l01051"></a>01051 <span class="comment"></span>          <span class="keyword">const</span> <span class="keywordtype">int</span> i2 = renum[i] * ls; <span class="comment">//!&lt; indice dans &quot;reference&quot;</span>
<a name="l01052"></a>01052 <span class="comment"></span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; ls; j++)
<a name="l01053"></a>01053             {
<a name="l01054"></a>01054               <span class="keyword">const</span> <span class="keywordtype">int</span> x = arr_ptr[i1+j]; <span class="comment">//!&lt; ne pas passer par operator[] pour ne pas planter sur DMAXFLOAT</span>
<a name="l01055"></a>01055 <span class="comment"></span>              <span class="keyword">const</span> <span class="keywordtype">int</span> y = reference[i2+j];
<a name="l01056"></a>01056 <span class="comment">// Comparaison de x et y</span>
<a name="l01057"></a>01057 <span class="comment">// For integers, values must match exactly !</span>
<a name="l01058"></a>01058               <span class="keywordflow">if</span> (x != y)
<a name="l01059"></a>01059                 {
<a name="l01060"></a>01060                   <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot; ECART reference[&quot;</span> &lt;&lt; i2+j &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span> &lt;&lt; y
<a name="l01061"></a>01061                                      &lt;&lt; <span class="stringliteral">&quot; calcul[&quot;</span> &lt;&lt; i1+j &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span> &lt;&lt; x &lt;&lt; message &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01062"></a>01062                   max_err = 1;
<a name="l01063"></a>01063                 }
<a name="l01064"></a>01064             }
<a name="l01065"></a>01065         }
<a name="l01066"></a>01066       max_err =<a class="code" href="classProcess.html#a1e9d9f9899b71927cfafae14c7bd048d" title="Calcule le max de x sur tous les processeurs du groupe courant. Remarques : Cette methode doit etre a..."> ::mp_max</a>(max_err);
<a name="l01067"></a>01067       <span class="keywordflow">if</span> (step == 0)
<a name="l01068"></a>01068         max_err_items_reels = max_err;
<a name="l01069"></a>01069       <span class="keywordflow">else</span>
<a name="l01070"></a>01070         max_err_items_virt = max_err;
<a name="l01071"></a>01071     }
<a name="l01072"></a>01072 
<a name="l01073"></a>01073   <span class="keyword">const</span> <span class="keywordtype">char</span> * resu = 0;
<a name="l01074"></a>01074   <span class="keywordtype">int</span> call_error_function = 0;
<a name="l01075"></a>01075   <span class="keywordtype">int</span> seuil = 0;
<a name="l01076"></a>01076   <span class="keywordflow">if</span> (max_err_items_reels &lt;= seuil)
<a name="l01077"></a>01077     {
<a name="l01078"></a>01078       <span class="keywordflow">if</span> (max_err_items_virt &lt;= seuil)
<a name="l01079"></a>01079         resu = <span class="stringliteral">&quot;OK           &quot;</span>;
<a name="l01080"></a>01080       <span class="keywordflow">else</span>
<a name="l01081"></a>01081         resu = <span class="stringliteral">&quot;OK REAL ONLY &quot;</span>;
<a name="l01082"></a>01082     }
<a name="l01083"></a>01083   <span class="keywordflow">else</span>
<a name="l01084"></a>01084     {
<a name="l01085"></a>01085       call_error_function = 1;
<a name="l01086"></a>01086       <span class="keywordflow">if</span> (!outbounds)
<a name="l01087"></a>01087         resu = <span class="stringliteral">&quot;ERROR        &quot;</span>;
<a name="l01088"></a>01088       <span class="keywordflow">else</span>
<a name="l01089"></a>01089         resu = <span class="stringliteral">&quot;ERROR(DMAXFLT)&quot;</span>;
<a name="l01090"></a>01090     }
<a name="l01091"></a>01091   <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l01092"></a>01092     {
<a name="l01093"></a>01093       <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; resu &lt;&lt; <span class="stringliteral">&quot; : integer field &quot;</span> &lt;&lt; identificateur &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01094"></a>01094     }
<a name="l01095"></a>01095   <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; resu &lt;&lt; <span class="stringliteral">&quot; : integer field &quot;</span> &lt;&lt; identificateur &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01096"></a>01096   <span class="keywordflow">if</span> (call_error_function)
<a name="l01097"></a>01097     <a class="code" href="classDebog__Pb.html#a8674931254697863f85c3c9446f17347" title="methode appelee des qu&#39;une erreur est trouvee dans l&#39;espace reel. (utile pour poser un breakpoint dan...">error_function</a>();
<a name="l01098"></a>01098   <span class="keywordflow">if</span> (arr_reference)
<a name="l01099"></a>01099     {
<a name="l01100"></a>01100       <a class="code" href="classIntVect.html">IntVect</a>&amp; arr_ref = *arr_reference;
<a name="l01101"></a>01101       <span class="keywordflow">if</span> (arr_ref.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>() != ls || !(arr_ref.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>() == arr.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>()))
<a name="l01102"></a>01102         {
<a name="l01103"></a>01103           <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog_Pb::verifier_partie_std: the array provided to store the reference value\n&quot;</span>
<a name="l01104"></a>01104                &lt;&lt; <span class="stringliteral">&quot; does not have the same size/descriptor as the source array&quot;</span> &lt;&lt; finl;
<a name="l01105"></a>01105           <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">Process::exit</a>();
<a name="l01106"></a>01106         }
<a name="l01107"></a>01107       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l01108"></a>01108         <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot;                 Return reference value (including virtual items)&quot;</span> &lt;&lt; finl;
<a name="l01109"></a>01109       <span class="keyword">const</span> <span class="keywordtype">int</span> n = renum.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
<a name="l01110"></a>01110       <span class="keywordtype">int</span> *arr_ptr = arr_ref.<a class="code" href="classArrOfInt.html#ad0b31250e60cd9040ea60be55db73c3d" title="Renvoie un pointeur sur le premier element du tableau. Le pointeur est nul si le tableau est &quot;detach...">addr</a>();
<a name="l01111"></a>01111       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ibis = 0; ibis &lt; n; ibis++)
<a name="l01112"></a>01112         {
<a name="l01113"></a>01113           <span class="keyword">const</span> <span class="keywordtype">int</span> i1 = ibis * ls; <span class="comment">//!&lt; indice dans &quot;arr&quot;</span>
<a name="l01114"></a>01114 <span class="comment"></span>          <span class="keyword">const</span> <span class="keywordtype">int</span> i2 = renum[ibis] * ls; <span class="comment">//!&lt; indice dans &quot;reference&quot;</span>
<a name="l01115"></a>01115 <span class="comment"></span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; ls; j++)
<a name="l01116"></a>01116             {
<a name="l01117"></a>01117               <span class="keyword">const</span> <span class="keywordtype">int</span> y = reference[i2+j];
<a name="l01118"></a>01118               arr_ptr[i1+j] = y; <span class="comment">//!&lt; ne pas passer par operator[] pour ne pas planter sur DMAXFLOAT</span>
<a name="l01119"></a>01119 <span class="comment"></span>            }
<a name="l01120"></a>01120         }
<a name="l01121"></a>01121     }
<a name="l01122"></a>01122 }
<a name="l01123"></a>01123 
<a name="l01124"></a>01124 <span class="comment">// arr_ref is passed to Debog_Pb::verifier_partie_std()</span>
<a name="l01125"></a><a class="code" href="classDebog__Pb.html#a5f5f22643675f7c0b7948dbcd393eab0">01125</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a5f99a56501abf359305f96e89e74bc90">Debog_Pb::verifier_partie</a>(<span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; reference, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; arr, <a class="code" href="classIntVect.html">IntVect</a> *arr_ref)
<a name="l01126"></a>01126 {
<a name="l01127"></a>01127   <span class="keyword">const</span> <a class="code" href="classMD__Vector__base.html" title="Classe de base des descripteurs de vecteurs distribues. Voir la documentation des methodes dans MD_Ve...">MD_Vector_base</a>&amp; md = arr.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>();
<a name="l01128"></a>01128   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__std.html" title="C&#39;est le plus simple des descripteurs, utilise pour les tableaux de valeurs aux sommets, elements, faces, aretes, faces de bord, etc... Il supporte la notion d&#39;items &quot;communs&quot; (sommets du maillage partages entre plusieurs processeurs) et d&#39;items &quot;distants&quot; et &quot;virtuels&quot; (sommets, elements dans l&#39;epaisseur de joint). Voir aussi MD_Vector_composite (descripteur compose d&#39;une reunion de plusieurs descripteurs, pour le P1Bulle par exemple)">MD_Vector_std</a>, md))
<a name="l01129"></a>01129     {
<a name="l01130"></a>01130       <a class="code" href="classDebog__Pb.html#a2c6cec4ca9c5dc5cceb1b433f5c6c802">verifier_partie_std</a>(reference, arr, arr_ref);
<a name="l01131"></a>01131     }
<a name="l01132"></a>01132   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classMD__Vector__composite.html" title="Metadata for a distributed composite vector. This class describes a vector that contains one or more ...">MD_Vector_composite</a>, md))
<a name="l01133"></a>01133     {
<a name="l01134"></a>01134 <span class="comment">// This way, each processor writes each part sequentially</span>
<a name="l01135"></a>01135 <span class="comment">// part1proc1, part1proc2, ... part2proc1, part2proc2, etc...</span>
<a name="l01136"></a>01136       <a class="code" href="classConstIntTab__parts.html">ConstIntTab_parts</a> parts(arr);
<a name="l01137"></a>01137       <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a> ref_part;
<a name="l01138"></a>01138       <span class="keyword">const</span> <span class="keywordtype">int</span> n = parts.<a class="code" href="classConstIntTab__parts.html#a348aa2ba04c711425802a67876121bb7">size</a>();
<a name="l01139"></a>01139       <span class="keywordtype">int</span> index = 0;
<a name="l01140"></a>01140       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++)
<a name="l01141"></a>01141         {
<a name="l01142"></a>01142 <span class="comment">// Construction de la sous-partie de reference:</span>
<a name="l01143"></a>01143 <span class="comment">// (le tableau de reference contient toutes les valeurs sequentielles, sous-partie</span>
<a name="l01144"></a>01144 <span class="comment">// par sous-partie, la taille de la sous-partie est egale au nombre total</span>
<a name="l01145"></a>01145 <span class="comment">// d&#39;items sequentiels multiplie par le linesize de la sous-partie)</span>
<a name="l01146"></a>01146 <span class="comment">// Attention, toutes les sous-parties n&#39;ont pas forcement la meme linesize</span>
<a name="l01147"></a>01147           <span class="keyword">const</span> <a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>&amp; part = parts[i];
<a name="l01148"></a>01148           <span class="keyword">const</span> <span class="keywordtype">int</span> sequential_size = part.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>();
<a name="l01149"></a>01149           <span class="keyword">const</span> <span class="keywordtype">int</span> line_size = part.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>();
<a name="l01150"></a>01150 <span class="comment">// ref_array() veut un tableau non const, mais on va l&#39;utiliser uniquement en const...</span>
<a name="l01151"></a>01151           <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>&amp; cast_array = <a class="code" href="Cast_8h.html#ad3836a067c92103af8df5ad8f35959a6">ref_cast_non_const</a>(<a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a>, reference);
<a name="l01152"></a>01152           ref_part.<a class="code" href="classIntTab.html#a42dfa6b5dafbf88d38adae8872a0be0b" title="identique a DoubleVect::ref_array() (cree un tableau monodimensionnel sans structure parallele) Atten...">ref_array</a>(cast_array, index, sequential_size * line_size);
<a name="l01153"></a>01153 <span class="comment">// Appel recursif pour la sous-partie:</span>
<a name="l01154"></a>01154           <a class="code" href="classDebog__Pb.html#a5f99a56501abf359305f96e89e74bc90">verifier_partie</a>(ref_part, part, arr_ref);
<a name="l01155"></a>01155           index += sequential_size * line_size;
<a name="l01156"></a>01156         }
<a name="l01157"></a>01157     }
<a name="l01158"></a>01158 }
<a name="l01159"></a>01159 
<a name="l01160"></a>01160 <span class="comment">// arr_ref is passed to Debog_Pb::verifier_partie()</span>
<a name="l01161"></a><a class="code" href="classDebog__Pb.html#a02be48aa183ae82d3877d2eea63f534b">01161</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#ad55b5f2d8c833fa81bfb5c242f6c2952">Debog_Pb::verifier_gen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; arr, <a class="code" href="classIntVect.html">IntVect</a> *arr_ref)
<a name="l01162"></a>01162 {
<a name="l01163"></a>01163   <span class="keywordflow">if</span> (!arr.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a4165c00904b7096274e38fdc7ca340f4">non_nul</a>())
<a name="l01164"></a>01164     {
<a name="l01165"></a>01165       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;WARNING in Debog::verifier_gen: array has no parallel metadata. Not checked\n (message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01166"></a>01166       <span class="keywordflow">if</span> (<a class="code" href="classProcess.html#acd052b99706c577f8a5b6656217cf4c2" title="renvoie 1 si on est sur le processeur maitre du groupe courant (c&#39;est a dire me() == 0)...">Process::je_suis_maitre</a>())
<a name="l01167"></a>01167         <a class="code" href="classDebog__Pb.html#aa914f3bdb46074b2b25b485e8f4fa1ed">log_file_</a> &lt;&lt; <span class="stringliteral">&quot;WARNING in Debog::verifier_gen: array has no parallel metadata. Not checked\n (message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; finl;
<a name="l01168"></a>01168       <a class="code" href="classDebog__Pb.html#a774f5eb3fa519cb4b80a9652a02c33a8">detailed_log_file_</a> &lt;&lt; <span class="stringliteral">&quot;WARNING in Debog::verifier_gen: array has no parallel metadata. Not checked\n (message: &quot;</span> &lt;&lt; msg &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; finl;
<a name="l01169"></a>01169       <span class="keywordflow">return</span>;
<a name="l01170"></a>01170     }
<a name="l01171"></a>01171   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#af45cac5b4bd1cbe2531ceed340a543ef">test_ignore_msg</a>(msg))
<a name="l01172"></a>01172     {
<a name="l01173"></a>01173 <span class="comment">// Ignorer ce test</span>
<a name="l01174"></a>01174       <span class="keywordflow">return</span>;
<a name="l01175"></a>01175     }
<a name="l01176"></a>01176   <a class="code" href="classDebog__Pb.html#a5eabeb121aabb29c95272254a3822c3b">goto_msg</a>(msg);
<a name="l01177"></a>01177   <span class="keywordflow">if</span> (<a class="code" href="Cast_8h.html#a9632e68536db6c29c2b754cb55381fbe">sub_type</a>(<a class="code" href="classIntTab.html" title="Tableau a n entrees pour n&lt;= 4 Repose sur un IntVect avec calculs de l&#39;indice corespondant Voir les co...">IntTab</a>, arr))
<a name="l01178"></a>01178     {
<a name="l01179"></a>01179 <span class="comment">// read tab header</span>
<a name="l01180"></a>01180       <a class="code" href="classArrOfInt.html" title="Represente un tableau d&#39;elements de type int. L&#39;etat du tableau est caracterise par la valeur de p_ e...">ArrOfInt</a> dims;
<a name="l01181"></a>01181       <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; dims;
<a name="l01182"></a>01182     }
<a name="l01183"></a>01183   <a class="code" href="classIntVect.html">IntVect</a> reference;
<a name="l01184"></a>01184   <a class="code" href="classDebog__Pb.html#a71bf2e804136f579be6a6bd669918a64">debog_data_file_</a> &gt;&gt; reference;
<a name="l01185"></a>01185 
<a name="l01186"></a>01186   <span class="keyword">const</span> <span class="keywordtype">int</span> n = reference.<a class="code" href="classArrOfInt.html#a0f41611fce0a58c3ef3409dc1af8904d" title="Renvoie la taille du tableau (nombre d&#39;elements declares a la construction ou a resize_array()). C&#39;est le nombre d&#39;elements accessibles a operator[].">size_array</a>();
<a name="l01187"></a>01187   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_items_seq = arr.<a class="code" href="classIntVect.html#ae74e1fee6aca124d32718267e33a40c6">get_md_vector</a>().<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>();
<a name="l01188"></a>01188   <span class="keyword">const</span> <span class="keywordtype">int</span> ls = arr.<a class="code" href="classIntVect.html#a5ba680066169c8e057bb3e3b876e4a8c">line_size</a>();
<a name="l01189"></a>01189   <span class="keywordflow">if</span> (n != nb_items_seq * ls)
<a name="l01190"></a>01190     {
<a name="l01191"></a>01191       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog_Pb::verifier_gen : wrong sequential size &quot;</span> &lt;&lt; n
<a name="l01192"></a>01192            &lt;&lt; <span class="stringliteral">&quot; (expected &quot;</span> &lt;&lt; nb_items_seq * ls &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01193"></a>01193       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01194"></a>01194     }
<a name="l01195"></a>01195 
<a name="l01196"></a>01196   <a class="code" href="classDebog__Pb.html#a5f99a56501abf359305f96e89e74bc90">verifier_partie</a>(reference, arr, arr_ref);
<a name="l01197"></a>01197 }
<a name="l01198"></a>01198 
<a name="l01199"></a>01199 <span class="comment">//</span><span class="comment"></span>
<a name="l01200"></a>01200 <span class="comment">//! if arr_ref is not null and if mode_db_ is &quot;read\&amp;compare&quot;, we put the reference&lt;br&gt;value found in the file in arr_ref. arr_ref and arr can point to the same object.</span>
<a name="l01201"></a><a class="code" href="classDebog__Pb.html#ae65b42cbb4fd935a9d541b97bebec314">01201</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">Debog_Pb::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; arr, <a class="code" href="classIntVect.html">IntVect</a> *arr_ref)
<a name="l01202"></a>01202 {
<a name="l01203"></a>01203   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a768ef4d12da1b93db516c5c8d751a69e">nom_pb_</a> != <a class="code" href="classDebog__Pb.html#a4ed6a6aa71d1e3d5bcb115820c5b4a3c">nom_pb_actuel_</a>)
<a name="l01204"></a>01204     <span class="keywordflow">return</span>;
<a name="l01205"></a>01205 
<a name="l01206"></a>01206   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#af45cac5b4bd1cbe2531ceed340a543ef">test_ignore_msg</a>(msg))
<a name="l01207"></a>01207     {
<a name="l01208"></a>01208 <span class="comment">// Ignorer ce test</span>
<a name="l01209"></a>01209       <span class="keywordflow">return</span>;
<a name="l01210"></a>01210     }
<a name="l01211"></a>01211   <a class="code" href="Debog_8cpp.html#a5d4370767e286c0cf2af58db7d6bc483">debog_break_test</a>(<a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a>);
<a name="l01212"></a>01212   <span class="keywordflow">if</span>(<a class="code" href="classDebog__Pb.html#a5e5f898c0cca38b4a39b9aebe329d5be">mode_db_</a> == 0)
<a name="l01213"></a>01213     {
<a name="l01214"></a>01214       <a class="code" href="classDebog__Pb.html#aa01fc3f495df669f2b59b8358c553da9">ecrire_gen</a>(msg, arr);
<a name="l01215"></a>01215     }
<a name="l01216"></a>01216   <span class="keywordflow">else</span>
<a name="l01217"></a>01217     {
<a name="l01218"></a>01218       <a class="code" href="classDebog__Pb.html#ad55b5f2d8c833fa81bfb5c242f6c2952">verifier_gen</a>(msg, arr, arr_ref);
<a name="l01219"></a>01219     }
<a name="l01220"></a>01220   <a class="code" href="classDebog__Pb.html#ac2d113b312781828449c508b39f43fd8">debog_msg_count_</a>++;
<a name="l01221"></a>01221 }
<a name="l01222"></a>01222 
<a name="l01223"></a><a class="code" href="classDebog.html#a878c2bf73ae0cce22304ab4927020938">01223</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#aa228f7e951ef67b9e9bb31ced928652f">Debog::verifier</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; x)
<a name="l01224"></a>01224 {
<a name="l01225"></a>01225   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l01226"></a>01226     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x);
<a name="l01227"></a>01227 }
<a name="l01228"></a>01228 
<a name="l01229"></a>01229 <span class="comment">//</span><span class="comment"></span>
<a name="l01230"></a>01230 <span class="comment">//! like verifier(), but, in &quot;read\&amp;compare&quot; mode, put the reference&lt;br&gt;value found in the file in the ref variable. x and ref can point to the same object.</span>
<a name="l01231"></a><a class="code" href="classDebog.html#a15b7c5b29afd0654250e1fbc74f317c0">01231</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog.html#a52ab9548f200a42da12cb62a4440266b" title="like verifier(), but, in &quot;read\&amp;compare&quot; mode, put the reference value found in the file in the ref v...">Debog::verifier_getref</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; x, <a class="code" href="classIntVect.html">IntVect</a>&amp; ref)
<a name="l01232"></a>01232 {
<a name="l01233"></a>01233   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l01234"></a>01234     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg, x, &amp;ref);
<a name="l01235"></a>01235 }
<a name="l01236"></a>01236 
<a name="l01237"></a>01237 
<a name="l01238"></a>01238 <span class="comment">//</span>
<a name="l01239"></a>01239 <span class="comment">//</span><span class="comment"></span>
<a name="l01240"></a>01240 <span class="comment">//! md_lignes: descripteur des indices de lignes (cad descripteur du vecteur b dans A*x=b)&lt;br&gt;mb_colonnes: idem, indices colonnes (cad descripteur du vecteur x dans A*x=b)</span>
<a name="l01241"></a><a class="code" href="classDebog__Pb.html#a6d28488ff980712c6836cbb982ea2ca6">01241</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a6d28488ff980712c6836cbb982ea2ca6" title="md_lignes: descripteur des indices de lignes (cad descripteur du vecteur b dans A*x=b) mb_colonnes: i...">Debog_Pb::verifier_matrice</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classMatrice__Base.html">Matrice_Base</a>&amp; matrice,
<a name="l01242"></a>01242                                 <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_lignes, <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md_colonnes)
<a name="l01243"></a>01243 {
<a name="l01244"></a>01244 <span class="comment">// Attention: cette implementation ne marche que pour les types md_colonnes enregistres dans renum_array_</span>
<a name="l01245"></a>01245 <span class="comment">// (cad types simples sommets, elements, faces, aretes, et pas les MD_Vector_composite)</span>
<a name="l01246"></a>01246 <span class="comment">// et uniquement pour linesize==1 (une ligne et une colonne de la matrice par item)</span>
<a name="l01247"></a>01247 
<a name="l01248"></a>01248 <span class="comment">// Pour chaque colonne i de la matrice, ecriture du produit matrice * vecteur_i</span>
<a name="l01249"></a>01249 <span class="comment">// avec vecteur_i[j] = (i==j);</span>
<a name="l01250"></a>01250   <a class="code" href="classDoubleVect.html">DoubleVect</a> vecteur_i;
<a name="l01251"></a>01251   <a class="code" href="classDoubleVect.html">DoubleVect</a> tmp;
<a name="l01252"></a>01252   <a class="code" href="MD__Vector__tools_8cpp.html#aff1ed2791dba1a76fdb300920147cfdf">MD_Vector_tools::creer_tableau_distribue</a>(md_colonnes, vecteur_i);
<a name="l01253"></a>01253   <a class="code" href="MD__Vector__tools_8cpp.html#aff1ed2791dba1a76fdb300920147cfdf">MD_Vector_tools::creer_tableau_distribue</a>(md_lignes, tmp);
<a name="l01254"></a>01254   <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> id;
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 <span class="comment">// Boucle sur les items sequentiels du vecteur x de A*x=b</span>
<a name="l01257"></a>01257   <span class="keyword">const</span> <span class="keywordtype">int</span> nb_colonnes = md_colonnes.<a class="code" href="classMD__Vector.html#a41324dfaa7a973091d0a8276908d10e2">valeur</a>().<a class="code" href="classMD__Vector__base.html#a47d5867ac692b62645169eae6e2cafa0">nb_items_seq_tot</a>();
<a name="l01258"></a>01258 
<a name="l01259"></a>01259   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_colonnes; i++)
<a name="l01260"></a>01260     {
<a name="l01261"></a>01261       <span class="keywordtype">int</span> renum_i;
<a name="l01262"></a>01262       <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a5e5f898c0cca38b4a39b9aebe329d5be">mode_db_</a> == 0)
<a name="l01263"></a>01263         {
<a name="l01264"></a>01264           renum_i = i;
<a name="l01265"></a>01265         }
<a name="l01266"></a>01266       <span class="keywordflow">else</span>
<a name="l01267"></a>01267         {
<a name="l01268"></a>01268 <span class="comment">// Recherche l&#39;indice local correspondant a l&#39;indice sequentiel i</span>
<a name="l01269"></a>01269 <span class="comment">// Si i est un item virtuel on le prend quand meme: vecteur_i aura son espace virtuel a jour</span>
<a name="l01270"></a>01270 <span class="comment">// Si i n&#39;existe pas sur ce processeur, on met -1</span>
<a name="l01271"></a>01271           renum_i = -1;
<a name="l01272"></a>01272 <span class="comment">// Renum_colonnes[j] est l&#39;indice dans le vecteur de reference sequentiel de l&#39;item j sur ce processeur</span>
<a name="l01273"></a>01273           <span class="keyword">const</span> <a class="code" href="classIntVect.html">IntVect</a>&amp; renum_colonnes = <a class="code" href="classDebog__Pb.html#a456bb2ea6106b40cc880b7b0ae1c2116">find_renum_vector</a>(md_colonnes, <span class="keywordtype">id</span>);
<a name="l01274"></a>01274           <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a> = renum_colonnes.<a class="code" href="classIntVect.html#afa716e1f0a1f0f74f4f73e95b5651412" title="Identique a size_array()">size_totale</a>();
<a name="l01275"></a>01275           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="Nom_8cpp.html#a0e1ea19fb9fa7881d15d84eff4c090e1">sz</a>; j++)
<a name="l01276"></a>01276             {
<a name="l01277"></a>01277               <span class="keywordflow">if</span> (renum_colonnes[j] == i)
<a name="l01278"></a>01278                 {
<a name="l01279"></a>01279                   renum_i = j;
<a name="l01280"></a>01280                   <span class="keywordflow">break</span>;
<a name="l01281"></a>01281                 }
<a name="l01282"></a>01282             }
<a name="l01283"></a>01283         }
<a name="l01284"></a>01284       <span class="keywordflow">if</span> (renum_i &gt;= 0)
<a name="l01285"></a>01285         vecteur_i[renum_i] = 1.;
<a name="l01286"></a>01286       matrice.<a class="code" href="classMatrice__Base.html#a05caa487a25a6d5e7fbd38d4b2f4ee1e" title="Multiplication d&#39;un vecteur par la matrice. Operation: r = A*x.">multvect</a>(vecteur_i, tmp);
<a name="l01287"></a>01287       <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a> msg2(msg);
<a name="l01288"></a>01288       msg2 += <span class="stringliteral">&quot; produit avec base &quot;</span>;
<a name="l01289"></a>01289       msg2 += <a class="code" href="classNom.html" title="class Nom Une chaine de caractere pour nommer les objets de TRUST">Nom</a>(i);
<a name="l01290"></a>01290       <a class="code" href="classDebog__Pb.html#ae8b5fd89d6a010734da1b3467b32067c">verifier</a>(msg2, tmp);
<a name="l01291"></a>01291       <span class="keywordflow">if</span> (renum_i &gt;= 0)
<a name="l01292"></a>01292         vecteur_i[renum_i] = 0.;
<a name="l01293"></a>01293     }
<a name="l01294"></a>01294 }
<a name="l01295"></a>01295 
<a name="l01296"></a><a class="code" href="classDebog__Pb.html#a48bf03794aea56ca3383896ed6f5efaf">01296</a> <span class="keywordtype">void</span> <a class="code" href="classDebog__Pb.html#a48bf03794aea56ca3383896ed6f5efaf">Debog_Pb::verifier_Mat_elems</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classMatrice__Base.html">Matrice_Base</a>&amp; la_matrice)
<a name="l01297"></a>01297 {
<a name="l01298"></a>01298 <span class="comment">// Cherche le md_vecteur des elements</span>
<a name="l01299"></a>01299 
<a name="l01300"></a>01300   <span class="keyword">const</span> <span class="keywordtype">int</span> n = <a class="code" href="classDebog__Pb.html#a9c83c33f990c305602017f565863f723">renum_id_</a>.<a class="code" href="classvect__impl.html#a78155bfbd6b61f4710b9830641ed1694">size</a>();
<a name="l01301"></a>01301   <span class="keywordtype">int</span> i;
<a name="l01302"></a>01302   <span class="keywordflow">for</span> (i = 0; i &lt; n; i++)
<a name="l01303"></a>01303     {
<a name="l01304"></a>01304       <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a9c83c33f990c305602017f565863f723">renum_id_</a>[i] == <span class="stringliteral">&quot;ELEM&quot;</span>)
<a name="l01305"></a>01305         <span class="keywordflow">break</span>;
<a name="l01306"></a>01306     }
<a name="l01307"></a>01307   <span class="keywordflow">if</span> (i == n)
<a name="l01308"></a>01308     {
<a name="l01309"></a>01309       <a class="code" href="EntreeSortie_8h.html#a5ebb6b5243d6167369bddecb78d0b5b8">Cerr</a> &lt;&lt; <span class="stringliteral">&quot;Error in Debog_Pb::verifier_Mat_elems no registered MD_Vector for ELEM type&quot;</span> &lt;&lt; <a class="code" href="EntreeSortie_8h.html#a7f716d3c5b6411631d5d0700ead09467">finl</a>;
<a name="l01310"></a>01310       <a class="code" href="classProcess.html#acc2fbbe761e08e5870ae605c0705491c" title="Routine de sortie de Trio-U sur une erreur Sauvegarde la memoire et le hierarchie dans les fichiers &quot;...">exit</a>();
<a name="l01311"></a>01311     }
<a name="l01312"></a>01312   <span class="keyword">const</span> <a class="code" href="classMD__Vector.html" title=": Cette classe est un DERIV mais l&#39;objet pointe est partage entre plusieurs instances de cette classe...">MD_Vector</a>&amp; md = <a class="code" href="classDebog__Pb.html#a56003c9d98149fc62c2c3754bc86b5f7">known_md_</a>[i];
<a name="l01313"></a>01313   <a class="code" href="classDebog__Pb.html#a6d28488ff980712c6836cbb982ea2ca6" title="md_lignes: descripteur des indices de lignes (cad descripteur du vecteur b dans A*x=b) mb_colonnes: i...">verifier_matrice</a>(msg, la_matrice, md, md);
<a name="l01314"></a>01314 }
<a name="l01315"></a>01315 
<a name="l01316"></a><a class="code" href="classDebog.html#a88b710ff69eb3864c9af02904ea0cf6f">01316</a> <span class="keywordtype">void</span> <a class="code" href="classDebog.html#a88b710ff69eb3864c9af02904ea0cf6f">Debog::verifier_Mat_elems</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> msg, <span class="keyword">const</span> <a class="code" href="classMatrice__Base.html">Matrice_Base</a>&amp; la_matrice)
<a name="l01317"></a>01317 {
<a name="l01318"></a>01318   <span class="keywordflow">if</span> (<a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().non_nul())
<a name="l01319"></a>01319     <a class="code" href="classDebog__Pb.html#a34395afde1aa2fda3d2f4f4fc85fd444">Debog_Pb::get_debog_instance</a>().<a class="code" href="classRef__Debog__Pb.html#a7f88fbc173b6acd04189355060aa898d">valeur</a>().<a class="code" href="classDebog__Pb.html#a48bf03794aea56ca3383896ed6f5efaf">verifier_Mat_elems</a>(msg, la_matrice);
<a name="l01320"></a>01320 }
<a name="l01321"></a>01321 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 14 2021 19:35:15 for TRUST by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
